cscope 15 /home/liao/chenyujie/GEM5/nvmain-Aug               0001092961
	@Banks/BankFactory.cpp

34 
	~"Bªks/BªkFaùÜy.h
"

35 
	~<io¡»am
>

38 
	~"Bªks/DDR3Bªk/DDR3Bªk.h
"

39 
	~"Bªks/CachedDDR3Bªk/CachedDDR3Bªk.h
"

41 
usšg
 
Çme¥aû
 
	gNVM
;

43 
Bªk
 *
	gBªkFaùÜy
::
C»©eBªk
Ğ
¡d
::
¡ršg
 
bªkName
 )

45 
Bªk
 *
bªk
 = 
NULL
;

47 ifĞ
	gbªkName
 =ğ"DDR3" ) 
bªk
 = 
Ãw
 
DDR3Bªk
( );

48 ifĞ
	gbªkName
 =ğ"CachedDDR3" ) 
bªk
 = 
Ãw
 
CachedDDR3Bªk
( );

52  
	gbªk
;

55 
Bªk
 *
	gBªkFaùÜy
::
C»©eNewBªk
Ğ
¡d
::
¡ršg
 
bªkName
 )

57 
Bªk
 *
bªk
 = 
NULL
;

59 
	gbªk
 = 
C»©eBªk
Ğ
bªkName
 );

62 ifĞ
	gbªk
 =ğ
NULL
 )

64 
bªk
 = 
Ãw
 
DDR3Bªk
( );

66 
	g¡d
::
cout
 << "Could‚Ù fšd Bªk‚amed `" << 
bªkName


67 << "'. Usšg DDR3Bªk." << 
¡d
::
’dl
;

70  
	gbªk
;

73 
Bªk
 *
	gBªkFaùÜy
::
C»©eBªkNoW¬n
Ğ
¡d
::
¡ršg
 
bªkName
 )

75 
Bªk
 *
bªk
 = 
NULL
;

77 
	gbªk
 = 
C»©eBªk
Ğ
bªkName
 );

79 ifĞ
	gbªk
 =ğ
NULL
 )

80 
bªk
 = 
Ãw
 
DDR3Bªk
( );

82  
	gbªk
;

	@Banks/BankFactory.h

34 #iâdeà
__BANKFACTORY_H__


35 
	#__BANKFACTORY_H__


	)

37 
	~"¤c/Bªk.h
"

38 
	~<¡ršg
>

40 
Çme¥aû
 
	gNVM
 {

42 şas 
	cBªkFaùÜy


44 
	gpublic
:

45 
BªkFaùÜy
( ) { }

46 ~
BªkFaùÜy
( ) { }

48 
Bªk
 *
C»©eNewBªk
Ğ
¡d
::
¡ršg
 
bªkName
 );

49 
Bªk
 *
C»©eBªkNoW¬n
Ğ
¡d
::
¡ršg
 
bªkName
 );

51 
	g´iv©e
:

52 
Bªk
 *
C»©eBªk
Ğ
¡d
::
¡ršg
 
bªkName
 );

	@Banks/CachedDDR3Bank/CachedDDR3Bank.cpp

36 
	~"Bªks/CachedDDR3Bªk/CachedDDR3Bªk.h
"

37 
	~"šşude/NVMH–³rs.h
"

38 
	~"¤c/Ev’tQueue.h
"

40 
	~<ÿs£¹
>

42 
usšg
 
Çme¥aû
 
	gNVM
;

45 
	gCachedDDR3Bªk
::
	$CachedDDR3Bªk
( )

47 
ÿchedRowBufãr
 = 
NULL
;

48 
»adOÆyBufãrs
 = 
Œue
;

49 
rowBufãrSize
 = 32;

50 
rowBufãrCouÁ
 = 4;

52 
šRDBCouÁ
 = 0;

53 
RDBAÎoÿtiÚs
 = 0;

54 
wr™ebackCouÁ
 = 0;

55 
RDBR—ds
 = 0;

56 
RDBWr™es
 = 0;

57 
®loÿtiÚR—dsHi¡o
 = "";

58 
®loÿtiÚWr™esHi¡o
 = "";

59 
	}
}

62 
	gCachedDDR3Bªk
::~
	$CachedDDR3Bªk
( )

64 ifĞ
ÿchedRowBufãr
 )

66  
ncouÁ”_t
 
bufãrIdx
 = 0; bufãrIdx < 
rowBufãrCouÁ
; bufferIdx++ )

68 
d–‘e
 
ÿchedRowBufãr
[
bufãrIdx
]->
dœty
;

69 
d–‘e
 
ÿchedRowBufãr
[
bufãrIdx
];

72 
d–‘e
 [] 
ÿchedRowBufãr
;

74 
	}
}

77 
	gCachedDDR3Bªk
::
	$S‘CÚfig
Ğ
CÚfig
 *
cÚfig
, 
boŞ
 
ü—‹Chd»n
 )

80 
cÚfig
->
	`G‘V®ueUL
Ğ"COLS", 
rowBufãrSize
 );

82 
cÚfig
->
	`G‘BoŞ
Ğ"CachedRowsR—dOÆy", 
»adOÆyBufãrs
 );

83 
cÚfig
->
	`G‘V®ueUL
Ğ"CachedRowSize", 
rowBufãrSize
 );

84 
cÚfig
->
	`G‘V®ueUL
Ğ"CachedRowCouÁ", 
rowBufãrCouÁ
 );

87 
ÿchedRowBufãr
 = 
Ãw
 
CachedRowBufãr
*[
rowBufãrCouÁ
];

88  
ncouÁ”_t
 
bufãrIdx
 = 0; bufãrIdx < 
rowBufãrCouÁ
; bufferIdx++ )

90 
ÿchedRowBufãr
[
bufãrIdx
] = 
Ãw
 
CachedRowBufãr
;

91 
ÿchedRowBufãr
[
bufãrIdx
]->
u£d
 = 
çl£
;

92 
ÿchedRowBufãr
[
bufãrIdx
]->
dœty
 = 
Ãw
 
boŞ
[
rowBufãrSize
];

93  
ncouÁ”_t
 
dœtyIdx
 = 0; dœtyIdx < 
rowBufãrSize
; dirtyIdx++ )

95 
ÿchedRowBufãr
[
bufãrIdx
]->
dœty
[
dœtyIdx
] = 
çl£
;

99 
DDR3Bªk
::
	`S‘CÚfig
Ğ
cÚfig
, 
ü—‹Chd»n
 );

100 
	}
}

103 
boŞ
 
	gCachedDDR3Bªk
::
	$Aùiv©e
Ğ
NVMašReque¡
 *
»que¡
 )

105 
boŞ
 
foundRDB
 = 
çl£
;

107 
	`as£¹
Ğ
ÃxtAùiv©e
 <ğ
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
() );

110  
ncouÁ”_t
 
bufãrIdx
 = 0; bufãrIdx < 
rowBufãrCouÁ
; bufferIdx++ )

113 ifĞ
ÿchedRowBufãr
[
bufãrIdx
]->
u£d
 &&

114 
»que¡
->
add»ss
.
	`G‘Row
Ğè=ğ
ÿchedRowBufãr
[
bufãrIdx
]->address.GetRow( ) )

116 
foundRDB
 = 
Œue
;

121 ifĞ!
ÿchedRowBufãr
[
bufãrIdx
]->
u£d
 && !
foundRDB
 )

123 
foundRDB
 = 
Œue
;

124 
ÿchedRowBufãr
[
bufãrIdx
]->
u£d
 = 
Œue
;

125 
ÿchedRowBufãr
[
bufãrIdx
]->
add»ss
 = 
»que¡
->address;

126 
ÿchedRowBufãr
[
bufãrIdx
]->
cŞS¹
 = 
»que¡
->
add»ss
.
	`G‘CŞ
()

127 - (
»que¡
->
add»ss
.
	`G‘CŞ
(è% 
rowBufãrSize
);

128 
ÿchedRowBufãr
[
bufãrIdx
]->
cŞEnd
 = cachedRowBufãr[bufãrIdx]->
cŞS¹
 + 
rowBufãrSize
;

129 
ÿchedRowBufãr
[
bufãrIdx
]->
»ads
 = 0;

130 
ÿchedRowBufãr
[
bufãrIdx
]->
wr™es
 = 0;

132 
RDBAÎoÿtiÚs
++;

144 
ncouÁ”_t
 
dœtyCouÁ
 = 0;

146 ifĞ!
foundRDB
 )

148 
ncouÁ”_t
 
bufãrIdx
 = 
rowBufãrCouÁ
 - 1;

150 ifĞ
®loÿtiÚR—dsM­
.
	`couÁ
Ğ
ÿchedRowBufãr
[
bufãrIdx
]->
»ads
 ) )

151 
®loÿtiÚR—dsM­
[ 
ÿchedRowBufãr
[
bufãrIdx
]->
»ads
 ]++;

153 
®loÿtiÚR—dsM­
[ 
ÿchedRowBufãr
[
bufãrIdx
]->
»ads
 ] = 1;

155 ifĞ
®loÿtiÚWr™esM­
.
	`couÁ
Ğ
ÿchedRowBufãr
[
bufãrIdx
]->
wr™es
 ) )

156 
®loÿtiÚWr™esM­
[ 
ÿchedRowBufãr
[
bufãrIdx
]->
wr™es
 ]++;

158 
®loÿtiÚWr™esM­
[ 
ÿchedRowBufãr
[
bufãrIdx
]->
wr™es
 ] = 1;

160 
ÿchedRowBufãr
[
bufãrIdx
]->
u£d
 = 
Œue
;

161 
ÿchedRowBufãr
[
bufãrIdx
]->
add»ss
 = 
»que¡
->address;

162 
ÿchedRowBufãr
[
bufãrIdx
]->
cŞS¹
 = 
»que¡
->
add»ss
.
	`G‘CŞ
()

163 - (
»que¡
->
add»ss
.
	`G‘CŞ
(è% 
rowBufãrSize
);

164 
ÿchedRowBufãr
[
bufãrIdx
]->
cŞEnd
 = cachedRowBufãr[bufãrIdx]->
cŞS¹
 + 
rowBufãrSize
;

165 
ÿchedRowBufãr
[
bufãrIdx
]->
»ads
 = 0;

166 
ÿchedRowBufãr
[
bufãrIdx
]->
wr™es
 = 0;

168 
RDBAÎoÿtiÚs
++;

175  
ncouÁ”_t
 
dœtyIdx
 = 0; dœtyIdx < 
rowBufãrSize
; dirtyIdx++ )

177 ifĞ
ÿchedRowBufãr
[
bufãrIdx
]->
dœty
[
dœtyIdx
] )

178 
dœtyCouÁ
++;

180 
ÿchedRowBufãr
[
bufãrIdx
]->
dœty
[
dœtyIdx
] = 
çl£
;

183 
wr™ebackCouÁ
 +ğ
dœtyCouÁ
;

186 
	`as£¹
Ğ!(
»adOÆyBufãrs
 && 
dœtyCouÁ
 > 0) );

188 
ncyşe_t
 
aùiv©eTim”
 = 0;

192 ifĞ
dœtyCouÁ
 > 0 )

194 
aùiv©eTim”
 +ğ
p
->
tRCD
;

195 
aùiv©eTim”
 -ğ
p
->
tAL
;

196 
aùiv©eTim”
 +ğ
	`MAX
Ğ
p
->
tBURST
,…->
tCCD
 )

197 * (
dœtyCouÁ
 - 1);

198 
aùiv©eTim”
 +ğ
p
->
tAL
 +…->
tCWD


199 + 
p
->
tBURST
 +…->
tWR
;

200 
aùiv©eTim”
 +ğ(
p
->
U£P»ch¬ge


201 ? 
p
->
tRP
 : 0);

204 
aùiv©eTim”
 +ğ
p
->
tRCD
;

205 
aùiv©eTim”
 +ğ
rowBufãrSize
 * 
p
->
tCCD
;

213 
ÃxtR—d
 = 
	`MAX
ĞÃxtR—d, 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
(è+ 
aùiv©eTim”
 - 
p
->
tAL
 - 
rowBufãrSize
 *…->
tCCD
 +…->tCCD );

214 
ÃxtWr™e
 = 
	`MAX
ĞÃxtWr™e, 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
(è+ 
aùiv©eTim”
 - 
p
->
tAL
 - 
rowBufãrSize
 *…->
tCCD
 );

216 
ÃxtP»ch¬ge
 = 
	`MAX
ĞÃxtP»ch¬ge, 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
(è+ MAX(
aùiv©eTim”
, 
p
->
tRAS
) );

217 
ÃxtPow”Down
 = 
	`MAX
ĞÃxtPow”Down, 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
(è+ MAX(
aùiv©eTim”
, 
p
->
tRAS
) );

220 
ncouÁ”_t
 
aùiv©eRow
, 
aùiv©eSubA¼ay
;

221 
»que¡
->
add»ss
.
	`G‘T¿n¦©edAdd»ss
Ğ&
aùiv©eRow
, 
NULL
, NULL, NULL, NULL, &
aùiv©eSubA¼ay
 );

225 
boŞ
 
sucûss
 = 
	`G‘Chd
Ğ
»que¡
 )->
	`IssueCommªd
(„equest );

227 ifĞ
sucûss
 )

230 
İ’Row
 = 
aùiv©eRow
;

231 
¡©e
 = 
DDR3BANK_OPEN
;

232 
aùiveSubA¼ayQueue
.
	`push_äÚt
Ğ
aùiv©eSubA¼ay
 );

233 
aùiv©es
++;

237 
¡d
::
û¼
 << "NVMaš E¼Ü: Bªk " << 
bªkId
 << " failedo "

238 << "aùiv©thsub¬¿y " << 
aùiv©eSubA¼ay
 << 
¡d
::
’dl
;

241  
sucûss
;

242 
	}
}

245 
boŞ
 
	gCachedDDR3Bªk
::
	$R—d
Ğ
NVMašReque¡
 *
»que¡
 )

247 
boŞ
 
rv
 = 
çl£
;

250  
ncouÁ”_t
 
bufãrIdx
 = 0; bufãrIdx < 
rowBufãrCouÁ
; bufferIdx++ )

252 ifĞ
ÿchedRowBufãr
[
bufãrIdx
]->
add»ss
.
	`G‘Row
Ğè=ğ
»que¡
->address.GetRow( )

253 && 
»que¡
->
add»ss
.
	`G‘CŞ
Ğè>ğ
ÿchedRowBufãr
[
bufãrIdx
]->
cŞS¹


254 && 
»que¡
->
add»ss
.
	`G‘CŞ
Ğè< 
ÿchedRowBufãr
[
bufãrIdx
]->
cŞEnd
 )

256 
rv
 = 
Œue
;

259 
ÃxtR—d
 = 
	`MAX
ĞÃxtR—d, 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
(è+ MAXĞ
p
->
tBURST
,…->
tRDB
 ) );

260 
ÃxtWr™e
 = 
	`MAX
ĞÃxtWr™e, 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
(è+ MAXĞ
p
->
tBURST
,…->
tRDB
 ) +…->
tRTRS
 );

263 
NVMašReque¡
 *
busReq
 = 
Ãw
 
	`NVMašReque¡
( );

264 *
busReq
 = *
»que¡
;

265 
busReq
->
ty³
 = 
BUS_READ
;

266 
busReq
->
owÃr
 = 
this
;

268 
	`G‘Ev’tQueue
Ğ)->
	`In£¹Ev’t
Ğ
Ev’tRe¥Ú£
, 
this
, 
busReq
,

269 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
() + 1 );

272 
	`G‘Ev’tQueue
Ğ)->
	`In£¹Ev’t
Ğ
Ev’tRe¥Ú£
, 
this
, 
»que¡
,

273 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
(è+ 
	`MAX
Ğ
p
->
tBURST
,…->
tRDB
 ) );

276 
»que¡
->
ty³
 = (»que¡->ty³ =ğ
CACHED_READ
 ? 
READ
 :„equest->type);

282 
RDBR—ds
++;

283 
ÿchedRowBufãr
[
bufãrIdx
]->
»ads
++;

286 
CachedRowBufãr
 *
‹mpBufãr
 = 
ÿchedRowBufãr
[
bufãrIdx
];

288  
ušt64_t
 
j
 = 
bufãrIdx
; j > 0; j-- )

290 
ÿchedRowBufãr
[
j
] = cachedRowBuffer[j-1];

293 
ÿchedRowBufãr
[0] = 
‹mpBufãr
;

299 ifĞ!
rv
 )

301 
rv
 = 
DDR3Bªk
::
	`R—d
Ğ
»que¡
 );

304  
rv
;

305 
	}
}

308 
boŞ
 
	gCachedDDR3Bªk
::
	$Wr™e
Ğ
NVMašReque¡
 *
»que¡
 )

310 
boŞ
 
rv
 = 
çl£
;

313 ifĞ!
»adOÆyBufãrs
 )

315  
ncouÁ”_t
 
bufãrIdx
 = 0; bufãrIdx < 
rowBufãrCouÁ
; bufferIdx++ )

317 ifĞ
ÿchedRowBufãr
[
bufãrIdx
]->
add»ss
.
	`G‘Row
Ğè=ğ
»que¡
->address.GetRow( )

318 && 
»que¡
->
add»ss
.
	`G‘CŞ
Ğè>ğ
ÿchedRowBufãr
[
bufãrIdx
]->
cŞS¹


319 && 
»que¡
->
add»ss
.
	`G‘CŞ
Ğè< 
ÿchedRowBufãr
[
bufãrIdx
]->
cŞEnd
 )

321 
rv
 = 
Œue
;

324 
ÃxtR—d
 = 
	`MAX
ĞÃxtR—d, 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
(è+ MAXĞ
p
->
tBURST
,…->
tRDB
 ) +…->
tRTRS
 );

325 
ÃxtWr™e
 = 
	`MAX
ĞÃxtWr™e, 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
(è+ MAXĞ
p
->
tBURST
,…->
tRDB
 ) );

328 
ÿchedRowBufãr
[
bufãrIdx
]->
dœty
[
»que¡
->
add»ss
.
	`G‘CŞ
Ğ)] = 
Œue
;

331 
NVMašReque¡
 *
busReq
 = 
Ãw
 
	`NVMašReque¡
( );

332 *
busReq
 = *
»que¡
;

333 
busReq
->
ty³
 = 
BUS_WRITE
;

334 
busReq
->
owÃr
 = 
this
;

336 
	`G‘Ev’tQueue
Ğ)->
	`In£¹Ev’t
Ğ
Ev’tRe¥Ú£
, 
this
, 
busReq
,

337 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
() + 1 );

340 
	`G‘Ev’tQueue
Ğ)->
	`In£¹Ev’t
Ğ
Ev’tRe¥Ú£
, 
this
, 
»que¡
,

341 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
(è+ 
	`MAX
Ğ
p
->
tBURST
,…->
tRDB
 ) );

344 
»que¡
->
ty³
 = (»que¡->ty³ =ğ
CACHED_WRITE
 ? 
WRITE
 :„equest->type);

350 
RDBWr™es
++;

351 
ÿchedRowBufãr
[
bufãrIdx
]->
wr™es
++;

354 
CachedRowBufãr
 *
‹mpBufãr
 = 
ÿchedRowBufãr
[
bufãrIdx
];

356  
ušt64_t
 
j
 = 
bufãrIdx
; j > 0; j-- )

358 
ÿchedRowBufãr
[
j
] = cachedRowBuffer[j-1];

361 
ÿchedRowBufãr
[0] = 
‹mpBufãr
;

368 ifĞ!
rv
 )

370 
rv
 = 
DDR3Bªk
::
	`Wr™e
Ğ
»que¡
 );

373  
rv
;

374 
	}
}

377 
boŞ
 
	gCachedDDR3Bªk
::
	$IsIssuabË
Ğ
NVMašReque¡
 *
»que¡
, 
FaR—sÚ
 *
»asÚ
 )

379 
boŞ
 
rv
 = 
çl£
;

380 
boŞ
 
šRDB
 = 
çl£
;

381 
boŞ
 
ÿch—bËReque¡
 = 
çl£
;

383  
ncouÁ”_t
 
bufãrIdx
 = 0; bufãrIdx < 
rowBufãrCouÁ
; bufferIdx++ )

385 ifĞ
ÿchedRowBufãr
[
bufãrIdx
]->
add»ss
.
	`G‘Row
Ğè=ğ
»que¡
->address.GetRow( )

386 && 
»que¡
->
add»ss
.
	`G‘CŞ
Ğè>ğ
ÿchedRowBufãr
[
bufãrIdx
]->
cŞS¹


387 && 
»que¡
->
add»ss
.
	`G‘CŞ
Ğè< 
ÿchedRowBufãr
[
bufãrIdx
]->
cŞEnd
 )

389 
šRDB
 = 
Œue
;

393 ifĞ
»que¡
->
ty³
 =ğ
READ
 ||„eque¡->ty³ =ğ
READ_PRECHARGE
 ||„eque¡->ty³ =ğ
CACHED_READ
 ||

394 Ğ!
»adOÆyBufãrs
 && (
»que¡
->
ty³
 =ğ
WRITE
 ||„eque¡->ty³ =ğ
WRITE_PRECHARGE


395 || 
»que¡
->
ty³
 =ğ
CACHED_WRITE
 )

399 
ÿch—bËReque¡
 = 
Œue
;

403 ifĞ
šRDB
 && 
ÿch—bËReque¡
 )

405 
	`as£¹
Ğ
»que¡
->
ty³
 =ğ
READ
 ||„eque¡->ty³ =ğ
READ_PRECHARGE
 ||

406 
»que¡
->
ty³
 =ğ
WRITE
 ||„eque¡->ty³ =ğ
WRITE_PRECHARGE
 ||

407 
»que¡
->
ty³
 =ğ
CACHED_READ
 ||„eque¡->ty³ =ğ
CACHED_WRITE
 );

408 
šRDBCouÁ
++;

409 
rv
 = 
Œue
;

416 ifĞ
»que¡
->
ty³
 !ğ
CACHED_READ
 &&„eque¡->ty³ !ğ
CACHED_WRITE
 )

418 
rv
 = 
DDR3Bªk
::
	`IsIssuabË
Ğ
»que¡
, 
»asÚ
 );

421  
rv
;

422 
	}
}

425 
	gCachedDDR3Bªk
::
	$Regi¡”Sts
( )

427 
	`AddSt
(
šRDBCouÁ
);

428 
	`AddSt
(
RDBAÎoÿtiÚs
);

429 
	`AddSt
(
wr™ebackCouÁ
);

430 
	`AddSt
(
RDBR—ds
);

431 
	`AddSt
(
RDBWr™es
);

432 
	`AddSt
(
®loÿtiÚR—dsHi¡o
);

433 
	`AddSt
(
®loÿtiÚWr™esHi¡o
);

434 
	}
}

436 
	gCachedDDR3Bªk
::
	$C®cuÏ‹Sts
( )

438 
®loÿtiÚR—dsHi¡o
 = 
PyDiùHi¡og¿m
<
ušt64_t
, ušt64_t>Ğ
®loÿtiÚR—dsM­
 );

439 
®loÿtiÚWr™esHi¡o
 = 
PyDiùHi¡og¿m
<
ušt64_t
, ušt64_t>Ğ
®loÿtiÚWr™esM­
 );

440 
	}
}

	@Banks/CachedDDR3Bank/CachedDDR3Bank.h

36 #iâdeà
__CACHEDDDR3BANK_H__


37 
	#__CACHEDDDR3BANK_H__


	)

39 
	~"Bªks/DDR3Bªk/DDR3Bªk.h
"

41 
Çme¥aû
 
	gNVM
 {

44 
	sCachedRowBufãr


46 
boŞ
 
	gu£d
;

47 
NVMAdd»ss
 
	gadd»ss
;

48 
boŞ
 *
	gdœty
;

49 
ncouÁ”_t
 
	gcŞS¹
;

50 
ncouÁ”_t
 
	gcŞEnd
;

51 
ncouÁ”_t
 
	g»ads
;

52 
ncouÁ”_t
 
	gwr™es
;

56 şas 
	cCachedDDR3Bªk
 : 
public
 
DDR3Bªk


58 
public
:

59 
CachedDDR3Bªk
( );

60 ~
CachedDDR3Bªk
( );

62 
vœtu®
 
boŞ
 
Aùiv©e
Ğ
NVMašReque¡
 *
»que¡
 );

63 
vœtu®
 
boŞ
 
R—d
Ğ
NVMašReque¡
 *
»que¡
 );

64 
vœtu®
 
boŞ
 
Wr™e
Ğ
NVMašReque¡
 *
»que¡
 );

66 
vœtu®
 
boŞ
 
IsIssuabË
Ğ
NVMašReque¡
 *
»que¡
, 
FaR—sÚ
 *
»asÚ
 = 
NULL
 );

68 
vœtu®
 
S‘CÚfig
Ğ
CÚfig
 *
cÚfig
, 
boŞ
 
ü—‹Chd»n
 = 
Œue
 );

70 
vœtu®
 
Regi¡”Sts
( );

71 
vœtu®
 
C®cuÏ‹Sts
( );

73 
	g´iv©e
:

74 
CachedRowBufãr
 **
ÿchedRowBufãr
;

75 
boŞ
 
	g»adOÆyBufãrs
;

76 
ncouÁ”_t
 
	growBufãrSize
;

77 
ncouÁ”_t
 
	growBufãrCouÁ
;

78 
ncouÁ”_t
 
	gšRDBCouÁ
;

79 
ncouÁ”_t
 
	gRDBAÎoÿtiÚs
;

80 
ncouÁ”_t
 
	gwr™ebackCouÁ
;

81 
ncouÁ”_t
 
	gRDBR—ds
, 
	gRDBWr™es
;

82 
	g¡d
::
m­
<
ušt64_t
, 
	gušt64_t
> 
	g®loÿtiÚR—dsM­
;

83 
	g¡d
::
m­
<
ušt64_t
, 
	gušt64_t
> 
	g®loÿtiÚWr™esM­
;

84 
	g¡d
::
¡ršg
 
®loÿtiÚR—dsHi¡o
;

85 
	g¡d
::
¡ršg
 
®loÿtiÚWr™esHi¡o
;

	@Banks/DDR3Bank/DDR3Bank.cpp

36 
	~"Bªks/DDR3Bªk/DDR3Bªk.h
"

37 
	~"¤c/MemÜyCÚŒŞËr.h
"

38 
	~"¤c/Ev’tQueue.h
"

40 
	~<sigÇl.h
>

41 
	~<ÿs£¹
>

42 
	~<io¡»am
>

43 
	~<s¡»am
>

44 
	~<lim™s
>

46 
usšg
 
Çme¥aû
 
	gNVM
;

48 
	gDDR3Bªk
::
	$DDR3Bªk
( )

50 
ÃxtAùiv©e
 = 0;

51 
ÃxtP»ch¬ge
 = 0;

52 
ÃxtR—d
 = 0;

53 
ÃxtWr™e
 = 0;

54 
ÃxtReäesh
 = 0;

55 
ÃxtReäeshDÚe
 = 0;

56 
ÃxtPow”Down
 = 0;

57 
ÃxtPow”DownDÚe
 = 0;

58 
ÃxtPow”Up
 = 0;

59 
ÃxtCommªd
 = 
CMD_NOP
;

61 
dummySt
 = 0;

63 
subA¼ayNum
 = 0;

64 
aùiveSubA¼ayQueue
.
	`ş—r
();

67 
MATWidth
 = 512;

68 
MATHeight
 = 512;

70 
¡©e
 = 
DDR3BANK_CLOSED
;

71 
Ï¡Aùiv©e
 = 0;

72 
İ’Row
 = 0;

74 
bªkEÃrgy
 = 0.0f;

75 
aùiveEÃrgy
 = 0.0f;

76 
bur¡EÃrgy
 = 0.0f;

77 
»äeshEÃrgy
 = 0.0f;

79 
bªkPow”
 = 0.0f;

80 
aùivePow”
 = 0.0f;

81 
bur¡Pow”
 = 0.0f;

82 
»äeshPow”
 = 0.0f;

84 
bªdwidth
 = 0.0;

85 
d©aCyşes
 = 0;

86 
pow”Cyşes
 = 0;

87 
utiz©iÚ
 = 0.0f;

89 
aùiveCyşes
 = 0;

90 
¡ªdbyCyşes
 = 0;

91 
ç¡Ex™AùiveCyşes
 = 0;

92 
ç¡Ex™P»ch¬geCyşes
 = 0;

93 
¦owEx™P»ch¬geCyşes
 = 0;

94 
wr™eCyşe
 = 
çl£
;

95 
wr™eMode
 = 
WRITE_THROUGH
;

96 
idËTim”
 = 0;

98 
»ads
 = 0;

99 
wr™es
 = 0;

100 
aùiv©es
 = 0;

101 
´ech¬ges
 = 0;

102 
»äeshes
 = 0;

104 
aùWa™s
 = 0;

105 
aùWa™TÙ®
 = 0;

106 
aùWa™Av”age
 = 0.0;

108 
av”ageEndu¿nû
 = 0;

109 
wÜ¡Ca£Endu¿nû
 = 0;

111 
bªkId
 = -1;

112 
	}
}

114 
	gDDR3Bªk
::~
	$DDR3Bªk
( )

116 
	}
}

118 
DDR3Bªk
::
	$S‘CÚfig
Ğ
CÚfig
 *
cÚfig
, 
boŞ
 
ü—‹Chd»n
 )

121 ifĞ
cÚfig
->
	`KeyExi¡s
( "MATWidth" ) )

122 
MATWidth
 = 
¡©ic_ÿ¡
<
ncouÁ”_t
>Ğ
cÚfig
->
	`G‘V®ue
( "MATWidth" ) );

124 
P¬ams
 *
·¿ms
 = 
Ãw
 
	`P¬ams
( );

125 
·¿ms
->
	`S‘P¬ams
Ğ
cÚfig
 );

126 
	`S‘P¬ams
Ğ
·¿ms
 );

128 
MATHeight
 = 
p
->MATHeight;

129 
subA¼ayNum
 = 
p
->
ROWS
 / 
MATHeight
;

131 ifĞ
ü—‹Chd»n
 )

134 
Add»ssT¿n¦©Ü
 *
bªkAT
 = 
Decod”FaùÜy
::
	`C»©eDecod”NoW¬n
Ğ
cÚfig
->
	`G‘SŒšg
( "Decoder" ) );

135 
T¿n¦©iÚM‘hod
 *
m‘hod
 = 
	`G‘P¬’t
()->
	`G‘T¿mpŞše
()->
	`G‘Decod”
()->
	`G‘T¿n¦©iÚM‘hod
();

136 
bªkAT
->
	`S‘T¿n¦©iÚM‘hod
Ğ
m‘hod
 );

137 
bªkAT
->
	`S‘DeçuÉF›ld
Ğ
SUBARRAY_FIELD
 );

138 
bªkAT
->
	`S‘CÚfig
Ğ
cÚfig
, 
ü—‹Chd»n
 );

139 
	`S‘Decod”
Ğ
bªkAT
 );

141  
ncouÁ”_t
 
i
 = 0; i < 
subA¼ayNum
; i++ )

143 
SubA¼ay
 *
ÃxtSubA¼ay
 = 
Ãw
 
	`SubA¼ay
( );

145 
¡d
::
¡ršg¡»am
 
fÜm©‹r
;

147 
fÜm©‹r
 << 
i
;

148 
ÃxtSubA¼ay
->
	`S‘Name
 ( 
fÜm©‹r
.
	`¡r
() );

149 
ÃxtSubA¼ay
->
	`S‘Id
Ğ
i
 );

151 
fÜm©‹r
.
	`¡r
( "" );

152 
fÜm©‹r
<< 
	`StName
Ğè<< ".sub¬¿y" << 
i
;

153 
ÃxtSubA¼ay
->
	`StName
 (
fÜm©‹r
.
	`¡r
( ) );

155 
ÃxtSubA¼ay
->
	`S‘P¬’t
Ğ
this
 );

156 
	`AddChd
Ğ
ÃxtSubA¼ay
 );

158 
ÃxtSubA¼ay
->
	`S‘CÚfig
Ğ
cÚfig
, 
ü—‹Chd»n
 );

159 
ÃxtSubA¼ay
->
	`Regi¡”Sts
( );

163 ifĞ
p
->
In™PD
 )

164 
¡©e
 = 
DDR3BANK_PDPF
;

165 
	}
}

167 
	gDDR3Bªk
::
	$Regi¡”Sts
( )

169 ifĞ
p
->
EÃrgyMod–
 == "current" )

171 
	`AddUn™St
(
bªkEÃrgy
, "mA*t");

172 
	`AddUn™St
(
aùiveEÃrgy
, "mA*t");

173 
	`AddUn™St
(
bur¡EÃrgy
, "mA*t");

174 
	`AddUn™St
(
»äeshEÃrgy
, "mA*t");

178 
	`AddUn™St
(
bªkEÃrgy
, "nJ");

179 
	`AddUn™St
(
aùiveEÃrgy
, "nJ");

180 
	`AddUn™St
(
bur¡EÃrgy
, "nJ");

181 
	`AddUn™St
(
»äeshEÃrgy
, "nJ");

184 
	`AddUn™St
(
bªkPow”
, "W");

185 
	`AddUn™St
(
aùivePow”
, "W");

186 
	`AddUn™St
(
bur¡Pow”
, "W");

187 
	`AddUn™St
(
»äeshPow”
, "W");

189 
	`AddUn™St
(
bªdwidth
, "MB/s");

190 
	`AddSt
(
d©aCyşes
);

191 
	`AddSt
(
pow”Cyşes
);

192 
	`AddSt
(
utiz©iÚ
);

194 
	`AddSt
(
»ads
);

195 
	`AddSt
(
wr™es
);

196 
	`AddSt
(
aùiv©es
);

197 
	`AddSt
(
´ech¬ges
);

198 
	`AddSt
(
»äeshes
);

200 
	`AddSt
(
aùiveCyşes
);

201 
	`AddSt
(
¡ªdbyCyşes
);

202 
	`AddSt
(
ç¡Ex™AùiveCyşes
);

203 
	`AddSt
(
ç¡Ex™P»ch¬geCyşes
);

204 
	`AddSt
(
¦owEx™P»ch¬geCyşes
);

206 
	`AddSt
(
aùWa™s
);

207 
	`AddSt
(
aùWa™TÙ®
);

208 
	`AddSt
(
aùWa™Av”age
);

210 
	`AddSt
(
av”ageEndu¿nû
);

211 
	`AddSt
(
wÜ¡Ca£Endu¿nû
);

212 
	}
}

217 
boŞ
 
	gDDR3Bªk
::
	$Pow”Down
Ğ
NVMašReque¡
 *
»que¡
 )

219 
boŞ
 
»tuºV®ue
 = 
çl£
;

221 ifĞ
ÃxtPow”Down
 <ğ
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
()

222 && ( 
¡©e
 =ğ
DDR3BANK_OPEN
 || s‹ =ğ
DDR3BANK_CLOSED
 ) )

230 
ÃxtPow”Up
 = 
	`MAX
ĞÃxtPow”Up, 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
()

231 + 
p
->
tPD
 );

233 ifĞ
¡©e
 =ğ
DDR3BANK_OPEN
 )

235 
	`as£¹
Ğ
»que¡
->
ty³
 =ğ
POWERDOWN_PDA
 );

236 
¡©e
 = 
DDR3BANK_PDA
;

238 ifĞ
¡©e
 =ğ
DDR3BANK_CLOSED
 )

240  
»que¡
->
ty³
 )

242 
POWERDOWN_PDA
:

243 
POWERDOWN_PDPF
:

244 
¡©e
 = 
DDR3BANK_PDPF
;

247 
POWERDOWN_PDPS
:

248 
¡©e
 = 
DDR3BANK_PDPS
;

252 
¡©e
 = 
DDR3BANK_PDPF
;

257 
»tuºV®ue
 = 
Œue
;

260  
»tuºV®ue
;

261 
	}
}

267 
boŞ
 
	gDDR3Bªk
::
	$Pow”Up
Ğ
NVMašReque¡
 * )

269 
boŞ
 
»tuºV®ue
 = 
çl£
;

271 ifĞ
ÃxtPow”Up
 <ğ
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
()

272 && ( 
¡©e
 =ğ
DDR3BANK_PDPF
 || s‹ =ğ
DDR3BANK_PDPS
 || s‹ =ğ
DDR3BANK_PDA
 ) )

275 
ÃxtPow”Down
 = 
	`MAX
(‚extPowerDown,

276 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
(è+ 
p
->
tXP
 );

278 
ÃxtAùiv©e
 = 
	`MAX
(‚extActivate,

279 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
(è+ 
p
->
tXP
 );

281 
ÃxtP»ch¬ge
 = 
	`MAX
(‚extPrecharge,

282 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
(è+ 
p
->
tXP
 );

283 
ÃxtWr™e
 = 
	`MAX
(‚extWrite,

284 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
(è+ 
p
->
tXP
 );

286 ifĞ
¡©e
 =ğ
DDR3BANK_PDPS
 )

287 
ÃxtR—d
 = 
	`MAX
(‚extRead,

288 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
(è+ 
p
->
tXPDLL
 );

290 
ÃxtR—d
 = 
	`MAX
(‚extRead,

291 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
(è+ 
p
->
tXP
 );

300 ifĞ
¡©e
 =ğ
DDR3BANK_PDA
 )

301 
¡©e
 = 
DDR3BANK_OPEN
;

303 
¡©e
 = 
DDR3BANK_CLOSED
;

305 
»tuºV®ue
 = 
Œue
;

308  
»tuºV®ue
;

309 
	}
}

314 
boŞ
 
	gDDR3Bªk
::
	$Aùiv©e
Ğ
NVMašReque¡
 *
»que¡
 )

318 ifĞ
ÃxtAùiv©e
 > 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
() )

320 
¡d
::
û¼
 << "NVMain Error: Bank violates ACTIVATIONiming constraint!"

321 << 
¡d
::
’dl
;

322  
çl£
;

324 ifĞ
¡©e
 !ğ
DDR3BANK_CLOSED
 )

332 ifĞ
aùiveSubA¼ayQueue
.
	`em±y
( ) )

334 
¡d
::
û¼
 << "NVMain Error:ryo open‡ bankhat is‚ot idle!"

335 << 
¡d
::
’dl
;

336  
çl£
;

340 
ncouÁ”_t
 
aùiv©eRow
, 
aùiv©eSubA¼ay
;

341 
»que¡
->
add»ss
.
	`G‘T¿n¦©edAdd»ss
Ğ&
aùiv©eRow
, 
NULL
, NULL, NULL, NULL, &
aùiv©eSubA¼ay
 );

344 
ÃxtPow”Down
 = 
	`MAX
(‚extPowerDown,

345 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
(è+ 
p
->
tRCD
 );

348 
boŞ
 
sucûss
 = 
	`G‘Chd
Ğ
»que¡
 )->
	`IssueCommªd
(„equest );

350 ifĞ
sucûss
 )

353 
İ’Row
 = 
aùiv©eRow
;

354 
¡©e
 = 
DDR3BANK_OPEN
;

355 
aùiveSubA¼ayQueue
.
	`push_äÚt
Ğ
aùiv©eSubA¼ay
 );

356 
aùiv©es
++;

360 
¡d
::
û¼
 << "NVMaš E¼Ü: Bªk " << 
bªkId
 << " failedo "

361 << "aùiv©thsub¬¿y " << 
aùiv©eSubA¼ay
 << 
¡d
::
’dl
;

364  
sucûss
;

365 
	}
}

370 
boŞ
 
	gDDR3Bªk
::
	$R—d
Ğ
NVMašReque¡
 *
»que¡
 )

374 ifĞ
ÃxtR—d
 > 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
() )

376 
¡d
::
û¼
 << "NVMain Error: Bank violates READiming constraint!"

377 << 
¡d
::
’dl
;

378  
çl£
;

380 ifĞ
¡©e
 !ğ
DDR3BANK_OPEN
 )

382 
¡d
::
û¼
 << "NVMain Error:ryo„ead‡ bankhat is‚ot‡ctive!"

383 << 
¡d
::
’dl
;

384  
çl£
;

387 
ušt64_t
 
»adRow
, 
»adSubA¼ay
;

388 
»que¡
->
add»ss
.
	`G‘T¿n¦©edAdd»ss
Ğ&
»adRow
, 
NULL
, NULL, NULL, NULL, &
»adSubA¼ay
 );

391 ifĞ
»que¡
->
ty³
 =ğ
READ_PRECHARGE
 )

393 
ÃxtPow”Down
 = 
	`MAX
(‚extPowerDown,

394 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
()

395 + 
	`MAX
Ğ
p
->
tBURST
,…->
tCCD
 ) * (
»que¡
->
bur¡CouÁ
 - 1)

396 + 
p
->
tAL
 +…->
tRTP
 +…->
tRP
 );

400 
ÃxtPow”Down
 = 
	`MAX
(‚extPowerDown,

401 
	`MAX
Ğ
p
->
tBURST
,…->
tCCD
 ) * (
»que¡
->
bur¡CouÁ
 - 1)

402 + 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
(è+ 
p
->
tRDPDEN
 );

405 
ÃxtR—d
 = 
	`MAX
(‚extRead,

406 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
()

407 + 
	`MAX
Ğ
p
->
tBURST
,…->
tCCD
 ) * 
»que¡
->
bur¡CouÁ
 );

409 
ÃxtWr™e
 = 
	`MAX
(‚extWrite,

410 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
()

411 + 
	`MAX
Ğ
p
->
tBURST
,…->
tCCD
 ) * (
»que¡
->
bur¡CouÁ
 - 1)

412 + 
p
->
tCAS
 +…->
tBURST
 +…->
tRTRS
 -…->
tCWD
 );

415 
boŞ
 
sucûss
 = 
	`G‘Chd
Ğ
»que¡
 )->
	`IssueCommªd
(„equest );

417 ifĞ
sucûss
 )

419 ifĞ
»que¡
->
ty³
 =ğ
READ_PRECHARGE
 )

421 
´ech¬ges
++;

423 
¡d
::
deque
<
ncouÁ”_t
>::
™”©Ü
 
™
;

424  
™
 = 
aùiveSubA¼ayQueue
.
	`begš
();

425 
™
 !ğ
aùiveSubA¼ayQueue
.
	`’d
(); ++it )

427 ifĞ(*
™
è=ğ
»adSubA¼ay
 )

430 
aùiveSubA¼ayQueue
.
	`”a£
Ğ
™
 );

435 ifĞ
aùiveSubA¼ayQueue
.
	`em±y
() )

436 
¡©e
 = 
DDR3BANK_CLOSED
;

439 
d©aCyşes
 +ğ
p
->
tBURST
;

440 
»ads
++;

444 
¡d
::
û¼
 << "NVMaš E¼Ü: Bªk " << 
bªkId
 << " failedo "

445 << "»adhsub¬¿y " << 
»adSubA¼ay
 << 
¡d
::
’dl
;

448  
sucûss
;

449 
	}
}

454 
boŞ
 
	gDDR3Bªk
::
	$Wr™e
Ğ
NVMašReque¡
 *
»que¡
 )

458 ifĞ
ÃxtWr™e
 > 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
() )

460 
¡d
::
û¼
 << "NVMain Error: Bank violates WRITEiming constraint!"

461 << 
¡d
::
’dl
;

462  
çl£
;

464 ifĞ
¡©e
 !ğ
DDR3BANK_OPEN
 )

466 
¡d
::
û¼
 << "NVMain Error:ryo„ead‡ bankhat is‚ot‡ctive!"

467 << 
¡d
::
’dl
;

468  
çl£
;

471 
ušt64_t
 
wr™eRow
, 
wr™eSubA¼ay
;

472 
»que¡
->
add»ss
.
	`G‘T¿n¦©edAdd»ss
Ğ&
wr™eRow
, 
NULL
, NULL, NULL, NULL, &
wr™eSubA¼ay
 );

476 ifĞ
»que¡
->
ty³
 =ğ
WRITE_PRECHARGE
 )

478 
ÃxtPow”Down
 = 
	`MAX
Ğ
ÃxtAùiv©e
,

479 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
()

480 + 
	`MAX
Ğ
p
->
tBURST
,…->
tCCD
 ) * (
»que¡
->
bur¡CouÁ
 - 1)

481 + 
p
->
tAL
 +…->
tCWD
 +…->
tBURST
 +…->
tWR


482 + 
p
->
tRP
 );

487 
ÃxtPow”Down
 = 
	`MAX
(‚extPowerDown,

488 
	`MAX
Ğ
p
->
tBURST
,…->
tCCD
 ) * (
»que¡
->
bur¡CouÁ
 - 1)

489 + 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
(è+ 
p
->
tWRPDEN
 );

492 
ÃxtR—d
 = 
	`MAX
(‚extRead,

493 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
()

494 + 
	`MAX
Ğ
p
->
tBURST
,…->
tCCD
 ) * (
»que¡
->
bur¡CouÁ
 - 1)

495 + 
p
->
tCWD
 +…->
tBURST
 +…->
tWTR
 );

497 
ÃxtWr™e
 = 
	`MAX
(‚extWrite,

498 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
()

499 + 
	`MAX
Ğ
p
->
tBURST
,…->
tCCD
 ) * 
»que¡
->
bur¡CouÁ
 );

502 
boŞ
 
sucûss
 = 
	`G‘Chd
Ğ
»que¡
 )->
	`IssueCommªd
(„equest );

504 ifĞ
sucûss
 )

506 
d©aCyşes
 +ğ
p
->
tBURST
;

507 
wr™eCyşe
 = 
Œue
;

508 
wr™es
++;

510 ifĞ
»que¡
->
ty³
 =ğ
WRITE_PRECHARGE
 )

512 
´ech¬ges
++;

515 
¡d
::
deque
<
ncouÁ”_t
>::
™”©Ü
 
™
;

516  
™
 = 
aùiveSubA¼ayQueue
.
	`begš
( );

517 
™
 !ğ
aùiveSubA¼ayQueue
.
	`’d
( ); ++it )

519 ifĞ(*
™
è=ğ
wr™eSubA¼ay
 )

522 
aùiveSubA¼ayQueue
.
	`”a£
Ğ
™
 );

527 ifĞ
aùiveSubA¼ayQueue
.
	`em±y
( ) )

528 
¡©e
 = 
DDR3BANK_CLOSED
;

533 
¡d
::
û¼
 << "NVMaš E¼Ü: Bªk " << 
bªkId
 << " failedo "

534 << "wr™thsub¬¿y " << 
wr™eSubA¼ay
 << 
¡d
::
’dl
;

537  
sucûss
;

538 
	}
}

543 
boŞ
 
	gDDR3Bªk
::
	$P»ch¬ge
Ğ
NVMašReque¡
 *
»que¡
 )

547 ifĞ
ÃxtP»ch¬ge
 > 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
() )

549 
¡d
::
û¼
 << "NVMain Error: Bank violates PRECHARGEiming constraint!"

550 << 
¡d
::
’dl
;

551  
çl£
;

553 ifĞ
¡©e
 !ğ
DDR3BANK_CLOSED
 && s‹ !ğ
DDR3BANK_OPEN
 )

555 
¡d
::
û¼
 << "NVMain Error:ryo…recharge‡ bankhat is‚either "

556 << "idË‚Ü‡ùive" << 
¡d
::
’dl
;

557  
çl£
;

560 
ušt64_t
 
´eRow
, 
´eSubA¼ay
;

561 
»que¡
->
add»ss
.
	`G‘T¿n¦©edAdd»ss
Ğ&
´eRow
, 
NULL
, NULL, NULL, NULL, &
´eSubA¼ay
 );

568 
ÃxtPow”Down
 = 
	`MAX
(‚extPowerDown,

569 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
(è+ 
p
->
tRP
 );

571 ifĞ
»que¡
->
ty³
 =ğ
PRECHARGE
 )

574 
boŞ
 
sucûss
 = 
	`G‘Chd
Ğ
»que¡
 )->
	`IssueCommªd
(„equest );

575 ifĞ
sucûss
 )

578 
¡d
::
deque
<
ncouÁ”_t
>::
™”©Ü
 
™
;

579  
™
 = 
aùiveSubA¼ayQueue
.
	`begš
( );

580 
™
 !ğ
aùiveSubA¼ayQueue
.
	`’d
( ); ++it )

582 ifĞ(*
™
è=ğ
´eSubA¼ay
 )

585 
aùiveSubA¼ayQueue
.
	`”a£
Ğ
™
 );

592 
¡d
::
û¼
 << "NVMaš E¼Ü: Bªk " << 
bªkId
 << " failedo "

593 << "´ech¬gthsub¬¿y " << 
´eSubA¼ay
 << 
¡d
::
’dl
;

594  
çl£
;

597 ifĞ
»que¡
->
ty³
 =ğ
PRECHARGE_ALL
 )

599 ifĞ
aùiveSubA¼ayQueue
.
	`em±y
Ğè=ğ
çl£
 )

602  
aùiveSubA¼ayQueue
.
	`size
( ) > 1 )

604 
ncouÁ”_t
 
İ’edSubA¼ay
 = 
aùiveSubA¼ayQueue
.
	`äÚt
( );

605 
aùiveSubA¼ayQueue
.
	`pİ_äÚt
( );

607 
NVMašReque¡
* 
dummyP»ch¬ge
 = 
Ãw
 NVMainRequest;

608 (*
dummyP»ch¬ge
èğ(*
»que¡
);

609 
dummyP»ch¬ge
->
owÃr
 = 
this
;

610 
boŞ
 
sucûss
 = 
	`G‘Chd
Ğ
İ’edSubA¼ay
 )->
	`IssueCommªd
Ğ
dummyP»ch¬ge
 );

612 ifĞ
sucûss
 =ğ
çl£
 )

614 
¡d
::
û¼
 << "NVMaš E¼Ü: Bªk " << 
bªkId
 << " failedo "

615 << "´ech¬gthsub¬¿y " << 
İ’edSubA¼ay


616 << 
¡d
::
’dl
;

617  
çl£
;

623 
ncouÁ”_t
 
İ’edSubA¼ay
 = 
aùiveSubA¼ayQueue
.
	`äÚt
( );

624 
aùiveSubA¼ayQueue
.
	`pİ_äÚt
( );

625 
boŞ
 
sucûss
 = 
	`G‘Chd
Ğ
İ’edSubA¼ay
 )->
	`IssueCommªd
Ğ
»que¡
 );

627 ifĞ
sucûss
 =ğ
çl£
 )

629 
¡d
::
û¼
 << "NVMaš E¼Ü: Bªk " << 
bªkId
 << " failedo "

630 << "issu" << 
»que¡
->
ty³
 << "o subarray"

631 << 
İ’edSubA¼ay
 << 
¡d
::
’dl
;

632  
çl£
;

635 
	`as£¹
Ğ
aùiveSubA¼ayQueue
.
	`em±y
( ) );

640 
¡d
::
û¼
 << "NVMaš E¼Ü: Bªk " << 
bªkId


642 << 
»que¡
->
ty³
 << 
¡d
::
’dl
;

643  
çl£
;

646 ifĞ
aùiveSubA¼ayQueue
.
	`em±y
( ) )

647 
¡©e
 = 
DDR3BANK_CLOSED
;

649 
´ech¬ges
++;

651  
Œue
;

652 
	}
}

657 
boŞ
 
	gDDR3Bªk
::
	$Reäesh
Ğ
NVMašReque¡
 *
»que¡
 )

661 ifĞ
ÃxtAùiv©e
 > 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
() )

663 
¡d
::
û¼
 << "NVMain Error: Bank violates REFRESHiming constraint!"

664 << 
¡d
::
’dl
;

665  
çl£
;

668 
ušt64_t
 
»fRow
, 
»fSubA¼ay
;

670 
»que¡
->
add»ss
.
	`G‘T¿n¦©edAdd»ss
Ğ&
»fRow
, 
NULL
, NULL, NULL, NULL, &
»fSubA¼ay
 );

677 
ÃxtPow”Down
 = 
	`MAX
(‚extPowerDown,

678 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
(è+ 
p
->
tRFC
 );

682 
boŞ
 
sucûss
 = 
	`G‘Chd
Ğ
»que¡
 )->
	`IssueCommªd
(„equest );

684 ifĞ
sucûss
 )

686 
»äeshes
++;

690 
¡d
::
û¼
 << "NVMaš E¼Ü: Bªk " << 
bªkId
 << " failedo "

691 << "»äeshhsub¬¿y " << 
»fSubA¼ay


692 << " by commªd " << 
»que¡
->
ty³
 << 
¡d
::
’dl
;

693  
çl£
;

696  
Œue
;

697 
	}
}

699 
ncyşe_t
 
	gDDR3Bªk
::
	$NextIssuabË
Ğ
NVMašReque¡
 *
»que¡
 )

701 
ncyşe_t
 
ÃxtCom·»
 = 0;

703 ifĞ
»que¡
->
ty³
 =ğ
ACTIVATE
 ||„eque¡->ty³ =ğ
REFRESH
 ) 
ÃxtCom·»
 = 
ÃxtAùiv©e
;

704 ifĞ
»que¡
->
ty³
 =ğ
READ
 ||„eque¡->ty³ =ğ
READ_PRECHARGE
 ) 
ÃxtCom·»
 = 
ÃxtR—d
;

705 ifĞ
»que¡
->
ty³
 =ğ
WRITE
 ||„eque¡->ty³ =ğ
WRITE_PRECHARGE
 ) 
ÃxtCom·»
 = 
ÃxtWr™e
;

706 ifĞ
»que¡
->
ty³
 =ğ
PRECHARGE
 ||„eque¡->ty³ =ğ
PRECHARGE_ALL
 ) 
ÃxtCom·»
 = 
ÃxtP»ch¬ge
;

708  
	`MAX
(
	`G‘Chd
Ğ
»que¡
 )->
	`NextIssuabË
Ğ»que¡ ), 
ÃxtCom·»
 );

709 
	}
}

714 
boŞ
 
	gDDR3Bªk
::
	$IsIssuabË
Ğ
NVMašReque¡
 *
»q
, 
FaR—sÚ
 *
»asÚ
 )

716 
boŞ
 
rv
 = 
Œue
;

718 
ušt64_t
 
İRªk
, 
İBªk
, 
İRow
, 
İSubA¼ay
;

719 
»q
->
add»ss
.
	`G‘T¿n¦©edAdd»ss
Ğ&
İRow
, 
NULL
, &
İBªk
, &
İRªk
, NULL, &
İSubA¼ay
 );

721 ifĞ
ÃxtCommªd
 !ğ
CMD_NOP
 )

722  
çl£
;

724 ifĞ
»q
->
ty³
 =ğ
ACTIVATE
 )

727 ifĞ
ÃxtAùiv©e
 > ( 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
() )

728 || 
¡©e
 =ğ
DDR3BANK_PDPF
 || s‹ =ğ
DDR3BANK_PDPS
 || s‹ =ğ
DDR3BANK_PDA
 )

731 
rv
 = 
çl£
;

732 ifĞ
»asÚ
 )

733 
»asÚ
->»asÚ = 
BANK_TIMING
;

735 
aùWa™s
++;

736 
aùWa™TÙ®
 +ğ
ÃxtAùiv©e
 - (
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
());

740 
rv
 = 
	`G‘Chd
Ğ
»q
 )->
	`IsIssuabË
Ğ»q, 
»asÚ
 );

743 ifĞ
»q
->
ty³
 =ğ
READ
 ||„eq->ty³ =ğ
READ_PRECHARGE
 )

745 ifĞ
ÃxtR—d
 > (
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
())

746 || 
¡©e
 !ğ
DDR3BANK_OPEN
 )

748 
rv
 = 
çl£
;

749 ifĞ
»asÚ
 )

750 
»asÚ
->»asÚ = 
BANK_TIMING
;

754 
rv
 = 
	`G‘Chd
Ğ
»q
 )->
	`IsIssuabË
Ğ»q, 
»asÚ
 );

757 ifĞ
»q
->
ty³
 =ğ
WRITE
 ||„eq->ty³ =ğ
WRITE_PRECHARGE
 )

759 ifĞ
ÃxtWr™e
 > (
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
())

760 || 
¡©e
 !ğ
DDR3BANK_OPEN
 )

762 
rv
 = 
çl£
;

763 ifĞ
»asÚ
 )

764 
»asÚ
->»asÚ = 
BANK_TIMING
;

768 
rv
 = 
	`G‘Chd
Ğ
»q
 )->
	`IsIssuabË
Ğ»q, 
»asÚ
 );

771 ifĞ
»q
->
ty³
 =ğ
PRECHARGE
 ||„eq->ty³ =ğ
PRECHARGE_ALL
 )

773 ifĞ
ÃxtP»ch¬ge
 > (
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
())

774 || ( 
¡©e
 !ğ
DDR3BANK_CLOSED
 && s‹ !ğ
DDR3BANK_OPEN
 ) )

776 
rv
 = 
çl£
;

777 ifĞ
»asÚ
 )

778 
»asÚ
->»asÚ = 
BANK_TIMING
;

782 ifĞ
»q
->
ty³
 =ğ
PRECHARGE_ALL
 )

784 
¡d
::
deque
<
ncouÁ”_t
>::
™”©Ü
 
™
;

786  
™
 = 
aùiveSubA¼ayQueue
.
	`begš
();

787 
™
 !ğ
aùiveSubA¼ayQueue
.
	`’d
(); ++it )

789 
rv
 = 
	`G‘Chd
Ğ(*
™
è)->
	`IsIssuabË
Ğ
»q
, 
»asÚ
 );

791 ifĞ
rv
 =ğ
çl£
 )

797 
rv
 = 
	`G‘Chd
Ğ
»q
 )->
	`IsIssuabË
Ğ»q, 
»asÚ
 );

801 ifĞ
»q
->
ty³
 =ğ
POWERDOWN_PDA


802 || 
»q
->
ty³
 =ğ
POWERDOWN_PDPF


803 || 
»q
->
ty³
 =ğ
POWERDOWN_PDPS
 )

805 ifĞ
ÃxtPow”Down
 > (
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
())

806 || ( 
¡©e
 !ğ
DDR3BANK_CLOSED
 && s‹ !ğ
DDR3BANK_OPEN
 )

807 || ( ( 
»q
->
ty³
 =ğ
POWERDOWN_PDPF
 ||„eq->ty³ =ğ
POWERDOWN_PDPS
 )

808 && 
¡©e
 =ğ
DDR3BANK_OPEN
 ) )

810 
rv
 = 
çl£
;

811 ifĞ
»asÚ
 )

812 
»asÚ
->»asÚ = 
BANK_TIMING
;

815  
ncouÁ”_t
 
§Idx
 = 0; saIdx < 
subA¼ayNum
; saIdx++ )

817 ifĞ!
	`G‘Chd
(
§Idx
)->
	`IsIssuabË
Ğ
»q
 ) )

819 
rv
 = 
çl£
;

824 ifĞ
»q
->
ty³
 =ğ
POWERUP
 )

826 ifĞ
ÃxtPow”Up
 > (
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
())

827 || ( 
¡©e
 !ğ
DDR3BANK_PDPF
 && s‹ !ğ
DDR3BANK_PDPS
 && s‹ !ğ
DDR3BANK_PDA
 ) )

829 
rv
 = 
çl£
;

830 ifĞ
»asÚ
 )

831 
»asÚ
->»asÚ = 
BANK_TIMING
;

834  
ncouÁ”_t
 
§Idx
 = 0; saIdx < 
subA¼ayNum
; saIdx++ )

836 ifĞ!
	`G‘Chd
(
§Idx
)->
	`IsIssuabË
Ğ
»q
 ) )

838 
rv
 = 
çl£
;

843 ifĞ
»q
->
ty³
 =ğ
REFRESH
 )

845 ifĞ
ÃxtAùiv©e
 > ( 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
() )

846 || ( 
¡©e
 !ğ
DDR3BANK_CLOSED
 && s‹ !ğ
DDR3BANK_OPEN
 ) )

848 
rv
 = 
çl£
;

849 ifĞ
»asÚ
 )

850 
»asÚ
->»asÚ = 
BANK_TIMING
;

854 
rv
 = 
	`G‘Chd
Ğ
»q
 )->
	`IsIssuabË
Ğ»q, 
»asÚ
 );

860 
rv
 = 
	`G‘Chd
Ğ
»q
 )->
	`IsIssuabË
Ğ»q, 
»asÚ
 );

863  
rv
;

864 
	}
}

869 
boŞ
 
	gDDR3Bªk
::
	$IssueCommªd
Ğ
NVMašReque¡
 *
»q
 )

871 
boŞ
 
rv
 = 
çl£
;

873 ifĞ!
	`IsIssuabË
Ğ
»q
 ) )

875 
¡d
::
cout
 << "NVMain: Bank: Warning: Command can‚ot be issued!\n";

879 
rv
 = 
Œue
;

881  
»q
->
ty³
 )

883 
ACTIVATE
:

884 
rv
 = 
this
->
	`Aùiv©e
Ğ
»q
 );

887 
READ
:

888 
READ_PRECHARGE
:

889 
rv
 = 
this
->
	`R—d
Ğ
»q
 );

892 
WRITE
:

893 
WRITE_PRECHARGE
:

894 
rv
 = 
this
->
	`Wr™e
Ğ
»q
 );

897 
PRECHARGE
:

898 
PRECHARGE_ALL
:

899 
rv
 = 
this
->
	`P»ch¬ge
Ğ
»q
 );

902 
REFRESH
:

903 
rv
 = 
this
->
	`Reäesh
Ğ
»q
 );

906 
POWERDOWN_PDA
:

907 
POWERDOWN_PDPF
:

908 
POWERDOWN_PDPS
:

909 
rv
 = 
this
->
	`Pow”Down
Ğ
»q
 );

912 
POWERUP
:

913 
rv
 = 
this
->
	`Pow”Up
Ğ
»q
 );

917 
rv
 = 
	`G‘Chd
Ğ
»q
 )->
	`IssueCommªd
(„eq );

922  
rv
;

923 
	}
}

925 
DDR3BªkS‹
 
	gDDR3Bªk
::
	$G‘S‹
( )

927  
¡©e
;

928 
	}
}

930 
	gDDR3Bªk
::
	$C®cuÏ‹Pow”
( )

932 
ncyşe_t
 
simuÏtiÚTime
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
();

934 ifĞ
simuÏtiÚTime
 == 0 )

936 
bªkPow”


937 ğ
aùivePow”


938 ğ
bur¡Pow”


939 ğ
»äeshPow”
 = 0.0f;

943 ifĞ
p
->
EÃrgyMod–
 == "current" )

945 
bªkPow”
 = ( 
bªkEÃrgy
 * 
p
->
VŞge
 ) / ()
simuÏtiÚTime
 / 1000.0f;

946 
aùivePow”
 = ( 
aùiveEÃrgy
 * 
p
->
VŞge
 ) / ()
simuÏtiÚTime
 / 1000.0f;

947 
bur¡Pow”
 = ( 
bur¡EÃrgy
 * 
p
->
VŞge
 ) / ()
simuÏtiÚTime
 / 1000.0f;

948 
»äeshPow”
 = ( 
»äeshEÃrgy
 * 
p
->
VŞge
 ) / ()
simuÏtiÚTime
 / 1000.0f;

952 
bªkPow”
 = 
bªkEÃrgy
 / (()
simuÏtiÚTime
 / 1000000000.0);

953 
aùivePow”
 = 
aùiveEÃrgy
 / (()
simuÏtiÚTime
 / 1000000000.0);

954 
bur¡Pow”
 = 
bur¡EÃrgy
 / (()
simuÏtiÚTime
 / 1000000000.0);

955 
»äeshPow”
 = 
»äeshEÃrgy
 / (()
simuÏtiÚTime
 / 1000000000.0);

957 
	}
}

959 
	gDDR3Bªk
::
	$G‘Pow”
( )

961 
	`C®cuÏ‹Pow”
( );

963  
bªkPow”
;

964 
	}
}

966 
	gDDR3Bªk
::
S‘Name
Ğ
¡d
::
¡ršg
 )

975 
DDR3Bªk
::
	$S‘Id
Ğ
ncouÁ”_t
 
id
 )

977 
bªkId
 = 
id
;

978 
	}
}

980 
	g¡d
::
¡ršg
 
DDR3Bªk
::
	$G‘Name
( )

983 
	}
}

986 
ncouÁ”_t
 
	gDDR3Bªk
::
	$G‘Id
( )

988  
bªkId
;

989 
	}
}

991 
	gDDR3Bªk
::
	$C®cuÏ‹Sts
( )

993 
NVMObjeù
::
	`C®cuÏ‹Sts
( );

995 
id—lBªdwidth
;

997 
id—lBªdwidth
 = ()(
p
->
CLK
 *…->
MULT
 *…->
RATE
 *…->
BPC
);

999 ifĞ
aùiveCyşes
 != 0 )

1000 
utiz©iÚ
 = ()(()
d©aCyşes
 / ()(
aùiveCyşes
 + 
¡ªdbyCyşes
) );

1002 
utiz©iÚ
 = 0.0f;

1004 
bªkEÃrgy
 = 
aùiveEÃrgy
 = 
bur¡EÃrgy
 = 
»äeshEÃrgy


1007  
§Idx
 = 0; saIdx < 
subA¼ayNum
; saIdx++ )

1009 
StTy³
 
§E¡©
 = 
	`G‘St
Ğ
	`G‘Chd
(
§Idx
), "subArrayEnergy" );

1010 
StTy³
 
aùE¡©
 = 
	`G‘St
Ğ
	`G‘Chd
(
§Idx
), "activeEnergy" );

1011 
StTy³
 
b¡E¡©
 = 
	`G‘St
Ğ
	`G‘Chd
(
§Idx
), "burstEnergy" );

1012 
StTy³
 
»fE¡©
 = 
	`G‘St
Ğ
	`G‘Chd
(
§Idx
), "refreshEnergy" );

1014 
bªkEÃrgy
 +ğ
	`Ca¡St
Ğ
§E¡©
, );

1015 
aùiveEÃrgy
 +ğ
	`Ca¡St
Ğ
aùE¡©
, );

1016 
bur¡EÃrgy
 +ğ
	`Ca¡St
Ğ
b¡E¡©
, );

1017 
»äeshEÃrgy
 +ğ
	`Ca¡St
Ğ
»fE¡©
, );

1020 
	`C®cuÏ‹Pow”
( );

1022 
bªdwidth
 = (
utiz©iÚ
 * 
id—lBªdwidth
);

1023 
pow”Cyşes
 = 
aùiveCyşes
 + 
¡ªdbyCyşes
;

1025 
aùWa™Av”age
 = 
¡©ic_ÿ¡
<>(
aùWa™TÙ®
è/ stic_ÿ¡<>(
aùWa™s
);

1027 
wÜ¡Ca£Endu¿nû
 = 
¡d
::
num”ic_lim™s
<
ušt64_t
>::
	`max
( );

1028 
av”ageEndu¿nû
 = 0;

1029  
ncouÁ”_t
 
i
 = 0; i < 
	`G‘ChdCouÁ
( ); i++ )

1031 
StTy³
 
subA¼ayWÜ¡Endr
 = 
	`G‘St
Ğ
	`G‘Chd
(
i
), "worstCaseEndurance" );

1032 
StTy³
 
subA¼ayAv”ageEndr
 = 
	`G‘St
Ğ
	`G‘Chd
(
i
), "averageEndurance" );

1034 
ušt64_t
 
subA¼ayEndu¿nû
 = 
	`Ca¡St
Ğ
subA¼ayWÜ¡Endr
, uint64_t );

1035 
wÜ¡Ca£Endu¿nû
 = (
subA¼ayEndu¿nû
 < worstCaseEndurance) ? subArrayEndurance : worstCaseEndurance;

1036 
av”ageEndu¿nû
 +ğ
	`Ca¡St
Ğ
subA¼ayAv”ageEndr
, 
ušt64_t
 );

1038 
av”ageEndu¿nû
 /ğ
	`G‘ChdCouÁ
( );

1039 
	}
}

1042 
boŞ
 
	gDDR3Bªk
::
	$IdË
( )

1044 
boŞ
 
bªkIdË
 = 
Œue
;

1046  
ncouÁ”_t
 
i
 = 0; i < 
subA¼ayNum
; i++ )

1048 ifĞ
	`G‘Chd
(
i
)->
	`IdË
Ğè=ğ
çl£
 )

1050 
bªkIdË
 = 
çl£
;

1054  
bªkIdË
;

1055 
	}
}

1057 
	gDDR3Bªk
::
	$Cyşe
Ğ
ncyşe_t
 
¡•s
 )

1061 ifĞ
¡©e
 =ğ
DDR3BANK_PDPF
 )

1062 
ç¡Ex™P»ch¬geCyşes
 +ğ
¡•s
;

1063 ifĞ
¡©e
 =ğ
DDR3BANK_PDA
 )

1064 
ç¡Ex™AùiveCyşes
 +ğ
¡•s
;

1066 ifĞ
¡©e
 =ğ
DDR3BANK_PDPS
 )

1067 
¦owEx™P»ch¬geCyşes
 +ğ
¡•s
;

1069 ifĞ
¡©e
 =ğ
DDR3BANK_OPEN
 )

1070 
aùiveCyşes
 +ğ
¡•s
;

1072 ifĞ
¡©e
 =ğ
DDR3BANK_CLOSED
 )

1073 
¡ªdbyCyşes
 +ğ
¡•s
;

1074 
	}
}

	@Banks/DDR3Bank/DDR3Bank.h

36 #iâdeà
__DDR3BANK_H__


37 
	#__DDR3BANK_H__


	)

39 
	~<¡dšt.h
>

40 
	~<m­
>

42 
	~"¤c/Bªk.h
"

43 
	~"¤c/CÚfig.h
"

44 
	~"¤c/Endu¿nûMod–.h
"

45 
	~"šşude/NVMAdd»ss.h
"

46 
	~"šşude/NVMašReque¡.h
"

47 
	~"¤c/SubA¼ay.h
"

48 
	~"¤c/Sts.h
"

50 
	~<io¡»am
>

52 
Çme¥aû
 
	gNVM
 {

67 
	eDDR3BªkS‹


69 
	gDDR3BANK_UNKNOWN
,

70 
	gDDR3BANK_OPEN
,

71 
	gDDR3BANK_CLOSED
,

72 
	gDDR3BANK_PDPF
,

73 
	gDDR3BANK_PDA
,

74 
	gDDR3BANK_PDPS


77 şas 
	cDDR3Bªk
 : 
public
 
Bªk


79 
public
:

80 
DDR3Bªk
( );

81 ~
DDR3Bªk
( );

83 
vœtu®
 
boŞ
 
IsIssuabË
Ğ
NVMašReque¡
 *
»q
, 
FaR—sÚ
 *
»asÚ
 = 
NULL
 );

84 
vœtu®
 
boŞ
 
IssueCommªd
Ğ
NVMašReque¡
 *
»q
 );

85 
vœtu®
 
ncyşe_t
 
NextIssuabË
Ğ
NVMašReque¡
 *
»que¡
 );

87 
vœtu®
 
S‘CÚfig
Ğ
CÚfig
 *
c
, 
boŞ
 
ü—‹Chd»n
 = 
Œue
 );

89 
DDR3BªkS‹
 
G‘S‹
( );

91 
vœtu®
 
boŞ
 
IdË
( );

92 
vœtu®
 
ncyşe_t
 
G‘D©aCyşes
Ğè{  
	gd©aCyşes
; }

93 
vœtu®
 
C®cuÏ‹Pow”
( );

94 
vœtu®
 
G‘Pow”
( );

96 
vœtu®
 
ušt64_t
 
G‘O³nRow
Ğè{  
	gİ’Row
; }

97 
vœtu®
 
	g¡d
::
deque
<
ncouÁ”_t
>& 
G‘O³nSubA¼ay
Ğè{  
aùiveSubA¼ayQueue
; }

99 
vœtu®
 
S‘Name
Ğ
¡d
::
¡ršg
 );

100 
vœtu®
 
S‘Id
Ğ
ncouÁ”_t
 );

102 
vœtu®
 
Regi¡”Sts
( );

103 
vœtu®
 
C®cuÏ‹Sts
( );

105 
vœtu®
 
ncouÁ”_t
 
G‘Id
( );

106 
vœtu®
 
	g¡d
::
¡ršg
 
G‘Name
( );

108 
vœtu®
 
Cyşe
Ğ
ncyşe_t
 
¡•s
 );

110 
	g´Ùeùed
:

111 
¡d
::
deque
<
ncouÁ”_t
> 
aùiveSubA¼ayQueue
;

112 
ncouÁ”_t
 
	gMATWidth
;

113 
ncouÁ”_t
 
	gMATHeight
;

114 
ncouÁ”_t
 
	gsubA¼ayNum
;

116 
DDR3BªkS‹
 
	g¡©e
;

117 
BulkCommªd
 
	gÃxtCommªd
;

118 
NVMašReque¡
 
	gÏ¡O³¿tiÚ
;

120 
ncouÁ”_t
 
	gd©aCyşes
;

121 
ncouÁ”_t
 
	gaùiveCyşes
;

122 
ncouÁ”_t
 
	g¡ªdbyCyşes
;

123 
ncouÁ”_t
 
	gç¡Ex™AùiveCyşes
;

124 
ncouÁ”_t
 
	gç¡Ex™P»ch¬geCyşes
;

125 
ncouÁ”_t
 
	g¦owEx™P»ch¬geCyşes
;

126 
ncouÁ”_t
 
	gpow”Cyşes
;

128 
ncyşe_t
 
	gÏ¡Aùiv©e
;

129 
ncyşe_t
 
	gÃxtAùiv©e
;

130 
ncyşe_t
 
	gÃxtP»ch¬ge
;

131 
ncyşe_t
 
	gÃxtR—d
;

132 
ncyşe_t
 
	gÃxtWr™e
;

133 
ncyşe_t
 
	gÃxtReäesh
;

134 
ncyşe_t
 
	gÃxtReäeshDÚe
;

135 
ncyşe_t
 
	gÃxtPow”Down
;

136 
ncyşe_t
 
	gÃxtPow”DownDÚe
;

137 
ncyşe_t
 
	gÃxtPow”Up
;

138 
boŞ
 
	gwr™eCyşe
;

139 
Wr™eMode
 
	gwr™eMode
;

141 
ncouÁ”_t
 
	gaùWa™s
;

142 
ncouÁ”_t
 
	gaùWa™TÙ®
;

143 
	gaùWa™Av”age
;

145 
	gbªkEÃrgy
;

146 
	gaùiveEÃrgy
;

147 
	gbur¡EÃrgy
;

148 
	g»äeshEÃrgy
;

149 
	gbªkPow”
;

150 
	gaùivePow”
;

151 
	gbur¡Pow”
;

152 
	g»äeshPow”
;

154 
	gutiz©iÚ
;

155 
	gbªdwidth
;

157 
	gdummySt
;

159 
ušt64_t
 
	gav”ageEndu¿nû
, 
	gwÜ¡Ca£Endu¿nû
;

161 
ncouÁ”_t
 
	g»ads
, 
	gwr™es
, 
	gaùiv©es
, 
	g´ech¬ges
, 
	g»äeshes
;

162 
ncouÁ”_t
 
	gidËTim”
;

164 
ušt64_t
 
	gİ’Row
;

166 
ncouÁ”_t
 
	gbªkId
;

168 
vœtu®
 
boŞ
 
Aùiv©e
Ğ
NVMašReque¡
 *
»que¡
 );

169 
vœtu®
 
boŞ
 
R—d
Ğ
NVMašReque¡
 *
»que¡
 );

170 
vœtu®
 
boŞ
 
Wr™e
Ğ
NVMašReque¡
 *
»que¡
 );

171 
vœtu®
 
boŞ
 
P»ch¬ge
Ğ
NVMašReque¡
 *
»que¡
 );

172 
vœtu®
 
boŞ
 
Reäesh
Ğ
NVMašReque¡
 *
»que¡
 );

173 
vœtu®
 
boŞ
 
Pow”Up
Ğ
NVMašReque¡
 *
»que¡
 );

174 
vœtu®
 
boŞ
 
Pow”Down
Ğ
NVMašReque¡
 *
»que¡
 );

	@DataEncoders/DataEncoderFactory.cpp

34 
	~"D©aEncod”s/D©aEncod”FaùÜy.h
"

36 
	~<io¡»am
>

39 
	~"D©aEncod”s/FlNWr™e/FlNWr™e.h
"

41 
usšg
 
Çme¥aû
 
	gNVM
;

43 
D©aEncod”
 *
	gD©aEncod”FaùÜy
::
C»©eD©aEncod”
Ğ
¡d
::
¡ršg
 
’cod”Name
 )

45 
D©aEncod”
 *
’cod”
 = 
NULL
;

47 ifĞ
	g’cod”Name
 =ğ"deçuÉ" ) 
’cod”
 = 
Ãw
 
D©aEncod”
( );

48 ifĞ
	g’cod”Name
 =ğ"FlNWr™e" ) 
’cod”
 = 
Ãw
 
FlNWr™e
( );

50  
	g’cod”
;

53 
D©aEncod”
 *
	gD©aEncod”FaùÜy
::
C»©eNewD©aEncod”
Ğ
¡d
::
¡ršg
 
’cod”Name
 )

55 
D©aEncod”
 *
’cod”
 = 
NULL
;

57 
	g’cod”
 = 
C»©eD©aEncod”
Ğ
’cod”Name
 );

60 ifĞ
	g’cod”
 =ğ
NULL
 )

62 
’cod”
 = 
Ãw
 
D©aEncod”
( );

64 
	g¡d
::
cout
 << "Could‚Ù fšd D©aEncod”‚amed `" << 
’cod”Name


65 << "'. Usšg deçuÉ D©aEncod”." << 
¡d
::
’dl
;

68  
	g’cod”
;

71 
D©aEncod”
 *
	gD©aEncod”FaùÜy
::
C»©eD©aEncod”NoW¬n
Ğ
¡d
::
¡ršg
 
’cod”Name
 )

73 
D©aEncod”
 *
’cod”
 = 
NULL
;

75 
	g’cod”
 = 
C»©eD©aEncod”
Ğ
’cod”Name
 );

77 ifĞ
	g’cod”
 =ğ
NULL
 )

78 
’cod”
 = 
Ãw
 
D©aEncod”
( );

80  
	g’cod”
;

	@DataEncoders/DataEncoderFactory.h

34 #iâdeà
__DATAENCODERFACTORY_H__


35 
	#__DATAENCODERFACTORY_H__


	)

37 
	~"¤c/D©aEncod”.h
"

39 
	~<¡ršg
>

41 
Çme¥aû
 
	gNVM
 {

43 şas 
	cD©aEncod”FaùÜy


45 
	gpublic
:

46 
D©aEncod”FaùÜy
( ) { }

47 ~
D©aEncod”FaùÜy
( ) { }

49 
D©aEncod”
 *
C»©eNewD©aEncod”
Ğ
¡d
::
¡ršg
 
’cod”Name
 );

50 
D©aEncod”
 *
C»©eD©aEncod”NoW¬n
Ğ
¡d
::
¡ršg
 
’cod”Name
 );

52 
	g´iv©e
:

53 
D©aEncod”
 *
C»©eD©aEncod”
Ğ
¡d
::
¡ršg
 
’cod”Name
 );

	@DataEncoders/FlipNWrite/FlipNWrite.cpp

34 
	~"D©aEncod”s/FlNWr™e/FlNWr™e.h
"

36 
	~<io¡»am
>

38 
usšg
 
Çme¥aû
 
	gNVM
;

40 
	gFlNWr™e
::
	$FlNWr™e
( )

42 
æ³dAdd»s£s
.
	`ş—r
( );

45 
b™sFl³d
 = 0;

46 
b™Com·»Sw­Wr™es
 = 0;

47 
	}
}

49 
	gFlNWr™e
::~
	$FlNWr™e
( )

55 
	}
}

57 
FlNWr™e
::
	$S‘CÚfig
Ğ
CÚfig
 *
cÚfig
, 
boŞ
 )

59 
P¬ams
 *
·¿ms
 = 
Ãw
 
	`P¬ams
( );

60 
·¿ms
->
	`S‘P¬ams
Ğ
cÚfig
 );

61 
	`S‘P¬ams
Ğ
·¿ms
 );

64 
åSize
 = 
cÚfig
->
	`G‘V®ue
( "FlipNWriteGranularity" );

67 ifĞ
åSize
 == -1 )

68 
åSize
 = 32;

69 
	}
}

71 
	gFlNWr™e
::
	$Regi¡”Sts
( )

73 
	`AddSt
(
b™sFl³d
);

74 
	`AddSt
(
b™Com·»Sw­Wr™es
);

75 
	`AddUn™St
(
æNWr™eReduùiÚ
, "%");

76 
	}
}

78 
	gFlNWr™e
::
	$Inv”tD©a
Ğ
NVMD©aBlock
& 
d©a
, 
ušt64_t
 
¡¬tB™
, ušt64_ˆ
’dB™
 )

80 
ušt64_t
 
wÜdSize
;

81 
¡¬tBy‹
, 
’dBy‹
;

83 
wÜdSize
 = 
p
->
BusWidth
;

84 
wÜdSize
 *ğ
p
->
tBURST
 *…->
RATE
;

85 
wÜdSize
 /= 8;

87 
¡¬tBy‹
 = ()(
¡¬tB™
 / 8);

88 
’dBy‹
 = ()((
’dB™
 - 1) / 8);

90  
i
 = 
¡¬tBy‹
; i <ğ
’dBy‹
; i++ )

92 
ušt8_t
 
Üigš®By‹
 = 
d©a
.
	`G‘By‹
Ğ
i
 );

93 
ušt8_t
 
shiáBy‹
 = 
Üigš®By‹
;

94 
ušt8_t
 
ÃwBy‹
 = 0;

96  
j
 = 0; j < 8; j++ )

98 
ušt64_t
 
cu¼’tB™
 = 
i
 * 8 + 
j
;

100 ifĞ
cu¼’tB™
 < 
¡¬tB™
 || cu¼’tB™ >ğ
’dB™
 )

102 
shiáBy‹
 = 
¡©ic_ÿ¡
<
ušt8_t
>(shiftByte >> 1);

106 ifĞ!(
shiáBy‹
 & 0x1) )

108 
ÃwBy‹
 = 
¡©ic_ÿ¡
<
ušt8_t
>ÒewBy‹ | (1 << (7-
j
)));

111 
shiáBy‹
 = 
¡©ic_ÿ¡
<
ušt8_t
>(shiftByte >> 1);

114 
d©a
.
	`S‘By‹
Ğ
i
, 
ÃwBy‹
 );

116 
	}
}

118 
ncyşe_t
 
	gFlNWr™e
::
	$R—d
Ğ
NVMašReque¡
* )

120 
ncyşe_t
 
rv
 = 0;

124  
rv
;

125 
	}
}

127 
ncyşe_t
 
	gFlNWr™e
::
	$Wr™e
Ğ
NVMašReque¡
 *
»que¡
 )

129 
NVMD©aBlock
& 
ÃwD©a
 = 
»que¡
->
d©a
;

130 
NVMD©aBlock
& 
ŞdD©a
 = 
»que¡
->oldData;

131 
NVMAdd»ss
 
add»ss
 = 
»que¡
->address;

138 
ušt64_t
 
row
;

139 
ušt64_t
 
cŞ
;

140 
ncyşe_t
 
rv
 = 0;

142 
»que¡
->
add»ss
.
	`G‘T¿n¦©edAdd»ss
Ğ&
row
, &
cŞ
, 
NULL
, NULL, NULL, NULL );

150 
ušt64_t
 
rowSize
;

151 
ušt64_t
 
wÜdSize
;

152 
ušt64_t
 
cu¼’tB™
;

153 
ušt64_t
 
æP¬t™iÚs
;

154 
ušt64_t
 
rowP¬t™iÚs
;

155 *
modifyCouÁ
;

157 
wÜdSize
 = 
p
->
BusWidth
;

158 
wÜdSize
 *ğ
p
->
tBURST
 *…->
RATE
;

159 
wÜdSize
 /= 8;

161 
rowSize
 = 
p
->
COLS
 * 
wÜdSize
;

162 
rowP¬t™iÚs
 = ( 
rowSize
 * 8 ) / 
åSize
;

164 
æP¬t™iÚs
 = ( 
wÜdSize
 * 8 ) / 
åSize
;

166 
modifyCouÁ
 = 
Ãw
 [ 
æP¬t™iÚs
 ];

172  
ušt64_t
 
i
 = 0; i < 
æP¬t™iÚs
; i++ )

173 
modifyCouÁ
[
i
] = 0;

175 
cu¼’tB™
 = 0;

178  
ušt64_t
 
i
 = 0; i < 
æP¬t™iÚs
; i++ )

180 
ušt64_t
 
curAddr
 = 
row
 * 
rowP¬t™iÚs
 + 
cŞ
 * 
æP¬t™iÚs
 + 
i
;

182 ifĞ
æ³dAdd»s£s
.
	`couÁ
Ğ
curAddr
 ) )

184 
	`Inv”tD©a
Ğ
ŞdD©a
, 
i
*
åSize
, (i+1)*fpSize );

189  
ušt64_t
 
i
 = 0; i < 
wÜdSize
; ++i )

195 
ušt8_t
 
ŞdBy‹
, 
ÃwBy‹
;

197 
ŞdBy‹
 = 
ŞdD©a
.
	`G‘By‹
Ğ
i
 );

198 
ÃwBy‹
 = 
ÃwD©a
.
	`G‘By‹
Ğ
i
 );

200 ifĞ
ŞdBy‹
 =ğ
ÃwBy‹
 )

202 
cu¼’tB™
 += 8;

210  
j
 = 0; j < 8; j++ )

212 
ušt8_t
 
ŞdB™
, 
ÃwB™
;

214 
ŞdB™
 = ( 
ŞdBy‹
 >> 
j
 ) & 0x1;

215 
ÃwB™
 = ( 
ÃwBy‹
 >> 
j
 ) & 0x1;

217 ifĞ
ŞdB™
 !ğ
ÃwB™
 )

219 
modifyCouÁ
[()(
cu¼’tB™
/
åSize
)]++;

222 
cu¼’tB™
++;

229  
ušt64_t
 
i
 = 0; i < 
æP¬t™iÚs
; i++ )

231 
b™Com·»Sw­Wr™es
 +ğ
modifyCouÁ
[
i
];

233 
ušt64_t
 
curAddr
 = 
row
 * 
rowP¬t™iÚs
 + 
cŞ
 * 
æP¬t™iÚs
 + 
i
;

236 ifĞ
modifyCouÁ
[
i
] > (
åSize
 / 2) )

238 
	`Inv”tD©a
Ğ
ÃwD©a
, 
i
*
åSize
, (i+1)*fpSize );

240 
b™sFl³d
 +ğ(
åSize
 - 
modifyCouÁ
[
i
]);

246 ifĞ!
æ³dAdd»s£s
.
	`couÁ
Ğ
curAddr
 ) )

248 
æ³dAdd»s£s
.
	`š£¹
Ğ
curAddr
 );

256 ifĞ
æ³dAdd»s£s
.
	`couÁ
Ğ
curAddr
 ) )

258 
æ³dAdd»s£s
.
	`”a£
Ğ
curAddr
 );

261 
b™sFl³d
 +ğ
modifyCouÁ
[
i
];

265 
d–‘e
 
modifyCouÁ
;

267  
rv
;

268 
	}
}

270 
	gFlNWr™e
::
	$C®cuÏ‹Sts
( )

272 ifĞ
b™Com·»Sw­Wr™es
 != 0 )

273 
æNWr™eReduùiÚ
 = ((()
b™sFl³d
 / ()
b™Com·»Sw­Wr™es
)*100.0);

275 
æNWr™eReduùiÚ
 = 100.0;

276 
	}
}

	@DataEncoders/FlipNWrite/FlipNWrite.h

34 #iâdeà
__NVMAIN_FLIPNWRITE_H__


35 
	#__NVMAIN_FLIPNWRITE_H__


	)

37 
	~"¤c/D©aEncod”.h
"

38 
	~<£t
>

40 
Çme¥aû
 
	gNVM
 {

42 şas 
	cFlNWr™e
 : 
public
 
D©aEncod”


44 
public
:

45 
FlNWr™e
( );

46 ~
FlNWr™e
( );

48 
S‘CÚfig
Ğ
CÚfig
 *
cÚfig
, 
boŞ
 
ü—‹Chd»n
 = 
Œue
 );

50 
ncyşe_t
 
R—d
Ğ
NVMašReque¡
 *
»que¡
 );

51 
ncyşe_t
 
Wr™e
Ğ
NVMašReque¡
 *
»que¡
 );

53 
Regi¡”Sts
( );

54 
C®cuÏ‹Sts
( );

56 
	g´iv©e
:

57 
¡d
::
£t
< 
ušt64_t
 > 
æ³dAdd»s£s
;

59 
ušt64_t
 
	gb™sFl³d
;

60 
ušt64_t
 
	gb™Com·»Sw­Wr™es
;

61 
	gæNWr™eReduùiÚ
;

62 
	gåSize
;

64 
Inv”tD©a
Ğ
NVMD©aBlock
 &
d©a
, 
ušt64_t
 
¡¬tB™
, ušt64_ˆ
’dB™
 );

	@Decoders/DRCDecoder/DRCDecoder.cpp

34 
	~"Decod”s/DRCDecod”/DRCDecod”.h
"

35 
	~"šşude/NVMH–³rs.h
"

36 
	~<io¡»am
>

37 
	~<c¡dlib
>

39 
usšg
 
Çme¥aû
 
	gNVM
;

41 
	gDRCDecod”
::
	$DRCDecod”
( )

43 
ignÜeB™s
 = 0;

44 
ÿch–šeSize
 = 64;

46 
¡d
::
cout
 << "C»©ed‡ DRC decod”!" << std::
’dl
;

47 
	}
}

49 
	gDRCDecod”
::
	$S‘IgnÜeB™s
Ğ
ušt64_t
 
numIgnÜe
 )

51 
ignÜeB™s
 = 
numIgnÜe
;

52 
	}
}

54 
	gDRCDecod”
::
	$S‘Cach–šeSize
Ğ
ušt64_t
 
lšeSize
 )

56 
ÿch–šeSize
 = 
lšeSize
;

57 
	}
}

60 
	gDRCDecod”
::
	$T¿n¦©e
Ğ
ušt64_t
 
add»ss
, ušt64_ˆ*
row
, ušt64_ˆ*
cŞ
,

61 
ušt64_t
 *
bªk
, ušt64_ˆ*
¿nk
, ušt64_ˆ*
chªÃl
, ušt64_ˆ*
sub¬¿y
 )

63 
rowOrd”
, 
cŞOrd”
, 
bªkOrd”
, 
¿nkOrd”
, 
chªÃlOrd”
, 
sub¬¿yOrd”
;

64 
rowB™s
, 
cŞB™s
, 
bªkB™s
, 
¿nkB™s
, 
chªÃlB™s
, 
sub¬¿yB™s
;

65 
ušt64_t
 
wÜkšgAddr
;

71 
	`G‘T¿n¦©iÚM‘hod
Ğ)->
	`G‘B™Widths
Ğ&
rowB™s
, &
cŞB™s
, &
bªkB™s
,

72 &
¿nkB™s
, &
chªÃlB™s
, &
sub¬¿yB™s
 );

73 
	`G‘T¿n¦©iÚM‘hod
Ğ)->
	`G‘Ord”
Ğ&
rowOrd”
, &
cŞOrd”
, &
bªkOrd”
,

74 &
¿nkOrd”
, &
chªÃlOrd”
, &
sub¬¿yOrd”
 );

77 
wÜkšgAddr
 = 
add»ss
;

78 
wÜkšgAddr
 = wÜkšgAdd¸>> 
	`mlog2
Ğ()
ÿch–šeSize
 );

79 ifĞ
ignÜeB™s
 != 0 )

80 
wÜkšgAddr
 = wÜkšgAdd¸>> 
ignÜeB™s
;

83 *
cŞ
 = 0;

84 *
sub¬¿y
 = 0;

87 ifĞ
chªÃlOrd”
 < 
¿nkOrd”
 && chªÃlOrd” < 
bªkOrd”
 )

89 *
chªÃl
 = 
wÜkšgAddr
 % (1 << 
chªÃlB™s
);

90 
wÜkšgAddr
 = wÜkšgAdd¸>> 
chªÃlB™s
;

92 ifĞ
¿nkOrd”
 < 
bªkOrd”
 )

94 *
¿nk
 = 
wÜkšgAddr
 % (1 << 
¿nkB™s
);

95 
wÜkšgAddr
 = wÜkšgAdd¸>> 
¿nkB™s
;

97 *
bªk
 = 
wÜkšgAddr
 % (1 << 
bªkB™s
);

98 
wÜkšgAddr
 = wÜkšgAdd¸>> 
bªkB™s
;

102 *
bªk
 = 
wÜkšgAddr
 % (1 << 
bªkB™s
);

103 
wÜkšgAddr
 = wÜkšgAdd¸>> 
bªkB™s
;

105 *
¿nk
 = 
wÜkšgAddr
 % (1 << 
¿nkB™s
);

106 
wÜkšgAddr
 = wÜkšgAdd¸>> 
¿nkB™s
;

110 ifĞ
¿nkOrd”
 < 
chªÃlOrd”
 &&„ªkOrd” < 
bªkOrd”
 )

112 *
¿nk
 = 
wÜkšgAddr
 % (1 << 
¿nkB™s
);

113 
wÜkšgAddr
 = wÜkšgAdd¸>> 
¿nkB™s
;

115 ifĞ
chªÃlOrd”
 < 
bªkOrd”
 )

117 *
chªÃl
 = 
wÜkšgAddr
 % (1 << 
chªÃlB™s
);

118 
wÜkšgAddr
 = wÜkšgAdd¸>> 
chªÃlB™s
;

120 *
bªk
 = 
wÜkšgAddr
 % (1 << 
bªkB™s
);

121 
wÜkšgAddr
 = wÜkšgAdd¸>> 
bªkB™s
;

125 *
bªk
 = 
wÜkšgAddr
 % (1 << 
bªkB™s
);

126 
wÜkšgAddr
 = wÜkšgAdd¸>> 
bªkB™s
;

128 *
chªÃl
 = 
wÜkšgAddr
 % (1 << 
chªÃlB™s
);

129 
wÜkšgAddr
 = wÜkšgAdd¸>> 
chªÃlB™s
;

135 *
bªk
 = 
wÜkšgAddr
 % (1 << 
bªkB™s
);

136 
wÜkšgAddr
 = wÜkšgAdd¸>> 
bªkB™s
;

138 ifĞ
chªÃlOrd”
 < 
¿nkOrd”
 )

140 *
chªÃl
 = 
wÜkšgAddr
 % (1 << 
chªÃlB™s
);

141 
wÜkšgAddr
 = wÜkšgAdd¸>> 
chªÃlB™s
;

143 *
¿nk
 = 
wÜkšgAddr
 % (1 << 
¿nkB™s
);

144 
wÜkšgAddr
 = wÜkšgAdd¸>> 
¿nkB™s
;

148 *
¿nk
 = 
wÜkšgAddr
 % (1 << 
¿nkB™s
);

149 
wÜkšgAddr
 = wÜkšgAdd¸>> 
¿nkB™s
;

151 *
chªÃl
 = 
wÜkšgAddr
 % (1 << 
chªÃlB™s
);

152 
wÜkšgAddr
 = wÜkšgAdd¸>> 
chªÃlB™s
;

156 *
row
 = 
wÜkšgAddr
 % (1 << 
rowB™s
);

157 
wÜkšgAddr
 = wÜkšgAdd¸>> 
rowB™s
;

158 
	}
}

161 
ušt64_t
 
	gDRCDecod”
::
	$Rev”£T¿n¦©e
ĞcÚ¡ 
ušt64_t
& 
row
,

162 cÚ¡ 
ušt64_t
& ,

163 cÚ¡ 
ušt64_t
& 
bªk
,

164 cÚ¡ 
ušt64_t
& 
¿nk
,

165 cÚ¡ 
ušt64_t
& 
chªÃl
,

166 cÚ¡ 
ušt64_t
& )

168 
ušt64_t
 
un™Addr
 = 1;

169 
ušt64_t
 
phyAddr
 = 0;

170 
MemÜyP¬t™iÚ
 
·¹
;

172 ifĞ
	`G‘T¿n¦©iÚM‘hod
Ğè=ğ
NULL
 )

174 
¡d
::
û¼
 << "Divid” T¿n¦©Ü: T¿n¦©iÚ m‘hod‚Ù s³cif›d!" << std::
’dl
;

175 
	`ex™
(1);

178 
ušt64_t
 
rowNum
, 
cŞNum
, 
bªkNum
, 
¿nkNum
, 
chªÃlNum
, 
sub¬¿yNum
;

180 
	`G‘T¿n¦©iÚM‘hod
Ğ)->
	`G‘CouÁ
Ğ&
rowNum
, &
cŞNum
, &
bªkNum
,

181 &
¿nkNum
, &
chªÃlNum
, &
sub¬¿yNum
 );

187 
un™Addr
 *ğ
ÿch–šeSize
;

188 
un™Addr
 *ğ(1 << 
ignÜeB™s
);

196  
i
 = 0; i < 6 ; i++ )

199 
	`FšdOrd”
Ğ
i
, &
·¹
 );

201  
·¹
 )

203 
MEM_BANK
:

204 
phyAddr
 +ğĞ
bªk
 * 
un™Addr
 );

205 
un™Addr
 *ğ
bªkNum
;

208 
MEM_RANK
:

209 
phyAddr
 +ğĞ
¿nk
 * 
un™Addr
 );

210 
un™Addr
 *ğ
¿nkNum
;

213 
MEM_CHANNEL
:

214 
phyAddr
 +ğĞ
chªÃl
 * 
un™Addr
 );

215 
un™Addr
 *ğ
chªÃlNum
;

224 
phyAddr
 +ğĞ
row
 * 
un™Addr
 );

226  
phyAddr
;

227 
	}
}

	@Decoders/DRCDecoder/DRCDecoder.h

34 #iâdeà
__MEMCONTROL_DRCDECODER_H__


35 
	#__MEMCONTROL_DRCDECODER_H__


	)

37 
	~"¤c/Add»ssT¿n¦©Ü.h
"

39 
Çme¥aû
 
	gNVM
 {

41 şas 
	cDRCDecod”
 : 
public
 
Add»ssT¿n¦©Ü


43 
public
:

44 
DRCDecod”
( );

45 ~
DRCDecod”
( ) { }

47 
S‘IgnÜeB™s
Ğ
ušt64_t
 
numIgnÜe
 );

48 
S‘Cach–šeSize
Ğ
ušt64_t
 
lšeSize
 );

51 
T¿n¦©e
Ğ
ušt64_t
 
add»ss
, ušt64_ˆ*
row
, ušt64_ˆ*
cŞ
,

52 
ušt64_t
 *
bªk
, ušt64_ˆ*
¿nk
, ušt64_ˆ*
chªÃl
, ušt64_ˆ*
sub¬¿y
 );

56 
ušt64_t
 
Rev”£T¿n¦©e
ĞcÚ¡ ušt64_t& 
row
, cÚ¡ ušt64_t& 
cŞ
,

57 cÚ¡ 
ušt64_t
& 
bªk
, cÚ¡ ušt64_t& 
¿nk
,

58 cÚ¡ 
ušt64_t
& 
chªÃl
, cÚ¡ ušt64_t& 
sub¬¿y
 );

59 
usšg
 
	gAdd»ssT¿n¦©Ü
::
T¿n¦©e
;

60 
usšg
 
	gAdd»ssT¿n¦©Ü
::
S‘DeçuÉF›ld
;

62 
Regi¡”Sts
( ) { }

63 
C®cuÏ‹Sts
( ) { }

65 
	g´iv©e
:

66 
ušt64_t
 
ignÜeB™s
;

67 
ušt64_t
 
	gÿch–šeSize
;

	@Decoders/DecoderFactory.cpp

34 
	~"Decod”s/Decod”FaùÜy.h
"

35 
	~<io¡»am
>

38 
	~"Decod”s/DRCDecod”/DRCDecod”.h
"

39 
	~"Decod”s/Mig¿tÜ/Mig¿tÜ.h
"

41 
usšg
 
Çme¥aû
 
	gNVM
;

43 
Add»ssT¿n¦©Ü
 *
	gDecod”FaùÜy
::
C»©eDecod”
Ğ
¡d
::
¡ršg
 
decod”
 )

45 
Add»ssT¿n¦©Ü
 *
Œªs
 = 
NULL
;

47 ifĞ
	gdecod”
 =ğ"DeçuÉ" ) 
Œªs
 = 
Ãw
 
Add»ssT¿n¦©Ü
( );

48 ifĞ
	gdecod”
 =ğ"DRCDecod”" ) 
Œªs
 = 
Ãw
 
DRCDecod”
( );

49 ifĞ
	gdecod”
 =ğ"Mig¿tÜ" ) 
Œªs
 = 
Ãw
 
Mig¿tÜ
( );

51  
	gŒªs
;

54 
Add»ssT¿n¦©Ü
 *
	gDecod”FaùÜy
::
C»©eNewDecod”
Ğ
¡d
::
¡ršg
 
decod”
 )

56 
Add»ssT¿n¦©Ü
 *
Œªs
 = 
NULL
;

58 
	gŒªs
 = 
C»©eDecod”
Ğ
decod”
 );

61 ifĞ
	gŒªs
 =ğ
NULL
 )

63 
Œªs
 = 
Ãw
 
Add»ssT¿n¦©Ü
( );

65 
	g¡d
::
cout
 << "Could‚Ù fšd Decod”‚amed `" << 
decod”


66 << "'. Usšg deçuÉ decod”." << 
¡d
::
’dl
;

69  
	gŒªs
;

72 
Add»ssT¿n¦©Ü
 *
	gDecod”FaùÜy
::
C»©eDecod”NoW¬n
Ğ
¡d
::
¡ršg
 
decod”
 )

74 
Add»ssT¿n¦©Ü
 *
Œªs
 = 
NULL
;

76 
	gŒªs
 = 
C»©eDecod”
Ğ
decod”
 );

78 ifĞ
	gŒªs
 =ğ
NULL
 )

79 
Œªs
 = 
Ãw
 
Add»ssT¿n¦©Ü
( );

81  
	gŒªs
;

	@Decoders/DecoderFactory.h

34 #iâdeà
__DECODERFACTORY_H__


35 
	#__DECODERFACTORY_H__


	)

37 
	~"¤c/Add»ssT¿n¦©Ü.h
"

38 
	~<¡ršg
>

40 
Çme¥aû
 
	gNVM
 {

42 şas 
	cDecod”FaùÜy


44 
	gpublic
:

45 
Decod”FaùÜy
( ) { }

46 ~
Decod”FaùÜy
( ) { }

48 
Add»ssT¿n¦©Ü
 *
C»©eNewDecod”
Ğ
¡d
::
¡ršg
 
decod”
 );

49 
Add»ssT¿n¦©Ü
 *
C»©eDecod”NoW¬n
Ğ
¡d
::
¡ršg
 
decod”
 );

51 
	g´iv©e
:

52 
Add»ssT¿n¦©Ü
 *
C»©eDecod”
Ğ
¡d
::
¡ršg
 
decod”
 );

	@Decoders/Migrator/Migrator.cpp

34 
	~"Decod”s/Mig¿tÜ/Mig¿tÜ.h
"

36 
	~<io¡»am
>

37 
	~<s¡»am
>

38 
	~<ÿs£¹
>

40 
usšg
 
Çme¥aû
 
	gNVM
;

42 
	gMig¿tÜ
::
	$Mig¿tÜ
( )

44 
mig¿tšg
 = 
çl£
;

45 
šputPage
 = 0;

46 
ouutPage
 = 0;

48 
mig¿‹dAcûs£s
 = 0;

50 
mig¿tiÚM­
.
	`ş—r
( );

51 
mig¿tiÚS‹
.
	`ş—r
( );

52 
	}
}

55 
	gMig¿tÜ
::~
	$Mig¿tÜ
( )

58 
	}
}

61 
Mig¿tÜ
::
	$S‘CÚfig
Ğ
CÚfig
 *
cÚfig
, 
boŞ
 )

68 
numChªÃls
 = 
cÚfig
->
	`G‘V®ue
( "CHANNELS" );

69 
numBªks
 = 
cÚfig
->
	`G‘V®ue
( "BANKS" );

70 
numRªks
 = 
cÚfig
->
	`G‘V®ue
( "RANKS" );

71 
numSub¬¿ys
 = 
cÚfig
->
	`G‘V®ue
( "ROWS" ) / config->GetValue( "MATHeight" );

72 
	}
}

75 
	gMig¿tÜ
::
	$Regi¡”Sts
( )

77 
	`AddSt
(
mig¿‹dAcûs£s
);

78 
	}
}

85 
ušt64_t
 
	gMig¿tÜ
::
	$G‘Add»ssKey
Ğ
NVMAdd»ss
& 
add»ss
 )

87 
ušt64_t
 
row
, 
bªk
, 
¿nk
, 
sub¬¿y
, 
chªÃl
;

88 
add»ss
.
	`G‘T¿n¦©edAdd»ss
Ğ&
row
, 
NULL
, &
bªk
, &
¿nk
, &
chªÃl
, &
sub¬¿y
 );

94  (
row
 * 
numBªks
 * 
numRªks
 * 
numSub¬¿ys
 * 
numChªÃls


95 + 
bªk
 * 
numRªks
 * 
numSub¬¿ys
 * 
numChªÃls


96 + 
¿nk
 * 
numSub¬¿ys
 * 
numChªÃls


97 + 
sub¬¿y
 * 
numChªÃls


98 + 
chªÃl
);

99 
	}
}

110 
	gMig¿tÜ
::
	$S¹Mig¿tiÚ
Ğ
NVMAdd»ss
& 
´omÙ“
, NVMAdd»ss& 
demÙ“
 )

118 
ušt64_t
 
demoChªÃl
, 
´omoChªÃl
;

119 
demoChªÃl
 = 
´omÙ“
.
	`G‘ChªÃl
( );

120 
´omoChªÃl
 = 
demÙ“
.
	`G‘ChªÃl
( );

123 
ušt64_t
 
´omokey
 = 
	`G‘Add»ssKey
Ğ
´omÙ“
 );

124 
ušt64_t
 
demokey
 = 
	`G‘Add»ssKey
Ğ
demÙ“
 );

127 
	`as£¹
Ğ
mig¿tšg
 =ğ
çl£
 );

133 
mig¿tiÚM­
[
´omokey
] = 
´omoChªÃl
;

134 
mig¿tiÚM­
[
demokey
] = 
demoChªÃl
;

135 
mig¿tiÚS‹
[
´omokey
] = 
MIGRATION_READING
;

136 
mig¿tiÚS‹
[
demokey
] = 
MIGRATION_READING
;

143 
mig¿tšg
 = 
Œue
;

144 
šputPage
 = 
´omokey
;

145 
ouutPage
 = 
demokey
;

146 
	}
}

154 
	gMig¿tÜ
::
	$S‘Mig¿tiÚS‹
Ğ
NVMAdd»ss
& 
add»ss
, 
Mig¿tÜS‹
 
ÃwS‹
 )

157 
ušt64_t
 
key
 = 
	`G‘Add»ssKey
Ğ
add»ss
 );

159 
	`as£¹
Ğ
mig¿tiÚS‹
.
	`couÁ
Ğ
key
 ) != 0 );

160 
	`as£¹
Ğ
mig¿tiÚS‹
[
key
] !ğ
ÃwS‹
 );

162 
mig¿tiÚS‹
[
key
] = 
ÃwS‹
;

165 ifĞ
mig¿tiÚS‹
[
šputPage
] =ğ
MIGRATION_DONE
 &&

166 
mig¿tiÚS‹
[
ouutPage
] =ğ
MIGRATION_DONE
 )

168 
mig¿tšg
 = 
çl£
;

170 
	}
}

173 
boŞ
 
	gMig¿tÜ
::
	$Mig¿tšg
( )

175  
mig¿tšg
;

176 
	}
}

183 
boŞ
 
	gMig¿tÜ
::
	$IsMig¿‹d
Ğ
NVMAdd»ss
& 
add»ss
 )

185 
ušt64_t
 
key
 = 
	`G‘Add»ssKey
Ğ
add»ss
 );

186 
boŞ
 
rv
 = 
çl£
;

188 ifĞ
mig¿tiÚM­
.
	`couÁ
Ğ
key
 ) !ğ0 && 
mig¿tiÚS‹
.count( key ) != 0

189 && 
mig¿tiÚS‹
[
key
] =ğ
MIGRATION_DONE
 )

191 
rv
 = 
Œue
;

194  
rv
;

195 
	}
}

203 
boŞ
 
	gMig¿tÜ
::
	$IsBufã»d
Ğ
NVMAdd»ss
& 
add»ss
 )

205 
ušt64_t
 
key
 = 
	`G‘Add»ssKey
Ğ
add»ss
 );

206 
boŞ
 
rv
 = 
çl£
;

208 ifĞ
mig¿tiÚM­
.
	`couÁ
Ğ
key
 ) !ğ0 && 
mig¿tiÚS‹
.count( key ) != 0

209 && (
mig¿tiÚS‹
[
key
] =ğ
MIGRATION_BUFFERED
 || mig¿tiÚS‹[key] =ğ
MIGRATION_WRITING
 ) )

211 
rv
 = 
Œue
;

214  
rv
;

215 
	}
}

218 
	gMig¿tÜ
::
	$T¿n¦©e
Ğ
ušt64_t
 
add»ss
, ušt64_ˆ*
row
, ušt64_ˆ*
cŞ
, ušt64_ˆ*
bªk
,

219 
ušt64_t
 *
¿nk
, ušt64_ˆ*
chªÃl
, ušt64_ˆ*
sub¬¿y
 )

222 
Add»ssT¿n¦©Ü
::
	`T¿n¦©e
Ğ
add»ss
, 
row
, 
cŞ
, 
bªk
, 
¿nk
, 
chªÃl
, 
sub¬¿y
 );

226 
NVMAdd»ss
 
keyAdd»ss
;

227 
keyAdd»ss
.
	`S‘T¿n¦©edAdd»ss
Ğ*
row
, *
cŞ
, *
bªk
, *
¿nk
, *
chªÃl
, *
sub¬¿y
 );

228 
keyAdd»ss
.
	`S‘PhysiÿlAdd»ss
Ğ
add»ss
 );

229 
ušt64_t
 
key
 = 
	`G‘Add»ssKey
Ğ
keyAdd»ss
 );

232 ifĞ
mig¿tiÚM­
.
	`couÁ
Ğ
key
 ) != 0 )

234 ifĞ
mig¿tiÚS‹
[
key
] =ğ
MIGRATION_DONE
 )

236 *
chªÃl
 = 
mig¿tiÚM­
[
key
];

238 
mig¿‹dAcûs£s
++;

241 
	}
}

244 
	gMig¿tÜ
::
C»©eCheckpošt
Ğ
¡d
::
¡ršg
 
dœ
 )

246 
¡d
::
¡ršg¡»am
 
ıt_fe
;

247 
	gıt_fe
.
¡r
("");

248 
	gıt_fe
 << 
	gdœ
 << "/" << 
StName
( );

250 
	g¡d
::
of¡»am
 
ıt_hªdË
;

252 
	gıt_hªdË
.
İ’
Ğ
ıt_fe
.
¡r
().
c_¡r
(), 
¡d
::
of¡»am
::
out
 | std::of¡»am::
Œunc
 | std::of¡»am::
bš¬y
 );

254 ifĞ!
	gıt_hªdË
.
is_İ’
() )

256 
	g¡d
::
cout
 << 
StName
( ) << ": Warning: Could‚ot open checkpoint file: "

257 << 
ıt_fe
.
¡r
(è<< 
¡d
::
’dl
;

266 
	g¡d
::
m­
<
ušt64_t
, 
	gušt64_t
>::
™”©Ü
 
™
;

267  
	g™
 = 
mig¿tiÚM­
.
begš
(); iˆ!ğmig¿tiÚM­.
’d
(); it++ )

269 
	gıt_hªdË
.
wr™e
Ğ(cÚ¡ *)&(
™
->
fœ¡
), (
ušt64_t
) );

270 
	gıt_hªdË
.
wr™e
Ğ(cÚ¡ *)&(
™
->
£cÚd
), (
ušt64_t
) );

273 
	gıt_hªdË
.
şo£
( );

277 
	g¡d
::
¡ršg
 
ıt_šfo
 = 
ıt_fe
.
¡r
() + ".json";

279 
	gıt_hªdË
.
İ’
Ğ
ıt_šfo
.
c_¡r
(), 
¡d
::
of¡»am
::
out
 | std::of¡»am::
Œunc
 | std::of¡»am::
bš¬y
 );

281 ifĞ!
	gıt_hªdË
.
is_İ’
() )

283 
	g¡d
::
cout
 << 
StName
( ) << ": Warning: Could‚ot open checkpoint "

284 << "šfØfe: " << 
ıt_šfo
 << 
¡d
::
’dl
;

288 
	g¡d
::
¡ršg
 
ıt_šfo_¡r
 = "{\n\t\"Version\": 1\n}";

289 
	gıt_hªdË
.
wr™e
Ğ
ıt_šfo_¡r
.
c_¡r
(), c±_šfo_¡r.
Ëngth
() );

291 
	gıt_hªdË
.
şo£
();

297 
	gMig¿tÜ
::
Re¡ÜeCheckpošt
Ğ
¡d
::
¡ršg
 
dœ
 )

299 
¡d
::
¡ršg¡»am
 
ıt_fe
;

300 
	gıt_fe
.
¡r
("");

301 
	gıt_fe
 << 
	gdœ
 << "/" << 
StName
( );

303 
	g¡d
::
if¡»am
 
ıt_hªdË
;

305 
	gıt_hªdË
.
İ’
Ğ
ıt_fe
.
¡r
().
c_¡r
(), 
¡d
::
if¡»am
::
©e
 | std::
of¡»am
::
bš¬y
 );

307 ifĞ!
	gıt_hªdË
.
is_İ’
() )

309 
	g¡d
::
cout
 << 
StName
( ) << ": Warning: Could‚ot open checkpoint file: "

310 << 
ıt_fe
.
¡r
(è<< 
¡d
::
’dl
;

314 
	g¡d
::
¡»ampos
 
ıt_size
 = 
ıt_hªdË
.
‹Îg
( );

316 ifĞ
	gıt_size
 % ((
	gušt64_t
)*2) != 0 )

318 
¡d
::
cout
 << 
StName
( ) << ": Warning: Excepted checkpoint sizeo be "

319 << "¨muÉË oà" << ((
ušt64_t
)*2è<< 
¡d
::
’dl
;

322 
	gıt_hªdË
.
şo£
( );

324 
	gıt_hªdË
.
İ’
Ğ
ıt_fe
.
¡r
().
c_¡r
(), 
¡d
::
if¡»am
::
š
 | std::if¡»am::
bš¬y
 );

329 
ušt64_t
 
	gadd»ssM­pšgs
 = 
¡©ic_ÿ¡
<ušt64_t>(
ıt_size
 / ((uint64_t)*2));

330  
ušt64_t
 
	gm­pšg
 = 0; m­pšg < 
	gadd»ssM­pšgs
; mapping++ )

332 
ušt64_t
 
	gadd»ss
, 
	gchªÃl
;

334 
	gıt_hªdË
.
»ad
Ğ(*)(&
add»ss
), (
ušt64_t
) );

335 
	gıt_hªdË
.
»ad
Ğ(*)(&
chªÃl
), (
ušt64_t
) );

337 
	g¡d
::
·œ
<
ušt64_t
, 
	gušt64_t
> 
mig¿tiÚ
Ğ
add»ss
, 
chªÃl
 );

338 
	gmig¿tiÚM­
.
š£¹
Ğ
mig¿tiÚ
 );

341 
	gıt_hªdË
.
şo£
( );

	@Decoders/Migrator/Migrator.h

34 #iâdeà
__COIN_MIGRATOR_H__


35 
	#__COIN_MIGRATOR_H__


	)

37 
	~"¤c/Add»ssT¿n¦©Ü.h
"

38 
	~"¤c/CÚfig.h
"

39 
	~"šşude/NVMAdd»ss.h
"

41 
Çme¥aû
 
	gNVM


45 
	eMig¿tÜS‹


47 
	gMIGRATION_UNKNOWN
 = 0,

48 
	gMIGRATION_READING
,

49 
	gMIGRATION_BUFFERED
,

50 
	gMIGRATION_WRITING
,

51 
	gMIGRATION_DONE


55 şas 
	cMig¿tÜ
 : 
public
 
Add»ssT¿n¦©Ü


57 
public
:

58 
Mig¿tÜ
();

59 ~
Mig¿tÜ
();

61 
S‘CÚfig
Ğ
CÚfig
 *
cÚfig
, 
boŞ
 
ü—‹Chd»n
 = 
Œue
 );

63 
vœtu®
 
T¿n¦©e
Ğ
ušt64_t
 
add»ss
, ušt64_ˆ*
row
, ušt64_ˆ*
cŞ
, ušt64_ˆ*
bªk
,

64 
ušt64_t
 *
¿nk
, ušt64_ˆ*
chªÃl
, ušt64_ˆ*
sub¬¿y
 );

65 
usšg
 
	gAdd»ssT¿n¦©Ü
::
T¿n¦©e
;

67 
S¹Mig¿tiÚ
Ğ
NVMAdd»ss
& 
´omÙ“
, NVMAdd»ss& 
demÙ“
 );

68 
S‘Mig¿tiÚS‹
Ğ
NVMAdd»ss
& 
add»ss
, 
Mig¿tÜS‹
 
ÃwS‹
 );

69 
boŞ
 
Mig¿tšg
( );

70 
boŞ
 
IsBufã»d
Ğ
NVMAdd»ss
& 
add»ss
 );

71 
boŞ
 
IsMig¿‹d
Ğ
NVMAdd»ss
& 
add»ss
 );

73 
Regi¡”Sts
( );

75 
C»©eCheckpošt
Ğ
¡d
::
¡ršg
 
dœ
 );

76 
Re¡ÜeCheckpošt
Ğ
¡d
::
¡ršg
 
dœ
 );

78 
	g´iv©e
:

79 
¡d
::
m­
<
ušt64_t
, 
	gušt64_t
> 
	gmig¿tiÚM­
;

80 
	g¡d
::
m­
<
ušt64_t
, 
	gMig¿tÜS‹
> 
	gmig¿tiÚS‹
;

82 
ušt64_t
 
	gnumChªÃls
, 
	gnumBªks
, 
	gnumRªks
, 
	gnumSub¬¿ys
;

85 
boŞ
 
	gmig¿tšg
;

86 
ušt64_t
 
	gšputPage
, 
	gouutPage
;

88 
ncouÁ”_t
 
	gmig¿‹dAcûs£s
;

90 
ušt64_t
 
G‘Add»ssKey
Ğ
NVMAdd»ss
& 
add»ss
 );

	@Endurance/BitModel/BitModel.cpp

34 
	~"Endu¿nû/B™Mod–/B™Mod–.h
"

35 
	~<io¡»am
>

37 
usšg
 
Çme¥aû
 
	gNVM
;

39 
	gB™Mod–
::
	$B™Mod–
( )

47 
liã
.
	`ş—r
( );

49 
	`S‘G¿nuÏr™y
( 1 );

50 
	}
}

52 
	gB™Mod–
::~
	$B™Mod–
( )

58 
	}
}

60 
B™Mod–
::
	$S‘CÚfig
Ğ
CÚfig
 *
cÚfig
, 
boŞ
 
ü—‹Chd»n
 )

62 
P¬ams
 *
·¿ms
 = 
Ãw
 
	`P¬ams
( );

63 
·¿ms
->
	`S‘P¬ams
Ğ
cÚfig
 );

64 
	`S‘P¬ams
Ğ
·¿ms
 );

66 
Endu¿nûMod–
::
	`S‘CÚfig
Ğ
cÚfig
, 
ü—‹Chd»n
 );

67 
	}
}

69 
ncyşes_t
 
	gB™Mod–
::
	$R—d
Ğ
NVMašReque¡
 *
»que¡
 )

71 
ušt64_t
 
row
;

72 
ušt64_t
 
cŞ
;

73 
ncyşes_t
 
rv
 = 0;

75 
»que¡
->
add»ss
.
	`G‘T¿n¦©edAdd»ss
Ğ&
row
, &
cŞ
, 
NULL
, NULL, NULL, NULL );

77 
ušt64_t
 
wÜdkey
;

78 
ušt64_t
 
rowSize
;

79 
ušt64_t
 
wÜdSize
;

80 
ušt64_t
 
·¹™iÚCouÁ
;

82 
wÜdSize
 = 
p
->
BusWidth
;

83 
wÜdSize
 *ğ
p
->
tBURST
 *…->
RATE
;

84 
wÜdSize
 /= 8;

86 
rowSize
 = 
p
->
COLS
 * 
wÜdSize
;

89  
ušt64_t
 
i
 = 0; i < 
wÜdSize
; ++i )

91  
j
 = 0; j < 8; j++ )

99 
·¹™iÚCouÁ
 = 
rowSize
 * 8;

101 
wÜdkey
 = 
row
 * 
·¹™iÚCouÁ


102 + (
cŞ
 * 
wÜdSize
 * 8è+ 
i
 * 8 + 
j
;

104 ifĞ
	`IsD—d
Ğ
wÜdkey
 ) )

106 
rv
 = -(rv + 1);

107  
rv
;

112  
rv
;

113 
	}
}

115 
ncyşes_t
 
	gB™Mod–
::
	$Wr™e
Ğ
NVMašReque¡
 *
»que¡
, 
NVMD©aBlock
& 
ŞdD©a
 )

117 
NVMD©aBlock
& 
ÃwD©a
 = 
»que¡
->
d©a
;

118 
NVMAdd»ss
& 
add»ss
 = 
»que¡
->address;

125 
ušt64_t
 
row
;

126 
ušt64_t
 
cŞ
;

127 
ncyşes_t
 
rv
 = 0;

129 
add»ss
.
	`G‘T¿n¦©edAdd»ss
Ğ&
row
, &
cŞ
, 
NULL
, NULL, NULL, NULL );

137 
ušt64_t
 
wÜdkey
;

138 
ušt64_t
 
rowSize
;

139 
ušt64_t
 
wÜdSize
;

140 
ušt64_t
 
·¹™iÚCouÁ
;

142 
wÜdSize
 = 
p
->
BusWidth
;

143 
wÜdSize
 *ğ
p
->
tBURST
 *…->
RATE
;

144 
wÜdSize
 /= 8;

146 
rowSize
 = 
p
->
COLS
 * 
wÜdSize
;

149  
ušt64_t
 
i
 = 0; i < 
wÜdSize
; ++i )

155 
ušt8_t
 
ŞdBy‹
, 
ÃwBy‹
;

157 
ŞdBy‹
 = 
ŞdD©a
.
	`G‘By‹
Ğ
i
 );

158 
ÃwBy‹
 = 
ÃwD©a
.
	`G‘By‹
Ğ
i
 );

160 ifĞ
ŞdBy‹
 =ğ
ÃwBy‹
 )

167  
j
 = 0; j < 8; j++ )

169 
ušt8_t
 
ŞdB™
, 
ÃwB™
;

171 
ŞdB™
 = ( 
ŞdBy‹
 >> 
j
 ) & 0x1;

172 
ÃwB™
 = ( 
ÃwBy‹
 >> 
j
 ) & 0x1;

174 ifĞ
ŞdB™
 =ğ
ÃwB™
 )

185 
·¹™iÚCouÁ
 = 
rowSize
 * 8;

187 
wÜdkey
 = 
row
 * 
·¹™iÚCouÁ


188 + (
cŞ
 * 
wÜdSize
 * 8è+ 
i
 * 8 + 
j
;

192 ifĞ!
	`Deüem’tLiã
Ğ
wÜdkey
 ) )

193 
rv
 = -1;

197  
rv
;

198 
	}
}

	@Endurance/BitModel/BitModel.h

34 #iâdeà
__BITMODEL_H__


35 
	#__BITMODEL_H__


	)

37 
	~"¤c/Endu¿nûMod–.h
"

39 
Çme¥aû
 
	gNVM
 {

41 şas 
	cB™Mod–
 : 
public
 
Endu¿nûMod–


43 
public
:

44 
B™Mod–
( );

45 ~
B™Mod–
( );

47 
S‘CÚfig
Ğ
CÚfig
 *
cÚfig
, 
boŞ
 
ü—‹Chd»n
 = 
Œue
 );

49 
ncyşes_t
 
R—d
Ğ
NVMašReque¡
 *
»que¡
 );

50 
ncyşes_t
 
Wr™e
Ğ
NVMašReque¡
 *
»que¡
, 
NVMD©aBlock
& 
ŞdD©a
 );

	@Endurance/ByteModel/ByteModel.cpp

34 
	~"Endu¿nû/By‹Mod–/By‹Mod–.h
"

35 
	~<io¡»am
>

37 
usšg
 
Çme¥aû
 
	gNVM
;

39 
	gBy‹Mod–
::
	$By‹Mod–
( )

47 
liã
.
	`ş—r
( );

49 
	`S‘G¿nuÏr™y
( 8 );

50 
	}
}

52 
	gBy‹Mod–
::~
	$By‹Mod–
( )

58 
	}
}

60 
By‹Mod–
::
	$S‘CÚfig
Ğ
CÚfig
 *
cÚfig
, 
boŞ
 
ü—‹Chd»n
 )

62 
P¬ams
 *
·¿ms
 = 
Ãw
 
	`P¬ams
( );

63 
·¿ms
->
	`S‘P¬ams
Ğ
cÚfig
 );

64 
	`S‘P¬ams
Ğ
·¿ms
 );

66 
Endu¿nûMod–
::
	`S‘CÚfig
Ğ
cÚfig
, 
ü—‹Chd»n
 );

67 
	}
}

69 
ncyşes_t
 
	gBy‹Mod–
::
	$R—d
Ğ
NVMašReque¡
 *
»que¡
 )

71 
ušt64_t
 
row
;

72 
ušt64_t
 
cŞ
;

73 
ncyşes_t
 
rv
 = 0;

75 
»que¡
->
add»ss
.
	`G‘T¿n¦©edAdd»ss
Ğ&
row
, &
cŞ
, 
NULL
, NULL, NULL, NULL );

77 
ušt64_t
 
wÜdkey
;

78 
ušt64_t
 
rowSize
;

79 
ušt64_t
 
wÜdSize
;

80 
ušt64_t
 
·¹™iÚCouÁ
;

86 
wÜdSize
 = 
p
->
BusWidth
;

87 
wÜdSize
 *ğ
p
->
tBURST
 *…->
RATE
;

88 
wÜdSize
 /= 8;

91 
rowSize
 = 
p
->
COLS
 * 
wÜdSize
;

94  
i
 = ()
wÜdSize
 - 1; i >= 0; --i )

102 
·¹™iÚCouÁ
 = ( 
rowSize
 / 8 );

104 
wÜdkey
 = 
row
 * 
·¹™iÚCouÁ
 + 
cŞ
 * 
wÜdSize
 + 
i
;

106 ifĞ
	`IsD—d
Ğ
wÜdkey
 ) )

108 
rv
 = -(rv + 1);

109  
rv
;

113  
rv
;

114 
	}
}

115 
ncyşes_t
 
	gBy‹Mod–
::
	$Wr™e
Ğ
NVMašReque¡
 *
»que¡
, 
NVMD©aBlock
& 
ŞdD©a
 )

117 
NVMD©aBlock
& 
ÃwD©a
 = 
»que¡
->
d©a
;

118 
NVMAdd»ss
 
add»ss
 = 
»que¡
->address;

125 
ušt64_t
 
row
;

126 
ušt64_t
 
cŞ
;

127 
ncyşes_t
 
rv
 = 0;

132 
add»ss
.
	`G‘T¿n¦©edAdd»ss
Ğ&
row
, &
cŞ
, 
NULL
, NULL, NULL, NULL );

140 
ušt64_t
 
wÜdkey
;

141 
ušt64_t
 
rowSize
;

142 
ušt64_t
 
wÜdSize
;

143 
ušt64_t
 
·¹™iÚCouÁ
;

149 
wÜdSize
 = 
p
->
BusWidth
;

150 
wÜdSize
 *ğ
p
->
tBURST
 *…->
RATE
;

151 
wÜdSize
 /= 8;

154 
rowSize
 = 
p
->
COLS
 * 
wÜdSize
;

157  
i
 = ()
wÜdSize
 - 1; i >= 0; --i )

159 
ušt8_t
 
ŞdBy‹
, 
ÃwBy‹
;

161 
ŞdBy‹
 = 
ŞdD©a
.
	`G‘By‹
Ğ
i
 );

162 
ÃwBy‹
 = 
ÃwD©a
.
	`G‘By‹
Ğ
i
 );

164 ifĞ
ŞdBy‹
 =ğ
ÃwBy‹
 )

173 
·¹™iÚCouÁ
 = ( 
rowSize
 / 8 );

175 
wÜdkey
 = 
row
 * 
·¹™iÚCouÁ
 + 
cŞ
 * 
wÜdSize
 + 
i
;

177 ifĞ!
	`Deüem’tLiã
Ğ
wÜdkey
 ) )

178 
rv
 = -1;

181  
rv
;

182 
	}
}

	@Endurance/ByteModel/ByteModel.h

34 #iâdeà
__BYTEMODEL_H__


35 
	#__BYTEMODEL_H__


	)

37 
	~"¤c/Endu¿nûMod–.h
"

39 
Çme¥aû
 
	gNVM
 {

41 şas 
	cBy‹Mod–
 : 
public
 
Endu¿nûMod–


43 
public
:

44 
By‹Mod–
( );

45 ~
By‹Mod–
( );

47 
S‘CÚfig
Ğ
CÚfig
 *
cÚfig
, 
boŞ
 
ü—‹Chd»n
 = 
Œue
 );

49 
ncyşes_t
 
R—d
Ğ
NVMašReque¡
 *
»que¡
 );

50 
ncyşes_t
 
Wr™e
Ğ
NVMašReque¡
 *
»que¡
, 
NVMD©aBlock
& 
ŞdD©a
 );

	@Endurance/Distributions/Normal.cpp

34 
	~"Endu¿nû/Di¡ributiÚs/NÜm®.h
"

35 
	~<cm©h
>

36 
	~<c¡dlib
>

37 
	~<io¡»am
>

39 
usšg
 
Çme¥aû
 
	gNVM
;

41 
	gNÜm®Di¡ributiÚ
::
	$NÜm®Di¡ributiÚ
( )

43 
ÃxtEndu¿nû
 = 0.0f;

44 
	}
}

46 
	gNÜm®Di¡ributiÚ
::
	$NÜm®Di¡ributiÚ
Ğ
CÚfig
 *
cÚf
 )

48 
cÚfig
 = 
cÚf
;

50 ifĞ
cÚf
->
	`G‘V®ue
( "EnduranceDistMean" ) == -1 )

52 
¡d
::
cout
 << "EnduranceDistMean…arameter‚ot found for‚ormal \
!!\n";

54 
m—n
 = 1000000;

58 
m—n
 = 
cÚf
->
	`G‘V®ue
( "EnduranceDistMean" );

62 ifĞ
cÚf
->
	`G‘V®ue
( "EnduranceDistVariance" ) == -1 )

64 
¡d
::
cout
 << "EnduranceDistVariance…arameter‚ot found for‚ormal \
!!\n";

66 
v¬Ÿnû
 = 100000;

70 
v¬Ÿnû
 = 
cÚf
->
	`G‘V®ue
( "EnduranceDistVariance" );

73 
ÃxtEndu¿nû
 = 0.0f;

74 
	}
}

76 
ušt64_t
 
	gNÜm®Di¡ributiÚ
::
	$G‘Endu¿nû
( )

78 
x1
, 
x2
;

79 
y1
, 
y2
;

80 
w
;

87 ifĞ
ÃxtEndu¿nû
 != 0.0f )

89 
w
 = 
ÃxtEndu¿nû
;

90 
ÃxtEndu¿nû
 = 0.0f;

92  (
ušt64_t
)
w
;

99 
w
 = 2.0f;

100  
w
 >= 1.0f )

102 
x1
 = 2.0 * ( ()(
	`¿nd
( ) % 1000000) / 1000000.0f ) - 1.0f;

103 
x2
 = 2.0 * ( ()(
	`¿nd
( ) % 1000000) / 1000000.0f ) - 1.0f;

104 
w
 = 
x1
 * x1 + 
x2
 * x2;

107 
w
 = 
	`sq¹
ĞĞ-2.0à* 
	`log
( w ) ) / w );

108 
y1
 = 
x1
 * 
w
;

109 
y2
 = 
x2
 * 
w
;

111 
ÃxtEndu¿nû
 = 
¡©ic_ÿ¡
<>(
m—n
è+ 
y2


112 * 
¡©ic_ÿ¡
<>(
v¬Ÿnû
);

114  
m—n
 + 
¡©ic_ÿ¡
<
ušt64_t
>(
y1
 * stic_ÿ¡<>(
v¬Ÿnû
));

115 
	}
}

	@Endurance/Distributions/Normal.h

34 #iâdeà
__NORMALDISTRIBUTION_H__


35 
	#__NORMALDISTRIBUTION_H__


	)

37 
	~"¤c/Endu¿nûDi¡ributiÚ.h
"

39 
Çme¥aû
 
	gNVM
 {

41 şas 
	cNÜm®Di¡ributiÚ
 : 
public
 
Endu¿nûDi¡ributiÚ


43 
public
:

44 
NÜm®Di¡ributiÚ
( );

45 
NÜm®Di¡ributiÚ
Ğ
CÚfig
 *
cÚf
 );

46 ~
NÜm®Di¡ributiÚ
( ) { }

48 
ušt64_t
 
G‘Endu¿nû
( );

50 
S‘M—n
Ğ
ušt64_t
 
m
 ) { 
	gm—n
 = m; }

51 
S‘V¬Ÿnû
Ğ
ušt64_t
 
v¬
 ) { 
	gv¬Ÿnû
 = var; }

53 
ušt64_t
 
G‘M—n
Ğè{  
	gm—n
; }

54 
ušt64_t
 
G‘V¬Ÿnû
Ğè{  
	gv¬Ÿnû
; }

56 
	g´iv©e
:

57 
CÚfig
 *
cÚfig
;

59 
ušt64_t
 
	gm—n
;

60 
ušt64_t
 
	gv¬Ÿnû
;

61 
	gÃxtEndu¿nû
;

	@Endurance/Distributions/Uniform.cpp

34 
	~"Endu¿nû/Di¡ributiÚs/UnifÜm.h
"

35 
	~<m©h.h
>

36 
	~<io¡»am
>

38 
usšg
 
Çme¥aû
 
	gNVM
;

40 
	gUnifÜmDi¡ributiÚ
::
	$UnifÜmDi¡ributiÚ
Ğ
CÚfig
 *
cÚf
 )

42 
cÚfig
 = 
cÚf
;

45 ifĞ
cÚf
->
	`G‘V®ue
( "EnduranceDistMean" ) == -1 )

47 
¡d
::
cout
 << "EnduranceDistMean…arameter‚ot found for‚ormal \
!!\n";

49 
m—n
 = 1000000;

53 
m—n
 = 
cÚf
->
	`G‘V®ue
( "EnduranceDistMean" );

55 
	}
}

57 
ušt64_t
 
	gUnifÜmDi¡ributiÚ
::
	$G‘Endu¿nû
( )

59  
m—n
;

60 
	}
}

	@Endurance/Distributions/Uniform.h

34 #iâdeà
__UNIFORMDISTRIBUTION_H__


35 
	#__UNIFORMDISTRIBUTION_H__


	)

37 
	~"¤c/Endu¿nûDi¡ributiÚ.h
"

39 
Çme¥aû
 
	gNVM
 {

41 şas 
	cUnifÜmDi¡ributiÚ
 : 
public
 
Endu¿nûDi¡ributiÚ


43 
public
:

44 
UnifÜmDi¡ributiÚ
Ğ
CÚfig
 *
cÚf
 );

45 ~
UnifÜmDi¡ributiÚ
( ) { }

47 
ušt64_t
 
G‘Endu¿nû
( );

49 
	g´iv©e
:

50 
CÚfig
 *
cÚfig
;

52 
ušt64_t
 
	gm—n
;

	@Endurance/EnduranceDistributionFactory.cpp

34 
	~"Endu¿nû/Endu¿nûDi¡ributiÚFaùÜy.h
"

35 
	~<io¡»am
>

42 
	~"Endu¿nû/Di¡ributiÚs/NÜm®.h
"

43 
	~"Endu¿nû/Di¡ributiÚs/UnifÜm.h
"

45 
usšg
 
Çme¥aû
 
	gNVM
;

47 
Endu¿nûDi¡ributiÚ
 *
	gEndu¿nûDi¡ributiÚFaùÜy
::
C»©eEndu¿nûDi¡ributiÚ
(

48 
¡d
::
¡ršg
 
di¡Name
, 
CÚfig
 *
cÚf
 )

50 
Endu¿nûDi¡ributiÚ
 *
	g’du¿nûDi¡
 = 
NULL
;

52 ifĞ
	gdi¡Name
 == "" )

53 
¡d
::
cout
 << "NVMain: EnduranceDist is‚ot set in configuration file!\n";

55 ifĞ
	gdi¡Name
 == "Normal" )

56 
’du¿nûDi¡
 = 
Ãw
 
NÜm®Di¡ributiÚ
Ğ
cÚf
 );

62 ifĞ
	gdi¡Name
 == "Uniform" )

63 
’du¿nûDi¡
 = 
Ãw
 
UnifÜmDi¡ributiÚ
Ğ
cÚf
 );

66 ifĞ
	g’du¿nûDi¡
 =ğ
NULL
 )

67 
¡d
::
cout
 << "NVMaš: Endu¿nû di¡ributiÚ '" << 
di¡Name


70  
	g’du¿nûDi¡
;

	@Endurance/EnduranceDistributionFactory.h

34 #iâdeà
__ENDURANCEDISTRIBUTIONFACTORY_H__


35 
	#__ENDURANCEDISTRIBUTIONFACTORY_H__


	)

37 
	~"¤c/Endu¿nûDi¡ributiÚ.h
"

38 
	~"¤c/CÚfig.h
"

40 
Çme¥aû
 
	gNVM
 {

42 şas 
	cEndu¿nûDi¡ributiÚFaùÜy


44 
	gpublic
:

45 
Endu¿nûDi¡ributiÚFaùÜy
( ) { }

46 ~
Endu¿nûDi¡ributiÚFaùÜy
( ) { }

48 
Endu¿nûDi¡ributiÚ
 *
C»©eEndu¿nûDi¡ributiÚ
(

49 
¡d
::
¡ršg
 
di¡Name
, 
CÚfig
 *
cÚf
 );

	@Endurance/EnduranceModelFactory.cpp

34 
	~"Endu¿nû/Endu¿nûMod–FaùÜy.h
"

35 
	~<io¡»am
>

42 
	~"Endu¿nû/WÜdMod–/WÜdMod–.h
"

43 
	~"Endu¿nû/By‹Mod–/By‹Mod–.h
"

44 
	~"Endu¿nû/B™Mod–/B™Mod–.h
"

45 
	~"Endu¿nû/NuÎMod–/NuÎMod–.h
"

47 
usšg
 
Çme¥aû
 
	gNVM
;

49 
Endu¿nûMod–
 *
	gEndu¿nûMod–FaùÜy
::
C»©eEndu¿nûMod–
(

50 
¡d
::
¡ršg
 
mod–Name
 )

52 
Endu¿nûMod–
 *
’du¿nûMod–
 = 
NULL
;

54 ifĞ
	gmod–Name
 == "" )

55 
¡d
::
cout
 << "NVMain: EnduranceModel is‚ot set in configuration file!\n";

57 ifĞ
	gmod–Name
 == "RowModel" )

58 
’du¿nûMod–
 = 
Ãw
 
RowMod–
( );

65 ifĞ
	gmod–Name
 =ğ"WÜdMod–" ) 
’du¿nûMod–
 = 
Ãw
 
WÜdMod–
( );

66 ifĞ
	gmod–Name
 =ğ"By‹Mod–" ) 
’du¿nûMod–
 = 
Ãw
 
By‹Mod–
( );

67 ifĞ
	gmod–Name
 =ğ"B™Mod–" ) 
’du¿nûMod–
 = 
Ãw
 
B™Mod–
( );

68 ifĞ
	gmod–Name
 =ğ"NuÎMod–" ) 
’du¿nûMod–
 = 
Ãw
 
NuÎMod–
( );

71 ifĞ
	g’du¿nûMod–
 =ğ
NULL
 )

72 
¡d
::
cout
 << "NVMaš: Endu¿nû mod– " << 
mod–Name


75  
	g’du¿nûMod–
;

	@Endurance/EnduranceModelFactory.h

34 #iâdeà
__ENDURANCEMODELFACTORY_H__


35 
	#__ENDURANCEMODELFACTORY_H__


	)

37 
	~"Endu¿nû/RowMod–/RowMod–.h
"

39 
Çme¥aû
 
	gNVM
 {

41 şas 
	cEndu¿nûMod–FaùÜy


43 
	gpublic
:

44 
Endu¿nûMod–FaùÜy
( ) {}

45 ~
Endu¿nûMod–FaùÜy
( ) {}

47 
Endu¿nûMod–
 *
C»©eEndu¿nûMod–
Ğ
¡d
::
¡ršg
 
mod–Name
 );

	@Endurance/NullModel/NullModel.cpp

34 
	~"Endu¿nû/NuÎMod–/NuÎMod–.h
"

36 
usšg
 
Çme¥aû
 
	gNVM
;

38 
	gNuÎMod–
::
	$NuÎMod–
( )

40 
	}
}

42 
NuÎMod–
::~
	$NuÎMod–
( )

44 
	}
}

46 
ncyşes_t
 
NuÎMod–
::
	$R—d
Ğ
NVMašReque¡
* )

49 
	}
}

51 
ncyşes_t
 
	gNuÎMod–
::
	$Wr™e
Ğ
NVMašReque¡
* , 
NVMD©aBlock
& )

54 
	}
}

	@Endurance/NullModel/NullModel.h

34 #iâdeà
__NULLMODEL_H__


35 
	#__NULLMODEL_H__


	)

37 
	~"¤c/Endu¿nûMod–.h
"

39 
Çme¥aû
 
	gNVM
 {

41 şas 
	cNuÎMod–
 : 
public
 
Endu¿nûMod–


43 
public
:

44 
NuÎMod–
( );

45 ~
NuÎMod–
( );

47 
ncyşes_t
 
R—d
Ğ
NVMašReque¡
 *
»que¡
 );

48 
ncyşes_t
 
Wr™e
Ğ
NVMašReque¡
 *
»que¡
, 
NVMD©aBlock
& 
ŞdD©a
 );

	@Endurance/RowModel/RowModel.cpp

34 
	~"Endu¿nû/RowMod–/RowMod–.h
"

36 
usšg
 
Çme¥aû
 
	gNVM
;

38 
	gRowMod–
::
	$RowMod–
( )

46 
liã
.
	`ş—r
( );

47 
	}
}

49 
	gRowMod–
::~
	$RowMod–
( )

55 
	}
}

57 
RowMod–
::
	$S‘CÚfig
Ğ
CÚfig
 *
cÚf
, 
boŞ
 
ü—‹Chd»n
 )

59 
P¬ams
 *
·¿ms
 = 
Ãw
 
	`P¬ams
( );

60 
·¿ms
->
	`S‘P¬ams
Ğ
cÚf
 );

61 
	`S‘P¬ams
Ğ
·¿ms
 );

63 
	`S‘G¿nuÏr™y
Ğ
p
->
COLS
 * 8 );

65 
Endu¿nûMod–
::
	`S‘CÚfig
Ğ
cÚf
, 
ü—‹Chd»n
 );

66 
	}
}

68 
ncyşes_t
 
	gRowMod–
::
	$R—d
Ğ
NVMašReque¡
 *
»que¡
 )

70 
ušt64_t
 
row
;

71 
ncyşes_t
 
rv
 = 0;

76 
»que¡
->
add»ss
.
	`G‘T¿n¦©edAdd»ss
Ğ&
row
, 
NULL
, NULL, NULL, NULL, NULL );

78 ifĞ
	`IsD—d
Ğ
row
 ) )

80 
rv
 = -(rv + 1);

83  
rv
;

84 
	}
}

86 
ncyşes_t
 
	gRowMod–
::
	$Wr™e
Ğ
NVMašReque¡
 *
»que¡
, 
NVMD©aBlock
& )

88 
NVMAdd»ss
 
add»ss
 = 
»que¡
->address;

95 
ušt64_t
 
row
;

96 
ncyşes_t
 
rv
 = 0;

101 
add»ss
.
	`G‘T¿n¦©edAdd»ss
Ğ&
row
, 
NULL
, NULL, NULL, NULL, NULL );

109 ifĞ!
	`Deüem’tLiã
Ğ
row
 ) )

110 
rv
 = -1;

112  
rv
;

113 
	}
}

	@Endurance/RowModel/RowModel.h

34 #iâdeà
__ROWMODEL_H__


35 
	#__ROWMODEL_H__


	)

37 
	~"¤c/Endu¿nûMod–.h
"

39 
Çme¥aû
 
	gNVM
 {

41 şas 
	cRowMod–
 : 
public
 
Endu¿nûMod–


43 
public
:

44 
RowMod–
( );

45 ~
RowMod–
( );

47 
S‘CÚfig
Ğ
CÚfig
 *
cÚf
, 
boŞ
 
ü—‹Chd»n
 = 
Œue
 );

49 
ncyşes_t
 
R—d
Ğ
NVMašReque¡
 *
»que¡
 );

50 
ncyşes_t
 
Wr™e
Ğ
NVMašReque¡
 *
»que¡
, 
NVMD©aBlock
& 
ŞdD©a
 );

	@Endurance/WordModel/WordModel.cpp

34 
	~"Endu¿nû/WÜdMod–/WÜdMod–.h
"

35 
	~<io¡»am
>

37 
usšg
 
Çme¥aû
 
	gNVM
;

39 
	gWÜdMod–
::
	$WÜdMod–
( )

47 
liã
.
	`ş—r
( );

48 
	}
}

50 
	gWÜdMod–
::~
	$WÜdMod–
( )

56 
	}
}

58 
WÜdMod–
::
	$S‘CÚfig
Ğ
CÚfig
 *
cÚfig
, 
boŞ
 
ü—‹Chd»n
 )

60 
P¬ams
 *
·¿ms
 = 
Ãw
 
	`P¬ams
( );

61 
·¿ms
->
	`S‘P¬ams
Ğ
cÚfig
 );

62 
	`S‘P¬ams
Ğ
·¿ms
 );

64 
	`S‘G¿nuÏr™y
Ğ
p
->
BusWidth
 * 8 );

66 
Endu¿nûMod–
::
	`S‘CÚfig
Ğ
cÚfig
, 
ü—‹Chd»n
 );

67 
	}
}

69 
ncyşes_t
 
	gWÜdMod–
::
	$R—d
Ğ
NVMašReque¡
 *
»que¡
 )

71 
ušt64_t
 
row
;

72 
ušt64_t
 
cŞ
;

73 
ncyşes_t
 
rv
 = 0;

75 
»que¡
->
add»ss
.
	`G‘T¿n¦©edAdd»ss
Ğ&
row
, &
cŞ
, 
NULL
, NULL, NULL, NULL );

77 
ušt64_t
 
wÜdkey
;

78 
ušt64_t
 
rowSize
;

79 
ušt64_t
 
wÜdSize
;

80 
ušt64_t
 
·¹™iÚCouÁ
;

82 
wÜdSize
 = 
p
->
BusWidth
;

83 
wÜdSize
 *ğ
p
->
tBURST
 *…->
RATE
;

84 
wÜdSize
 /= 8;

86 
rowSize
 = 
p
->
COLS
 * 
wÜdSize
;

95 
·¹™iÚCouÁ
 = 
rowSize
 / 
wÜdSize
;

97 
wÜdkey
 = 
row
 * 
·¹™iÚCouÁ
 + 
cŞ
;

99 ifĞ
	`IsD—d
Ğ
wÜdkey
 ) )

100 
rv
 = -(rv + 1);

102  
rv
;

103 
	}
}

105 
ncyşes_t
 
	gWÜdMod–
::
	$Wr™e
Ğ
NVMašReque¡
 *
»que¡
, 
NVMD©aBlock
& )

107 
NVMAdd»ss
 
add»ss
 = 
»que¡
->address;

114 
ušt64_t
 
row
;

115 
ušt64_t
 
cŞ
;

116 
ncyşes_t
 
rv
 = 0;

121 
add»ss
.
	`G‘T¿n¦©edAdd»ss
Ğ&
row
, &
cŞ
, 
NULL
, NULL, NULL, NULL );

129 
ušt64_t
 
wÜdkey
;

130 
ušt64_t
 
rowSize
;

131 
ušt64_t
 
wÜdSize
;

132 
ušt64_t
 
·¹™iÚCouÁ
;

134 
wÜdSize
 = 
p
->
BusWidth
;

135 
wÜdSize
 *ğ
p
->
tBURST
 *…->
RATE
;

136 
wÜdSize
 /= 8;

138 
rowSize
 = 
p
->
COLS
 * 
wÜdSize
;

147 
·¹™iÚCouÁ
 = 
rowSize
 / 
wÜdSize
;

149 
wÜdkey
 = 
row
 * 
·¹™iÚCouÁ
 + 
cŞ
;

151 ifĞ!
	`Deüem’tLiã
Ğ
wÜdkey
 ) )

152 
rv
 = -1;

154  
rv
;

155 
	}
}

	@Endurance/WordModel/WordModel.h

34 #iâdeà
__WORDMODEL_H__


35 
	#__WORDMODEL_H__


	)

37 
	~"¤c/Endu¿nûMod–.h
"

39 
Çme¥aû
 
	gNVM
 {

41 şas 
	cWÜdMod–
 : 
public
 
Endu¿nûMod–


43 
public
:

44 
WÜdMod–
( );

45 ~
WÜdMod–
( );

47 
S‘CÚfig
Ğ
CÚfig
 *
cÚf
, 
boŞ
 
ü—‹Chd»n
 = 
Œue
 );

49 
ncyşes_t
 
R—d
Ğ
NVMašReque¡
 *
»que¡
 );

50 
ncyşes_t
 
Wr™e
Ğ
NVMašReque¡
 *
»que¡
, 
NVMD©aBlock
& 
ŞdD©a
 );

	@FaultModels/ECP/ECP.cpp

	@FaultModels/ECP/ECP.h

	@Interconnect/InterconnectFactory.cpp

34 
	~"IÁ”cÚÃù/IÁ”cÚÃùFaùÜy.h
"

35 
	~<io¡»am
>

38 
	~"IÁ”cÚÃù/OnChBus/OnChBus.h
"

39 
	~"IÁ”cÚÃù/OffChBus/OffChBus.h
"

41 
usšg
 
Çme¥aû
 
	gNVM
;

43 
IÁ”cÚÃù
 *
	gIÁ”cÚÃùFaùÜy
::
C»©eIÁ”cÚÃù
Ğ
¡d
::
¡ršg
 
ty³
 )

45 
IÁ”cÚÃù
 *
ic
 = 
NULL
;

47 ifĞ
	gty³
 == "" )

48 
¡d
::
cout
 << "NVMaš: IÁ”cÚÃùy³ i nÙ s‘!" << std::
’dl
;

50 ifĞ
	gty³
 == "OnChipBus" )

51 
ic
 = 
Ãw
 
OnChBus
( );

52 ifĞ
	gty³
 == "OffChipBus" )

53 
ic
 = 
Ãw
 
OffChBus
( );

57 
	g¡d
::
cout
 << "NVMain: Could‚ot find interconnect called "

58 << 
ty³
 << "!" << 
¡d
::
’dl
;

60  
	gic
;

	@Interconnect/InterconnectFactory.h

34 #iâdeà
__INTERCONNECTFACTORY_H__


35 
	#__INTERCONNECTFACTORY_H__


	)

37 
	~"¤c/IÁ”cÚÃù.h
"

39 
Çme¥aû
 
	gNVM
 {

41 şas 
	cIÁ”cÚÃùFaùÜy


43 
	gpublic
:

44 
IÁ”cÚÃùFaùÜy
( ) { }

45 ~
IÁ”cÚÃùFaùÜy
( ) { }

47 
IÁ”cÚÃù
 *
C»©eIÁ”cÚÃù
Ğ
¡d
::
¡ršg
 
ty³
 );

	@Interconnect/OffChipBus/OffChipBus.cpp

36 
	~"IÁ”cÚÃù/OffChBus/OffChBus.h
"

37 
	~"¤c/MemÜyCÚŒŞËr.h
"

38 
	~"Rªks/RªkFaùÜy.h
"

39 
	~"¤c/Ev’tQueue.h
"

41 
	~<s¡»am
>

42 
	~<ÿs£¹
>

44 
usšg
 
Çme¥aû
 
	gNVM
;

46 
	gOffChBus
::
	$OffChBus
( )

48 
cÚf
 = 
NULL
;

49 
cÚfigS‘
 = 
çl£
;

50 
numRªks
 = 0;

51 
syncV®ue
 = 0.0f;

52 
	}
}

54 
	gOffChBus
::~
	$OffChBus
( )

56 
	}
}

58 
OffChBus
::
	$S‘CÚfig
Ğ
CÚfig
 *
c
, 
boŞ
 
ü—‹Chd»n
 )

60 
P¬ams
 *
·¿ms
 = 
Ãw
 
	`P¬ams
( );

61 
·¿ms
->
	`S‘P¬ams
Ğ
c
 );

62 
	`S‘P¬ams
Ğ
·¿ms
 );

64 
cÚf
 = 
c
;

65 
cÚfigS‘
 = 
Œue
;

67 
offChD–ay
 = 
p
->
OffChL©’cy
;

69 
numRªks
 = 
p
->
RANKS
;

71 ifĞ
ü—‹Chd»n
 )

74 
Add»ssT¿n¦©Ü
 *
šcAT
 = 
Decod”FaùÜy
::
	`C»©eDecod”NoW¬n
Ğ
c
->
	`G‘SŒšg
( "Decoder" ) );

75 
T¿n¦©iÚM‘hod
 *
m‘hod
 = 
	`G‘P¬’t
()->
	`G‘T¿mpŞše
()->
	`G‘Decod”
()->
	`G‘T¿n¦©iÚM‘hod
();

76 
šcAT
->
	`S‘T¿n¦©iÚM‘hod
Ğ
m‘hod
 );

77 
šcAT
->
	`S‘DeçuÉF›ld
Ğ
RANK_FIELD
 );

78 
šcAT
->
	`S‘CÚfig
Ğ
c
, 
ü—‹Chd»n
 );

79 
	`S‘Decod”
Ğ
šcAT
 );

81  
ncouÁ”_t
 
i
 = 0; i < 
numRªks
; i++ )

83 
¡d
::
¡ršg¡»am
 
fÜm©‹r
;

85 
Rªk
 *
ÃxtRªk
 = 
RªkFaùÜy
::
	`C»©eRªkNoW¬n
Ğ
c
->
	`G‘SŒšg
( "RankType" ) );

87 
fÜm©‹r
.
	`¡r
( "" );

88 
fÜm©‹r
 << 
	`StName
Ğè<< ".¿nk" << 
i
;

89 
ÃxtRªk
->
	`StName
Ğ
fÜm©‹r
.
	`¡r
( ) );

91 
ÃxtRªk
->
	`S‘P¬’t
Ğ
this
 );

92 
	`AddChd
Ğ
ÃxtRªk
 );

95 
ÃxtRªk
->
	`S‘CÚfig
Ğ
cÚf
, 
ü—‹Chd»n
 );

96 
ÃxtRªk
->
	`Regi¡”Sts
( );

100 
	`S‘DebugName
Ğ"OffChBus", 
c
 );

101 
	}
}

103 
boŞ
 
	gOffChBus
::
	$Reque¡Com¶‘e
Ğ
NVMašReque¡
 *
»que¡
 )

105 
	`G‘Ev’tQueue
Ğ)->
	`In£¹Ev’t
Ğ
Ev’tRe¥Ú£
, 
	`G‘P¬’t
( ),

106 
»que¡
, 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
(è+ 
offChD–ay
 );

108  
Œue
;

109 
	}
}

111 
boŞ
 
	gOffChBus
::
	$IssueCommªd
Ğ
NVMašReque¡
 *
»q
 )

113 
ncouÁ”_t
 
İRªk
;

114 
boŞ
 
sucûss
 = 
çl£
;

116 
»q
->
add»ss
.
	`G‘T¿n¦©edAdd»ss
Ğ
NULL
, NULL, NULL, &
İRªk
, NULL, NULL );

118 
	`as£¹
Ğ
	`G‘Chd
Ğ
»q
 )->
	`IsIssuabË
(„eq ) );

120 
sucûss
 = 
	`G‘Chd
Ğ
»q
 )->
	`IssueCommªd
(„eq );

126 ifĞ
sucûss
 )

128  
ncouÁ”_t
 
chdIdx
 = 0; chdIdx < 
	`G‘ChdCouÁ
( ); childIdx++ )

129 ifĞ
	`G‘Chd
Ğ
»q
 ) !ğG‘ChdĞ
chdIdx
 ) )

130 
	`G‘Chd
Ğ
chdIdx
 )->
	`NÙify
Ğ
»q
 );

133  
sucûss
;

134 
	}
}

136 
boŞ
 
	gOffChBus
::
	$IsIssuabË
Ğ
NVMašReque¡
 *
»q
, 
FaR—sÚ
 *
»asÚ
 )

138  
	`G‘Chd
Ğ
»q
 )->
	`IsIssuabË
Ğ»q, 
»asÚ
 );

139 
	}
}

141 
	gOffChBus
::
	$C®cuÏ‹Sts
( )

143  
ncouÁ”_t
 
chdIdx
 = 0; chdIdx < 
	`G‘Chd»n
().
	`size
(); childIdx++ )

145 
	`G‘Chd
(
chdIdx
)->
	`C®cuÏ‹Sts
( );

147 
	}
}

149 
	gOffChBus
::
	$Cyşe
Ğ
ncyşe_t
 
¡•s
 )

151  
ncouÁ”_t
 
chdIdx
 = 0; chdIdx < 
	`G‘Chd»n
().
	`size
(); childIdx++ )

153 
	`G‘Chd
(
chdIdx
)->
	`Cyşe
Ğ
¡•s
 );

155 
	}
}

157 
	gOffChBus
::
	$C®cuÏ‹IOPow”
Ğ
boŞ
 
isR—d
, 
b™V®ue
 )

159 
R‰_nom
, 
R‰_wr
, 
R‰_cÚt
;

160 
VDDQ
, 
VSSQ
;

161 
¿nksP”Dimm
;

162 
Pdq
;

164 
Pdq
 = 0.0f;

166 
R‰_nom
 = 
p
->Rtt_nom;

167 
R‰_wr
 = 
p
->Rtt_wr;

168 
R‰_cÚt
 = 
p
->Rtt_cont;

170 
VDDQ
 = 
p
->
Vddq
;

171 
VSSQ
 = 
p
->
Vssq
;

173 
¿nksP”Dimm
 = 
p
->
RªksP”DIMM
;

175 ifĞ
¿nksP”Dimm
 == 1 )

177 ifĞ
isR—d
 )

183 
R‰pu
, 
R‰pd
, 
Rdeviû
, 
Rs
, 
RÚ
;

184 
V»ad
;

186 
Rs
 = 15.0;

187 
RÚ
 = 34.0;

189 
R‰pu
 = 
¡©ic_ÿ¡
<>(
R‰_nom
 * 2.0);

190 
R‰pd
 = 
¡©ic_ÿ¡
<>(
R‰_nom
 * 2.0);

191 
Rdeviû
 = 
Rs
 + 
RÚ
;

193 
V»ad
 = (
b™V®ue
 =ğ0è? 
VSSQ
 : 
VDDQ
;

196 
Vbus
;

198 
Vbus
 = ( (
VDDQ
 / 
R‰pu
è+ (
VSSQ
 / 
R‰pd
è+ (
V»ad
 / 
Rdeviû
) )

199 / ( (1.0à/ 
R‰pu
è+ (1.0à/ 
R‰pd
è+ (1.0à/ 
Rdeviû
) );

202 
Ibus
, 
Ipu
, 
Ipd
;

204 
Ipu
 = (
VDDQ
 - 
Vbus
è/ 
R‰pu
;

205 
Ipd
 = (
Vbus
 - 
VSSQ
è/ 
R‰pd
;

206 
Ibus
 = (
Vbus
 - 
V»ad
è/ 
Rdeviû
;

209 
Pdq
 = 
Ipu
 * Ipu * 
R‰pu
 + 
Ipd
 * Ipd * 
R‰pd
 + 
Ibus
 * Ibu * 
Rdeviû
;

213 
R‰pu
, 
R‰pd
, 
Rdeviû
, 
Rs
, 
RÚ
;

214 
Vwr™e
;

216 
Rs
 = 15.0;

217 
RÚ
 = 34.0;

219 
R‰pu
 = 
¡©ic_ÿ¡
<>(
R‰_wr
 * 2.0);

220 
R‰pd
 = 
¡©ic_ÿ¡
<>(
R‰_wr
 * 2.0);

221 
Rdeviû
 = 
Rs
 + 
RÚ
;

223 
Vwr™e
 = (
b™V®ue
 =ğ0è? 
VSSQ
 : 
VDDQ
;

226 
Vbus
;

228 
Vbus
 = ( (
VDDQ
 / 
R‰pu
è+ (
VSSQ
 / 
R‰pd
è+ (
Vwr™e
 / 
Rdeviû
) )

229 / ( (1.0à/ 
R‰pu
è+ (1.0à/ 
R‰pd
è+ (1.0à/ 
Rdeviû
) );

232 
Ibus
, 
Ipu
, 
Ipd
;

234 
Ipu
 = (
VDDQ
 - 
Vbus
è/ 
R‰pu
;

235 
Ipd
 = (
Vbus
 - 
VSSQ
è/ 
R‰pd
;

236 
Ibus
 = (
Vbus
 - 
Vwr™e
è/ 
Rdeviû
;

239 
Pdq
 = 
Ipu
 * Ipu * 
R‰pu
 + 
Ipd
 * Ipd * 
R‰pd
 + 
Ibus
 * Ibu * 
Rdeviû
;

246 ifĞ
¿nksP”Dimm
 == 2 ||„anksPerDimm == 3 ||„anksPerDimm == 4 )

248 ifĞ
isR—d
 )

254 
R1
, 
R2
, 
R3
, 
R4
, 
R5
;

255 
R‰pu
, 
R‰pd
, 
RÙhpu
, 
RÙhpd
, 
Rdeviû
, 
Rs
, 
RÚ
;

257 
Rs
 = 15.0f;

258 
RÚ
 = 34.0f;

260 
Rdeviû
 = 
Rs
 + 
RÚ
;

263 
R‰pu
 = 
¡©ic_ÿ¡
<>(
R‰_cÚt
) * 2.0f;

264 
R‰pd
 = 
¡©ic_ÿ¡
<>(
R‰_cÚt
) * 2.0f;

267 
RÙhpu
 = 
¡©ic_ÿ¡
<>(
R‰_nom
) * 2.0f;

268 
RÙhpd
 = 
¡©ic_ÿ¡
<>(
R‰_nom
) * 2.0f;

270 ifĞ
b™V®ue
 == 0 )

272 
R1
 = 
R‰pu
;

274 
R2
 = 1.0à/ ( (1.0à/ 
R‰pu
è+ (1.0à/ 
Rdeviû
) );

279 
R1
 = 1.0à/ ( (1.0à/ 
R‰pu
è+ (1.0à/ 
Rdeviû
) );

280 
R2
 = 
R‰pd
;

283 
R3
 = 
Rs
;

284 
R4
 = 
RÙhpu
;

285 
R5
 = 
RÙhpd
;

288 
RP
, 
RB
, 
RC
;

289 
RP
 = 
R3
*
R4
 + R4*
R5
 + R5*R3;

290 
RB
 = 
RP
 / 
R5
;

291 
RC
 = 
RP
 / 
R4
;

294 
RX
, 
RY
;

295 
RX
 = 1.0à/ ( (1.0à/ 
R1
è+ (1.0à/ 
RB
) );

296 
RY
 = 1.0à/ ( (1.0à/ 
R2
è+ (1.0à/ 
RC
) );

299 
Vbus
, 
Ibus
;

301 
Ibus
 = (
VDDQ
 - 
VSSQ
è/ (
RX
 + 
RY
);

302 
Vbus
 = 
VSSQ
 + 
Ibus
 * 
RY
;

305 
V‹rm
;

307 
V‹rm
 = -1.0à* 
R3
 * ( ((
VDDQ
 - 
Vbus
è/ 
R1
)

308 - ((
Vbus
 - 
VSSQ
è/ 
R2
) ) + Vbus;

311 
I1
, 
I2
, 
I3
, 
I4
, 
I5
;

313 
I1
 = (
VDDQ
 - 
Vbus
è/ 
R1
;

314 
I2
 = (
Vbus
 - 
VSSQ
è/ 
R2
;

315 
I3
 = (
Vbus
 - 
V‹rm
è/ 
R3
;

316 
I4
 = (
VDDQ
 - 
V‹rm
è/ 
R4
;

317 
I5
 = (
V‹rm
 - 
VSSQ
è/ 
R5
;

320 
Pdq
 = 
I1
 * I1 * 
R1
 + 
I2
 * I2 * 
R2
 + 
I3
 * I3 * 
R3
 + 
I4
 * I4 * 
R4


321 + 
I5
 * I5 * 
R5
;

329 
RÙhpu
, 
RÙhpd
, 
R‰pu
, 
R‰pd
, 
Rs
, 
RÚ
;

330 
Vwr™e
;

332 
R‰pu
 = 
¡©ic_ÿ¡
<>(
R‰_wr
) * 2.0f;

333 
R‰pd
 = 
¡©ic_ÿ¡
<>(
R‰_wr
) * 2.0f;

334 
RÙhpu
 = 
¡©ic_ÿ¡
<>(
R‰_nom
) * 2.0f;

335 
RÙhpd
 = 
¡©ic_ÿ¡
<>(
R‰_nom
) * 2.0f;

337 
Rs
 = 15.0f;

338 
RÚ
 = 34.0f;

340 
Vwr™e
 = (
b™V®ue
 =ğ0è? 
VSSQ
 : 
VDDQ
;

343 
RAL
, 
RBL
, 
RAR
, 
RBR
;

344 
RPL
, 
RPR
;

346 
RPL
 = 
RÙhpu
*
RÙhpd
 + RÙhpd*
Rs
 + Rs*Rothpu;

347 
RAL
 = 
RPL
 / 
RÙhpd
;

348 
RBL
 = 
RPL
 / 
RÙhpu
;

350 
RPR
 = 
R‰pu
*
R‰pd
 + R‰pd*
Rs
 + Rs*Rttpu;

351 
RAR
 = 
RPR
 / 
R‰pd
;

352 
RBR
 = 
RPR
 / 
R‰pu
;

355 
Vbus
;

357 
Vbus
 = ( (
VSSQ
 / 
RBL
è+ (VSSQ / 
RBR
è+ (
VDDQ
 / 
RAL
è+ (VDDQ / 
RAR
)

358 + (
Vwr™e
 / 
RÚ
èè/ ( (1.0à/ 
RBL
è+ (1.0à/ 
RBR
è+ (1.0à/ 
RAL
)

359 + (1.0à/ 
RAR
è+ (1.0à/ 
RÚ
) );

362 
V‹rm
, 
VÙ”m
;

364 
V‹rm
 = ( (
VDDQ
 / 
R‰pu
è+ (
VSSQ
 / 
R‰pd
è+ (
Vbus
 / 
Rs
) )

365 / ( (1.0à/ 
R‰pu
è+ (1.0à/ 
R‰pd
è+ (1.0à/ 
Rs
) );

366 
VÙ”m
 = ( (
VDDQ
 / 
RÙhpu
è+ (
VSSQ
 / 
RÙhpd
è+ (
Vbus
 / 
Rs
 ) )

367 / ( (1.0à/ 
RÙhpu
è+ (1.0à/ 
RÙhpd
è+ (1.0à/ 
Rs
) );

370 
I‰pu
, 
I‰pd
, 
Irs1
, 
Irs2
, 
IÙhpu
, 
IÙhpd
, 
Ibus
;

372 
I‰pu
 = (
VDDQ
 - 
V‹rm
è/ 
R‰pu
;

373 
I‰pd
 = (
V‹rm
 - 
VSSQ
è/ 
R‰pd
;

374 
IÙhpu
 = (
VDDQ
 - 
VÙ”m
è/ 
RÙhpu
;

375 
IÙhpd
 = (
VÙ”m
 - 
VSSQ
è/ 
RÙhpd
;

376 
Irs1
 = (
Vbus
 - 
V‹rm
è/ 
Rs
;

377 
Irs2
 = (
Vbus
 - 
VÙ”m
è/ 
Rs
;

378 
Ibus
 = (
Vwr™e
 - 
Vbus
è/ 
RÚ
;

381 
Pdq
 = 
I‰pu
*I‰pu*
R‰pu
 + 
I‰pd
*I‰pd*
R‰pd
 + 
IÙhpu
*IÙhpu*
RÙhpu


382 + 
IÙhpd
*IÙhpd*
RÙhpd
 + 
Irs1
*Irs1*
Rs
 + 
Irs2
*Irs2*Rs

383 + 
Ibus
*Ibus*
RÚ
;

387  
Pdq
;

388 
	}
}

	@Interconnect/OffChipBus/OffChipBus.h

34 #iâdeà
__INTERCONNECT_OFFCHIPBUS_H__


35 
	#__INTERCONNECT_OFFCHIPBUS_H__


	)

37 
	~"¤c/Rªk.h
"

38 
	~"¤c/IÁ”cÚÃù.h
"

39 
	~<li¡
>

41 
Çme¥aû
 
	gNVM
 {

43 şas 
	cOffChBus
 : 
public
 
IÁ”cÚÃù


45 
public
:

46 
OffChBus
( );

47 ~
OffChBus
( );

49 
S‘CÚfig
Ğ
CÚfig
 *
c
, 
boŞ
 
ü—‹Chd»n
 = 
Œue
 );

51 
boŞ
 
IssueCommªd
Ğ
NVMašReque¡
 *
»q
 );

52 
boŞ
 
IsIssuabË
Ğ
NVMašReque¡
 *
»q
, 
FaR—sÚ
 *
»asÚ
 = 
NULL
 );

53 
boŞ
 
Reque¡Com¶‘e
Ğ
NVMašReque¡
 *
»que¡
 );

55 
C®cuÏ‹Sts
( );

57 
Cyşe
Ğ
ncyşe_t
 
¡•s
 );

59 
	g´iv©e
:

60 
boŞ
 
cÚfigS‘
;

61 
ncouÁ”_t
 
	gnumRªks
;

62 
ncyşe_t
 
	goffChD–ay
;

63 
	gsyncV®ue
;

65 
CÚfig
 *
	gcÚf
;

67 
C®cuÏ‹IOPow”
Ğ
boŞ
 
isR—d
, 
b™V®ue
 );

	@Interconnect/OnChipBus/OnChipBus.cpp

34 
	~"IÁ”cÚÃù/OnChBus/OnChBus.h
"

35 
	~"Rªks/RªkFaùÜy.h
"

36 
	~"¤c/Ev’tQueue.h
"

38 
	~<s¡»am
>

39 
	~<io¡»am
>

40 
	~<ÿs£¹
>

42 
usšg
 
Çme¥aû
 
	gNVM
;

44 
	gOnChBus
::
	$OnChBus
( )

46 
cÚf
 = 
NULL
;

47 
cÚfigS‘
 = 
çl£
;

48 
numRªks
 = 0;

49 
syncV®ue
 = 0.0f;

50 
	}
}

52 
	gOnChBus
::~
	$OnChBus
( )

54 
	}
}

56 
OnChBus
::
	$S‘CÚfig
Ğ
CÚfig
 *
c
, 
boŞ
 
ü—‹Chd»n
 )

58 
P¬ams
 *
·¿ms
 = 
Ãw
 
	`P¬ams
( );

59 
·¿ms
->
	`S‘P¬ams
Ğ
c
 );

60 
	`S‘P¬ams
Ğ
·¿ms
 );

62 
cÚf
 = 
c
;

63 
cÚfigS‘
 = 
Œue
;

65 
numRªks
 = 
p
->
RANKS
;

67 ifĞ
ü—‹Chd»n
 )

70 
Add»ssT¿n¦©Ü
 *
šcAT
 = 
Decod”FaùÜy
::
	`C»©eDecod”NoW¬n
Ğ
c
->
	`G‘SŒšg
( "Decoder" ) );

71 
T¿n¦©iÚM‘hod
 *
m‘hod
 = 
	`G‘P¬’t
()->
	`G‘T¿mpŞše
()->
	`G‘Decod”
()->
	`G‘T¿n¦©iÚM‘hod
();

72 
šcAT
->
	`S‘T¿n¦©iÚM‘hod
Ğ
m‘hod
 );

73 
šcAT
->
	`S‘DeçuÉF›ld
Ğ
RANK_FIELD
 );

74 
šcAT
->
	`S‘CÚfig
Ğ
c
, 
ü—‹Chd»n
 );

75 
	`S‘Decod”
Ğ
šcAT
 );

77  
ncouÁ”_t
 
i
 = 0; i < 
numRªks
; i++ )

79 
¡d
::
¡ršg¡»am
 
fÜm©‹r
;

81 
Rªk
 *
ÃxtRªk
 = 
RªkFaùÜy
::
	`C»©eRªkNoW¬n
Ğ
c
->
	`G‘SŒšg
( "RankType" ) );

83 
fÜm©‹r
.
	`¡r
( "" );

84 
fÜm©‹r
 << 
	`StName
Ğè<< ".¿nk" << 
i
;

85 
ÃxtRªk
->
	`StName
Ğ
fÜm©‹r
.
	`¡r
( ) );

87 
ÃxtRªk
->
	`S‘P¬’t
Ğ
this
 );

88 
	`AddChd
Ğ
ÃxtRªk
 );

91 
ÃxtRªk
->
	`S‘CÚfig
Ğ
cÚf
, 
ü—‹Chd»n
 );

92 
ÃxtRªk
->
	`Regi¡”Sts
( );

96 
	`S‘DebugName
Ğ"OnChBus", 
c
 );

97 
	}
}

99 
boŞ
 
	gOnChBus
::
	$IssueCommªd
Ğ
NVMašReque¡
 *
»q
 )

101 
ncouÁ”_t
 
İRªk
;

102 
boŞ
 
sucûss
 = 
çl£
;

104 
»q
->
add»ss
.
	`G‘T¿n¦©edAdd»ss
Ğ
NULL
, NULL, NULL, &
İRªk
, NULL, NULL );

106 
	`as£¹
Ğ
	`G‘Chd
Ğ
»q
 )->
	`IsIssuabË
(„eq ) );

108 
sucûss
 = 
	`G‘Chd
Ğ
»q
 )->
	`IssueCommªd
(„eq );

114 ifĞ
sucûss
 )

116  
ncouÁ”_t
 
chdIdx
 = 0; chdIdx < 
	`G‘ChdCouÁ
( ); childIdx++ )

117 ifĞ
	`G‘Chd
Ğ
»q
 ) !ğG‘ChdĞ
chdIdx
 ) )

118 
	`G‘Chd
Ğ
chdIdx
 )->
	`NÙify
Ğ
»q
 );

121  
sucûss
;

122 
	}
}

124 
boŞ
 
	gOnChBus
::
	$IsIssuabË
Ğ
NVMašReque¡
 *
»q
, 
FaR—sÚ
 *
»asÚ
 )

126  
	`G‘Chd
Ğ
»q
 )->
	`IsIssuabË
Ğ»q, 
»asÚ
 );

127 
	}
}

129 
	gOnChBus
::
	$C®cuÏ‹Sts
( )

131  
ncouÁ”_t
 
chdIdx
 = 0; chdIdx < 
	`G‘Chd»n
().
	`size
(); childIdx++ )

133 
	`G‘Chd
(
chdIdx
)->
	`C®cuÏ‹Sts
( );

135 
	}
}

137 
	gOnChBus
::
	$Cyşe
Ğ
ncyşe_t
 
¡•s
 )

139  
ncouÁ”_t
 
chdIdx
 = 0; chdIdx < 
	`G‘Chd»n
().
	`size
(); childIdx++ )

141 
	`G‘Chd
(
chdIdx
)->
	`Cyşe
Ğ
¡•s
 );

143 
	}
}

	@Interconnect/OnChipBus/OnChipBus.h

34 #iâdeà
__INTERCONNECT_ONCHIPBUS_H__


35 
	#__INTERCONNECT_ONCHIPBUS_H__


	)

37 
	~"¤c/Rªk.h
"

38 
	~"¤c/IÁ”cÚÃù.h
"

39 
	~<io¡»am
>

41 
Çme¥aû
 
	gNVM
 {

43 şas 
	cOnChBus
 : 
public
 
IÁ”cÚÃù


45 
public
:

46 
OnChBus
( );

47 ~
OnChBus
( );

49 
S‘CÚfig
Ğ
CÚfig
 *
c
, 
boŞ
 
ü—‹Chd»n
 = 
Œue
 );

51 
boŞ
 
IssueCommªd
Ğ
NVMašReque¡
 *
mİ
 );

52 
boŞ
 
IsIssuabË
Ğ
NVMašReque¡
 *
mİ
, 
FaR—sÚ
 *
»asÚ
 = 
NULL
 );

54 
C®cuÏ‹Sts
( );

56 
Cyşe
Ğ
ncyşe_t
 
¡•s
 );

58 
Rªk
 *
G‘Rªk
Ğ
ncouÁ”_t
 
¿nk
 ) {  
	g¿nks
[rank]; }

60 
	g´iv©e
:

61 
boŞ
 
cÚfigS‘
;

62 
ncouÁ”_t
 
	gnumRªks
;

63 
	gsyncV®ue
;

65 
CÚfig
 *
	gcÚf
;

66 
Rªk
 **
	g¿nks
;

	@MemControl/DRAMCache/AbstractDRAMCache.h

3 #iâdeà
__MEMCONTROL_ABSTRACTDRAMCACHE_H__


4 
	#__MEMCONTROL_ABSTRACTDRAMCACHE_H__


	)

7 
	~"¤c/MemÜyCÚŒŞËr.h
"

10 
Çme¥aû
 
	gNVM
 {

13 
şass
 
	gNVMaš
;

16 şas 
	cAb¡¿ùDRAMCache
 : 
public
 
MemÜyCÚŒŞËr


18 
public
:

19 
Ab¡¿ùDRAMCache
( ) { }

20 
vœtu®
 ~
Ab¡¿ùDRAMCache
( ) { };

28 
vœtu®
 
S‘MašMemÜy
Ğ
NVMaš
 *
mm
 ) = 0;

29 
vœtu®
 
boŞ
 
IssueFunùiÚ®
Ğ
NVMašReque¡
 *
»q
 ) = 0;

	@MemControl/DRAMCache/DRAMCache.cpp

34 
	~"MemCÚŒŞ/DRAMCache/DRAMCache.h
"

35 
	~"MemCÚŒŞ/MemÜyCÚŒŞËrFaùÜy.h
"

36 
	~"IÁ”cÚÃù/IÁ”cÚÃùFaùÜy.h
"

37 
	~"šşude/NVMH–³rs.h
"

38 
	~"NVM/nvmaš.h
"

39 
	~"Decod”s/DRCDecod”/DRCDecod”.h
"

40 
	~"¤c/Ev’tQueue.h
"

42 
	~<io¡»am
>

43 
	~<s¡»am
>

44 
	~<ÿs£¹
>

45 
	~<c¡dlib
>

47 
usšg
 
Çme¥aû
 
	gNVM
;

49 
	gDRAMCache
::
	$DRAMCache
( )

53 
¡d
::
cout
 << "C»©ed‡ DRAMCache!" << std::
’dl
;

55 
drcChªÃls
 = 
NULL
;

57 
numChªÃls
 = 0;

58 
	}
}

60 
	gDRAMCache
::~
	$DRAMCache
( )

62 
	}
}

64 
DRAMCache
::
	$S‘CÚfig
Ğ
CÚfig
 *
cÚf
, 
boŞ
 
ü—‹Chd»n
 )

67 
numChªÃls
 = 
¡©ic_ÿ¡
<
ncouÁ”_t
>Ğ
cÚf
->
	`G‘V®ue
( "DRC_CHANNELS" ) );

69 ifĞ
ü—‹Chd»n
 )

72 
¡d
::
¡ršg
 
cÚfigFe
;

73 
CÚfig
 *
mašMemÜyCÚfig
;

75 
cÚfigFe
 = 
NVM
::
	`G‘FeP©h
Ğ
cÚf
->
	`G‘FeName
( ) );

76 
cÚfigFe
 +ğ
cÚf
->
	`G‘SŒšg
( "MM_CONFIG" );

78 
mašMemÜyCÚfig
 = 
Ãw
 
	`CÚfig
( );

79 
mašMemÜyCÚfig
->
	`R—d
Ğ
cÚfigFe
 );

81 
mašMemÜy
 = 
Ãw
 
	`NVMaš
( );

82 
Ev’tQueue
 *
mašMemÜyEv’tQueue
 = 
Ãw
 
	`Ev’tQueue
( );

83 
mašMemÜy
->
	`S‘P¬’t
Ğ
this
 );

84 
mašMemÜy
->
	`S‘Ev’tQueue
Ğ
mašMemÜyEv’tQueue
 );

85 
	`G‘Glob®Ev’tQueue
Ğ)->
	`AddSy¡em
Ğ
mašMemÜy
, 
mašMemÜyCÚfig
 );

86 
mašMemÜy
->
	`S‘CÚfig
Ğ
mašMemÜyCÚfig
, "offChMemÜy", 
ü—‹Chd»n
 );

89 
¡d
::
veùÜ
<
NVMObjeù_hook
 *>& 
chdNodes
 = 
	`G‘Chd»n
( );

91 
chdNodes
.
	`ş—r
();

93 ifĞ!
cÚf
->
	`KeyExi¡s
( "DRCVariant" ) )

95 
¡d
::
cout
 << "E¼Ü: NØDRCV¬ŸÁ s³cif›d." << std::
’dl
;

96 
	`ex™
(1);

99 
drcChªÃls
 = 
Ãw
 
Ab¡¿ùDRAMCache
*[
numChªÃls
];

100  
ncouÁ”_t
 
i
 = 0; i < 
numChªÃls
; i++ )

103 
chªÃls
, 
¿nks
, 
bªks
, 
rows
, 
cŞs
, 
sub¬¿ys
;

105 ifĞ
cÚf
->
	`KeyExi¡s
( "MATHeight" ) )

107 
rows
 = 
cÚf
->
	`G‘V®ue
( "MATHeight" );

108 
sub¬¿ys
 = 
cÚf
->
	`G‘V®ue
( "ROWS" ) / conf->GetValue( "MATHeight" );

112 
rows
 = 
cÚf
->
	`G‘V®ue
( "ROWS" );

113 
sub¬¿ys
 = 1;

116 
cŞs
 = 
cÚf
->
	`G‘V®ue
( "COLS" );

117 
bªks
 = 
cÚf
->
	`G‘V®ue
( "BANKS" );

118 
¿nks
 = 
cÚf
->
	`G‘V®ue
( "RANKS" );

119 
chªÃls
 = 
cÚf
->
	`G‘V®ue
( "DRC_CHANNELS" );

121 
T¿n¦©iÚM‘hod
 *
drcM‘hod
 = 
Ãw
 
	`T¿n¦©iÚM‘hod
();

122 
drcM‘hod
->
	`S‘B™Widths
Ğ
NVM
::
	`mlog2
Ğ
rows
 ),

123 
NVM
::
	`mlog2
Ğ
cŞs
 ),

124 
NVM
::
	`mlog2
Ğ
bªks
 ),

125 
NVM
::
	`mlog2
Ğ
¿nks
 ),

126 
NVM
::
	`mlog2
Ğ
chªÃls
 ),

127 
NVM
::
	`mlog2
Ğ
sub¬¿ys
 )

129 
drcM‘hod
->
	`S‘CouÁ
Ğ
rows
, 
cŞs
, 
bªks
, 
¿nks
, 
chªÃls
, 
sub¬¿ys
 );

132 
DRCDecod”
 *
drcDecod”
 = 
Ãw
 
	`DRCDecod”
( );

133 
drcDecod”
->
	`S‘CÚfig
Ğ
cÚfig
, 
ü—‹Chd»n
 );

134 
drcDecod”
->
	`S‘T¿n¦©iÚM‘hod
Ğ
drcM‘hod
 );

135 
drcDecod”
->
	`S‘DeçuÉF›ld
Ğ
CHANNEL_FIELD
 );

136 
	`S‘Decod”
Ğ
drcDecod”
 );

139 
¡d
::
¡ršg¡»am
 
fÜm©‹r
;

140 
¡d
::
cout
<<"debug: c»©DRC_V¬ŸÁ"<<¡d::
’dl
;

141 
drcChªÃls
[
i
] = 
dyÇmic_ÿ¡
<
Ab¡¿ùDRAMCache
 *>Ğ
MemÜyCÚŒŞËrFaùÜy
::
	`C»©eNewCÚŒŞËr
(
cÚf
->
	`G‘SŒšg
( "DRCVariant" )) );

143 
¡d
::
cout
<<"debug: s‘ maš MemÜy"<<¡d::
’dl
;

144 
drcChªÃls
[
i
] = 
dyÇmic_ÿ¡
<
Ab¡¿ùDRAMCache
 *>Ğ
MemÜyCÚŒŞËrFaùÜy
::
	`C»©eNewCÚŒŞËr
(
cÚf
->
	`G‘SŒšg
( "DRCVariant" )) );

145 
drcChªÃls
[
i
]->
	`S‘MašMemÜy
Ğ
mašMemÜy
 );

147 
fÜm©‹r
.
	`¡r
( "" );

148 
fÜm©‹r
 << 
	`StName
Ğè<< "." << 
cÚf
->
	`G‘SŒšg
Ğ"DRCV¬ŸÁ" ) << 
i
;

149 
drcChªÃls
[
i
]->
	`S‘ID
Ğ
¡©ic_ÿ¡
<>(i) );

150 
drcChªÃls
[
i
]->
	`StName
Ğ
fÜm©‹r
.
	`¡r
() );

152 
drcChªÃls
[
i
]->
	`S‘P¬’t
Ğ
this
 );

153 
	`AddChd
Ğ
drcChªÃls
[
i
] );

154 
	`AddChd
Ğ
mašMemÜy
 );

156 
drcChªÃls
[
i
]->
	`S‘CÚfig
Ğ
cÚf
, 
ü—‹Chd»n
 );

157 
drcChªÃls
[
i
]->
	`Regi¡”Sts
( );

164 
	`S‘DebugName
Ğ"DRAMCache", 
cÚf
 );

165 
	}
}

167 
	gDRAMCache
::
	$Regi¡”Sts
( )

170 
	}
}

172 
DRAMCache
::
	$R‘¿n¦©e
Ğ
NVMašReque¡
 *
»q
 )

174 
ušt64_t
 
cŞ
, 
row
, 
bªk
, 
¿nk
, 
chª
, 
sub¬¿y
;

176 
	`G‘Decod”
()->
	`T¿n¦©e
Ğ
»q
->
add»ss
.
	`G‘PhysiÿlAdd»ss
(), &
row
, &
cŞ
, &
bªk
, &
¿nk
, &
chª
, &
sub¬¿y
 );

177 
»q
->
add»ss
.
	`S‘T¿n¦©edAdd»ss
Ğ
row
, 
cŞ
, 
bªk
, 
¿nk
, 
chª
, 
sub¬¿y
 );

178 
	}
}

180 
boŞ
 
	gDRAMCache
::
	$IssueAtomic
Ğ
NVMašReque¡
 *
»q
 )

182 
ušt64_t
 
chª
;

184 
	`R‘¿n¦©e
Ğ
»q
 );

185 
»q
->
add»ss
.
	`G‘T¿n¦©edAdd»ss
Ğ
NULL
, NULL, NULL, NULL, &
chª
, NULL );

186 
	`as£¹
Ğ
chª
 < 
numChªÃls
 );

187 
	`as£¹
Ğ
	`G‘Chd
(
»q
)->
	`G‘T¿mpŞše
(è=ğ
drcChªÃls
[
chª
] );

189  
drcChªÃls
[
chª
]->
	`IssueAtomic
Ğ
»q
 );

190 
	}
}

192 
boŞ
 
	gDRAMCache
::
	$IssueCommªd
Ğ
NVMašReque¡
 *
»q
 )

194 
ušt64_t
 
chª
;

196 
	`R‘¿n¦©e
Ğ
»q
 );

197 
»q
->
add»ss
.
	`G‘T¿n¦©edAdd»ss
Ğ
NULL
, NULL, NULL, NULL, &
chª
, NULL );

198 
	`as£¹
Ğ
chª
 < 
numChªÃls
 );

199 
	`as£¹
Ğ
	`G‘Chd
(
»q
)->
	`G‘T¿mpŞše
(è=ğ
drcChªÃls
[
chª
] );

201  
drcChªÃls
[
chª
]->
	`IssueCommªd
Ğ
»q
 );

202 
	}
}

204 
boŞ
 
	gDRAMCache
::
	$IssueFunùiÚ®
Ğ
NVMašReque¡
 *
»q
 )

206 
ušt64_t
 
chª
;

208 
»q
->
add»ss
.
	`G‘T¿n¦©edAdd»ss
Ğ
NULL
, NULL, NULL, NULL, &
chª
, NULL );

210 
	`as£¹
Ğ
chª
 < 
numChªÃls
 );

212  
drcChªÃls
[
chª
]->
	`IssueFunùiÚ®
Ğ
»q
 );

213 
	}
}

215 
boŞ
 
	gDRAMCache
::
	$Reque¡Com¶‘e
Ğ
NVMašReque¡
 *
»q
 )

217 
boŞ
 
rv
 = 
çl£
;

219 ifĞ
»q
->
ty³
 =ğ
REFRESH
 )

220 
	`ProûssReäeshPul£
Ğ
»q
 );

221 ifĞ
»q
->
owÃr
 =ğ
this
 )

223 
d–‘e
 
»q
;

224 
rv
 = 
Œue
;

233 
boŞ
 
drcReque¡
 = 
çl£
;

235  
ncouÁ”_t
 
i
 = 0; i < 
numChªÃls
; i++ )

237 ifĞ
»q
->
owÃr
 =ğ
drcChªÃls
[
i
] )

239 
drcReque¡
 = 
Œue
;

244 ifĞ
drcReque¡
 )

246 
ušt64_t
 
chª
;

249 
	`R‘¿n¦©e
Ğ
»q
 );

250 
»q
->
add»ss
.
	`G‘T¿n¦©edAdd»ss
Ğ
NULL
, NULL, NULL, NULL, &
chª
, NULL );

252 
rv
 = 
drcChªÃls
[
chª
]->
	`Reque¡Com¶‘e
Ğ
»q
 );

256 
rv
 = 
	`G‘P¬’t
Ğ)->
	`Reque¡Com¶‘e
Ğ
»q
 );

260  
rv
;

261 
	}
}

263 
	gDRAMCache
::
	$Cyşe
Ğ
ncyşe_t
 
¡•s
 )

265 
ušt64_t
 
i
;

267  
i
 = 0; i < 
numChªÃls
; i++ )

269 
drcChªÃls
[
i
]->
	`Cyşe
Ğ
¡•s
 );

272 
mašMemÜy
->
	`Cyşe
Ğ
¡•s
 );

273 
	}
}

275 
	gDRAMCache
::
	$C®cuÏ‹Sts
( )

277 
ušt64_t
 
i
;

279  
i
 = 0; i < 
numChªÃls
; i++ )

281 
drcChªÃls
[
i
]->
	`C®cuÏ‹Sts
( );

284 
mašMemÜy
->
	`C®cuÏ‹Sts
( );

285 
	}
}

287 
NVMaš
 *
	gDRAMCache
::
	$G‘MašMemÜy
( )

289  
mašMemÜy
;

290 
	}
}

	@MemControl/DRAMCache/DRAMCache.h

34 #iâdeà
__MEMCONTROL_DRAMCACHE_H__


35 
	#__MEMCONTROL_DRAMCACHE_H__


	)

37 
	~"¤c/MemÜyCÚŒŞËr.h
"

38 
	~"Uts/Caches/CacheBªk.h
"

39 
	~"MemCÚŒŞ/DRAMCache/Ab¡¿ùDRAMCache.h
"

41 
Çme¥aû
 
	gNVM
 {

43 
şass
 
	gNVMaš
;

45 şas 
	cDRAMCache
 : 
public
 
MemÜyCÚŒŞËr


47 
public
:

48 
DRAMCache
( );

49 ~
DRAMCache
( );

52 
S‘CÚfig
Ğ
CÚfig
 *
cÚf
, 
boŞ
 
ü—‹Chd»n
 = 
Œue
 );

54 
boŞ
 
IssueAtomic
Ğ
NVMašReque¡
 *
»q
 );

55 
boŞ
 
IssueCommªd
Ğ
NVMašReque¡
 *
»q
 );

56 
boŞ
 
IssueFunùiÚ®
Ğ
NVMašReque¡
 *
»q
 );

57 
boŞ
 
Reque¡Com¶‘e
Ğ
NVMašReque¡
 *
»q
 );

59 
Cyşe
Ğ
ncyşe_t
 );

61 
Regi¡”Sts
( );

62 
C®cuÏ‹Sts
( );

64 
NVMaš
 *
G‘MašMemÜy
( );

66 
	g´iv©e
:

67 
NVMaš
 *
mašMemÜy
;

68 
Ab¡¿ùDRAMCache
 **
	gdrcChªÃls
;

69 
ncouÁ”_t
 
	gnumChªÃls
;

71 
R‘¿n¦©e
Ğ
NVMašReque¡
 *
»q
 );

	@MemControl/FCFS/FCFS.cpp

34 
	~"MemCÚŒŞ/FCFS/FCFS.h
"

35 
	~"SimIÁ”çû/GemsIÁ”çû/GemsIÁ”çû.h
"

36 
	~"¤c/Ev’tQueue.h
"

38 
	~<io¡»am
>

40 
usšg
 
Çme¥aû
 
	gNVM
;

52 
	gFCFS
::
	$FCFS
( )

54 
¡d
::
cout
 << "C»©ed‡ FCFS memÜy cÚŒŞËr!" << std::
’dl
;

56 
queueSize
 = 32;

58 
av”ageL©’cy
 = 0.0f;

59 
av”ageQueueL©’cy
 = 0.0f;

60 
av”ageTÙ®L©’cy
 = 0.0f;

62 
m—su»dL©’c›s
 = 0;

63 
m—su»dQueueL©’c›s
 = 0;

64 
m—su»dTÙ®L©’c›s
 = 0;

66 
mem_»ads
 = 0;

67 
mem_wr™es
 = 0;

69 
rb_h™s
 = 0;

70 
rb_miss
 = 0;

72 
psIÁ”v®
 = 0;

74 
	`In™Queues
( 1 );

75 
	}
}

77 
	gFCFS
::
	$S‘CÚfig
Ğ
CÚfig
 *
cÚf
, 
boŞ
 
ü—‹Chd»n
 )

79 ifĞ
cÚf
->
	`KeyExi¡s
( "QueueSize" ) )

81 
queueSize
 = 
¡©ic_ÿ¡
<>Ğ
cÚf
->
	`G‘V®ue
( "QueueSize" ) );

84 
MemÜyCÚŒŞËr
::
	`S‘CÚfig
Ğ
cÚf
, 
ü—‹Chd»n
 );

86 
	`S‘DebugName
Ğ"FCFS", 
cÚf
 );

87 
	}
}

89 
	gFCFS
::
	$Regi¡”Sts
( )

91 
	`AddSt
(
mem_»ads
);

92 
	`AddSt
(
mem_wr™es
);

93 
	`AddSt
(
rb_h™s
);

94 
	`AddSt
(
rb_miss
);

95 
	`AddSt
(
av”ageL©’cy
);

96 
	`AddSt
(
av”ageQueueL©’cy
);

97 
	`AddSt
(
av”ageTÙ®L©’cy
);

98 
	`AddSt
(
m—su»dL©’c›s
);

99 
	`AddSt
(
m—su»dQueueL©’c›s
);

100 
	`AddSt
(
m—su»dTÙ®L©’c›s
);

102 
MemÜyCÚŒŞËr
::
	`Regi¡”Sts
( );

103 
	}
}

105 
boŞ
 
	gFCFS
::
	$Reque¡Com¶‘e
Ğ
NVMašReque¡
 * 
»que¡
 )

111 ifĞ
»que¡
->
ty³
 =ğ
READ


112 || 
»que¡
->
ty³
 =ğ
READ_PRECHARGE


113 || 
»que¡
->
ty³
 =ğ
WRITE


114 || 
»que¡
->
ty³
 =ğ
WRITE_PRECHARGE


117 
»que¡
->
¡©us
 = 
MEM_REQUEST_COMPLETE
;

118 
»que¡
->
com¶‘iÚCyşe
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
();

121 
av”ageL©’cy
 = (×v”ageL©’cy * 
¡©ic_ÿ¡
<>(
m—su»dL©’c›s
))

122 + 
¡©ic_ÿ¡
<>(
»que¡
->
com¶‘iÚCyşe
)

123 - 
¡©ic_ÿ¡
<>(
»que¡
->
issueCyşe
))

124 / 
¡©ic_ÿ¡
<>(
m—su»dL©’c›s
+1);

125 
m—su»dL©’c›s
 += 1;

127 
av”ageQueueL©’cy
 = ((averageQueueLatency

128 * 
¡©ic_ÿ¡
<>(
m—su»dQueueL©’c›s
))

129 + 
¡©ic_ÿ¡
<>(
»que¡
->
issueCyşe
)

130 - 
¡©ic_ÿ¡
<>(
»que¡
->
¬riv®Cyşe
))

131 / 
¡©ic_ÿ¡
<>(
m—su»dQueueL©’c›s
+1);

132 
m—su»dQueueL©’c›s
 += 1;

134 
av”ageTÙ®L©’cy
 = (×v”ageTÙ®L©’cy * 
¡©ic_ÿ¡
<>(
m—su»dTÙ®L©’c›s
))

135 + 
¡©ic_ÿ¡
<>(
»que¡
->
com¶‘iÚCyşe
)

136 - 
¡©ic_ÿ¡
<>(
»que¡
->
¬riv®Cyşe
))

137 / 
¡©ic_ÿ¡
<>(
m—su»dTÙ®L©’c›s
+1);

138 
m—su»dTÙ®L©’c›s
 += 1;

141  
MemÜyCÚŒŞËr
::
	`Reque¡Com¶‘e
Ğ
»que¡
 );

142 
	}
}

144 
boŞ
 
	gFCFS
::
	$IsIssuabË
Ğ
NVMašReque¡
 * , 
FaR—sÚ
 * )

146 
boŞ
 
rv
 = 
Œue
;

149 ifĞ
Œª§ùiÚQueues
[0].
	`size
Ğè>ğ
queueSize
 )

150 
rv
 = 
çl£
;

152  
rv
;

153 
	}
}

159 
boŞ
 
	gFCFS
::
	$IssueCommªd
Ğ
NVMašReque¡
 *
»que¡
 )

162 ifĞ!
	`IsIssuabË
Ğ
»que¡
 ) )

163  
çl£
;

165 ifĞ
»que¡
->
ty³
 =ğ
READ
 )

166 
mem_»ads
++;

168 
mem_wr™es
++;

170 
	`Enqueue
Ğ0, 
»que¡
 );

175  
Œue
;

176 
	}
}

178 
	gFCFS
::
	$Cyşe
Ğ
ncyşe_t
 
¡•s
 )

180 
NVMašReque¡
 *
ÃxtReq
 = 
NULL
;

183 ifĞ!
	`FšdOlde¡R—dyReque¡
Ğ
Œª§ùiÚQueues
[0], &
ÃxtReq
 ) )

186 ()
	`FšdClo£dBªkReque¡
Ğ
Œª§ùiÚQueues
[0], &
ÃxtReq
 );

189 ifĞ
ÃxtReq
 !ğ
NULL
 )

191 
	`IssueMemÜyCommªds
Ğ
ÃxtReq
 );

194 
	`CyşeCommªdQueues
( );

196 
MemÜyCÚŒŞËr
::
	`Cyşe
Ğ
¡•s
 );

197 
	}
}

199 
	gFCFS
::
	$C®cuÏ‹Sts
( )

201 
MemÜyCÚŒŞËr
::
	`C®cuÏ‹Sts
( );

202 
	}
}

	@MemControl/FCFS/FCFS.h

34 #iâdeà
__MEMCONTROL_FCFS_H__


35 
	#__MEMCONTROL_FCFS_H__


	)

37 
	~"¤c/MemÜyCÚŒŞËr.h
"

39 
Çme¥aû
 
	gNVM
 {

41 şas 
	cFCFS
 : 
public
 
MemÜyCÚŒŞËr


43 
public
:

44 
FCFS
( );

45 ~
FCFS
( ) { }

47 
S‘CÚfig
Ğ
CÚfig
 *
cÚf
, 
boŞ
 
ü—‹Chd»n
 = 
Œue
 );

49 
boŞ
 
IssueCommªd
Ğ
NVMašReque¡
 *
»que¡
 );

50 
boŞ
 
IsIssuabË
Ğ
NVMašReque¡
 *
»que¡
, 
FaR—sÚ
 *
ç
 = 
NULL
 );

51 
boŞ
 
Reque¡Com¶‘e
Ğ
NVMašReque¡
 * 
»que¡
 );

53 
Cyşe
Ğ
ncyşe_t
 );

55 
Regi¡”Sts
( );

56 
C®cuÏ‹Sts
( );

58 
	g´iv©e
:

59 
ušt64_t
 
queueSize
;

62 
ušt64_t
 
	gm—su»dL©’c›s
, 
	gm—su»dQueueL©’c›s
, 
	gm—su»dTÙ®L©’c›s
;

63 
	gav”ageL©’cy
, 
	gav”ageQueueL©’cy
, 
	gav”ageTÙ®L©’cy
;

64 
ušt64_t
 
	gmem_»ads
, 
	gmem_wr™es
;

65 
ušt64_t
 
	grb_h™s
;

66 
ušt64_t
 
	grb_miss
;

	@MemControl/FRFCFS-WQF/FRFCFS-WQF.cpp

36 
	~"MemCÚŒŞ/FRFCFS-WQF/FRFCFS-WQF.h
"

37 
	~"¤c/Ev’tQueue.h
"

39 
	~<ÿs£¹
>

41 
usšg
 
Çme¥aû
 
	gNVM
;

49 
	gFRFCFS_WQF
::
	$FRFCFS_WQF
Ğè: 
	`»adQueueId
(0), 
	$wr™eQueueId
(1)

51 
¡d
::
cout
 << "C»©ed‡ Fœ¡ R—dy Fœ¡ ComFœ¡ S”vmemÜy \
 w™h wr™queue!" << std::
’dl
;

54 
	`In™Queues
( 2 );

56 
»adQueue
 = &(
Œª§ùiÚQueues
[
»adQueueId
]);

57 
wr™eQueue
 = &(
Œª§ùiÚQueues
[
wr™eQueueId
]);

60 
»adQueueSize
 = 32;

61 
wr™eQueueSize
 = 8;

62 
¡¬v©iÚTh»shŞd
 = 4;

67 
HighW©”M¬k
 = 
wr™eQueueSize
;

68 
LowW©”M¬k
 = 0;

71 
m_d¿ššg
 = 
çl£
;

72 
m_d¿š_¡¬t_cyşe
 = 0;

73 
m_d¿š_’d_cyşe
 = 0;

74 
m_Ï¡_d¿š_’d_cyşe
 = 0;

75 
m_d¿š_¡¬t_»adqueue_size
 = 0;

76 
m_d¿š_’d_»adqueue_size
 = 0;

77 
m_»que¡_³r_d¿š
 = 0;

80 
av”ageL©’cy
 = 0.0f;

81 
av”ageQueueL©’cy
 = 0.0f;

82 
av”ageTÙ®L©’cy
 = 0.0f;

83 
m—su»dL©’c›s
 = 0;

84 
m—su»dQueueL©’c›s
 = 0;

85 
m—su»dTÙ®L©’c›s
 = 0;

86 
¡¬v©iÚ_´ech¬ges
 = 0;

88 
mem_»ads
 = 0;

89 
mem_wr™es
 = 0;

90 
rq_rb_h™s
 = 0;

91 
rq_rb_miss
 = 0;

92 
wq_rb_h™s
 = 0;

93 
wq_rb_miss
 = 0;

95 
tÙ®_d¿šs
 = 0;

96 
tÙ®_d¿š_wr™es
 = 0;

97 
av”age_wr™es_³r_d¿š
 = 0.0;

98 
mšimum_d¿š_wr™es
 = 1e10;

99 
maximum_d¿š_wr™es
 = 0;

101 
tÙ®_d¿š_cyşes
 = 0;

102 
av”age_d¿š_cyşes
 = 0.0;

103 
maximum_d¿š_cyşes
 = 0;

104 
mšimum_d¿š_cyşes
 = 1e10;

106 
tÙ®_nÚ_d¿š_cyşes
 = 0;

107 
av”age_d¿š_¥acšg
 = 0.0;

108 
mšimum_d¿š_¥acšg
 = 1e10;

109 
maximum_d¿š_¥acšg
 = 0;

111 
tÙ®_»ad_cyşes
 = 0;

112 
av”age_»ad_¥acšg
 = 0.0;

113 
mšimum_»ad_¥acšg
 = 1e10;

114 
maximum_»ad_¥acšg
 = 0;

116 
tÙ®_»adqueue_size
 = 0;

117 
av”age_´ed¿š_»adqueue_size
 = 0.0;

118 
mšimum_´ed¿š_»adqueue_size
 = 1e10;

119 
maximum_´ed¿š_»adqueue_size
 = 0;

121 
tÙ®_»ads_duršg_d¿š
 = 0;

122 
av”age_»ads_duršg_d¿š
 = 0.0;

123 
mšimum_»ads_duršg_d¿š
 = 1e10;

124 
maximum_»ads_duršg_d¿š
 = 0;

125 
	}
}

127 
	gFRFCFS_WQF
::~
	$FRFCFS_WQF
( )

129 
	}
}

131 
FRFCFS_WQF
::
	$S‘CÚfig
Ğ
CÚfig
 *
cÚf
, 
boŞ
 
ü—‹Chd»n
 )

133 ifĞ
cÚf
->
	`KeyExi¡s
( "StarvationThreshold" ) )

134 
¡¬v©iÚTh»shŞd
 = 
¡©ic_ÿ¡
<>(

135 
cÚf
->
	`G‘V®ue
( "StarvationThreshold" ) );

137 ifĞ
cÚf
->
	`KeyExi¡s
( "ReadQueueSize" ) )

138 
»adQueueSize
 = 
¡©ic_ÿ¡
<>(

139 
cÚf
->
	`G‘V®ue
( "ReadQueueSize" ) );

141 ifĞ
cÚf
->
	`KeyExi¡s
( "WriteQueueSize" ) )

142 
wr™eQueueSize
 = 
¡©ic_ÿ¡
<>(

143 
cÚf
->
	`G‘V®ue
( "WriteQueueSize" ) );

151 ifĞ
cÚf
->
	`KeyExi¡s
( "HighWaterMark" ) )

152 
HighW©”M¬k
 = 
¡©ic_ÿ¡
<>(

153 
cÚf
->
	`G‘V®ue
( "HighWaterMark" ) );

155 ifĞ
cÚf
->
	`KeyExi¡s
( "LowWaterMark" ) )

156 
LowW©”M¬k
 = 
¡©ic_ÿ¡
<>(

157 
cÚf
->
	`G‘V®ue
( "LowWaterMark" ) );

160 ifĞ
HighW©”M¬k
 > 
wr™eQueueSize
 )

162 
HighW©”M¬k
 = 
wr™eQueueSize
;

163 
¡d
::
cout
 << "NVMaš W¬nšg: high w©”m¬k cª NOT bÏrg”hª wr™\
 size. Ha »£ˆ™Øequ®." << std::
’dl
;

166 ifĞ
LowW©”M¬k
 > 
HighW©”M¬k
 )

168 
LowW©”M¬k
 = 0;

169 
¡d
::
cout
 << "NVMaš W¬nšg:†ow w©”m¬k cª NOT bÏrg”hª high \
. Ha »£ˆ™Ø0." << std::
’dl
;

173 
MemÜyCÚŒŞËr
::
	`S‘CÚfig
Ğ
cÚf
, 
ü—‹Chd»n
 );

175 
	`S‘DebugName
Ğ"FRFCFS-WQF", 
cÚf
 );

176 
	}
}

178 
	gFRFCFS_WQF
::
	$Regi¡”Sts
( )

180 
	`AddSt
(
mem_»ads
);

181 
	`AddSt
(
mem_wr™es
);

182 
	`AddSt
(
rq_rb_h™s
);

183 
	`AddSt
(
rq_rb_miss
);

184 
	`AddSt
(
wq_rb_h™s
);

185 
	`AddSt
(
wq_rb_miss
);

187 
	`AddSt
(
tÙ®_d¿šs
);

188 
	`AddSt
(
tÙ®_d¿š_wr™es
);

189 
	`AddSt
(
av”age_wr™es_³r_d¿š
);

190 
	`AddSt
(
mšimum_d¿š_wr™es
);

191 
	`AddSt
(
maximum_d¿š_wr™es
);

193 
	`AddSt
(
tÙ®_d¿š_cyşes
);

194 
	`AddSt
(
av”age_d¿š_cyşes
);

195 
	`AddSt
(
mšimum_d¿š_cyşes
);

196 
	`AddSt
(
maximum_d¿š_cyşes
);

198 
	`AddSt
(
tÙ®_nÚ_d¿š_cyşes
);

199 
	`AddSt
(
av”age_d¿š_¥acšg
);

200 
	`AddSt
(
mšimum_d¿š_¥acšg
);

201 
	`AddSt
(
maximum_d¿š_¥acšg
);

203 
	`AddSt
(
tÙ®_»ad_cyşes
);

204 
	`AddSt
(
av”age_»ad_¥acšg
);

205 
	`AddSt
(
mšimum_»ad_¥acšg
);

206 
	`AddSt
(
maximum_»ad_¥acšg
);

208 
	`AddSt
(
tÙ®_»adqueue_size
);

209 
	`AddSt
(
av”age_´ed¿š_»adqueue_size
);

210 
	`AddSt
(
mšimum_´ed¿š_»adqueue_size
);

211 
	`AddSt
(
maximum_´ed¿š_»adqueue_size
);

213 
	`AddSt
(
tÙ®_»ads_duršg_d¿š
);

214 
	`AddSt
(
av”age_»ads_duršg_d¿š
);

215 
	`AddSt
(
mšimum_»ads_duršg_d¿š
);

216 
	`AddSt
(
maximum_»ads_duršg_d¿š
);

218 
	`AddSt
(
¡¬v©iÚ_´ech¬ges
);

219 
	`AddSt
(
av”ageL©’cy
);

220 
	`AddSt
(
av”ageQueueL©’cy
);

221 
	`AddSt
(
av”ageTÙ®L©’cy
);

222 
	`AddSt
(
m—su»dL©’c›s
);

223 
	`AddSt
(
m—su»dQueueL©’c›s
);

224 
	`AddSt
(
m—su»dTÙ®L©’c›s
);

226 
MemÜyCÚŒŞËr
::
	`Regi¡”Sts
( );

227 
	}
}

229 
boŞ
 
	gFRFCFS_WQF
::
	$IsIssuabË
Ğ
NVMašReque¡
 *
»que¡
, 
FaR—sÚ
 * )

231 
boŞ
 
rv
 = 
Œue
;

234 ifĞ(
»que¡
->
ty³
 =ğ
READ
 && 
»adQueue
->
	`size
(è>ğ
»adQueueSize
)

235 || (
»que¡
->
ty³
 =ğ
WRITE
 && ( 
wr™eQueue
->
	`size
(è>ğ
wr™eQueueSize


236 || 
m_d¿ššg
 =ğ
Œue
 ) ) )

238 
rv
 = 
çl£
;

241  
rv
;

242 
	}
}

244 
boŞ
 
	gFRFCFS_WQF
::
	$IssueCommªd
Ğ
NVMašReque¡
 *
»que¡
 )

247 ifĞ!
	`IsIssuabË
Ğ
»que¡
 ) )

249  
çl£
;

252 
»que¡
->
¬riv®Cyşe
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
();

254 ifĞ
»que¡
->
ty³
 =ğ
READ
 )

256 
	`Enqueue
Ğ
»adQueueId
, 
»que¡
 );

258 
mem_»ads
++;

260 ifĞ
»que¡
->
ty³
 =ğ
WRITE
 )

262 
	`Enqueue
Ğ
wr™eQueueId
, 
»que¡
 );

264 
mem_wr™es
++;

268  
çl£
;

271  
Œue
;

272 
	}
}

274 
boŞ
 
	gFRFCFS_WQF
::
	$Reque¡Com¶‘e
Ğ
NVMašReque¡
 * 
»que¡
 )

276 ifĞ
»que¡
->
ty³
 =ğ
WRITE
 ||„eque¡->ty³ =ğ
WRITE_PRECHARGE
 )

282 ifĞ
»que¡
->
æags
 & 
NVMašReque¡
::
FLAG_CANCELLED


283 || 
»que¡
->
æags
 & 
NVMašReque¡
::
FLAG_PAUSED
 )

285 
	`P»queue
Ğ
wr™eQueueId
, 
»que¡
 );

287  
Œue
;

295 ifĞ
»que¡
->
ty³
 =ğ
READ


296 || 
»que¡
->
ty³
 =ğ
READ_PRECHARGE


297 || 
»que¡
->
ty³
 =ğ
WRITE


298 || 
»que¡
->
ty³
 =ğ
WRITE_PRECHARGE
 )

301 
»que¡
->
¡©us
 = 
MEM_REQUEST_COMPLETE
;

302 
»que¡
->
com¶‘iÚCyşe
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
();

308 
av”ageL©’cy
 = ((averageLatency

309 * 
¡©ic_ÿ¡
<>(
m—su»dL©’c›s
))

310 + 
¡©ic_ÿ¡
<>(
»que¡
->
com¶‘iÚCyşe
)

311 - 
¡©ic_ÿ¡
<>(
»que¡
->
issueCyşe
))

312 / 
¡©ic_ÿ¡
<>(
m—su»dL©’c›s
+1);

313 
m—su»dL©’c›s
 += 1;

315 
av”ageQueueL©’cy
 = ((averageQueueLatency

316 * 
¡©ic_ÿ¡
<>(
m—su»dQueueL©’c›s
))

317 + 
¡©ic_ÿ¡
<>(
»que¡
->
issueCyşe
)

318 - 
¡©ic_ÿ¡
<>(
»que¡
->
¬riv®Cyşe
))

319 / 
¡©ic_ÿ¡
<>(
m—su»dQueueL©’c›s
+1);

320 
m—su»dQueueL©’c›s
 += 1;

322 
av”ageTÙ®L©’cy
 = (×v”ageTÙ®L©’cy * 
¡©ic_ÿ¡
<>(
m—su»dTÙ®L©’c›s
))

323 + 
¡©ic_ÿ¡
<>(
»que¡
->
com¶‘iÚCyşe
)

324 - 
¡©ic_ÿ¡
<>(
»que¡
->
¬riv®Cyşe
))

325 / 
¡©ic_ÿ¡
<>(
m—su»dTÙ®L©’c›s
+1);

326 
m—su»dTÙ®L©’c›s
 += 1;

329  
MemÜyCÚŒŞËr
::
	`Reque¡Com¶‘e
Ğ
»que¡
 );

330 
	}
}

332 
	gFRFCFS_WQF
::
	$Cyşe
Ğ
ncyşe_t
 
¡•s
 )

335 ifĞ
m_d¿ššg
 =ğ
çl£
 && 
wr™eQueue
->
	`size
(è>ğ
HighW©”M¬k
 )

338 
m_d¿š_¡¬t_cyşe
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
();

339 
m_d¿š_¡¬t_»adqueue_size
 = 
»adQueue
->
	`size
();

342 
m_d¿ššg
 = 
Œue
;

345 ifĞ
m_d¿ššg
 =ğ
Œue
 && 
wr™eQueue
->
	`size
(è<ğ
LowW©”M¬k
 )

348 
m_d¿š_’d_cyşe
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
();

351 ifĞ
m_Ï¡_d¿š_’d_cyşe
 != 0 )

354 
m_d¿š_’d_»adqueue_size
 = 
»adQueue
->
	`size
();

355 
ušt64_t
 
tmpEÁ”R—dQueue
 = 
m_d¿š_’d_»adqueue_size


356 - 
m_d¿š_¡¬t_»adqueue_size
;

358 
tÙ®_»adqueue_size
 +ğ
m_d¿š_¡¬t_»adqueue_size
;

359 
tÙ®_»ads_duršg_d¿š
 +ğ
tmpEÁ”R—dQueue
;

362 ifĞ
mšimum_´ed¿š_»adqueue_size
 > 
m_d¿š_¡¬t_»adqueue_size
 )

363 
mšimum_´ed¿š_»adqueue_size
 = 
m_d¿š_¡¬t_»adqueue_size
;

364 ifĞ
maximum_´ed¿š_»adqueue_size
 < 
m_d¿š_¡¬t_»adqueue_size
 )

365 
maximum_´ed¿š_»adqueue_size
 = 
m_d¿š_¡¬t_»adqueue_size
;

368 ifĞ
mšimum_»ads_duršg_d¿š
 > 
tmpEÁ”R—dQueue
 )

369 
mšimum_»ads_duršg_d¿š
 = 
tmpEÁ”R—dQueue
;

370 ifĞ
maximum_»ads_duršg_d¿š
 < 
tmpEÁ”R—dQueue
 )

371 
maximum_»ads_duršg_d¿š
 = 
tmpEÁ”R—dQueue
;

374 
ušt64_t
 
tmpDu¿tiÚ
 = 
m_d¿š_’d_cyşe
 - 
m_d¿š_¡¬t_cyşe
;

375 
ušt64_t
 
tmpIÁ”v®
 = 
m_d¿š_’d_cyşe
 - 
m_Ï¡_d¿š_’d_cyşe
;

377 
tÙ®_d¿š_cyşes
 +ğ
tmpDu¿tiÚ
;

379 ifĞ
maximum_d¿š_cyşes
 < 
tmpDu¿tiÚ
 )

380 
maximum_d¿š_cyşes
 = 
tmpDu¿tiÚ
;

381 ifĞ
mšimum_d¿š_cyşes
 > 
tmpDu¿tiÚ
 )

382 
mšimum_d¿š_cyşes
 = 
tmpDu¿tiÚ
;

388 
tÙ®_d¿šs
++;

389 
tÙ®_d¿š_wr™es
 +ğ
m_»que¡_³r_d¿š
;

395 ifĞ
mšimum_d¿š_wr™es
 > 
m_»que¡_³r_d¿š
 )

396 
mšimum_d¿š_wr™es
 = 
m_»que¡_³r_d¿š
;

397 ifĞ
maximum_d¿š_wr™es
 < 
m_»que¡_³r_d¿š
 )

398 
maximum_d¿š_wr™es
 = 
m_»que¡_³r_d¿š
;

401 
tÙ®_nÚ_d¿š_cyşes
 +ğ
tmpIÁ”v®
;

404 ifĞ
mšimum_d¿š_¥acšg
 > 
tmpIÁ”v®
 )

405 
mšimum_d¿š_¥acšg
 = 
tmpIÁ”v®
;

406 ifĞ
maximum_d¿š_¥acšg
 < 
tmpIÁ”v®
 )

407 
maximum_d¿š_¥acšg
 = 
tmpIÁ”v®
;

410 
ušt64_t
 
tmpR—dDu¿tiÚ
 = 
tmpIÁ”v®
 - 
tmpDu¿tiÚ
;

411 
tÙ®_»ad_cyşes
 +ğ
tmpR—dDu¿tiÚ
;

414 ifĞ
mšimum_»ad_¥acšg
 > 
tmpR—dDu¿tiÚ
 )

415 
mšimum_»ad_¥acšg
 = 
tmpR—dDu¿tiÚ
;

416 ifĞ
maximum_»ad_¥acšg
 < 
tmpR—dDu¿tiÚ
 )

417 
maximum_»ad_¥acšg
 = 
tmpR—dDu¿tiÚ
;

420 
m_»que¡_³r_d¿š
 = 0;

423 
m_Ï¡_d¿š_’d_cyşe
 = 
m_d¿š_’d_cyşe
;

426 
m_d¿ššg
 = 
çl£
;

441 
NVMašReque¡
 *
ÃxtReque¡
 = 
NULL
;

444 ifĞ
m_d¿ššg
 =ğ
Œue
 )

447 ifĞ
	`FšdSrvedReque¡
Ğ*
wr™eQueue
, &
ÃxtReque¡
 ) )

449 
wq_rb_miss
++;

450 
¡¬v©iÚ_´ech¬ges
++;

451 
m_»que¡_³r_d¿š
++;

453 ifĞ
	`FšdRowBufãrH™
Ğ*
wr™eQueue
, &
ÃxtReque¡
 ) )

455 
wq_rb_h™s
++;

456 
m_»que¡_³r_d¿š
++;

458 ifĞ
	`FšdCachedAdd»ss
Ğ*
wr™eQueue
, &
ÃxtReque¡
 ) )

461 ifĞ
	`FšdOlde¡R—dyReque¡
Ğ*
wr™eQueue
, &
ÃxtReque¡
 ) )

463 
wq_rb_miss
++;

464 
m_»que¡_³r_d¿š
++;

466 ifĞ
	`FšdClo£dBªkReque¡
Ğ*
wr™eQueue
, &
ÃxtReque¡
 ) )

468 
wq_rb_miss
++;

469 
m_»que¡_³r_d¿š
++;

475 ifĞ
	`FšdSrvedReque¡
Ğ*
»adQueue
, &
ÃxtReque¡
 ) )

477 
rq_rb_miss
++;

478 
¡¬v©iÚ_´ech¬ges
++;

480 ifĞ
	`FšdRowBufãrH™
Ğ*
»adQueue
, &
ÃxtReque¡
 ) )

482 
rq_rb_h™s
++;

484 ifĞ
	`FšdCachedAdd»ss
Ğ*
»adQueue
, &
ÃxtReque¡
 ) )

487 ifĞ
	`FšdOlde¡R—dyReque¡
Ğ*
»adQueue
, &
ÃxtReque¡
 ) )

489 
rq_rb_miss
++;

491 ifĞ
	`FšdClo£dBªkReque¡
Ğ*
»adQueue
, &
ÃxtReque¡
 ) )

493 
rq_rb_miss
++;

498 ifĞ
ÃxtReque¡
 !ğ
NULL
 )

501 ifĞ
m_d¿ššg
 =ğ
Œue
 )

502 
ÃxtReque¡
->
æags
 |ğ
NVMašReque¡
::
FLAG_FORCED
;

504 
	`IssueMemÜyCommªds
Ğ
ÃxtReque¡
 );

508 
	`CyşeCommªdQueues
( );

510 
MemÜyCÚŒŞËr
::
	`Cyşe
Ğ
¡•s
 );

511 
	}
}

513 
	gFRFCFS_WQF
::
	$C®cuÏ‹Sts
( )

515 ifĞ
tÙ®_d¿šs
 > 0 )

517 
av”age_wr™es_³r_d¿š
 = 
¡©ic_ÿ¡
<>(
tÙ®_d¿š_wr™es
è/ stic_ÿ¡<>(
tÙ®_d¿šs
);

518 
av”age_d¿š_cyşes
 = 
¡©ic_ÿ¡
<>(
tÙ®_d¿š_cyşes
è/ stic_ÿ¡<>(
tÙ®_d¿šs
);

519 
av”age_d¿š_¥acšg
 = 
¡©ic_ÿ¡
<>(
tÙ®_nÚ_d¿š_cyşes
è/ stic_ÿ¡<>(
tÙ®_d¿šs
);

520 
av”age_»ad_¥acšg
 = 
¡©ic_ÿ¡
<>(
tÙ®_»ad_cyşes
è/ stic_ÿ¡<>(
tÙ®_d¿šs
);

521 
av”age_´ed¿š_»adqueue_size
 = 
¡©ic_ÿ¡
<>(
tÙ®_»adqueue_size
è/ stic_ÿ¡<>(
tÙ®_d¿šs
);

522 
av”age_»ads_duršg_d¿š
 = 
¡©ic_ÿ¡
<>(
tÙ®_»ads_duršg_d¿š
è/ stic_ÿ¡<>(
tÙ®_d¿šs
);

526 
av”age_wr™es_³r_d¿š
 = 0.0;

527 
av”age_d¿š_cyşes
 = 0.0;

528 
av”age_d¿š_¥acšg
 = 0.0;

529 
av”age_»ad_¥acšg
 = 0.0;

530 
av”age_´ed¿š_»adqueue_size
 = 0.0;

531 
av”age_»ads_duršg_d¿š
 = 0.0;

534 
MemÜyCÚŒŞËr
::
	`C®cuÏ‹Sts
( );

535 
	}
}

	@MemControl/FRFCFS-WQF/FRFCFS-WQF.h

36 #iâdeà
__FRFCFS_WQF_WQF_H__


37 
	#__FRFCFS_WQF_WQF_H__


	)

39 
	~"¤c/MemÜyCÚŒŞËr.h
"

40 
	~<deque
>

42 
Çme¥aû
 
	gNVM
 {

44 şas 
	cFRFCFS_WQF
 : 
public
 
MemÜyCÚŒŞËr


46 
public
:

47 
FRFCFS_WQF
( );

48 ~
FRFCFS_WQF
( );

50 
boŞ
 
IssueCommªd
Ğ
NVMašReque¡
 *
»que¡
 );

51 
boŞ
 
IsIssuabË
Ğ
NVMašReque¡
 *
»que¡
, 
FaR—sÚ
 *
ç
 = 
NULL
 );

52 
boŞ
 
Reque¡Com¶‘e
Ğ
NVMašReque¡
 *
»que¡
 );

54 
S‘CÚfig
Ğ
CÚfig
 *
cÚf
, 
boŞ
 
ü—‹Chd»n
 = 
Œue
 );

56 
Cyşe
Ğ
ncyşe_t
 
¡•s
 );

58 
Regi¡”Sts
( );

59 
C®cuÏ‹Sts
( );

61 
	g´iv©e
:

63 
NVMT¿n§ùiÚQueue
 *
»adQueue
;

64 
NVMT¿n§ùiÚQueue
 *
	gwr™eQueue
;

66 cÚ¡ 
	g»adQueueId
;

67 cÚ¡ 
	gwr™eQueueId
;

70 
ušt64_t
 
	gwr™eQueueSize
;

71 
ušt64_t
 
	g»adQueueSize
;

74 
ušt64_t
 
	gHighW©”M¬k
;

75 
ušt64_t
 
	gLowW©”M¬k
;

78 
boŞ
 
	gm_d¿ššg
;

81 
ušt64_t
 
	gm_»que¡_³r_d¿š
;

82 
ušt64_t
 
	gm_d¿š_¡¬t_cyşe
;

83 
ušt64_t
 
	gm_d¿š_’d_cyşe
;

84 
ušt64_t
 
	gm_d¿š_¡¬t_»adqueue_size
;

85 
ušt64_t
 
	gm_d¿š_’d_»adqueue_size
;

86 
ušt64_t
 
	gm_Ï¡_d¿š_’d_cyşe
;

89 
ušt64_t
 
	gm—su»dL©’c›s
, 
	gm—su»dQueueL©’c›s
, 
	gm—su»dTÙ®L©’c›s
;

90 
	gav”ageL©’cy
, 
	gav”ageQueueL©’cy
, 
	gav”ageTÙ®L©’cy
;

91 
	gav”age_wr™es_³r_d¿š
;

92 
	gav”age_d¿š_cyşes
;

93 
	gav”age_d¿š_¥acšg
;

94 
	gav”age_»ad_¥acšg
;

95 
	gav”age_´ed¿š_»adqueue_size
;

96 
	gav”age_»ads_duršg_d¿š
;

97 
ušt64_t
 
	gmem_»ads
, 
	gmem_wr™es
;

98 
ušt64_t
 
	g¡¬v©iÚ_´ech¬ges
;

99 
ušt64_t
 
	grq_rb_h™s
;

100 
ušt64_t
 
	grq_rb_miss
;

101 
ušt64_t
 
	gwq_rb_h™s
;

102 
ušt64_t
 
	gwq_rb_miss
;

103 
ušt64_t
 
	gtÙ®_d¿š_wr™es
;

104 
ušt64_t
 
	gmšimum_d¿š_wr™es
;

105 
ušt64_t
 
	gmaximum_d¿š_wr™es
;

106 
ušt64_t
 
	gtÙ®_d¿šs
;

107 
ušt64_t
 
	gtÙ®_d¿š_cyşes
;

108 
ušt64_t
 
	gmaximum_d¿š_cyşes
;

109 
ušt64_t
 
	gmšimum_d¿š_cyşes
;

110 
ušt64_t
 
	gtÙ®_»ads_duršg_d¿š
;

111 
ušt64_t
 
	gmšimum_»ads_duršg_d¿š
;

112 
ušt64_t
 
	gmaximum_»ads_duršg_d¿š
;

113 
ušt64_t
 
	gtÙ®_»adqueue_size
;

114 
ušt64_t
 
	gmšimum_´ed¿š_»adqueue_size
;

115 
ušt64_t
 
	gmaximum_´ed¿š_»adqueue_size
;

116 
ušt64_t
 
	gtÙ®_nÚ_d¿š_cyşes
;

117 
ušt64_t
 
	gmšimum_d¿š_¥acšg
;

118 
ušt64_t
 
	gmaximum_d¿š_¥acšg
;

119 
ušt64_t
 
	gtÙ®_»ad_cyşes
;

120 
ušt64_t
 
	gmšimum_»ad_¥acšg
;

121 
ušt64_t
 
	gmaximum_»ad_¥acšg
;

	@MemControl/FRFCFS/FRFCFS.cpp

34 
	~"MemCÚŒŞ/FRFCFS/FRFCFS.h
"

35 
	~"¤c/Ev’tQueue.h
"

36 
	~"šşude/NVMašReque¡.h
"

37 #iâdeà
TRACE


38 
	~"SimIÁ”çû/Gem5IÁ”çû/Gem5IÁ”çû.h
"

39 
	~"ba£/¡©i¡ics.hh
"

40 
	~"ba£/ty³s.hh
"

41 
	~"sim/cÜe.hh
"

42 
	~"sim/¡©_cÚŒŞ.hh
"

44 
	~<io¡»am
>

45 
	~<£t
>

46 
	~<as£¹.h
>

48 
usšg
 
Çme¥aû
 
	gNVM
;

50 
	gFRFCFS
::
	$FRFCFS
( )

52 
¡d
::
cout
 << "Created‡ First Ready First Come First Serve memory controller!"

53 << 
¡d
::
’dl
;

55 
queueSize
 = 32;

56 
¡¬v©iÚTh»shŞd
 = 4;

58 
av”ageL©’cy
 = 0.0f;

59 
av”ageQueueL©’cy
 = 0.0f;

60 
av”ageTÙ®L©’cy
 = 0.0f;

62 
m—su»dL©’c›s
 = 0;

63 
m—su»dQueueL©’c›s
 = 0;

64 
m—su»dTÙ®L©’c›s
 = 0;

66 
mem_»ads
 = 0;

67 
mem_wr™es
 = 0;

69 
rb_h™s
 = 0;

70 
rb_miss
 = 0;

72 
wr™e_·u£s
 = 0;

74 
¡¬v©iÚ_´ech¬ges
 = 0;

76 
psIÁ”v®
 = 0;

78 
	`In™Queues
( 1 );

80 
memQueue
 = &(
Œª§ùiÚQueues
[0]);

81 
	}
}

83 
	gFRFCFS
::~
	$FRFCFS
( )

85 
¡d
::
cout
 << "FRFCFS memÜy cÚŒŞË¸de¡royed. " << 
memQueue
->
	`size
( )

86 << " commªd ¡Èš memÜy queue." << 
¡d
::
’dl
;

87 
	}
}

89 
	gFRFCFS
::
	$S‘CÚfig
Ğ
CÚfig
 *
cÚf
, 
boŞ
 
ü—‹Chd»n
 )

91 ifĞ
cÚf
->
	`KeyExi¡s
( "StarvationThreshold" ) )

93 
¡¬v©iÚTh»shŞd
 = 
¡©ic_ÿ¡
<>Ğ
cÚf
->
	`G‘V®ue
( "StarvationThreshold" ) );

96 ifĞ
cÚf
->
	`KeyExi¡s
( "QueueSize" ) )

98 
queueSize
 = 
¡©ic_ÿ¡
<>Ğ
cÚf
->
	`G‘V®ue
( "QueueSize" ) );

101 
MemÜyCÚŒŞËr
::
	`S‘CÚfig
Ğ
cÚf
, 
ü—‹Chd»n
 );

103 
	`S‘DebugName
Ğ"FRFCFS", 
cÚf
 );

104 
	}
}

106 
	gFRFCFS
::
	$Regi¡”Sts
( )

108 
	`AddSt
(
mem_»ads
);

109 
	`AddSt
(
mem_wr™es
);

110 
	`AddSt
(
rb_h™s
);

111 
	`AddSt
(
rb_miss
);

112 
	`AddSt
(
¡¬v©iÚ_´ech¬ges
);

113 
	`AddSt
(
av”ageL©’cy
);

114 
	`AddSt
(
av”ageQueueL©’cy
);

115 
	`AddSt
(
av”ageTÙ®L©’cy
);

116 
	`AddSt
(
m—su»dL©’c›s
);

117 
	`AddSt
(
m—su»dQueueL©’c›s
);

118 
	`AddSt
(
m—su»dTÙ®L©’c›s
);

119 
	`AddSt
(
wr™e_·u£s
);

121 
MemÜyCÚŒŞËr
::
	`Regi¡”Sts
( );

122 
	}
}

124 
boŞ
 
	gFRFCFS
::
	$IsIssuabË
Ğ
NVMašReque¡
 * , 
FaR—sÚ
 * )

126 
boŞ
 
rv
 = 
Œue
;

131 ifĞ
memQueue
->
	`size
Ğè>ğ
queueSize
 )

133 
rv
 = 
çl£
;

136  
rv
;

137 
	}
}

143 
boŞ
 
	gFRFCFS
::
	$IssueCommªd
Ğ
NVMašReque¡
 *
»q
 )

145 ifĞ!
	`IsIssuabË
Ğ
»q
 ) )

147  
çl£
;

150 
»q
->
¬riv®Cyşe
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
();

156 
	`Enqueue
Ğ0, 
»q
 );

158 ifĞ
»q
->
ty³
 =ğ
READ
 )

159 
mem_»ads
++;

161 
mem_wr™es
++;

166  
Œue
;

167 
	}
}

169 
boŞ
 
	gFRFCFS
::
	$Reque¡Com¶‘e
Ğ
NVMašReque¡
 * 
»que¡
 )

171 ifĞ
»que¡
->
ty³
 =ğ
WRITE
 ||„eque¡->ty³ =ğ
WRITE_PRECHARGE
 )

177 ifĞ
»que¡
->
æags
 & 
NVMašReque¡
::
FLAG_CANCELLED


178 || 
»que¡
->
æags
 & 
NVMašReque¡
::
FLAG_PAUSED
 )

180 
	`P»queue
Ğ0, 
»que¡
 );

182  
Œue
;

187 ifĞ
»que¡
->
ty³
 =ğ
READ


188 || 
»que¡
->
ty³
 =ğ
READ_PRECHARGE


189 || 
»que¡
->
ty³
 =ğ
WRITE


190 || 
»que¡
->
ty³
 =ğ
WRITE_PRECHARGE
 )

192 
»que¡
->
¡©us
 = 
MEM_REQUEST_COMPLETE
;

193 
»que¡
->
com¶‘iÚCyşe
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
();

196 
av”ageL©’cy
 = (×v”ageL©’cy * 
¡©ic_ÿ¡
<>(
m—su»dL©’c›s
))

197 + 
¡©ic_ÿ¡
<>(
»que¡
->
com¶‘iÚCyşe
)

198 - 
¡©ic_ÿ¡
<>(
»que¡
->
issueCyşe
))

199 / 
¡©ic_ÿ¡
<>(
m—su»dL©’c›s
+1);

200 
m—su»dL©’c›s
 += 1;

202 
av”ageQueueL©’cy
 = (×v”ageQueueL©’cy * 
¡©ic_ÿ¡
<>(
m—su»dQueueL©’c›s
))

203 + 
¡©ic_ÿ¡
<>(
»que¡
->
issueCyşe
)

204 - 
¡©ic_ÿ¡
<>(
»que¡
->
¬riv®Cyşe
))

205 / 
¡©ic_ÿ¡
<>(
m—su»dQueueL©’c›s
+1);

206 
m—su»dQueueL©’c›s
 += 1;

208 
av”ageTÙ®L©’cy
 = (×v”ageTÙ®L©’cy * 
¡©ic_ÿ¡
<>(
m—su»dTÙ®L©’c›s
))

209 + 
¡©ic_ÿ¡
<>(
»que¡
->
com¶‘iÚCyşe
)

210 - 
¡©ic_ÿ¡
<>(
»que¡
->
¬riv®Cyşe
))

211 / 
¡©ic_ÿ¡
<>(
m—su»dTÙ®L©’c›s
+1);

212 
m—su»dTÙ®L©’c›s
 += 1;

215  
MemÜyCÚŒŞËr
::
	`Reque¡Com¶‘e
Ğ
»que¡
 );

216 
	}
}

218 
	gFRFCFS
::
	$Cyşe
Ğ
ncyşe_t
 
¡•s
 )

220 
NVMašReque¡
 *
ÃxtReque¡
 = 
NULL
;

223 ifĞ
	`FšdSrvedReque¡
Ğ*
memQueue
, &
ÃxtReque¡
 ) )

225 
rb_miss
++;

226 
¡¬v©iÚ_´ech¬ges
++;

229 ifĞ
	`FšdRowBufãrH™
Ğ*
memQueue
, &
ÃxtReque¡
) )

231 
rb_h™s
++;

234 ifĞ
	`FšdCachedAdd»ss
Ğ*
memQueue
, &
ÃxtReque¡
 ) )

237 ifĞ
	`FšdWr™eSÎedR—d
Ğ*
memQueue
, &
ÃxtReque¡
 ) )

239 ifĞ
ÃxtReque¡
 !ğ
NULL
 )

240 
wr™e_·u£s
++;

243 ifĞ
	`FšdOlde¡R—dyReque¡
Ğ*
memQueue
, &
ÃxtReque¡
 ) )

245 
rb_miss
++;

248 ifĞ
	`FšdClo£dBªkReque¡
Ğ*
memQueue
, &
ÃxtReque¡
 ) )

250 
rb_miss
++;

254 
ÃxtReque¡
 = 
NULL
;

258 ifĞ
ÃxtReque¡
 !ğ
NULL
 )

260 
	`IssueMemÜyCommªds
Ğ
ÃxtReque¡
 );

264 
	`CyşeCommªdQueues
( );

266 
MemÜyCÚŒŞËr
::
	`Cyşe
Ğ
¡•s
 );

267 
	}
}

269 
	gFRFCFS
::
	$C®cuÏ‹Sts
( )

271 
MemÜyCÚŒŞËr
::
	`C®cuÏ‹Sts
( );

272 
	}
}

	@MemControl/FRFCFS/FRFCFS.h

34 #iâdeà
__FRFCFS_H__


35 
	#__FRFCFS_H__


	)

37 
	~"¤c/MemÜyCÚŒŞËr.h
"

38 
	~<deque
>

40 
Çme¥aû
 
	gNVM
 {

42 şas 
	cFRFCFS
 : 
public
 
MemÜyCÚŒŞËr


44 
public
:

45 
FRFCFS
( );

46 ~
FRFCFS
( );

48 
boŞ
 
IssueCommªd
Ğ
NVMašReque¡
 *
»q
 );

49 
boŞ
 
IsIssuabË
Ğ
NVMašReque¡
 *
»que¡
, 
FaR—sÚ
 *
ç
 = 
NULL
 );

50 
boŞ
 
Reque¡Com¶‘e
Ğ
NVMašReque¡
 * 
»que¡
 );

52 
S‘CÚfig
Ğ
CÚfig
 *
cÚf
, 
boŞ
 
ü—‹Chd»n
 = 
Œue
 );

54 
Cyşe
Ğ
ncyşe_t
 
¡•s
 );

56 
Regi¡”Sts
( );

57 
C®cuÏ‹Sts
( );

59 
	g´iv©e
:

60 
NVMT¿n§ùiÚQueue
 *
memQueue
;

63 
ušt64_t
 
	gqueueSize
;

66 
ušt64_t
 
	gm—su»dL©’c›s
, 
	gm—su»dQueueL©’c›s
, 
	gm—su»dTÙ®L©’c›s
;

67 
	gav”ageL©’cy
, 
	gav”ageQueueL©’cy
, 
	gav”ageTÙ®L©’cy
;

68 
ušt64_t
 
	gmem_»ads
, 
	gmem_wr™es
;

69 
ušt64_t
 
	grb_h™s
;

70 
ušt64_t
 
	grb_miss
;

71 
ušt64_t
 
	g¡¬v©iÚ_´ech¬ges
;

72 
ušt64_t
 
	gıu_š¡s
;

73 
ušt64_t
 
	gwr™e_·u£s
;

	@MemControl/LH-Cache/LH-Cache.cpp

34 
	~"MemCÚŒŞ/LH-Cache/LH-Cache.h
"

35 
	~"šşude/NVMH–³rs.h
"

36 
	~"NVM/nvmaš.h
"

37 
	~"¤c/Ev’tQueue.h
"

39 
	~<io¡»am
>

40 
	~<£t
>

41 
	~<as£¹.h
>

43 
usšg
 
Çme¥aû
 
	gNVM
;

45 
	gLH_Cache
::
	$LH_Cache
( )

46 : 
	`locks
(*
this
), 
	`FQF
(*this), 
	$NWB
(*
this
)

50 
¡d
::
cout
 << "Thi MemÜy CÚŒŞË¸i nØlÚg” maššed iÀçvÜ oàLO-Cachªd i š‡‚Ú-wÜkšg s‹." << std::
’dl
;

51 
¡d
::
cout
 << "Thi codi Úly…rovided fÜ„eã»nû." << std::
’dl
;

53 
	`ex™
(1);

55 
av”ageH™L©’cy
 = 0.0;

56 
av”ageH™QueueL©’cy
 = 0.0;

57 
av”ageMissL©’cy
 = 0.0;

58 
av”ageMissQueueL©’cy
 = 0.0;

59 
av”ageMML©’cy
 = 0.0;

60 
av”ageMMQueueL©’cy
 = 0.0;

61 
av”ageFlL©’cy
 = 0.0;

62 
av”ageFlQueueL©’cy
 = 0.0;

64 
m—su»dH™L©’c›s
 = 0;

65 
m—su»dH™QueueL©’c›s
 = 0;

66 
m—su»dMissL©’c›s
 = 0;

67 
m—su»dMissQueueL©’c›s
 = 0;

68 
m—su»dMML©’c›s
 = 0;

69 
m—su»dMMQueueL©’c›s
 = 0;

70 
m—su»dFlL©’c›s
 = 0;

71 
m—su»dFlQueueL©’c›s
 = 0;

73 
mem_»ads
 = 0;

74 
mem_wr™es
 = 0;

76 
mm_»qs
 = 0;

77 
mm_»ads
 = 0;

78 
fls
 = 0;

80 
rb_h™s
 = 0;

81 
rb_miss
 = 0;

83 
drcH™s
 = 0;

84 
drcMiss
 = 0;

86 
¡¬v©iÚ_´ech¬ges
 = 0;

88 
psIÁ”v®
 = 0;

90 
	`In™Queues
( 2 );

92 
funùiÚ®Cache
 = 
NULL
;

94 
u£Wr™eBufãr
 = 
Œue
;

96 
mašMemÜy
 = 
NULL
;

99 
drcQueue
 = &(
Œª§ùiÚQueues
[0]);

100 
flQueue
 = &(
Œª§ùiÚQueues
[1]);

101 
	}
}

103 
	gLH_Cache
::~
	$LH_Cache
( )

105 
	}
}

107 
LH_Cache
::
	$S‘CÚfig
Ğ
CÚfig
 *
cÚf
, 
boŞ
 
ü—‹Chd»n
 )

110 
¡¬v©iÚTh»shŞd
 = 4;

111 
drcQueueSize
 = 32;

112 
flQueueSize
 = 8;

113 
u£Wr™eBufãr
 = 
Œue
;

115 ifĞ
cÚf
->
	`KeyExi¡s
( "StarvationThreshold" ) )

116 
¡¬v©iÚTh»shŞd
 = 
¡©ic_ÿ¡
<>(

117 
cÚf
->
	`G‘V®ue
( "StarvationThreshold" ) );

118 ifĞ
cÚf
->
	`KeyExi¡s
( "DRCQueueSize" ) )

119 
drcQueueSize
 = 
¡©ic_ÿ¡
<
ušt64_t
>Ğ
cÚf
->
	`G‘V®ue
( "DRCQueueSize" ) );

120 ifĞ
cÚf
->
	`KeyExi¡s
( "FillQueueSize" ) )

121 
flQueueSize
 = 
¡©ic_ÿ¡
<
ušt64_t
>Ğ
cÚf
->
	`G‘V®ue
( "FillQueueSize" ) );

122 ifĞ
cÚf
->
	`KeyExi¡s
( "UseWriteBuffer" )

123 && 
cÚf
->
	`G‘SŒšg
( "UseWriteBuffer" ) == "false" )

124 
u£Wr™eBufãr
 = 
çl£
;

129 
ncouÁ”_t
 
bªks
, 
¿nks
;

130 
i
, 
j
;

132 
¿nks
 = 
¡©ic_ÿ¡
<
ncouÁ”_t
>Ğ
cÚf
->
	`G‘V®ue
( "RANKS" ) );

133 
bªks
 = 
¡©ic_ÿ¡
<
ncouÁ”_t
>Ğ
cÚf
->
	`G‘V®ue
( "BANKS" ) );

135 
bªkLocked
 = 
Ãw
 
boŞ
*[
¿nks
];

136 
funùiÚ®Cache
 = 
Ãw
 
CacheBªk
**[
¿nks
];

137  
i
 = 0; i < 
¿nks
; i++ )

139 
bªkLocked
[
i
] = 
Ãw
 
boŞ
[
bªks
];

140 
funùiÚ®Cache
[
i
] = 
Ãw
 
CacheBªk
*[
bªks
];

142  
j
 = 0; j < 
bªks
; j++ )

144 
bªkLocked
[
i
][
j
] = 
çl£
;

145 
funùiÚ®Cache
[
i
][
j
] = 
Ãw
 
	`CacheBªk
(

146 
cÚf
->
	`G‘V®ue
( "ROWS" ), 29, 64 );

150 
MemÜyCÚŒŞËr
::
	`S‘CÚfig
Ğ
cÚf
, 
ü—‹Chd»n
 );

151 
	}
}

153 
	gLH_Cache
::
	$Regi¡”Sts
( )

155 
	`AddSt
(
mem_»ads
);

156 
	`AddSt
(
mem_wr™es
);

157 
	`AddSt
(
rb_h™s
);

158 
	`AddSt
(
rb_miss
);

159 
	`AddSt
(
drcH™s
);

160 
	`AddSt
(
drcMiss
);

161 
	`AddSt
(
fls
);

163 
	`AddSt
(
mm_»qs
);

164 
	`AddSt
(
mm_»ads
);

166 
	`AddSt
(
¡¬v©iÚ_´ech¬ges
);

168 
	`AddSt
(
av”ageH™L©’cy
);

169 
	`AddSt
(
m—su»dH™L©’c›s
);

170 
	`AddSt
(
av”ageH™QueueL©’cy
);

171 
	`AddSt
(
m—su»dH™QueueL©’c›s
);

173 
	`AddSt
(
av”ageMissL©’cy
);

174 
	`AddSt
(
m—su»dMissL©’c›s
);

175 
	`AddSt
(
av”ageMissQueueL©’cy
);

176 
	`AddSt
(
m—su»dMissQueueL©’c›s
);

178 
	`AddSt
(
av”ageMML©’cy
);

179 
	`AddSt
(
m—su»dMML©’c›s
);

180 
	`AddSt
(
av”ageMMQueueL©’cy
);

181 
	`AddSt
(
m—su»dMMQueueL©’c›s
);

183 
	`AddSt
(
av”ageFlL©’cy
);

184 
	`AddSt
(
m—su»dFlL©’c›s
);

185 
	`AddSt
(
av”ageFlQueueL©’cy
);

186 
	`AddSt
(
m—su»dFlQueueL©’c›s
);

187 
	}
}

189 
	gLH_Cache
::
	$S‘MašMemÜy
Ğ
NVMaš
 *
mm
 )

191 
mašMemÜy
 = 
mm
;

192 
	}
}

194 
	gLH_Cache
::
	$C®cuÏ‹L©’cy
Ğ
NVMašReque¡
 *
»q
, *
av”age
,

195 
ušt64_t
 *
m—su»d
 )

197 (*
av”age
èğ(Ğ(*av”ageè* 
¡©ic_ÿ¡
<>(*
m—su»d
))

198 + 
¡©ic_ÿ¡
<>(
»q
->
com¶‘iÚCyşe
)

199 - 
¡©ic_ÿ¡
<>(
»q
->
issueCyşe
))

200 / 
¡©ic_ÿ¡
<>((*
m—su»d
)+1);

201 (*
m—su»d
) += 1;

202 
	}
}

204 
	gLH_Cache
::
	$C®cuÏ‹QueueL©’cy
Ğ
NVMašReque¡
 *
»q
, *
av”age
,

205 
ušt64_t
 *
m—su»d
 )

207 (*
av”age
èğ(Ğ(*av”ageè* 
¡©ic_ÿ¡
<>(*
m—su»d
))

208 + 
¡©ic_ÿ¡
<>(
»q
->
issueCyşe
)

209 - 
¡©ic_ÿ¡
<>(
»q
->
¬riv®Cyşe
))

210 / 
¡©ic_ÿ¡
<>((*
m—su»d
)+1);

211 (*
m—su»d
) += 1;

212 
	}
}

214 
boŞ
 
	gLH_Cache
::
	$IssueAtomic
Ğ
NVMašReque¡
 *
»q
 )

216 
ušt64_t
 
¿nk
, 
bªk
;

217 
NVMD©aBlock
 
dummy
;

219 
»q
->
add»ss
.
	`G‘T¿n¦©edAdd»ss
Ğ
NULL
, NULL, &
bªk
, &
¿nk
, NULL, NULL );

221 ifĞ
funùiÚ®Cache
[
¿nk
][
bªk
]->
	`S‘FuÎ
Ğ
»q
->
add»ss
 ) )

223 
NVMAdd»ss
 
viùim
;

225 ()
funùiÚ®Cache
[
¿nk
][
bªk
]->
	`Choo£Viùim
Ğ
»q
->
add»ss
, &
viùim
 );

226 ()
funùiÚ®Cache
[
¿nk
][
bªk
]->
	`Eviù
Ğ
viùim
, &
dummy
 );

229 ()
funùiÚ®Cache
[
¿nk
][
bªk
]->
	`In¡®l
Ğ
»q
->
add»ss
, 
dummy
 );

231  
Œue
;

232 
	}
}

234 
boŞ
 
	gLH_Cache
::
	$IssueFunùiÚ®
Ğ
NVMašReque¡
 *
»q
 )

236 
ušt64_t
 
¿nk
, 
bªk
;

237 
NVMD©aBlock
 
dummy
;

239 
»q
->
add»ss
.
	`G‘T¿n¦©edAdd»ss
Ğ
NULL
, NULL, &
bªk
, &
¿nk
, NULL, NULL );

241  
funùiÚ®Cache
[
¿nk
][
bªk
]->
	`P»£Á
Ğ
»q
->
add»ss
 );

242 
	}
}

244 
boŞ
 
	gLH_Cache
::
	$IssueCommªd
Ğ
NVMašReque¡
 *
»q
 )

246 ifĞ
drcQueue
->
	`size
Ğè>ğ
drcQueueSize
 )

248  
çl£
;

251 
»q
->
¬riv®Cyşe
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
();

258 
drcQueue
->
	`push_back
Ğ
»q
 );

260 ifĞ
»q
->
ty³
 =ğ
READ
 )

261 
mem_»ads
++;

263 
mem_wr™es
++;

265  
Œue
;

266 
	}
}

268 
boŞ
 
	gLH_Cache
::
	$Reque¡Com¶‘e
Ğ
NVMašReque¡
 *
»q
 )

270 
boŞ
 
rv
 = 
çl£
;

272 
»q
->
com¶‘iÚCyşe
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
();

274 ifĞ
»q
->
g
 =ğ
DRC_TAGREAD3
 )

276 
boŞ
 
miss
;

277 
ušt64_t
 
¿nk
, 
bªk
;

278 
NVMašReque¡
 *
Üigš®Reque¡
 = 
¡©ic_ÿ¡
<NVMašReque¡ *>(
»q
->
»qInfo
);

279 
ncouÁ”_t
 
queueId
 = 
	`G‘CommªdQueueId
Ğ
»q
->
add»ss
 );

281 
»q
->
add»ss
.
	`G‘T¿n¦©edAdd»ss
Ğ
NULL
, NULL, &
bªk
, &
¿nk
, NULL, NULL );

284 
miss
 = 
Œue
;

285 ifĞ
Üigš®Reque¡
->
ty³
 =ğ
WRITE


286 || 
funùiÚ®Cache
[
¿nk
][
bªk
]->
	`P»£Á
Ğ
»q
->
add»ss
 ) )

287 
miss
 = 
çl£
;

290 ifĞ!
miss
 )

292 
commªdQueues
[
queueId
].
	`push_back
Ğ
	`MakeDRCReque¡
Ğ
»q
 ) );

294 
drcH™s
++;

302 
NVMašReque¡
 *
memReq
 = 
Ãw
 
	`NVMašReque¡
( );

304 *
memReq
 = *
»q
;

305 
memReq
->
owÃr
 = 
this
;

306 
memReq
->
g
 = 
DRC_MEMREAD
;

308 
mm_»qs
++;

311 
mašMemÜy
->
	`IssueCommªd
Ğ
memReq
 );

313 
drcMiss
++;

323 
bªkLocked
[
¿nk
][
bªk
] = 
çl£
;

326 ifĞ
»q
->
g
 =ğ
DRC_MEMREAD
 )

329 
NVMašReque¡
 *
flReq
 = 
Ãw
 
	`NVMašReque¡
( );

331 *
flReq
 = *
»q
;

332 
flReq
->
owÃr
 = 
this
;

333 
flReq
->
g
 = 
DRC_FILL
;

334 
flReq
->
¬riv®Cyşe
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
();

337 ifĞ
u£Wr™eBufãr
 )

338 
flQueue
->
	`push_back
Ğ
flReq
 );

340 
drcQueue
->
	`push_back
Ğ
flReq
 );

342 
mm_»ads
++;

344 
	`C®cuÏ‹L©’cy
Ğ
»q
, &
av”ageMML©’cy
, &
m—su»dMML©’c›s
 );

345 
	`C®cuÏ‹QueueL©’cy
Ğ
»q
, &
av”ageMMQueueL©’cy
, &
m—su»dMMQueueL©’c›s
 );

348 
NVMašReque¡
 *
Üigš®Reque¡
 = 
¡©ic_ÿ¡
<NVMašReque¡ *>(
»q
->
»qInfo
);

350 
	`G‘P¬’t
Ğ)->
	`Reque¡Com¶‘e
Ğ
Üigš®Reque¡
 );

352 
Üigš®Reque¡
->
com¶‘iÚCyşe
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
();

354 
	`C®cuÏ‹L©’cy
Ğ
Üigš®Reque¡
, &
av”ageMissL©’cy
,

355 &
m—su»dMissL©’c›s
 );

357 
	`C®cuÏ‹QueueL©’cy
Ğ
Üigš®Reque¡
, &
av”ageMissQueueL©’cy
,

358 &
m—su»dMissQueueL©’c›s
 );

361 ifĞ
»q
->
g
 =ğ
DRC_FILL
 )

363 
fls
++;

366 
	`C®cuÏ‹L©’cy
Ğ
»q
, &
av”ageFlL©’cy
,

367 &
m—su»dFlL©’c›s
 );

369 
	`C®cuÏ‹QueueL©’cy
Ğ
»q
, &
av”ageFlQueueL©’cy
,

370 &
m—su»dFlQueueL©’c›s
 );

372 ifĞ
»q
->
g
 =ğ
DRC_ACCESS
 )

374 
	`C®cuÏ‹L©’cy
Ğ
»q
, &
av”ageH™L©’cy
, &
m—su»dH™L©’c›s
 );

375 
	`C®cuÏ‹QueueL©’cy
Ğ
»q
, &
av”ageH™QueueL©’cy
,

376 &
m—su»dH™QueueL©’c›s
 );

379 ifĞ
»q
->
ty³
 =ğ
REFRESH
 )

380 
	`ProûssReäeshPul£
Ğ
»q
 );

381 ifĞ
»q
->
owÃr
 =ğ
this
 )

383 
d–‘e
 
»q
;

384 
rv
 = 
Œue
;

388 
	`G‘P¬’t
Ğ)->
	`Reque¡Com¶‘e
Ğ
»q
 );

389 
rv
 = 
çl£
;

392  
rv
;

393 
	}
}

395 
boŞ
 
	gLH_Cache
::
FlQueueFuÎ
::
	$İ”©Ü
(èĞ
NVMašReque¡
 * )

397 ifĞ
memÜyCÚŒŞËr
.
u£Wr™eBufãr
 && 
d¿ššg
 =ğ
çl£


398 && 
memÜyCÚŒŞËr
.
flQueue
->
	`size
(è>ğmemÜyCÚŒŞËr.
flQueueSize
 )

400 
d¿ššg
 = 
Œue
;

402 ifĞ
memÜyCÚŒŞËr
.
flQueue
->
	`size
() == 0

403 && 
d¿ššg
 =ğ
Œue
 )

405 
d¿ššg
 = 
çl£
;

408  
d¿ššg
;

409 
	}
}

411 
boŞ
 
	gLH_Cache
::
BªkLocked
::
	$İ”©Ü
(èĞ
NVMašReque¡
 * 
»que¡
 )

413 
boŞ
 
rv
 = 
çl£
;

414 
ušt64_t
 
bªk
, 
¿nk
;

415 
»que¡
->
add»ss
.
	`G‘T¿n¦©edAdd»ss
Ğ
NULL
, NULL, &
bªk
, &
¿nk
, NULL, NULL );

417 ifĞ
memÜyCÚŒŞËr
.
bªkLocked
[
¿nk
][
bªk
] =ğ
çl£


418 && !
memÜyCÚŒŞËr
.
	`FQF
Ğ
»que¡
 ) )

419 
rv
 = 
Œue
;

421  
rv
;

422 
	}
}

424 
boŞ
 
	gLH_Cache
::
NoWr™eBufãršg
::
	$İ”©Ü
(èĞ
NVMašReque¡
 * )

426  !
memÜyCÚŒŞËr
.
u£Wr™eBufãr
;

427 
	}
}

429 
	gLH_Cache
::
	$Cyşe
Ğ
ncyşe_t
 )

431 
NVMašReque¡
 *
ÃxtReque¡
 = 
NULL
;

435 ifĞ
	`FšdSrvedReque¡
Ğ*
flQueue
, &
ÃxtReque¡
, 
FQF
 ) )

437 
rb_miss
++;

438 
¡¬v©iÚ_´ech¬ges
++;

440 ifĞ
	`FšdRowBufãrH™
Ğ*
flQueue
, &
ÃxtReque¡
, 
FQF
 ) )

442 
rb_h™s
++;

444 ifĞ
	`FšdOlde¡R—dyReque¡
Ğ*
flQueue
, &
ÃxtReque¡
, 
FQF
 ) )

446 
rb_miss
++;

448 ifĞ
	`FšdClo£dBªkReque¡
Ğ*
flQueue
, &
ÃxtReque¡
, 
FQF
 ) )

450 
rb_miss
++;

454 ifĞ
	`FšdSrvedReque¡
Ğ*
drcQueue
, &
ÃxtReque¡
, 
locks
 ) )

456 
rb_miss
++;

457 
¡¬v©iÚ_´ech¬ges
++;

459 ifĞ
	`FšdRowBufãrH™
Ğ*
drcQueue
, &
ÃxtReque¡
, 
locks
 ) )

461 
rb_h™s
++;

463 ifĞ
	`FšdOlde¡R—dyReque¡
Ğ*
drcQueue
, &
ÃxtReque¡
, 
locks
 ) )

465 
rb_miss
++;

467 ifĞ
	`FšdClo£dBªkReque¡
Ğ*
drcQueue
, &
ÃxtReque¡
, 
locks
 ) )

469 
rb_miss
++;

473 ifĞ
	`FšdSrvedReque¡
Ğ*
flQueue
, &
ÃxtReque¡
, 
NWB
 ) )

475 
rb_miss
++;

476 
¡¬v©iÚ_´ech¬ges
++;

478 ifĞ
	`FšdRowBufãrH™
Ğ*
flQueue
, &
ÃxtReque¡
, 
NWB
 ) )

480 
rb_h™s
++;

482 ifĞ
	`FšdOlde¡R—dyReque¡
Ğ*
flQueue
, &
ÃxtReque¡
, 
NWB
 ) )

484 
rb_miss
++;

486 ifĞ
	`FšdClo£dBªkReque¡
Ğ*
flQueue
, &
ÃxtReque¡
, 
NWB
 ) )

488 
rb_miss
++;

491 ifĞ
ÃxtReque¡
 !ğ
NULL
 )

493 ifĞ
ÃxtReque¡
->
g
 =ğ
DRC_FILL
 )

494 
	`IssueFlCommªds
Ğ
ÃxtReque¡
 );

496 
	`IssueDRCCommªds
Ğ
ÃxtReque¡
 );

499 
	`CyşeCommªdQueues
( );

500 
	}
}

502 
NVMašReque¡
 *
	gLH_Cache
::
	$MakeTagReque¡
Ğ
NVMašReque¡
 *
Œigg”Reque¡
, 
g
 )

504 
NVMašReque¡
 *
gReque¡
 = 
Ãw
 
	`NVMašReque¡
( );

506 
gReque¡
->
ty³
 = 
READ
;

507 
gReque¡
->
issueCyşe
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
();

508 
gReque¡
->
add»ss
 = 
Œigg”Reque¡
->address;

509 
gReque¡
->
g
 =ag;

510 
gReque¡
->
owÃr
 = 
this
;

513 
gReque¡
->
»qInfo
 = 
¡©ic_ÿ¡
<*>Ğ
Œigg”Reque¡
 );

515  
gReque¡
;

516 
	}
}

518 
NVMašReque¡
 *
	gLH_Cache
::
	$MakeDRCReque¡
Ğ
NVMašReque¡
 *
Œigg”Reque¡
)

521 
NVMašReque¡
 *
drcReque¡
 = 
¡©ic_ÿ¡
<NVMašReque¡ *>(
Œigg”Reque¡
->
»qInfo
);

523 
drcReque¡
->
g
 = 
DRC_ACCESS
;

526 
drcReque¡
->
issueCyşe
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
();

528  
drcReque¡
;

529 
	}
}

531 
NVMašReque¡
 *
	gLH_Cache
::
	$MakeTagWr™eReque¡
Ğ
NVMašReque¡
 *
Œigg”Reque¡
 )

533 
NVMašReque¡
 *
gReque¡
 = 
Ãw
 
	`NVMašReque¡
( );

535 
gReque¡
->
ty³
 = 
WRITE
;

536 
gReque¡
->
issueCyşe
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
();

537 
gReque¡
->
add»ss
 = 
Œigg”Reque¡
->address;

538 
gReque¡
->
owÃr
 = 
this
;

541 
gReque¡
->
»qInfo
 = 
¡©ic_ÿ¡
<*>Ğ
Œigg”Reque¡
 );

543  
gReque¡
;

544 
	}
}

546 
boŞ
 
	gLH_Cache
::
	$IssueDRCCommªds
Ğ
NVMašReque¡
 *
»q
 )

548 
boŞ
 
rv
 = 
çl£
;

549 
ušt64_t
 
¿nk
, 
bªk
, 
row
, 
sub¬¿y
;

550 
ncouÁ”_t
 
queueId
 = 
	`G‘CommªdQueueId
Ğ
»q
->
add»ss
 );

552 
»q
->
add»ss
.
	`G‘T¿n¦©edAdd»ss
Ğ&
row
, 
NULL
, &
bªk
, &
¿nk
, NULL, &
sub¬¿y
 );

554 ifĞ!
aùiv©eQueued
[
¿nk
][
bªk
] && 
commªdQueues
[
queueId
].
	`em±y
() )

557 
¡¬v©iÚCouÁ”
[
¿nk
][
bªk
] = 0;

558 
aùiv©eQueued
[
¿nk
][
bªk
] = 
Œue
;

559 
efãùiveRow
[
¿nk
][
bªk
][
sub¬¿y
] = 
row
;

561 
»q
->
issueCyşe
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
();

563 
commªdQueues
[
queueId
].
	`push_back
Ğ
	`MakeAùiv©eReque¡
Ğ
»q
 ) );

564 
commªdQueues
[
queueId
].
	`push_back
Ğ
	`MakeTagReque¡
Ğ
»q
, 
DRC_TAGREAD1
 ) );

565 
commªdQueues
[
queueId
].
	`push_back
Ğ
	`MakeTagReque¡
Ğ
»q
, 
DRC_TAGREAD2
 ) );

566 
commªdQueues
[
queueId
].
	`push_back
Ğ
	`MakeTagReque¡
Ğ
»q
, 
DRC_TAGREAD3
 ) );

567 
bªkLocked
[
¿nk
][
bªk
] = 
Œue
;

569 
rv
 = 
Œue
;

571 ifĞ
aùiv©eQueued
[
¿nk
][
bªk
] && 
efãùiveRow
[¿nk][bªk][
sub¬¿y
] !ğ
row
 && 
commªdQueues
[
queueId
].
	`em±y
() )

574 
¡¬v©iÚCouÁ”
[
¿nk
][
bªk
] = 0;

575 
aùiv©eQueued
[
¿nk
][
bªk
] = 
Œue
;

576 
efãùiveRow
[
¿nk
][
bªk
][
sub¬¿y
] = 
row
;

578 
»q
->
issueCyşe
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
();

580 
commªdQueues
[
queueId
].
	`push_back
Ğ
	`MakeP»ch¬geReque¡
Ğ
»q
 ) );

581 
commªdQueues
[
queueId
].
	`push_back
Ğ
	`MakeAùiv©eReque¡
Ğ
»q
 ) );

582 
commªdQueues
[
queueId
].
	`push_back
Ğ
	`MakeTagReque¡
Ğ
»q
, 
DRC_TAGREAD1
 ) );

583 
commªdQueues
[
queueId
].
	`push_back
Ğ
	`MakeTagReque¡
Ğ
»q
, 
DRC_TAGREAD2
 ) );

584 
commªdQueues
[
queueId
].
	`push_back
Ğ
	`MakeTagReque¡
Ğ
»q
, 
DRC_TAGREAD3
 ) );

585 
bªkLocked
[
¿nk
][
bªk
] = 
Œue
;

587 
rv
 = 
Œue
;

589 ifĞ
aùiv©eQueued
[
¿nk
][
bªk
] && 
efãùiveRow
[¿nk][bªk][
sub¬¿y
] =ğ
row
 )

591 
¡¬v©iÚCouÁ”
[
¿nk
][
bªk
]++;

593 
»q
->
issueCyşe
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
();

595 
commªdQueues
[
queueId
].
	`push_back
Ğ
	`MakeTagReque¡
Ğ
»q
, 
DRC_TAGREAD1
 ) );

596 
commªdQueues
[
queueId
].
	`push_back
Ğ
	`MakeTagReque¡
Ğ
»q
, 
DRC_TAGREAD2
 ) );

597 
commªdQueues
[
queueId
].
	`push_back
Ğ
	`MakeTagReque¡
Ğ
»q
, 
DRC_TAGREAD3
 ) );

598 
bªkLocked
[
¿nk
][
bªk
] = 
Œue
;

600 
rv
 = 
Œue
;

604 
rv
 = 
çl£
;

607  
rv
;

608 
	}
}

610 
boŞ
 
	gLH_Cache
::
	$IssueFlCommªds
Ğ
NVMašReque¡
 *
»q
 )

612 
boŞ
 
rv
 = 
çl£
;

613 
ušt64_t
 
¿nk
, 
bªk
, 
row
, 
sub¬¿y
;

614 
ncouÁ”_t
 
queueId
 = 
	`G‘CommªdQueueId
Ğ
»q
->
add»ss
 );

616 
»q
->
add»ss
.
	`G‘T¿n¦©edAdd»ss
Ğ&
row
, 
NULL
, &
bªk
, &
¿nk
, NULL, &
sub¬¿y
 );

618 ifĞ!
aùiv©eQueued
[
¿nk
][
bªk
] && 
commªdQueues
[
queueId
].
	`em±y
() )

621 
¡¬v©iÚCouÁ”
[
¿nk
][
bªk
] = 0;

622 
aùiv©eQueued
[
¿nk
][
bªk
] = 
Œue
;

623 
efãùiveRow
[
¿nk
][
bªk
][
sub¬¿y
] = 
row
;

625 
»q
->
issueCyşe
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
();

627 
commªdQueues
[
queueId
].
	`push_back
Ğ
	`MakeAùiv©eReque¡
Ğ
»q
 ) );

628 
commªdQueues
[
queueId
].
	`push_back
Ğ
	`MakeTagWr™eReque¡
Ğ
»q
 ) );

629 
commªdQueues
[
queueId
].
	`push_back
Ğ
»q
 );

631 
rv
 = 
Œue
;

633 ifĞ
aùiv©eQueued
[
¿nk
][
bªk
] && 
efãùiveRow
[¿nk][bªk][
sub¬¿y
] !ğ
row


634 && 
commªdQueues
[
queueId
].
	`em±y
() )

637 
¡¬v©iÚCouÁ”
[
¿nk
][
bªk
] = 0;

638 
aùiv©eQueued
[
¿nk
][
bªk
] = 
Œue
;

639 
efãùiveRow
[
¿nk
][
bªk
][
sub¬¿y
] = 
row
;

641 
»q
->
issueCyşe
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
();

643 
commªdQueues
[
queueId
].
	`push_back
Ğ
	`MakeP»ch¬geReque¡
Ğ
»q
 ) );

644 
commªdQueues
[
queueId
].
	`push_back
Ğ
	`MakeAùiv©eReque¡
Ğ
»q
 ) );

645 
commªdQueues
[
queueId
].
	`push_back
Ğ
	`MakeTagWr™eReque¡
Ğ
»q
 ) );

646 
commªdQueues
[
queueId
].
	`push_back
Ğ
»q
 );

648 
rv
 = 
Œue
;

650 ifĞ
aùiv©eQueued
[
¿nk
][
bªk
] && 
efãùiveRow
[¿nk][bªk][
sub¬¿y
] =ğ
row
 )

652 
¡¬v©iÚCouÁ”
[
¿nk
][
bªk
]++;

654 
»q
->
issueCyşe
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
();

656 
commªdQueues
[
queueId
].
	`push_back
Ğ
	`MakeTagWr™eReque¡
Ğ
»q
 ) );

657 
commªdQueues
[
queueId
].
	`push_back
Ğ
»q
 );

659 
rv
 = 
Œue
;

663 
rv
 = 
çl£
;

666  
rv
;

667 
	}
}

669 
	gLH_Cache
::
	$C®cuÏ‹Sts
( )

671 
MemÜyCÚŒŞËr
::
	`C®cuÏ‹Sts
( );

672 
	}
}

	@MemControl/LH-Cache/LH-Cache.h

34 #iâdeà
__MEMCONTROL_BASICDRC_H__


35 
	#__MEMCONTROL_BASICDRC_H__


	)

37 
	~"Uts/Caches/CacheBªk.h
"

38 
	~"MemCÚŒŞ/DRAMCache/Ab¡¿ùDRAMCache.h
"

40 
Çme¥aû
 
	gNVM
 {

42 
	#DRC_TAGREAD1
 
gG’
->
	`C»©eTag
("DRC_TAGREAD1")

	)

43 
	#DRC_TAGREAD2
 
gG’
->
	`C»©eTag
("DRC_TAGREAD2")

	)

44 
	#DRC_TAGREAD3
 
gG’
->
	`C»©eTag
("DRC_TAGREAD3")

	)

45 
	#DRC_MEMREAD
 
gG’
->
	`C»©eTag
("DRC_MEMREAD")

	)

46 
	#DRC_FILL
 
gG’
->
	`C»©eTag
("DRC_FILL")

	)

47 
	#DRC_ACCESS
 
gG’
->
	`C»©eTag
("DRC_ACCESS")

	)

49 
şass
 
	gNVMaš
;

52 şas 
	cLH_Cache
 : 
public
 
Ab¡¿ùDRAMCache


54 
public
:

55 
LH_Cache
( );

56 
	gvœtu®
 ~
LH_Cache
( );

58 
S‘CÚfig
Ğ
CÚfig
 *
cÚf
, 
boŞ
 
ü—‹Chd»n
 = 
Œue
 );

59 
S‘MašMemÜy
Ğ
NVMaš
 *
mm
 );

61 
boŞ
 
IssueAtomic
Ğ
NVMašReque¡
 *
»q
 );

62 
boŞ
 
IssueCommªd
Ğ
NVMašReque¡
 *
»q
 );

63 
boŞ
 
IssueFunùiÚ®
Ğ
NVMašReque¡
 *
»q
 );

64 
boŞ
 
Reque¡Com¶‘e
Ğ
NVMašReque¡
 *
»q
 );

66 
Cyşe
Ğ
ncyşe_t
 );

68 
Regi¡”Sts
( );

69 
C®cuÏ‹Sts
( );

71 
	g´Ùeùed
:

72 
NVMašReque¡
 *
MakeTagReque¡
ĞNVMašReque¡ *
Œigg”Reque¡
, 
g
 );

73 
NVMašReque¡
 *
MakeTagWr™eReque¡
ĞNVMašReque¡ *
Œigg”Reque¡
 );

74 
NVMašReque¡
 *
MakeDRCReque¡
ĞNVMašReque¡ *
Œigg”Reqe¡
 );

77 şas 
	cBªkLocked
 : 
public
 
SchedulšgP»diÿ‹


79 
ä›nd
 
şass
 
LH_Cache
;

81 
	g´iv©e
:

82 
LH_Cache
 &
memÜyCÚŒŞËr
;

84 
	gpublic
:

85 
BªkLocked
Ğ
LH_Cache
 &
_memÜyCÚŒŞËr
 )

86 : 
memÜyCÚŒŞËr
(
_memÜyCÚŒŞËr
) { }

88 
boŞ
 
İ”©Ü
(èĞ
NVMašReque¡
* );

92 şas 
	cFlQueueFuÎ
 : 
public
 
SchedulšgP»diÿ‹


94 
ä›nd
 
şass
 
LH_Cache
;

96 
	g´iv©e
:

97 
LH_Cache
 &
memÜyCÚŒŞËr
;

98 
boŞ
 
	gd¿ššg
;

100 
	gpublic
:

101 
FlQueueFuÎ
Ğ
LH_Cache
 &
_memÜyCÚŒŞËr
 )

102 : 
memÜyCÚŒŞËr
(
_memÜyCÚŒŞËr
), 
d¿ššg
(
çl£
) { }

104 
boŞ
 
İ”©Ü
(èĞ
	gNVMašReque¡
* );

108 şas 
	cNoWr™eBufãršg
 : 
public
 
SchedulšgP»diÿ‹


110 
ä›nd
 
şass
 
LH_Cache
;

112 
	g´iv©e
:

113 
LH_Cache
 &
memÜyCÚŒŞËr
;

115 
	gpublic
:

116 
NoWr™eBufãršg
Ğ
LH_Cache
 &
_memÜyCÚŒŞËr
 )

117 : 
memÜyCÚŒŞËr
(
_memÜyCÚŒŞËr
) { }

119 
boŞ
 
İ”©Ü
(èĞ
NVMašReque¡
* );

122 
boŞ
 
IssueDRCCommªds
Ğ
NVMašReque¡
 *
»q
 );

123 
boŞ
 
IssueFlCommªds
Ğ
NVMašReque¡
 *
»q
 );

125 
C®cuÏ‹L©’cy
Ğ
NVMašReque¡
 *
»q
, *
av”age
,

126 
ušt64_t
 *
m—su»d
 );

127 
C®cuÏ‹QueueL©’cy
Ğ
NVMašReque¡
 *
»q
, *
av”age
,

128 
ušt64_t
 *
m—su»d
 );

130 
NVMT¿n§ùiÚQueue
 *
	gdrcQueue
;

131 
NVMT¿n§ùiÚQueue
 *
	gflQueue
;

133 
	gav”ageH™L©’cy
, 
	gav”ageH™QueueL©’cy
;

134 
	gav”ageMissL©’cy
, 
	gav”ageMissQueueL©’cy
;

135 
	gav”ageMML©’cy
, 
	gav”ageMMQueueL©’cy
;

136 
	gav”ageFlL©’cy
, 
	gav”ageFlQueueL©’cy
;

138 
ušt64_t
 
	gm—su»dH™L©’c›s
, 
	gm—su»dH™QueueL©’c›s
;

139 
ušt64_t
 
	gm—su»dMissL©’c›s
, 
	gm—su»dMissQueueL©’c›s
;

140 
ušt64_t
 
	gm—su»dMML©’c›s
, 
	gm—su»dMMQueueL©’c›s
;

141 
ušt64_t
 
	gm—su»dFlL©’c›s
, 
	gm—su»dFlQueueL©’c›s
;

143 
ušt64_t
 
	gmem_»ads
, 
	gmem_wr™es
;

144 
ušt64_t
 
	gmm_»qs
, 
	gmm_»ads
, 
	gfls
;

145 
ušt64_t
 
	grb_h™s
, 
	grb_miss
;

146 
ušt64_t
 
	gdrcH™s
, 
	gdrcMiss
;

147 
ušt64_t
 
	g¡¬v©iÚ_´ech¬ges
;

148 
ušt64_t
 
	gpsIÁ”v®
;

150 
ušt64_t
 
	gflQueueSize
, 
	gdrcQueueSize
;

152 
boŞ
 **
	gbªkLocked
;

153 
BªkLocked
 
	glocks
;

154 
FlQueueFuÎ
 
	gFQF
;

155 
NoWr™eBufãršg
 
	gNWB
;

156 
boŞ
 
	gu£Wr™eBufãr
;

158 
NVMaš
 *
	gmašMemÜy
;

160 
CacheBªk
 ***
	gfunùiÚ®Cache
;

	@MemControl/LO-Cache/LO-Cache.cpp

35 
	~"MemCÚŒŞ/LO-Cache/LO-Cache.h
"

36 
	~"šşude/NVMH–³rs.h
"

37 
	~"NVM/nvmaš.h
"

38 
	~"¤c/Ev’tQueue.h
"

40 
	~<io¡»am
>

41 
	~<s¡»am
>

42 
	~<c¡ršg
>

43 
	~<ÿs£¹
>

46 
usšg
 
Çme¥aû
 
	gNVM
;

49 
	gLO_Cache
::
	$LO_Cache
( )

53 
¡d
::
cout
 << "C»©ed‡ L©’cy O±imized DRAM Cache!" << std::
’dl
;

55 
mašMemÜy
 = 
NULL
;

56 
mašMemÜyCÚfig
 = 
NULL
;

57 
funùiÚ®Cache
 = 
NULL
;

59 
drc_h™s
 = 0;

60 
drc_miss
 = 0;

61 
drc_fls
 = 0;

62 
drc_eviùs
 = 0;

63 
»ad_h™
 = 0;

64 
wr™e_h™
 = 0;

65 
rb_h™s
 = 0;

66 
rb_miss
 = 0;

67 
¡¬v©iÚ_´ech¬ges
 = 0;

69 
³rãùFls
 = 
çl£
;

70 
max_addr
 = 0;

72 
psIÁ”v®
 = 0;

80 
	`In™Queues
( 1 );

82 
drcQueue
 = &(
Œª§ùiÚQueues
[0]);

83 
	}
}

85 
	gLO_Cache
::~
	$LO_Cache
( )

88 
	}
}

90 
LO_Cache
::
	$S‘CÚfig
Ğ
CÚfig
 *
cÚf
, 
boŞ
 
ü—‹Chd»n
 )

92 
ncouÁ”_t
 
rows
;

95 
drcQueueSize
 = 32;

96 
¡¬v©iÚTh»shŞd
 = 4;

98 ifĞ
cÚf
->
	`KeyExi¡s
( "StarvationThreshold" ) )

99 
¡¬v©iÚTh»shŞd
 = 
¡©ic_ÿ¡
<
ncouÁ”_t
>Ğ
cÚf
->
	`G‘V®ue
( "StarvationThreshold" ) );

100 ifĞ
cÚf
->
	`KeyExi¡s
( "DRCQueueSize" ) )

101 
drcQueueSize
 = 
¡©ic_ÿ¡
<
ncouÁ”_t
>Ğ
cÚf
->
	`G‘V®ue
( "DRCQueueSize" ) );

103 ifĞ
cÚf
->
	`KeyExi¡s
Ğ"P”ãùFls" ) && cÚf->
	`G‘SŒšg
( "PerfectFills" ) == "true" )

104 
³rãùFls
 = 
Œue
;

107 
¿nks
 = 
¡©ic_ÿ¡
<
ncouÁ”_t
>Ğ
cÚf
->
	`G‘V®ue
( "RANKS" ) );

108 
bªks
 = 
¡©ic_ÿ¡
<
ncouÁ”_t
>Ğ
cÚf
->
	`G‘V®ue
( "BANKS" ) );

109 
rows
 = 
¡©ic_ÿ¡
<
ncouÁ”_t
>Ğ
cÚf
->
	`G‘V®ue
( "ROWS" ) );

112 
funùiÚ®Cache
 = 
Ãw
 
CacheBªk
**[
¿nks
];

113  
ncouÁ”_t
 
i
 = 0; i < 
¿nks
; i++ )

115 
funùiÚ®Cache
[
i
] = 
Ãw
 
CacheBªk
*[
bªks
];

117  
ncouÁ”_t
 
j
 = 0; j < 
bªks
; j++ )

125 
funùiÚ®Cache
[
i
][
j
] = 
Ãw
 
	`CacheBªk
Ğ
rows
 * 28, 1, 64 );

131 
MemÜyCÚŒŞËr
::
	`S‘CÚfig
Ğ
cÚf
, 
ü—‹Chd»n
 );

133 
	`S‘DebugName
Ğ"LO-Cache", 
cÚf
 );

134 
	}
}

136 
	gLO_Cache
::
	$Regi¡”Sts
( )

138 
	`AddSt
(
drc_h™s
);

139 
	`AddSt
(
drc_miss
);

140 
	`AddSt
(
drc_h™¿‹
);

141 
	`AddSt
(
drc_fls
);

142 
	`AddSt
(
drc_eviùs
);

143 
	`AddSt
(
rb_h™s
);

144 
	`AddSt
(
rb_miss
);

145 
	`AddSt
(
¡¬v©iÚ_´ech¬ges
);

146 
	`AddSt
(
»ad_h™
);

147 
	`AddSt
(
wr™e_h™
);

148 
MemÜyCÚŒŞËr
::
	`Regi¡”Sts
( );

149 
	}
}

151 
	gLO_Cache
::
	$S‘MašMemÜy
Ğ
NVMaš
 *
mm
 )

153 
mašMemÜy
 = 
mm
;

154 
	}
}

156 
boŞ
 
	gLO_Cache
::
	$IssueAtomic
Ğ
NVMašReque¡
 *
»q
 )

158 
ušt64_t
 
row
, 
bªk
, 
¿nk
, 
sub¬¿y
;

160 
»q
->
add»ss
.
	`G‘T¿n¦©edAdd»ss
Ğ&
row
, 
NULL
, &
bªk
, &
¿nk
, NULL, &
sub¬¿y
 );

162 ifĞ
»q
->
add»ss
.
	`G‘PhysiÿlAdd»ss
(è> 
max_addr
 ) max_addr =„eq->address.GetPhysicalAddress( );

167 ifĞ
»q
->
ty³
 =ğ
WRITE
 ||„eq->ty³ =ğ
WRITE_PRECHARGE
 || 
funùiÚ®Cache
[
¿nk
][
bªk
]->
	`P»£Á
Ğ»q->
add»ss
 ) )

169 
drc_h™s
++;

177 
NVMD©aBlock
 
dummy
;

179 ifĞ
funùiÚ®Cache
[
¿nk
][
bªk
]->
	`S‘FuÎ
Ğ
»q
->
add»ss
 ) )

181 
NVMAdd»ss
 
viùim
;

183 ()
funùiÚ®Cache
[
¿nk
][
bªk
]->
	`Choo£Viùim
Ğ
»q
->
add»ss
, &
viùim
 );

184 ()
funùiÚ®Cache
[
¿nk
][
bªk
]->
	`Eviù
Ğ
viùim
, &
dummy
 );

186 
drc_eviùs
++;

189 
drc_miss
++;

190 
drc_fls
++;

192 ()
funùiÚ®Cache
[
¿nk
][
bªk
]->
	`In¡®l
Ğ
»q
->
add»ss
, 
dummy
 );

203  
Œue
;

204 
	}
}

206 
boŞ
 
	gLO_Cache
::
	$IssueFunùiÚ®
Ğ
NVMašReque¡
 *
»q
 )

208 
ušt64_t
 
bªk
, 
¿nk
;

210 
»q
->
add»ss
.
	`G‘T¿n¦©edAdd»ss
Ğ
NULL
, NULL, &
bªk
, &
¿nk
, NULL, NULL );

213 ifĞ
»q
->
ty³
 =ğ
WRITE
 ||„eq->ty³ =ğ
WRITE_PRECHARGE
 )

214  
Œue
;

217  
funùiÚ®Cache
[
¿nk
][
bªk
]->
	`P»£Á
Ğ
»q
->
add»ss
 );

218 
	}
}

220 
boŞ
 
	gLO_Cache
::
	$IssueCommªd
Ğ
NVMašReque¡
 *
»q
 )

222 
boŞ
 
rv
 = 
Œue
;

224 ifĞ
»q
->
add»ss
.
	`G‘PhysiÿlAdd»ss
(è> 
max_addr
 ) max_addr =„eq->address.GetPhysicalAddress( );

226 
¡d
::
cout
<<"»que¡ed‡dd»s is: 0x"<<¡d::
hex
<<
»q
->
add»ss
.
	`G‘PhysiÿlAdd»ss
()<<¡d::
’dl
;

228 ifĞ
³rãùFls
 && (
»q
->
ty³
 =ğ
WRITE
 ||„eq->ty³ =ğ
WRITE_PRECHARGE
) )

230 
ušt64_t
 
¿nk
, 
bªk
;

231 
NVMD©aBlock
 
dummy
;

233 
»q
->
add»ss
.
	`G‘T¿n¦©edAdd»ss
Ğ
NULL
, NULL, &
bªk
, &
¿nk
, NULL, NULL );

235 ifĞ
funùiÚ®Cache
[
¿nk
][
bªk
]->
	`S‘FuÎ
Ğ
»q
->
add»ss
 ) )

237 
NVMAdd»ss
 
viùim
;

239 ()
funùiÚ®Cache
[
¿nk
][
bªk
]->
	`Choo£Viùim
Ğ
»q
->
add»ss
, &
viùim
 );

240 ()
funùiÚ®Cache
[
¿nk
][
bªk
]->
	`Eviù
Ğ
viùim
, &
dummy
 );

242 
drc_eviùs
++;

245 ()
funùiÚ®Cache
[
¿nk
][
bªk
]->
	`In¡®l
Ğ
»q
->
add»ss
, 
dummy
 );

247 
drc_fls
++;

249 
	`G‘Ev’tQueue
()->
	`In£¹Ev’t
Ğ
Ev’tRe¥Ú£
, 
this
, 
»q
,

250 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
()+1 );

256 
	`Enqueue
Ğ0, 
»q
 );

261  
rv
;

262 
	}
}

264 
boŞ
 
	gLO_Cache
::
	$Reque¡Com¶‘e
Ğ
NVMašReque¡
 *
»q
 )

266 
boŞ
 
rv
 = 
çl£
;

268 ifĞ
»q
->
ty³
 =ğ
REFRESH
 )

270 
	`ProûssReäeshPul£
Ğ
»q
 );

272 ifĞ
»q
->
owÃr
 =ğ
this
 )

274 ifĞ
»q
->
g
 =ğ
DRC_FILL
 )

277 
ušt64_t
 
¿nk
, 
bªk
;

278 
NVMD©aBlock
 
dummy
;

280 
»q
->
add»ss
.
	`G‘T¿n¦©edAdd»ss
Ğ
NULL
, NULL, &
bªk
, &
¿nk
, NULL, NULL );

282 ifĞ
funùiÚ®Cache
[
¿nk
][
bªk
]->
	`S‘FuÎ
Ğ
»q
->
add»ss
 ) )

284 
NVMAdd»ss
 
viùim
;

286 ()
funùiÚ®Cache
[
¿nk
][
bªk
]->
	`Choo£Viùim
Ğ
»q
->
add»ss
, &
viùim
 );

287 ()
funùiÚ®Cache
[
¿nk
][
bªk
]->
	`Eviù
Ğ
viùim
, &
dummy
 );

289 
drc_eviùs
++;

292 ()
funùiÚ®Cache
[
¿nk
][
bªk
]->
	`In¡®l
Ğ
»q
->
add»ss
, 
dummy
 );

294 
drc_fls
++;

301 ifĞ
»q
->
g
 =ğ
DRC_MEMREAD
 )

304 
NVMašReque¡
 *
flReq
 = 
Ãw
 
	`NVMašReque¡
( );

306 *
flReq
 = *
»q
;

307 
flReq
->
owÃr
 = 
this
;

308 
flReq
->
g
 = 
DRC_FILL
;

309 
flReq
->
ty³
 = 
WRITE
;

310 
flReq
->
¬riv®Cyşe
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
();

312 
this
->
	`IssueCommªd
Ğ
flReq
 );

315 
	`as£¹
Ğ
out¡ªdšgFls
.
	`couÁ
Ğ
»q
 ) > 0 );

316 
NVMašReque¡
 *
Üigš®Req
 = 
out¡ªdšgFls
[
»q
];

317 
out¡ªdšgFls
.
	`”a£
Ğ
»q
 );

319 
	`G‘P¬’t
Ğ)->
	`Reque¡Com¶‘e
Ğ
Üigš®Req
 );

320 
rv
 = 
çl£
;

330 
d–‘e
 
»q
;

331 
rv
 = 
Œue
;

338 
ušt64_t
 
¿nk
, 
bªk
;

340 
»q
->
add»ss
.
	`G‘T¿n¦©edAdd»ss
Ğ
NULL
, NULL, &
bªk
, &
¿nk
, NULL, NULL );

342 ifĞ
»q
->
ty³
 =ğ
WRITE
 ||„eq->ty³ =ğ
WRITE_PRECHARGE
 )

347 
NVMD©aBlock
 
dummy
;

349 ifĞ
funùiÚ®Cache
[
¿nk
][
bªk
]->
	`S‘FuÎ
Ğ
»q
->
add»ss
 ) )

351 
NVMAdd»ss
 
viùim
;

353 ()
funùiÚ®Cache
[
¿nk
][
bªk
]->
	`Choo£Viùim
Ğ
»q
->
add»ss
, &
viùim
 );

354 ()
funùiÚ®Cache
[
¿nk
][
bªk
]->
	`Eviù
Ğ
viùim
, &
dummy
 );

356 
drc_eviùs
++;

359 
drc_h™s
++;

360 
wr™e_h™
++;

361 ()
funùiÚ®Cache
[
¿nk
][
bªk
]->
	`In¡®l
Ğ
»q
->
add»ss
, 
dummy
 );

364 
	`G‘P¬’t
Ğ)->
	`Reque¡Com¶‘e
Ğ
»q
 );

365 
rv
 = 
çl£
;

369 ifĞ
»q
->
ty³
 =ğ
READ
 ||„eq->ty³ =ğ
READ_PRECHARGE
 )

371 
ušt64_t
 
¿nk
, 
bªk
;

373 
»q
->
add»ss
.
	`G‘T¿n¦©edAdd»ss
Ğ
NULL
, NULL, &
bªk
, &
¿nk
, NULL, NULL );

376 
boŞ
 
h™
 = 
funùiÚ®Cache
[
¿nk
][
bªk
]->
	`P»£Á
Ğ
»q
->
add»ss
 );

379 ifĞ!
h™
 )

382 
NVMašReque¡
 *
memReq
 = 
Ãw
 
	`NVMašReque¡
( );

384 *
memReq
 = *
»q
;

385 
memReq
->
owÃr
 = 
this
;

386 
memReq
->
g
 = 
DRC_MEMREAD
;

387 
memReq
->
ty³
 = 
READ
;

388 
memReq
->
¬riv®Cyşe
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
();

390 
	`as£¹
Ğ
out¡ªdšgFls
.
	`couÁ
Ğ
»q
 ) == 0 );

391 
out¡ªdšgFls
.
	`š£¹
Ğ
¡d
::
·œ
<
NVMašReque¡
*, NVMašReque¡*>Ğ
memReq
, 
»q
 ) );

393 
mašMemÜy
->
	`IssueCommªd
Ğ
memReq
 );

395 
drc_miss
++;

402 
	`G‘P¬’t
Ğ)->
	`Reque¡Com¶‘e
Ğ
»q
 );

403 
rv
 = 
çl£
;

404 
»ad_h™
++;

405 
drc_h™s
++;

424  
rv
;

425 
	}
}

427 
	gLO_Cache
::
	$Cyşe
Ğ
ncyşe_t
 
¡•s
 )

429 
NVMašReque¡
 *
ÃxtReque¡
 = 
NULL
;

432 ifĞ
	`FšdSrvedReque¡
Ğ*
drcQueue
, &
ÃxtReque¡
 ) )

434 
rb_miss
++;

435 
¡¬v©iÚ_´ech¬ges
++;

438 ifĞ
	`FšdRowBufãrH™
Ğ*
drcQueue
, &
ÃxtReque¡
) )

440 
rb_h™s
++;

443 ifĞ
	`FšdOlde¡R—dyReque¡
Ğ*
drcQueue
, &
ÃxtReque¡
 ) )

445 
rb_miss
++;

448 ifĞ
	`FšdClo£dBªkReque¡
Ğ*
drcQueue
, &
ÃxtReque¡
 ) )

450 
rb_miss
++;

454 
ÃxtReque¡
 = 
NULL
;

458 ifĞ
ÃxtReque¡
 !ğ
NULL
 )

462 
	`IssueMemÜyCommªds
Ğ
ÃxtReque¡
 );

466 
	`CyşeCommªdQueues
( );

468 
MemÜyCÚŒŞËr
::
	`Cyşe
Ğ
¡•s
 );

469 
	}
}

471 
	gLO_Cache
::
	$C®cuÏ‹Sts
( )

473 
drc_h™¿‹
 = 0.0;

474 ifĞ
drc_h™s
+
drc_miss
 > 0 )

475 
drc_h™¿‹
 = 
¡©ic_ÿ¡
<>(
drc_h™s
è/ stic_ÿ¡<>(
drc_miss
+drc_hits);

477 
MemÜyCÚŒŞËr
::
	`C®cuÏ‹Sts
( );

478 
	}
}

480 
	gLO_Cache
::
C»©eCheckpošt
Ğ
¡d
::
¡ršg
 
dœ
 )

483  
ncouÁ”_t
 
¿nkIdx
 = 0; 
	g¿nkIdx
 < 
	g¿nks
;„ankIdx++ )

485  
ncouÁ”_t
 
	gbªkIdx
 = 0; bªkIdx < 
	gbªks
; bankIdx++ )

487 
	g¡d
::
¡ršg¡»am
 
ıt_fe
;

488 
	gıt_fe
.
¡r
("");

489 
	gıt_fe
 << 
	gdœ
 << "/" << 
	g¡©Name
 << "_r";

490 
	gıt_fe
 << 
	g¿nkIdx
 << "_b" << 
	gbªkIdx
;

492 
	g¡d
::
of¡»am
 
ıt_hªdË
;

494 
	gıt_hªdË
.
İ’
Ğ
ıt_fe
.
¡r
().
c_¡r
(), 
¡d
::
of¡»am
::
out
 | std::of¡»am::
Œunc
 | std::of¡»am::
bš¬y
 );

496 ifĞ!
	gıt_hªdË
.
is_İ’
( ) )

498 
	g¡d
::
cout
 << "LO_Cache: W¬nšg: Could‚Ù o³Àcheckpošˆfe: " << 
ıt_fe
 << "!" << 
¡d
::
’dl
;

503  
ušt64_t
 
	g£t
 = 0; s‘ < 
	gfunùiÚ®Cache
[
¿nkIdx
][
bªkIdx
]->
	gnumS‘s
; set++ )

505 
	gıt_hªdË
.
wr™e
Ğ(cÚ¡ *)(
funùiÚ®Cache
[
¿nkIdx
][
bªkIdx
]->
ÿcheEÁry
[
£t
]),

506 (
CacheEÁry
)*
funùiÚ®Cache
[
¿nkIdx
][
bªkIdx
]->
numAssoc
 );

509 
	gıt_hªdË
.
şo£
( );

514 
	g¡d
::
¡ršg
 
ıt_šfo
 = 
ıt_fe
.
¡r
() + ".json";

516 
	gıt_hªdË
.
İ’
Ğ
ıt_šfo
.
c_¡r
(), 
¡d
::
of¡»am
::
out
 | std::of¡»am::
Œunc
 | std::of¡»am::
bš¬y
 );

518 ifĞ!
	gıt_hªdË
.
is_İ’
() )

520 
	g¡d
::
cout
 << "LO_Cache: W¬nšg: Could‚Ù o³ÀcheckpošˆšfØfe: " << 
ıt_šfo
 << "!" << 
¡d
::
’dl
;

524 
	g¡d
::
¡ršg
 
ıt_šfo_¡r
 = "{\n\t\"Version\": 1\n}";

525 
	gıt_hªdË
.
wr™e
Ğ
ıt_šfo_¡r
.
c_¡r
(), c±_šfo_¡r.
Ëngth
() );

527 
	gıt_hªdË
.
şo£
();

532 
	gNVMObjeù
::
C»©eCheckpošt
Ğ
dœ
 );

535 
	gLO_Cache
::
Re¡ÜeCheckpošt
Ğ
¡d
::
¡ršg
 
dœ
 )

537  
ncouÁ”_t
 
¿nkIdx
 = 0; 
	g¿nkIdx
 < 
	g¿nks
;„ankIdx++ )

539  
ncouÁ”_t
 
	gbªkIdx
 = 0; bªkIdx < 
	gbªks
; bankIdx++ )

541 
	g¡d
::
¡ršg¡»am
 
ıt_fe
;

542 
	gıt_fe
.
¡r
("");

543 
	gıt_fe
 << 
	gdœ
 << "/" << 
	g¡©Name
 << "_r";

544 
	gıt_fe
 << 
	g¿nkIdx
 << "_b" << 
	gbªkIdx
;

546 
	g¡d
::
if¡»am
 
ıt_hªdË
;

548 
	gıt_hªdË
.
İ’
Ğ
ıt_fe
.
¡r
().
c_¡r
(), 
¡d
::
if¡»am
::
©e
 | std::if¡»am::
bš¬y
 );

550 ifĞ!
	gıt_hªdË
.
is_İ’
( ) )

552 
	g¡d
::
cout
 << "LO_Cache: W¬nšg: Could‚Ù o³Àcheckpošˆfe: " << 
ıt_fe
 << "!" << 
¡d
::
’dl
;

556 
	g¡d
::
¡»ampos
 
ex³ùedSize
 = (
CacheEÁry
)*
funùiÚ®Cache
[
¿nkIdx
][
bªkIdx
]->
numS‘s
*funùiÚ®Cache[¿nkIdx][bªkIdx]->
numAssoc
;

557 ifĞ
	gıt_hªdË
.
‹Îg
Ğè!ğ
ex³ùedSize
 )

559 
¡d
::
cout
 << "LO_Cache: W¬nšg: Ex³ùed checkpošˆsizdifãr äom DRAM cachcÚfigu¿tiÚ. Skpšg„e¡Üe." << std::
’dl
;

563 
	gıt_hªdË
.
şo£
( );

565 
	gıt_hªdË
.
İ’
Ğ
ıt_fe
.
¡r
().
c_¡r
(), 
¡d
::
if¡»am
::
š
 | std::if¡»am::
bš¬y
 );

568  
ušt64_t
 
	g£t
 = 0; s‘ < 
	gfunùiÚ®Cache
[
¿nkIdx
][
bªkIdx
]->
	gnumS‘s
; set++ )

570 
	gıt_hªdË
.
»ad
Ğ(*)(
funùiÚ®Cache
[
¿nkIdx
][
bªkIdx
]->
ÿcheEÁry
[
£t
]),

571 (
CacheEÁry
)*
funùiÚ®Cache
[
¿nkIdx
][
bªkIdx
]->
numAssoc
 );

574 
	gıt_hªdË
.
şo£
( );

576 
	g¡d
::
cout
 << "LO_Cache: Checkpošˆ»ad " << ((
CacheEÁry
)*
funùiÚ®Cache
[
¿nkIdx
][
bªkIdx
]->
numAssoc
*funùiÚ®Cache[¿nkIdx][bªkIdx]->
numS‘s
è<< " by‹s." << 
¡d
::
’dl
;

582 
	gNVMObjeù
::
Re¡ÜeCheckpošt
Ğ
dœ
 );

	@MemControl/LO-Cache/LO-Cache.h

35 #iâdeà
__MEMCONTROL_LOCACHE_H__


36 
	#__MEMCONTROL_LOCACHE_H__


	)

39 
	~"Uts/Caches/CacheBªk.h
"

40 
	~"MemCÚŒŞ/DRAMCache/Ab¡¿ùDRAMCache.h
"

43 
	~<m­
>

46 
Çme¥aû
 
	gNVM
 {

49 
	#DRC_MEMREAD
 
gG’
->
	`C»©eTag
("DRC_MEMREAD")

	)

50 
	#DRC_FILL
 
gG’
->
	`C»©eTag
("DRC_FILL")

	)

53 
şass
 
	gNVMaš
;

56 şas 
	cLO_Cache
 : 
public
 
Ab¡¿ùDRAMCache


58 
public
:

59 
LO_Cache
( );

60 
	gvœtu®
 ~
LO_Cache
( );

62 
S‘CÚfig
Ğ
CÚfig
 *
cÚf
, 
boŞ
 
ü—‹Chd»n
 = 
Œue
 );

63 
S‘MašMemÜy
Ğ
NVMaš
 *
mm
 );

65 
boŞ
 
IssueAtomic
Ğ
NVMašReque¡
 *
»q
 );

66 
boŞ
 
IssueCommªd
Ğ
NVMašReque¡
 *
»q
 );

67 
boŞ
 
IssueFunùiÚ®
Ğ
NVMašReque¡
 *
»q
 );

68 
boŞ
 
Reque¡Com¶‘e
Ğ
NVMašReque¡
 *
»q
 );

70 
Cyşe
Ğ
ncyşe_t
 );

72 
Regi¡”Sts
( );

73 
C®cuÏ‹Sts
( );

75 
C»©eCheckpošt
Ğ
¡d
::
¡ršg
 
dœ
 );

76 
Re¡ÜeCheckpošt
Ğ
¡d
::
¡ršg
 
dœ
 );

78 
	g´iv©e
:

79 
NVMT¿n§ùiÚQueue
 *
drcQueue
;

80 
NVMaš
 *
	gmašMemÜy
;

81 
CÚfig
 *
	gmašMemÜyCÚfig
;

82 
CacheBªk
 ***
	gfunùiÚ®Cache
;

84 
ncouÁ”_t
 
	g¡¬v©iÚTh»shŞd
;

85 
ncouÁ”_t
 
	gdrcQueueSize
;

86 
ncouÁ”_t
 
	g¿nks
, 
	gbªks
;

88 
ncouÁ”_t
 
	gdrc_h™s
, 
	gdrc_miss
;

89 
ncouÁ”_t
 
	gdrc_eviùs
, 
	gdrc_fls
;

90 
ncouÁ”_t
 
	grb_h™s
, 
	grb_miss
,
	g»ad_h™
,
	gwr™e_h™
;

91 
ncouÁ”_t
 
	g¡¬v©iÚ_´ech¬ges
;

93 
boŞ
 
	g³rãùFls
;

94 
ušt64_t
 
	gmax_addr
;

95 
	gdrc_h™¿‹
;

97 
	g¡d
::
m­
<
NVMašReque¡
 *, 
	gNVMašReque¡
 *> 
	gout¡ªdšgFls
;

	@MemControl/MemoryControllerFactory.cpp

34 
	~"MemCÚŒŞ/MemÜyCÚŒŞËrFaùÜy.h
"

35 
	~"MemCÚŒŞ/FCFS/FCFS.h
"

36 
	~"MemCÚŒŞ/FRFCFS/FRFCFS.h
"

37 
	~"MemCÚŒŞ/FRFCFS-WQF/FRFCFS-WQF.h
"

38 
	~"MemCÚŒŞ/P”ãùMemÜy/P”ãùMemÜy.h
"

39 
	~"MemCÚŒŞ/DRAMCache/DRAMCache.h
"

40 
	~"MemCÚŒŞ/LH-Cache/LH-Cache.h
"

41 
	~"MemCÚŒŞ/LO-Cache/LO-Cache.h
"

42 
	~"MemCÚŒŞ/P»diùÜDRC/P»diùÜDRC.h
"

44 
	~"MemCÚŒŞ/RBLA-Dyn/RBLA_DRAMCache.h
"

46 
	~<io¡»am
>

48 
usšg
 
Çme¥aû
 
	gNVM
;

50 
MemÜyCÚŒŞËr
 *
	gMemÜyCÚŒŞËrFaùÜy
::
C»©eNewCÚŒŞËr
Ğ
¡d
::
¡ršg
 
cÚŒŞËr
 )

52 
MemÜyCÚŒŞËr
 *
memÜyCÚŒŞËr
 = 
NULL
;

54 ifĞ
	gcÚŒŞËr
 == "" )

55 
¡d
::
cout
 << "NVMaš: MEM_CTL i nÙ s‘ iÀcÚfigu¿tiÚ fe!" << std::
’dl
;

57 ifĞ
	gcÚŒŞËr
 == "FCFS" )

58 
memÜyCÚŒŞËr
 = 
Ãw
 
FCFS
( );

59 ifĞ
	gcÚŒŞËr
 == "FRFCFS" )

60 
memÜyCÚŒŞËr
 = 
Ãw
 
FRFCFS
( );

61 ifĞ
	gcÚŒŞËr
 =ğ"FRFCFS-WQF" || 
cÚŒŞËr
 == "FRFCFS_WQF" )

62 
memÜyCÚŒŞËr
 = 
Ãw
 
FRFCFS_WQF
( );

63 ifĞ
	gcÚŒŞËr
 == "PerfectMemory" )

64 
memÜyCÚŒŞËr
 = 
Ãw
 
P”ãùMemÜy
( );

65 ifĞ
	gcÚŒŞËr
 == "DRC" )

66 
memÜyCÚŒŞËr
 = 
Ãw
 
DRAMCache
( );

67 ifĞ
	gcÚŒŞËr
 == "LH_Cache" )

68 
memÜyCÚŒŞËr
 = 
Ãw
 
LH_Cache
( );

69 ifĞ
	gcÚŒŞËr
 == "LO_Cache" )

70 
memÜyCÚŒŞËr
 = 
Ãw
 
LO_Cache
( );

71 ifĞ
	gcÚŒŞËr
 == "PredictorDRC" )

72 
memÜyCÚŒŞËr
 = 
Ãw
 
P»diùÜDRC
( );

74 ifĞ
	gcÚŒŞËr
 == "RBLA_DRC")

75 
memÜyCÚŒŞËr
 = 
Ãw
 
RBLA_DRAMCache
();

79 ifĞ
	gmemÜyCÚŒŞËr
 =ğ
NULL
 )

80 
¡d
::
cout
 << "NVMain: Unknown memory controller `"

81 << 
cÚŒŞËr
 << "'." << 
¡d
::
’dl
;

83  
	gmemÜyCÚŒŞËr
;

	@MemControl/MemoryControllerFactory.h

34 #iâdeà
__MEMORYCONTROLLERFACTORY_H__


35 
	#__MEMORYCONTROLLERFACTORY_H__


	)

37 
	~"¤c/MemÜyCÚŒŞËr.h
"

39 
Çme¥aû
 
	gNVM
 {

41 
şass
 
	gAdd»ssT¿n¦©Ü
;

43 şas 
	cMemÜyCÚŒŞËrFaùÜy


45 
	gpublic
:

46 
MemÜyCÚŒŞËrFaùÜy
( ) {}

47 ~
MemÜyCÚŒŞËrFaùÜy
( ) {}

49 
MemÜyCÚŒŞËr
 *
C»©eNewCÚŒŞËr
Ğ
¡d
::
¡ršg
 
cÚŒŞËr
 );

	@MemControl/MissMap/MissMap.cpp

34 
	~"MemCÚŒŞ/MissM­/MissM­.h
"

35 
	~"Decod”s/DRCDecod”/DRCDecod”.h
"

36 
	~"MemCÚŒŞ/LH-Cache/LH-Cache.h
"

37 
	~"šşude/NVMH–³rs.h
"

38 
	~"NVM/nvmaš.h
"

39 
	~<as£¹.h
>

41 
usšg
 
Çme¥aû
 
	gNVM
;

43 
	gMissM­
::
	$MissM­
( )

45 
missM­
 = 
NULL
;

47 
missM­AÎoÿtiÚs
 = 0;

48 
missM­Wr™es
 = 0;

49 
missM­H™s
 = 0;

50 
missM­Mis£s
 = 0;

51 
missM­FÜûEviùs
 = 0;

52 
missM­MemR—ds
 = 0;

54 
psIÁ”v®
 = 0;

55 
	}
}

57 
	gMissM­
::~
	$MissM­
( )

59 
	}
}

61 
MissM­
::
	$S‘CÚfig
Ğ
CÚfig
 *
cÚf
, 
boŞ
 
ü—‹Chd»n
 )

64 ifĞ
cÚf
->
	`KeyExi¡s
( "DRC_CHANNELS" ) )

65 
numChªÃls
 = 
¡©ic_ÿ¡
<
ncouÁ”_t
>Ğ
cÚf
->
	`G‘V®ue
( "DRC_CHANNELS" ) );

67 
numChªÃls
 = 1;

70 
ušt64_t
 
mmS‘s
, 
mmAssoc
;

72 
mmS‘s
 = 256;

73 ifĞ
cÚf
->
	`KeyExi¡s
( "MissMapSets" ) )

74 
mmS‘s
 = 
¡©ic_ÿ¡
<
ušt64_t
>Ğ
cÚf
->
	`G‘V®ue
( "MissMapSets" ) );

76 
mmAssoc
 = 16;

77 ifĞ
cÚf
->
	`KeyExi¡s
( "MissMapAssoc" ) )

78 
mmAssoc
 = 
¡©ic_ÿ¡
<
ušt64_t
>Ğ
cÚf
->
	`G‘V®ue
( "MissMapAssoc" ) );

80 
missM­QueueSize
 = 32;

81 ifĞ
cÚf
->
	`KeyExi¡s
( "MissMapQueueSize" ) )

82 
missM­QueueSize
 = 
¡©ic_ÿ¡
<
ušt64_t
>Ğ
cÚf
->
	`G‘V®ue
( "MissMapQueueSize" ) );

84 
ušt64_t
 
missM­L©’cy
 = 10;

85 ifĞ
cÚf
->
	`KeyExi¡s
( "MissMapLatency" ) )

86 
missM­L©’cy
 = 
¡©ic_ÿ¡
<
ušt64_t
>Ğ
cÚf
->
	`G‘V®ue
( "MissMapLatency" ) );

88 ifĞ
ü—‹Chd»n
 )

91 
¡d
::
¡ršg
 
cÚfigFe
;

92 
CÚfig
 *
mašMemÜyCÚfig
;

94 
cÚfigFe
 = 
NVM
::
	`G‘FeP©h
Ğ
cÚf
->
	`G‘FeName
( ) );

95 
cÚfigFe
 +ğ
cÚf
->
	`G‘SŒšg
( "MM_CONFIG" );

97 
mašMemÜyCÚfig
 = 
Ãw
 
	`CÚfig
( );

98 
mašMemÜyCÚfig
->
	`R—d
Ğ
cÚfigFe
 );

100 
mašMemÜy
 = 
Ãw
 
	`NVMaš
( );

101 
mašMemÜy
->
	`S‘CÚfig
Ğ
mašMemÜyCÚfig
, "offChMemÜy", 
ü—‹Chd»n
 );

102 
mašMemÜy
->
	`S‘P¬’t
Ğ
this
 );

104 
¡d
::
¡ršg
 
drcV¬ŸÁ
 = "LH_Cache";

105 ifĞ
cÚf
->
	`KeyExi¡s
( "DRCVariant" ) )

106 
drcV¬ŸÁ
 = 
cÚf
->
	`G‘SŒšg
( "DRCVariant" );

108 
drcChªÃls
 = 
Ãw
 
LH_Cache
*[
numChªÃls
];

109  
ncouÁ”_t
 
i
 = 0; i < 
numChªÃls
; i++ )

111 
drcChªÃls
[
i
] = 
dyÇmic_ÿ¡
<
LH_Cache
 *>(

112 
MemÜyCÚŒŞËrFaùÜy
::
	`C»©eNewCÚŒŞËr
Ğ
drcV¬ŸÁ
 ));

114 
drcChªÃls
[
i
]->
	`S‘MašMemÜy
Ğ
mašMemÜy
 );

116 
drcChªÃls
[
i
]->
	`S‘ID
Ğ
¡©ic_ÿ¡
<>(i) );

117 
drcChªÃls
[
i
]->
	`StName
Ğ
this
->
¡©Name
 );

119 
drcChªÃls
[
i
]->
	`S‘P¬’t
Ğ
this
 );

120 
	`AddChd
Ğ
drcChªÃls
[
i
] );

122 
drcChªÃls
[
i
]->
	`S‘CÚfig
Ğ
cÚf
, 
ü—‹Chd»n
 );

125 
missM­
 = 
Ãw
 
	`CacheBªk
Ğ
mmS‘s
, 
mmAssoc
, 64 );

126 
missM­
->
isMissM­
 = 
Œue
;

128 
missM­
->
	`S‘P¬’t
Ğ
this
 );

129 
	`AddChd
Ğ
missM­
 );

131 
missM­
->
	`S‘R—dTime
Ğ
missM­L©’cy
 );

132 
missM­
->
	`S‘Wr™eTime
Ğ
missM­L©’cy
 );

135 
¡d
::
cout
 << "C»©ed‡ MissM­!" << std::
’dl
;

136 
	}
}

138 
	gMissM­
::
	$Regi¡”Sts
( )

140 
	`AddSt
(
missM­AÎoÿtiÚs
);

141 
	`AddSt
(
missM­Wr™es
);

142 
	`AddSt
(
missM­H™s
);

143 
	`AddSt
(
missM­Mis£s
);

144 
	`AddSt
(
missM­FÜûEviùs
);

145 
	`AddSt
(
missM­MemR—ds
);

146 
	}
}

148 
boŞ
 
	gMissM­
::
	$QueueFuÎ
Ğ
NVMašReque¡
 * )

150  (
missM­Queue
.
	`size
(è>ğ
missM­QueueSize
);

151 
	}
}

153 
boŞ
 
	gMissM­
::
	$IssueAtomic
Ğ
NVMašReque¡
 *
»q
 )

156 
ušt64_t
 *
lšeM­
, 
lšeMask
, 
lšeOff£t
;

157 
NVMAdd»ss
 
‹¡Addr
;

158 
NVMD©aBlock
 
d©a
;

161 
‹¡Addr
.
	`S‘PhysiÿlAdd»ss
Ğ(
»q
->
add»ss
.
	`G‘PhysiÿlAdd»ss
( ) >> 6) >> 12 );

166 
lšeOff£t
 = ((
»q
->
add»ss
.
	`G‘PhysiÿlAdd»ss
( ) >> 6) & 0xFFF) / 64;

167 
lšeMask
 = (
ušt64_t
)(1ULL << 
lšeOff£t
);

169 
¡d
::
cout
 << "Add»s 0x" << std::
hex
 << 
»q
->
add»ss
.
	`G‘PhysiÿlAdd»ss
()

170 << " m­ tØ·g0x" << 
‹¡Addr
.
	`G‘PhysiÿlAdd»ss
Ğè<< 
¡d
::
dec


171 << " w™h off£ˆ" << 
lšeOff£t
 << 
¡d
::
’dl
;

174 ifĞ
missM­
->
	`P»£Á
Ğ
‹¡Addr
 ) )

176 
missM­
->
	`R—d
Ğ
»q
->
add»ss
, &
d©a
 );

178 
lšeM­
 = 
»š‹½»t_ÿ¡
<
ušt64_t
 *>(
d©a
.
¿wD©a
);

180 ifĞ!((*
lšeM­
è& 
lšeMask
) )

182 *
lšeM­
 |ğ
lšeMask
;

189 ifĞ
missM­
->
	`S‘FuÎ
Ğ
‹¡Addr
 ) )

191 
NVMAdd»ss
 
viùim
;

192 
NVMD©aBlock
 
dummy
;

194 
missM­
->
	`Choo£Viùim
Ğ
‹¡Addr
, &
viùim
 );

195 
missM­
->
	`Eviù
Ğ
viùim
, &
dummy
 );

199 
lšeM­
 = 
Ãw
 
ušt64_t
;

201 *
lšeM­
 = 
lšeMask
;

202 
d©a
.
¿wD©a
 = 
»š‹½»t_ÿ¡
<
ušt8_t
*>(
lšeM­
);

204 
missM­
->
	`In¡®l
Ğ
‹¡Addr
, 
d©a
 );

207  
Œue
;

208 
	}
}

210 
boŞ
 
	gMissM­
::
	$IssueCommªd
Ğ
NVMašReque¡
 *
»q
 )

212 
boŞ
 
rv
 = 
çl£
;

215 ifĞ
missM­Queue
.
	`size
Ğè< 
missM­QueueSize
 )

217 
NVMašReque¡
 *
mmReq
 = 
Ãw
 
	`NVMašReque¡
( );

218 
CacheReque¡
 *
üeq
 = 
Ãw
 CacheRequest;

220 *
mmReq
 = *
»q
;

221 
mmReq
->
g
 = 
MISSMAP_READ
;

222 
mmReq
->
»qInfo
 = 
¡©ic_ÿ¡
<*>Ğ
üeq
 );

223 
mmReq
->
owÃr
 = 
this
;

225 
üeq
->
İty³
 = 
CACHE_READ
;

226 
üeq
->
add»ss
 = 
»q
->address;

229 
üeq
->
add»ss
.
	`S‘PhysiÿlAdd»ss
(

230 (
üeq
->
add»ss
.
	`G‘PhysiÿlAdd»ss
( ) >> 6) >> 12 );

231 
üeq
->
owÃr
 = 
this
;

232 
üeq
->
Üigš®Reque¡
 = 
»q
;

234 
missM­Queue
.
	`push
Ğ
mmReq
 );

236 #ifdeà
DBGMISSMAP


237 
¡d
::
cout
 << "Enqueued‡„eque¡Øthmis m­. " << std::
’dl
;

240 
rv
 = 
Œue
;

243  
rv
;

244 
	}
}

246 
boŞ
 
	gMissM­
::
	$Reque¡Com¶‘e
Ğ
NVMašReque¡
 *
»q
 )

248 
boŞ
 
rv
 = 
çl£
;

250 ifĞ
»q
->
owÃr
 =ğ
this
 )

252 ifĞ
»q
->
g
 =ğ
MISSMAP_READ
 )

254 
CacheReque¡
 *
ÿcheReq
 = 
¡©ic_ÿ¡
<CacheReque¡ *>Ğ
»q
->
»qInfo
 );

256 #ifdeà
DBGMISSMAP


257 
¡d
::
cout
 << "MissMap„ead complete. Hit = "

258 << 
ÿcheReq
->
h™
 << 
¡d
::
’dl
;

262 ifĞ
ÿcheReq
->
h™
 )

265 
ušt64_t
 *
lšeM­
;

266 
ušt64_t
 
lšeMask
;

267 
ušt64_t
 
lšeOff£t
;

269 
lšeOff£t
 = ((
»q
->
add»ss
.
	`G‘PhysiÿlAdd»ss
( ) >> 6) & 0xFFF) / 64;

270 
lšeM­
 = 
»š‹½»t_ÿ¡
<
ušt64_t
 *>(
ÿcheReq
->
d©a
.
¿wD©a
);

271 
lšeMask
 = (
ušt64_t
)(1ULL << 
lšeOff£t
);

274 ifĞ(*
lšeM­
è& 
lšeMask
 )

276 #ifdeà
DBGMISSMAP


277 
¡d
::
cout
 << "Found cacheline in miss map, issuingo DRC."

278 << 
¡d
::
’dl
;

282 
ušt64_t
 
chª
;

284 
ÿcheReq
->
Üigš®Reque¡
->
add»ss
.
	`G‘T¿n¦©edAdd»ss
(

285 
NULL
, NULL, NULL, NULL, &
chª
, NULL );

287 
	`as£¹
Ğ
chª
 < 
numChªÃls
 );

289 
drcChªÃls
[
chª
]->
	`IssueCommªd
Ğ
ÿcheReq
->
Üigš®Reque¡
 );

291 
missM­H™s
++;

295 #ifdeà
DBGMISSMAP


296 
¡d
::
cout
 << "Did‚ot find cacheline; issuingo main memory."

297 << 
¡d
::
’dl
;

304 ifĞ
ÿcheReq
->
Üigš®Reque¡
->
ty³
 =ğ
READ
 )

306 
ÿcheReq
->
Üigš®Reque¡
->
g
 = 
MISSMAP_MEMREAD
;

307 
mašMemÜy
->
	`IssueCommªd
Ğ
ÿcheReq
->
Üigš®Reque¡
 );

311 
ušt64_t
 
chª
;

313 
ÿcheReq
->
Üigš®Reque¡
->
add»ss
.
	`G‘T¿n¦©edAdd»ss
(

314 
NULL
, NULL, NULL, NULL, &
chª
, NULL );

316 
drcChªÃls
[
chª
]->
	`IssueCommªd
Ğ
ÿcheReq
->
Üigš®Reque¡
 );

320 
NVMašReque¡
 *
mmFl
 = 
Ãw
 
	`NVMašReque¡
( );

321 
CacheReque¡
 *
flCReq
 = 
Ãw
 
	`CacheReque¡
( );

323 *
lšeM­
 |ğ(
ušt64_t
)(1ULL << 
lšeOff£t
);

324 
flCReq
->
d©a
.
¿wD©a
 = 
»š‹½»t_ÿ¡
<
ušt8_t
 *>Ğ
lšeM­
 );

326 
flCReq
->
İty³
 = 
CACHE_WRITE
;

327 
flCReq
->
add»ss
 = 
»q
->address;

329 
flCReq
->
add»ss
.
	`S‘PhysiÿlAdd»ss
(

330 (
flCReq
->
add»ss
.
	`G‘PhysiÿlAdd»ss
( ) >> 6) >> 12 );

331 
flCReq
->
owÃr
 = 
this
;

332 
flCReq
->
Üigš®Reque¡
 = 
NULL
;

334 *
mmFl
 = *
»q
;

335 
mmFl
->
owÃr
 = 
this
;

336 
mmFl
->
»qInfo
 = 
¡©ic_ÿ¡
<*>Ğ
flCReq
 );

337 
mmFl
->
g
 = 
MISSMAP_WRITE
;

339 
missM­Wr™es
++;

340 
missM­Mis£s
++;

342 
missM­FlQueue
.
	`push
Ğ
mmFl
 );

344 #ifdeà
DBGMISSMAP


345 
¡d
::
cout
 << "Updating miss mapƒntry 0x"

346 << 
flCReq
->
add»ss
.
	`G‘PhysiÿlAdd»ss
( )

347 << " w™h b™ veùÜ 0x" << 
¡d
::
hex
 << (*
lšeM­
)

348 << 
¡d
::
dec
 << std::
’dl
;

359 ifĞ
ÿcheReq
->
Üigš®Reque¡
->
ty³
 =ğ
READ
 )

361 
ÿcheReq
->
Üigš®Reque¡
->
g
 = 
MISSMAP_MEMREAD
;

362 
mašMemÜy
->
	`IssueCommªd
Ğ
ÿcheReq
->
Üigš®Reque¡
 );

366 
ušt64_t
 
chª
;

368 
ÿcheReq
->
Üigš®Reque¡
->
add»ss
.
	`G‘T¿n¦©edAdd»ss
(

369 
NULL
, NULL, NULL, NULL, &
chª
, NULL );

371 
drcChªÃls
[
chª
]->
	`IssueCommªd
Ğ
ÿcheReq
->
Üigš®Reque¡
 );

375 
NVMašReque¡
 *
mmFl
 = 
Ãw
 
	`NVMašReque¡
( );

376 
CacheReque¡
 *
flCReq
 = 
Ãw
 
	`CacheReque¡
( );

377 
ušt64_t
 
lšeOff£t
 = ((
»q
->
add»ss
.
	`G‘PhysiÿlAdd»ss
( ) >> 6) & 0xFFF) / 64;

378 
ušt64_t
 *
lšeM­
 = 
Ãw
 uint64_t;

380 *
lšeM­
 = 0;

381 *
lšeM­
 |ğ(
ušt64_t
)(1ULL << 
lšeOff£t
);

382 
flCReq
->
d©a
.
¿wD©a
 = 
»š‹½»t_ÿ¡
<
ušt8_t
 *>(
lšeM­
);

384 
flCReq
->
İty³
 = 
CACHE_WRITE
;

385 
flCReq
->
add»ss
 = 
»q
->address;

387 
flCReq
->
add»ss
.
	`S‘PhysiÿlAdd»ss
(

388 (
flCReq
->
add»ss
.
	`G‘PhysiÿlAdd»ss
( ) >> 6) >> 12 );

389 
flCReq
->
owÃr
 = 
this
;

390 
flCReq
->
Üigš®Reque¡
 = 
NULL
;

392 *
mmFl
 = *
»q
;

393 
mmFl
->
owÃr
 = 
this
;

394 
mmFl
->
»qInfo
 = 
¡©ic_ÿ¡
<*>Ğ
flCReq
 );

395 
mmFl
->
g
 = 
MISSMAP_WRITE
;

397 
missM­AÎoÿtiÚs
++;

398 
missM­Wr™es
++;

399 
missM­Mis£s
++;

401 
missM­FlQueue
.
	`push
Ğ
mmFl
 );

403 #ifdeà
DBGMISSMAP


404 
¡d
::
cout
 << "Adding‚ew miss mapƒntry 0x"

405 << 
flCReq
->
add»ss
.
	`G‘PhysiÿlAdd»ss
( )

406 << " w™h b™ veùÜ 0x" << 
¡d
::
hex
 << (*
lšeM­
)

407 << 
¡d
::
dec
 << std::
’dl
;

411 
d–‘e
 
ÿcheReq
;

413 ifĞ
»q
->
g
 =ğ
MISSMAP_WRITE
 )

416 
CacheReque¡
 *
üeq
 = 
¡©ic_ÿ¡
<CacheReque¡ *>Ğ
»q
->
»qInfo
 );

418 #ifdeà
DBGMISSMAP


419 
¡d
::
cout
 << "WrÙtØthmis m­." << std::
’dl
;

423 ifĞ
üeq
->
İty³
 =ğ
CACHE_EVICT
 )

426 
ušt64_t
 
chª
;

428 
»q
->
add»ss
.
	`G‘T¿n¦©edAdd»ss
Ğ
NULL
, NULL, NULL, NULL, &
chª
, NULL );

429 
	`as£¹
Ğ
chª
 < 
numChªÃls
 );

431 
NVMašReque¡
 *
eviùReq
 = 
Ãw
 
	`NVMašReque¡
( );

433 *
eviùReq
 = *
»q
;

434 
eviùReq
->
owÃr
 = 
this
;

435 
eviùReq
->
g
 = 
MISSMAP_FORCE_EVICT
;

437 #ifdeà
DBGMISSMAP


438 
¡d
::
cout
 << "Mis m­ƒviùed‡†še.." << std::
’dl
;

442 
ušt64_t
 *
lšeM­
 = 
»š‹½»t_ÿ¡
<ušt64_ˆ*>(
üeq
->
d©a
.
¿wD©a
);

443 
ušt64_t
 
lšeCouÁ
 = 0;

445  
i
 = 0; i < 64; i++ )

447 ifĞ*
lšeM­
 & 0x1 )

448 
lšeCouÁ
++;

450 *
lšeM­
 >>= 1;

453 
missM­FÜûEviùs
 +ğ
lšeCouÁ
;

459 
d–‘e
 
lšeM­
;

461 
drcChªÃls
[
chª
]->
	`IssueCommªd
Ğ
eviùReq
 );

464 
d–‘e
 
üeq
;

467 
d–‘e
 
»q
;

468 
rv
 = 
Œue
;

474 ifĞ
»q
->
g
 =ğ
MISSMAP_MEMREAD
 )

476 
ušt64_t
 
chª
;

478 
»q
->
add»ss
.
	`G‘T¿n¦©edAdd»ss
Ğ
NULL
, NULL, NULL, NULL, &
chª
, NULL );

481 
»q
->
ty³
 = 
WRITE
;

482 
»q
->
g
 = 0;

484 #ifdeà
DBGMISSMAP


485 
¡d
::
cout
 << "MissMap memory‡ccess„eturned, filling DRAM cache. "

486 << 
¡d
::
’dl
;

489 
drcChªÃls
[
chª
]->
	`IssueCommªd
Ğ
»q
 );

491 
missM­MemR—ds
++;

493 
rv
 = 
çl£
;

496  
rv
;

497 
	}
}

499 
	gMissM­
::
	$Cyşe
Ğ
ncyşe_t
 )

502 ifĞ
missM­
 && (!
missM­Queue
.
	`em±y
Ğè|| !
missM­FlQueue
.empty()) )

505 ifĞ!
missM­FlQueue
.
	`em±y
() )

507 ifĞ
missM­
->
	`IsIssuabË
Ğ
missM­FlQueue
.
	`äÚt
(), 
NULL
 ) )

509 
missM­
->
	`IssueCommªd
Ğ
missM­FlQueue
.
	`äÚt
() );

510 
missM­FlQueue
.
	`pİ
( );

512 #ifdeà
DBGMISSMAP


513 
¡d
::
cout
 << "Issued‡ fÈtØthmis m­." << std::
’dl
;

519 ifĞ
missM­
->
	`IsIssuabË
Ğ
missM­Queue
.
	`äÚt
(), 
NULL
 ) )

521 
missM­
->
	`IssueCommªd
Ğ
missM­Queue
.
	`äÚt
() );

522 
missM­Queue
.
	`pİ
( );

524 #ifdeà
DBGMISSMAP


525 
¡d
::
cout
 << "Issued‡…robtØthmis m­." << std::
’dl
;

530 
	}
}

532 
	gMissM­
::
	$C®cuÏ‹Sts
( )

534 
	}
}

	@MemControl/MissMap/MissMap.h

34 #iâdeà
__UTILS_MISSMAP_H__


35 
	#__UTILS_MISSMAP_H__


	)

37 
	~"Uts/Caches/CacheBªk.h
"

38 
	~"¤c/CÚfig.h
"

39 
	~"¤c/MemÜyCÚŒŞËr.h
"

40 
	~"MemCÚŒŞ/MemÜyCÚŒŞËrFaùÜy.h
"

41 
	~<queue
>

43 
Çme¥aû
 
	gNVM
 {

45 
	#MISSMAP_READ
 
gG’
->
	`C»©eTag
("MISSMAP_READ")

	)

46 
	#MISSMAP_WRITE
 
gG’
->
	`C»©eTag
("MISSMAP_WRITE")

	)

47 
	#MISSMAP_MEMREAD
 
gG’
->
	`C»©eTag
("MISSMAP_MEMREAD")

	)

48 
	#MISSMAP_FORCE_EVICT
 
gG’
->
	`C»©eTag
("MISSMAP_FORCE_EVICT")

	)

50 
şass
 
	gNVMaš
;

51 
şass
 
	gLH_Cache
;

53 şas 
	cMissM­
 : 
public
 
MemÜyCÚŒŞËr


55 
public
:

56 
MissM­
( );

57 ~
MissM­
( );

59 
S‘CÚfig
Ğ
CÚfig
 *
cÚf
, 
boŞ
 
ü—‹Chd»n
 = 
Œue
 );

61 
boŞ
 
QueueFuÎ
Ğ
NVMašReque¡
 *
»que¡
 );

63 
boŞ
 
IssueAtomic
Ğ
NVMašReque¡
 *
»q
 );

64 
boŞ
 
IssueCommªd
Ğ
NVMašReque¡
 *
»q
 );

65 
boŞ
 
Reque¡Com¶‘e
Ğ
NVMašReque¡
 *
»q
 );

67 
Cyşe
Ğ
ncyşe_t
 );

69 
Regi¡”Sts
( );

70 
C®cuÏ‹Sts
( );

72 
	g´iv©e
:

73 
CacheBªk
 *
missM­
;

74 
	g¡d
::
queue
<
NVMašReque¡
 *> 
missM­Queue
;

75 
	g¡d
::
queue
<
NVMašReque¡
 *> 
missM­FlQueue
;

76 
ušt64_t
 
	gmissM­QueueSize
;

78 
NVMaš
 *
	gmašMemÜy
;

79 
LH_Cache
 **
	gdrcChªÃls
;

80 
ncouÁ”_t
 
	gnumChªÃls
;

83 
ušt64_t
 
	gmissM­AÎoÿtiÚs
, 
	gmissM­Wr™es
;

84 
ušt64_t
 
	gmissM­H™s
, 
	gmissM­Mis£s
;

85 
ušt64_t
 
	gmissM­FÜûEviùs
;

86 
ušt64_t
 
	gmissM­MemR—ds
;

	@MemControl/PerfectMemory/PerfectMemory.cpp

34 
	~"MemCÚŒŞ/P”ãùMemÜy/P”ãùMemÜy.h
"

35 
	~"¤c/Ev’tQueue.h
"

37 #iâdeà
TRACE


38 
	~"ba£/¡©i¡ics.hh
"

39 
	~"ba£/ty³s.hh
"

40 
	~"sim/cÜe.hh
"

41 
	~"sim/¡©_cÚŒŞ.hh
"

44 
	~<io¡»am
>

46 
usšg
 
Çme¥aû
 
	gNVM
;

55 
	gP”ãùMemÜy
::
	$P”ãùMemÜy
( )

57 
¡d
::
cout
 << "C»©ed‡ P”ãù MemÜy memÜy cÚŒŞËr!" << std::
’dl
;

58 
	}
}

64 
boŞ
 
	gP”ãùMemÜy
::
	$IssueCommªd
Ğ
NVMašReque¡
 *
»q
 )

66 
	`G‘Ev’tQueue
()->
	`In£¹Ev’t
Ğ
Ev’tRe¥Ú£
, 
this
, 
»q
,

67 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
()+1 );

73  
Œue
;

74 
	}
}

76 
	gP”ãùMemÜy
::
	$Cyşe
Ğ
ncyşe_t
 )

78 
	}
}

80 
P”ãùMemÜy
::
PrštSts
Ğ
¡d
::
o¡»am
& )

	@MemControl/PerfectMemory/PerfectMemory.h

34 #iâdeà
__PERFECTMEMORY_H__


35 
	#__PERFECTMEMORY_H__


	)

37 
	~"¤c/MemÜyCÚŒŞËr.h
"

39 
Çme¥aû
 
	gNVM
 {

41 şas 
	cP”ãùMemÜy
 : 
public
 
MemÜyCÚŒŞËr


43 
public
:

44 
P”ãùMemÜy
( );

45 ~
P”ãùMemÜy
( ) { }

47 
boŞ
 
IssueCommªd
Ğ
NVMašReque¡
 *
»q
 );

49 
PrštSts
Ğ
¡d
::
o¡»am
& );

51 
Cyşe
Ğ
ncyşe_t
 );

	@MemControl/PredictorDRC/PredictorDRC.cpp

34 
	~"MemCÚŒŞ/P»diùÜDRC/P»diùÜDRC.h
"

35 
	~"MemCÚŒŞ/MemÜyCÚŒŞËrFaùÜy.h
"

36 
	~"Uts/AcûssP»diùÜ/AcûssP»diùÜFaùÜy.h
"

37 
	~"šşude/NVMH–³rs.h
"

38 
	~"NVM/nvmaš.h
"

40 
	~<io¡»am
>

41 
	~<s¡»am
>

42 
	~<ÿs£¹
>

44 
usšg
 
Çme¥aû
 
	gNVM
;

46 
	gP»diùÜDRC
::
	$P»diùÜDRC
( )

50 
¡d
::
cout
 << "C»©ed‡ P»diùÜDRC!" << std::
’dl
;

52 
DRC
 = 
NULL
;

54 
numChªÃls
 = 0;

55 
	}
}

57 
	gP»diùÜDRC
::~
	$P»diùÜDRC
( )

59 
	}
}

61 
P»diùÜDRC
::
	$S‘CÚfig
Ğ
CÚfig
 *
cÚf
, 
boŞ
 
ü—‹Chd»n
 )

63 ifĞ
ü—‹Chd»n
 )

66 
¡d
::
¡ršg¡»am
 
fÜm©‹r
;

69 ifĞ!
cÚf
->
	`KeyExi¡s
( "DRCPredictor" ) )

71 
¡d
::
cout
 << "E¼Ü: NØDRC…»diùÜ s³cif›d." << std::
’dl
;

74 
fÜm©‹r
.
	`¡r
( "" );

75 
fÜm©‹r
 << 
	`StName
Ğè<< "." << 
cÚf
->
	`G‘SŒšg
( "DRCPredictor" );

77 
´ediùÜ
 = 
AcûssP»diùÜFaùÜy
::
	`C»©eAcûssP»diùÜ
Ğ
cÚf
->
	`G‘SŒšg
( "DRCPredictor" ) );

78 
´ediùÜ
->
	`S‘P¬’t
Ğ
this
 );

79 
´ediùÜ
->
	`StName
Ğ
fÜm©‹r
.
	`¡r
() );

80 
´ediùÜ
->
	`S‘CÚfig
Ğ
cÚf
, 
ü—‹Chd»n
 );

81 
	`S‘Decod”
Ğ
´ediùÜ
 );

83 
DRC
 = 
Ãw
 
	`DRAMCache
( );

85 
fÜm©‹r
.
	`¡r
( "" );

86 
fÜm©‹r
 << 
	`StName
( ) << ".DRC";

87 
DRC
->
	`StName
Ğ
fÜm©‹r
.
	`¡r
() );

89 
DRC
->
	`S‘P¬’t
Ğ
this
 );

90 
	`AddChd
Ğ
DRC
 );

92 
DRC
->
	`S‘CÚfig
Ğ
cÚf
, 
ü—‹Chd»n
 );

93 
DRC
->
	`Regi¡”Sts
( );

96 
	`AddChd
Ğ
DRC
->
	`G‘MašMemÜy
() );

99 
´ediùÜ
->
	`S‘H™De¡š©iÚ
Ğ
	`G‘ChdId
(
DRC
) );

100 
´ediùÜ
->
	`S‘MissDe¡š©iÚ
Ğ
	`G‘ChdId
(
DRC
->
	`G‘MašMemÜy
()) );

105 
	`S‘DebugName
Ğ"P»diùÜDRC", 
cÚf
 );

106 
	}
}

108 
	gP»diùÜDRC
::
	$Regi¡”Sts
( )

111 
	}
}

113 
boŞ
 
P»diùÜDRC
::
	$IssueAtomic
Ğ
NVMašReque¡
 *
»q
 )

115  
	`G‘Chd
Ğ
»q
 )->
	`IssueAtomic
(„eq );

116 
	}
}

121 
boŞ
 
	gP»diùÜDRC
::
	$IssueCommªd
Ğ
NVMašReque¡
 *
»q
 )

123  
	`G‘Chd
Ğ
»q
 )->
	`IssueCommªd
(„eq );

124 
	}
}

126 
boŞ
 
	gP»diùÜDRC
::
	$Reque¡Com¶‘e
Ğ
NVMašReque¡
 *
»q
 )

132 
boŞ
 
rv
 = 
çl£
;

134 ifĞ
»q
->
ty³
 =ğ
REFRESH
 )

135 
	`ProûssReäeshPul£
Ğ
»q
 );

136 ifĞ
»q
->
owÃr
 =ğ
this
 )

138 
d–‘e
 
»q
;

139 
rv
 = 
Œue
;

143 
rv
 = 
	`G‘P¬’t
Ğ)->
	`Reque¡Com¶‘e
Ğ
»q
 );

146  
rv
;

147 
	}
}

149 
	gP»diùÜDRC
::
	$Cyşe
Ğ
ncyşe_t
 
¡•s
 )

154 
DRC
->
	`Cyşe
Ğ
¡•s
 );

155 
	}
}

157 
	gP»diùÜDRC
::
	$C®cuÏ‹Sts
( )

162 
DRC
->
	`C®cuÏ‹Sts
( );

163 
	}
}

	@MemControl/PredictorDRC/PredictorDRC.h

34 #iâdeà
__MEMCONTROL_PREDICTORDRC_H__


35 
	#__MEMCONTROL_PREDICTORDRC_H__


	)

37 
	~"¤c/MemÜyCÚŒŞËr.h
"

38 
	~"Uts/Caches/CacheBªk.h
"

39 
	~"MemCÚŒŞ/DRAMCache/DRAMCache.h
"

40 
	~"Uts/AcûssP»diùÜ/AcûssP»diùÜ.h
"

42 
Çme¥aû
 
	gNVM
 {

44 
şass
 
	gNVMaš
;

46 şas 
	cP»diùÜDRC
 : 
public
 
MemÜyCÚŒŞËr


48 
public
:

49 
P»diùÜDRC
( );

50 ~
P»diùÜDRC
( );

53 
S‘CÚfig
Ğ
CÚfig
 *
cÚf
, 
boŞ
 
ü—‹Chd»n
 = 
Œue
 );

55 
boŞ
 
IssueAtomic
Ğ
NVMašReque¡
 *
»q
 );

56 
boŞ
 
IssueCommªd
Ğ
NVMašReque¡
 *
»q
 );

57 
boŞ
 
Reque¡Com¶‘e
Ğ
NVMašReque¡
 *
»q
 );

59 
Cyşe
Ğ
ncyşe_t
 );

61 
Regi¡”Sts
( );

62 
C®cuÏ‹Sts
( );

64 
	g´iv©e
:

65 
NVMaš
 *
mašMemÜy
;

66 
DRAMCache
 *
	gDRC
;

67 
AcûssP»diùÜ
 *
	g´ediùÜ
;

68 
ncouÁ”_t
 
	gnumChªÃls
;

	@MemControl/RBLA-Dyn/RBLA_DRAMCache.cpp

7 
	~"RBLA_DRAMCache.h
"

8 
usšg
 
Çme¥aû
 
	gNVM
;

13 
	gRBLA_DRAMCache
::
	$RBLA_DRAMCache
()

16 
maš_memÜy
 = 
NULL
;

17 
d¿m_ÿche
 = 
NULL
;

18 
miss_couÁ
 = 0;

19 
h™_couÁ
 = 0;

20 
eviù_couÁ
 = 0;

21 
wr™e_h™
=0;

22 
»ad_h™
 = 0;

23 
fl_couÁ
=0;

25 
»ad_time
 = 1;

26 
wr™e_time
 = 1;

28 
h™_¿‹
 = -1.0;

31 
ÿche_lše_size
 = 64;

32 
ÿche_assoc
 = 1;

34 
ÿche_ÿ·c™y
 = 
NVM
::
	`Pow”
( 2 ,27 );

36 
»ad_miss
 = 0 ;

37 
wr™e_miss
 = 0;

39 
wr™e_®loÿ‹
=
Œue
;

40 
³rãù_fl
 = 
Œue
;

41 
drcQueueSize
=32;

42 
	`In™Queues
( 1 );

43 
drcQueue
 = &(
Œª§ùiÚQueues
[0]);

46 
	`S‘DRAMCache
(
dyÇmic_ÿ¡
<
Ab¡¿ùDRAMCache
*>(
this
));

48 
¡d
::
cout
<<"RBLA-DRAMCachcÚ¡ruùÜ"<<¡d::
’dl
;

49 
	}
}

52 
	gRBLA_DRAMCache
::~
	$RBLA_DRAMCache
()

71 
	}
}

88 
RBLA_DRAMCache
::
	$S‘CÚfig
Ğ
CÚfig
* 
cÚf
 , 
boŞ
 
C»©eChd»n
)

91 
¡d
::
cout
<<"DRAM : s‘ d¿m cachcÚfig "<<¡d::
’dl
;

92 
¡d
::
¡ršg
 
tmp_¡r
;

93 ifĞ
cÚf
->
	`KeyExi¡s
("CacheCapacity"))

95 
tmp_¡r
 = 
cÚf
->
	`G‘SŒšg
("CacheCapacity");

96 
this
->
ÿche_ÿ·c™y
 = 
NVM
::
	`T¿nsToBy‹s
Ğ
tmp_¡r
 );

100 ifĞ
cÚf
->
	`KeyExi¡s
("CacheAssoc"))

102 
this
->
ÿche_assoc
 = 
cÚf
->
	`G‘V®ue
("CacheAssoc");

105 ifĞ
cÚf
->
	`KeyExi¡s
("CacheLineSize"))

107 
tmp_¡r
 = 
cÚf
->
	`G‘SŒšg
("CacheLineSize");

108 
this
->
ÿche_lše_size
 = 
NVM
::
	`T¿nsToBy‹s
(
tmp_¡r
);

111 ifĞ
cÚf
->
	`KeyExi¡s
("ReadTime"))

113 
this
->
»ad_time
 = 
cÚf
->
	`G‘V®ue
("ReadTime");

115 ifĞ
cÚf
->
	`KeyExi¡s
("WriteTime"))

117 
this
->
wr™e_time
 = 
cÚf
->
	`G‘V®ue
("WriteTime");

119 ifĞ
cÚf
->
	`KeyExi¡s
Ğ"P”ãùFls" ) && cÚf->
	`G‘SŒšg
( "PerfectFills" ) == "true" )

120 
³rãù_fl
 = 
Œue
;

121 if(
cÚf
->
	`KeyExi¡s
("DRCQueueSize"))

122 
drcQueueSize
 = 
cÚf
->
	`G‘V®ue
("DRCQueueSize");

123 if(
cÚf
->
	`KeyExi¡s
Ğ"Wr™eAÎoÿ‹")&& cÚf->
	`G‘SŒšg
("WriteAllocate")=="true")

125 
wr™e_®loÿ‹
 = 
Œue
;

127 
ušt64_t
 
t_ÿs
 = 0, 
t_½
=0,
t_rcd
=0;

128 if(
cÚf
->
	`KeyExi¡s
("tCAS"))

129 
t_ÿs
 = 
¡©ic_ÿ¡
<
ušt64_t
>(
cÚf
->
	`G‘V®ue
("tCAS"));

132 if(
cÚf
->
	`KeyExi¡s
("tRP"))

133 
t_½
 = 
¡©ic_ÿ¡
<
ušt64_t
>(
cÚf
->
	`G‘V®ue
("tRP"));

134 if(
cÚf
->
	`KeyExi¡s
("tRCD"))

135 
t_rcd
 = 
¡©ic_ÿ¡
<
ušt64_t
>(
cÚf
->
	`G‘V®ue
("tRCD"));

143 
d¿m_h™_time
 = 
t_ÿs
;

144 
d¿m_miss_time
 = 
NVM
::
	`G‘DRAMMissTime
Ğ
t_½
 , 
t_rcd
 , 
t_ÿs
 );

147 
this
->
ÿche_£ts
 =his->
ÿche_ÿ·c™y
/(
ÿche_lše_size
*
ÿche_assoc
);

150 
d¿m_ÿche
 = 
Ãw
 
	`CacheIm¶
(
ÿche_assoc
 , 
ÿche_£ts
, 
ÿche_lše_size
 ,
»ad_time
 ,
wr™e_time
 );

151 
MemÜyCÚŒŞËr
::
	`S‘CÚfig
Ğ
cÚf
, 
C»©eChd»n
 );

152 
	}
}

154 
ušt64_t
 
	gRBLA_DRAMCache
::
	$G‘DRAMH™Time
()

156  
d¿m_h™_time
;

157 
	}
}

159 
ušt64_t
 
	gRBLA_DRAMCache
::
	$G‘DRAMMissTime
()

161  
d¿m_miss_time
;

162 
	}
}

164 
	gRBLA_DRAMCache
::
	$S‘DRAMCache
(
Ab¡¿ùDRAMCache
* 
d¿m_ÿche
)

170 
	}
}

175 
RBLA_DRAMCache
::
	$S‘MašMemÜy
Ğ
NVMaš
* 
memÜy
)

177 
this
->
maš_memÜy
 = 
memÜy
;

178 
	}
}

185 
boŞ
 
	gRBLA_DRAMCache
::
	$IssueAtomic
Ğ
NVMašReque¡
* 
»q
)

187 
CacheBlock
* 
tmp_blk
;

188 
ušt64_t
 
£t_id
 , 
way_id
;

189 
tmp_blk
 = 
d¿m_ÿche
->
	`FšdBlock
(&(
»q
->
add»ss
),
£t_id
 , 
way_id
);

190 
¡d
::
cout
<<"©omiø‹¡"<<¡d::
’dl
;

192 ifĞ
tmp_blk
 )

194 
h™_couÁ
++;

195 if(
»q
->
ty³
==
WRITE
 ||„eq->ty³==
WRITE_PRECHARGE
)

196 
wr™e_h™
++;

197 if(
»q
->
ty³
==
READ
 ||„eq->ty³==
READ_PRECHARGE
)

198 
»ad_h™
++;

202 
miss_couÁ
++;

203 
fl_couÁ
++;

204 ifĞ(
tmp_blk
 = 
d¿m_ÿche
->
	`FšdViùim
(&(
»q
->
add»ss
),
£t_id
 , 
way_id
)))

207 if((
way_id
==
ÿche_assoc
-1)&&(
tmp_blk
->
	`IsV®id
()))

209 
d¿m_ÿche
->
	`Eviù
Ğ
tmp_blk
);

210 
eviù_couÁ
++;

213 
d¿m_ÿche
->
	`In¡®l
(&(
»q
->
add»ss
),
tmp_blk
 , &Ôeq->
d©a
));

215  
Œue
;

216 
	}
}

222 
boŞ
 
	gRBLA_DRAMCache
::
	$IssueFunùiÚ®
(
NVMašReque¡
* 
»q
)

224 
boŞ
 
is_h™
 = 
çl£
;

225 
CacheBlock
* 
tmp_blk
 = 
d¿m_ÿche
->
	`FšdBlock
(&(
»q
->
add»ss
));

226 ifĞ
tmp_blk
 )

227 
is_h™
 = 
Œue
;

228  
is_h™
;

229 
	}
}

234 
boŞ
 
	gRBLA_DRAMCache
::
	$IssueCommªd
Ğ
NVMašReque¡
* 
»q
)

236 
¡d
::
cout
<<"»que¡ed‡dd»s is: 0x"<<¡d::
hex
<<
»q
->
add»ss
.
	`G‘PhysiÿlAdd»ss
()<<¡d::
’dl
;

237 ifĞ(
»q
->
owÃr
==
this
)&& (»q->
ty³
 =ğ
WRITE
 ||„eq->ty³ =ğ
WRITE_PRECHARGE
))

241 
	`G‘Ev’tQueue
()->
	`In£¹Ev’t
(
Ev’tRe¥Ú£
 , 
this
 , 
»q
 , G‘Ev’tQueue()->
	`G‘Cu¼’tCyşe
());

245 
	`Enqueue
(0,
»q
);

260  
Œue
;

261 
	}
}

269 
boŞ
 
	gRBLA_DRAMCache
::
	$Reque¡Com¶‘e
Ğ
NVMašReque¡
* 
»q
)

271 
boŞ
 
»t
 = 
çl£
;

273 ifĞ
»q
->
ty³
 =ğ
REFRESH
)

275 
	`ProûssReäeshPul£
Ğ
»q
 );

277 ifĞ
»q
->
owÃr
 =ğ
this
)

279 if(
»q
->
g
==
DRC_FILL_CACHE
)

281 
	`FlCache
(
»q
);

283 if(
»q
->
g
 =ğ
DRC_MEMFETCH
)

285 
	`MemF‘ch
(
»q
);

287 
	`as£¹
(
out¡ªdšg_memãtch
.
	`couÁ
Ğ
»q
 )>0);

290 
NVMašReque¡
* 
Üigš®_»q
 = 
out¡ªdšg_memãtch
[
»q
];

294 
CacheBlock
* 
tmp_blk
 = 
d¿m_ÿche
->
	`FšdBlock
(&(
Üigš®_»q
->
add»ss
));

295 ifĞ
tmp_blk
 )

297 ifĞ
wr™e_®loÿ‹
 &&(
Üigš®_»q
->
ty³
==
WRITE
 || origš®_»q->ty³==
WRITE_PRECHARGE
))

301 
d¿m_ÿche
->
	`Wr™e
(&(
Üigš®_»q
->
add»ss
),
tmp_blk
 , &(Üigš®_»q->
d©a
));

303 if(
Üigš®_»q
->
ty³
==
READ
||Üigš®_»q->ty³==
READ_PRECHARGE
)

308 
d¿m_ÿche
->
	`R—d
(&(
Üigš®_»q
->
add»ss
),
tmp_blk
 , &(Üigš®_»q->
d©a
));

313 
out¡ªdšg_memãtch
.
	`”a£
Ğ
»q
);

314 
	`G‘P¬’t
()->
	`Reque¡Com¶‘e
Ğ
Üigš®_»q
);

316 if(
»q
->
g
 =ğ
WRITE_BACK
)

317 
¡d
::
cout
<<"wr™back„eque¡ com¶‘e"<<¡d::
’dl
;

318 
»t
 = 
Œue
;

319 
d–‘e
 
»q
;

323 if(
»q
->
ty³
==
WRITE
||„eq->ty³==
WRITE_PRECHARGE
||»q->ty³==
READ
||»q->ty³==
READ_PRECHARGE
)

329 
	`IssueToOth”ModuË
(
»q
);

330 
»t
 = 
çl£
;

334 
NVM
::
	`F©®
("unknown„equestype (generally‡re READ/READ_PRECHARGE/WRITE/WRITE_PRECHARGE)");

337  
»t
;

338 
	}
}

344 
	gRBLA_DRAMCache
::
	$MemF‘ch
(
NVMašReque¡
* 
»q
)

346 
NVMašReque¡
* 
ãtch_»q
 = 
Ãw
 
	`NVMašReque¡
();

347 *
ãtch_»q
 = *
»q
;

348 
ãtch_»q
->
owÃr
 = 
this
;

351 
ãtch_»q
->
g
 = 
DRC_FILL_CACHE
;

352 #ifdeà
CLOSED_BANK


353 
ãtch_»q
->
ty³
 = 
WRITE_PRECHARGE
;

355 
ãtch_»q
->
ty³
 = 
WRITE
;

357 
ãtch_»q
->
¬riv®Cyşe
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
();

358 
this
->
	`IssueCommªd
(
ãtch_»q
 );

359 
	}
}

367 
	gRBLA_DRAMCache
::
	$FlCache
(
NVMašReque¡
* 
»q
)

370 
boŞ
 
dœty
;

371 
NVMašReque¡
* 
wr™e_back_»q
;

372 
ušt64_t
 
£t_id
 , 
way_id
;

376 
CacheBlock
* 
viùim_blk
 = 
d¿m_ÿche
->
	`FšdViùim
Ğ&
»q
->
add»ss
 , 
£t_id
 , 
way_id
);

377 ifĞ
viùim_blk
->
	`IsV®id
() )

381 ifĞ(
dœty
 = 
d¿m_ÿche
->
	`Eviù
(
viùim_blk
 )) )

384 
¡d
::
cout
<<"wr™back s‘ "<< 
viùim_blk
->
£t
<<"ag"<<viùim_blk->
g
<<¡d::
’dl
;

386 
wr™e_back_»q
 = 
Ãw
 
	`NVMašReque¡
();

387 *
wr™e_back_»q
 = *
»q
;

388 
wr™e_back_»q
->
g
 = 
WRITE_BACK
;

389 
wr™e_back_»q
->
owÃr
 = 
this
;

390 #ifdeà
CLOSED_BANK


391 
wr™e_back_»q
->
ty³
 = 
WRITE_PRECHARGE
;

393 
wr™e_back_»q
->
ty³
 = 
WRITE
;

395 
wr™e_back_»q
->
add»ss
.
	`S‘PhysiÿlAdd»ss
Ğ
d¿m_ÿche
->
	`G‘PA
Ğ
viùim_blk
->
g
 , 
£t_id
));

398 ifĞ!(
wr™e_back_»q
->
d©a
.
¿wD©a
) )

401 
wr™e_back_»q
->
d©a
.
¿wD©a
 = 
Ãw
 
ušt8_t
[
viùim_blk
->d©a->
	`G‘Size
()];

403 
	`memıy
Ğ
wr™e_back_»q
->
d©a
.
¿wD©a
 , 
viùim_blk
->d©a->¿wD©¨, viùim_blk->d©a->
	`G‘Size
() );

404 
wr™e_back_»q
->
¬riv®Cyşe
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
();

406 
maš_memÜy
->
	`IssueCommªd
Ğ
wr™e_back_»q
);

407 
wb_couÁ
++;

408 
eviù_couÁ
++;

413 
viùim_blk
->
	`Inv®id©e
();

414 
fl_couÁ
++;

416 
d¿m_ÿche
->
	`In¡®l
Ğ&(
»q
->
add»ss
è, 
viùim_blk
 , &Ôeq->
d©a
) );

417 
	}
}

425 
	gRBLA_DRAMCache
::
	$IssueToOth”ModuË
(
NVMašReque¡
* 
»q
)

427 
CacheBlock
* 
tmp_blk
 = 
d¿m_ÿche
->
	`FšdBlock
(&(
»q
->
add»ss
));

431 ifĞ
tmp_blk
 )

434 if(
»q
->
ty³
 =ğ
WRITE
 ||„eq->ty³ =ğ
WRITE_PRECHARGE
)

436 
wr™e_h™
++;

437 
d¿m_ÿche
->
	`Wr™e
(&(
»q
->
add»ss
),
tmp_blk
 , &Ôeq->
d©a
));

444 if(
»q
->
ty³
==
READ
||„eq->ty³==
READ_PRECHARGE
)

446 
»ad_h™
++;

451 
h™_couÁ
++;

452 
	`G‘P¬’t
()->
	`Reque¡Com¶‘e
(
»q
);

459 if(
wr™e_®loÿ‹
 || 
»q
->
ty³
 =ğ
READ
 ||„eq->ty³ =ğ
READ_PRECHARGE
)

461 
NVMašReque¡
* 
mm_»q
 = 
Ãw
 
	`NVMašReque¡
();

462 *
mm_»q
 = *
»q
;

463 
mm_»q
->
¬riv®Cyşe
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
();

464 
mm_»q
->
owÃr
 = 
this
;

465 
mm_»q
->
g
 = 
DRC_MEMFETCH
;

466 
mm_»q
->
ty³
 = 
READ
;

468 
maš_memÜy
->
	`IssueCommªd
Ğ
mm_»q
 );

469 
out¡ªdšg_memãtch
.
	`š£¹
(
¡d
::
·œ
<
NVMašReque¡
* , NVMašReque¡*>(
mm_»q
 , 
»q
 ));

470 ifĞ
»q
->
ty³
==
READ
||»q->ty³==
READ_PRECHARGE
)

471 
»ad_miss
++;

472 if(
»q
->
ty³
==
WRITE
||»q->ty³==
WRITE_PRECHARGE
)

474 
wr™e_miss
++;

478 ifĞ!
wr™e_®loÿ‹
 && (
»q
->
ty³
==
WRITE
||»q->ty³==
WRITE_PRECHARGE
))

481 
maš_memÜy
->
	`IssueCommªd
Ğ
»q
 );

482 
wr™e_miss
++;

484 
miss_couÁ
++;

491 
	}
}

496 
	gRBLA_DRAMCache
::
	$Cyşe
(
ncyşe_t
 
¡•s
)

498 
NVMašReque¡
* 
Ãxt_»q
;

500 if(!
	`FšdSrvedReque¡
(*
drcQueue
, &
Ãxt_»q
 ) )

503 if(!
	`FšdRowBufãrH™
(*
drcQueue
, &
Ãxt_»q
))

506 if(!
	`FšdOlde¡R—dyReque¡
(*
drcQueue
, &
Ãxt_»q
))

508 if(!
	`FšdClo£dBªkReque¡
(*
drcQueue
,&
Ãxt_»q
))

509 
Ãxt_»q
=
NULL
;

514 if(
Ãxt_»q
)

516 
	`IssueMemÜyCommªds
(
Ãxt_»q
);

518 
	`CyşeCommªdQueues
();

519 
MemÜyCÚŒŞËr
::
	`Cyşe
(
¡•s
);

520 
	}
}

526 
	gRBLA_DRAMCache
::
	$Regi¡”Sts
( )

529 
	`AddSt
Ğ
miss_couÁ
 );

530 
	`AddSt
Ğ
h™_couÁ
 );

531 
	`AddSt
Ğ
eviù_couÁ
 );

532 
	`AddSt
Ğ
wb_couÁ
 );

533 
	`AddSt
Ğ
fl_couÁ
 );

534 
	`AddSt
Ğ
wr™e_h™
 );

535 
	`AddSt
Ğ
»ad_h™
);

536 
	`AddSt
Ğ
h™_¿‹
);

537 
	`AddSt
Ğ
»ad_miss
);

538 
	`AddSt
Ğ
wr™e_miss
);

539 
MemÜyCÚŒŞËr
::
	`Regi¡”Sts
();

540 
	}
}

546 
	gRBLA_DRAMCache
::
	$C®cuÏ‹Sts
()

548 ifĞ
h™_couÁ
 + 
miss_couÁ
 > 0)

549 
h™_¿‹
 = ()
h™_couÁ
/()(h™_couÁ+
miss_couÁ
);

551 
MemÜyCÚŒŞËr
::
	`C®cuÏ‹Sts
();

552 
	}
}

557 
	gRBLA_DRAMCache
::
C»©eCheckpošt
Ğ
¡d
::
¡ršg
 
check_dœ
 )

563 
RBLA_DRAMCache
::
Re¡ÜeCheckpošt
Ğ
¡d
::
¡ršg
 
»¡Üe_dœ
 )

	@MemControl/RBLA-Dyn/RBLA_DRAMCache.h

7 #iâdeà
__DRAM_CACHE_H__


8 
	#__DRAM_CAHCE_H__


	)

9 
	~"šşude/CommÚM©h.h
"

10 
	~"šşude/CommÚH—d”s.h
"

11 
	~"Uts/Caches/CacheAssoc.h
"

12 
	~"šşude/CacheBlock.hh
"

13 
	~"šşude/CacheS‘.hh
"

14 
	~"NVM/nvmaš.h
"

15 
	~"šşude/Exû±iÚ.h
"

16 
	~"šşude/CommÚC®lBack.hh
"

17 
	~"¤c/Ev’tQueue.h
"

18 
	~"MemCÚŒŞ/DRAMCache/Ab¡¿ùDRAMCache.h
"

19 
	~<io¡»am
>

20 
Çme¥aû
 
	gNVM


22 
	#DRC_FILL_CACHE
 
gG’
->
	`C»©eTag
("DRC_FILL_CACHE")

	)

23 
	#DRC_MEMFETCH
 
gG’
->
	`C»©eTag
("DRC_MEMFETCH")

	)

24 
	#WRITE_BACK
 
gG’
->
	`C»©eTag
("WRITE_BACK")

	)

26 şas 
	cRBLA_DRAMCache
:
public
 
Ab¡¿ùDRAMCache


28 
public
:

29 
RBLA_DRAMCache
();

30 
	gvœtu®
 ~
RBLA_DRAMCache
();

33 
vœtu®
 
S‘CÚfig
Ğ
CÚfig
 *
cÚf
 , 
boŞ
 
C»©eChd»n
 = 
Œue
);

34 
vœtu®
 
S‘MašMemÜy
Ğ
NVMaš
* 
memÜy
);

35 
vœtu®
 
S‘DRAMCache
Ğ
Ab¡¿ùDRAMCache
* 
d¿m_ÿche
);

37 
vœtu®
 
boŞ
 
IssueCommªd
Ğ
NVMašReque¡
* 
»q
);

38 
vœtu®
 
boŞ
 
IssueAtomic
Ğ
NVMašReque¡
* 
»q
);

39 
vœtu®
 
boŞ
 
IssueFunùiÚ®
Ğ
NVMašReque¡
* 
»q
);

40 
vœtu®
 
boŞ
 
Reque¡Com¶‘e
Ğ
NVMašReque¡
* 
»q
);

42 
MemF‘ch
Ğ
NVMašReque¡
* 
»q
);

43 
FlCache
Ğ
NVMašReque¡
*
»q
);

44 
IssueToOth”ModuË
Ğ
NVMašReque¡
 *
»q
);

46 
vœtu®
 
Cyşe
Ğ
ncyşe_t
 
¡•s
 = 1);

49 
vœtu®
 
Regi¡”Sts
();

50 
vœtu®
 
C®cuÏ‹Sts
();

53 
vœtu®
 
C»©eCheckpošt
Ğ
¡d
::
¡ršg
 
check_dœ
 );

54 
vœtu®
 
Re¡ÜeCheckpošt
Ğ
¡d
::
¡ršg
 
»¡Üe_dœ
 );

56 
ušt64_t
 
G‘DRAMH™Time
();

57 
ušt64_t
 
G‘DRAMMissTime
();

59 
	gpublic
:

60 
NVMaš
* 
maš_memÜy
;

61 
CacheIm¶
* 
	gd¿m_ÿche
;

63 
ušt64_t
 
	gd¿m_h™_time
, 
	gd¿m_miss_time
;

65 
ušt64_t
 
	g»ad_time
 , 
	gwr™e_time
;

66 
ušt64_t
 
	gÿche_lše_size
;

67 
ušt64_t
 
	gÿche_assoc
;

68 
ušt64_t
 
	gÿche_ÿ·c™y
;

69 
ušt64_t
 
	gÿche_£ts
;

74 
ušt64_t
 
	gmiss_couÁ
 , 
	gh™_couÁ
 , 
	geviù_couÁ
 , 
	gwb_couÁ
,
	gfl_couÁ
;

75 
ušt64_t
 
	gwr™e_h™
 , 
	g»ad_h™
 , 
	g»ad_miss
 , 
	gwr™e_miss
;

76 
	gh™_¿‹
;

77 
boŞ
 
	g³rãù_fl
;

78 
boŞ
 
	gwr™e_®loÿ‹
;

79 
ušt64_t
 
	gdrcQueueSize
;

80 
	g´iv©e
:

81 
NVMT¿n§ùiÚQueue
 *
drcQueue
;

82 
	g¡d
::
m­
<
NVMašReque¡
* , 
	gNVMašReque¡
*>
	gout¡ªdšg_memãtch
;

	@MemControl/RBLA-Dyn/older/DRAMBuffer.h

7 #iâdeà
_DRAM_BUFFER_H_


8 
	#_DRAM_BUFFER_H_


	)

10 
	~"šşude/NVMašReque¡.h
"

11 
	~"MemCÚŒŞ/DRAMCache/Ab¡¿ùDRAMCache.h
"

12 
	~"NVM/nvmaš.h
"

13 
	~<li¡
>

14 
	~<™”©Ü
>

17 
Çme¥aû
 
	gNVM


21 
	gINVLID
 = 0,

22 
	gVALID
 = 1,

23 
	gDIRTY
 = 2

26 
	eDRAMCacheS‹


28 
	gIDLE
,

29 
	gBUSY


32 
	eDRAMCacheOp


34 
	gDRAMCache_nÚe
,

35 
	gDRAMCache_»ad
,

36 
	gDRAMCache_wr™e
,

37 
	gDRAMCache_eviù


41 
	sRAMCacheReque¡


43 
DRAMCacheOp
 
	gİty³
;

44 
NVMAdd»ss
 
	gadd»ss
;

45 
NVMAdd»ss
 
	g’dAddr
;

46 
NVMD©aBlock
 
	gd©a
;

47 
boŞ
 
	gh™
;

48 
NVMObjeù
 *
	gowÃr
;

49 
NVMašReque¡
 *
	gÜigš®Reque¡
;

53 
	sDRAMCacheBlock


55 
ušt64_t
 
	gæags
;

56 
NVMAdd»ss
* 
	gaddr
;

57 
NVMD©aBlock
 *
	gd©a
;

60 şas 
	cDRAMBufãr


62 
	gpublic
:

63 
DRAMBufãr
Ğ
ušt64_t
 
£ts
, ušt64_ˆ
assoc
 , ušt64_ˆ
ÿcheLšeSize
);

64 
	gvœtu®
 ~
DRAMBufãr
();

65 
S‘CÚfig
Ğ
CÚfig
* 
cÚfig
 , 
boŞ
 
ü—‹Chd»n
 = 
Œue
 );

68 
boŞ
 
IsP»S’t
(
NVMAdd»ss
 &
addr
);

69 
boŞ
 
R—d
Ğ
NVMAdd»ss
 &
addr
);

71 
boŞ
 
Wr™e
Ğ
NVMAdd»ss
 &
addr
);

73 
boŞ
 
In¡®l
();

75 
	g´iv©e
:

76 
¡d
::
li¡
<
DRAMCacheBlock
*> 
d¿m_ÿche
;

	@MemControl/RBLA-Dyn/older/RBLA_Dyn.cpp

9 
	~"MemCÚŒŞ/RBLA-Dyn/RBLA_Dyn.h
"

11 
	gRBLA_Dyn
::
	$RBLA_Dyn
()

13 
mašMemÜy
 = 
NULL
;

14 
mašMemÜyCOnfig
 = 
NULL
;

15 
funùiÚ®Cache
 = 
NULL
;

16 
ÿcheSize
 = 0;

17 
assoc
 = 1;

18 
ÿcheLšeSize
 = 4*
	`pow”
(2,10);

20 
¡©sStÜeSize
 = 16;

21 
wr™eInüem’tS‹ps
 = 2;

22 
»adInüem’tS‹ps
 = 1;

25 
DRAMCache_h™s
 = 0;

26 
DRAMCache_mis£s
 = 0;

27 
DRAMCache_eviùs
 = 0;

29 
rb_h™s
 = 0;

30 
rb_mis£s
 = 0;

31 
rb_eviùs
 = 0;

33 
DRAMCache_h™¿‹
 = 0;

34 
	}
}

37 
	gRBLA_Dyn
::~
	$RBLA_Dyn
()

39 
	}
}

41 
RBLA_Dyn
::
	$S‘FunùiÚ®Cache
Ğ
CacheBªk
 *
ÿche
)

43 
funùiÚ®Cache
 = 
ÿche
;

44 
	}
}

47 
	gRBLA_Dyn
::
	$S‘CacheSize
Ğ
ušt64_t
 
size
, 
Un™
 
un™
)

49  
un™
 )

51 
KB
:

52 
ÿcheSize
 = 
size
 * 
	`pow
(2,10);

54 
MB
:

55 
ÿcheSize
 = 
size
 * 
	`pow
(2,20);

57 
GB
:

58 
ÿcheSize
 = 
size
 * 
	`pow
(2,30);

61 
ÿcheSize
 = 
size
;

64 
	}
}

67 
	gRBLA_Dyn
::
S‘CacheSize
Ğ
ušt64_t
 
size
, 
¡d
::
¡ršg
 
un™
)

70 ifĞ
un™
 == "KB" )

72 
ÿcheSize
 = 
size
*
pow
(2,10);

76 ifĞ
	gun™
 == "MB" )

78 
ÿcheSize
 = 
size
*
pow
(2,20);

82 ifĞ
	gun™
 == "GB" )

84 
ÿcheSize
 = 
size
*
pow
(2,30);

89 
	gÿcheSize
 = 
size
;

94 
ušt64_t
 
	gRBLA_Dyn
::
	$G‘CacheSize
()

96  
ÿcheSize
;

97 
	}
}

101 
	gRBLA_Dyn
::
	$S‘CÚfig
Ğ
CÚfig
 *
cÚf
,
boŞ
 
ü—‹Chd»n
 = 
Œue
)

104 
ušt64_t
 
bªks
 , 
chªÃls
 , 
¿nks
 ,
cŞs
 , 
by‹s_off
;

106 
ušt64_t
 
ÿcheSize
 = 
	`pow”
(2,30);

113 if(
cÚf
->
	`KeyExi¡s
("CacheSizeUnit"))

115 
un™_tmp
 = 
cÚf
->
	`G‘SŒšg
("CacheSizeUnit");

118 if(
cÚf
->
	`KeyExi¡s
("Assoc"))

120 
this
->
assoc
 = 
cÚf
->
	`G‘V®ue
("Assoc");

123 ifĞ
cÚf
->
	`KeyExi¡s
("CacheLineSize") )

125 
this
->
ÿcheLšeSize
 = 
cÚf
->
	`G‘V®ue
("CacheLineSize");

128 ifĞ
cÚf
->
	`KeyExi¡s
("StatsStoreSize"))

130 
this
->
¡©sStÜeSize
 = 
cÚf
->
	`G‘V®ue
("StatsStoreSize");

133 ifĞ
cÚf
->
	`KeyExi¡s
("WriteIncrementSteps") )

135 
this
->
wr™eInüem’tS‹ps
 = 
cÚf
->
	`G‘V®ue
("WriteIncrementSteps");

137 if(
cof
->
	`KeyExi¡s
("ReadIncrementSteps"))

138 
this
->
»adInüem’tS‹ps
 = 
cÚf
->
	`G‘V®ue
("ReadIncrementSteps");

140 if(
cÚf
->
	`KeyExi¡s
("ROWS"))

142 
this
->
rows
 = 
cÚf
->
	`G‘V®ue
("ROWS");

143 if(
cÚf
->
	`KeyExi¡s
("BANKS"))

145 
bªks
 = 
cÚf
->
	`G‘V®ue
("BANKS");

146 if(
cÚf
->
	`KeyExi¡s
("RANKS"))

148 
¿nks
 = 
cÚf
->
	`G‘V®ue
("RANKS");

149 if(
cÚf
->
	`KeyExi¡s
("COLS"))

151 
cŞs
 = 
cÚf
->("COLS");

152 ifĞ
cÚf
->
	`KeyExi¡s
("BusWidth"))

154 
by‹s_off
 = 
cÚf
->
	`G‘V®ue
("BusWidth")/8;

155 
ÿcheSize
 = 
bªks
 * 
¿nks
 * 
cŞs
 * 
by‹_off
 ;

162 
this
->
£ts
 = 
ÿcheSize
/(
ÿcheLšeSize
*
assoc
);

165 
funùiÚ®Cache
 = 
Ãw
 
	`CacheBªk
Ğ
£ts
 
assoc
 ,
ÿcheLšeSize
);

168 
	`S‘StsStÜe
(
Ãw
 
	`StsStÜeOp
(
¡©sStÜeSize
,
»adInüem’tS‹ps
,
wr™eInüem’tS‹ps
));

171 
MemÜyCÚŒŞËr
::
	`S‘CÚfig
Ğ
cÚf
 , 
ü—‹Chd»n
);

172 
	`S‘DebugName
("RBLA-Cache",
cÚf
);

173 
	}
}

176 
	gRBLA_Dyn
::
	$S‘MašMemÜy
(
NVMaš
 *
memÜy
)

178 
mašMemÜy
 = 
memÜy
;

179 
	}
}

187 
boŞ
 
	gRBLA_Dyn
::
	$IssueAtomic
(
NVMašReque¡
 *
»q
)

189 ifĞ
»q
->
add»ss
.
	`G‘PysiÿlAdd»ss
(è> 
max_addr
 ) max_addr =„eq->address.GetPysicalAddress();

192 ifĞ
funùiÚ®Cache
->
	`P»£Á
Ğ
»q
->
add»ss
 ) )

194 
h™s
++;

199 
NVMD©aBlock
 
eviùd_d©a
;

200 
NVMAdd»ss
 
viùim
;

201 
mis£s
++;

203 ifĞ
funùiÚ®Cache
->
	`S‘FuÎ
(
»q
->
add»ss
) )

205 ()
funùiÚ®Cache
->
	`Choo£Viùim
Ğ
»q
->
add»ss
 , &
viùim
 );

206 ()
funùiÚ®Cache
->
	`Eviù
Ğ
viùim
, &
eviùd_d©a
 );

207 
DRAMCache_eviù
++;

210 ()
funùiÚ®Cache
->
	`In¡®l
Ğ
»q
->
add»ss
 , );

213 
	}
}

219 
boŞ
 
	gRBLA_Dyn
::
	$IssueFunùiÚ®
(
NVMašReque¡
 *
»q
)

221  
funùiÚ®Cache
->
	`P»£Á
(
»q
->
add»ss
);

222 
	}
}

229 
boŞ
 
	gRBLA_Dyn
::
	$IssueCommªd
(
NVMašReque¡
 *
»q
)

232 ifĞ
»q
->
add»ss
.
	`G‘PhysiÿlAdd»ss
(è> 
max_addr
 )

233 
	}
}

235 
boŞ
 
RBLA_Dyn
::
	$Reque¡Com¶‘e
(
NVMašReque¡
 *
»q
)

238 
	}
}

241 
RBLA_Dyn
::
	$Cyşe
(
ncyşe_t
 
¡•s
)

244 
	}
}

246 
RBLA_Dyn
::
	$Regi¡”Sts
()

249 
	}
}

251 
RBLA_Dyn
::
	$C®cuÏ‹Sts
()

254 
	}
}

	@MemControl/RBLA-Dyn/older/RBLA_Dyn.h

9 #iâdeà
_RBLA_DYN_


10 
	#_RBLA_DYN_


	)

13 
	~<io¡»am
>

14 
	~"MemCÚŒŞ/DRAMCache/Ab¡¿ùDRAMCache.h
"

15 
	~"NVM/nvmaš.h
"

16 
	~"Uts/Caches/CacheBªk.h
"

17 
	~"m©h.h
"

18 
	~"šşude/glob®_v¬s.h
"

20 
Çme¥aû
 
	gNVM
{

22 
	eUn™


24 
	gB
,
	gKB
,
	gMB
,
	gGB


28 şas 
	cRBLA_Dyn
:
public
 
Ab¡¿ùDRAMCache


30 
public
:

31 
RBLA_Dyn
();

32 
	gvœtu®
 ~
RBLA_Dyn
();

34 
S‘CÚfig
(
CÚfig
 *
cÚf
,
boŞ
 
ü—‹Chd»n
 = 
Œue
);

36 
S‘MašMemÜy
(
NVMaš
 *
memÜy
);

37 
S‘FunùiÚ®Cache
(
CacheBªk
* 
ÿche
);

38 
S‘CacheSize
Ğ
ušt64_t
 
size
 , 
Un™
 
un™
 = 
B
);

39 
S‘CacheSize
Ğ
unšt64_t
 
size
, 
¡d
::
¡ršg
 
un™
);

40 
S‘StsStÜe
(
StsStÜeOp
* 
¡©sStÜe
)

42 
	gthis
->
	g¡©sStÜe
 = 
¡©sStÜe
;

46 
ušt64_t
 
G‘CacheSize
()

48  
	gthis
->
	g¡©sStÜe
;

51 
StsStÜeOp
* 
G‘StsStÜe
()

53  
	gthis
->
	g¡©sStÜe
;

57 
boŞ
 
IssueAtomic
(
NVMašReque¡
 *
»q
);

58 
boŞ
 
IssueFunùiÚ®
(
NVMašReque¡
 *
»q
);

59 
boŞ
 
IssueCommªd
(
NVMašReque¡
 *
»q
);

60 
boŞ
 
Reque¡Com¶‘e
(
NVMašReque¡
 *
»q
);

61 
Cyşe
(
ncyşe_t
);

64 
Regi¡”Sts
();

65 
C®cuÏ‹Sts
();

66 
	g´iv©e
:

67 
NVMaš
 *
mašMemÜy
;

68 
CÚfig
 *
	gmašMemÜyCÚfig
;

70 
CacheBªk
 *
	gfunùiÚ®Cache
;

73 
ušt64_t
 
	gÿcheSize
;

74 
ncouÁ”_t
 
	gassoc
;

75 
ncouÁ”_t
 
	g£ts
;

76 
ncouÁ”_t
 
	gÿcheLšeSize
;

77 
ncouÁ”_t
 
	grows
;

80 
ncouÁ”_t
 
	g¡©sStÜeSize
;

83 
ncouÁ”_t
 
	gDRAMCache_h™s
,
	gDRAMCache_mis£s
 , 
	gDRAMCache_eviùs
;

84 
ncouÁ”_t
 
	grb_h™s
,
	grb_mis£s
,
	grb_eviùs
;

85 
ncouÁ”_t
 
	gwr™eInüem’tS‹ps
,
	g»adInüem’tS‹ps
;

86 
	gDRAMCache_h™¿‹
;

87 
StsStÜeOp
 *
	g¡©sStÜe
;

	@MemControl/RBLA-Dyn/older/StatsStore.cpp

9 
	~"StsStÜe.h
"

11 
	gStsEÁry
::
	$StsEÁry
()

13 
this
->
missCouÁ”
 = 0;

14 
this
->
šdexID
 = 
UINT_MAX
;

15 
this
->
æag
 = 
Inv®id
;

16 
	}
}

18 
	gStsEÁry
::
	$MissInüem’t
(
ncouÁ”_t
 
¡•s
)

20 
this
->
missCouÁ”
 +ğ
¡•s
;

21 
	}
}

23 
	gStsStÜeOp
::
	$StsStÜeOp
(
ncouÁ”_t
 
¡©sStÜeSize
,ncouÁ”_ˆ
»adInüem’tS‹p
,ncouÁ”_ˆ
wr™eInüem’tS‹p
)

25 
this
->
¡©sStÜeSize
 = statsStoreSize;

26 
this
->
»adInüem’tS‹ps
 = 
R—dInüem’tS‹p
;

27 
this
->
wr™eInüem’tS‹ps
 = 
wr™eInüem’tS‹p
;

28 
i
=0 ; i<
¡©sStÜeSize
 ; i++)

30 
¡©sStÜe
.
	`push_back
(
Ãw
 
	`StsEÁry
());

32 
¡©e
 = 
IDLE
;

33 
	}
}

35 
	gStsStÜeOp
::~
	$S‹sStÜeOp
()

37 
¡d
::
li¡
<
StsEÁry
 *>::
™”©Ü
 
™
;

38 if(!
¡©sStÜe
.
	`em±y
())

40  
™
 = 
¡©sStÜe
.
	`begš
(è; iˆ!ğ¡©sStÜe.
	`’d
() ; it++ )

42 
	`d–‘e
 (*
™
);

45 
	}
}

47 
boŞ
 
	gStsStÜeOp
::
	$FšdMissCouÁ”
Ğ
ncouÁ”_t
 
šdex
 , 
StsEÁry
 *
’Œy
 )

49 
boŞ
 
æag
 = 
çl£
;

50 
¡d
::
li¡
<
StsEÁry
 *>::
™”©Ü
 
™
;

51  
™
 = 
¡©sStÜe
.
	`begš
(); iˆ!ğ¡©sStÜe.
	`’d
() ; it++ )

53 if(
šdex
 =ğ(*
™
)->
šdexID
)

55 
this
->
’Œy
 = *
™
;

56 
æag
 = 
Œue
;

60  
æag
;

61 
	}
}

64 
boŞ
 
	gStsStÜeOp
::
	$FšdMissCouÁ”
Ğ
NVMašReque¡
* 
»q
 , 
ncouÁ”_t
 
rows
,
StsEÁry
* 
’Œy
)

66 
ncouÁ”_t
 
šdexID
;

67 
šdexID
 = 
»q
->
addr
.
	`G‘PhysiÿlAdd»ss
()>>
	`log2
(
rows
);

68  
	`FšdMissCouÁ”
(
šdexID
,
’Œy
);

69 
	}
}

71 
boŞ
 
	gStsStÜeOp
::
	$FuÎ
()

73 
boŞ
 
æag
 = 
Œue
;

74 
¡d
::
li¡
<
StsEÁry
 *>::
™”©Ü
 
™
;

75  
™
 = 
¡©sStÜe
.
	`begš
(è; iˆ!ğ¡©sStÜe.
	`’d
() ; it++)

77 ifĞ(*
™
)->
	`G‘FÏg
(è=ğ
Inv®id
 )

79 
æag
 = 
çl£
;

83  
æag
;

84 
	}
}

86 
StsEÁry
* 
	gStsStÜeOp
::
	$FuÎ
()

88 
¡d
::
li¡
<
StsEÁry
* >::
™”©Ü
 
™
;

89 
StsEÁry
 *
’Œy
=
NULL
;

90 
™
 = 
¡©sStÜe
.
	`begš
(); iˆ!ğ¡©sStÜe.
	`’d
(); it++)

92 if((*
™
)->
	`G‘FÏg
(è=ğ
Inv®id
 )

94 
’Œy
 = *
™
;

98  
’Œy
;

99 
	}
}

102 
¡©sEÁry
* 
	gStsStÜeOp
::
	$FšdViùim
()

104  *(--
¡©sStÜe
.
	`’d
());

105 
	}
}

108 
	gStsStÜeOp
::
	$In£¹
Ğ
ncouÁ”_t
 
row_id
 )

110 
¡©e
 = 
busy
;

111 
StsEÁry
 *
š£¹EÁry
;

112 ià((
š£¹EÁry
 = 
	`FuÎ
())=ğ
NULL
)

114 
š£¹EÁry
 = 
	`FšdViùim
();

116 
š£¹EÁry
->
	`v®id©e
();

117 
š£¹EÁry
->
	`S‘MissCouÁ”
(0);

118 
š£¹EÁry
->
	`S‘RowID
Ğ
row_id
 );

119 
¡©sStÜe
.
	`»move
Ğ
š£¹EÁry
 );

120 
¡©sStÜe
.
	`push_äÚt
(
š£¹EÁry
);

121 
	}
}

124 
boŞ
 
	$R—d
Ğ
ncouÁ”_t
 
row_id
 ,‚couÁ”_ˆ&
miss_couÁ”
 )

126 
StsEÁry
 *
’Œy
 = 
NULL
;

127 
boŞ
 
isFound
 = 
	`FšdMissCouÁ”
Ğ
row_id
 , 
’Œy
 );

128 ifĞ
isFound
 )

130 
miss_couÁ”
 = 
’Œy
->
	`G‘MissCouÁ”
();

131 if(
’Œy
 !=(*
¡©sStÜe
.
	`begš
()))

133 
¡©sStÜe
.
	`»move
(
’Œy
);

134 
¡©sStÜe
.
	`push_äÚt
(
’Œy
);

140 
	`In£¹
(
row_id
);

141 
miss_couÁ”
 = 0;

143  
isFound
;

144 
	}
}

147 
boŞ
 
	$Upd©e
Ğ
ncouÁ”_t
 
row_id
 , 
MissTy³
 
ty³
)

149 
StsEÁry
 *
’Œy
 = 
NULL
;

150 
boŞ
 
isFound
 = 
	`FšdMissCouÁ”
Ğ
row_id
 , 
’Œy
 );

151 ifĞ
isFound
 )

153 
ty³
)

155 
READ_MISS
:

156 
’Œy
->
	`MissInüem’t
Ğ
R—dInüem’tS‹ps
 );

158 
WRITE_MISS
:

159 
’Œy
->
	`MissInüem’t
Ğ
Wr™eInü’tS‹ps
);

165 ifĞ
’Œy
 !=*(
¡©sStÜe
.
	`begš
()))

167 
¡©sStÜe
.
	`»move
(
’Œy
);

168 
¡©sStÜe
.
	`push_fÚt
(
’Œy
);

174 
	`In£¹
(
row_id
);

176  
isFound
;

177 
	}
}

180 
boŞ
 
	$CË¬CouÁ”
()

183 
	}
}

187 
boŞ
 
	gStsStÜeOp
::
	$IsIssuabË
()

189 
boŞ
 
issuabË
 = 
çl£
;

190 ifĞ
¡©e
 =ğ
IDLE
 )

192 
issuabË
 = 
Œue
;

194  
issuabË
;

195 
	}
}

197 
boŞ
 
	gStsStÜeOp
::
	$IssueCommªd
()

200 
	}
}

202 
boŞ
 
StStÜeOp
::
	$Reque¡Com¶‘e
()

205 
	}
}

	@MemControl/RBLA-Dyn/older/StatsStore.h

10 
	~<io¡»am
>

11 
	~<li¡
>

12 
	~<şim™s
>

13 
	~<™”©Ü
>

14 
	~"šşude/NVMašReque¡.h
"

15 
	~"m©h.h
"

16 
	~"as£¹.h
"

17 
	~"syswa™.h
"

18 
Çme¥aû
 
	gNVM
{

20 
	eStsEÁryFÏg


22 
	gInv®id
,

23 
	gV®id


26 
	eStsStÜeFÏg


28 
	gIDLE
,

29 
	gBUSY


32 
	eMissTy³


34 
	gREAD
,

35 
	gWRITE


39 şas 
	cStsEÁry


41 
	gpublic
:

42 
StsEÁry
();

45 
S‘RowID
(
ncouÁ”_t
 
rowID
)

47 
	gthis
->
	gšdexID
 = 
šdexID
;

50 
S‘MissCouÁ”
Ğ
ncouÁ”_t
 
missCouÁ”
)

52 
	gthis
->
	gmissCouÁ”
 = 
missCouÁ”
;

55 
S‘FÏg
Ğ
StsEÁryFÏg
 
æag
 )

57 
	gthis
->
	gæag
 = 
æag
;

61 
ncouÁ”_t
 
G‘RowID
()

63  
	gthis
->
	gšdexID
;

66 
ncouÁ”_t
 
G‘MissCouÁ”
()

68  
	gthis
->
	gmissCouÁ”
;

71 
G‘FÏg
( )

73  
	gthis
->
	gæag
;

76 
MissInüem’t
Ğ
ncouÁ”_t
 
¡•s
 = 1 );

78 
Inv®id©e
()

80 
	gæag
 = 
Inv®id
;

83 
V®id©e
()

85 
	gæag
 = 
V®id
;

87 
	g´iv©e
:

88 
ncouÁ”_t
 
šdexID
;

89 
ncouÁ”_t
 
	gmissCouÁ”
;

90 
StsEÁryFÏg
 
	gæag
;

94 şas 
	cStsStÜeOp


96 
	gpublic
:

97 
StsStÜeOp
(
ncouÁ”_t
 
¡©sStÜeSize
=16,ncouÁ”_ˆ
»adInüem’tS‹ps
=1,ncouÁ”_ˆ
wr™eInüem’tS‹ps
=2 );

98 ~
StsStÜeOp
();

100 
S‘R—dInüeS‹ps
(
ncouÁ”_t
 
¡•s
)

102 
	gthis
->
	gR—dInüem’tS‹ps
 = 
¡•s
;

105 
S‘Wr™eInüeS‹ps
(
ncouÁ”_t
 
¡•s
)

107 
	gthis
->
	gWr™eInüem’tS‹ps
 = 
¡•s
;

110 
ncouÁ”_t
 
G‘R—dInüeS‹ps
()

112  
	gthis
->
	gR—dInüem’tS‹ps
;

115 
ncouÁ”_t
 
G‘Wr™eInüeS‹ps
()

117  
	gthis
->
	gwr™eInüem’tS‹ps
;

121 
boŞ
 
FšdMissCouÁ”
(
ncouÁ”_t
 
šdex
 , 
StsEÁry
* 
’Œy
);

122 
boŞ
 
FšdMissCouÁ”
(
NVMašReque¡
* 
»q
, 
ncouÁ”_t
 
rows
 , 
StsEÁry
* 
’Œy
);

125 
boŞ
 
FuÎ
();

126 
StsEÁry
* 
FuÎ
();

129 
StsEÁry
* 
FšdViùim
();

130 
In£¹
Ğ
ncouÁ”_t
 
row_id
 );

131 
boŞ
 
R—d
Ğ
ncouÁ”_t
 
row_id
 ,‚couÁ”_ˆ&
miss_couÁ”
 );

132 
boŞ
 
Upd©e
Ğ
ncouÁ”_t
 
row_id
 , 
MissTy³
 
ty³
);

134 
boŞ
 
IsIssuabË
();

135 
boŞ
 
IssueCommªd
();

136 
boŞ
 
Reque¡Com¶‘e
();

138 
boŞ
 
CË¬CouÁ”
();

140 
	g´iv©e
:

142 
ncouÁ”_t
 
¡©sStÜeSize
;

143 
	g¡d
::
li¡
<
StsEÁry
 *>
¡©sStÜe
;

144 
StsStÜeFÏg
 
	g¡©e
;

145 
ncouÁ”_t
 
	g»adInüem’tS‹ps
,
	gwr™eInüem’tS‹ps
;

	@MemControl/RBLA-MEM/MigrationBuffer.h

7 #iâdeà
__MIGRATION_BUFFER_H__


8 
	#__MIGRATION_BUFFER_H__


	)

9 
	~"šşude/NVMD©aBlock.h
"

10 
	~"šşude/NVMAdd»ss.h
"

11 
	~<li¡
>

12 
	~<™”©Ü
>

13 
	~"šşude/Exû±iÚ.h
"

14 
Çme¥aû
 
	gNVM


16 şas 
	cMig¿tiÚEÁry


18 
	gpublic
:

19 
Mig¿tiÚEÁry
:
¡©us
(0),
addr
Ğ
¡©ic_ÿ¡
<
ušt64_t
>(-1è),
d©a
(
NULL
)

21 
Inv®id
(){ 
	g¡©us
=0; }

22 
S‘V®id
(){ 
	g¡©us
 = 1; }

23 
	gMig¿tiÚEÁry
& 
	gİ”©Ü
=Ğ
Mig¿tiÚEÁry
& 
cİ›d_’Œy
 )

25 
this
->
¡©us
 = 
cİ›d_’Œy
.status;

26 
	gthis
->
	gaddr
 = 
cİ›d_’Œy
.
addr
;

27 *(
	gthis
->
	gd©a
èğ*(
cİy›d_’Œy
.
d©a
);

28  *
	gthis
;

31 
	gpublic
:

32 
¡©us
;

33 
ušt64_t
 
	gaddr
;

34 
NVMD©aBlock
* 
	gd©a
;

38 şas 
	cMig¿tiÚBufãr


40 
	gpublic
:

44 
Mig¿tiÚBufãr
Ğ
ušt64_t
 
’Œy
 , ušt64_ˆ
row_size
 ):
mig¿_’Œy
ÓÁry),
’Œy_size
(row_size){

45 ifĞ
	gmig¿_’Œy
<=0)

46 
NVM
::
F©®
("entries'‚um of migration buffer must†argerhan 0");

47 if(
	g’Œy_size
<=0)

48 
NVM
::
F©®
("entries' size of migrationƒntry must†argerhan 0");

52 
	gblk
 = 
Ãw
 
NVMD©aBlock
* [
mig¿_’Œy
];

54 
	gi
=0;i<
	g’Œy_size
;i++)

56 
Mig¿tiÚEÁry
* 
	gtmp_’Œy
 = 
Ãw
 MigrationEntry;

57 
	gblk
[
i
] = 
Ãw
 
NVMD©aBlock
;

58 
	gblk
[
i
]->
S‘Size
(
row_size
);

59 
	gblk
[
i
]->
	gIsV®id
 = 
çl£
;

61 
	gtmp_’Œy
->
	gd©a
 = &
blk
[
i
];

62 
	gmig¿_bufãr
.
push
(
tmp_’Œy
);

66 
F‘chMig¿tiÚ
Ğ
Mig¿tiÚEÁry
)

71 
AddMig¿tiÚ
()

77 ~
Mig¿tiÚBufãr
()

79 if(
	gmig¿_bufãr
)

81 
d–‘e
 
	gmig¿_bufãr
;

82 
	gmig¿_bufãr
 = 
NULL
;

84 ifĞ
	gblk
 )

86 
d–‘e
 
	gblk
;

87 
	gblk
 = 
NULL
;

90 
	g´iv©e
:

91 
ušt64_t
 
mig¿_’Œy
;

92 
ušt64_t
 
	g’Œy_size
;

93 
	gqueue
<
	gMig¿tiÚEÁry
*> 
	gmig¿_bufãr
;

94 
NVMD©aBlock
** 
	gblk
;

	@MemControl/RBLA-MEM/RBLA_MainMemory.cpp

7 
	~"MemCÚŒŞ/RBLA_MašMemÜy.h
"

9 
usšg
 
Çme¥aû
 
	gNVM
;

11 
ušt64_t
 
	gNVM
::
RBLA_MašMemÜy
 
mig¿_th»s
 = 20;

12 
	gNVM
::
RBLA_MašMemÜy
 
´e_Ãt_b’ef™
 = 0.0;

13 
	gNVM
::
P»AùiÚ
 
NVM
::
RBLA_MašMemÜy
 
´e_aùiÚ
 = 
Inüem‘
;

14 
ušt64_t
 
	gNVM
::
RBLA_MašMemÜy
 
mig¿_time
 = 0;

16 
	gRBLA_MašMemÜy
::
	$RBLA_MašMemÜy
():
	`cyşe_¡•
(1),
	`¡©s_¡Üe_’Œy
(32),

17 
	`¡©T
(
NULL
),
	`wr™e_šüe
(1),

18 
	`»ad_šüe
(1),
	`wr™e_queue_size
(128),

19 
	`»ad_queue_size
(128),
	`¡¬v©iÚ_th»shŞd
(4),

20 
	`wr™e_queue_id
(0),
	`»ad_queue_id
(1),

21 
	`¡©s_bË_h™
(0),
	`¡©s_bË_miss
(0),

22 
	`¡©s_bË_h™¿‹
(0.0),

23 
	`wb_h™¿‹
(0.0),
	`rb_h™¿‹
(0.0),

24 
	`rowbufãr_h™¿‹
(0.0),
	`rowbufãr_h™s
(0),

25 
	`rowbufãr_miss
(0),
	`wb_h™s
(0),
	`rb_h™s
(0),

26 
	`wb_miss
(0),wb_miss(0),
	$th»s_upd©e_š‹r
(10000000)

28 
	`In™Queues
(2);

29 
»ad_queue
 = &(
Œª§ùiÚQueues
[
»ad_queue_id
]);

30 
wr™e_queue
 = &(
Œª§ùiÚQueues
[
wr™e_queue_id
]);

31 
	}
}

34 
	gRBLA_MašMemÜy
::~
	$RBLA_MašMemÜy
()

35 {
	}
}

41 
RBLA_MašMemÜy
::
	$S‘CÚfig
Ğ
CÚfig
* 
cÚf
 , 
boŞ
 
C»©eChd»n
)

43 ifĞ
cÚf
->
	`KeyExi¡s
("CycleSteps"))

45 
cyşe_¡•
 = 
¡©ic_ÿ¡
<
ušt64_t
>(
cÚf
->
	`G‘V®ue
("CycleSteps"));

47 if(
cÚf
->
	`KeyExi¡s
("StatsTableEntry"))

49 
¡©_bË_’Œy
 = 
¡©ic_ÿ¡
<
ušt64_t
>(
cÚf
->
	`G‘V®ue
("StatsTableEntry"));

51 if(
cÚf
->
	`KeyExi¡s
("WriteIncrement"))

53 
wr™e_šüe
 = 
¡©ic_ÿ¡
<
ušt64_t
>(
cÚf
->
	`G‘V®ue
("WriteIncrement"));

55 if(
cÚf
->
	`KeyExi¡s
("ReadIncrement"))

57 
»ad_šüe
 = 
¡©ic_ÿ¡
<
ušt64_t
>(
cÚf
->
	`G‘V®ue
("ReadIncrement"));

59 if(
cÚf
->
	`KeyExi¡s
("ReadQueueSize"))

61 
»ad_queue_size
 = 
¡©ic_ÿ¡
<
ušt64_t
>(
cÚf
->
	`G‘V®ue
("ReadQueueSize"));

63 if(
cÚf
->
	`KeyExi¡s
("WriteQueueSize"))

65 
wr™e_queue_size
 = 
¡©ic_ÿ¡
<
ušt64_t
>(
cÚf
->
	`G‘V®ue
("WriteQueueSize"));

68 if(
cÚf
->
	`KeyExi¡s
("StarvationThreshold"))

70 
¡¬v©iÚ_th»shŞd
 = 
¡©ic_ÿ¡
<
ušt64_t
>(
cÚf
->
	`G‘V®ue
("StarvationThreshold"));

72 
ušt64_t
 
t_ÿs
=0 , 
t_bur¡
=0 , 
t_rcd
=0 , 
t_¿s
=0 , 
t_cwd
=0;

74 ifĞ
cÚf
->
	`KeyExi¡s
("tCAS"))

75 
t_ÿs
 = 
¡©ic_ÿ¡
<
ušt64_t
>(
cÚf
->
	`G‘V®ue
("tCAS"));

78 if(
cÚf
->
	`KeyExi¡s
("tRCD"))

79 
t_rcd
 = 
¡©ic_ÿ¡
<
ušt64_t
>(
cÚf
->
	`G‘V®ue
("tRCD"));

80 if(
cÚf
->
	`KeyExi¡s
("tRAS"))

81 
t_¿s
 = 
¡©ic_ÿ¡
<
ušt64_t
>(
cÚf
->
	`G‘V®ue
("tRAS"));

82 if(
cÚf
->
	`KeyExi¡s
("tCWD"))

83 
t_cwd
 = 
¡©ic_ÿ¡
<
ušt64_t
>(
cÚf
->
	`G‘V®ue
("tCWD"));

85 
t_pcm_dœty_miss
 = 
NVM
::
	`G‘PCMDœtyMissTime
(
t_rcd
 , 
t_wp
 , 
t_½
 , 
t_ÿs
);

86 
t_pcm_ş—n_miss
 = 
NVM
::
	`G‘PCMCËªMissTime
Ğ
t_rcd
 , 
t_ÿs
 );

88 ifĞ
d¿m_ÿche
 )

89 { 
t_d¿m_h™
 = 
d¿m_ÿche
->
	`G‘DRAMH™Time
();

90 
t_d¿m_miss
 = 
d¿m_ÿche
->
	`G‘DRAMMissTime
();

93 if(
cÚf
->
	`KeyExi¡s
("ThresUpdateInterval"))

95 
th»s_upd©e_š‹r
 = 
¡©ic_ÿ¡
<
ušt64_t
>(
cÚf
->
	`G‘V®ue
("ThresUpdateInterval"));

98 
MemÜyCÚŒŞËr
::
	`S‘CÚfig
(
cÚf
 , 
C»©eChd»n
);

100 
¡©sT
 = 
Ãw
 
	`StsStÜe
(
¡©s_bË_’Œy
 , 
wr™e_šüe
 , 
»ad_šüe
);

101 
	}
}

107 
boŞ
 
	gRBLA_MašMemÜy
::
	$IssueCommªd
Ğ
NVMašReque¡
* 
»q
)

109 
»q
->
¬riv®Cyşe
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
();

110 
	`Enqueue
(0,
»q
);

111  
Œue
;

112 
	}
}

117 
boŞ
 
	gRBLA_MašMemÜy
::
	$Reque¡Com¶‘e
Ğ
NVMašReque¡
* 
»q
)

120 
	}
}

123 
RBLA_MašMemoy
::
	$Cyşe
Ğ
ušt64_t
 
¡•s
 )

125 
NVMašReque¡
 *
Ãxt_»q
 = 
NULL
;

126 
ušt64_t
 
row_num
;

127 
boŞ
 
is_miss
 = 
Œue
;

128 ifĞ
	`FšdSrvedReque¡
(*
wr™e_queue
 , &
Ãxt_»q
) )

130 
row_bufãr_miss
++;

131 
wb_miss
++;

133 ifĞ
	`FšdRowBufãrH™
(*
wr™e_queue
 , &
Ãxt_»q
))

135 
row_bufãr_h™s
++;

136 
wb_h™s
++;

137 
is_miss
 = 
çl£
;

139 if(
	`FšdOlde¡R—dyReque¡
(*
wr™e_queue
 , &
Ãxt_»q
))

141 
row_bufãr_miss
++;

142 
wb_miss
++;

144 ifĞ
	`FšdClo£dBªkReque¡
(*
wr™e_queue
, &
Ãxt_»q
))

146 
row_bufãr_miss
++;

147 
wb_miss
++;

150 if(
is_miss
)

156 if(!
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
()%
th»s_upd©e_š‹r
)

158 
	`Adju¡Mig¿‹Th»s
();

160 
	`CyşeCommªdQueues
();

161 
MemÜyCÚŒŞËr
::
	`Cyşe
(
¡•s
);

162 
	}
}

164 
	gRBLA_MašMemÜy
::
	$Upd©eStsTabË
()

169 if(
tmp_blk
 = 
¡©sT
->
	`FšdEÁry
(
row_num
))

171 
¡©sT
->
	`InüeMissTime
Ğ
tmp_blk
 , 
wr™e_šüe
);

172 
¡©s_bË_h™
++;

176 
tmp_blk
 = 
¡©sT
->
	`FšdViùim
Ğ
’Œy_id
 );

178 
¡©sT
->
	`In¡®l
(
tmp_blk
 , 
row_num
);

179 
¡©s_bË_miss
++;

181 
	}
}

184 
	gRBLA_MašMemÜy
::
	$Adju¡Mig¿‹Th»s
()

186 
Ãt_b’ef™
 = 
	`C®cuÏ‹B’ef™
();

187 ifĞ
Ãt_b’ef™
 < 0 )

188 
mig¿_th»s
++;

189 ifĞ
Ãt_b’ef™
 >ğ
´e_Ãt_b’ef™
 )

191 ifĞ
´e_aùiÚ
 =ğ
Inüem’t
)

192 
mig¿_th»s
++;

194 
mig¿_th»s
--;

198 if(
´e_aùiÚ
==
Inüem’t
)

200 
mig¿_th»
--;

201 
´e_aùiÚ
=
Deüem’t
;

205 
mig¿_th»s
++;

206 
´e_aùiÚ
=
Inüem’t
;

209 
´e_Ãt_b’ef™
 = 
Ãt_b’ef™
;

210 
	}
}

212 
	gRBLA_MašMemÜy
::
	$C®cuÏ‹B’ef™
()

214 
co¡
=0 , 
b’ef™
=0;

215 ifĞ
num_mig¿s
)

216 
co¡
 = 
num_mig¿s
*
t_mig¿
;

217 if(
num_»ad
||
num_wr™e
)

218 
b’ef™
 = 
num_»ad
*Ğ
d¿mt_rd_miss
 - 
nvmt_rd_miss
 )+
	`num_wr™e
(
d¿mt_wb_miss
-
nvmt_wb_miss
);

220  
b’ef™
-
co¡
;

221 
	}
}

224 
	gRBLA_MašMemÜy
::
	$Regi¡”Sts
()

226 
	`AddSt
Ğ
rowbufãr_h™s
);

227 
	`AddSt
Ğ
rowbufãr_miss
);

228 
	`AddSt
Ğ
wb_h™s
);

229 
	`AddSt
Ğ
rb_h™s
);

231 
	`AddSt
Ğ
wb_miss
);

232 
	`AddSt
Ğ
rb_miss
);

233 
	`AddSt
Ğ
¡©s_bË_miss
);

234 
	`AddSt
Ğ
¡©s_bË_h™s
);

235 
	`AddSt
Ğ
¡©s_bË_h™¿‹
);

236 
	`AddSt
Ğ
rowbufãr_h™¿‹
);

237 
	}
}

239 
	gRBLA_MašMemÜy
::
	$C®cuÏ‹Sts
()

241 
¡©s_bË_h™¿‹
=
¡©ic_ÿ¡
<>(
¡©s_bË_h™s
)/¡©ic_ÿ¡<>(¡©s_bË_h™ + 
¡©s_bË_miss
);

242 
rowbufãr_h™¿‹
 = 
¡©ic_ÿ¡
<>(
rowbufãr_h™s
)/¡©ic_ÿ¡<>Ôowbufãr_h™s+
rowbufãr_miss
);

243 
	}
}

	@MemControl/RBLA-MEM/RBLA_MainMemory.h

7 #iâdeà
__RBLA_MAIN_MEMORY_HH__


8 
	#__RBLA_MAIN_MEMORY_HH__


	)

10 
	~"¤c/MemÜyCÚŒŞËr.h
"

11 
	~"šşude/CommÚH—d”s.h
"

12 
	~"šşude/NVMašReque¡.h
"

13 
	~"MemCÚŒŞ/StsStÜe.h
"

14 
	~"MemCÚŒŞ/MemÜyCÚŒŞËrFaùÜy.h
"

15 
	~<memÜy
>

16 
Çm¥aû
 
	gNVM


18 şas 
	cRBLA_MašMemÜy
 : 
public
 
MemÜyCÚŒŞËr


20 
public
:

21 
RBLA_MašMemÜy
();

23 
S‘CÚfig
(
CÚfig
* 
cÚf
 , 
boŞ
 
C»©eChd»n
=
Œue
);

25 
boŞ
 
IssueCommªd
Ğ
NVMašReque¡
* 
»q
);

26 
boŞ
 
Reque¡Com¶‘e
Ğ
NVMašReque¡
* 
»q
);

27 
Cyşe
Ğ
ušt64_t
 
¡•s
=1);

30 
Regi¡”Sts
();

31 
C®cuÏ‹Sts
();

32 
	g´iv©e
:

33 
Adju¡Mig¿‹Th»s
();

34 
C®cuÏ‹B’ef™
();

36 
	g´iv©e
:

37 
ušt64_t
 
cyşe_¡•
 ;

38 
ušt64_t
 
	g¡©s_¡Üe_’Œy
;

41 
	g¡d
::
auto_±r
<
StsStÜe
> 
¡©T
;

42 cÚ¡ 
	g¡d
::
auto_±r
<
Ab¡¿ùDRAMCache
> 
d¿m_ÿche
;

45 
ušt64_t
 
	gwr™e_šüe
 , 
	g»ad_šüe
;

46 
ušt64_t
 
	gwr™e_queue_size
 ,
	g»ad_queue_size
,
	g¡¬v©iÚ_th»shŞd
;

47 
ušt64_t
 
	gwr™e_queue_id
 , 
	g»ad_queue_id
;

49 
ušt64_t
 
	gth»s_upd©e_š‹rv®
;

50 
ušt64_t
 
	gmig¿_time
 , 
	gmig¿_th»s
;

51 
	g´e_Ãt_b’ef™
;

52 
P»AùiÚ
 
	g´e_aùiÚ
;

54 
ušt64_t
 
	gt_d¿m_miss
 , 
	gt_d¿m_h™
;

55 
ušt64_t
 
	gt_pcm_dœty_miss
 , 
	gt_pcm_ş—n_miss
;

58 
ušt64_t
 
	growbufãr_h™s
, 
	growbufãr_miss
 , 
	gwb_h™s
 , 
	grb_h™s
 , 
	gwb_miss
 , 
	grb_miss
;

59 
	growbufãr_h™¿‹
;

60 
ušt64_t
 
	g¡©s_bË_h™s
 , 
	g¡©s_bË_miss
;

61 
	g¡©s_bË_h™¿‹
;

	@MemControl/RBLA-MEM/StatsStore.hh

7 #iâdef 
__STATS_STORE_HH__


8 
	#__STATS_STORE_HH__


	)

10 
	~"šşude/CommÚH—d”s.h
"

11 
	~"šşude/NVMAdd»ss.h
"

12 
	~"šşude/CacheS‘.hh
"

13 
	~"šşude/StsStÜeBlock.hh
"

14 
	~"šşude/Exû±iÚs.h
"

15 
Çm¥aû
 
	gNVM
{

16 şas 
	cStsStÜe


18 
	g´iv©e
:

19 
ušt64_t
 
G‘RowAdd»ss
Ğ
NVMAdd»ss
* 
addr
);

20 
ušt64_t
 
	g’Œy_num
 , 
	gwr™e_šüe
 , 
	g»ad_šüe
;

21 
	gCacheS‘
<
	gStsStÜeBlock
>* 
	g¡©s_bË
;

22 
StsStÜeBlock
* 
	gblk
;

23 
	gpublic
:

24 
StsStÜe
Ğ
ušt64_t
 
’Œy_num
 , ušt64_ˆ
wr™e_šüe
 , ušt64_ˆ
»ad_šüe
)

26 ifĞ
	g’Œy_num
 <= 0 )

27 
NVM
::
F©®
("stats storeableƒntry‚um must†argerhan 0");

28 
	gthis
->
	g’Œy_num
 = 
’Œy_num
;

29 ifĞ
	gwr™e_šü
 <= 0 )

30 
NVM
::
F©®
("row buffer write miss , stats store's missime increasement must†argerhan 1 ");

31 
	gthis
->
	gwr™e_šüe
 = 
wr™e_šüe
;

33 ifĞ
	g»ad_šü
 <=0 )

34 
NVM
::
F©®
("row buffer„ead miss , stats store's missime increasement must†argerhan 1 ");

35 
	gthis
->
	g»ad_šüe
 = 
»ad_šüe
;

38 
	g¡©s_bË
 = 
Ãw
 
CacheS‘
<
StsStÜeBlock
>();

39 
	gblk
 = 
Ãw
 
StsStÜeBlock
[
’Œy_num
];

40 
	g¡©s_bË
->
	gÿcheS‘
 = 
Ãw
 
StsStÜeBlock
* [
’Œy_num
];

42  
	gi
=0; i<
	g’Œy_num
 ; i++)

44 
	g¡©s_bË
->
	gÿcheS‘
[
i
] = &
blk
[i];

50 ~
StsStÜe
()

52 ifĞ
	g¡©s_bË
)

54 
d–‘e
 
	g¡©s_bË
;

55 
	g¡©s_bË
 = 
NULL
;

58 ifĞ
	gblk
)

60 
d–‘e
 
	gblk
;

61 
	gblk
 = 
NULL
;

65 
StsStÜeBlock
* 
FšdEÁry
Ğ
ušt64_t
 
row_id
 )

68 
	gi
=0 ; i<
	g’Œy_num
;i++)

70 ifĞ(
	g¡©s_bË
->
	gÿcheS‘
[
i
]->
	grow_id
=ğ
row_id
)&&Ğ
¡©s_bË
->
ÿcheS‘
[i]->
IsV®id
()))

72  
¡©s_bË
->
ÿcheS‘
[
i
];

75  
	gNULL
;

79 
StsStÜeBlock
* 
FšdViùim
(
ušt64_t
& 
’Œy_id
)

81  
	gi
=0 ; i<
	g’Œy_num
;i++)

83 ifĞ!
	g¡©s_bË
->
	gÿcheS‘
[
i
]->
IsV®id
())

85 
	g’Œy_id
 = 
i
;

86  
	g¡©s_¡Üe
->
	gÿcheS‘
[
i
];

89 
	g’Œy_id
 = 
’Œy_num
-1;

90  
	g¡©s_¡Üe
->
	gÿcheS‘
[
’Œy_id
];

94 
Eviù
(
StsStÜe
* 
viùim
)

96 
	gviùim
->
	gmiss_time
 = 0;

97 
	gviùim
->
	grow_id
 = 0;

98 
	gviùim
->
	g¡©us
 = 0;

101 
boŞ
 
In¡®l
Ğ
StsStÜe
* 
š¡®l_block
 , 
ušt64_t
 
row_id
 )

103 
	gš¡®l_block
->
	grow_id
 = 
row_id
;

104 
	gš¡®l_block
->
S‘V®id
();

108 
InüeMissTime
(
StsStÜe
* 
rg‘
 , 
ušt64_t
 
¡•s
 )

110 if(
	grg‘
)

112 
	grg‘
->
	gmiss_time
 +ğ
¡•s
;

117 
DeüeMissTime
(
StsStÜe
* 
rg‘
 , 
ušt64_t
 
¡•s
 )

119 if(
	grg‘
)

121 
	grg‘
->
	gmiss_time
 -ğ
¡•s
;

	@NVM/bk/nvmain.cpp

34 
	~"nvmaš.h
"

35 
	~"¤c/CÚfig.h
"

36 
	~"¤c/Add»ssT¿n¦©Ü.h
"

37 
	~"¤c/IÁ”cÚÃù.h
"

38 
	~"¤c/SimIÁ”çû.h
"

39 
	~"¤c/Ev’tQueue.h
"

40 
	~"IÁ”cÚÃù/IÁ”cÚÃùFaùÜy.h
"

41 
	~"MemCÚŒŞ/MemÜyCÚŒŞËrFaùÜy.h
"

42 
	~"ŒaûWr™”/T¿ûWr™”FaùÜy.h
"

43 
	~"Decod”s/Decod”FaùÜy.h
"

44 
	~"Uts/HookFaùÜy.h
"

45 
	~"šşude/NVMašReque¡.h
"

46 
	~"šşude/NVMH–³rs.h
"

47 
	~"P»ãtch”s/P»ãtch”FaùÜy.h
"

49 
	~<s¡»am
>

50 
	~<ÿs£¹
>

52 
usšg
 
Çme¥aû
 
	gNVM
;

54 
	gNVMaš
::
	$NVMaš
( )

56 
cÚfig
 = 
NULL
;

57 
Œª¦©Ü
 = 
NULL
;

58 
memÜyCÚŒŞËrs
 = 
NULL
;

59 
chªÃlCÚfig
 = 
NULL
;

60 
syncV®ue
 = 0.0f;

61 
´eT¿ûr
 = 
NULL
;

63 
tÙ®R—dReque¡s
 = 0;

64 
tÙ®Wr™eReque¡s
 = 0;

66 
´eãtch”
 = 
NULL
;

67 
sucûssfulP»ãtches
 = 0;

68 
unsucûssfulP»ãtches
 = 0;

69 
	}
}

71 
	gNVMaš
::~
	$NVMaš
( )

73 ifĞ
cÚfig
 )

74 
d–‘e
 
cÚfig
;

76 ifĞ
memÜyCÚŒŞËrs
 )

78  
i
 = 0; i < 
numChªÃls
; i++ )

80 ifĞ
memÜyCÚŒŞËrs
[
i
] )

81 
d–‘e
 
memÜyCÚŒŞËrs
[
i
];

84 
d–‘e
 [] 
memÜyCÚŒŞËrs
;

87 ifĞ
Œª¦©Ü
 )

88 
d–‘e
 
Œª¦©Ü
;

90 ifĞ
chªÃlCÚfig
 )

92  
i
 = 0; i < 
numChªÃls
; i++ )

94 
d–‘e
 
chªÃlCÚfig
[
i
];

97 
d–‘e
 [] 
chªÃlCÚfig
;

99 
	}
}

101 
CÚfig
 *
	gNVMaš
::
	$G‘CÚfig
( )

103  
cÚfig
;

104 
	}
}

106 
	gNVMaš
::
S‘CÚfig
Ğ
CÚfig
 *
cÚf
, 
¡d
::
¡ršg
 
memÜyName
, 
boŞ
 
ü—‹Chd»n
 )

108 
T¿n¦©iÚM‘hod
 *
	gm‘hod
;

109 
	gchªÃls
, 
	g¿nks
, 
	gbªks
, 
	grows
, 
	gcŞs
, 
	gsub¬¿ys
;

111 
P¬ams
 *
	g·¿ms
 = 
Ãw
 Params( );

112 
	g·¿ms
->
S‘P¬ams
Ğ
cÚf
 );

113 
S‘P¬ams
Ğ
·¿ms
 );

115 
StName
Ğ
memÜyName
 );

117 
	gcÚfig
 = 
cÚf
;

118 ifĞ
	gcÚfig
->
G‘SimIÁ”çû
Ğè!ğ
NULL
 )

119 
cÚfig
->
G‘SimIÁ”çû
Ğ)->
S‘CÚfig
Ğ
cÚf
, 
ü—‹Chd»n
 );

121 
	g¡d
::
cout
 << "W¬nšg: Sim IÁ”çû should b®loÿ‹d befÜcÚfigu¿tiÚ!" << 
¡d
::
’dl
;

124 ifĞ
	gü—‹Chd»n
 )

126 ifĞ
	gcÚf
->
KeyExi¡s
( "MATHeight" ) )

128 
	grows
 = 
¡©ic_ÿ¡
<>(
p
->
MATHeight
);

129 
	gsub¬¿ys
 = 
¡©ic_ÿ¡
<>Ğ
p
->
ROWS
 /…->
MATHeight
 );

133 
	grows
 = 
¡©ic_ÿ¡
<>(
p
->
ROWS
);

134 
	gsub¬¿ys
 = 1;

136 
	gcŞs
 = 
¡©ic_ÿ¡
<>(
p
->
COLS
);

137 
	gbªks
 = 
¡©ic_ÿ¡
<>(
p
->
BANKS
);

138 
	g¿nks
 = 
¡©ic_ÿ¡
<>(
p
->
RANKS
);

139 
	gchªÃls
 = 
¡©ic_ÿ¡
<>(
p
->
CHANNELS
);

141 ifĞ
	gcÚfig
->
KeyExi¡s
( "Decoder" ) )

142 
	gŒª¦©Ü
 = 
Decod”FaùÜy
::
C»©eNewDecod”
Ğ
cÚfig
->
G‘SŒšg
( "Decoder" ) );

144 
	gŒª¦©Ü
 = 
Ãw
 
Add»ssT¿n¦©Ü
( );

146 
	gm‘hod
 = 
Ãw
 
T¿n¦©iÚM‘hod
( );

148 
	gm‘hod
->
S‘B™Widths
Ğ
NVM
::
mlog2
Ğ
rows
 ),

149 
NVM
::
mlog2
Ğ
cŞs
 ),

150 
NVM
::
mlog2
Ğ
bªks
 ),

151 
NVM
::
mlog2
Ğ
¿nks
 ),

152 
NVM
::
mlog2
Ğ
chªÃls
 ),

153 
NVM
::
mlog2
Ğ
sub¬¿ys
 )

155 
	gm‘hod
->
S‘CouÁ
Ğ
rows
, 
cŞs
, 
bªks
, 
¿nks
, 
chªÃls
, 
sub¬¿ys
 );

156 
	gm‘hod
->
S‘Add»ssM­pšgScheme
Ğ
p
->
Add»ssM­pšgScheme
 );

157 
	gŒª¦©Ü
->
S‘CÚfig
Ğ
cÚfig
, 
ü—‹Chd»n
 );

158 
	gŒª¦©Ü
->
S‘T¿n¦©iÚM‘hod
Ğ
m‘hod
 );

159 
	gŒª¦©Ü
->
S‘DeçuÉF›ld
Ğ
CHANNEL_FIELD
 );

161 
S‘Decod”
Ğ
Œª¦©Ü
 );

163 
	gmemÜyCÚŒŞËrs
 = 
Ãw
 
MemÜyCÚŒŞËr
* [
chªÃls
];

164 
	gchªÃlCÚfig
 = 
Ãw
 
CÚfig
* [
chªÃls
];

165  
	gi
 = 0; i < 
	gchªÃls
; i++ )

167 
	g¡d
::
¡ršg¡»am
 
cÚfSŒšg
;

168 
	g¡d
::
¡ršg
 
chªÃlCÚfigFe
;

170 
	gchªÃlCÚfig
[
i
] = 
Ãw
 
CÚfig
Ğ*
cÚfig
 );

172 
	gchªÃlCÚfig
[
i
]->
S‘SimIÁ”çû
Ğ
cÚfig
->
G‘SimIÁ”çû
( ) );

174 
	gcÚfSŒšg
 << "CONFIG_CHANNEL" << 
	gi
;

176 ifĞ
	gcÚfig
->
G‘SŒšg
Ğ
cÚfSŒšg
.
¡r
( ) ) != "" )

178 
chªÃlCÚfigFe
 = 
cÚfig
->
G‘SŒšg
Ğ
cÚfSŒšg
.
¡r
( ) );

180 ifĞ
	gchªÃlCÚfigFe
[0] != '/' )

182 
chªÃlCÚfigFe
 = 
NVM
::
G‘FeP©h
Ğ
cÚfig
->
G‘FeName
( ) );

183 
	gchªÃlCÚfigFe
 +ğ
cÚfig
->
G‘SŒšg
Ğ
cÚfSŒšg
.
¡r
( ) );

186 
	g¡d
::
cout
 << "R—dšg chªÃÈcÚfig fe: " << 
chªÃlCÚfigFe
 << 
¡d
::
’dl
;

188 
	gchªÃlCÚfig
[
i
]->
R—d
Ğ
chªÃlCÚfigFe
 );

192 
	gmemÜyCÚŒŞËrs
[
i
] =

193 
MemÜyCÚŒŞËrFaùÜy
::
C»©eNewCÚŒŞËr
Ğ
chªÃlCÚfig
[
i
]->
G‘SŒšg
( "MEM_CTL" ) );

197 
	gcÚfSŒšg
.
¡r
( "" );

198 
	gcÚfSŒšg
 << 
	gmemÜyName
 << ".chªÃl" << 
	gi
 << "."

199 << 
	gchªÃlCÚfig
[
i
]->
G‘SŒšg
( "MEM_CTL" );

200 
	gmemÜyCÚŒŞËrs
[
i
]->
StName
Ğ
cÚfSŒšg
.
¡r
( ) );

201 
	gmemÜyCÚŒŞËrs
[
i
]->
S‘ID
( i );

203 
AddChd
Ğ
memÜyCÚŒŞËrs
[
i
] );

204 
	gmemÜyCÚŒŞËrs
[
i
]->
S‘P¬’t
Ğ
this
 );

207 
	gmemÜyCÚŒŞËrs
[
i
]->
S‘CÚfig
Ğ
chªÃlCÚfig
[i], 
ü—‹Chd»n
 );

210 
	gmemÜyCÚŒŞËrs
[
i
]->
Regi¡”Sts
( );

215 ifĞ
	gp
->
	gMemÜyP»ãtch”
 != "none" )

217 
´eãtch”
 = 
P»ãtch”FaùÜy
::
C»©eNewP»ãtch”
Ğ
p
->
MemÜyP»ãtch”
 );

218 
	g¡d
::
cout
 << "Mad¨" << 
p
->
MemÜyP»ãtch”
 << "…»ãtch”." << 
¡d
::
’dl
;

221 
	gnumChªÃls
 = 
¡©ic_ÿ¡
<>(
p
->
CHANNELS
);

223 
	g¡d
::
¡ršg
 
´‘¿ûFe
;

225 ifĞ
	gp
->
	gPrštP»T¿û
 ||…->
	gEchoP»T¿û
 )

227 ifĞ
	gcÚfig
->
G‘SŒšg
( "PreTraceFile" ) == "" )

228 
´‘¿ûFe
 = "trace.nvt";

230 
	g´‘¿ûFe
 = 
cÚfig
->
G‘SŒšg
( "PreTraceFile" );

232 ifĞ
	g´‘¿ûFe
[0] != '/' )

234 
´‘¿ûFe
 = 
NVM
::
G‘FeP©h
Ğ
cÚfig
->
G‘FeName
( ) );

235 
	g´‘¿ûFe
 +ğ
cÚfig
->
G‘SŒšg
( "PreTraceFile" );

238 
	g¡d
::
cout
 << "Usšg¿û f" << 
´‘¿ûFe
 << 
¡d
::
’dl
;

240 ifĞ
	gcÚfig
->
G‘SŒšg
( "PreTraceWriter" ) == "" )

241 
´eT¿ûr
 = 
T¿ûWr™”FaùÜy
::
C»©eNewT¿ûWr™”
( "NVMainTrace" );

243 
	g´eT¿ûr
 = 
T¿ûWr™”FaùÜy
::
C»©eNewT¿ûWr™”
Ğ
cÚfig
->
G‘SŒšg
( "PreTraceWriter" ) );

245 ifĞ
	gp
->
	gPrštP»T¿û
 )

246 
	g´eT¿ûr
->
S‘T¿ûFe
Ğ
´‘¿ûFe
 );

247 ifĞ
	gp
->
	gEchoP»T¿û
 )

248 
	g´eT¿ûr
->
S‘Echo
Ğ
Œue
 );

251 
Regi¡”Sts
( );

254 
boŞ
 
	gNVMaš
::
	$IsIssuabË
Ğ
NVMašReque¡
 *
»que¡
, 
FaR—sÚ
 *
»asÚ
 )

256 
ušt64_t
 
chªÃl
, 
¿nk
, 
bªk
, 
row
, 
cŞ
, 
sub¬¿y
;

257 
boŞ
 
rv
;

259 
	`as£¹
Ğ
»que¡
 !ğ
NULL
 );

261 
	`G‘Decod”
Ğ)->
	`T¿n¦©e
Ğ
»que¡
->
add»ss
.
	`G‘PhysiÿlAdd»ss
( ),

262 &
row
, &
cŞ
, &
¿nk
, &
bªk
, &
chªÃl
, &
sub¬¿y
 );

264 
rv
 = 
memÜyCÚŒŞËrs
[
chªÃl
]->
	`IsIssuabË
Ğ
»que¡
, 
»asÚ
 );

266  
rv
;

267 
	}
}

269 
	gNVMaš
::
G’”©eP»ãtches
Ğ
NVMašReque¡
 *
»que¡
, 
¡d
::
veùÜ
<
NVMAdd»ss
>& 
´eãtchLi¡
 )

271 
¡d
::
veùÜ
<
NVMAdd»ss
>::
™”©Ü
 
™”
;

272 
ncouÁ”_t
 
	gchªÃl
, 
	g¿nk
, 
	gbªk
, 
	grow
, 
	gcŞ
, 
	gsub¬¿y
;

274  
	g™”
 = 
´eãtchLi¡
.
begš
(); i‹¸!ğ´eãtchLi¡.
’d
(); iter++ )

277 
NVMašReque¡
 *
	gpfReque¡
 = 
Ãw
 NVMainRequest( );

278 *
	gpfReque¡
 = *
»que¡
;

279 
	gpfReque¡
->
	gadd»ss
 = (*
™”
);

280 
	gpfReque¡
->
	gisP»ãtch
 = 
Œue
;

281 
	gpfReque¡
->
	gowÃr
 = 
this
;

284 
G‘Decod”
Ğ)->
T¿n¦©e
Ğ
»que¡
->
add»ss
.
G‘PhysiÿlAdd»ss
( ),

285 &
row
, &
cŞ
, &
bªk
, &
¿nk
, &
chªÃl
, &
sub¬¿y
 );

286 
	g»que¡
->
	gadd»ss
.
S‘T¿n¦©edAdd»ss
Ğ
row
, 
cŞ
, 
bªk
, 
¿nk
, 
chªÃl
, 
sub¬¿y
 );

287 
	g»que¡
->
	gbulkCmd
 = 
CMD_NOP
;

293 
G‘Chd
Ğ
pfReque¡
 )->
IssueCommªd
(…fRequest );

297 
	gNVMaš
::
	$IssueP»ãtch
Ğ
NVMašReque¡
 *
»que¡
 )

306 
¡d
::
veùÜ
<
NVMAdd»ss
> 
´eãtchLi¡
;

307 ifĞ
´eãtch”
 && 
»que¡
->
ty³
 =ğ
READ
 &&„eque¡->
isP»ãtch
 =ğ
çl£


308 && 
´eãtch”
->
	`DoP»ãtch
(
»que¡
, 
´eãtchLi¡
) )

310 
	`G’”©eP»ãtches
Ğ
»que¡
, 
´eãtchLi¡
 );

312 
	}
}

314 
boŞ
 
	gNVMaš
::
	$CheckP»ãtch
Ğ
NVMašReque¡
 *
»que¡
 )

316 
boŞ
 
rv
 = 
çl£
;

317 
NVMašReque¡
 *
pfReque¡
 = 
NULL
;

318 
¡d
::
li¡
<
NVMašReque¡
 *>::
cÚ¡_™”©Ü
 
™”
;

319 
¡d
::
veùÜ
<
NVMAdd»ss
> 
´eãtchLi¡
;

321  
™”
 = 
´eãtchBufãr
.
	`begš
(); i‹r!ğ´eãtchBufãr.
	`’d
(); iter++ )

323 ifĞ(*
™”
)->
add»ss
.
	`G‘PhysiÿlAdd»ss
(è=ğ
»que¡
->address.GetPhysicalAddress() )

325 ifĞ
´eãtch”
->
	`NÙifyAcûss
(
»que¡
, 
´eãtchLi¡
) )

327 
	`G’”©eP»ãtches
Ğ
»que¡
, 
´eãtchLi¡
 );

330 
sucûssfulP»ãtches
++;

331 
rv
 = 
Œue
;

332 
pfReque¡
 = (*
™”
);

333 
d–‘e
 
pfReque¡
;

338 ifĞ
pfReque¡
 !ğ
NULL
 )

342 
´eãtchBufãr
.
	`»move
Ğ
pfReque¡
 );

346  
rv
;

347 
	}
}

349 
	gNVMaš
::
	$PrštP»T¿û
Ğ
NVMašReque¡
 *
»que¡
 )

354 ifĞ
p
->
PrštP»T¿û
 ||…->
EchoP»T¿û
 )

356 
T¿ûLše
 

;

358 

.
	`S‘Lše
Ğ
»que¡
->
add»ss
,

359 
»que¡
->
ty³
,

360 
	`G‘Ev’tQueue
Ğ)->
	`G‘Cu¼’tCyşe
( ),

361 
»que¡
->
d©a
,

362 
»que¡
->
th»adId


365 
´eT¿ûr
->
	`S‘NextAcûss
Ğ&

 );

367 
	}
}

369 
boŞ
 
	gNVMaš
::
	$IssueCommªd
Ğ
NVMašReque¡
 *
»que¡
 )

371 
ncouÁ”_t
 
chªÃl
, 
¿nk
, 
bªk
, 
row
, 
cŞ
, 
sub¬¿y
;

372 
boŞ
 
mc_rv
;

374 ifĞ!
cÚfig
 )

376 
¡d
::
cout
 << "NVMain: Received„equest before configuration!\n";

377  
çl£
;

381 
	`G‘Decod”
Ğ)->
	`T¿n¦©e
Ğ
»que¡
->
add»ss
.
	`G‘PhysiÿlAdd»ss
( ),

382 &
row
, &
cŞ
, &
bªk
, &
¿nk
, &
chªÃl
, &
sub¬¿y
 );

383 
»que¡
->
add»ss
.
	`S‘T¿n¦©edAdd»ss
Ğ
row
, 
cŞ
, 
bªk
, 
¿nk
, 
chªÃl
, 
sub¬¿y
 );

384 
»que¡
->
bulkCmd
 = 
CMD_NOP
;

387 ifĞ
	`CheckP»ãtch
Ğ
»que¡
 ) )

389 
	`G‘Ev’tQueue
()->
	`In£¹Ev’t
Ğ
Ev’tRe¥Ú£
, 
this
, 
»que¡
,

390 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
() + 1 );

392  
Œue
;

395 
	`as£¹
Ğ
	`G‘Chd
Ğ
»que¡
 )->
	`G‘T¿mpŞše
Ğè=ğ
memÜyCÚŒŞËrs
[
chªÃl
] );

396 
mc_rv
 = 
	`G‘Chd
Ğ
»que¡
 )->
	`IssueCommªd
(„equest );

397 ifĞ
mc_rv
 =ğ
Œue
 )

399 
	`IssueP»ãtch
Ğ
»que¡
 );

401 ifĞ
»que¡
->
ty³
 =ğ
READ
 )

403 
tÙ®R—dReque¡s
++;

407 
tÙ®Wr™eReque¡s
++;

410 
	`PrštP»T¿û
Ğ
»que¡
 );

413  
mc_rv
;

414 
	}
}

416 
boŞ
 
	gNVMaš
::
	$IssueAtomic
Ğ
NVMašReque¡
 *
»que¡
 )

418 
ncouÁ”_t
 
chªÃl
, 
¿nk
, 
bªk
, 
row
, 
cŞ
, 
sub¬¿y
;

419 
boŞ
 
mc_rv
;

421 ifĞ!
cÚfig
 )

423 
¡d
::
cout
 << "NVMain: Received„equest before configuration!\n";

424  
çl£
;

428 
	`G‘Decod”
Ğ)->
	`T¿n¦©e
Ğ
»que¡
->
add»ss
.
	`G‘PhysiÿlAdd»ss
( ),

429 &
row
, &
cŞ
, &
bªk
, &
¿nk
, &
chªÃl
, &
sub¬¿y
 );

430 
»que¡
->
add»ss
.
	`S‘T¿n¦©edAdd»ss
Ğ
row
, 
cŞ
, 
bªk
, 
¿nk
, 
chªÃl
, 
sub¬¿y
 );

431 
»que¡
->
bulkCmd
 = 
CMD_NOP
;

434 ifĞ
	`CheckP»ãtch
Ğ
»que¡
 ) )

436  
Œue
;

439 
mc_rv
 = 
memÜyCÚŒŞËrs
[
chªÃl
]->
	`IssueAtomic
Ğ
»que¡
 );

440 ifĞ
mc_rv
 =ğ
Œue
 )

442 
	`IssueP»ãtch
Ğ
»que¡
 );

444 ifĞ
»que¡
->
ty³
 =ğ
READ
 )

446 
tÙ®R—dReque¡s
++;

450 
tÙ®Wr™eReque¡s
++;

453 
	`PrštP»T¿û
Ğ
»que¡
 );

456  
mc_rv
;

457 
	}
}

459 
boŞ
 
	gNVMaš
::
	$Reque¡Com¶‘e
Ğ
NVMašReque¡
 *
»que¡
 )

461 
boŞ
 
rv
 = 
çl£
;

463 ifĞ
»que¡
->
owÃr
 =ğ
this
 )

465 ifĞ
»que¡
->
isP»ãtch
 )

472 ifĞ
´eãtchBufãr
.
	`size
(è>ğ
p
->
P»ãtchBufãrSize
 )

474 
unsucûssfulP»ãtches
++;

479 
d–‘e
 
´eãtchBufãr
.
	`äÚt
();

480 
´eãtchBufãr
.
	`pİ_äÚt
();

483 
´eãtchBufãr
.
	`push_back
Ğ
»que¡
 );

484 
rv
 = 
Œue
;

488 
d–‘e
 
»que¡
;

489 
rv
 = 
Œue
;

494 
rv
 = 
	`G‘P¬’t
Ğ)->
	`Reque¡Com¶‘e
Ğ
»que¡
 );

497  
rv
;

498 
	}
}

500 
	gNVMaš
::
	$Cyşe
Ğ
ncyşe_t
 
¡•s
 )

502 
	`as£¹
Ğ!
p
->
Ev’tDriv’
 );

507 ifĞ!
cÚfig
 || !
memÜyCÚŒŞËrs
 )

511 
ıuF»q
 = 
¡©ic_ÿ¡
<>(
p
->
CPUF»q
);

512 
busF»q
 = 
¡©ic_ÿ¡
<>(
p
->
CLK
);

514 
syncV®ue
 +ğ
¡©ic_ÿ¡
<>Ğ
busF»q
 / 
ıuF»q
 );

516 ifĞ
syncV®ue
 >= 1.0f )

518 
syncV®ue
 -= 1.0f;

525  
i
 = 0; i < 
numChªÃls
; i++ )

527 
memÜyCÚŒŞËrs
[
i
]->
	`Cyşe
( 1 );

530 
	`G‘Ev’tQueue
()->
	`Loİ
Ğ
¡•s
 );

531 
	}
}

533 
	gNVMaš
::
	$Regi¡”Sts
( )

535 
	`AddSt
(
tÙ®R—dReque¡s
);

536 
	`AddSt
(
tÙ®Wr™eReque¡s
);

537 
	`AddSt
(
sucûssfulP»ãtches
);

538 
	`AddSt
(
unsucûssfulP»ãtches
);

539 
	}
}

541 
	gNVMaš
::
	$C®cuÏ‹Sts
( )

543  
i
 = 0; i < 
numChªÃls
; i++ )

544 
memÜyCÚŒŞËrs
[
i
]->
	`C®cuÏ‹Sts
( );

545 
	}
}

	@NVM/bk/nvmain.h

34 #iâdeà
__NVMAIN_H__


35 
	#__NVMAIN_H__


	)

37 
	~<io¡»am
>

38 
	~<f¡»am
>

39 
	~<¡dšt.h
>

40 
	~"¤c/P¬ams.h
"

41 
	~"¤c/NVMObjeù.h
"

42 
	~"¤c/P»ãtch”.h
"

43 
	~"šşude/NVMašReque¡.h
"

44 
	~"ŒaûWr™”/G’”icT¿ûWr™”.h
"

46 
Çme¥aû
 
	gNVM
 {

48 
şass
 
	gCÚfig
;

49 
şass
 
	gMemÜyCÚŒŞËr
;

50 
şass
 
	gMemÜyCÚŒŞËrMªag”
;

51 
şass
 
	gIÁ”cÚÃù
;

52 
şass
 
	gAdd»ssT¿n¦©Ü
;

53 
şass
 
	gSimIÁ”çû
;

54 
şass
 
	gNVMašReque¡
;

56 şas 
	cNVMaš
 : 
public
 
NVMObjeù


58 
public
:

59 
NVMaš
( );

60 ~
NVMaš
( );

62 
S‘CÚfig
Ğ
CÚfig
 *
cÚf
, 
¡d
::
¡ršg
 
memÜyName
 = "deçuÉMemÜy", 
boŞ
 
ü—‹Chd»n
 = 
Œue
 );

64 
CÚfig
 *
G‘CÚfig
( );

66 
IssueP»ãtch
Ğ
NVMašReque¡
 *
»que¡
 );

67 
boŞ
 
IssueCommªd
Ğ
NVMašReque¡
 *
»que¡
 );

68 
boŞ
 
IssueAtomic
Ğ
NVMašReque¡
 *
»que¡
 );

69 
boŞ
 
IsIssuabË
Ğ
NVMašReque¡
 *
»que¡
, 
FaR—sÚ
 *
»asÚ
 );

71 
boŞ
 
Reque¡Com¶‘e
Ğ
NVMašReque¡
 *
»que¡
 );

73 
boŞ
 
CheckP»ãtch
Ğ
NVMašReque¡
 *
»que¡
 );

75 
Regi¡”Sts
( );

76 
C®cuÏ‹Sts
( );

78 
Cyşe
Ğ
ncyşe_t
 
¡•s
 );

80 
	g´iv©e
:

81 
CÚfig
 *
cÚfig
;

82 
CÚfig
 **
	gchªÃlCÚfig
;

83 
MemÜyCÚŒŞËr
 **
	gmemÜyCÚŒŞËrs
;

84 
Add»ssT¿n¦©Ü
 *
	gŒª¦©Ü
;

85 
SimIÁ”çû
 *
	gsimIÁ”çû
;

87 
ncouÁ”_t
 
	gtÙ®R—dReque¡s
;

88 
ncouÁ”_t
 
	gtÙ®Wr™eReque¡s
;

89 
ncouÁ”_t
 
	gsucûssfulP»ãtches
;

90 
ncouÁ”_t
 
	gunsucûssfulP»ãtches
;

92 
	gnumChªÃls
;

93 
	gsyncV®ue
;

95 
P»ãtch”
 *
	g´eãtch”
;

96 
	g¡d
::
li¡
<
NVMašReque¡
 *> 
´eãtchBufãr
;

98 
	g¡d
::
of¡»am
 
´‘¿ûOuut
;

99 
G’”icT¿ûWr™”
 *
	g´eT¿ûr
;

101 
PrštP»T¿û
Ğ
NVMašReque¡
 *
»que¡
 );

102 
G’”©eP»ãtches
Ğ
NVMašReque¡
 *
»que¡
, 
¡d
::
veùÜ
<
NVMAdd»ss
>& 
´eãtchLi¡
 );

	@NVM/nvmain.cpp

34 
	~"nvmaš.h
"

35 
	~"¤c/CÚfig.h
"

36 
	~"¤c/Add»ssT¿n¦©Ü.h
"

37 
	~"¤c/IÁ”cÚÃù.h
"

38 
	~"¤c/SimIÁ”çû.h
"

39 
	~"¤c/Ev’tQueue.h
"

40 
	~"IÁ”cÚÃù/IÁ”cÚÃùFaùÜy.h
"

41 
	~"MemCÚŒŞ/MemÜyCÚŒŞËrFaùÜy.h
"

42 
	~"ŒaûWr™”/T¿ûWr™”FaùÜy.h
"

43 
	~"Decod”s/Decod”FaùÜy.h
"

44 
	~"Uts/HookFaùÜy.h
"

45 
	~"šşude/NVMašReque¡.h
"

46 
	~"šşude/NVMH–³rs.h
"

47 
	~"P»ãtch”s/P»ãtch”FaùÜy.h
"

49 
	~<s¡»am
>

50 
	~<ÿs£¹
>

52 
usšg
 
Çme¥aû
 
	gNVM
;

54 
	gNVMaš
::
	$NVMaš
( )

56 
cÚfig
 = 
NULL
;

57 
Œª¦©Ü
 = 
NULL
;

58 
memÜyCÚŒŞËrs
 = 
NULL
;

59 
chªÃlCÚfig
 = 
NULL
;

60 
syncV®ue
 = 0.0f;

61 
´eT¿ûr
 = 
NULL
;

63 
tÙ®R—dReque¡s
 = 0;

64 
tÙ®Wr™eReque¡s
 = 0;

66 
´eãtch”
 = 
NULL
;

67 
sucûssfulP»ãtches
 = 0;

68 
unsucûssfulP»ãtches
 = 0;

69 
	}
}

71 
	gNVMaš
::~
	$NVMaš
( )

73 ifĞ
cÚfig
 )

74 
d–‘e
 
cÚfig
;

76 ifĞ
memÜyCÚŒŞËrs
 )

78  
i
 = 0; i < 
numChªÃls
; i++ )

80 ifĞ
memÜyCÚŒŞËrs
[
i
] )

81 
d–‘e
 
memÜyCÚŒŞËrs
[
i
];

84 
d–‘e
 [] 
memÜyCÚŒŞËrs
;

87 ifĞ
Œª¦©Ü
 )

88 
d–‘e
 
Œª¦©Ü
;

90 ifĞ
chªÃlCÚfig
 )

92  
i
 = 0; i < 
numChªÃls
; i++ )

94 
d–‘e
 
chªÃlCÚfig
[
i
];

97 
d–‘e
 [] 
chªÃlCÚfig
;

99 
	}
}

101 
CÚfig
 *
	gNVMaš
::
	$G‘CÚfig
( )

103  
cÚfig
;

104 
	}
}

106 
	gNVMaš
::
S‘CÚfig
Ğ
CÚfig
 *
cÚf
, 
¡d
::
¡ršg
 
memÜyName
, 
boŞ
 
ü—‹Chd»n
 )

108 
T¿n¦©iÚM‘hod
 *
	gm‘hod
;

109 
	gchªÃls
, 
	g¿nks
, 
	gbªks
, 
	grows
, 
	gcŞs
, 
	gsub¬¿ys
;

111 
P¬ams
 *
	g·¿ms
 = 
Ãw
 Params( );

112 
	g·¿ms
->
S‘P¬ams
Ğ
cÚf
 );

113 
S‘P¬ams
Ğ
·¿ms
 );

115 
StName
Ğ
memÜyName
 );

117 
	gcÚfig
 = 
cÚf
;

118 ifĞ
	gcÚfig
->
G‘SimIÁ”çû
Ğè!ğ
NULL
 )

119 
cÚfig
->
G‘SimIÁ”çû
Ğ)->
S‘CÚfig
Ğ
cÚf
, 
ü—‹Chd»n
 );

121 
	g¡d
::
cout
 << "W¬nšg: Sim IÁ”çû should b®loÿ‹d befÜcÚfigu¿tiÚ!" << 
¡d
::
’dl
;

124 ifĞ
	gü—‹Chd»n
 )

126 ifĞ
	gcÚf
->
KeyExi¡s
( "MATHeight" ) )

128 
	grows
 = 
¡©ic_ÿ¡
<>(
p
->
MATHeight
);

129 
	gsub¬¿ys
 = 
¡©ic_ÿ¡
<>Ğ
p
->
ROWS
 /…->
MATHeight
 );

133 
	grows
 = 
¡©ic_ÿ¡
<>(
p
->
ROWS
);

134 
	gsub¬¿ys
 = 1;

136 
	gcŞs
 = 
¡©ic_ÿ¡
<>(
p
->
COLS
);

137 
	gbªks
 = 
¡©ic_ÿ¡
<>(
p
->
BANKS
);

138 
	g¿nks
 = 
¡©ic_ÿ¡
<>(
p
->
RANKS
);

139 
	gchªÃls
 = 
¡©ic_ÿ¡
<>(
p
->
CHANNELS
);

141 ifĞ
	gcÚfig
->
KeyExi¡s
( "Decoder" ) )

142 
	gŒª¦©Ü
 = 
Decod”FaùÜy
::
C»©eNewDecod”
Ğ
cÚfig
->
G‘SŒšg
( "Decoder" ) );

144 
	gŒª¦©Ü
 = 
Ãw
 
Add»ssT¿n¦©Ü
( );

146 
	gm‘hod
 = 
Ãw
 
T¿n¦©iÚM‘hod
( );

148 
	gm‘hod
->
S‘B™Widths
Ğ
NVM
::
mlog2
Ğ
rows
 ),

149 
NVM
::
mlog2
Ğ
cŞs
 ),

150 
NVM
::
mlog2
Ğ
bªks
 ),

151 
NVM
::
mlog2
Ğ
¿nks
 ),

152 
NVM
::
mlog2
Ğ
chªÃls
 ),

153 
NVM
::
mlog2
Ğ
sub¬¿ys
 )

155 
	gm‘hod
->
S‘CouÁ
Ğ
rows
, 
cŞs
, 
bªks
, 
¿nks
, 
chªÃls
, 
sub¬¿ys
 );

156 
	gm‘hod
->
S‘Add»ssM­pšgScheme
Ğ
p
->
Add»ssM­pšgScheme
 );

157 
	gŒª¦©Ü
->
S‘CÚfig
Ğ
cÚfig
, 
ü—‹Chd»n
 );

158 
	gŒª¦©Ü
->
S‘T¿n¦©iÚM‘hod
Ğ
m‘hod
 );

159 
	gŒª¦©Ü
->
S‘DeçuÉF›ld
Ğ
CHANNEL_FIELD
 );

161 
S‘Decod”
Ğ
Œª¦©Ü
 );

163 
	gmemÜyCÚŒŞËrs
 = 
Ãw
 
MemÜyCÚŒŞËr
* [
chªÃls
];

164 
	gchªÃlCÚfig
 = 
Ãw
 
CÚfig
* [
chªÃls
];

165  
	gi
 = 0; i < 
	gchªÃls
; i++ )

167 
	g¡d
::
¡ršg¡»am
 
cÚfSŒšg
;

168 
	g¡d
::
¡ršg
 
chªÃlCÚfigFe
;

170 
	gchªÃlCÚfig
[
i
] = 
Ãw
 
CÚfig
Ğ*
cÚfig
 );

172 
	gchªÃlCÚfig
[
i
]->
S‘SimIÁ”çû
Ğ
cÚfig
->
G‘SimIÁ”çû
( ) );

174 
	gcÚfSŒšg
 << "CONFIG_CHANNEL" << 
	gi
;

176 ifĞ
	gcÚfig
->
G‘SŒšg
Ğ
cÚfSŒšg
.
¡r
( ) ) != "" )

178 
chªÃlCÚfigFe
 = 
cÚfig
->
G‘SŒšg
Ğ
cÚfSŒšg
.
¡r
( ) );

180 ifĞ
	gchªÃlCÚfigFe
[0] != '/' )

182 
chªÃlCÚfigFe
 = 
NVM
::
G‘FeP©h
Ğ
cÚfig
->
G‘FeName
( ) );

183 
	gchªÃlCÚfigFe
 +ğ
cÚfig
->
G‘SŒšg
Ğ
cÚfSŒšg
.
¡r
( ) );

186 
	g¡d
::
cout
 << "R—dšg chªÃÈcÚfig fe: " << 
chªÃlCÚfigFe
 << 
¡d
::
’dl
;

188 
	gchªÃlCÚfig
[
i
]->
R—d
Ğ
chªÃlCÚfigFe
 );

192 
	gmemÜyCÚŒŞËrs
[
i
] =

193 
MemÜyCÚŒŞËrFaùÜy
::
C»©eNewCÚŒŞËr
Ğ
chªÃlCÚfig
[
i
]->
G‘SŒšg
( "MEM_CTL" ) );

197 
	gcÚfSŒšg
.
¡r
( "" );

198 
	gcÚfSŒšg
 << 
	gmemÜyName
 << ".chªÃl" << 
	gi
 << "."

199 << 
	gchªÃlCÚfig
[
i
]->
G‘SŒšg
( "MEM_CTL" );

200 
	gmemÜyCÚŒŞËrs
[
i
]->
StName
Ğ
cÚfSŒšg
.
¡r
( ) );

201 
	gmemÜyCÚŒŞËrs
[
i
]->
S‘ID
( i );

203 
AddChd
Ğ
memÜyCÚŒŞËrs
[
i
] );

204 
	gmemÜyCÚŒŞËrs
[
i
]->
S‘P¬’t
Ğ
this
 );

207 
	gmemÜyCÚŒŞËrs
[
i
]->
S‘CÚfig
Ğ
chªÃlCÚfig
[i], 
ü—‹Chd»n
 );

210 
	gmemÜyCÚŒŞËrs
[
i
]->
Regi¡”Sts
( );

215 ifĞ
	gp
->
	gMemÜyP»ãtch”
 != "none" )

217 
´eãtch”
 = 
P»ãtch”FaùÜy
::
C»©eNewP»ãtch”
Ğ
p
->
MemÜyP»ãtch”
 );

218 
	g¡d
::
cout
 << "Mad¨" << 
p
->
MemÜyP»ãtch”
 << "…»ãtch”." << 
¡d
::
’dl
;

221 
	gnumChªÃls
 = 
¡©ic_ÿ¡
<>(
p
->
CHANNELS
);

223 
	g¡d
::
¡ršg
 
´‘¿ûFe
;

225 ifĞ
	gp
->
	gPrštP»T¿û
 ||…->
	gEchoP»T¿û
 )

227 ifĞ
	gcÚfig
->
G‘SŒšg
( "PreTraceFile" ) == "" )

228 
´‘¿ûFe
 = "trace.nvt";

230 
	g´‘¿ûFe
 = 
cÚfig
->
G‘SŒšg
( "PreTraceFile" );

232 ifĞ
	g´‘¿ûFe
[0] != '/' )

234 
´‘¿ûFe
 = 
NVM
::
G‘FeP©h
Ğ
cÚfig
->
G‘FeName
( ) );

235 
	g´‘¿ûFe
 +ğ
cÚfig
->
G‘SŒšg
( "PreTraceFile" );

238 
	g¡d
::
cout
 << "Usšg¿û f" << 
´‘¿ûFe
 << 
¡d
::
’dl
;

240 ifĞ
	gcÚfig
->
G‘SŒšg
( "PreTraceWriter" ) == "" )

241 
´eT¿ûr
 = 
T¿ûWr™”FaùÜy
::
C»©eNewT¿ûWr™”
( "NVMainTrace" );

243 
	g´eT¿ûr
 = 
T¿ûWr™”FaùÜy
::
C»©eNewT¿ûWr™”
Ğ
cÚfig
->
G‘SŒšg
( "PreTraceWriter" ) );

245 ifĞ
	gp
->
	gPrštP»T¿û
 )

246 
	g´eT¿ûr
->
S‘T¿ûFe
Ğ
´‘¿ûFe
 );

247 ifĞ
	gp
->
	gEchoP»T¿û
 )

248 
	g´eT¿ûr
->
S‘Echo
Ğ
Œue
 );

251 
Regi¡”Sts
( );

254 
boŞ
 
	gNVMaš
::
	$IsIssuabË
Ğ
NVMašReque¡
 *
»que¡
, 
FaR—sÚ
 *
»asÚ
 )

256 
ušt64_t
 
chªÃl
, 
¿nk
, 
bªk
, 
row
, 
cŞ
, 
sub¬¿y
;

257 
boŞ
 
rv
;

259 
	`as£¹
Ğ
»que¡
 !ğ
NULL
 );

261 
	`G‘Decod”
Ğ)->
	`T¿n¦©e
Ğ
»que¡
->
add»ss
.
	`G‘PhysiÿlAdd»ss
( ),

262 &
row
, &
cŞ
, &
¿nk
, &
bªk
, &
chªÃl
, &
sub¬¿y
 );

264 
rv
 = 
memÜyCÚŒŞËrs
[
chªÃl
]->
	`IsIssuabË
Ğ
»que¡
, 
»asÚ
 );

266  
rv
;

267 
	}
}

269 
	gNVMaš
::
G’”©eP»ãtches
Ğ
NVMašReque¡
 *
»que¡
, 
¡d
::
veùÜ
<
NVMAdd»ss
>& 
´eãtchLi¡
 )

271 
¡d
::
veùÜ
<
NVMAdd»ss
>::
™”©Ü
 
™”
;

272 
ncouÁ”_t
 
	gchªÃl
, 
	g¿nk
, 
	gbªk
, 
	grow
, 
	gcŞ
, 
	gsub¬¿y
;

274  
	g™”
 = 
´eãtchLi¡
.
begš
(); i‹¸!ğ´eãtchLi¡.
’d
(); iter++ )

277 
NVMašReque¡
 *
	gpfReque¡
 = 
Ãw
 NVMainRequest( );

278 *
	gpfReque¡
 = *
»que¡
;

279 
	gpfReque¡
->
	gadd»ss
 = (*
™”
);

280 
	gpfReque¡
->
	gisP»ãtch
 = 
Œue
;

281 
	gpfReque¡
->
	gowÃr
 = 
this
;

284 
G‘Decod”
Ğ)->
T¿n¦©e
Ğ
»que¡
->
add»ss
.
G‘PhysiÿlAdd»ss
( ),

285 &
row
, &
cŞ
, &
bªk
, &
¿nk
, &
chªÃl
, &
sub¬¿y
 );

286 
	g»que¡
->
	gadd»ss
.
S‘T¿n¦©edAdd»ss
Ğ
row
, 
cŞ
, 
bªk
, 
¿nk
, 
chªÃl
, 
sub¬¿y
 );

287 
	g»que¡
->
	gbulkCmd
 = 
CMD_NOP
;

293 
G‘Chd
Ğ
pfReque¡
 )->
IssueCommªd
(…fRequest );

297 
	gNVMaš
::
	$IssueP»ãtch
Ğ
NVMašReque¡
 *
»que¡
 )

306 
¡d
::
veùÜ
<
NVMAdd»ss
> 
´eãtchLi¡
;

307 ifĞ
´eãtch”
 && 
»que¡
->
ty³
 =ğ
READ
 &&„eque¡->
isP»ãtch
 =ğ
çl£


308 && 
´eãtch”
->
	`DoP»ãtch
(
»que¡
, 
´eãtchLi¡
) )

310 
	`G’”©eP»ãtches
Ğ
»que¡
, 
´eãtchLi¡
 );

312 
	}
}

314 
boŞ
 
	gNVMaš
::
	$CheckP»ãtch
Ğ
NVMašReque¡
 *
»que¡
 )

316 
boŞ
 
rv
 = 
çl£
;

317 
NVMašReque¡
 *
pfReque¡
 = 
NULL
;

318 
¡d
::
li¡
<
NVMašReque¡
 *>::
cÚ¡_™”©Ü
 
™”
;

319 
¡d
::
veùÜ
<
NVMAdd»ss
> 
´eãtchLi¡
;

321  
™”
 = 
´eãtchBufãr
.
	`begš
(); i‹r!ğ´eãtchBufãr.
	`’d
(); iter++ )

323 ifĞ(*
™”
)->
add»ss
.
	`G‘PhysiÿlAdd»ss
(è=ğ
»que¡
->address.GetPhysicalAddress() )

325 ifĞ
´eãtch”
->
	`NÙifyAcûss
(
»que¡
, 
´eãtchLi¡
) )

327 
	`G’”©eP»ãtches
Ğ
»que¡
, 
´eãtchLi¡
 );

330 
sucûssfulP»ãtches
++;

331 
rv
 = 
Œue
;

332 
pfReque¡
 = (*
™”
);

333 
d–‘e
 
pfReque¡
;

338 ifĞ
pfReque¡
 !ğ
NULL
 )

342 
´eãtchBufãr
.
	`»move
Ğ
pfReque¡
 );

346  
rv
;

347 
	}
}

349 
	gNVMaš
::
	$PrštP»T¿û
Ğ
NVMašReque¡
 *
»que¡
 )

354 ifĞ
p
->
PrštP»T¿û
 ||…->
EchoP»T¿û
 )

356 
T¿ûLše
 

;

358 

.
	`S‘Lše
Ğ
»que¡
->
add»ss
,

359 
»que¡
->
ty³
,

360 
	`G‘Ev’tQueue
Ğ)->
	`G‘Cu¼’tCyşe
( ),

361 
»que¡
->
d©a
,

362 
»que¡
->
th»adId


365 
´eT¿ûr
->
	`S‘NextAcûss
Ğ&

 );

367 
	}
}

369 
boŞ
 
	gNVMaš
::
	$IssueCommªd
Ğ
NVMašReque¡
 *
»que¡
 )

371 
ncouÁ”_t
 
chªÃl
, 
¿nk
, 
bªk
, 
row
, 
cŞ
, 
sub¬¿y
;

372 
boŞ
 
mc_rv
;

374 ifĞ!
cÚfig
 )

376 
¡d
::
cout
 << "NVMain: Received„equest before configuration!\n";

377  
çl£
;

381 
	`G‘Decod”
Ğ)->
	`T¿n¦©e
Ğ
»que¡
->
add»ss
.
	`G‘PhysiÿlAdd»ss
( ),

382 &
row
, &
cŞ
, &
bªk
, &
¿nk
, &
chªÃl
, &
sub¬¿y
 );

383 
»que¡
->
add»ss
.
	`S‘T¿n¦©edAdd»ss
Ğ
row
, 
cŞ
, 
bªk
, 
¿nk
, 
chªÃl
, 
sub¬¿y
 );

384 
»que¡
->
bulkCmd
 = 
CMD_NOP
;

387 ifĞ
	`CheckP»ãtch
Ğ
»que¡
 ) )

389 
	`G‘Ev’tQueue
()->
	`In£¹Ev’t
Ğ
Ev’tRe¥Ú£
, 
this
, 
»que¡
,

390 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
() + 1 );

392  
Œue
;

395 
	`as£¹
Ğ
	`G‘Chd
Ğ
»que¡
 )->
	`G‘T¿mpŞše
Ğè=ğ
memÜyCÚŒŞËrs
[
chªÃl
] );

396 
mc_rv
 = 
	`G‘Chd
Ğ
»que¡
 )->
	`IssueCommªd
(„equest );

397 ifĞ
mc_rv
 =ğ
Œue
 )

399 
	`IssueP»ãtch
Ğ
»que¡
 );

401 ifĞ
»que¡
->
ty³
 =ğ
READ
 )

403 
tÙ®R—dReque¡s
++;

407 
tÙ®Wr™eReque¡s
++;

410 
	`PrštP»T¿û
Ğ
»que¡
 );

413  
mc_rv
;

414 
	}
}

416 
boŞ
 
	gNVMaš
::
	$IssueAtomic
Ğ
NVMašReque¡
 *
»que¡
 )

418 
ncouÁ”_t
 
chªÃl
, 
¿nk
, 
bªk
, 
row
, 
cŞ
, 
sub¬¿y
;

419 
boŞ
 
mc_rv
;

421 ifĞ!
cÚfig
 )

423 
¡d
::
cout
 << "NVMain: Received„equest before configuration!\n";

424  
çl£
;

428 
	`G‘Decod”
Ğ)->
	`T¿n¦©e
Ğ
»que¡
->
add»ss
.
	`G‘PhysiÿlAdd»ss
( ),

429 &
row
, &
cŞ
, &
bªk
, &
¿nk
, &
chªÃl
, &
sub¬¿y
 );

430 
»que¡
->
add»ss
.
	`S‘T¿n¦©edAdd»ss
Ğ
row
, 
cŞ
, 
bªk
, 
¿nk
, 
chªÃl
, 
sub¬¿y
 );

431 
»que¡
->
bulkCmd
 = 
CMD_NOP
;

434 ifĞ
	`CheckP»ãtch
Ğ
»que¡
 ) )

436  
Œue
;

439 
mc_rv
 = 
memÜyCÚŒŞËrs
[
chªÃl
]->
	`IssueAtomic
Ğ
»que¡
 );

440 ifĞ
mc_rv
 =ğ
Œue
 )

442 
	`IssueP»ãtch
Ğ
»que¡
 );

444 ifĞ
»que¡
->
ty³
 =ğ
READ
 )

446 
tÙ®R—dReque¡s
++;

450 
tÙ®Wr™eReque¡s
++;

453 
	`PrštP»T¿û
Ğ
»que¡
 );

456  
mc_rv
;

457 
	}
}

459 
boŞ
 
	gNVMaš
::
	$Reque¡Com¶‘e
Ğ
NVMašReque¡
 *
»que¡
 )

461 
boŞ
 
rv
 = 
çl£
;

463 ifĞ
»que¡
->
owÃr
 =ğ
this
 )

465 ifĞ
»que¡
->
isP»ãtch
 )

472 ifĞ
´eãtchBufãr
.
	`size
(è>ğ
p
->
P»ãtchBufãrSize
 )

474 
unsucûssfulP»ãtches
++;

479 
d–‘e
 
´eãtchBufãr
.
	`äÚt
();

480 
´eãtchBufãr
.
	`pİ_äÚt
();

483 
´eãtchBufãr
.
	`push_back
Ğ
»que¡
 );

484 
rv
 = 
Œue
;

488 
d–‘e
 
»que¡
;

489 
rv
 = 
Œue
;

494 
rv
 = 
	`G‘P¬’t
Ğ)->
	`Reque¡Com¶‘e
Ğ
»que¡
 );

497  
rv
;

498 
	}
}

500 
	gNVMaš
::
	$Cyşe
Ğ
ncyşe_t
 
¡•s
 )

502 
	`as£¹
Ğ!
p
->
Ev’tDriv’
 );

507 ifĞ!
cÚfig
 || !
memÜyCÚŒŞËrs
 )

511 
ıuF»q
 = 
¡©ic_ÿ¡
<>(
p
->
CPUF»q
);

512 
busF»q
 = 
¡©ic_ÿ¡
<>(
p
->
CLK
);

514 
syncV®ue
 +ğ
¡©ic_ÿ¡
<>Ğ
busF»q
 / 
ıuF»q
 );

516 ifĞ
syncV®ue
 >= 1.0f )

518 
syncV®ue
 -= 1.0f;

525  
i
 = 0; i < 
numChªÃls
; i++ )

527 
memÜyCÚŒŞËrs
[
i
]->
	`Cyşe
( 1 );

530 
	`G‘Ev’tQueue
()->
	`Loİ
Ğ
¡•s
 );

531 
	}
}

533 
	gNVMaš
::
	$Regi¡”Sts
( )

535 
	`AddSt
(
tÙ®R—dReque¡s
);

536 
	`AddSt
(
tÙ®Wr™eReque¡s
);

537 
	`AddSt
(
sucûssfulP»ãtches
);

538 
	`AddSt
(
unsucûssfulP»ãtches
);

539 
	}
}

541 
	gNVMaš
::
	$C®cuÏ‹Sts
( )

543  
i
 = 0; i < 
numChªÃls
; i++ )

544 
memÜyCÚŒŞËrs
[
i
]->
	`C®cuÏ‹Sts
( );

545 
	}
}

	@NVM/nvmain.h

34 #iâdeà
__NVMAIN_H__


35 
	#__NVMAIN_H__


	)

37 
	~<io¡»am
>

38 
	~<f¡»am
>

39 
	~<¡dšt.h
>

40 
	~"¤c/P¬ams.h
"

41 
	~"¤c/NVMObjeù.h
"

42 
	~"¤c/P»ãtch”.h
"

43 
	~"šşude/NVMašReque¡.h
"

44 
	~"ŒaûWr™”/G’”icT¿ûWr™”.h
"

46 
Çme¥aû
 
	gNVM
 {

48 
şass
 
	gCÚfig
;

49 
şass
 
	gMemÜyCÚŒŞËr
;

50 
şass
 
	gMemÜyCÚŒŞËrMªag”
;

51 
şass
 
	gIÁ”cÚÃù
;

52 
şass
 
	gAdd»ssT¿n¦©Ü
;

53 
şass
 
	gSimIÁ”çû
;

54 
şass
 
	gNVMašReque¡
;

56 şas 
	cNVMaš
 : 
public
 
NVMObjeù


58 
public
:

59 
NVMaš
( );

60 ~
NVMaš
( );

62 
S‘CÚfig
Ğ
CÚfig
 *
cÚf
, 
¡d
::
¡ršg
 
memÜyName
 = "deçuÉMemÜy", 
boŞ
 
ü—‹Chd»n
 = 
Œue
 );

64 
CÚfig
 *
G‘CÚfig
( );

66 
IssueP»ãtch
Ğ
NVMašReque¡
 *
»que¡
 );

67 
boŞ
 
IssueCommªd
Ğ
NVMašReque¡
 *
»que¡
 );

68 
boŞ
 
IssueAtomic
Ğ
NVMašReque¡
 *
»que¡
 );

69 
boŞ
 
IsIssuabË
Ğ
NVMašReque¡
 *
»que¡
, 
FaR—sÚ
 *
»asÚ
 );

71 
boŞ
 
Reque¡Com¶‘e
Ğ
NVMašReque¡
 *
»que¡
 );

73 
boŞ
 
CheckP»ãtch
Ğ
NVMašReque¡
 *
»que¡
 );

75 
Regi¡”Sts
( );

76 
C®cuÏ‹Sts
( );

78 
Cyşe
Ğ
ncyşe_t
 
¡•s
 );

80 
	g´iv©e
:

81 
CÚfig
 *
cÚfig
;

82 
CÚfig
 **
	gchªÃlCÚfig
;

83 
MemÜyCÚŒŞËr
 **
	gmemÜyCÚŒŞËrs
;

84 
Add»ssT¿n¦©Ü
 *
	gŒª¦©Ü
;

85 
SimIÁ”çû
 *
	gsimIÁ”çû
;

87 
ncouÁ”_t
 
	gtÙ®R—dReque¡s
;

88 
ncouÁ”_t
 
	gtÙ®Wr™eReque¡s
;

89 
ncouÁ”_t
 
	gsucûssfulP»ãtches
;

90 
ncouÁ”_t
 
	gunsucûssfulP»ãtches
;

92 
	gnumChªÃls
;

93 
	gsyncV®ue
;

95 
P»ãtch”
 *
	g´eãtch”
;

96 
	g¡d
::
li¡
<
NVMašReque¡
 *> 
´eãtchBufãr
;

98 
	g¡d
::
of¡»am
 
´‘¿ûOuut
;

99 
G’”icT¿ûWr™”
 *
	g´eT¿ûr
;

101 
PrštP»T¿û
Ğ
NVMašReque¡
 *
»que¡
 );

102 
G’”©eP»ãtches
Ğ
NVMašReque¡
 *
»que¡
, 
¡d
::
veùÜ
<
NVMAdd»ss
>& 
´eãtchLi¡
 );

	@Prefetchers/NaivePrefetcher/NaivePrefetcher.cpp

34 
	~"P»ãtch”s/NaiveP»ãtch”/NaiveP»ãtch”.h
"

36 
usšg
 
Çme¥aû
 
	gNVM
;

38 
boŞ
 
	gNaiveP»ãtch”
::
DoP»ãtch
Ğ
NVMašReque¡
 *
Œigg”Op
,

39 
¡d
::
veùÜ
<
NVMAdd»ss
>& 
´eãtchLi¡
 )

41 
NVMAdd»ss
 
pfAddr
;

46  
	gi
 = 1; i < 4; i++ )

48 
	gpfAddr
 = 
Œigg”Op
->
add»ss
;

49 
	gpfAddr
.
S‘PhysiÿlAdd»ss
Ğ
Œigg”Op
->
add»ss
.
G‘PhysiÿlAdd»ss
Ğè+ 64*
i
 );

51 
	g´eãtchLi¡
.
push_back
Ğ
pfAddr
 );

54  
	gŒue
;

	@Prefetchers/NaivePrefetcher/NaivePrefetcher.h

34 #iâdeà
__PREFETCHERS_NAIVEPREFETCHER_H__


35 
	#__PREFETCHERS_NAIVEPREFETCHER_H__


	)

37 
	~"¤c/P»ãtch”.h
"

39 
Çme¥aû
 
	gNVM
 {

41 şas 
	cNaiveP»ãtch”
 : 
public
 
P»ãtch”


43 
public
:

44 
NaiveP»ãtch”
( ) { }

45 ~
NaiveP»ãtch”
( ) { }

47 
boŞ
 
DoP»ãtch
Ğ
NVMašReque¡
 *
Œigg”Op
,

48 
¡d
::
veùÜ
<
NVMAdd»ss
>& 
´eãtchLi¡
 );

	@Prefetchers/PrefetcherFactory.cpp

34 
	~"P»ãtch”s/P»ãtch”FaùÜy.h
"

35 
	~<io¡»am
>

38 
	~"P»ãtch”s/NaiveP»ãtch”/NaiveP»ãtch”.h
"

39 
	~"P»ãtch”s/STeMS/STeMS.h
"

41 
usšg
 
Çme¥aû
 
	gNVM
;

43 
P»ãtch”
 *
	gP»ãtch”FaùÜy
::
C»©eNewP»ãtch”
Ğ
¡d
::
¡ršg
 
Çme
 )

45 
P»ãtch”
 *
´eãtch”
 = 
NULL
;

48 ifĞ
	gÇme
 == "none" )

49  
NULL
;

51 ifĞ
	gÇme
 == "NaivePrefetcher" )

52 
´eãtch”
 = 
Ãw
 
NaiveP»ãtch”
( );

53 ifĞ
	gÇme
 == "STeMS" )

54 
´eãtch”
 = 
Ãw
 
STeMS
( );

59 ifĞ
	g´eãtch”
 =ğ
NULL
 )

61 
´eãtch”
 = 
Ãw
 
P»ãtch”
( );

63 
	g¡d
::
cout
 << "Could‚Ù fšd…»ãtch”‚amed `" << 
Çme


64 << "'. Usšg deçuÉ…»ãtch”." << 
¡d
::
’dl
;

67  
	g´eãtch”
;

	@Prefetchers/PrefetcherFactory.h

34 #iâdeà
__PREFETCHERFACTORY_H__


35 
	#__PREFETCHERFACTORY_H__


	)

37 
	~"¤c/P»ãtch”.h
"

38 
	~<¡ršg
>

40 
Çme¥aû
 
	gNVM
 {

42 şas 
	cP»ãtch”FaùÜy


44 
	gpublic
:

45 
P»ãtch”FaùÜy
( ) { }

46 ~
P»ãtch”FaùÜy
( ) { }

48 
P»ãtch”
 *
C»©eNewP»ãtch”
Ğ
¡d
::
¡ršg
 
Çme
 );

	@Prefetchers/STeMS/STeMS.cpp

34 
	~"P»ãtch”s/STeMS/STeMS.h
"

35 
	~<io¡»am
>

37 
usšg
 
Çme¥aû
 
	gNVM
;

39 
	gSTeMS
::
F‘chNextUnu£d
Ğ
P©‹ºSequ’û
 *
½s
, 
couÁ
,

40 
¡d
::
veùÜ
<
NVMAdd»ss
>& 
´eãtchLi¡
 )

42 
ušt64_t
 *
Ï¡Unu£d
 = 
Ãw
 ušt64_t[
couÁ
];

43 
boŞ
 *
	gfoundUnu£d
 = 
Ãw
 boŞ[
couÁ
];

45  
	gi
 = 0; i < 
	gcouÁ
; i++ )

47 
	gÏ¡Unu£d
[
i
] = 0;

48 
	gfoundUnu£d
[
i
] = 
çl£
;

52  
	gi
 = 
¡©ic_ÿ¡
<>(
½s
->
size
 - 1); i >= 0; i-- )

54 ifĞ!
	g½s
->
	gãtched
[
i
] )

56  
	gj
 = 0; j < 
	gcouÁ
 - 1; j++ )

58 
	gÏ¡Unu£d
[
j
] = 
Ï¡Unu£d
[j+1];

59 
	gfoundUnu£d
[
j
] = 
foundUnu£d
[j+1];

62 
	gÏ¡Unu£d
[
couÁ
-1] = 
½s
->
off£t
[
i
];

63 
	gfoundUnu£d
[
couÁ
-1] = 
Œue
;

71  
	gi
 = 0; i < 
	gcouÁ
; i++ )

73 ifĞ
	gfoundUnu£d
[
i
] )

75 
	g½s
->
	g¡¬‹dP»ãtch
 = 
Œue
;

77 #ifdeà
DBGPF


78 
	g¡d
::
cout
 << "P»ãtchšg 0x" << 
¡d
::
hex


79 << 
½s
->
add»ss
 + 
Ï¡Unu£d
[
i
] << 
¡d
::
dec
 << std::
’dl
;

82 
NVMAdd»ss
 
	gpfAddr
;

83 
	gpfAddr
.
S‘PhysiÿlAdd»ss
Ğ
½s
->
add»ss
 + 
Ï¡Unu£d
[
i
] );

84 
	g´eãtchLi¡
.
push_back
Ğ
pfAddr
 );

87  
ušt64_t
 
	gj
 = 0; j < 
	g½s
->
	gsize
; j++ )

89 ifĞ
	g½s
->
	goff£t
[
j
] =ğ
Ï¡Unu£d
[
i
] )

90 
½s
->
ãtched
[
j
] = 
Œue
;

96 
boŞ
 
	gSTeMS
::
NÙifyAcûss
Ğ
NVMašReque¡
 *
acûssOp
,

97 
¡d
::
veùÜ
<
NVMAdd»ss
>& 
´eãtchLi¡
 )

99 
boŞ
 
rv
 = 
çl£
;

106 ifĞ
	gRecÚBuf
.
couÁ
Ğ
acûssOp
->
´og¿mCouÁ”
 ) )

108 
P©‹ºSequ’û
 *
	g½s
 = 
RecÚBuf
[
acûssOp
->
´og¿mCouÁ”
];

109 
ušt64_t
 
	gadd»ss
 = 
acûssOp
->
add»ss
.
G‘PhysiÿlAdd»ss
( );

112 ifĞ!
	g½s
->
	g¡¬‹dP»ãtch
 )

113  
	gçl£
;

120 
boŞ
 
	gsucûssful
 = 
çl£
;

122  
ušt64_t
 
	gi
 = 0; i < 
	g½s
->
	gsize
; i++ )

124 ifĞ
	gadd»ss
 =ğĞ
½s
->
add»ss
 +„ps->
off£t
[
i
] ) )

126 ifĞ
½s
->
ãtched
[
i
] && !½s->
u£d
[i] )

129 
sucûssful
 = 
Œue
;

131 #ifdeà
DBGPF


132 
	g¡d
::
cout
 << "SucûssfuÈ´eãtch ! 0x" << 
¡d
::
hex
 << 
add»ss


133 << 
¡d
::
dec
 << std::
’dl
;

136 
F‘chNextUnu£d
Ğ
½s
, 4, 
´eãtchLi¡
 );

138 
	grv
 = 
Œue
;

140 
	g½s
->
	gu£d
[
i
] = 
Œue
;

145 ifĞ!
	gsucûssful
 )

150 
ušt64_t
 
	gnumSucûss
 = 0;

152  
ušt64_t
 
	gi
 = 0; i < 
	g½s
->
	gsize
; i++ )

154 ifĞ
	g½s
->
	gu£d
[
i
] ) 
	gnumSucûss
++;

157 ifĞ(()(
	gnumSucûss
è/ ()(
	g½s
->
	gsize
)) >= 0.6f )

159 
P©‹ºSequ’û
 *
ps
 = 
NULL
;

160 
	g¡d
::
m­
<
ušt64_t
, 
	gP©‹ºSequ’û
*>::
™”©Ü
 
™
;

162 
	g™
 = 
PST
.
fšd
Ğ
acûssOp
->
´og¿mCouÁ”
 );

163 ifĞ
	g™
 !ğ
PST
.
’d
( ) )

165 
ps
 = 
™
->
£cÚd
;

167 ifĞ
	gps
->
	gsize
 < 16 )

169 
	gps
->
	goff£t
[
ps
->
size
] = 
add»ss
 - 
½s
->address;

170 
	gps
->
	gd–
[
ps
->
size
] = 0;

171 
	gps
->
	gsize
++;

176 
	g¡d
::
m­
<
ušt64_t
, 
	gP©‹ºSequ’û
*>::
™”©Ü
 
™
;

177 
	g™
 = 
RecÚBuf
.
fšd
Ğ
acûssOp
->
´og¿mCouÁ”
 );

178 
	gRecÚBuf
.
”a£
Ğ
™
 );

182  
	grv
;

185 
boŞ
 
	gSTeMS
::
DoP»ãtch
Ğ
NVMašReque¡
 *
Œigg”Op
,

186 
¡d
::
veùÜ
<
NVMAdd»ss
>& 
´eãtchLi¡
 )

188 
NVMAdd»ss
 
pfAddr
;

191 ifĞ
	gPST
.
couÁ
Ğ
Œigg”Op
->
´og¿mCouÁ”
 ) )

193 
P©‹ºSequ’û
 *
	gps
 = 
PST
[
Œigg”Op
->
´og¿mCouÁ”
];

194 
ušt64_t
 
	gadd»ss
 = 
Œigg”Op
->
add»ss
.
G‘PhysiÿlAdd»ss
( );

195 
ušt64_t
 
	gpc
 = 
Œigg”Op
->
´og¿mCouÁ”
;

198 ifĞ
	gRecÚBuf
.
couÁ
Ğ
pc
 ) )

200 
P©‹ºSequ’û
 *
	g½s
 = 
RecÚBuf
[
pc
];

201 
ušt64_t
 
	gnumU£d
, 
	gnumF‘ched
;

203 
	gnumU£d
 = 
numF‘ched
 = 0;

206  
ušt64_t
 
	gi
 = 0; i < 
	g½s
->
	gsize
; i++ )

208 ifĞĞ
	g½s
->
	gadd»ss
 +„ps->
	goff£t
[
i
] ) =ğ
add»ss
 )

210 
½s
->
u£d
[
i
] =„ps->
ãtched
[i] = 
Œue
;

213 ifĞ
	g½s
->
	gu£d
[
i
] )

214 
	gnumU£d
++;

216 ifĞ
	g½s
->
	gãtched
[
i
] )

217 
	gnumF‘ched
++;

224 ifĞ
	gnumU£d
 >= 2 )

226 
F‘chNextUnu£d
Ğ
½s
, 4, 
´eãtchLi¡
 );

232 
P©‹ºSequ’û
 *
	g½s
 = 
Ãw
 PatternSequence;

233 
ušt64_t
 
	gpc
 = 
Œigg”Op
->
´og¿mCouÁ”
;

235 
	g½s
->
	gsize
 = 
ps
->
size
;

236 
	g½s
->
	gadd»ss
 = 
Œigg”Op
->
add»ss
.
G‘PhysiÿlAdd»ss
( );

238  
ušt64_t
 
	gi
 = 0; i < 
	gps
->
	gsize
; i++ )

240 
	g½s
->
	goff£t
[
i
] = 
ps
->
off£t
[i];

241 
	g½s
->
	gd–
[
i
] = 
ps
->
d–
[i];

242 
	g½s
->
	gu£d
[
i
] = 
çl£
;

243 
	g½s
->
	gãtched
[
i
] = 
çl£
;

245 
	g½s
->
	gu£CouÁ
 = 1;

246 
	g½s
->
	g¡¬‹dP»ãtch
 = 
çl£
;

252 
	g½s
->
	gu£d
[0] = 
½s
->
ãtched
[0] = 
Œue
;

254 
	gRecÚBuf
.
š£¹
Ğ
¡d
::
·œ
<
ušt64_t
, 
P©‹ºSequ’û
*>Ğ
pc
, 
½s
 ) );

257 #ifdeà
DBGPF


258 
	g¡d
::
cout
 << "Found‡ PSTƒÁry fÜ PC 0x" << 
¡d
::
hex


259 << 
Œigg”Op
->
´og¿mCouÁ”
 << 
¡d
::
dec
 << std::
’dl
;

261 
	g¡d
::
cout
 << "Trigg”ed by 0x" << 
¡d
::
hex


262 << 
Œigg”Op
->
add»ss
.
G‘PhysiÿlAdd»ss
Ğè<< 
¡d
::
dec


263 << 
¡d
::
’dl
;

265 
	g¡d
::
cout
 << "S¹‡dd»s 0x" << 
¡d
::
hex
 << 
ps
->
add»ss


266 << ": " << 
¡d
::
dec
;

268  
ušt64_t
 
	gi
 = 0; i < 
	gps
->
	gsize
; i++ )

270 
	g¡d
::
cout
 << "[" << 
ps
->
off£t
[
i
] << "," <<…s->
d–
[i] << "], ";

273 
	g¡d
::
cout
 << 
¡d
::
’dl
;

284 ifĞ
	gAGT
.
couÁ
Ğ
Œigg”Op
->
´og¿mCouÁ”
 ) )

286 
ušt64_t
 
	gadd»ss
 = 
Œigg”Op
->
add»ss
.
G‘PhysiÿlAdd»ss
( );

287 
ušt64_t
 
	gpc
 = 
Œigg”Op
->
´og¿mCouÁ”
;

288 
P©‹ºSequ’û
 *
	gps
 = 
AGT
[
pc
];

297 
ušt64_t
 
	gadd»ssDiff
;

299 
	gadd»ssDiff
 = ((
add»ss
 > 
ps
->address) ?

300 (
add»ss
 - 
ps
->address) : (ps->address -‡ddress));

302 ifĞĞ
	gadd»ssDiff
 / 64 ) < 256 )

304 
	gps
->
	goff£t
[
ps
->
size
] = 
add»ss
 -…s->address;

305 
	gps
->
	gd–
[
ps
->
size
] = 0;

306 
	gps
->
	gsize
++;

313 ifĞ
	gps
->
	gsize
 >= 8 )

315 
PST
.
š£¹
Ğ
¡d
::
·œ
<
ušt64_t
, 
P©‹ºSequ’û
*>Ğ
pc
, 
ps
 ) );

317 
	g¡d
::
m­
<
ušt64_t
, 
	gP©‹ºSequ’û
*>::
™”©Ü
 
™
;

318 
	g™
 = 
AGT
.
fšd
Ğ
pc
 );

319 
	gAGT
.
”a£
Ğ
™
 );

326 
P©‹ºSequ’û
 *
	gps
 = 
Ãw
 PatternSequence;

327 
ušt64_t
 
	gpc
 = 
Œigg”Op
->
´og¿mCouÁ”
;

329 
	gps
->
	gadd»ss
 = 
Œigg”Op
->
add»ss
.
G‘PhysiÿlAdd»ss
( );

330 
	gps
->
	gsize
 = 1;

331 
	gps
->
	goff£t
[0] = 0;

332 
	gps
->
	gd–
[0] = 0;

334 
	gAGT
.
š£¹
Ğ
¡d
::
·œ
<
ušt64_t
, 
P©‹ºSequ’û
*>Ğ
pc
, 
ps
 ) );

338  
	gçl£
;

	@Prefetchers/STeMS/STeMS.h

34 #iâdeà
__PREFETCHERS_STEMS_H__


35 
	#__PREFETCHERS_STEMS_H__


	)

37 
	~"¤c/P»ãtch”.h
"

38 
	~<m­
>

40 
Çme¥aû
 
	gNVM
 {

42 
	sP©‹ºSequ’û


44 
ušt64_t
 
	gsize
;

45 
ušt64_t
 
	gadd»ss
;

46 
ušt64_t
 
	goff£t
[16];

47 
ušt64_t
 
	gd–
[16];

48 
boŞ
 
	gãtched
[16];

49 
boŞ
 
	gu£d
[16];

50 
ušt64_t
 
	gu£CouÁ
;

51 
boŞ
 
	g¡¬‹dP»ãtch
;

60 şas 
	cSTeMS
 : 
public
 
P»ãtch”


62 
public
:

63 
STeMS
( ) { }

64 ~
STeMS
( ) { }

66 
boŞ
 
NÙifyAcûss
Ğ
NVMašReque¡
 *
acûssOp
,

67 
¡d
::
veùÜ
<
NVMAdd»ss
>& 
´eãtchLi¡
 );

69 
boŞ
 
DoP»ãtch
Ğ
NVMašReque¡
 *
Œigg”Op
,

70 
¡d
::
veùÜ
<
NVMAdd»ss
>& 
´eãtchLi¡
 );

72 
	g´iv©e
:

73 
¡d
::
m­
<
ušt64_t
, 
	gP©‹ºSequ’û
*> 
	gPST
;

74 
	g¡d
::
m­
<
ušt64_t
, 
	gP©‹ºSequ’û
*> 
	gAGT
;

75 
	g¡d
::
m­
<
ušt64_t
, 
	gP©‹ºSequ’û
*> 
	gRecÚBuf
;

77 
F‘chNextUnu£d
Ğ
P©‹ºSequ’û
 *
½s
, 
couÁ
,

78 
¡d
::
veùÜ
<
NVMAdd»ss
>& 
´eãtchLi¡
 );

	@Ranks/RankFactory.cpp

34 
	~"Rªks/RªkFaùÜy.h
"

35 
	~<io¡»am
>

38 
	~"Rªks/Snd¬dRªk/Snd¬dRªk.h
"

40 
usšg
 
Çme¥aû
 
	gNVM
;

42 
Rªk
 *
	gRªkFaùÜy
::
C»©eRªk
Ğ
¡d
::
¡ršg
 
¿nkName
 )

44 
Rªk
 *
¿nk
 = 
NULL
;

46 ifĞ
	g¿nkName
 =ğ"Snd¬dRªk" ) 
¿nk
 = 
Ãw
 
Snd¬dRªk
( );

49  
	g¿nk
;

52 
Rªk
 *
	gRªkFaùÜy
::
C»©eNewRªk
Ğ
¡d
::
¡ršg
 
¿nkName
 )

54 
Rªk
 *
¿nk
 = 
NULL
;

56 
	g¿nk
 = 
C»©eRªk
Ğ
¿nkName
 );

59 ifĞ
	g¿nk
 =ğ
NULL
 )

61 
¿nk
 = 
Ãw
 
Snd¬dRªk
( );

63 
	g¡d
::
cout
 << "Could‚Ù fšd Rªk‚amed `" << 
¿nkName


64 << "'. Usšg Snd¬dRªk." << 
¡d
::
’dl
;

67  
	g¿nk
;

70 
Rªk
 *
	gRªkFaùÜy
::
C»©eRªkNoW¬n
Ğ
¡d
::
¡ršg
 
¿nkName
 )

72 
Rªk
 *
¿nk
 = 
NULL
;

74 
	g¿nk
 = 
C»©eRªk
Ğ
¿nkName
 );

76 ifĞ
	g¿nk
 =ğ
NULL
 )

77 
¿nk
 = 
Ãw
 
Snd¬dRªk
( );

79  
	g¿nk
;

	@Ranks/RankFactory.h

34 #iâdeà
__RANKFACTORY_H__


35 
	#__RANKFACTORY_H__


	)

37 
	~"¤c/Rªk.h
"

38 
	~<¡ršg
>

40 
Çme¥aû
 
	gNVM
 {

42 şas 
	cRªkFaùÜy


44 
	gpublic
:

45 
RªkFaùÜy
( ) { }

46 ~
RªkFaùÜy
( ) { }

48 
Rªk
 *
C»©eNewRªk
Ğ
¡d
::
¡ršg
 
¿nkName
 );

49 
Rªk
 *
C»©eRªkNoW¬n
Ğ
¡d
::
¡ršg
 
¿nkName
 );

51 
	g´iv©e
:

52 
Rªk
 *
C»©eRªk
Ğ
¡d
::
¡ršg
 
¿nkName
 );

	@Ranks/StandardRank/StandardRank.cpp

36 
	~"Rªks/Snd¬dRªk/Snd¬dRªk.h
"

37 
	~"¤c/Ev’tQueue.h
"

38 
	~"Bªks/BªkFaùÜy.h
"

40 
	~<io¡»am
>

41 
	~<s¡»am
>

42 
	~<ÿs£¹
>

44 
usšg
 
Çme¥aû
 
	gNVM
;

46 
	g¡d
::
¡ršg
 
G‘FeP©h
Ğ
¡d
::¡ršg 
fe
 );

48 
	gSnd¬dRªk
::
	$Snd¬dRªk
( )

50 
aùiveCyşes
 = 0;

51 
¡ªdbyCyşes
 = 0;

52 
ç¡Ex™AùiveCyşes
 = 0;

53 
ç¡Ex™P»ch¬geCyşes
 = 0;

54 
¦owEx™Cyşes
 = 0;

56 
tÙ®EÃrgy
 = 0.0;

57 
backgroundEÃrgy
 = 0.0;

58 
aùiv©eEÃrgy
 = 0.0;

59 
bur¡EÃrgy
 = 0.0;

60 
»äeshEÃrgy
 = 0.0;

62 
tÙ®Pow”
 = 0.0;

63 
backgroundPow”
 = 0.0;

64 
aùiv©ePow”
 = 0.0;

65 
bur¡Pow”
 = 0.0;

66 
»äeshPow”
 = 0.0;

68 
»ads
 = 0;

69 
wr™es
 = 0;

71 
aùWa™s
 = 0;

72 
aùWa™TÙ®
 = 0;

73 
aùWa™Av”age
 = 0.0;

75 
¼dWa™s
 = 0;

76 
¼dWa™TÙ®
 = 0;

77 
¼dWa™Av”age
 = 0.0;

79 
çwWa™s
 = 0;

80 
çwWa™TÙ®
 = 0;

81 
çwWa™Av”age
 = 0.0;

83 
Ï¡Aùiv©e
 = 
NULL
;

84 
RAWšdex
 = 0;

86 
cÚf
 = 
NULL
;

88 
¡©e
 = 
STANDARDRANK_CLOSED
;

89 
backgroundEÃrgy
 = 0.0f;

91 
psIÁ”v®
 = 0;

92 
Ï¡Re£t
 = 0;

93 
	}
}

95 
	gSnd¬dRªk
::~
	$Snd¬dRªk
( )

97 
d–‘e
 [] 
Ï¡Aùiv©e
;

98 
	}
}

100 
	gSnd¬dRªk
::
	$S‘CÚfig
Ğ
CÚfig
 *
c
, 
boŞ
 
ü—‹Chd»n
 )

102 
cÚf
 = 
c
;

104 
P¬ams
 *
·¿ms
 = 
Ãw
 
	`P¬ams
( );

105 
·¿ms
->
	`S‘P¬ams
Ğ
c
 );

106 
	`S‘P¬ams
Ğ
·¿ms
 );

108 
deviûWidth
 = 
p
->
DeviûWidth
;

109 
busWidth
 = 
p
->
BusWidth
;

111 
bªksP”Reäesh
 = 
p
->
BªksP”Reäesh
;

113 ifĞ
cÚf
->
	`G‘V®ue
( "RAW" ) == -1 )

115 
¡d
::
cout
 << "NVMain Warning: RAW (Row Activation Window) is‚ot "

116 << "¥ecif›d. Ha £ˆ™Ø4 (FAW)" << 
¡d
::
’dl
;

117 
¿wNum
 = 4;

120 
¿wNum
 = 
p
->
RAW
;

122 
	`as£¹
Ğ
¿wNum
 != 0 );

125 
deviûCouÁ
 = 
busWidth
 / 
deviûWidth
;

126 ifĞ
busWidth
 % 
deviûWidth
 != 0 )

128 
¡d
::
cout
 << "NVMain: device width is‚ot‡ multiple ofhe bus width!\n";

129 
deviûCouÁ
++;

132 
bªkCouÁ
 = 
p
->
BANKS
;

134 ifĞ
ü—‹Chd»n
 )

137 
Add»ssT¿n¦©Ü
 *
¿nkAT
 = 
Decod”FaùÜy
::
	`C»©eDecod”NoW¬n
Ğ
cÚf
->
	`G‘SŒšg
( "Decoder" ) );

138 
¿nkAT
->
	`S‘T¿n¦©iÚM‘hod
Ğ
	`G‘P¬’t
Ğ)->
	`G‘T¿mpŞše
Ğ)->
	`G‘Decod”
Ğ)->
	`G‘T¿n¦©iÚM‘hod
( ) );

139 
¿nkAT
->
	`S‘DeçuÉF›ld
Ğ
BANK_FIELD
 );

140 
¿nkAT
->
	`S‘CÚfig
Ğ
c
, 
ü—‹Chd»n
 );

141 
	`S‘Decod”
Ğ
¿nkAT
 );

143 
¡d
::
cout
 << "C»©šg " << 
bªkCouÁ
 << " banks in‡ll "

144 << 
deviûCouÁ
 << " devices.\n";

146  
ncouÁ”_t
 
i
 = 0; i < 
bªkCouÁ
; i++ )

148 
¡d
::
¡ršg¡»am
 
fÜm©‹r
;

150 
Bªk
 *
ÃxtBªk
 = 
BªkFaùÜy
::
	`C»©eBªkNoW¬n
Ğ
cÚf
->
	`G‘SŒšg
( "BankType" ) );

152 
fÜm©‹r
 << 
i
;

153 
ÃxtBªk
->
	`S‘Id
Ğ
i
 );

154 
fÜm©‹r
.
	`¡r
( "" );

156 
fÜm©‹r
 << 
	`StName
Ğè<< ".bªk" << 
i
;

157 
ÃxtBªk
->
	`StName
Ğ
fÜm©‹r
.
	`¡r
( ) );

159 
ÃxtBªk
->
	`S‘P¬’t
Ğ
this
 );

160 
	`AddChd
Ğ
ÃxtBªk
 );

163 
ÃxtBªk
->
	`S‘CÚfig
Ğ
c
, 
ü—‹Chd»n
 );

164 
ÃxtBªk
->
	`Regi¡”Sts
( );

172 
Ï¡Aùiv©e
 = 
Ãw
 
ncyşe_t
[
¿wNum
];

173  
ncouÁ”_t
 
i
 = 0; i < 
¿wNum
; i++ )

174 
Ï¡Aùiv©e
[
i
] = 0;

177 
ÃxtR—d
 = 
p
->
tCMD
;

178 
ÃxtWr™e
 = 
p
->
tCMD
;

179 
ÃxtAùiv©e
 = 
p
->
tCMD
;

180 
ÃxtP»ch¬ge
 = 
p
->
tCMD
;

182 
çwWa™s
 = 0;

183 
¼dWa™s
 = 0;

184 
aùWa™s
 = 0;

186 
çwWa™TÙ®
 = 0;

187 
¼dWa™TÙ®
 = 0;

188 
aùWa™TÙ®
 = 0;

189 
	}
}

191 
	gSnd¬dRªk
::
	$Regi¡”Sts
( )

193 ifĞ
p
->
EÃrgyMod–
 == "current" )

195 
	`AddUn™St
(
tÙ®EÃrgy
, "mA*t");

196 
	`AddUn™St
(
backgroundEÃrgy
, "mA*t");

197 
	`AddUn™St
(
aùiv©eEÃrgy
, "mA*t");

198 
	`AddUn™St
(
bur¡EÃrgy
, "mA*t");

199 
	`AddUn™St
(
»äeshEÃrgy
, "mA*t");

203 
	`AddUn™St
(
tÙ®EÃrgy
, "nJ");

204 
	`AddUn™St
(
backgroundEÃrgy
, "nJ");

205 
	`AddUn™St
(
aùiv©eEÃrgy
, "nJ");

206 
	`AddUn™St
(
bur¡EÃrgy
, "nJ");

207 
	`AddUn™St
(
»äeshEÃrgy
, "nJ");

210 
	`AddUn™St
(
tÙ®Pow”
, "W");

211 
	`AddUn™St
(
backgroundPow”
, "W");

212 
	`AddUn™St
(
aùiv©ePow”
, "W");

213 
	`AddUn™St
(
bur¡Pow”
, "W");

214 
	`AddUn™St
(
»äeshPow”
, "W");

216 
	`AddSt
(
»ads
);

217 
	`AddSt
(
wr™es
);

219 
	`AddSt
(
aùiveCyşes
);

220 
	`AddSt
(
¡ªdbyCyşes
);

221 
	`AddSt
(
ç¡Ex™AùiveCyşes
);

222 
	`AddSt
(
ç¡Ex™P»ch¬geCyşes
);

223 
	`AddSt
(
¦owEx™Cyşes
);

225 
	`AddSt
(
aùWa™s
);

226 
	`AddSt
(
aùWa™TÙ®
);

227 
	`AddSt
(
aùWa™Av”age
);

229 
	`AddSt
(
¼dWa™s
);

230 
	`AddSt
(
¼dWa™TÙ®
);

231 
	`AddSt
(
¼dWa™Av”age
);

233 
	`AddSt
(
çwWa™s
);

234 
	`AddSt
(
çwWa™TÙ®
);

235 
	`AddSt
(
çwWa™Av”age
);

236 
	}
}

238 
boŞ
 
	gSnd¬dRªk
::
	$IdË
( )

240 
boŞ
 
¿nkIdË
 = 
Œue
;

241  
ncouÁ”_t
 
i
 = 0; i < 
bªkCouÁ
; i++ )

243 ifĞ
	`G‘Chd
(
i
)->
	`IdË
Ğè=ğ
çl£
 )

245 
¿nkIdË
 = 
çl£
;

250  
¿nkIdË
;

251 
	}
}

253 
boŞ
 
	gSnd¬dRªk
::
	$Aùiv©e
Ğ
NVMašReque¡
 *
»que¡
 )

255 
ušt64_t
 
aùiv©eBªk
;

257 
»que¡
->
add»ss
.
	`G‘T¿n¦©edAdd»ss
Ğ
NULL
, NULL, &
aùiv©eBªk
, NULL, NULL, NULL );

259 ifĞ
aùiv©eBªk
 >ğ
bªkCouÁ
 )

261 
¡d
::
û¼
 << "Rªk: A‰em±edØaùiv©nÚ-exi¡ªˆbªk " << 
aùiv©eBªk
 << std::
’dl
;

262  
çl£
;

269 ifĞ
ÃxtAùiv©e
 <ğ
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
()

270 && 
Ï¡Aùiv©e
[Ğ
RAWšdex
 + 1 ) % 
¿wNum
] + 
p
->
tRAW


271 <ğ
	`G‘Ev’tQueue
Ğ)->
	`G‘Cu¼’tCyşe
( ) )

274 
	`G‘Chd
Ğ
»que¡
 )->
	`IssueCommªd
(„equest );

276 ifĞ
¡©e
 =ğ
STANDARDRANK_CLOSED
 )

277 
¡©e
 = 
STANDARDRANK_OPEN
;

280 
RAWšdex
 = (RAWšdex + 1è% 
¿wNum
;

281 
Ï¡Aùiv©e
[
RAWšdex
] = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
();

282 
ÃxtAùiv©e
 = 
	`MAX
(‚extActivate,

283 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
(è+ 
p
->
tRRDR
 );

287 
¡d
::
û¼
 << "NVMain Error: Rank Activation FAILED! "

288 << "Did you check IsIssuabË?" << 
¡d
::
’dl
;

291  
Œue
;

292 
	}
}

294 
boŞ
 
	gSnd¬dRªk
::
	$R—d
Ğ
NVMašReque¡
 *
»que¡
 )

296 
ušt64_t
 
»adBªk
;

298 
»que¡
->
add»ss
.
	`G‘T¿n¦©edAdd»ss
Ğ
NULL
, NULL, &
»adBªk
, NULL, NULL, NULL );

300 ifĞ
»adBªk
 >ğ
bªkCouÁ
 )

302 
¡d
::
û¼
 << "NVMain Error: Rank‡ttemptedo„ead‚on-existant bank: "

303 << 
»adBªk
 << "!" << 
¡d
::
’dl
;

304  
çl£
;

307 ifĞ
ÃxtR—d
 > 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
() )

309 
¡d
::
û¼
 << "NVMain Error: Rank Read violatesheiming constraint: "

310 << 
»adBªk
 << "!" << 
¡d
::
’dl
;

311  
çl£
;

315 
boŞ
 
sucûss
 = 
	`G‘Chd
Ğ
»que¡
 )->
	`IssueCommªd
(„equest );

318 
ÃxtR—d
 = 
	`MAX
(‚extRead,

319 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
()

320 + 
	`MAX
Ğ
p
->
tBURST
,…->
tCCD
 ) * 
»que¡
->
bur¡CouÁ
 );

322 
ÃxtWr™e
 = 
	`MAX
(‚extWrite,

323 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
()

324 + 
	`MAX
Ğ
p
->
tBURST
,…->
tCCD
 ) * (
»que¡
->
bur¡CouÁ
 - 1)

325 + 
p
->
tCAS
 +…->
tBURST
 +…->
tRTRS
 -…->
tCWD
 );

328 ifĞ
»que¡
->
ty³
 =ğ
READ_PRECHARGE
 )

330 
NVMašReque¡
* 
dupPRE
 = 
Ãw
 NVMainRequest;

331 
dupPRE
->
ty³
 = 
PRECHARGE
;

332 
dupPRE
->
owÃr
 = 
this
;

334 
	`G‘Ev’tQueue
Ğ)->
	`In£¹Ev’t
Ğ
Ev’tRe¥Ú£
, 
this
, 
dupPRE
,

335 
	`MAX
Ğ
p
->
tBURST
,…->
tCCD
 ) * (
»que¡
->
bur¡CouÁ
 - 1)

336 + 
	`G‘Ev’tQueue
Ğ)->
	`G‘Cu¼’tCyşe
Ğè+ 
p
->
tAL
 +…->
tRTP
 );

339 ifĞ
sucûss
 =ğ
çl£
 )

341 
¡d
::
û¼
 << "NVMain Error: Rank Read FAILED! Did you check IsIssuable?"

342 << 
¡d
::
’dl
;

345  
sucûss
;

346 
	}
}

349 
boŞ
 
	gSnd¬dRªk
::
	$Wr™e
Ğ
NVMašReque¡
 *
»que¡
 )

351 
ušt64_t
 
wr™eBªk
;

353 
»que¡
->
add»ss
.
	`G‘T¿n¦©edAdd»ss
Ğ
NULL
, NULL, &
wr™eBªk
, NULL, NULL, NULL );

355 ifĞ
wr™eBªk
 >ğ
bªkCouÁ
 )

357 
¡d
::
û¼
 << "NVMain Error: Attemptedo write‚on-existant bank: "

358 << 
wr™eBªk
 << "!" << 
¡d
::
’dl
;

359  
çl£
;

362 ifĞ
ÃxtWr™e
 > 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
() )

364 
¡d
::
û¼
 << "NVMain Error: Rank Write violatesheiming constraint: "

365 << 
wr™eBªk
 << "!" << 
¡d
::
’dl
;

366  
çl£
;

370 
boŞ
 
sucûss
 = 
	`G‘Chd
Ğ
»que¡
 )->
	`IssueCommªd
(„equest );

373 
ÃxtR—d
 = 
	`MAX
(‚extRead,

374 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
()

375 + 
	`MAX
Ğ
p
->
tBURST
,…->
tCCD
 ) * (
»que¡
->
bur¡CouÁ
 - 1)

376 + 
p
->
tCWD
 +…->
tBURST
 +…->
tWTR
 );

378 
ÃxtWr™e
 = 
	`MAX
(‚extWrite,

379 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
()

380 + 
	`MAX
Ğ
p
->
tBURST
,…->
tCCD
 ) * 
»que¡
->
bur¡CouÁ
 );

383 ifĞ
»que¡
->
ty³
 =ğ
WRITE_PRECHARGE
 )

385 
NVMašReque¡
* 
dupPRE
 = 
Ãw
 NVMainRequest;

386 
dupPRE
->
ty³
 = 
PRECHARGE
;

387 
dupPRE
->
owÃr
 = 
this
;

389 
	`G‘Ev’tQueue
Ğ)->
	`In£¹Ev’t
Ğ
Ev’tRe¥Ú£
, 
this
, 
dupPRE
,

390 
	`G‘Ev’tQueue
Ğ)->
	`G‘Cu¼’tCyşe
( )

391 + 
	`MAX
Ğ
p
->
tBURST
,…->
tCCD
 ) * (
»que¡
->
bur¡CouÁ
 - 1)

392 + 
p
->
tAL
 +…->
tCWD
 +…->
tBURST
 +…->
tWR
 );

395 ifĞ
sucûss
 =ğ
çl£
 )

397 
¡d
::
û¼
 << "NVMain Error: Rank Write FAILED! Did you check IsIssuable?"

398 << 
¡d
::
’dl
;

401  
sucûss
;

402 
	}
}

404 
boŞ
 
	gSnd¬dRªk
::
	$P»ch¬ge
Ğ
NVMašReque¡
 *
»que¡
 )

406 
ušt64_t
 
´eBªk
;

408 
»que¡
->
add»ss
.
	`G‘T¿n¦©edAdd»ss
Ğ
NULL
, NULL, &
´eBªk
, NULL, NULL, NULL );

410 ifĞ
´eBªk
 >ğ
bªkCouÁ
 )

412 
¡d
::
û¼
 << "NVMain Error: Rank Attemptedo…recharge‚on-existant bank: "

413 << 
´eBªk
 << 
¡d
::
’dl
;

414  
çl£
;

422 
boŞ
 
sucûss
 = 
	`G‘Chd
Ğ
»que¡
 )->
	`IssueCommªd
(„equest );

424 ifĞ
	`IdË
( ) )

425 
¡©e
 = 
STANDARDRANK_CLOSED
;

427 ifĞ
sucûss
 =ğ
çl£
 )

429 
¡d
::
û¼
 << "NVMain Error: Rank Precharge FAILED! Did you check IsIssuable?"

430 << 
¡d
::
’dl
;

433  
sucûss
;

434 
	}
}

436 
boŞ
 
	gSnd¬dRªk
::
	$CªPow”Down
Ğ
NVMašReque¡
 *
»que¡
 )

438 
boŞ
 
issuabË
 = 
Œue
;

440 ifĞ
¡©e
 =ğ
STANDARDRANK_REFRESHING
 )

441  
çl£
;

443  
ncouÁ”_t
 
chdIdx
 = 0; chdIdx < 
	`G‘Chd»n
().
	`size
(); childIdx++ )

445 ifĞ
	`G‘Chd
(
chdIdx
)->
	`IsIssuabË
Ğ
»que¡
 ) =ğ
çl£
 )

447 
issuabË
 = 
çl£
;

452  
issuabË
;

453 
	}
}

455 
boŞ
 
	gSnd¬dRªk
::
	$Pow”Down
Ğ
NVMašReque¡
 *
»que¡
 )

461  
ncouÁ”_t
 
chdIdx
 = 0; chdIdx < 
	`G‘Chd»n
().
	`size
(); childIdx++ )

463 #iâdeà
NDEBUG


464 
boŞ
 
rv
 = 
	`G‘Chd
(
chdIdx
)->
	`IssueCommªd
Ğ
»que¡
 );

465 
	`as£¹
Ğ
rv
 =ğ
Œue
 );

467 
	`G‘Chd
(
chdIdx
)->
	`IssueCommªd
Ğ
»que¡
 );

471  
»que¡
->
ty³
 )

473 
POWERDOWN_PDA
:

474 
¡©e
 = 
STANDARDRANK_PDA
;

477 
POWERDOWN_PDPF
:

478 
¡©e
 = 
STANDARDRANK_PDPF
;

481 
POWERDOWN_PDPS
:

482 
¡©e
 = 
STANDARDRANK_PDPS
;

486 
¡d
::
û¼
<< "NVMain Error: Unrecognized PowerDown command "

487 << 
»que¡
->
ty³
 << " i d‘eùed iÀRªk " << 
¡d
::
’dl
;

491 
	`G‘Ev’tQueue
Ğ)->
	`In£¹Ev’t
Ğ
Ev’tRe¥Ú£
, 
this
, 
»que¡
,

492 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
(è+ 
p
->
tPD
 );

494  
Œue
;

495 
	}
}

497 
boŞ
 
	gSnd¬dRªk
::
	$CªPow”Up
Ğ
NVMašReque¡
 *
»que¡
 )

499 
boŞ
 
issuabË
 = 
Œue
;

500 
ncouÁ”_t
 
issuabËCouÁ
 = 0;

503  
ncouÁ”_t
 
chdIdx
 = 0; chdIdx < 
	`G‘Chd»n
().
	`size
(); childIdx++ )

505 ifĞ
	`G‘Chd
(
chdIdx
)->
	`IsIssuabË
Ğ
»que¡
 ) =ğ
çl£
 )

507 
issuabË
 = 
çl£
;

511 
issuabËCouÁ
++;

515 
	`as£¹
Ğ
issuabËCouÁ
 =ğ0 || issuabËCouÁ =ğ
	`G‘Chd»n
().
	`size
() );

517  
issuabË
;

518 
	}
}

520 
boŞ
 
	gSnd¬dRªk
::
	$Pow”Up
Ğ
NVMašReque¡
 *
»que¡
 )

522 
ncouÁ”_t
 
puTim”
 = 1;

528  
ncouÁ”_t
 
chdIdx
 = 0; chdIdx < 
	`G‘Chd»n
().
	`size
(); childIdx++ )

530 #iâdeà
NDEBUG


531 
boŞ
 
rv
 = 
	`G‘Chd
(
chdIdx
)->
	`IssueCommªd
Ğ
»que¡
 );

532 
	`as£¹
Ğ
rv
 =ğ
Œue
 );

534 
	`G‘Chd
(
chdIdx
)->
	`IssueCommªd
Ğ
»que¡
 );

538  
¡©e
 )

540 
STANDARDRANK_PDA
:

541 
¡©e
 = 
STANDARDRANK_OPEN
;

542 
puTim”
 = 
p
->
tXP
;

545 
STANDARDRANK_PDPF
:

546 
puTim”
 = 
p
->
tXP
;

547 
¡©e
 = 
STANDARDRANK_CLOSED
;

550 
STANDARDRANK_PDPS
:

551 
puTim”
 = 
p
->
tXPDLL
;

552 
¡©e
 = 
STANDARDRANK_CLOSED
;

556 
¡d
::
û¼
<< "NVMain Error: PowerUp is issuedo‡ Rankhat is‚ot "

557 << "Pow”DowÀbefÜe. Thcu¼’ˆ¿nk s‹ i " << 
¡©e


558 << 
¡d
::
’dl
;

562 
	`G‘Ev’tQueue
Ğ)->
	`In£¹Ev’t
Ğ
Ev’tRe¥Ú£
, 
this
, 
»que¡
,

563 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
(è+ 
puTim”
 );

565  
Œue
;

566 
	}
}

572 
boŞ
 
	gSnd¬dRªk
::
	$Reäesh
Ğ
NVMašReque¡
 *
»que¡
 )

574 
	`as£¹
Ğ
ÃxtAùiv©e
 <ğĞ
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
() ) );

575 
ušt64_t
 
»äeshBªkGroupH—d
;

576 
»que¡
->
add»ss
.
	`G‘T¿n¦©edAdd»ss
(

577 
NULL
, NULL, &
»äeshBªkGroupH—d
, NULL, NULL, NULL );

579 
	`as£¹
Ğ(
»äeshBªkGroupH—d
 + 
bªksP”Reäesh
è<ğ
bªkCouÁ
 );

581  
ncouÁ”_t
 
i
 = 0; i < 
bªksP”Reäesh
; i++ )

583 
NVMašReque¡
* 
»fReq
 = 
Ãw
 NVMainRequest;

584 *
»fReq
 = *
»que¡
;

585 
	`G‘Chd
Ğ
»äeshBªkGroupH—d
+
i
 )->
	`IssueCommªd
Ğ
»fReq
 );

588 
¡©e
 = 
STANDARDRANK_REFRESHING
;

590 
»que¡
->
owÃr
 = 
this
;

591 
	`G‘Ev’tQueue
Ğ)->
	`In£¹Ev’t
Ğ
Ev’tRe¥Ú£
, 
this
, 
»que¡
,

592 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
(è+ 
p
->
tRFC
 );

598 
ÃxtAùiv©e
 = 
	`MAX
ĞÃxtAùiv©e, 
	`G‘Ev’tQueue
Ğ)->
	`G‘Cu¼’tCyşe
( )

599 + 
p
->
tRRDR
 );

600 
RAWšdex
 = (RAWšdex + 1è% 
¿wNum
;

601 
Ï¡Aùiv©e
[
RAWšdex
] = 
	`G‘Ev’tQueue
Ğ)->
	`G‘Cu¼’tCyşe
( );

603  
Œue
;

604 
	}
}

606 
ncyşe_t
 
	gSnd¬dRªk
::
	$NextIssuabË
Ğ
NVMašReque¡
 *
»que¡
 )

608 
ncyşe_t
 
ÃxtCom·»
 = 0;

609 
ncouÁ”_t
 
bªk
;

611 
»que¡
->
add»ss
.
	`G‘T¿n¦©edAdd»ss
Ğ
NULL
, NULL, &
bªk
, NULL, NULL, NULL );

613 ifĞ
»que¡
->
ty³
 =ğ
ACTIVATE
 ||„eque¡->ty³ =ğ
REFRESH
 ) 
ÃxtCom·»
 = 
	`MAX
Ğ
ÃxtAùiv©e
, 
Ï¡Aùiv©e
[(
RAWšdex
+1)%
¿wNum
] + 
p
->
tRAW
 );

614 ifĞ
»que¡
->
ty³
 =ğ
READ
 ||„eque¡->ty³ =ğ
READ_PRECHARGE
 ) 
ÃxtCom·»
 = 
ÃxtR—d
;

615 ifĞ
»que¡
->
ty³
 =ğ
WRITE
 ||„eque¡->ty³ =ğ
WRITE_PRECHARGE
 ) 
ÃxtCom·»
 = 
ÃxtWr™e
;

616 ifĞ
»que¡
->
ty³
 =ğ
PRECHARGE
 ||„eque¡->ty³ =ğ
PRECHARGE_ALL
 ) 
ÃxtCom·»
 = 
ÃxtP»ch¬ge
;

617 
	`as£¹
(
çl£
);

619  
	`MAX
(
	`G‘Chd
Ğ
»que¡
 )->
	`NextIssuabË
Ğ»que¡ ), 
ÃxtCom·»
 );

620 
	}
}

622 
boŞ
 
	gSnd¬dRªk
::
	$IsIssuabË
Ğ
NVMašReque¡
 *
»q
, 
FaR—sÚ
 *
»asÚ
 )

624 
ušt64_t
 
İBªk
;

625 
boŞ
 
rv
;

627 
»q
->
add»ss
.
	`G‘T¿n¦©edAdd»ss
Ğ
NULL
, NULL, &
İBªk
, NULL, NULL, NULL );

629 
rv
 = 
Œue
;

631 ifĞ
»q
->
ty³
 =ğ
ACTIVATE
 )

633 ifĞ
ÃxtAùiv©e
 > 
	`G‘Ev’tQueue
Ğ)->
	`G‘Cu¼’tCyşe
( )

634 || ( 
Ï¡Aùiv©e
[(
RAWšdex
 + 1è% 
¿wNum
] + 
p
->
tRAW
 )

635 > 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
() )

637 
rv
 = 
çl£
;

639 ifĞ
»asÚ
 )

640 
»asÚ
->»asÚ = 
RANK_TIMING
;

644 
rv
 = 
	`G‘Chd
Ğ
»q
 )->
	`IsIssuabË
Ğ»q, 
»asÚ
 );

647 ifĞ
rv
 =ğ
çl£
 )

649 ifĞ
ÃxtAùiv©e
 > 
	`G‘Ev’tQueue
Ğ)->
	`G‘Cu¼’tCyşe
( ) )

651 
aùWa™s
++;

652 
aùWa™TÙ®
 +ğ
ÃxtAùiv©e
 - 
	`G‘Ev’tQueue
Ğ)->
	`G‘Cu¼’tCyşe
( );

655 ifĞĞ
Ï¡Aùiv©e
[
RAWšdex
] + 
p
->
tRRDR
 )

656 > 
	`G‘Ev’tQueue
Ğ)->
	`G‘Cu¼’tCyşe
( ) )

658 
¼dWa™s
++;

659 
¼dWa™TÙ®
 +ğĞ
Ï¡Aùiv©e
[
RAWšdex
] +

660 
p
->
tRRDR
 - (
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
()) );

662 ifĞĞ
Ï¡Aùiv©e
[Ğ
RAWšdex
 + 1 ) % 
¿wNum
] + 
p
->
tRAW
 )

663 > 
	`G‘Ev’tQueue
Ğ)->
	`G‘Cu¼’tCyşe
( ) )

665 
çwWa™s
++;

666 
çwWa™TÙ®
 +ğĞ
Ï¡Aùiv©e
[Ğ
RAWšdex
 + 1 ) % 
¿wNum
] +

667 
p
->
tRAW
 - 
	`G‘Ev’tQueue
Ğ)->
	`G‘Cu¼’tCyşe
( ) );

671 ifĞ
»q
->
ty³
 =ğ
READ
 ||„eq->ty³ =ğ
READ_PRECHARGE
 )

673 ifĞ
ÃxtR—d
 > 
	`G‘Ev’tQueue
Ğ)->
	`G‘Cu¼’tCyşe
( ) )

675 
rv
 = 
çl£
;

677 ifĞ
»asÚ
 )

678 
»asÚ
->»asÚ = 
RANK_TIMING
;

682 
rv
 = 
	`G‘Chd
Ğ
»q
 )->
	`IsIssuabË
Ğ»q, 
»asÚ
 );

685 ifĞ
»q
->
ty³
 =ğ
WRITE
 ||„eq->ty³ =ğ
WRITE_PRECHARGE
 )

687 ifĞ
ÃxtWr™e
 > 
	`G‘Ev’tQueue
Ğ)->
	`G‘Cu¼’tCyşe
( ) )

689 
rv
 = 
çl£
;

691 ifĞ
»asÚ
 )

692 
»asÚ
->»asÚ = 
RANK_TIMING
;

696 
rv
 = 
	`G‘Chd
Ğ
»q
 )->
	`IsIssuabË
Ğ»q, 
»asÚ
 );

699 ifĞ
»q
->
ty³
 =ğ
PRECHARGE
 ||„eq->ty³ =ğ
PRECHARGE_ALL
 )

701 ifĞ
ÃxtP»ch¬ge
 > 
	`G‘Ev’tQueue
Ğ)->
	`G‘Cu¼’tCyşe
( ) )

703 
rv
 = 
çl£
;

705 ifĞ
»asÚ
 )

706 
»asÚ
->»asÚ = 
RANK_TIMING
;

710 
rv
 = 
	`G‘Chd
Ğ
»q
 )->
	`IsIssuabË
Ğ»q, 
»asÚ
 );

713 ifĞ
»q
->
ty³
 =ğ
POWERDOWN_PDA


714 || 
»q
->
ty³
 =ğ
POWERDOWN_PDPF


715 || 
»q
->
ty³
 =ğ
POWERDOWN_PDPS
 )

717 
rv
 = 
	`CªPow”Down
Ğ
»q
 );

719 ifĞ!
rv
 && 
»asÚ
 )

720 
»asÚ
->»asÚ = 
RANK_TIMING
;

722 ifĞ
»q
->
ty³
 =ğ
POWERUP
 )

724 
rv
 = 
	`CªPow”Up
Ğ
»q
 );

726 ifĞ!
rv
 && 
»asÚ
 )

727 
»asÚ
->»asÚ = 
RANK_TIMING
;

729 ifĞ
»q
->
ty³
 =ğ
REFRESH
 )

732 ifĞ
ÃxtAùiv©e
 > 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
()

733 || ( 
Ï¡Aùiv©e
[Ğ
RAWšdex
 + 1 ) % 
¿wNum
] + 
p
->
tRAW


734 > 
	`G‘Ev’tQueue
Ğ)->
	`G‘Cu¼’tCyşe
( ) ) )

736 
rv
 = 
çl£
;

737 ifĞ
»asÚ
 )

738 
»asÚ
->»asÚ = 
RANK_TIMING
;

740  
rv
;

744 
	`as£¹
Ğ(
İBªk
 + 
bªksP”Reäesh
è<ğ
bªkCouÁ
 );

746  
ncouÁ”_t
 
i
 = 0; i < 
bªksP”Reäesh
; i++ )

748 
rv
 = 
	`G‘Chd
Ğ
İBªk
 + 
i
 )->
	`IsIssuabË
Ğ
»q
, 
»asÚ
 );

749 ifĞ
rv
 =ğ
çl£
 )

750  
rv
;

756 
rv
 = 
	`G‘Chd
Ğ
»q
 )->
	`IsIssuabË
Ğ»q, 
»asÚ
 );

759  
rv
;

760 
	}
}

762 
boŞ
 
	gSnd¬dRªk
::
	$IssueCommªd
Ğ
NVMašReque¡
 *
»q
 )

764 
boŞ
 
rv
 = 
çl£
;

766 ifĞ!
	`IsIssuabË
Ğ
»q
 ) )

768 
ušt64_t
 
bªk
, 
¿nk
, 
chªÃl
;

769 
»q
->
add»ss
.
	`G‘T¿n¦©edAdd»ss
Ğ
NULL
, NULL, &
bªk
, &
¿nk
, &
chªÃl
, NULL );

770 
¡d
::
cout
 << "NVMaš: Rªk: W¬nšg: Commªd " << 
»q
->
ty³


771 << " @ Bªk " << 
bªk
 << " Rªk " << 
¿nk
 << " ChªÃÈ" << 
chªÃl


772 << " cª‚Ù bissued!\n" << 
¡d
::
’dl
;

776 
rv
 = 
Œue
;

778  
»q
->
ty³
 )

780 
ACTIVATE
:

781 
rv
 = 
this
->
	`Aùiv©e
Ğ
»q
 );

784 
READ
:

785 
READ_PRECHARGE
:

786 
rv
 = 
this
->
	`R—d
Ğ
»q
 );

789 
WRITE
:

790 
WRITE_PRECHARGE
:

791 
rv
 = 
this
->
	`Wr™e
Ğ
»q
 );

794 
PRECHARGE
:

795 
PRECHARGE_ALL
:

796 
rv
 = 
this
->
	`P»ch¬ge
Ğ
»q
 );

799 
POWERDOWN_PDA
:

800 
POWERDOWN_PDPF
:

801 
POWERDOWN_PDPS
:

802 
rv
 = 
this
->
	`Pow”Down
Ğ
»q
 );

805 
POWERUP
:

806 
rv
 = 
this
->
	`Pow”Up
Ğ
»q
 );

809 
REFRESH
:

810 
rv
 = 
this
->
	`Reäesh
Ğ
»q
 );

814 
¡d
::
cout
 << "NVMain: Rank: Unknown operation in command queue! "

815 << 
»q
->
ty³
 << 
¡d
::
’dl
;

820  
rv
;

821 
	}
}

827 
	gSnd¬dRªk
::
	$NÙify
Ğ
NVMašReque¡
 *
»que¡
 )

829 
OpTy³
 
İ
 = 
»que¡
->
ty³
;

832 ifĞ
İ
 =ğ
READ
 || o°=ğ
READ_PRECHARGE
 )

834 
ÃxtR—d
 = 
	`MAX
ĞÃxtR—d, 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
()

835 + 
p
->
tBURST
 +…->
tRTRS
 );

837 
ÃxtWr™e
 = 
	`MAX
ĞÃxtWr™e, 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
()

838 + 
p
->
tCAS
 +…->
tBURST
 +…->
tRTRS
 -…->
tCWD
);

840 ifĞ
İ
 =ğ
WRITE
 || o°=ğ
WRITE_PRECHARGE
 )

842 
ÃxtWr™e
 = 
	`MAX
ĞÃxtWr™e, 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
()

843 + 
p
->
tBURST
 +…->
tOST
 );

845 
ÃxtR—d
 = 
	`MAX
ĞÃxtR—d, 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
()

846 + 
p
->
tBURST
 +…->
tCWD
 +…->
tRTRS
 -…->
tCAS
 );

848 
	}
}

850 
boŞ
 
	gSnd¬dRªk
::
	$Reque¡Com¶‘e
Ğ
NVMašReque¡
* 
»q
 )

852 ifĞ
»q
->
owÃr
 =ğ
this
 )

854  
»q
->
ty³
 )

860 
PRECHARGE
:

861 
REFRESH
:

863 ifĞ
	`IdË
( ) )

864 
¡©e
 = 
STANDARDRANK_CLOSED
;

873 
d–‘e
 
»q
;

874  
Œue
;

877  
	`G‘P¬’t
Ğ)->
	`Reque¡Com¶‘e
Ğ
»q
 );

878 
	}
}

880 
	gSnd¬dRªk
::
	$Cyşe
Ğ
ncyşe_t
 
¡•s
 )

882  
ncouÁ”_t
 
chdIdx
 = 0; chdIdx < 
	`G‘ChdCouÁ
( ); childIdx++ )

883 
	`G‘Chd
Ğ
chdIdx
 )->
	`Cyşe
Ğ
¡•s
 );

886  
¡©e
 )

889 
STANDARDRANK_PDA
:

890 
ç¡Ex™AùiveCyşes
 +ğ
¡•s
;

891 ifĞ
p
->
EÃrgyMod–
 == "current" )

892 
backgroundEÃrgy
 +ğĞ
p
->
EIDD3P
 * ()
¡•s
 ) * ()
deviûCouÁ
;

894 
backgroundEÃrgy
 +ğĞ
p
->
Epda
 * ()
¡•s
 );

898 
STANDARDRANK_PDPF
:

899 
ç¡Ex™P»ch¬geCyşes
 +ğ
¡•s
;

900 ifĞ
p
->
EÃrgyMod–
 == "current" )

901 
backgroundEÃrgy
 +ğĞ
p
->
EIDD2P1
 * ()
¡•s
 ) * ()
deviûCouÁ
;

903 
backgroundEÃrgy
 +ğĞ
p
->
Epdpf
 * ()
¡•s
 );

907 
STANDARDRANK_PDPS
:

908 
¦owEx™Cyşes
 +ğ
¡•s
;

909 ifĞ
p
->
EÃrgyMod–
 == "current" )

910 
backgroundEÃrgy
 +ğĞ
p
->
EIDD2P0
 * ()
¡•s
 ) * ()
deviûCouÁ
;

912 
backgroundEÃrgy
 +ğĞ
p
->
Epdps
 * ()
¡•s
 );

916 
STANDARDRANK_REFRESHING
:

917 
STANDARDRANK_OPEN
:

918 
aùiveCyşes
 +ğ
¡•s
;

919 ifĞ
p
->
EÃrgyMod–
 == "current" )

920 
backgroundEÃrgy
 +ğĞ
p
->
EIDD3N
 * ()
¡•s
 ) * ()
deviûCouÁ
;

922 
backgroundEÃrgy
 +ğĞ
p
->
Eaù¡dby
 * ()
¡•s
 );

926 
STANDARDRANK_CLOSED
:

927 
¡ªdbyCyşes
 +ğ
¡•s
;

928 ifĞ
p
->
EÃrgyMod–
 == "current" )

929 
backgroundEÃrgy
 +ğĞ
p
->
EIDD2N
 * ()
¡•s
 ) * ()
deviûCouÁ
;

931 
backgroundEÃrgy
 +ğĞ
p
->
E´e¡dby
 * ()
¡•s
 );

935 ifĞ
p
->
EÃrgyMod–
 == "current" )

936 
backgroundEÃrgy
 +ğĞ
p
->
EIDD2N
 * ()
¡•s
 ) * ()
deviûCouÁ
;

938 
backgroundEÃrgy
 +ğĞ
p
->
E´e¡dby
 * ()
¡•s
 );

941 
	}
}

943 
	gSnd¬dRªk
::
	$C®cuÏ‹Sts
( )

945 
NVMObjeù
::
	`C®cuÏ‹Sts
( );

947 
tÙ®EÃrgy
 = 
aùiv©eEÃrgy
 = 
bur¡EÃrgy
 = 
»äeshEÃrgy
 = 0.0;

948 
tÙ®Pow”
 = 
backgroundPow”
 = 
aùiv©ePow”
 = 
bur¡Pow”
 = 
»äeshPow”
 = 0.0;

949 
»ads
 = 
wr™es
 = 0;

951  
ncouÁ”_t
 
i
 = 0; i < 
bªkCouÁ
; i++ )

953 
StTy³
 
bªkE¡©
 = 
	`G‘St
Ğ
	`G‘Chd
(
i
), "bankEnergy" );

954 
StTy³
 
aùE¡©
 = 
	`G‘St
Ğ
	`G‘Chd
(
i
), "activeEnergy" );

955 
StTy³
 
b¡E¡©
 = 
	`G‘St
Ğ
	`G‘Chd
(
i
), "burstEnergy" );

956 
StTy³
 
»fE¡©
 = 
	`G‘St
Ğ
	`G‘Chd
(
i
), "refreshEnergy" );

958 
tÙ®EÃrgy
 +ğ
	`Ca¡St
Ğ
bªkE¡©
, );

959 
aùiv©eEÃrgy
 +ğ
	`Ca¡St
Ğ
aùE¡©
, );

960 
bur¡EÃrgy
 +ğ
	`Ca¡St
Ğ
b¡E¡©
, );

961 
»äeshEÃrgy
 +ğ
	`Ca¡St
Ğ
»fE¡©
, );

963 
StTy³
 
»adCouÁ
 = 
	`G‘St
Ğ
	`G‘Chd
(
i
), "reads" );

964 
StTy³
 
wr™eCouÁ
 = 
	`G‘St
Ğ
	`G‘Chd
(
i
), "writes" );

966 
»ads
 +ğ
	`Ca¡St
Ğ
»adCouÁ
, 
ncouÁ”_t
 );

967 
wr™es
 +ğ
	`Ca¡St
Ğ
wr™eCouÁ
, 
ncouÁ”_t
 );

972 
simuÏtiÚTime
 = 1.0;

974 ifĞ
p
->
EÃrgyMod–
 == "current" )

976 
simuÏtiÚTime
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
(è- 
Ï¡Re£t
;

980 
simuÏtiÚTime
 = 
¡©ic_ÿ¡
<>(
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
(è- 
Ï¡Re£t
)

981 * (1000.0 / 
¡©ic_ÿ¡
<>(
p
->
CLK
));

984 ifĞ
simuÏtiÚTime
 != 0 )

987 ifĞ
p
->
EÃrgyMod–
 == "current" )

989 
backgroundPow”
 = ( 
backgroundEÃrgy
 / ()
deviûCouÁ
 * 
p
->
VŞge
 ) / ()
simuÏtiÚTime
 / 1000.0;

990 
aùiv©ePow”
 = ( 
aùiv©eEÃrgy
 * 
p
->
VŞge
 ) / ()
simuÏtiÚTime
 / 1000.0;

991 
bur¡Pow”
 = ( 
bur¡EÃrgy
 * 
p
->
VŞge
 ) / ()
simuÏtiÚTime
 / 1000.0;

992 
»äeshPow”
 = ( 
»äeshEÃrgy
 * 
p
->
VŞge
 ) / ()
simuÏtiÚTime
 / 1000.0;

996 
backgroundPow”
 = 
backgroundEÃrgy
 / (()
simuÏtiÚTime
);

997 
aùiv©ePow”
 = 
aùiv©eEÃrgy
 / (()
simuÏtiÚTime
);

998 
bur¡Pow”
 = 
bur¡EÃrgy
 / (()
simuÏtiÚTime
);

999 
»äeshPow”
 = 
»äeshEÃrgy
 / (()
simuÏtiÚTime
);

1004 ifĞ
p
->
EÃrgyMod–
 == "current" )

1007 
aùiv©eEÃrgy
 *ğ()
deviûCouÁ
;

1008 
bur¡EÃrgy
 *ğ()
deviûCouÁ
;

1009 
»äeshEÃrgy
 *ğ()
deviûCouÁ
;

1012 
aùiv©ePow”
 *ğ()
deviûCouÁ
;

1013 
bur¡Pow”
 *ğ()
deviûCouÁ
;

1014 
»äeshPow”
 *ğ()
deviûCouÁ
;

1017 
tÙ®EÃrgy
 = 
aùiv©eEÃrgy
 + 
bur¡EÃrgy
 + 
»äeshEÃrgy
 + 
backgroundEÃrgy
;

1018 
tÙ®Pow”
 = 
aùiv©ePow”
 + 
bur¡Pow”
 + 
»äeshPow”
 + 
backgroundPow”
;

1020 
aùWa™Av”age
 = 
¡©ic_ÿ¡
<>(
aùWa™TÙ®
è/ stic_ÿ¡<>(
aùWa™s
);

1021 
¼dWa™Av”age
 = 
¡©ic_ÿ¡
<>(
¼dWa™TÙ®
è/ stic_ÿ¡<>(
¼dWa™s
);

1022 
çwWa™Av”age
 = 
¡©ic_ÿ¡
<>(
çwWa™TÙ®
è/ stic_ÿ¡<>(
çwWa™s
);

1023 
	}
}

1025 
	gSnd¬dRªk
::
	$Re£tSts
( )

1027 
Ï¡Re£t
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
();

1028 
	}
}

	@Ranks/StandardRank/StandardRank.h

36 #iâdeà
__STANDARDRANK_H__


37 
	#__STANDARDRANK_H__


	)

39 
	~"¤c/Rªk.h
"

40 
	~"¤c/Bªk.h
"

42 
	~<c¡dšt
>

43 
	~<li¡
>

44 
	~<io¡»am
>

46 
Çme¥aû
 
	gNVM
 {

61 
	eSnd¬dRªk_S‹


63 
	gSTANDARDRANK_UNKNOWN
,

64 
	gSTANDARDRANK_OPEN
,

65 
	gSTANDARDRANK_CLOSED
,

66 
	gSTANDARDRANK_REFRESHING
,

67 
	gSTANDARDRANK_PDPF
,

68 
	gSTANDARDRANK_PDA
,

69 
	gSTANDARDRANK_PDPS


72 şas 
	cSnd¬dRªk
 : 
public
 
Rªk


74 
public
:

75 
Snd¬dRªk
( );

76 ~
Snd¬dRªk
( );

78 
S‘CÚfig
Ğ
CÚfig
 *
c
, 
boŞ
 
ü—‹Chd»n
 = 
Œue
 );

80 
boŞ
 
IssueCommªd
Ğ
NVMašReque¡
 *
»que¡
 );

81 
boŞ
 
IsIssuabË
Ğ
NVMašReque¡
 *
»que¡
, 
FaR—sÚ
 *
»asÚ
 = 
NULL
 );

82 
NÙify
Ğ
NVMašReque¡
 *
»que¡
 );

83 
boŞ
 
Reque¡Com¶‘e
Ğ
NVMašReque¡
* );

84 
ncyşe_t
 
NextIssuabË
Ğ
NVMašReque¡
 *
»que¡
 );

86 
S‘Name
Ğ
¡d
::
¡ršg
 
Çme
 );

88 
boŞ
 
IdË
( );

90 
Cyşe
Ğ
ncyşe_t
 
¡•s
 );

92 
Regi¡”Sts
( );

93 
C®cuÏ‹Sts
( );

94 
Re£tSts
( );

96 
	g´Ùeùed
:

97 
CÚfig
 *
cÚf
;

98 
ncouÁ”_t
 
	g¡©eTimeout
;

99 
ušt64_t
 
	gpsIÁ”v®
;

100 
Snd¬dRªk_S‹
 
	g¡©e
;

102 
ncouÁ”_t
 
	gbªkCouÁ
;

103 
ncouÁ”_t
 
	gdeviûWidth
;

104 
ncouÁ”_t
 
	gdeviûCouÁ
;

105 
ncouÁ”_t
 
	gbusWidth
;

106 
ncyşe_t
* 
	gÏ¡Aùiv©e
;

107 
ncouÁ”_t
 
	gRAWšdex
;

108 
ncouÁ”_t
 
	g¿wNum
;

109 
ncouÁ”_t
 
	gbªksP”Reäesh
;

111 
ncyşe_t
 
	gÃxtR—d
;

112 
ncyşe_t
 
	gÃxtWr™e
;

113 
ncyşe_t
 
	gÃxtAùiv©e
;

114 
ncyşe_t
 
	gÃxtP»ch¬ge
;

116 
ncouÁ”_t
 
	gaùiveCyşes
;

117 
ncouÁ”_t
 
	g¡ªdbyCyşes
;

118 
ncouÁ”_t
 
	gç¡Ex™AùiveCyşes
;

119 
ncouÁ”_t
 
	gç¡Ex™P»ch¬geCyşes
;

120 
ncouÁ”_t
 
	g¦owEx™Cyşes
;

121 
ncyşe_t
 
	gÏ¡Re£t
;

123 
ncouÁ”_t
 
	g¼dWa™s
;

124 
ncouÁ”_t
 
	g¼dWa™TÙ®
;

125 
	g¼dWa™Av”age
;

126 
ncouÁ”_t
 
	gçwWa™s
;

127 
ncouÁ”_t
 
	gçwWa™TÙ®
;

128 
	gçwWa™Av”age
;

129 
ncouÁ”_t
 
	gaùWa™s
;

130 
ncouÁ”_t
 
	gaùWa™TÙ®
;

131 
	gaùWa™Av”age
;

133 
ncouÁ”_t
 
	g»ads
, 
	gwr™es
;

135 
	gtÙ®EÃrgy
, 
	gbackgroundEÃrgy
, 
	gaùiv©eEÃrgy
, 
	gbur¡EÃrgy
, 
	g»äeshEÃrgy
;

136 
	gtÙ®Pow”
, 
	gbackgroundPow”
, 
	gaùiv©ePow”
, 
	gbur¡Pow”
, 
	g»äeshPow”
;

138 
boŞ
 
Aùiv©e
Ğ
NVMašReque¡
 *
»que¡
 );

139 
boŞ
 
R—d
Ğ
NVMašReque¡
 *
»que¡
 );

140 
boŞ
 
Wr™e
Ğ
NVMašReque¡
 *
»que¡
 );

141 
boŞ
 
P»ch¬ge
Ğ
NVMašReque¡
 *
»que¡
 );

142 
boŞ
 
Reäesh
Ğ
NVMašReque¡
 *
»que¡
 );

143 
boŞ
 
Pow”Down
Ğ
NVMašReque¡
 *
»que¡
 );

144 
boŞ
 
Pow”Up
Ğ
NVMašReque¡
 *
»que¡
 );

145 
boŞ
 
CªPow”Down
Ğ
NVMašReque¡
 *
»que¡
 );

146 
boŞ
 
CªPow”Up
Ğ
NVMašReque¡
 *
»que¡
 );

	@SimInterface/Gem5Interface/Gem5Interface.cpp

34 
	~"SimIÁ”çû/Gem5IÁ”çû/Gem5IÁ”çû.h
"

35 
	~"ba£/¡©i¡ics.hh
"

36 
	~"ba£/ty³s.hh
"

37 
	~"ba£/¡©s/šfo.hh
"

38 
	~"sim/cÜe.hh
"

39 
	~"sim/¡©_cÚŒŞ.hh
"

40 
	~"mem/ruby/commÚ/Glob®.hh
"

41 
	~"mem/ruby/sy¡em/Sy¡em.hh
"

42 
	~"mem/ruby/´of”/Prof”.hh
"

43 
	~"mem/ruby/ÃtwÜk/N‘wÜk.hh
"

44 
	~"mem/ruby/ÃtwÜk/TİŞogy.hh
"

45 
	~<s¡»am
>

46 
	~<li¡
>

47 
	~<¡dlib.h
>

49 
usšg
 
Çme¥aû
 
	gNVM
;

51 
	gGem5IÁ”çû
::
	$Gem5IÁ”çû
( )

53 
	}
}

55 
Gem5IÁ”çû
::~
	$Gem5IÁ”çû
( )

57 
	}
}

59 
Gem5IÁ”çû
::
	$G‘In¡ruùiÚCouÁ
Ğ
cÜe
 )

61 
¡d
::
¡ršg¡»am
 
fmt
, 
fmt2
;

62 
rv
 = 0;

64 
fmt
.
	`¡r
("");

65 
fmt2
.
	`¡r
("");

68 ifĞ
cÜe
 == -1 )

70 
fmt
 << "sim_insts";

74 
fmt
 << "sy¡em.ıu" << 
cÜe
 << ".committedInsts";

75 
fmt2
 << "sy¡em.ıu" << 
cÜe
 << ".commit.committedInsts";

78 
¡d
::
li¡
<
Sts
::
Info
 *> &
®lSts
 = Sts::
	`¡©sLi¡
();

79 
¡d
::
li¡
<
Sts
::
Info
 *>::
™”©Ü
 
™
;

81  
™
 = 
®lSts
.
	`begš
(); iˆ!ğ®lSts.
	`’d
(); it++ )

83 
Sts
::
Info
* 
curSt
 = (*
™
);

85 ifĞ
curSt
->
Çme
 =ğ
fmt
.
	`¡r
()

86 || ( 
cÜe
 =ğ0 && 
curSt
->
Çme
 == "system.cpu.committedInsts" ) )

88 
Sts
::
SÿÏrInfo
 *
sÿÏr
 = (Sts::SÿÏrInfØ*)
curSt
;

90 
rv
 = ()
sÿÏr
->
	`tÙ®
();

94  
rv
;

95 
	}
}

97 
	gGem5IÁ”çû
::
	$G‘CacheMis£s
Ğ
cÜe
, 
Ëv–
 )

99 #ifdeà
RUBY


100 
¡d
::
veùÜ
<
Ab¡¿ùCÚŒŞËr
*> 
úŒls
 =

101 
g_sy¡em_±r
->
	`g‘N‘wÜk
()->
	`g‘TİŞogyPŒ
()->
	`g‘CÚŒŞËrVeùÜ
();

103 
¡d
::
¡ršg¡»am
 
fmt
, 
fmt2
;

104 
rv
 = 0;

106 
fmt
.
	`¡r
("");

107 
fmt
 << "L" << 
Ëv–
 << "Cache";

109 ifĞ
Ëv–
 > 1 )

111  
size_t
 
i
 = 0; i < 
úŒls
.
	`size
(); i++ )

113 ifĞ
úŒls
[
i
]->
	`g‘Name
(è=ğ
fmt
.
	`¡r
() )

115 
rv
 +ğ
¡©ic_ÿ¡
<>(
úŒls
[
i
]->
	`g‘CacheProf”
()->
	`g‘Mis£s
());

119 ifĞ
Ëv–
 == 1 )

121 
L1couÁ
 = 0;

123  
size_t
 
i
 = 0; i < 
úŒls
.
	`size
(); i++ )

125 ifĞ
úŒls
[
i
]->
	`g‘Name
(è=ğ
fmt
.
	`¡r
() )

127 ifĞ
L1couÁ
 =ğ
cÜe
 )

129 
rv
 = 
¡©ic_ÿ¡
<>(
úŒls
[
i
]->
	`g‘CacheProf”
()->
	`g‘Mis£s
());

134 
L1couÁ
++;

140 ifĞ
Ëv–
 == 0 )

142 
fmt
.
	`¡r
("");

144 
fmt
 << "sy¡em.ıu" << 
cÜe
 << "num_mem_refs";

145 
fmt2
 << "system.cpu.num_mem_refs";

147 
¡d
::
li¡
<
Sts
::
Info
 *> &
®lSts
 = Sts::
	`¡©sLi¡
();

148 
¡d
::
li¡
<
Sts
::
Info
 *>::
™”©Ü
 
™
;

150  
™
 = 
®lSts
.
	`begš
(); iˆ!ğ®lSts.
	`’d
(); it++ )

152 
Sts
::
Info
* 
curSt
 = (*
™
);

154 ifĞ
curSt
->
Çme
 =ğ
fmt
.
	`¡r
(è|| curSt->Çm=ğ
fmt2
.str() )

156 
Sts
::
SÿÏrInfo
 *
sÿÏr
 = (Sts::SÿÏrInfØ*)
curSt
;

158 
rv
 = ()
sÿÏr
->
	`tÙ®
();

163  
rv
;

166 
¡d
::
¡ršg¡»am
 
fmt
, 
fmt2
;

167 
rv
 = 0;

169 
fmt
.
	`¡r
("");

170 
fmt2
.
	`¡r
("");

173 ifĞ
Ëv–
 > 1 )

175 
fmt
 << "sy¡em.l" << 
cÜe
 << ".overall_misses";

177 ifĞ
Ëv–
 == 1 )

179 
fmt
 << "system.cpu.dcache.overal_misses";

180 
fmt2
 << "sy¡em.ıu" << 
cÜe
 << ".dcache.overall_misses";

182 ifĞ
Ëv–
 == 0 )

184 
fmt
.
	`¡r
("");

186 
fmt
 << "sy¡em.ıu" << 
cÜe
 << "num_mem_refs";

187 
fmt2
 << "system.cpu.num_mem_refs";

189 
¡d
::
li¡
<
Sts
::
Info
 *> &
®lSts
 = Sts::
	`¡©sLi¡
();

190 
¡d
::
li¡
<
Sts
::
Info
 *>::
™”©Ü
 
™
;

192  
™
 = 
®lSts
.
	`begš
(); iˆ!ğ®lSts.
	`’d
(); it++ )

194 
Sts
::
Info
* 
curSt
 = (*
™
);

196 ifĞ
curSt
->
Çme
 =ğ
fmt
.
	`¡r
(è|| curSt->Çm=ğ
fmt2
.str() )

198 
Sts
::
SÿÏrInfo
 *
sÿÏr
 = (Sts::SÿÏrInfØ*)
curSt
;

200 
rv
 = ()
sÿÏr
->
	`tÙ®
();

205 
¡d
::
li¡
<
Sts
::
Info
 *> &
®lSts
 = Sts::
	`¡©sLi¡
();

206 
¡d
::
li¡
<
Sts
::
Info
 *>::
™”©Ü
 
™
;

208  
™
 = 
®lSts
.
	`begš
(); iˆ!ğ®lSts.
	`’d
(); it++ )

210 
Sts
::
Info
* 
curSt
 = (*
™
);

212 ifĞ
curSt
->
Çme
 =ğ
fmt
.
	`¡r
(è|| curSt->Çm=ğ
fmt2
.str() )

214 
Sts
::
SÿÏrInfo
 *
sÿÏr
 = (Sts::SÿÏrInfØ*)
curSt
;

216 
rv
 = ()
sÿÏr
->
	`tÙ®
();

220  
rv
;

222 
	}
}

224 
	gGem5IÁ”çû
::
	$G‘CacheH™s
Ğ
cÜe
, 
Ëv–
 )

226 ifĞ
Ëv–
 == 0 )

229  ( 
	`G‘CacheMis£s
Ğ
cÜe
, 
Ëv–
-1 ) - GetCacheMisses( core,†evel ) );

230 
	}
}

232 
	gGem5IÁ”çû
::
	$G‘U£rMis£s
Ğ
cÜe
 )

236 
	}
}

238 
boŞ
 
	gGem5IÁ”çû
::
	$HasIn¡ruùiÚCouÁ
( )

240  
Œue
;

241 
	}
}

243 
boŞ
 
	gGem5IÁ”çû
::
	$HasCacheMis£s
( )

245  
Œue
;

246 
	}
}

248 
boŞ
 
	gGem5IÁ”çû
::
	$HasCacheH™s
( )

250  
Œue
;

251 
	}
}

253 
	gGem5IÁ”çû
::
	$G‘D©aAtAdd»ss
Ğ
ušt64_t
 , 
NVMD©aBlock
* )

257 
	}
}

259 
	gGem5IÁ”çû
::
	$S‘D©aAtAdd»ss
Ğ
ušt64_t
 , 
NVMD©aBlock
& )

263 
	}
}

	@SimInterface/Gem5Interface/Gem5Interface.h

34 #iâdeà
__NVMAIN_SIMINTERFACE_GEM5_H__


35 
	#__NVMAIN_SIMINTERFACE_GEM5_H__


	)

37 
	~"¤c/SimIÁ”çû.h
"

39 
Çme¥aû
 
	gNVM
 {

41 şas 
	cGem5IÁ”çû
 : 
public
 
SimIÁ”çû


43 
public
:

44 
Gem5IÁ”çû
( );

45 ~
Gem5IÁ”çû
( );

47 
G‘In¡ruùiÚCouÁ
Ğ
cÜe
 );

48 
G‘CacheMis£s
Ğ
cÜe
, 
Ëv–
 );

49 
G‘CacheH™s
Ğ
cÜe
, 
Ëv–
 );

50 
G‘U£rMis£s
Ğ
cÜe
 );

52 
boŞ
 
HasIn¡ruùiÚCouÁ
( );

53 
boŞ
 
HasCacheMis£s
( );

54 
boŞ
 
HasCacheH™s
( );

56 
G‘D©aAtAdd»ss
Ğ
ušt64_t
 
add»ss
, 
NVMD©aBlock
 *
d©a
 );

57 
S‘D©aAtAdd»ss
Ğ
ušt64_t
 
add»ss
, 
NVMD©aBlock
& 
d©a
 );

	@SimInterface/GemsInterface/GemsInterface.cpp

34 
	~<¡dlib.h
>

35 
	~"¤c/CÚfig.h
"

36 
	~"SimIÁ”çû/GemsIÁ”çû/GemsIÁ”çû.h
"

37 
	~"sy¡em/Sy¡em.h
"

38 
	~"commÚ/Driv”.h
"

39 
	~"´of”/Prof”.h
"

40 
	~"´of”/CacheProf”.h
"

41 
	~"simics/š‹rçû.h
"

43 
usšg
 
Çme¥aû
 
	gNVM
;

45 
	gGemsIÁ”çû
::
	$GemsIÁ”çû
( )

47 
gems_sy¡em_±r
 = 
NULL
;

48 
gems_ev’tQueue_±r
 = 
NULL
;

49 
	}
}

51 
	gGemsIÁ”çû
::~
	$GemsIÁ”çû
( )

53 
	}
}

55 
GemsIÁ”çû
::
	$G‘In¡ruùiÚCouÁ
Ğ
cÜe
 )

57  
gems_sy¡em_±r
->
	`g‘Driv”
Ğ)->
	`g‘In¡ruùiÚCouÁ
Ğ
cÜe
 );

58 
	}
}

60 
	gGemsIÁ”çû
::
	$G‘CacheMis£s
Ğ
cÜe
, 
Ëv–
 )

68  ()
gems_sy¡em_±r
->
	`g‘Prof”
Ğ)->
	`g‘ProcTÙ®Mis£s
Ğ
cÜe
 );

69 
	}
}

71 
	gGemsIÁ”çû
::
	$G‘U£rMis£s
Ğ
cÜe
 )

73  ()
gems_sy¡em_±r
->
	`g‘Prof”
Ğ)->
	`g‘ProcU£rMis£s
Ğ
cÜe
 );

74 
	}
}

76 
	gGemsIÁ”çû
::
	$G‘CacheH™s
Ğ
cÜe
, 
Ëv–
 )

79 
	}
}

81 
boŞ
 
	gGemsIÁ”çû
::
	$HasIn¡ruùiÚCouÁ
( )

83  
Œue
;

84 
	}
}

86 
boŞ
 
	gGemsIÁ”çû
::
	$HasCacheMis£s
( )

88  
Œue
;

89 
	}
}

91 
boŞ
 
	gGemsIÁ”çû
::
	$HasCacheH™s
( )

93  
Œue
;

94 
	}
}

96 
	gGemsIÁ”çû
::
	$S‘Sy¡emPŒ
Ğ
Sy¡em
 *
sy¡em_±r
 )

98 
gems_sy¡em_±r
 = 
sy¡em_±r
;

99 
	}
}

101 
	gGemsIÁ”çû
::
	$S‘Ev’tQueuePŒ
Ğ
Ev’tQueue
 *
ev’tQueue_±r
 )

103 
gems_ev’tQueue_±r
 = 
ev’tQueue_±r
;

104 
	}
}

106 
Sy¡em
 *
	gGemsIÁ”çû
::
	$G‘Sy¡emPŒ
( )

108  
gems_sy¡em_±r
;

109 
	}
}

111 
Ev’tQueue
 *
	gGemsIÁ”çû
::
	$G‘Ev’tQueuePŒ
( )

113  
gems_ev’tQueue_±r
;

114 
	}
}

116 
	gGemsIÁ”çû
::
	$S‘D©aAtAdd»ss
Ğ
ušt64_t
 , 
NVMD©aBlock
& )

123 
	}
}

125 
	gGemsIÁ”çû
::
	$G‘D©aAtAdd»ss
Ğ
ušt64_t
 
add»ss
, 
NVMD©aBlock
 *
d©a
 )

127 
memBlockSize
 = 
	`G‘CÚfig
Ğ)->
	`G‘V®ue
( "BusWidth" ) / 8;

128 *
bufãr
;

130 
bufãr
 = 
Ãw
 [ 
memBlockSize
 ];

132 
	`SIMICS_»ad_physiÿl_memÜy_bufãr
Ğ0, 
add»ss
, 
bufãr
, 
memBlockSize
 );

134  
i
 = 0; i < 
memBlockSize
; i++ )

135 
d©a
->
	`S‘By‹
Ğ
i
, (
ušt8_t
)
bufãr
[i] );

137  
Œue
;

138 
	}
}

	@SimInterface/GemsInterface/GemsInterface.h

34 #iâdeà
__NVMAIN_GEMS_H__


35 
	#__NVMAIN_GEMS_H__


	)

37 
	~"¤c/SimIÁ”çû.h
"

39 
şass
 
	gEv’tQueue
;

40 
şass
 
	gSy¡em
;

42 
Çme¥aû
 
	gNVM
 {

44 şas 
	cGemsIÁ”çû
 : 
public
 
SimIÁ”çû


46 
public
:

47 
GemsIÁ”çû
( );

48 ~
GemsIÁ”çû
( );

50 
G‘In¡ruùiÚCouÁ
Ğ
cÜe
 );

51 
G‘CacheMis£s
Ğ
cÜe
, 
Ëv–
 );

52 
G‘CacheH™s
Ğ
cÜe
, 
Ëv–
 );

53 
G‘U£rMis£s
Ğ
cÜe
 );

55 
boŞ
 
HasIn¡ruùiÚCouÁ
( );

56 
boŞ
 
HasCacheMis£s
( );

57 
boŞ
 
HasCacheH™s
( );

59 
G‘D©aAtAdd»ss
Ğ
ušt64_t
 
add»ss
, 
NVMD©aBlock
 *
d©a
 );

60 
S‘D©aAtAdd»ss
Ğ
ušt64_t
 
add»ss
, 
NVMD©aBlock
& 
d©a
 );

62 
S‘Sy¡emPŒ
Ğ
Sy¡em
 *
sy¡em_±r
 );

63 
S‘Ev’tQueuePŒ
Ğ
Ev’tQueue
 *
ev’tQueue_±r
 );

65 
Sy¡em
 *
G‘Sy¡emPŒ
( );

66 
Ev’tQueue
 *
G‘Ev’tQueuePŒ
( );

68 
	g´iv©e
:

69 
Sy¡em
 *
gems_sy¡em_±r
;

70 
Ev’tQueue
 *
	ggems_ev’tQueue_±r
;

	@SimInterface/NullInterface/NullInterface.cpp

34 
	~<¡dlib.h
>

35 
	~"SimIÁ”çû/NuÎIÁ”çû/NuÎIÁ”çû.h
"

37 
usšg
 
Çme¥aû
 
	gNVM
;

39 
	gNuÎIÁ”çû
::
	$NuÎIÁ”çû
( )

41 
	}
}

43 
NuÎIÁ”çû
::~
	$NuÎIÁ”çû
( )

45 
	}
}

47 
NuÎIÁ”çû
::
	$G‘In¡ruùiÚCouÁ
( )

50 
	}
}

52 
	gNuÎIÁ”çû
::
	$G‘CacheMis£s
( , )

55 
	}
}

57 
	gNuÎIÁ”çû
::
	$G‘CacheH™s
( , )

60 
	}
}

62 
boŞ
 
	gNuÎIÁ”çû
::
	$HasIn¡ruùiÚCouÁ
( )

64  
çl£
;

65 
	}
}

67 
boŞ
 
	gNuÎIÁ”çû
::
	$HasCacheMis£s
( )

69  
çl£
;

70 
	}
}

72 
boŞ
 
	gNuÎIÁ”çû
::
	$HasCacheH™s
( )

74  
çl£
;

75 
	}
}

	@SimInterface/NullInterface/NullInterface.h

34 #iâdeà
__NULLINTERFACE_H__


35 
	#__NULLINTERFACE_H__


	)

37 
	~"¤c/SimIÁ”çû.h
"

39 
Çme¥aû
 
	gNVM
 {

41 şas 
	cNuÎIÁ”çû
 : 
public
 
SimIÁ”çû


43 
public
:

44 
NuÎIÁ”çû
( );

45 ~
NuÎIÁ”çû
( );

47 
G‘In¡ruùiÚCouÁ
Ğ
cÜe
 );

48 
G‘CacheMis£s
Ğ
cÜe
, 
Ëv–
 );

49 
G‘CacheH™s
Ğ
cÜe
, 
Ëv–
 );

51 
boŞ
 
HasIn¡ruùiÚCouÁ
( );

52 
boŞ
 
HasCacheMis£s
( );

53 
boŞ
 
HasCacheH™s
( );

	@Simulators/gem5/NVMainControl.cc

62 
	~"SimIÁ”çû/NuÎIÁ”çû/NuÎIÁ”çû.h
"

63 
	~"Uts/HookFaùÜy.h
"

64 
	~"ba£/ırštf.hh
"

65 
	~"ba£/¡©i¡ics.hh
"

66 
	~"debug/RubyMemÜy.hh
"

67 
	~"mem/ruby/commÚ/Add»ss.hh
"

68 
	~"mem/ruby/commÚ/CÚsum”.hh
"

69 
	~"mem/ruby/commÚ/Glob®.hh
"

70 
	~"mem/ruby/ÃtwÜk/N‘wÜk.hh
"

71 
	~"mem/ruby/´of”/Prof”.hh
"

72 
	~"mem/ruby/¦icc_š‹rçû/N‘wÜkMes§ge.hh
"

73 
	~"mem/ruby/¦icc_š‹rçû/RubySlicc_CompÚ’tM­pšg.hh
"

74 
	~"SimuÏtÜs/gem5/NVMašCÚŒŞ.hh
"

75 
	~"mem/ruby/sy¡em/Sy¡em.hh
"

76 
	~"mem/·ck‘.hh
"

77 
	~"mem/»que¡.hh
"

78 
	~"mem/sim¶e_mem.hh
"

80 
usšg
 
Çme¥aû
 
	gNVM
;

82 
şass
 
	gCÚsum”
;

86 
	gNVMašCÚŒŞ
::
	$NVMašCÚŒŞ
(cÚ¡ 
P¬ams
 *
p
)

87 : 
	$MemÜyCÚŒŞ
(
p
)

89 *
cfg·¿ms
;

90 *
cfgv®ues
;

91 *
ı¬am
, *
cv®ue
;

93 *
§v•Œ1
, *
§v•Œ2
;

95 
m_nvmašPŒ
 = 
NULL
;

96 
m_¦Ù_avaabË
 = 
Œue
;

97 
m_»ŒyReque¡
 = 
NULL
;

98 
m_»¶ayšg
 = 
çl£
;

100 
m_nvmašCÚfigP©h
 = 
p
->
cÚfig
;

102 
m_nvmašCÚfig
 = 
Ãw
 
	`CÚfig
( );

104 
m_nvmašCÚfig
->
	`R—d
Ğ
m_nvmašCÚfigP©h
 );

105 
¡d
::
cout
 << "NVMašCÚŒŞ: R—dšg NVMaš cÚfig fe: " << 
m_nvmašCÚfigP©h
 << "." << std::
’dl
;

108 
cfg·¿ms
 = (*)
p
->
cÚfig·¿ms
.
	`c_¡r
();

109 
cfgv®ues
 = (*)
p
->
cÚfigv®ues
.
	`c_¡r
();

111  
ı¬am
 = 
	`¡¹ok_r
Ğ
cfg·¿ms
, ",", &
§v•Œ1
 ), 
cv®ue
 = sŒtok_rĞ
cfgv®ues
, ",", &
§v•Œ2
 )

112 ; (
ı¬am
 && 
cv®ue
è; c·¿m = 
	`¡¹ok_r
Ğ
NULL
, ",", &
§v•Œ1
 ), cv®uğ¡¹ok_rĞNULL, ",", &
§v•Œ2
) )

114 
¡d
::
cout
 << "NVMaš: Ov”ridšg…¬am‘” `" << 
ı¬am
 << "' w™h `" << 
cv®ue
 << "'" << std::
’dl
;

115 
m_nvmašCÚfig
->
	`S‘V®ue
Ğ
ı¬am
, 
cv®ue
 );

118 
m_BusWidth
 = 
m_nvmašCÚfig
->
	`G‘V®ue
( "BusWidth" );

119 
m_tBURST
 = 
m_nvmašCÚfig
->
	`G‘V®ue
( "tBURST" );

120 
m_RATE
 = 
m_nvmašCÚfig
->
	`G‘V®ue
( "RATE" );

122 
m_bªks
 = 
m_nvmašCÚfig
->
	`G‘V®ue
( "BANKS" );

123 
m_¿nks
 = 
m_nvmašCÚfig
->
	`G‘V®ue
( "RANKS" );

124 
m_¿nksP”Dimm
 = (
m_nvmašCÚfig
->
	`KeyExi¡s
Ğ"RªksP”DIMM" ) ? m_nvmašCÚfig->
	`G‘V®ue
( "RanksPerDIMM" ) : 1);

125 
	}
}

128 
	gNVMašCÚŒŞ
::
	$š™
()

130 
m_nvmašPŒ
 = 
Ãw
 
NVM
::
	`NVMaš
( );

131 
m_¡©sPŒ
 = 
Ãw
 
NVM
::
	`Sts
( );

132 
m_nvmašSimIÁ”çû
 = 
Ãw
 
NVM
::
	`NuÎIÁ”çû
( );

133 
m_nvmašEv’tQueue
 = 
Ãw
 
NVM
::
	`Ev’tQueue
( );

134 
m_nvmašGlob®Ev’tQueue
 = 
Ãw
 
NVM
::
	`Glob®Ev’tQueue
( );

135 
m_gG’”©Ü
 = 
Ãw
 
NVM
::
	`TagG’”©Ü
( 1000 );

137 
m_nvmašCÚfig
->
	`S‘SimIÁ”çû
Ğ
m_nvmašSimIÁ”çû
 );

139 
¡©Prš‹r
.
nvmašPŒ
 = 
m_nvmašPŒ
;

140 
¡©Re£‹r
.
nvmašPŒ
 = 
m_nvmašPŒ
;

142 ifĞ
m_nvmašCÚfig
->
	`KeyExi¡s
( "StatsFile" ) )

144 
¡©Prš‹r
.
¡©SŒ—m
.
	`İ’
Ğ
m_nvmašCÚfig
->
	`G‘SŒšg
Ğ"StsFe" ).
	`c_¡r
(),

145 
¡d
::
of¡»am
::
out
 | std::of¡»am::
­p
 );

148 ::
Sts
::
	`»gi¡”DumpC®lback
Ğ&
¡©Prš‹r
 );

149 ::
Sts
::
	`»gi¡”Re£tC®lback
Ğ&
¡©Re£‹r
 );

151 
	`S‘Ev’tQueue
Ğ
m_nvmašEv’tQueue
 );

152 
	`S‘Sts
Ğ
m_¡©sPŒ
 );

153 
	`S‘TagG’”©Ü
Ğ
m_gG’”©Ü
 );

155 
m_nvmašGlob®Ev’tQueue
->
	`S‘F»qu’cy
Ğ
m_nvmašCÚfig
->
	`G‘EÃrgy
( "CLK" ) * 1000000.0 );

156 
	`S‘Glob®Ev’tQueue
Ğ
m_nvmašGlob®Ev’tQueue
 );

160 
¡d
::
veùÜ
<¡d::
¡ršg
>& 
hookLi¡
 = 
m_nvmašCÚfig
->
	`G‘Hooks
( );

162  
size_t
 
i
 = 0; i < 
hookLi¡
.
	`size
( ); i++ )

164 
¡d
::
cout
 << "C»©šg hook " << 
hookLi¡
[
i
] << std::
’dl
;

166 
NVMObjeù
 *
hook
 = 
HookFaùÜy
::
	`C»©eHook
Ğ
hookLi¡
[
i
] );

168 ifĞ
hook
 !ğ
NULL
 )

170 
	`AddHook
Ğ
hook
 );

171 
hook
->
	`S‘P¬’t
Ğ
this
 );

172 
hook
->
	`In™
Ğ
m_nvmašCÚfig
 );

176 
¡d
::
cout
 << "Warning: Could‚ot create‡ hook‚amed `"

177 << 
hookLi¡
[
i
] << "'." << 
¡d
::
’dl
;

182 
	`AddChd
Ğ
m_nvmašPŒ
 );

183 
m_nvmašPŒ
->
	`S‘P¬’t
Ğ
this
 );

184 
m_nvmašGlob®Ev’tQueue
->
	`AddSy¡em
Ğ
m_nvmašPŒ
, 
m_nvmašCÚfig
 );

185 
m_nvmašPŒ
->
	`S‘CÚfig
Ğ
m_nvmašCÚfig
 );

186 
	}
}

188 
	gNVMašCÚŒŞ
::~
	$NVMašCÚŒŞ
()

190 
d–‘e
 
m_nvmašPŒ
;

191 
d–‘e
 
m_nvmašSimIÁ”çû
;

192 
d–‘e
 
m_nvmašEv’tQueue
;

193 
d–‘e
 
m_nvmašCÚfig
;

194 
	}
}

198 
	gNVMašCÚŒŞ
::
	$g‘Row
(cÚ¡ 
physiÿl_add»ss_t
) const

201 
	}
}

205 
	gNVMašCÚŒŞ
::
	$g‘Rªk
(cÚ¡ 
physiÿl_add»ss_t
) const

208 
	}
}

212 
	gNVMašCÚŒŞ
::
	$g‘Bªk
(cÚ¡ 
physiÿl_add»ss_t
) const

215 
	}
}

219 
	gNVMašCÚŒŞ
::
	$g‘ChªÃl
(cÚ¡ 
physiÿl_add»ss_t
) const

222 
	}
}

225 
	gNVMašCÚŒŞ
::
	$g‘BªksP”Rªk
()

227  
m_bªks
;

228 
	}
}

231 
	gNVMašCÚŒŞ
::
	$g‘RªksP”Dimm
()

233  
m_¿nksP”Dimm
;

234 
	}
}

237 
	gNVMašCÚŒŞ
::
	$g‘DimmsP”ChªÃl
()

239  (
m_¿nks
 / 
m_¿nksP”Dimm
);

240 
	}
}

243 
	gNVMašCÚŒŞ
::
	$»£t
()

248 
m_msg_couÁ”
 = 0;

251 
m_»¶ayšg
 = 
çl£
;

252 
	}
}

255 
	gNVMašCÚŒŞ
::
	$d¿š
(
D¿šMªag”
 *)

257 
	`DPRINTF
(
RubyMemÜy
, "MemoryController drain\n");

258 if(
m_ev’t
.
	`scheduËd
()) {

259 
	`descheduË
(
m_ev’t
);

262 
	}
}

265 
	gNVMašCÚŒŞ
::
	$’queue
(cÚ¡ 
MsgPŒ
& 
mes§ge
, 
Cyşes
 
Ï‹ncy
)

267 
Cyşes
 
¬riv®_time
 = 
	`curCyşe
(è+ 
Ï‹ncy
;

269 cÚ¡ 
MemÜyMsg
* 
memMess
 = 
§ã_ÿ¡
<cÚ¡ MemÜyMsg*>(
mes§ge
.
	`g‘
());

270 
physiÿl_add»ss_t
 
addr
 = 
memMess
->
	`g‘Addr
().
	`g‘Add»ss
();

271 
MemÜyReque¡Ty³
 
ty³
 = 
memMess
->
	`g‘Ty³
();

272 
boŞ
 
is_mem_»ad
 = (
ty³
 =ğ
MemÜyReque¡Ty³_MEMORY_READ
);

274 
MemÜyNode
 *
thisReq
 = 
Ãw
 
	`MemÜyNode
(
¬riv®_time
, 
mes§ge
, 
addr
,

275 
is_mem_»ad
, !is_mem_read);

276 
	`’queueMemRef
(
thisReq
);

277 
	}
}

280 
	gNVMašCÚŒŞ
::
	$’queueMemRef
(
MemÜyNode
 *
memRef
)

282 
m_msg_couÁ”
++;

283 
memRef
->
m_msg_couÁ”
 = m_msg_counter;

285 
	`DPRINTF
(
RubyMemÜy
, "New memory„equest%7d: %#08x %c‡rrived‡t %lld\n",

286 
m_msg_couÁ”
, ()
memRef
->
m_addr
,

287 
memRef
->
m_is_mem_»ad
 ? 'R':'W',

288 
memRef
->
m_time
 * 
g_sy¡em_±r
->
	`şockP”iod
());

294 ifĞ
m_»¶ayšg
 )

296 
	`’queueToDœeùÜy
Ğ
memRef
, 
	`Cyşes
(1) );

300 
Œªsãr_size
;

302 
Œªsãr_size
 = 
m_BusWidth
 / 8;

303 
Œªsãr_size
 *ğ
m_tBURST
 * 
m_RATE
;

306 
NVMašReque¡
 *
»que¡
 = 
Ãw
 
	`NVMašReque¡
( );

307 
ušt8_t
 *
ho¡Addr
;

308 
Add»ss
 
	`ä—dAddr
Ğ
memRef
->
m_addr
 );

310 
ho¡Addr
 = 
Ãw
 
ušt8_t
[ 
Œªsãr_size
 ];

313 ifĞ
g_sy¡em_±r
->
	`g‘MemÜyVeùÜ
(è!ğ
NULL
 )

314 ()
g_sy¡em_±r
->
	`g‘MemÜyVeùÜ
()->
	`»ad
Ğ
ä—dAddr
, 
ho¡Addr
, 
Œªsãr_size
 );

316 
	`mem£t
Ğ
ho¡Addr
, 0, 
Œªsãr_size
 );

332 cÚ¡ 
MemÜyMsg
* 
memMess
 = 
§ã_ÿ¡
<cÚ¡ MemÜyMsg*>(
memRef
->
m_msg±r
.
	`g‘
());

334 
»que¡
->
d©a
.
	`S‘Size
Ğ
Œªsãr_size
 );

335 
»que¡
->
ŞdD©a
.
	`S‘Size
Ğ
Œªsãr_size
 );

337 
»que¡
->
acûss
 = 
UNKNOWN_ACCESS
;

338 
i
 = 0; i < 
Œªsãr_size
; i++)

343 
»que¡
->
ŞdD©a
.
	`S‘By‹
(
i
, *(
ho¡Addr
 + i));

344 ià(
memRef
->
m_is_mem_»ad
)

345 
»que¡
->
d©a
.
	`S‘By‹
(
i
, *(
ho¡Addr
 + i));

347 
»que¡
->
d©a
.
	`S‘By‹
(
i
, 
memMess
->
m_D©aBlk
.
	`g‘By‹
(i));

349 
»que¡
->
add»ss
.
	`S‘PhysiÿlAdd»ss
(
memRef
->
m_addr
);

350 
»que¡
->
¡©us
 = 
MEM_REQUEST_INCOMPLETE
;

351 
»que¡
->
ty³
 = (
memRef
->
m_is_mem_»ad
è? 
READ
 : 
WRITE
;

353 
d–‘e
 
ho¡Addr
;

355 if(!
m_¦Ù_avaabË
)

357 
	`DPRINTF
(
RubyMemÜy
, "enqueueMemRef: No slots‡vailable, but got„equest for‡ddress 0x%X\n",

358 
memRef
->
m_addr
);

361 
¡d
::
veùÜ
<
NVMObjeù
 *>& 
´eHooks
 = 
	`G‘Hooks
Ğ
NVMHOOK_PREISSUE
 );

362 
¡d
::
veùÜ
<
NVMObjeù
 *>& 
po¡Hooks
 = 
	`G‘Hooks
Ğ
NVMHOOK_POSTISSUE
 );

363 
¡d
::
veùÜ
<
NVMObjeù
 *>::
™”©Ü
 
™
;

365 
boŞ
 
ÿnQueue
 = 
	`G‘Chd
Ğ)->
	`IsIssuabË
(
»que¡
);

367 if(
ÿnQueue
)

370  
™
 = 
´eHooks
.
	`begš
(); iˆ!ğ´eHooks.
	`’d
(); it++ )

372 (*
™
)->
	`S‘P¬’t
Ğ
this
 );

373 (*
™
)->
	`IssueCommªd
Ğ
»que¡
 );

376 ()
m_nvmašPŒ
->
	`IssueCommªd
(
»que¡
);

378 
m_šput_queue
.
	`push_back
(
memRef
);

379 
m_¦Ù_avaabË
 = 
Œue
;

382 ifĞ
»que¡
 !ğ
NULL
 )

384  
™
 = 
po¡Hooks
.
	`begš
(); iˆ!ğpo¡Hooks.
	`’d
(); it++ )

386 (*
™
)->
	`S‘P¬’t
Ğ
this
 );

387 (*
™
)->
	`IssueCommªd
Ğ
»que¡
 );

393 
m_¦Ù_avaabË
 = 
çl£
;

394 
¡d
::
cout
 << "Could‚Ù issue. R‘ryšg„eque¡ fÜ‡dd»s 0x" << std::
hex
 << 
memRef
->
m_addr
 << std::
dec
 << std::
’dl
;

396 
	`as£¹
Ğ
m_»ŒyReque¡
 =ğ
NULL
 );

397 
	`as£¹
Ğ
m_»ŒyRefs
.
	`em±y
() );

399 
m_»ŒyReque¡
 = 
»que¡
;

408 
m_»ŒyRefs
.
	`push_back
Ğ
memRef
 );

412 if(!
m_ev’t
.
	`scheduËd
())

414 
	`scheduË
(
m_ev’t
, 
	`ÃxtCyşe
());

416 
	}
}

419 
	gNVMašCÚŒŞ
::
	$dequeue
()

421 
	`as£¹
(
	`isR—dy
());

422 
MemÜyNode
 *
»q
 = 
m_»¥Ú£_queue
.
	`äÚt
();

423 
m_»¥Ú£_queue
.
	`pİ_äÚt
();

424 
d–‘e
 
»q
;

425 
	}
}

427 cÚ¡ 
Mes§ge
*

428 
	gNVMašCÚŒŞ
::
	$³ek
()

430 
MemÜyNode
 *
node
 = 
	`³ekNode
();

431 
Mes§ge
* 
msg_±r
 = 
node
->
m_msg±r
.
	`g‘
();

432 
	`as£¹
(
msg_±r
 !ğ
NULL
);

433  
msg_±r
;

434 
	}
}

436 
MemÜyNode
*

437 
	gNVMašCÚŒŞ
::
	$³ekNode
()

439 
	`as£¹
(
	`isR—dy
());

440 
MemÜyNode
 *
»q
 = 
m_»¥Ú£_queue
.
	`äÚt
();

441 
	`DPRINTF
(
RubyMemÜy
, "Peek: memory„equest%7d: %#08x %c\n",

442 
»q
->
m_msg_couÁ”
,„eq->
m_addr
,„eq->
m_is_mem_»ad
 ? 'R':'W');

444  
»q
;

445 
	}
}

447 
boŞ


448 
	gNVMašCÚŒŞ
::
	$isR—dy
()

450 
boŞ
 
rv
;

452 
rv
 = ((!
m_»¥Ú£_queue
.
	`em±y
()) &&

453 (
m_»¥Ú£_queue
.
	`äÚt
()->
m_time
 <ğ
g_sy¡em_±r
->
	`curCyşe
()));

455  
rv
;

456 
	}
}

459 
	gNVMašCÚŒŞ
::
	$£tCÚsum”
(
CÚsum”
* 
cÚsum”_±r
)

461 
m_cÚsum”_±r
 = 
cÚsum”_±r
;

462 
	}
}

465 
	gNVMašCÚŒŞ
::
´št
(
¡d
::
o¡»am
& 
out
) const

470 
NVMašCÚŒŞ
::
	$ş—rSts
() const

472 
	}
}

475 
NVMašCÚŒŞ
::
´štSts
(
¡d
::
o¡»am
& 
out
) const

477 
as£¹
Ğ
m_nvmašPŒ
 !ğ
NULL
 );

479 
	gm_nvmašPŒ
->
C®cuÏ‹Sts
( );

480 
	gm_nvmašPŒ
->
G‘Sts
()->
PrštAÎ
Ğ
out
 );

485 
	gNVMašCÚŒŞ
::
	$’queueToDœeùÜy
(
MemÜyNode
 *
»q
, 
Cyşes
 
Ï‹ncy
)

487 
Time
 
¬riv®_time
 = 
	`şockEdge
(
Ï‹ncy
);

488 
Cyşes
 
ruby_¬riv®_time
 = 
g_sy¡em_±r
->
	`ticksToCyşes
(
¬riv®_time
);

489 
»q
->
m_time
 = 
ruby_¬riv®_time
;

490 
m_»¥Ú£_queue
.
	`push_back
(
»q
);

492 
	`DPRINTF
(
RubyMemÜy
, "Enqueueing msg %#08x %c backo directory‡t %lld\n",

493 
»q
->
m_addr
,„eq->
m_is_mem_»ad
 ? 'R':'W',

494 
¬riv®_time
 * 
g_sy¡em_±r
->
	`şockP”iod
());

497 
m_cÚsum”_±r
->
	`scheduËEv’tAbsŞu‹
(
¬riv®_time
);

498 
	}
}

501 
boŞ


502 
	gNVMašCÚŒŞ
::
	$¬eNSlÙsAvaabË
(
n
)

506  
m_¦Ù_avaabË
;

507 
	}
}

511 
	gNVMašCÚŒŞ
::
	$execu‹Cyşe
()

513 
m_nvmašPŒ
->
	`Cyşe
( 1 );

514 
	}
}

517 
	gNVMašCÚŒŞ
::
£rŸlize
(
¡d
::
o¡»am
& )

523 
NVMašCÚŒŞ
::
un£rŸlize
(
Checkpošt
 * , cÚ¡ 
¡d
::
¡ršg
 & )

530 
m_»¶ayšg
 = 
Œue
;

533 
boŞ


534 
	gNVMašCÚŒŞ
::
	$funùiÚ®R—dBufãrs
(
Pack‘
 *
pkt
)

539 
¡d
::
li¡
<
MemÜyNode
 *>::
™”©Ü
 
™
;

541  
™
 = 
m_šput_queue
.
	`begš
(); iˆ!ğm_šput_queue.
	`’d
(); it++ )

543 
Mes§ge
 *
msg_±r
 = (*
™
)->
m_msg±r
.
	`g‘
();

544 ià(
msg_±r
->
	`funùiÚ®R—d
(
pkt
))

546  
Œue
;

550  
™
 = 
m_»¥Ú£_queue
.
	`begš
(); iˆ!ğm_»¥Ú£_queue.
	`’d
(); it++ )

552 
Mes§ge
 *
msg_±r
 = (*
™
)->
m_msg±r
.
	`g‘
();

553 ià(
msg_±r
->
	`funùiÚ®R—d
(
pkt
))

555  
Œue
;

559  
çl£
;

560 
	}
}

563 
ušt32_t


564 
	gNVMašCÚŒŞ
::
	$funùiÚ®Wr™eBufãrs
(
Pack‘
 *
pkt
)

566 
ušt32_t
 
num_funùiÚ®_wr™es
 = 0;

567 
¡d
::
li¡
<
MemÜyNode
 *>::
™”©Ü
 
™
;

569  
™
 = 
m_šput_queue
.
	`begš
(); iˆ!ğm_šput_queue.
	`’d
(); it++ )

571 
Mes§ge
 *
msg_±r
 = (*
™
)->
m_msg±r
.
	`g‘
();

572 ià(
msg_±r
->
	`funùiÚ®Wr™e
(
pkt
))

574 
num_funùiÚ®_wr™es
++;

578  
™
 = 
m_»¥Ú£_queue
.
	`begš
(); iˆ!ğm_»¥Ú£_queue.
	`’d
(); it++ )

580 
Mes§ge
 *
msg_±r
 = (*
™
)->
m_msg±r
.
	`g‘
();

581 ià(
msg_±r
->
	`funùiÚ®Wr™e
(
pkt
))

583 
num_funùiÚ®_wr™es
++;

587  
num_funùiÚ®_wr™es
;

588 
	}
}

590 
boŞ


591 
	gNVMašCÚŒŞ
::
	$Reque¡Com¶‘e
(
NVMašReque¡
 *
üeq
)

594 
¡d
::
li¡
<
MemÜyNode
 *>::
™”©Ü
 
m™
;

596 
m™
 = 
m_šput_queue
.
	`begš
(); m™ !ğm_šput_queue.
	`’d
(); mit++)

598 
MemÜyNode
 *
memRef
 = (*
m™
);

600 if(
memRef
->
m_addr
 =ğ
üeq
->
add»ss
.
	`G‘PhysiÿlAdd»ss
())

602 
m_šput_queue
.
	`”a£
Ğ
m™
 );

603 
	`’queueToDœeùÜy
Ğ
memRef
, 
	`Cyşes
(1) );

609 
m_¦Ù_avaabË
 = 
Œue
;

611 ifĞ
m_»ŒyReque¡
 !ğ
NULL
 )

613 
	`DPRINTF
(
RubyMemÜy
, "RequestComplete: Attemptingo„e-issue„equest for 0x%X\n",

614 
m_»ŒyReque¡
->
add»ss
.
	`G‘PhysiÿlAdd»ss
());

616 
boŞ
 
’queued
 = 
m_nvmašPŒ
->
	`IssueCommªd
(
m_»ŒyReque¡
);

618 if(
’queued
)

620 
m_šput_queue
.
	`push_back
(
m_»ŒyRefs
.
	`äÚt
());

621 
m_¦Ù_avaabË
 = 
Œue
;

623 
m_»ŒyRefs
.
	`ş—r
( );

624 
m_»ŒyReque¡
 = 
NULL
;

631 
m_¦Ù_avaabË
 = 
çl£
;

632 
	`DPRINTF
(
RubyMemÜy
, "RequestComplete: Could‚ot issue„etry„equest for‡ddress 0x%X\n",

633 
m_»ŒyReque¡
->
add»ss
.
	`G‘PhysiÿlAdd»ss
());

637  
Œue
;

638 
	}
}

641 
	gNVMašCÚŒŞ
::
	$wakeup
()

643 
	`execu‹Cyşe
();

645 if(!
m_ev’t
.
	`scheduËd
())

647 
	`scheduË
(
m_ev’t
, 
	`şockEdge
(
	`Cyşes
(1)));

649 
	}
}

651 
	gNVMašCÚŒŞ
::
NVMašStPrš‹r
::
	$´oûss
( )

653 
	`as£¹
(
nvmašPŒ
 !ğ
NULL
);

655 
nvmašPŒ
->
	`C®cuÏ‹Sts
( );

656 
¡d
::
o¡»am
& 
»fSŒ—m
 = (
¡©SŒ—m
.
	`is_İ’
()è? stSŒ—m : std::
cout
;

657 
nvmašPŒ
->
	`G‘Sts
()->
	`PrštAÎ
Ğ
»fSŒ—m
 );

658 
	}
}

660 
	gNVMašCÚŒŞ
::
NVMašStRe£‹r
::
	$´oûss
()

662 
	`as£¹
(
nvmašPŒ
 !ğ
NULL
);

664 
nvmašPŒ
->
	`G‘Sts
()->
	`Re£tAÎ
( );

665 
	}
}

667 
NVMašCÚŒŞ
 *

668 
	gNVMMemÜyCÚŒŞP¬ams
::
	$ü—‹
()

670  
Ãw
 
	`NVMašCÚŒŞ
(
this
);

671 
	}
}

	@Simulators/gem5/NVMainControl.hh

62 #iâdeà
__MEM_RUBY_SYSTEM_NVMAIN_CONTROL_HH__


63 
	#__MEM_RUBY_SYSTEM_NVMAIN_CONTROL_HH__


	)

65 
	~<io¡»am
>

66 
	~<li¡
>

67 
	~<¡ršg
>

69 
	~"NVM/nvmaš.h
"

70 
	~"ba£/ÿÎback.hh
"

71 
	~"šşude/NVMašReque¡.h
"

72 
	~"mem/´ÙocŞ/MemÜyMsg.hh
"

73 
	~"mem/ruby/commÚ/Add»ss.hh
"

74 
	~"mem/ruby/commÚ/CÚsum”.hh
"

75 
	~"mem/ruby/commÚ/Glob®.hh
"

76 
	~"mem/ruby/´of”/MemCÁ¾Prof”.hh
"

77 
	~"mem/ruby/¦icc_š‹rçû/Mes§ge.hh
"

78 
	~"mem/ruby/sy¡em/MemÜyCÚŒŞ.hh
"

79 
	~"mem/ruby/sy¡em/MemÜyNode.hh
"

80 
	~"mem/ruby/sy¡em/Sy¡em.hh
"

81 
	~"mem/physiÿl.hh
"

82 
	~"·¿ms/NVMMemÜyCÚŒŞ.hh
"

83 
	~"sim/şocked_objeù.hh
"

84 
	~"¤c/CÚfig.h
"

85 
	~"¤c/Ev’tQueue.h
"

86 
	~"¤c/NVMObjeù.h
"

87 
	~"¤c/SimIÁ”çû.h
"

89 
şass
 
	gNVMašCÚŒŞ
 : 
public
 
MemÜyCÚŒŞ
,…ubliø
	gNVM
::
NVMObjeù


91 
public
:

92 
NVMMemÜyCÚŒŞP¬ams
 
	tP¬ams
;

94 
NVMašCÚŒŞ
(cÚ¡ 
P¬ams
 *
p
);

95 
š™
();

97 ~
NVMašCÚŒŞ
();

99 
wakeup
();

101 
£tCÚsum”
(
CÚsum”
* 
cÚsum”_±r
);

102 
CÚsum”
* 
g‘CÚsum”
(è{  
	gm_cÚsum”_±r
; };

103 
£tDesütiÚ
(cÚ¡ 
¡d
::
¡ršg
& 
Çme
è{ 
m_desütiÚ
 =‚ame; };

104 
	g¡d
::
¡ršg
 
g‘DesütiÚ
(è{  
m_desütiÚ
; };

106 
’queue
(cÚ¡ 
MsgPŒ
& 
mes§ge
, 
Cyşes
 
Ï‹ncy
 );

107 
’queueMemRef
(
MemÜyNode
 *
memRef
);

108 
dequeue
();

109 cÚ¡ 
Mes§ge
* 
³ek
();

110 
MemÜyNode
 *
³ekNode
();

111 
boŞ
 
isR—dy
();

112 
boŞ
 
¬eNSlÙsAvaabË
(
n
);

114 
´št
(
¡d
::
o¡»am
& 
out
) const;

115 
ş—rSts
() const;

116 
´štSts
(
¡d
::
o¡»am
& 
out
) const;

119 
d¿š
(
D¿šMªag”
 *
dm
);

121 cÚ¡ 
g‘Row
(cÚ¡ 
physiÿl_add»ss_t
) const;

122 cÚ¡ 
g‘Bªk
(cÚ¡ 
physiÿl_add»ss_t
) const;

123 cÚ¡ 
g‘Rªk
(cÚ¡ 
physiÿl_add»ss_t
) const;

124 cÚ¡ 
g‘ChªÃl
(cÚ¡ 
physiÿl_add»ss_t
) const;

126 
g‘BªksP”Rªk
();

127 
g‘RªksP”Dimm
();

128 
g‘DimmsP”ChªÃl
();

130 
boŞ
 
funùiÚ®R—dBufãrs
(
Pack‘
 *
pkt
);

131 
ušt32_t
 
funùiÚ®Wr™eBufãrs
(
Pack‘
 *
pkt
);

133 
£rŸlize
(
¡d
::
o¡»am
 &
os
);

134 
un£rŸlize
(
Checkpošt
 *
ı
, cÚ¡ 
¡d
::
¡ršg
 &
£ùiÚ
);

136 
»£t
();

137 
Cyşe
(
NVM
::
ncyşe_t
) {}

139 
boŞ
 
Reque¡Com¶‘e
(
NVM
::
NVMašReque¡
 *
üeq
);

141 
	g´iv©e
:

142 şas 
	cNVMašStPrš‹r
 : 
public
 
C®lback


144 
public
:

145 
´oûss
();

147 
	gNVM
::
NVMaš
 *
nvmašPŒ
;

148 
	g¡d
::
of¡»am
 
¡©SŒ—m
;

151 şas 
	cNVMašStRe£‹r
 : 
public
 
C®lback


153 
public
:

154 
´oûss
();

156 
	gNVM
::
NVMaš
 *
nvmašPŒ
;

160 
’queueToDœeùÜy
(
MemÜyNode
 *
»q
, 
Cyşes
 
Ï‹ncy
);

161 
execu‹Cyşe
();

163 
	gNVM
::
NVMašReque¡
 *
m_»ŒyReque¡
;

164 
	g¡d
::
li¡
<
MemÜyNode
 *> 
m_»ŒyRefs
;

169 
NVMašStPrš‹r
 
	g¡©Prš‹r
;

170 
NVMašStRe£‹r
 
	g¡©Re£‹r
;

172 
CÚsum”
* 
	gm_cÚsum”_±r
;

173 
	g¡d
::
¡ršg
 
m_desütiÚ
;

174 
	gm_msg_couÁ”
;

175 
	gm_awak’ed
;

177 
	gm_BusWidth
, 
	gm_tBURST
, 
	gm_RATE
;

178 
	gm_bªks
, 
	gm_¿nks
, 
	gm_¿nksP”Dimm
;

180 
boŞ
 
	gm_¦Ù_avaabË
;

181 
boŞ
 
	gm_»¶ayšg
;

182 
	gNVM
::
NVMaš
 *
m_nvmašPŒ
;

183 
	gNVM
::
SimIÁ”çû
 *
m_nvmašSimIÁ”çû
;

184 
	gNVM
::
CÚfig
 *
m_nvmašCÚfig
;

185 
	gNVM
::
Ev’tQueue
 *
m_nvmašEv’tQueue
;

186 
	gNVM
::
Glob®Ev’tQueue
 *
m_nvmašGlob®Ev’tQueue
;

187 
	gNVM
::
TagG’”©Ü
 *
m_gG’”©Ü
;

188 
	gNVM
::
Sts
 *
m_¡©sPŒ
;

189 
	g¡d
::
¡ršg
 
m_nvmašCÚfigP©h
;

191 
	g¡d
::
li¡
<
MemÜyNode
 *> 
m_»¥Ú£_queue
;

192 
	g¡d
::
li¡
<
MemÜyNode
 *> 
m_šput_queue
;

	@Simulators/gem5/nvmain_mem.cc

45 
	~"SimIÁ”çû/Gem5IÁ”çû/Gem5IÁ”çû.h
"

46 
	~"SimuÏtÜs/gem5/nvmaš_mem.hh
"

47 
	~"Uts/HookFaùÜy.h
"

49 
	~"ba£/¿ndom.hh
"

50 
	~"ba£/¡©i¡ics.hh
"

51 
	~"debug/NVMaš.hh
"

52 
	~"debug/NVMašMš.hh
"

54 
usšg
 
Çme¥aû
 
	gNVM
;

56 
NVMašMemÜy
 *
	gNVMašMemÜy
::
ma¡”In¡ªû
 = 
NULL
;

58 
	gNVMašMemÜy
::
	$NVMašMemÜy
(cÚ¡ 
P¬ams
 *
p
)

59 : 
	`Ab¡¿ùMemÜy
(
p
), 
	`şockEv’t
(
this
), 
	`»¥ÚdEv’t
(this),

60 
	`d¿šMªag”
(
NULL
), 
	`Ït
(
p
->
©omic_Ï‹ncy
),

61 
	`Ït_v¬
(
p
->
©omic_v¬Ÿnû
), 
	`nvmaš_©omic
Õ->
©omic_mode
),

62 
	`NVMašW¬mUp
(
p
->
NVMašW¬mUp
), 
	`pÜt
(
	`Çme
(è+ ".pÜt", *
this
)

64 *
cfg·¿ms
;

65 *
cfgv®ues
;

66 *
ı¬am
, *
cv®ue
;

68 *
§v•Œ1
, *
§v•Œ2
;

70 
m_ev’tDriv’
 = 
çl£
;

71 
ÃxtEv’tCyşe
 = 0;

73 
m_nvmašPŒ
 = 
NULL
;

74 
m_Çcked_»que¡s
 = 
çl£
;

76 
m_nvmašCÚfigP©h
 = 
p
->
cÚfig
;

78 
m_nvmašCÚfig
 = 
Ãw
 
	`CÚfig
( );

80 
m_nvmašCÚfig
->
	`R—d
Ğ
m_nvmašCÚfigP©h
 );

81 
¡d
::
cout
 << "NVMašCÚŒŞ: R—dšg NVMaš cÚfig fe: " << 
m_nvmašCÚfigP©h
 << "." << std::
’dl
;

83 
şock
 = 
	`şockP”iod
( );

85 
m_awake
 = 
çl£
;

87 
m_avgAtomicL©’cy
 = 100.0f;

88 
m_numAtomicAcûs£s
 = 0;

90 
»ŒyR—d
 = 
çl£
;

91 
»ŒyWr™e
 = 
çl£
;

92 
»ŒyRe¥
 = 
çl£
;

93 
m_»que¡s_out¡ªdšg
 = 0;

103 
cfg·¿ms
 = (*)
p
->
cÚfig·¿ms
.
	`c_¡r
();

104 
cfgv®ues
 = (*)
p
->
cÚfigv®ues
.
	`c_¡r
();

106  
ı¬am
 = 
	`¡¹ok_r
Ğ
cfg·¿ms
, ",", &
§v•Œ1
 ), 
cv®ue
 = sŒtok_rĞ
cfgv®ues
, ",", &
§v•Œ2
 )

107 ; (
ı¬am
 && 
cv®ue
è; c·¿m = 
	`¡¹ok_r
Ğ
NULL
, ",", &
§v•Œ1
 ), cv®uğ¡¹ok_rĞNULL, ",", &
§v•Œ2
) )

109 
¡d
::
cout
 << "NVMaš: Ov”ridšg…¬am‘” `" << 
ı¬am
 << "' w™h `" << 
cv®ue
 << "'" << std::
’dl
;

110 
m_nvmašCÚfig
->
	`S‘V®ue
Ğ
ı¬am
, 
cv®ue
 );

113 
BusWidth
 = 
m_nvmašCÚfig
->
	`G‘V®ue
( "BusWidth" );

114 
tBURST
 = 
m_nvmašCÚfig
->
	`G‘V®ue
( "tBURST" );

115 
RATE
 = 
m_nvmašCÚfig
->
	`G‘V®ue
( "RATE" );

117 
Ï¡Wakeup
 = 
	`curTick
();

118 
	}
}

121 
	gNVMašMemÜy
::~
	$NVMašMemÜy
()

123 
¡d
::
cout
 << "NVMaš dtÜ c®Ëd" << std::
’dl
;

124 
	}
}

128 
	gNVMašMemÜy
::
	$š™
()

130 ià(!
pÜt
.
	`isCÚÃùed
()) {

131 
	`çl
("NVMašMemÜy % i uncÚÃùed!\n", 
	`Çme
());

133 
pÜt
.
	`£ndRªgeChªge
();

136 ifĞ
ma¡”In¡ªû
 =ğ
NULL
 )

138 
ma¡”In¡ªû
 = 
this
;

140 
m_nvmašPŒ
 = 
Ãw
 
NVM
::
	`NVMaš
( );

141 
m_¡©sPŒ
 = 
Ãw
 
NVM
::
	`Sts
( );

142 
m_nvmašSimIÁ”çû
 = 
Ãw
 
NVM
::
	`Gem5IÁ”çû
( );

143 
m_nvmašEv’tQueue
 = 
Ãw
 
NVM
::
	`Ev’tQueue
( );

144 
m_nvmašGlob®Ev’tQueue
 = 
Ãw
 
NVM
::
	`Glob®Ev’tQueue
( );

145 
m_gG’”©Ü
 = 
Ãw
 
NVM
::
	`TagG’”©Ü
( 1000 );

148 
m_nvmašCÚfig
->
	`G‘BoŞ
Ğ"Ev’tDriv’", 
m_ev’tDriv’
 );

150 
m_nvmašCÚfig
->
	`S‘SimIÁ”çû
Ğ
m_nvmašSimIÁ”çû
 );

152 
¡©Prš‹r
.
nvmašPŒ
 = 
m_nvmašPŒ
;

153 
¡©Re£‹r
.
nvmašPŒ
 = 
m_nvmašPŒ
;

155 ifĞ
m_nvmašCÚfig
->
	`KeyExi¡s
( "StatsFile" ) )

157 
¡©Prš‹r
.
¡©SŒ—m
.
	`İ’
Ğ
m_nvmašCÚfig
->
	`G‘SŒšg
Ğ"StsFe" ).
	`c_¡r
(),

158 
¡d
::
of¡»am
::
out
 | std::of¡»am::
­p
 );

161 
¡©Prš‹r
.
memÜy
 = 
this
;

162 
¡©Prš‹r
.
fÜgdb
 = 
this
;

165 ::
Sts
::
	`»gi¡”DumpC®lback
Ğ&
¡©Prš‹r
 );

166 ::
Sts
::
	`»gi¡”Re£tC®lback
Ğ&
¡©Re£‹r
 );

168 
	`S‘Ev’tQueue
Ğ
m_nvmašEv’tQueue
 );

169 
	`S‘Sts
Ğ
m_¡©sPŒ
 );

170 
	`S‘TagG’”©Ü
Ğ
m_gG’”©Ü
 );

172 
m_nvmašGlob®Ev’tQueue
->
	`S‘F»qu’cy
Ğ
m_nvmašCÚfig
->
	`G‘EÃrgy
( "CPUFreq" ) * 1000000.0 );

173 
	`S‘Glob®Ev’tQueue
Ğ
m_nvmašGlob®Ev’tQueue
 );

178 
¡d
::
veùÜ
<¡d::
¡ršg
>& 
hookLi¡
 = 
m_nvmašCÚfig
->
	`G‘Hooks
( );

180  
size_t
 
i
 = 0; i < 
hookLi¡
.
	`size
( ); i++ )

182 
¡d
::
cout
 << "C»©šg hook " << 
hookLi¡
[
i
] << std::
’dl
;

184 
NVMObjeù
 *
hook
 = 
HookFaùÜy
::
	`C»©eHook
Ğ
hookLi¡
[
i
] );

186 ifĞ
hook
 !ğ
NULL
 )

188 
	`AddHook
Ğ
hook
 );

189 
hook
->
	`S‘P¬’t
Ğ
this
 );

190 
hook
->
	`In™
Ğ
m_nvmašCÚfig
 );

194 
¡d
::
cout
 << "Warning: Could‚ot create‡ hook‚amed `"

195 << 
hookLi¡
[
i
] << "'." << 
¡d
::
’dl
;

200 
	`AddChd
Ğ
m_nvmašPŒ
 );

201 
m_nvmašPŒ
->
	`S‘P¬’t
Ğ
this
 );

202 
m_nvmašGlob®Ev’tQueue
->
	`AddSy¡em
Ğ
m_nvmašPŒ
, 
m_nvmašCÚfig
 );

203 
m_nvmašPŒ
->
	`S‘CÚfig
Ğ
m_nvmašCÚfig
 );

205 
	}
}

208 
	gNVMašMemÜy
::
	$¡¬tup
()

210 
	`DPRINTF
(
NVMaš
, "NVMainMemory: startup() called.\n");

211 
	`DPRINTF
(
NVMašMš
, "NVMainMemory: startup() called.\n");

218 ifĞ!
m_ev’tDriv’
 )

219 
	`scheduË
(
şockEv’t
, 
	`curTick
(è+ 
şock
);

220 
m_awake
 = 
Œue
;

222 
Ï¡Wakeup
 = 
	`curTick
();

223 
	}
}

226 
	gNVMašMemÜy
::
	$wakeup
()

228 
	`DPRINTF
(
NVMaš
, "NVMainMemory: wakeup() called.\n");

229 
	`DPRINTF
(
NVMašMš
, "NVMainMemory: wakeup() called.\n");

230 ifĞ!
m_ev’tDriv’
 )

231 
	`scheduË
(
şockEv’t
, 
	`şockEdge
());

233 
Ï¡Wakeup
 = 
	`curTick
();

234 
	}
}

237 
	gBa£SÏvePÜt
 &

238 
	gNVMašMemÜy
::
g‘SÏvePÜt
(cÚ¡ 
¡d
::
¡ršg
& 
if_Çme
, 
PÜtID
 
idx
)

240 ià(
	gif_Çme
 != "port") {

241  
MemObjeù
::
g‘SÏvePÜt
(
if_Çme
, 
idx
);

243  
	gpÜt
;

248 
	gNVMašMemÜy
::
NVMašStPrš‹r
::
	$´oûss
()

250 
	`as£¹
(
nvmašPŒ
 !ğ
NULL
);

252 ifĞ
memÜy
->
m_ev’tDriv’
 )

254 
	`as£¹
(
	`curTick
(è>ğ
memÜy
->
Ï¡Wakeup
);

255 
Tick
 
¡•Cyşes
 = (
	`curTick
(è- 
memÜy
->
Ï¡Wakeup
è/ memÜy->
şock
;

259 
memÜy
->
m_nvmašGlob®Ev’tQueue
->
	`Cyşe
Ğ
¡•Cyşes
 );

262 
nvmašPŒ
->
	`C®cuÏ‹Sts
();

263 
¡d
::
o¡»am
& 
»fSŒ—m
 = (
¡©SŒ—m
.
	`is_İ’
()è? stSŒ—m : std::
cout
;

264 
nvmašPŒ
->
	`G‘Sts
()->
	`PrštAÎ
Ğ
»fSŒ—m
 );

265 
	}
}

268 
	gNVMašMemÜy
::
NVMašStRe£‹r
::
	$´oûss
()

270 
	`as£¹
(
nvmašPŒ
 !ğ
NULL
);

272 
nvmašPŒ
->
	`Re£tSts
();

273 
nvmašPŒ
->
	`G‘Sts
()->
	`Re£tAÎ
( );

274 
	}
}

277 
	gNVMašMemÜy
::
MemÜyPÜt
::MemÜyPÜt(cÚ¡ 
¡d
::
¡ršg
& 
_Çme
, 
NVMašMemÜy
& 
_memÜy
)

278 : 
SÏvePÜt
(
_Çme
, &
_memÜy
), 
memÜy
(_memÜy), 
	$fÜgdb
(
_memÜy
)

281 
	}
}

284 
AddrRªgeLi¡
 
	gNVMašMemÜy
::
MemÜyPÜt
::
	$g‘AddrRªges
() const

286 
AddrRªgeLi¡
 
¿nges
;

287 
¿nges
.
	`push_back
(
memÜy
.
	`g‘AddrRªge
());

288  
¿nges
;

289 
	}
}

293 
	gNVMašMemÜy
::
	$S‘Reque¡D©a
(
NVMašReque¡
 *
»que¡
, 
Pack‘PŒ
 
pkt
)

295 
ušt8_t
 *
ho¡Addr
;

297 
»que¡
->
d©a
.
	`S‘Size
Ğ
pkt
->
	`g‘Size
() );

298 
»que¡
->
ŞdD©a
.
	`S‘Size
Ğ
pkt
->
	`g‘Size
() );

301 ià(
pkt
->
	`isR—d
())

303 
Reque¡
 *
d©aReq
 = 
Ãw
 
	`Reque¡
(
pkt
->
	`g‘Addr
(),…kt->
	`g‘Size
(), 0, Reque¡::
funcMa¡”Id
);

304 
Pack‘
 *
d©aPkt
 = 
Ãw
 
	`Pack‘
(
d©aReq
, 
MemCmd
::
R—dReq
);

305 
d©aPkt
->
	`®loÿ‹
();

306 
	`doFunùiÚ®Acûss
(
d©aPkt
);

308 
ho¡Addr
 = 
Ãw
 
ušt8_t
[ 
pkt
->
	`g‘Size
() ];

309 
	`memıy
Ğ
ho¡Addr
, 
d©aPkt
->
g‘PŒ
<
ušt8_t
>(), 
pkt
->
	`g‘Size
() );

311 
i
 = 0; i < 
pkt
->
	`g‘Size
(); i++ )

313 
»que¡
->
ŞdD©a
.
	`S‘By‹
(
i
, *(
ho¡Addr
 + i));

314 
»que¡
->
d©a
.
	`S‘By‹
(
i
, *(
ho¡Addr
 + i));

317 
d–‘e
 
d©aPkt
;

318 
d–‘e
 
d©aReq
;

322 
Reque¡
 *
d©aReq
 = 
Ãw
 
	`Reque¡
(
pkt
->
	`g‘Addr
(),…kt->
	`g‘Size
(), 0, Reque¡::
funcMa¡”Id
);

323 
Pack‘
 *
d©aPkt
 = 
Ãw
 
	`Pack‘
(
d©aReq
, 
MemCmd
::
R—dReq
);

324 
d©aPkt
->
	`®loÿ‹
();

325 
	`doFunùiÚ®Acûss
(
d©aPkt
);

327 
ušt8_t
 *
ho¡AddrT
 = 
Ãw
 ušt8_t[ 
pkt
->
	`g‘Size
() ];

328 
	`memıy
Ğ
ho¡AddrT
, 
d©aPkt
->
g‘PŒ
<
ušt8_t
>(), 
pkt
->
	`g‘Size
() );

330 
ho¡Addr
 = 
Ãw
 
ušt8_t
[ 
pkt
->
	`g‘Size
() ];

331 
	`memıy
Ğ
ho¡Addr
, 
pkt
->
g‘PŒ
<
ušt8_t
>(),…kt->
	`g‘Size
() );

333 
i
 = 0; i < 
pkt
->
	`g‘Size
(); i++ )

335 
»que¡
->
ŞdD©a
.
	`S‘By‹
(
i
, *(
ho¡AddrT
 + i));

336 
»que¡
->
d©a
.
	`S‘By‹
(
i
, *(
ho¡Addr
 + i));

339 
d–‘e
 
d©aPkt
;

340 
d–‘e
 
d©aReq
;

341 
d–‘e
 [] 
ho¡AddrT
;

342 
d–‘e
 [] 
ho¡Addr
;

345 
	}
}

348 
Tick


349 
	gNVMašMemÜy
::
MemÜyPÜt
::
	$»cvAtomic
(
Pack‘PŒ
 
pkt
)

351 ià(
pkt
->
	`memInhib™As£¹ed
())

357 
Tick
 
Ï‹ncy
 = 
memÜy
.
Ït
;

359 ià(
memÜy
.
Ït_v¬
 != 0)

360 
Ï‹ncy
 +ğ
¿ndom_mt
.
¿ndom
<
Tick
>(0, 
memÜy
.
Ït_v¬
);

365 ifĞ
memÜy
.
NVMašW¬mUp
 )

367 
NVMašReque¡
 *
»que¡
 = 
Ãw
 
	`NVMašReque¡
( );

369 
memÜy
.
	`S‘Reque¡D©a
Ğ
»que¡
, 
pkt
 );

371 ifĞ!
pkt
->
	`isR—d
(è&& !pkt->
	`isWr™e
() )

375  
Ï‹ncy
;

379 
»que¡
->
acûss
 = 
UNKNOWN_ACCESS
;

380 
»que¡
->
add»ss
.
	`S‘PhysiÿlAdd»ss
(
pkt
->
»q
->
	`g‘Paddr
());

382 
»que¡
->
add»ss
.
	`S‘Vœtu®Add»ss
(
pkt
->
»q
->
	`g‘Vaddr
());

384 
»que¡
->
¡©us
 = 
MEM_REQUEST_INCOMPLETE
;

385 
»que¡
->
ty³
 = (
pkt
->
	`isR—d
()è? 
READ
 : 
WRITE
;

386 
»que¡
->
owÃr
 = (
NVMObjeù
 *)&
memÜy
;

387 if(
pkt
->
»q
->
	`hasPC
()è
»que¡
->
´og¿mCouÁ”
 =…kt->»q->
	`g‘PC
();

388 if(
pkt
->
»q
->
	`hasCÚ‹xtId
()è
»que¡
->
th»adId
 =…kt->»q->
	`cÚ‹xtId
();

393 
memÜy
.
ma¡”In¡ªû
->
m_nvmašPŒ
->
	`IssueAtomic
(
»que¡
);

395 
d–‘e
 
»que¡
;

400 ifĞ
memÜy
.
m_awake
 )

402 
memÜy
.
m_awake
 = 
çl£
;

409 
memÜy
.
	`acûss
(
pkt
);

411  
Ï‹ncy
;

412 
	}
}

416 
	gNVMašMemÜy
::
MemÜyPÜt
::
	$»cvFunùiÚ®
(
Pack‘PŒ
 
pkt
)

418 
pkt
->
	`pushLab–
(
memÜy
.
	`Çme
());

420 
memÜy
.
	`doFunùiÚ®Acûss
(
pkt
);

422  
¡d
::
deque
<
Pack‘PŒ
>::
™”©Ü
 
i
 = 
memÜy
.
»¥Ú£Queue
.
	`begš
();

423 
i
 !ğ
memÜy
.
»¥Ú£Queue
.
	`’d
(); ++i )

424 
pkt
->
	`checkFunùiÚ®
(*
i
);

426 
pkt
->
	`pİLab–
();

427 
	}
}

430 
boŞ


431 
	gNVMašMemÜy
::
MemÜyPÜt
::
	$»cvTimšgReq
(
Pack‘PŒ
 
pkt
)

436 
x
 = 0; x < 
memÜy
.
³ndšgD–‘e
.
	`size
(); x++)

437 
d–‘e
 
memÜy
.
³ndšgD–‘e
[
x
];

438 
memÜy
.
³ndšgD–‘e
.
	`ş—r
();

440 ià(
pkt
->
	`memInhib™As£¹ed
()) {

441 
memÜy
.
³ndšgD–‘e
.
	`push_back
(
pkt
);

442  
Œue
;

446 ià(!
pkt
->
	`isR—d
(è&& !pkt->
	`isWr™e
()) {

447 
	`DPRINTF
(
NVMaš
, "NVMainMemory: Received‡…ackethat is‚either„ead‚or write.\n");

448 
	`DPRINTF
(
NVMašMš
, "NVMainMemory: Received‡…ackethat is‚either„ead‚or write.\n");

450 
boŞ
 
ÃedsRe¥Ú£
 = 
pkt
->
	`ÃedsRe¥Ú£
();

452 
memÜy
.
	`acûss
(
pkt
);

453 ià(
ÃedsRe¥Ú£
) {

454 
	`as£¹
(
pkt
->
	`isRe¥Ú£
());

456 
pkt
->
busFœ¡WÜdD–ay
 =…kt->
busLa¡WÜdD–ay
 = 0;

457 
memÜy
.
»¥Ú£Queue
.
	`push_back
(
pkt
);

459 
memÜy
.
	`ScheduËRe¥Ú£
( );

461 
memÜy
.
³ndšgD–‘e
.
	`push_back
(
pkt
);

464  
Œue
;

468 ià(
memÜy
.
»ŒyR—d
 || memÜy.
»ŒyWr™e
)

470 
	`DPRINTF
(
NVMaš
, "nvmain_mem.cc: Received„equest while waiting for„etry!\n");

471 
	`DPRINTF
(
NVMašMš
, "nvmain_mem.cc: Received„equest while waiting for„etry!\n");

472  
çl£
;

476 ifĞ!
memÜy
.
m_awake
 )

478 
memÜy
.
m_awake
 = 
Œue
;

479 
memÜy
.
	`wakeup
();

483 
pkt
->
busFœ¡WÜdD–ay
 =…kt->
busLa¡WÜdD–ay
 = 0;

485 
NVMašReque¡
 *
»que¡
 = 
Ãw
 
	`NVMašReque¡
( );

487 
boŞ
 
ÿnQueue
, 
’queued
 = 
çl£
;

489 
memÜy
.
	`S‘Reque¡D©a
Ğ
»que¡
, 
pkt
 );

499 
ušt64_t
 
add»ssFixUp
 = 0;

500 ifĞ
ma¡”In¡ªû
 !ğ&
memÜy
 )

502 
add»ssFixUp
 = 0x40000000;

505 
»que¡
->
acûss
 = 
UNKNOWN_ACCESS
;

507 
»que¡
->
add»ss
.
	`S‘PhysiÿlAdd»ss
(
pkt
->
»q
->
	`g‘Paddr
(è- 
add»ssFixUp
);

509 
»que¡
->
add»ss
.
	`S‘Vœtu®Add»ss
(
pkt
->
»q
->
	`g‘Vaddr
(è- 
add»ssFixUp
);

511 
»que¡
->
¡©us
 = 
MEM_REQUEST_INCOMPLETE
;

512 
»que¡
->
ty³
 = (
pkt
->
	`isR—d
()è? 
READ
 : 
WRITE
;

513 
»que¡
->
owÃr
 = (
NVMObjeù
 *)&
memÜy
;

515 if(
pkt
->
»q
->
	`hasPC
()è
»que¡
->
´og¿mCouÁ”
 =…kt->»q->
	`g‘PC
();

516 if(
pkt
->
»q
->
	`hasCÚ‹xtId
()è
»que¡
->
th»adId
 =…kt->»q->
	`cÚ‹xtId
();

519 
¡d
::
veùÜ
<
NVMObjeù
 *>& 
´eHooks
 = 
memÜy
.
ma¡”In¡ªû
->
	`G‘Hooks
Ğ
NVMHOOK_PREISSUE
 );

520 
¡d
::
veùÜ
<
NVMObjeù
 *>& 
po¡Hooks
 = 
memÜy
.
ma¡”In¡ªû
->
	`G‘Hooks
Ğ
NVMHOOK_POSTISSUE
 );

521 
¡d
::
veùÜ
<
NVMObjeù
 *>::
™”©Ü
 
™
;

523 
ÿnQueue
 = 
memÜy
.
ma¡”In¡ªû
->
	`G‘Chd
Ğ)->
	`IsIssuabË
Ğ
»que¡
 );

525 ifĞ
ÿnQueue
 )

528  
™
 = 
´eHooks
.
	`begš
(); iˆ!ğ´eHooks.
	`’d
(); it++ )

530 (*
™
)->
	`S‘P¬’t
Ğ
memÜy
.
ma¡”In¡ªû
 );

531 (*
™
)->
	`IssueCommªd
Ğ
»que¡
 );

534 
’queued
 = 
memÜy
.
ma¡”In¡ªû
->
	`G‘Chd
Ğ)->
	`IssueCommªd
(
»que¡
);

535 
	`as£¹
Ğ
’queued
 =ğ
Œue
 );

537 
NVMašMemÜyReque¡
 *
memReque¡
 = 
Ãw
 NVMainMemoryRequest;

539 
memReque¡
->
»que¡
 =„equest;

540 
memReque¡
->
·ck‘
 = 
pkt
;

541 
memReque¡
->
issueTick
 = 
	`curTick
();

542 
memReque¡
->
©omic
 = 
çl£
;

544 
	`DPRINTF
(
NVMaš
, "nvmaš_mem.cc: Enqueued Mem„eque¡ fÜ 0x%x oàty³ %s\n", 
»que¡
->
add»ss
.
	`G‘PhysiÿlAdd»ss
Ğ), ((
pkt
->
	`isR—d
()) ? "READ" : "WRITE") );

547 
ncyşe_t
 
ÃxtEv’t
 = 
memÜy
.
m_nvmašGlob®Ev’tQueue
->
	`G‘NextEv’t
(
NULL
);

548 
	`DPRINTF
(
NVMaš
, "NVMašMemÜy: Nexˆev’ˆaá” issui %d\n", 
ÃxtEv’t
);

549 ifĞ
memÜy
.
m_ev’tDriv’
 && 
ÃxtEv’t
 < memÜy.
ÃxtEv’tCyşe


550 && 
memÜy
.
şockEv’t
.
	`scheduËd
() )

552 
ncyşe_t
 
cu¼’tCyşe
 = 
memÜy
.
m_nvmašGlob®Ev’tQueue
->
	`G‘Cu¼’tCyşe
();

555 
ncyşe_t
 
¡•Cyşes
;

556 ifĞ
ÃxtEv’t
 > 
cu¼’tCyşe
 )

557 
¡•Cyşes
 = 
ÃxtEv’t
 - 
cu¼’tCyşe
;

559 
¡•Cyşes
 = 1;

561 
Tick
 
ÃxtWake
 = 
	`curTick
(è+ 
memÜy
.
şock
 * 
¡©ic_ÿ¡
<Tick>(
¡•Cyşes
);

563 
	`DPRINTF
(
NVMaš
, "NVMašMemÜy: Nexˆev’t: %d Cu¼’tCyşe: %d\n", 
ÃxtEv’t
, 
cu¼’tCyşe
);

564 
	`DPRINTF
(
NVMaš
, "NVMašMemÜy: RescheduËd wak© %d‡á” %d cyşes\n", 
ÃxtWake
, 
¡•Cyşes
);

566 
memÜy
.
ÃxtEv’tCyşe
 = 
ÃxtEv’t
;

567 
memÜy
.
	`ScheduËClockEv’t
Ğ
ÃxtWake
 );

569 ifĞ
memÜy
.
m_ev’tDriv’
 && !memÜy.
şockEv’t
.
	`scheduËd
() )

587 
ncyşe_t
 
cu¼’tCyşe
 = 
memÜy
.
m_nvmašGlob®Ev’tQueue
->
	`G‘Cu¼’tCyşe
();

590 
ncyşe_t
 
¡•Cyşes
 = 
ÃxtEv’t
 - 
cu¼’tCyşe
;

591 ifĞ
¡•Cyşes
 =ğ0 || 
ÃxtEv’t
 < 
cu¼’tCyşe
 )

592 
¡•Cyşes
 = 1;

594 
Tick
 
ÃxtWake
 = 
	`curTick
(è+ 
memÜy
.
şock
 * 
¡©ic_ÿ¡
<Tick>(
¡•Cyşes
);

596 
memÜy
.
ÃxtEv’tCyşe
 = 
ÃxtEv’t
;

597 
memÜy
.
	`ScheduËClockEv’t
Ğ
ÃxtWake
 );

600 
memÜy
.
ma¡”In¡ªû
->
m_»que¡_m­
.
	`š£¹
Ğ
¡d
::
·œ
<
NVMašReque¡
 *, 
NVMašMemÜyReque¡
 *>Ğ
»que¡
, 
memReque¡
 ) );

601 
memÜy
.
m_»que¡s_out¡ªdšg
++;

607 ifĞ
»que¡
->
ty³
 =ğ
WRITE
 )

609 
NVMašMemÜyReque¡
 *
»que¡Cİy
 = 
Ãw
 
	`NVMašMemÜyReque¡
( );

611 
»que¡Cİy
->
»que¡
 = 
Ãw
 
	`NVMašReque¡
( );

612 *(
»que¡Cİy
->
»que¡
) = *request;

613 
»que¡Cİy
->
·ck‘
 = 
pkt
;

614 
»que¡Cİy
->
issueTick
 = 
	`curTick
();

615 
»que¡Cİy
->
©omic
 = 
çl£
;

617 
memReque¡
->
·ck‘
 = 
NULL
;

619 
memÜy
.
ma¡”In¡ªû
->
m_»que¡_m­
.
	`š£¹
Ğ
¡d
::
·œ
<
NVMašReque¡
 *, 
NVMašMemÜyReque¡
 *>Ğ
»que¡Cİy
->
»que¡
,„equestCopy ) );

620 
memÜy
.
m_»que¡s_out¡ªdšg
++;

622 
memÜy
.
	`Reque¡Com¶‘e
Ğ
»que¡Cİy
->
»que¡
 );

626 ifĞ
»que¡
 !ğ
NULL
 )

628  
™
 = 
po¡Hooks
.
	`begš
(); iˆ!ğpo¡Hooks.
	`’d
(); it++ )

630 (*
™
)->
	`S‘P¬’t
Ğ&
memÜy
 );

631 (*
™
)->
	`IssueCommªd
Ğ
»que¡
 );

637 
	`DPRINTF
(
NVMaš
, "nvmaš_mem.cc: Cª‚ÙƒnqueuMem„eque¡ fÜ 0x%x oàty³ %s\n", 
»que¡
->
add»ss
.
	`G‘PhysiÿlAdd»ss
Ğ), ((
pkt
->
	`isR—d
()) ? "READ" : "WRITE") );

638 
	`DPRINTF
(
NVMašMš
, "nvmaš_mem.cc: Cª‚ÙƒnqueuMem„eque¡ fÜ 0x%x oàty³ %s\n", 
»que¡
->
add»ss
.
	`G‘PhysiÿlAdd»ss
Ğ), ((
pkt
->
	`isR—d
()) ? "READ" : "WRITE") );

640 ià(
pkt
->
	`isR—d
())

642 
memÜy
.
»ŒyR—d
 = 
Œue
;

646 
memÜy
.
»ŒyWr™e
 = 
Œue
;

649 
d–‘e
 
»que¡
;

650 
»que¡
 = 
NULL
;

653  
’queued
;

654 
	}
}

658 
Tick
 
	gNVMašMemÜy
::
	$doAtomicAcûss
(
Pack‘PŒ
 
pkt
)

660 
	`acûss
(
pkt
);

661  
¡©ic_ÿ¡
<
Tick
>(
m_avgAtomicL©’cy
);

662 
	}
}

666 
	gNVMašMemÜy
::
	$doFunùiÚ®Acûss
(
Pack‘PŒ
 
pkt
)

668 
	`funùiÚ®Acûss
(
pkt
);

669 
	}
}

672 
	gNVMašMemÜy
::
	$d¿š
(
D¿šMªag”
 *
dm
)

674 
rv
= 0;

676 ifĞ!
ma¡”In¡ªû
->
m_»que¡_m­
.
	`em±y
() )

678 
	`£tD¿šS‹
(
D¿šabË
::
D¿ššg
);

679 
d¿šMªag”
 = 
dm
;

680 
rv
 = 1;

684 
	`£tD¿šS‹
(
D¿šabË
::
D¿šed
);

685 
rv
 = 0;

688  
rv
;

689 
	}
}

692 
	gNVMašMemÜy
::
MemÜyPÜt
::
	$»cvR‘ry
( )

694 
memÜy
.
	`»cvR‘ry
( );

695 
	}
}

698 
	gNVMašMemÜy
::
	$»cvR‘ry
( )

700 
	`DPRINTF
(
NVMaš
, "NVMainMemory:„ecvRetry() called.\n");

701 
	`DPRINTF
(
NVMašMš
, "NVMainMemory:„ecvRetry() called.\n");

703 
»ŒyRe¥
 = 
çl£
;

704 
	`S’dRe¥Ú£s
( );

705 
	}
}

708 
boŞ
 
	gNVMašMemÜy
::
Reque¡Com¶‘e
(
NVM
::
NVMašReque¡
 *
»q
)

710 
boŞ
 
isR—d
 = (
»q
->
ty³
 =ğ
READ
 ||„eq->ty³ =ğ
READ_PRECHARGE
);

711 
boŞ
 
	gisWr™e
 = (
»q
->
ty³
 =ğ
WRITE
 ||„eq->ty³ =ğ
WRITE_PRECHARGE
);

714 ifĞ
	g»q
->
	gty³
 =ğ
BUS_WRITE
 || 
»q
->
ty³
 =ğ
BUS_READ
 )

716 
d–‘e
 
»q
;

717  
	gŒue
;

720 
NVMašMemÜyReque¡
 *
	gmemReque¡
;

721 
	g¡d
::
m­
<
NVMašReque¡
 *, 
	gNVMašMemÜyReque¡
 *>::
™”©Ü
 
™”
;

724 
as£¹
(
ma¡”In¡ªû
->
m_»que¡_m­
.
couÁ
(
»q
) != 0);

725 
	g™”
 = 
ma¡”In¡ªû
->
m_»que¡_m­
.
fšd
(
»q
);

726 
	gmemReque¡
 = 
™”
->
£cÚd
;

728 if(!
	gmemReque¡
->
	g©omic
)

730 
boŞ
 
	g»¥Úd
 = 
çl£
;

732 
NVMašMemÜy
 *
	gowÃrIn¡ªû
 = 
dyÇmic_ÿ¡
<NVMašMemÜy *>Ğ
»q
->
owÃr
 );

733 
as£¹
Ğ
owÃrIn¡ªû
 !ğ
NULL
 );

735 ifĞ
	gmemReque¡
->
	g·ck‘
 )

737 
	g»¥Úd
 = 
memReque¡
->
·ck‘
->
ÃedsRe¥Ú£
();

738 
	gowÃrIn¡ªû
->
acûss
(
memReque¡
->
·ck‘
);

747 ifĞ
	gowÃrIn¡ªû
->
	g»ŒyR—d
 =ğ
Œue
 && (
isR—d
 || 
isWr™e
) )

749 
owÃrIn¡ªû
->
»ŒyR—d
 = 
çl£
;

750 
	gowÃrIn¡ªû
->
	gpÜt
.
£ndR‘ry
();

752 ifĞ
	gowÃrIn¡ªû
->
	g»ŒyWr™e
 =ğ
Œue
 && (
isR—d
 || 
isWr™e
) )

754 
owÃrIn¡ªû
->
»ŒyWr™e
 = 
çl£
;

755 
	gowÃrIn¡ªû
->
	gpÜt
.
£ndR‘ry
();

758 
DPRINTF
(
NVMaš
, "Com¶‘ed Mem„eque¡ fÜ 0x%x oàty³ %s\n", 
»q
->
add»ss
.
G‘PhysiÿlAdd»ss
Ğ), (
isR—d
 ? "READ" : "WRITE"));

760 if(
	g»¥Úd
)

762 
	gowÃrIn¡ªû
->
	g»¥Ú£Queue
.
push_back
(
memReque¡
->
·ck‘
);

763 
ScheduËRe¥Ú£
( );

765 
d–‘e
 
	g»q
;

766 
d–‘e
 
	gmemReque¡
;

770 ifĞ
	gmemReque¡
->
	g·ck‘
 )

771 
	gowÃrIn¡ªû
->
	g³ndšgD–‘e
.
push_back
(
memReque¡
->
·ck‘
);

773 
CheckD¿šS‹
( );

775 
d–‘e
 
	g»q
;

776 
d–‘e
 
	gmemReque¡
;

781 
d–‘e
 
	g»q
;

782 
d–‘e
 
	gmemReque¡
;

786 
	gma¡”In¡ªû
->
	gm_»que¡_m­
.
”a£
(
™”
);

787 
	gm_»que¡s_out¡ªdšg
--;

789  
	gŒue
;

793 
	gNVMašMemÜy
::
	$S’dRe¥Ú£s
( )

795 ifĞ
»¥Ú£Queue
.
	`em±y
(è|| 
»ŒyRe¥
 =ğ
Œue
 )

799 
boŞ
 
sucûss
 = 
pÜt
.
	`£ndTimšgRe¥
Ğ
»¥Ú£Queue
.
	`äÚt
() );

801 ifĞ
sucûss
 )

803 
	`DPRINTF
(
NVMaš
, "NVMainMemory: Sending„esponse.\n");

805 
»¥Ú£Queue
.
	`pİ_äÚt
( );

807 ifĞ!
»¥Ú£Queue
.
	`em±y
( ) )

808 
	`ScheduËRe¥Ú£
( );

810 
	`CheckD¿šS‹
( );

814 
	`DPRINTF
(
NVMaš
, "NVMainMemory: Retrying„esponse.\n");

815 
	`DPRINTF
(
NVMašMš
, "NVMainMemory: Retrying„esponse.\n");

817 
»ŒyRe¥
 = 
Œue
;

819 
	}
}

822 
	gNVMašMemÜy
::
	$CheckD¿šS‹
( )

824 ifĞ
d¿šMªag”
 !ğ
NULL
 && 
ma¡”In¡ªû
->
m_»que¡_m­
.
	`em±y
() )

826 
	`DPRINTF
(
NVMaš
, "NVMainMemory: Drain completed.\n");

827 
	`DPRINTF
(
NVMašMš
, "NVMainMemory: Drain completed.\n");

829 
d¿šMªag”
->
	`sigÇlD¿šDÚe
( );

830 
d¿šMªag”
 = 
NULL
;

832 
	}
}

835 
	gNVMašMemÜy
::
	$ScheduËRe¥Ú£
( )

837 ifĞ!
»¥ÚdEv’t
.
	`scheduËd
( ) )

838 
	`scheduË
(
»¥ÚdEv’t
, 
	`curTick
(è+ 
şock
);

839 
	}
}

842 
	gNVMašMemÜy
::
	$ScheduËClockEv’t
Ğ
Tick
 
ÃxtWake
 )

844 ifĞ!
şockEv’t
.
	`scheduËd
() )

845 
	`scheduË
(
şockEv’t
, 
ÃxtWake
);

847 
	`»scheduË
(
şockEv’t
, 
ÃxtWake
);

848 
	}
}

851 
	gNVMašMemÜy
::
£rŸlize
(
¡d
::
o¡»am
& 
os
)

853 ià(
ma¡”In¡ªû
 !ğ
this
)

856 
	g¡d
::
¡ršg
 
nvmaš_chk±_dœ
 = "";

858 ifĞ
	gm_nvmašCÚfig
->
KeyExi¡s
( "CheckpointDirectory" ) )

859 
	gnvmaš_chk±_dœ
 = 
m_nvmašCÚfig
->
G‘SŒšg
( "CheckpointDirectory" );

861 ifĞ
	gnvmaš_chk±_dœ
 != "" )

863 
¡d
::
cout
 << "NVMašMemÜy: Wr™šgØcheckpošˆdœeùÜy " << 
nvmaš_chk±_dœ
 << std::
’dl
;

865 
	gm_nvmašPŒ
->
C»©eCheckpošt
Ğ
nvmaš_chk±_dœ
 );

870 
	gNVMašMemÜy
::
un£rŸlize
(
Checkpošt
 *
ı
, cÚ¡ 
¡d
::
¡ršg
& 
£ùiÚ
)

872 ià(
ma¡”In¡ªû
 !ğ
this
)

875 
	g¡d
::
¡ršg
 
nvmaš_chk±_dœ
 = "";

877 ifĞ
	gm_nvmašCÚfig
->
KeyExi¡s
( "CheckpointDirectory" ) )

878 
	gnvmaš_chk±_dœ
 = 
m_nvmašCÚfig
->
G‘SŒšg
( "CheckpointDirectory" );

880 ifĞ
	gnvmaš_chk±_dœ
 != "" )

882 
¡d
::
cout
 << "NVMašMemÜy: R—dšg from checkpošˆdœeùÜy " << 
nvmaš_chk±_dœ
 << std::
’dl
;

884 
	gm_nvmašPŒ
->
Re¡ÜeCheckpošt
Ğ
nvmaš_chk±_dœ
 );

889 
	gNVMašMemÜy
::
	$tick
( )

892 ià(
ma¡”In¡ªû
 =ğ
this
)

894 ifĞ!
m_ev’tDriv’
 )

896 
m_nvmašPŒ
->
	`Cyşe
( 1 );

898 ifĞ
m_awake
 || !
m_»que¡_m­
.
	`em±y
() )

900 
	`scheduË
(
şockEv’t
, 
	`curTick
(è+ 
şock
);

906 
	`as£¹
(
	`curTick
(è>ğ
Ï¡Wakeup
);

907 
ncyşe_t
 
¡•Cyşes
 = (
	`curTick
(è- 
Ï¡Wakeup
è/ 
şock
;

909 
	`DPRINTF
(
NVMaš
, "NVMašMemÜy: S‹µšg %d cyşes\n", 
¡•Cyşes
);

910 
m_nvmašGlob®Ev’tQueue
->
	`Cyşe
Ğ
¡•Cyşes
 );

912 
Ï¡Wakeup
 = 
	`curTick
();

914 
ncyşe_t
 
ÃxtEv’t
;

932 
ÃxtEv’t
 = 
m_nvmašGlob®Ev’tQueue
->
	`G‘NextEv’t
(
NULL
);

933 ifĞ
ÃxtEv’t
 !ğ
¡d
::
num”ic_lim™s
<
ncyşe_t
>::
	`max
() )

935 
ncyşe_t
 
cu¼’tCyşe
 = 
m_nvmašGlob®Ev’tQueue
->
	`G‘Cu¼’tCyşe
();

937 
	`as£¹
(
ÃxtEv’t
 >ğ
cu¼’tCyşe
);

938 
¡•Cyşes
 = 
ÃxtEv’t
 - 
cu¼’tCyşe
;

940 
Tick
 
ÃxtWake
 = 
	`curTick
(è+ 
şock
 * 
¡©ic_ÿ¡
<Tick>(
¡•Cyşes
);

942 
	`DPRINTF
(
NVMaš
, "NVMašMemÜy: Nexˆev’t: %d Cu¼’tCyşe: %d\n", 
ÃxtEv’t
, 
cu¼’tCyşe
);

943 
	`DPRINTF
(
NVMaš
, "NVMašMemÜy: ScheduË wakfÜ %d\n", 
ÃxtWake
);

945 
ÃxtEv’tCyşe
 = 
ÃxtEv’t
;

946 
	`ScheduËClockEv’t
Ğ
ÃxtWake
 );

950 
	}
}

953 
NVMašMemÜy
 *

954 
	gNVMašMemÜyP¬ams
::
	$ü—‹
()

956  
Ãw
 
	`NVMašMemÜy
(
this
);

957 
	}
}

	@Simulators/gem5/nvmain_mem.hh

45 #iâdeà
__MEM_NVMAIN_MEM_HH__


46 
	#__MEM_NVMAIN_MEM_HH__


	)

49 
	~<f¡»am
>

50 
	~<o¡»am
>

52 
	~"NVM/nvmaš.h
"

53 
	~"ba£/ÿÎback.hh
"

54 
	~"šşude/NVMTy³s.h
"

55 
	~"šşude/NVMašReque¡.h
"

56 
	~"mem/ab¡¿ù_mem.hh
"

57 
	~"mem/Üt.hh
"

58 
	~"·¿ms/NVMašMemÜy.hh
"

59 
	~"sim/ev’tq.hh
"

60 
	~"sim/£rŸlize.hh
"

61 
	~"¤c/CÚfig.h
"

62 
	~"¤c/Ev’tQueue.h
"

63 
	~"¤c/NVMObjeù.h
"

64 
	~"¤c/SimIÁ”çû.h
"

65 
	~"¤c/TagG’”©Ü.h
"

68 
şass
 
	gNVMašMemÜy
 : 
public
 
Ab¡¿ùMemÜy
,…ubliø
	gNVM
::
NVMObjeù


70 
´iv©e
:

75 şas 
	cMemÜyPÜt
 : 
public
 
SÏvePÜt


77 
ä›nd
 
şass
 
NVMašMemÜy
;

80 
	gNVMašMemÜy
& 
	gmemÜy
;

81 
	gNVMašMemÜy
& 
	gfÜgdb
;

83 
	gpublic
:

85 
MemÜyPÜt
(cÚ¡ 
¡d
::
¡ršg
& 
_Çme
, 
NVMašMemÜy
& 
_memÜy
);

87 
	g´Ùeùed
:

89 
Tick
 
»cvAtomic
(
Pack‘PŒ
 
pkt
);

91 
»cvFunùiÚ®
(
Pack‘PŒ
 
pkt
);

93 
boŞ
 
»cvTimšgReq
(
Pack‘PŒ
 
pkt
);

95 
»cvR‘ry
( );

97 
AddrRªgeLi¡
 
g‘AddrRªges
() const;

101 
tick
();

102 
S’dRe¥Ú£s
( );

103 
	gEv’tW¿µ”
<
	gNVMašMemÜy
, &NVMašMemÜy::
tick
> 
şockEv’t
;

104 
	gEv’tW¿µ”
<
	gNVMašMemÜy
, &NVMašMemÜy::
S’dRe¥Ú£s
> 
»¥ÚdEv’t
;

106 
CheckD¿šS‹
( );

107 
ScheduËRe¥Ú£
( );

108 
ScheduËClockEv’t
Ğ
Tick
 );

109 
S‘Reque¡D©a
(
NVM
::
NVMašReque¡
 *
»que¡
, 
Pack‘PŒ
 
pkt
);

111 şas 
	cNVMašStPrš‹r
 : 
public
 
C®lback


113 
ä›nd
 
şass
 
NVMašMemÜy
;

115 
	gpublic
:

116 
NVMašMemÜy
 *
memÜy
;

117 
NVMašMemÜy
 *
	gfÜgdb
;

119 
´oûss
();

121 
	gNVM
::
NVMaš
 *
nvmašPŒ
;

122 
	g¡d
::
of¡»am
 
¡©SŒ—m
;

125 şas 
	cNVMašStRe£‹r
 : 
public
 
C®lback


127 
public
:

128 
´oûss
();

130 
	gNVM
::
NVMaš
 *
nvmašPŒ
;

133 
	sNVMašMemÜyReque¡


135 
Pack‘PŒ
 
	g·ck‘
;

136 
	gNVM
::
NVMašReque¡
 *
»que¡
;

137 
Tick
 
	gissueTick
;

138 
boŞ
 
	g©omic
;

141 
D¿šMªag”
 *
	gd¿šMªag”
;

143 
	gNVM
::
NVMaš
 *
m_nvmašPŒ
;

144 
	gNVM
::
Sts
 *
m_¡©sPŒ
;

145 
	gNVM
::
Ev’tQueue
 *
m_nvmašEv’tQueue
;

146 
	gNVM
::
Glob®Ev’tQueue
 *
m_nvmašGlob®Ev’tQueue
;

147 
	gNVM
::
CÚfig
 *
m_nvmašCÚfig
;

148 
	gNVM
::
SimIÁ”çû
 *
m_nvmašSimIÁ”çû
;

149 
	gNVM
::
TagG’”©Ü
 *
m_gG’”©Ü
;

150 
	g¡d
::
¡ršg
 
m_nvmašCÚfigP©h
;

152 
boŞ
 
	gm_ev’tDriv’
;

153 
boŞ
 
	gm_awake
;

154 
boŞ
 
	gm_Çcked_»que¡s
;

155 
	gm_avgAtomicL©’cy
;

156 
ušt64_t
 
	gm_numAtomicAcûs£s
;

157 
	gNVM
::
ncyşe_t
 
ÃxtEv’tCyşe
;

159 
Tick
 
	gşock
;

160 
Tick
 
	gÏt
;

161 
Tick
 
	gÏt_v¬
;

162 
boŞ
 
	gnvmaš_©omic
;

164 
ušt64_t
 
	gBusWidth
;

165 
ušt64_t
 
	gtBURST
;

166 
ušt64_t
 
	gRATE
;

168 
boŞ
 
	gNVMašW¬mUp
;

170 
NVMašStPrš‹r
 
	g¡©Prš‹r
;

171 
NVMašStRe£‹r
 
	g¡©Re£‹r
;

172 
Tick
 
	gÏ¡Wakeup
;

174 
ušt64_t
 
	gm_»que¡s_out¡ªdšg
;

176 
	gpublic
:

178 
NVMašMemÜyP¬ams
 
	tP¬ams
;

179 
NVMašMemÜy
(cÚ¡ 
P¬ams
 *
p
);

180 
	gvœtu®
 ~
NVMašMemÜy
();

182 
	gBa£SÏvePÜt
& 
g‘SÏvePÜt
(cÚ¡ 
¡d
::
¡ršg
& 
if_Çme
,

183 
PÜtID
 
idx
 = 
Inv®idPÜtID
);

184 
š™
();

185 
¡¬tup
();

186 
wakeup
();

188 cÚ¡ 
P¬ams
 *

189 
	$·¿ms
() const

191  
dyÇmic_ÿ¡
<cÚ¡ 
P¬ams
 *>(
_·¿ms
);

192 
	}
}

195 
boŞ
 
Reque¡Com¶‘e
Ğ
NVM
::
NVMašReque¡
 *
»q
 );

197 
Cyşe
(
NVM
::
ncyşe_t
) { }

199 
d¿š
(
D¿šMªag”
 *
dm
);

201 
£rŸlize
(
¡d
::
o¡»am
& 
os
);

202 
un£rŸlize
(
Checkpošt
 *
ı
, cÚ¡ 
¡d
::
¡ršg
& 
£ùiÚ
);

204 
MemÜyPÜt
 
	gpÜt
;

205 
NVMašMemÜy
 *
	gma¡”In¡ªû
;

206 
boŞ
 
	g»ŒyR—d
, 
	g»ŒyWr™e
, 
	g»ŒyRe¥
;

207 
	g¡d
::
deque
<
Pack‘PŒ
> 
»¥Ú£Queue
;

208 
	g¡d
::
veùÜ
<
Pack‘PŒ
> 
³ndšgD–‘e
;

209 
	g¡d
::
m­
<
NVM
::
NVMašReque¡
 *, 
	gNVMašMemÜyReque¡
 *> 
	gm_»que¡_m­
;

211 
	g´Ùeùed
:

213 
Tick
 
doAtomicAcûss
(
Pack‘PŒ
 
pkt
);

214 
doFunùiÚ®Acûss
(
Pack‘PŒ
 
pkt
);

215 
»cvR‘ry
();

	@Utils/AccessPredictor/AccessPredictor.cpp

34 
	~"Uts/AcûssP»diùÜ/AcûssP»diùÜ.h
"

37 
usšg
 
Çme¥aû
 
	gNVM
;

40 
	gAcûssP»diùÜ
::
	$AcûssP»diùÜ
( )

43 
	}
}

46 
AcûssP»diùÜ
::~
	$AcûssP»diùÜ
( )

49 
	}
}

51 
AcûssP»diùÜ
::
	$Cyşe
Ğ
ncyşe_t
 )

54 
	}
}

57 
AcûssP»diùÜ
::
	$S‘H™De¡š©iÚ
Ğ
ncouÁ”_t
 
chdId
 )

59 
h™ChdId
 = 
chdId
;

60 
	}
}

63 
	gAcûssP»diùÜ
::
	$S‘MissDe¡š©iÚ
Ğ
ncouÁ”_t
 
chdId
 )

65 
missChdId
 = 
chdId
;

66 
	}
}

68 
ncouÁ”_t
 
	gAcûssP»diùÜ
::
	$G‘H™De¡š©iÚ
( )

70  
h™ChdId
;

71 
	}
}

73 
ncouÁ”_t
 
	gAcûssP»diùÜ
::
	$G‘MissDe¡š©iÚ
( )

75  
missChdId
;

76 
	}
}

	@Utils/AccessPredictor/AccessPredictor.h

34 #iâdeà
__UTILS_ACCESSPREDICTOR_H__


35 
	#__UTILS_ACCESSPREDICTOR_H__


	)

38 
	~"¤c/Add»ssT¿n¦©Ü.h
"

39 
	~"¤c/NVMObjeù.h
"

42 
Çme¥aû
 
	gNVM
 {

46 
şass
 
	gAcûssP»diùÜ
 : 
public
 
Add»ssT¿n¦©Ü
,…ubliø
	gNVMObjeù


48 
	gpublic
:

49 
AcûssP»diùÜ
( );

50 ~
AcûssP»diùÜ
( );

52 
usšg
 
	gAdd»ssT¿n¦©Ü
::
T¿n¦©e
;

53 
usšg
 
	gNVMObjeù
::
G‘Sts
;

54 
usšg
 
	gNVMObjeù
::
S‘Sts
;

55 
usšg
 
	gNVMObjeù
::
StName
;

58 
vœtu®
 
ušt64_t
 
T¿n¦©e
Ğ
NVMašReque¡
 *
»que¡
 ) = 0;

60 
Cyşe
Ğ
ncyşe_t
 );

62 
S‘H™De¡š©iÚ
Ğ
ncouÁ”_t
 
h™ChdId
 );

63 
S‘MissDe¡š©iÚ
Ğ
ncouÁ”_t
 
missChdId
 );

65 
ncouÁ”_t
 
G‘H™De¡š©iÚ
( );

66 
ncouÁ”_t
 
G‘MissDe¡š©iÚ
( );

68 
	g´iv©e
:

69 
ncouÁ”_t
 
h™ChdId
, 
	gmissChdId
;

	@Utils/AccessPredictor/AccessPredictorFactory.cpp

34 
	~"Uts/AcûssP»diùÜ/AcûssP»diùÜFaùÜy.h
"

36 
	~"Uts/AcûssP»diùÜ/P”ãùP»diùÜ/P”ãùP»diùÜ.h
"

37 
	~"Uts/AcûssP»diùÜ/V¬ŸbËP»diùÜ/V¬ŸbËP»diùÜ.h
"

40 
	~<c¡dlib
>

41 
	~<io¡»am
>

44 
usšg
 
Çme¥aû
 
	gNVM
;

47 
AcûssP»diùÜ
 *
	gAcûssP»diùÜFaùÜy
::
C»©eAcûssP»diùÜ
Ğ
¡d
::
¡ršg
 
Çme
 )

49 
AcûssP»diùÜ
 *
´ediùÜ
 = 
NULL
;

51 ifĞ
	gÇme
 =ğ"P”ãùP»diùÜ" ) 
´ediùÜ
 = 
Ãw
 
P”ãùP»diùÜ
( );

52 ifĞ
	gÇme
 =ğ"V¬ŸbËP»diùÜ" ) 
´ediùÜ
 = 
Ãw
 
V¬ŸbËP»diùÜ
( );

54 ifĞ
	g´ediùÜ
 =ğ
NULL
 )

56 
¡d
::
cout
 << "E¼Ü: Could‚Ù fšd AcûssP»diùÜ‚amed `" << 
Çme
 << "'!" << std::
’dl
;

57 
ex™
(1);

60  
	g´ediùÜ
;

	@Utils/AccessPredictor/AccessPredictorFactory.h

34 #iâdeà
__UTILS_ACCESSPREDICTORFACTORY_H__


35 
	#__UTILS_ACCESSPREDICTORFACTORY_H__


	)

38 
	~"Uts/AcûssP»diùÜ/AcûssP»diùÜ.h
"

40 
	~<¡ršg
>

43 
Çme¥aû
 
	gNVM
 {

47 şas 
	cAcûssP»diùÜFaùÜy


49 
	gpublic
:

50 
AcûssP»diùÜFaùÜy
( ) { };

51 ~
AcûssP»diùÜFaùÜy
( ) { };

53 
AcûssP»diùÜ
 *
C»©eAcûssP»diùÜ
Ğ
¡d
::
¡ršg
 
Çme
 );

	@Utils/AccessPredictor/PerfectPredictor/PerfectPredictor.cpp

35 
	~"Uts/AcûssP»diùÜ/P”ãùP»diùÜ/P”ãùP»diùÜ.h
"

36 
	~"NVM/nvmaš.h
"

37 
	~"¤c/MemÜyCÚŒŞËr.h
"

38 
	~"MemCÚŒŞ/DRAMCache/DRAMCache.h
"

40 
	~<io¡»am
>

41 
	~<c¡dlib
>

42 
	~<ÿs£¹
>

46 
usšg
 
Çme¥aû
 
	gNVM
;

50 
	gP”ãùP»diùÜ
::
	$P”ãùP»diùÜ
( )

53 
	}
}

56 
P”ãùP»diùÜ
::~
	$P”ãùP»diùÜ
( )

59 
	}
}

62 
ušt64_t
 
P”ãùP»diùÜ
::
	$T¿n¦©e
Ğ
NVMašReque¡
 *
»que¡
 )

64 
ncouÁ”_t
 
de¡
 = 
	`G‘MissDe¡š©iÚ
( );

75 
	`as£¹
Ğ
·»Á
 !ğ
NULL
 );

78 ifĞ
	`G‘P¬’t
()->
	`G‘T¿mpŞše
()->
	`G‘Chd
Ğ
	`G‘H™De¡š©iÚ
(è)->
	`IssueFunùiÚ®
Ğ
»que¡
 ) )

81 
de¡
 = 
	`G‘H™De¡š©iÚ
( );

86 
de¡
 = 
	`G‘MissDe¡š©iÚ
( );

89  
de¡
;

90 
	}
}

	@Utils/AccessPredictor/PerfectPredictor/PerfectPredictor.h

34 #iâdeà
__UTILS_PERFECTPREDICTOR_H__


35 
	#__UTILS_PERFECTPREDICTOR_H__


	)

38 
	~"Uts/AcûssP»diùÜ/AcûssP»diùÜ.h
"

40 
	~<£t
>

43 
Çme¥aû
 
	gNVM
 {

46 şas 
	cP”ãùP»diùÜ
 : 
public
 
AcûssP»diùÜ


48 
public
:

49 
P”ãùP»diùÜ
( );

50 ~
P”ãùP»diùÜ
( );

52 
usšg
 
	gAcûssP»diùÜ
::
T¿n¦©e
;

53 
ušt64_t
 
T¿n¦©e
Ğ
NVMašReque¡
 *
»que¡
 );

	@Utils/AccessPredictor/VariablePredictor/VariablePredictor.cpp

35 
	~"Uts/AcûssP»diùÜ/V¬ŸbËP»diùÜ/V¬ŸbËP»diùÜ.h
"

36 
	~"NVM/nvmaš.h
"

37 
	~"¤c/MemÜyCÚŒŞËr.h
"

38 
	~"MemCÚŒŞ/DRAMCache/DRAMCache.h
"

40 
	~<io¡»am
>

41 
	~<c¡dlib
>

42 
	~<ÿs£¹
>

46 
usšg
 
Çme¥aû
 
	gNVM
;

50 
	gV¬ŸbËP»diùÜ
::
	$V¬ŸbËP»diùÜ
( )

53 
accu¿cy
 = 0.95;

55 
£ed
 = 1;

56 
	}
}

59 
	gV¬ŸbËP»diùÜ
::~
	$V¬ŸbËP»diùÜ
( )

62 
	}
}

65 
V¬ŸbËP»diùÜ
::
	$S‘CÚfig
Ğ
CÚfig
 *
cÚfig
, 
boŞ
 )

68 
cÚfig
->
	`G‘EÃrgy
Ğ"V¬ŸbËP»diùÜAccu¿cy", 
accu¿cy
 );

70 
	`AddSt
(
ŒueP»diùiÚs
);

71 
	`AddSt
(
çl£P»diùiÚs
);

72 
	}
}

74 
ušt64_t
 
	gV¬ŸbËP»diùÜ
::
	$T¿n¦©e
Ğ
NVMašReque¡
 *
»que¡
 )

76 
ncouÁ”_t
 
de¡
 = 
	`G‘MissDe¡š©iÚ
( );

87 
	`as£¹
Ğ
·»Á
 !ğ
NULL
 );

89 
cošToss
 = 
¡©ic_ÿ¡
<>(::
	`¿nd_r
(&
£ed
))

90 / 
¡©ic_ÿ¡
<>(
RAND_MAX
);

91 
boŞ
 
h™
 = 
	`G‘P¬’t
()->
	`G‘T¿mpŞše
()->
	`G‘Chd
(
	`G‘H™De¡š©iÚ
())->
	`IssueFunùiÚ®
(
»que¡
);

94 ifĞ(
h™
 && 
cošToss
 < 
accu¿cy
) || (!hit && coinToss >=‡ccuracy) )

96 ià(
h™
è
ŒueP»diùiÚs
++;

97 
çl£P»diùiÚs
++;

100 
de¡
 = 
	`G‘H™De¡š©iÚ
( );

104 ià(
h™
è
çl£P»diùiÚs
++;

105 
ŒueP»diùiÚs
++;

108 
de¡
 = 
	`G‘MissDe¡š©iÚ
( );

111  
de¡
;

112 
	}
}

	@Utils/AccessPredictor/VariablePredictor/VariablePredictor.h

34 #iâdeà
__UTILS_VARIABLEPREDICTOR_H__


35 
	#__UTILS_VARIABLEPREDICTOR_H__


	)

38 
	~"Uts/AcûssP»diùÜ/AcûssP»diùÜ.h
"

40 
	~<£t
>

43 
Çme¥aû
 
	gNVM
 {

46 şas 
	cV¬ŸbËP»diùÜ
 : 
public
 
AcûssP»diùÜ


48 
public
:

49 
V¬ŸbËP»diùÜ
( );

50 ~
V¬ŸbËP»diùÜ
( );

52 
S‘CÚfig
Ğ
CÚfig
 *
cÚf
, 
boŞ
 
ü—‹Chd»n
 );

54 
usšg
 
	gAcûssP»diùÜ
::
T¿n¦©e
;

55 
ušt64_t
 
T¿n¦©e
Ğ
NVMašReque¡
 *
»que¡
 );

57 
	g´iv©e
:

58 
£ed
;

59 
	gaccu¿cy
;

61 
ncouÁ”_t
 
	gŒueP»diùiÚs
, 
	gçl£P»diùiÚs
;

	@Utils/Caches/CacheAssoc.cpp

6 
	~"CacheAssoc.h
"

7 
usšg
 
Çme¥aû
 
	gNVM
;

8 
	gCacheIm¶
::
	$CacheIm¶
Ğ
ušt64_t
 
assoc
 , ušt64_ˆ
£t
 , ušt64_ˆ
ÿche_lše_size
 , ušt64_ˆ
»ad_t
 , ušt64_ˆ
wr™e_t
)

11 ifĞ
assoc
 <= 0 )

12 
NVM
::
	`F©®
("cache‡ssoc must > 0");

13 ifĞ
ÿche_lše_size
 <4 || !
	`IsPow”Of2
( cache_line_size) )

14 
NVM
::
	`F©®
("cache†ine size must†argerhan 4 bytes‡ndhe…ower of 2 ");

15 ifĞ
£t
 <=0 || !
	`IsPow”Of2
( set ) )

16 
NVM
::
	`F©®
("the‚umber of cache sets must morehan 0‡ndhe…ower of 2");

17 ifĞ
»ad_t
 <=0 )

18 
NVM
::
	`F©®
("cache„eadime must†argerhan 0");

19 if(
wr™e_t
 <=0 )

20 
NVM
::
	`F©®
("cache writeime must†argerhan 0");

22 
this
->
assoc
 =‡ssoc;

23 
this
->
£t_num
 = 
£t
;

24 
this
->
ÿche_lše_size
 = cache_line_size;

26 
this
->
»ad_time
 = 
»ad_t
;

27 
this
->
wr™e_time
 = 
wr™e_t
;

28 
this
->
¡©e
 = 
CACHE_IDLE
;

29 
blk_mask
 = 
ÿche_lše_size
 - 1;

30 
£t_mask
 = 
£t_num
 - 1;

31 
£t_shiá
 = 
	`Log2
Ğ
ÿche_lše_size
);

32 
g_shiá
 = 
£t_shiá
 + 
	`Log2
(
£t_num
);

33 
¡d
::
cout
<<"g_shiá: "<<
g_shiá
<<¡d::
’dl
;

35 
ušt64_t
 
blk_num
 = 
assoc
*
£t
;

39 
£ts
 = 
Ãw
 
CacheS‘
<
CacheBlock
>[
£t_num
];

40 
blks
 = 
Ãw
 
CacheBlock
[
£t_num
*
assoc
];

42 
d©a_block
 = 
Ãw
 
NVMD©aBlock
[
blk_num
];

46 
i
=0; i< 
blk_num
 ; i++)

48 
d©a_block
[
i
].
¿wD©a
 = 
NULL
;

49 
d©a_block
[
i
].
	`S‘Size
(
ÿche_lše_size
);

50 
d©a_block
[
i
].
	`S‘V®id
(
çl£
);

51 
blks
[
i
].
d©a
 = &
d©a_block
[i];

55  
i
 = 0; i < 
£t_num
 ; i++)

57 
£ts
[
i
].
assoc
 =‡ssoc;

58 
£ts
[
i
].
ÿcheS‘
 = 
Ãw
 
CacheBlock
* [
assoc
];

59 
j
=0 ; j< 
assoc
 ; j++)

61 
CacheBlock
 *
tmp_blk
 = &
blks
[
i
*
assoc
+
j
];

63 
tmp_blk
->
£t
 = 
i
;

64 
tmp_blk
->
g
 = 
j
;

65 
£ts
[
i
].
ÿcheS‘
[
j
] = 
tmp_blk
;

68 
	}
}

71 
	gCacheIm¶
::~
	$CacheIm¶
()

73 ifĞ
£ts
 )

75 
d–‘e
 
£ts
;

76 
£ts
 = 
NULL
;

79 ifĞ
blks
 )

81 
d–‘e
 
blks
;

82 
blks
 = 
NULL
;

85 ifĞ
d©a_block
 )

87 
d–‘e
 
d©a_block
;

88 
d©a_block
 = 
NULL
;

90 
	}
}

99 
CacheBlock
* 
	gCacheIm¶
::
	$FšdBlock
Ğ
NVMAdd»ss
* 
addr
 ,
ušt64_t
 &
£t_id
 , ušt64_ˆ&
way_id
)

102 
ušt64_t
 
·
ğ
addr
->
	`G‘PhysiÿlAdd»ss
();

103 
ušt64_t
 
g
 = 
	`G‘Tag
Ğ
·
 );

104 
£t_id
 = 
	`G‘Index
Ğ
·
 );

105  
i
 = 0 ; i < 
this
->
assoc
 ; i++)

107 ifĞ(
g
 =ğ
£ts
[
£t_id
].
ÿcheS‘
[
i
]->g)&&(£ts[£t_id].ÿcheS‘[i]->
	`IsV®id
()) )

109 
way_id
 = 
i
;

111  
£ts
[
£t_id
].
ÿcheS‘
[
i
];

118  
NULL
;

119 
	}
}

122 
CacheBlock
* 
	gCacheIm¶
::
	$FšdBlock
(
NVMAdd»ss
* 
addr
)

124 
ušt64_t
 
ignÜe_£t_id
;

125 
ušt64_t
 
ignÜe_way_id
;

126  
	`FšdBlock
Ğ
addr
 ,
ignÜe_£t_id
, 
ignÜe_way_id
 );

127 
	}
}

130 
ušt64_t
 
	gCacheIm¶
::
	$G‘Tag
Ğ
ušt64_t
 
·
 )

132  
·
>>
g_shiá
;

133 
	}
}

135 
ušt64_t
 
	gCacheIm¶
::
	$G‘Index
Ğ
ušt64_t
 
·
)

137  (
·
 & 
£t_mask
)>>
£t_shiá
;

138 
	}
}

140 
	gCacheIm¶
::
	$S‘R—dTime
(
ušt64_t
 
»ad_t
)

142 
this
->
»ad_time
 = 
»ad_t
;

143 
	}
}

145 
	gCacheIm¶
::
	$S‘Wr™eTime
Ğ
ušt64_t
 
wr™e_t
)

147 
this
->
wr™e_time
 = 
wr™e_t
;

148 
	}
}

157 
CacheBlock
* 
	gCacheIm¶
::
	$FšdViùim
Ğ
NVMAdd»ss
 *
addr
 , 
ušt64_t
& 
£t_id
 ,ušt64_ˆ&
way_id
 )

160 
CacheBlock
* 
tmp_blk
 = 
NULL
;

161 
ušt64_t
 
·
 = 
addr
->
	`G‘PhysiÿlAdd»ss
();

162 
£t_id
 = 
	`G‘Index
Ğ
·
 );

163 
boŞ
 
£t_fuÎ
 = 
Œue
;

164  
i
 = 0 ; i < 
assoc
 ;i++)

166 ifĞ!(
£ts
[
£t_id
].
ÿcheS‘
[
i
]->
	`IsV®id
()) )

168 
way_id
 = 
i
;

169 
tmp_blk
 = 
£ts
[
£t_id
].
ÿcheS‘
[
i
];

170 
£t_fuÎ
 = 
çl£
;

174 if(
£t_fuÎ
)

177 
tmp_blk
 = 
£ts
[
£t_id
].
ÿcheS‘
[
assoc
-1];

178 
way_id
 = 
assoc
-1;

180  
tmp_blk
;

181 
	}
}

185 
CacheBlock
* 
	gCacheIm¶
::
	$FšdViùim
Ğ
NVMAdd»ss
 *
addr
 )

187 
ušt64_t
 
ignÜe_£t_id
 ;

188 
ušt64_t
 
ignÜe_way_id
;

189  
	`FšdViùim
Ğ
addr
 , 
ignÜe_£t_id
 , 
ignÜe_way_id
 );

190 
	}
}

200 
boŞ
 
	gCacheIm¶
::
	$R—d
(
NVMAdd»ss
 *
addr
 , 
CacheBlock
* 
rg‘
, 
NVMD©aBlock
 *
d©a
)

202 
£t_id
 = 0;

203 
boŞ
 
»ad_sucûss
 = 
Œue
;

205 if(
rg‘
)

207 *
d©a
 = *(
rg‘
->data);

208 
£ts
[
£t_id
].
	`MoveToH—d
(
rg‘
);

209 
»ad_sucûss
 = 
Œue
;

211  
»ad_sucûss
;

213 
	}
}

221 
boŞ
 
	gCacheIm¶
::
	$Wr™e
Ğ
NVMAdd»ss
* 
addr
 ,
CacheBlock
* 
rg‘
 , 
NVMD©aBlock
 *
d©a
)

223 
ušt64_t
 
way_id
 = 0;

224 
ušt64_t
 
£t_id
 = 0;

225 
boŞ
 
wr™e_sucûss
 = 
çl£
;

226 if(
rg‘
)

228 
wr™e_sucûss
 = 
Œue
;

229 *(
rg‘
->
d©a
) = *data;

230 
£ts
[
£t_id
].
ÿcheS‘
[
way_id
]->
¡©us
 |=
BlkDœty
;

231 
£ts
[
£t_id
].
	`MoveToH—d
(
rg‘
);

233  
wr™e_sucûss
;

234 
	}
}

244 
boŞ
 
	gCacheIm¶
::
	$Eviù
Ğ
NVMAdd»ss
 *
addr
)

246 
CacheBlock
* 
rg‘
 = 
	`FšdBlock
Ğ
addr
 );

247  
	`Eviù
Ğ
rg‘
);

248 
	}
}

257 
boŞ
 
	gCacheIm¶
::
	$Eviù
Ğ
CacheBlock
 *
blk
)

259 
boŞ
 
eviù_dœty
 = 
çl£
;

261 if(
blk
)

264 ifĞ
blk
->
	`IsDœty
())

267 
eviù_dœty
 = 
Œue
;

270  
eviù_dœty
;

271 
	}
}

278 
	gCacheIm¶
::
	$In¡®l
Ğ
NVMAdd»ss
* 
š¡®l_addr
 , 
CacheBlock
* 
viùim_blk
 , 
NVMD©aBlock
* 
d©a
)

280 
ušt64_t
 
·
 = 
š¡®l_addr
->
	`G‘PhysiÿlAdd»ss
();

281 
ušt64_t
 
š¡®l_g
 = 
	`G‘Tag
Ğ
·
 );

282 
viùim_blk
->
¡©us
 = 
BlkV®id
;

285 *(
viùim_blk
->
d©a
) = *data;

286 
viùim_blk
->
d©a
->
	`S‘V®id
(
Œue
);

287 
viùim_blk
->
g
 = 
š¡®l_g
;

292 
	}
}

297 
boŞ
 
	gCacheIm¶
::
	$IsIssuabË
Ğ
NVMašReque¡
* 
»q
 ,
FaR—sÚ
 *
»asÚ
)

299 
boŞ
 
ÿn_issue
 = 
çl£
;

300 ifĞ
¡©e
 =ğ
CACHE_IDLE
)

301 
ÿn_issue
 = 
Œue
;

302  
ÿn_issue
;

303 
	}
}

316 
boŞ
 
	gCacheIm¶
::
	$IssueCommªd
Ğ
NVMašReque¡
 *
»q
)

318 
ušt64_t
 
£t_id
;

319 
ušt64_t
 
way_id
;

320 ifĞ
	`IsIssuabË
Ğ
»q
 ))

323 
CacheReque¡
 *
ÿche_»q
 = 
¡©ic_ÿ¡
<CacheReque¡ *>(
»q
->
»qInfo
);

324 
CacheBlock
 *
rg‘
 = 
NULL
;

325  
ÿche_»q
->
İty³
)

327 
CACHE_READ
:

328 
¡©e
 = 
CACHE_BUSY
;

329 
£t_tim”
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
(è+ 
»ad_time
;

331 ifĞ(
rg‘
 = 
	`FšdBlock
Ğ&
»q
->
add»ss
 , 
£t_id
 , 
way_id
 )) )

333 
ÿche_»q
->
h™
 = 
Œue
;

334 
	`R—d
(&(
»q
->
add»ss
),
rg‘
 , &Ôeq->
d©a
) );

336 
	`G‘Ev’tQueue
()->
	`In£¹Ev’t
(
Ev’tRe¥Ú£
 , 
this
 , 
»q
 , 
£t_tim”
);

340 
CACHE_WRITE
:

341 
¡©e
 = 
CACHE_BUSY
;

344 ifĞ(
rg‘
 = 
	`FšdBlock
(&
»q
->
add»ss
 , 
£t_id
 , 
way_id
)) )

346 
	`Wr™e
(&(
»q
->
add»ss
),
rg‘
,&Ôeq->
d©a
));

347 
ÿche_»q
 -> 
h™
 = 
Œue
;

348 
£t_tim”
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
(è+ 
wr™e_time
;

350 
	`G‘Ev’tQueue
()->
	`In£¹Ev’t
(
Ev’tRe¥Ú£
 , 
this
 ,
»q
 , 
£t_tim”
);

355 
CacheBlock
* 
viùim_blk
 = 
	`FšdViùim
(&
»q
->
add»ss
 ,
£t_id
 , 
way_id
 );

358 ifĞ
way_id
 =ğ
assoc
-1 )

360 
NVMašReque¡
 *
nv_eviù_»q
 = 
Ãw
 
	`NVMašReque¡
();

361 
CacheReque¡
 *
ÿche_eviù
 = 
Ãw
 CacheRequest;

363 
ÿche_eviù
->
İty³
 = 
CACHE_EVICT
;

364 
ÿche_eviù
->
add»ss
.
	`S‘PhysiÿlAdd»ss
(
	`G‘PA
(
viùim_blk
->
g
 , 
assoc
-1));

366 
	`Eviù
Ğ&(
»q
->
add»ss
) );

367 
nv_eviù_»q
->
»qInfo
 = 
¡©ic_ÿ¡
<*>(
ÿche_eviù
);

368 
nv_eviù_»q
->
owÃr
 = 
»q
->owner;

369 
nv_eviù_»q
->
g
 = 
»q
->tag;

370 
	`G‘Ev’tQueue
()->
	`In£¹Ev’t
Ğ
Ev’tRe¥Ú£
 , 
this
 , 
nv_eviù_»q
 , 
£t_tim”
);

373 
	`In¡®l
Ğ&(
»q
->
add»ss
è, 
viùim_blk
 , &Ôeq->
d©a
));

374 
	`G‘Ev’tQueue
()->
	`In£¹Ev’t
Ğ
Ev’tRe¥Ú£
 , 
this
 , 
»q
 , 
£t_tim”
);

381 
NVM
::
	`W¬nšg
("Unknown cache operation");

384  
Œue
;

387  
çl£
;

388 
	}
}

390 
boŞ
 
	gCacheIm¶
::
	$Reque¡Com¶‘e
Ğ
NVMašReque¡
* 
»q
)

392 
	`G‘P¬’t
()->
	`Reque¡Com¶‘e
(
»q
);

393 
¡©e
 = 
CACHE_IDLE
;

394  
Œue
;

395 
	}
}

	@Utils/Caches/CacheAssoc.h

6 #iâdeà
__CACHE_ASSOC_H__


7 
	#__CACHE_ASSOC_H__


	)

8 
	~<ut™y
>

9 
	~"¤c/NVMObjeù.h
"

10 
	~"šşude/NVMAdd»ss.h
"

11 
	~"šşude/NVMD©aBlock.h
"

12 
	~"šşude/Exû±iÚ.h
"

13 
	~"šşude/CommÚEnums.h
"

14 
	~"šşude/CommÚM©h.h
"

15 
	~"šşude/NVMašReque¡.h
"

16 
	~"¤c/Ev’tQueue.h
"

17 
	~"šşude/CacheS‘.hh
"

18 
	~"šşude/CacheBlock.hh
"

19 
Çme¥aû
 
	gNVM
{

23 şas 
	cBa£Cache
:
public
 
NVMObjeù


25 
public
:

29 
vœtu®
 
CacheBlock
* 
FšdBlock
Ğ
NVMAdd»ss
* 
addr
)=0;

31 
vœtu®
 
CacheBlock
* 
FšdViùim
(
NVMAdd»ss
* 
addr
)=0;

39 şas 
	cCacheIm¶
: 
public
 
NVMObjeù


41 
public
:

42 
CacheIm¶
(
ušt64_t
 
assoc
 ,ušt64_ˆ
£t
 , ušt64_ˆ
ÿche_lše_size
 , ušt64_ˆ
»ad_t
 = 1 , ušt64_ˆ
wr™e_t
 = 1 );

43 
	gvœtu®
 ~
CacheIm¶
();

48 
vœtu®
 
CacheBlock
* 
FšdBlock
Ğ
NVMAdd»ss
* 
addr
 ,
ušt64_t
 &
£t_id
, ušt64_ˆ&
way_id
);

49 
vœtu®
 
CacheBlock
* 
FšdBlock
Ğ
NVMAdd»ss
* 
addr
 );

51 
vœtu®
 
CacheBlock
* 
FšdViùim
(
NVMAdd»ss
* 
addr
);

52 
vœtu®
 
CacheBlock
* 
FšdViùim
(
NVMAdd»ss
* 
addr
 , 
ušt64_t
 &
£t_id
 , ušt64_ˆ&
way_id
);

55 
vœtu®
 
boŞ
 
Eviù
Ğ
NVMAdd»ss
 *
addr
);

56 
vœtu®
 
boŞ
 
Eviù
Ğ
CacheBlock
 *
blk
);

58 
vœtu®
 
In¡®l
Ğ
NVMAdd»ss
* 
š¡®l_addr
 , 
CacheBlock
* 
viùim_blk
 , 
NVMD©aBlock
* 
d©a
);

60 
vœtu®
 
boŞ
 
IssueCommªd
(
NVMašReque¡
 *
»q
);

61 
vœtu®
 
boŞ
 
Reque¡Com¶‘e
(
NVMašReque¡
 *
»q
);

62 
vœtu®
 
Cyşe
Ğ
ncyşe_t
 = 1 ){};

64 
vœtu®
 
boŞ
 
R—d
Ğ
NVMAdd»ss
* 
addr
 ,
CacheBlock
* 
rg‘
, 
NVMD©aBlock
* 
d©a
);

65 
vœtu®
 
boŞ
 
Wr™e
(
NVMAdd»ss
* 
addr
 , 
CacheBlock
* 
rg‘
 , 
NVMD©aBlock
* 
d©a
);

66 
vœtu®
 
boŞ
 
IsIssuabË
Ğ
NVMašReque¡
* 
»q
 , 
FaR—sÚ
 *
»asÚ
 = 
NULL
 );

68 
S‘R—dTime
(
ušt64_t
 
»ad_t
);

69 
S‘Wr™eTime
Ğ
ušt64_t
 
wr™e_t
 );

71 
ušt64_t
 
G‘PA
Ğušt64_ˆ
g
, ušt64_ˆ
£t_id
)

73  
	gg
<<
	gg_shiá
|
	g£t_id
<<
	g£t_shiá
;

75 
	gpublic
:

76 
ušt64_t
 
G‘Tag
Ğušt64_ˆ
·
);

77 
ušt64_t
 
G‘Index
Ğušt64_ˆ
·
);

78 
	g´Ùeùed
:

79 
CacheS‘
<
CacheBlock
> *
£ts
;

80 
CacheBlock
* 
	gblks
;

81 
NVMD©aBlock
 *
	gd©a_block
;

82 
CacheS‹
 
	g¡©e
;

84 
	g´iv©e
:

85 
ušt64_t
 
assoc
 , 
	g£t_num
 ,
	gÿche_lše_size
;

86 
ušt64_t
 
	gwr™e_time
 , 
	g»ad_time
;

89 
ušt64_t
 
	gblk_mask
 ;

90 
ušt64_t
 
	g£t_mask
 , 
	g£t_shiá
;

91 
ušt64_t
 
	gg_shiá
;

93 
ušt64_t
 
	g£t_tim”
;

	@Utils/Caches/CacheBank.cpp

34 
	~"Uts/Caches/CacheBªk.h
"

35 
	~"šşude/NVMH–³rs.h
"

36 
	~"¤c/Ev’tQueue.h
"

38 
	~<io¡»am
>

39 
	~<ÿs£¹
>

41 
usšg
 
Çme¥aû
 
	gNVM
;

43 
	gCacheBªk
::
	$CacheBªk
Ğ
ušt64_t
 
£ts
, ušt64_ˆ
assoc
, ušt64_ˆ
lšeSize
 )

45 
ušt64_t
 
i
, 
j
;

47 
ÿcheEÁry
 = 
Ãw
 
CacheEÁry
* [ 
£ts
 ];

48  
i
 = 0; i < 
£ts
; i++ )

50 
ÿcheEÁry
[
i
] = 
Ãw
 
CacheEÁry
[
assoc
];

51  
j
 = 0; j < 
assoc
; j++ )

54 
ÿcheEÁry
[
i
][
j
].
æags
 = 
CACHE_ENTRY_NONE
;

58 
numS‘s
 = 
£ts
;

59 
numAssoc
 = 
assoc
;

60 
ÿch–šeSize
 = 
lšeSize
;

62 
¡©e
 = 
CACHE_IDLE
;

63 
¡©eTim”
 = 0;

65 
decodeCÏss
 = 
NULL
;

66 
decodeFunc
 = 
NULL
;

67 
	`S‘DecodeFunùiÚ
Ğ
this
,

68 
¡©ic_ÿ¡
<
CacheS‘Decod”
>(&
NVM
::
CacheBªk
::
DeçuÉDecod”
) );

70 
»adTime
 = 1;

71 
wr™eTime
 = 1;

73 
isMissM­
 = 
çl£
;

74 
	}
}

76 
	gCacheBªk
::~
	$CacheBªk
( )

78 
ušt64_t
 
i
;

80  
i
 = 0; i < 
numS‘s
; i++ )

82 
d–‘e
 [] 
ÿcheEÁry
[
i
];

85 
d–‘e
 [] 
ÿcheEÁry
;

86 
	}
}

88 
	gCacheBªk
::
	$S‘DecodeFunùiÚ
Ğ
NVMObjeù
 *
dcCÏss
, 
CacheS‘Decod”
 
dcFunc
 )

90 
decodeCÏss
 = 
dcCÏss
;

91 
decodeFunc
 = 
dcFunc
;

92 
	}
}

94 
ušt64_t
 
	gCacheBªk
::
	$DeçuÉDecod”
Ğ
NVMAdd»ss
 &
addr
 )

96  (
addr
.
	`G‘PhysiÿlAdd»ss
( ) >>

97 (
ušt64_t
)
	`mlog2
Ğ()
ÿch–šeSize
 )è% 
numS‘s
;

98 
	}
}

100 
ušt64_t
 
	gCacheBªk
::
	$S‘ID
Ğ
NVMAdd»ss
& 
addr
 )

107 
ušt64_t
 
£tID
;

112 
£tID
 = (
decodeCÏss
->*
decodeFunc
)Ğ
addr
 );

114  
£tID
;

115 
	}
}

117 
CacheEÁry
 *
	gCacheBªk
::
	$FšdS‘
Ğ
NVMAdd»ss
& 
addr
 )

124 
ušt64_t
 
£tID
 = 
	`S‘ID
Ğ
addr
 );

126  
ÿcheEÁry
[
£tID
];

127 
	}
}

130 
boŞ
 
	gCacheBªk
::
	$P»£Á
Ğ
NVMAdd»ss
& 
addr
 )

132 
CacheEÁry
 *
£t
 = 
	`FšdS‘
Ğ
addr
 );

133 
boŞ
 
found
 = 
çl£
;

135  
ušt64_t
 
i
 = 0; i < 
numAssoc
; i++ )

139 ifĞ
£t
[
i
].
add»ss
.
	`G‘PhysiÿlAdd»ss
Ğè=ğ
addr
.GetPhysicalAddress( )

140 && (
£t
[
i
].
æags
 & 
CACHE_ENTRY_VALID
 ) )

143 
¡d
::
cout
<<"judgw—th” h™: s‘‡dd»ss: 0x"<<¡d::
hex
<<
£t
[
i
].
add»ss
.
	`G‘PhysiÿlAdd»ss
()<<"»que¡‡dd»ss: 0x"<<¡d::hex<<
addr
.G‘PhysiÿlAdd»ss()<<¡d::
’dl
;

144 
found
 = 
Œue
;

149  
found
;

150 
	}
}

152 
boŞ
 
	gCacheBªk
::
	$S‘FuÎ
Ğ
NVMAdd»ss
& 
addr
 )

154 
CacheEÁry
 *
£t
 = 
	`FšdS‘
Ğ
addr
 );

155 
boŞ
 
rv
 = 
Œue
;

157  
ušt64_t
 
i
 = 0; i < 
numAssoc
; i++ )

161 ifĞ!((
£t
[
i
].
æags
 & 
CACHE_ENTRY_VALID
)||(£t[i].æag & 
CACHE_ENTRY_DIRTY
)||(£t[i].æag & 
CACHE_ENTRY_EXAMPLE
)) )

163 
rv
 = 
çl£
;

168  
rv
;

169 
	}
}

172 
boŞ
 
	gCacheBªk
::
	$In¡®l
Ğ
NVMAdd»ss
& 
addr
, 
NVMD©aBlock
& 
d©a
 )

174 
CacheEÁry
 *
£t
 = 
	`FšdS‘
Ğ
addr
 );

175 
boŞ
 
rv
 = 
çl£
;

178 
¡d
::
cout
<<"š¡®È0x"<<¡d::
hex
<<
addr
.
	`G‘PhysiÿlAdd»ss
()<<¡d::
’dl
;

179  
ušt64_t
 
i
 = 0; i < 
numAssoc
; i++ )

181 ifĞ!(
£t
[
i
].
æags
 & 
CACHE_ENTRY_VALID
) )

183 
£t
[
i
].
add»ss
 = 
addr
;

184 
£t
[
i
].
d©a
 = data;

185 
£t
[
i
].
æags
 |ğ
CACHE_ENTRY_VALID
;

186 
rv
 = 
Œue
;

191  
rv
;

192 
	}
}

194 
boŞ
 
	gCacheBªk
::
	$R—d
Ğ
NVMAdd»ss
& 
addr
, 
NVMD©aBlock
 *
d©a
 )

196 
CacheEÁry
 *
£t
 = 
	`FšdS‘
Ğ
addr
 );

197 
boŞ
 
rv
 = 
çl£
;

199 
	`as£¹
Ğ
	`P»£Á
Ğ
addr
 ) );

201  
ušt64_t
 
i
 = 0; i < 
numAssoc
; i++ )

203 ifĞ
£t
[
i
].
add»ss
.
	`G‘PhysiÿlAdd»ss
Ğè=ğ
addr
.GetPhysicalAddress( )

204 && (
£t
[
i
].
æags
 & 
CACHE_ENTRY_VALID
) )

206 *
d©a
 = 
£t
[
i
].data;

207 
rv
 = 
Œue
;

210 
CacheEÁry
 
tmp
;

212 
tmp
.
æags
 = 
£t
[
i
].flags;

213 
tmp
.
add»ss
 = 
£t
[
i
].address;

214 
tmp
.
d©a
 = 
£t
[
i
].data;

216  
ušt64_t
 
j
 = 
i
; j > 0; j-- )

218 
£t
[
j
].
æags
 = set[j-1].flags;

219 
£t
[
j
].
add»ss
 = set[j-1].address;

220 
£t
[
j
].
d©a
 = set[j-1].data;

223 
£t
[0].
æags
 = 
tmp
.flags;

224 
£t
[0].
add»ss
 = 
tmp
.address;

225 
£t
[0].
d©a
 = 
tmp
.data;

229  
rv
;

230 
	}
}

232 
boŞ
 
	gCacheBªk
::
	$Wr™e
Ğ
NVMAdd»ss
& 
addr
, 
NVMD©aBlock
& 
d©a
 )

234 
CacheEÁry
 *
£t
 = 
	`FšdS‘
Ğ
addr
 );

235 
boŞ
 
rv
 = 
çl£
;

237 
	`as£¹
Ğ
	`P»£Á
Ğ
addr
 ) );

239  
ušt64_t
 
i
 = 0; i < 
numAssoc
; i++ )

241 ifĞ
£t
[
i
].
add»ss
.
	`G‘PhysiÿlAdd»ss
Ğè=ğ
addr
.GetPhysicalAddress( )

242 && (
£t
[
i
].
æags
 & 
CACHE_ENTRY_VALID
) )

244 
£t
[
i
].
d©a
 = data;

245 
£t
[
i
].
æags
 |ğ
CACHE_ENTRY_DIRTY
;

246 
rv
 = 
Œue
;

249 
CacheEÁry
 
tmp
;

251 
tmp
.
æags
 = 
£t
[
i
].flags;

252 
tmp
.
add»ss
 = 
£t
[
i
].address;

253 
tmp
.
d©a
 = 
£t
[
i
].data;

255  
ušt64_t
 
j
 = 
i
; j > 1; j-- )

257 
£t
[
j
].
æags
 = set[j-1].flags;

258 
£t
[
j
].
add»ss
 = set[j-1].address;

259 
£t
[
j
].
d©a
 = set[j-1].data;

262 
£t
[0].
æags
 = 
tmp
.flags;

263 
£t
[0].
add»ss
 = 
tmp
.address;

264 
£t
[0].
d©a
 = 
tmp
.data;

268  
rv
;

269 
	}
}

275 
boŞ
 
	gCacheBªk
::
	$Upd©eD©a
Ğ
NVMAdd»ss
& 
addr
, 
NVMD©aBlock
& 
d©a
 )

277 
CacheEÁry
 *
£t
 = 
	`FšdS‘
Ğ
addr
 );

278 
boŞ
 
rv
 = 
çl£
;

280 
	`as£¹
Ğ
	`P»£Á
Ğ
addr
 ) );

282  
ušt64_t
 
i
 = 0; i < 
numAssoc
; i++ )

284 ifĞ
£t
[
i
].
add»ss
.
	`G‘PhysiÿlAdd»ss
Ğè=ğ
addr
.GetPhysicalAddress( )

285 && (
£t
[
i
].
æags
 & 
CACHE_ENTRY_VALID
) )

287 
£t
[
i
].
d©a
 = data;

288 
rv
 = 
Œue
;

292  
rv
;

293 
	}
}

296 
boŞ
 
	gCacheBªk
::
	$Choo£Viùim
Ğ
NVMAdd»ss
& 
addr
, NVMAdd»s *
viùim
 )

298 
boŞ
 
rv
 = 
çl£
;

299 
CacheEÁry
 *
£t
 = 
	`FšdS‘
Ğ
addr
 );

301 
	`as£¹
Ğ
	`S‘FuÎ
Ğ
addr
 ) );

302 
	`as£¹
Ğ
£t
[
numAssoc
-1].
æags
 & 
CACHE_ENTRY_VALID
 );

304 *
viùim
 = 
£t
[
numAssoc
-1].
add»ss
;

306 ifĞ
£t
[
numAssoc
-1].
æags
 & 
CACHE_ENTRY_DIRTY
 )

307 
rv
 = 
Œue
;

309  
rv
;

310 
	}
}

313 
boŞ
 
	gCacheBªk
::
	$Eviù
Ğ
NVMAdd»ss
& 
addr
, 
NVMD©aBlock
 *
d©a
 )

315 
boŞ
 
rv
;

316 
CacheEÁry
 *
£t
 = 
	`FšdS‘
Ğ
addr
 );

318 
	`as£¹
Ğ
	`P»£Á
Ğ
addr
 ) );

320 
rv
 = 
çl£
;

322  
ušt64_t
 
i
 = 0; i < 
numAssoc
; i++ )

324 ifĞ
£t
[
i
].
add»ss
.
	`G‘PhysiÿlAdd»ss
Ğè=ğ
addr
.GetPhysicalAddress( )

325 && (
£t
[
i
].
æags
 & 
CACHE_ENTRY_VALID
) )

327 ifĞ
£t
[
i
].
æags
 & 
CACHE_ENTRY_DIRTY
 )

329 *
d©a
 = 
£t
[
i
].data;

330 
rv
 = 
Œue
;

334 *
d©a
 = 
£t
[
i
].data;

335 
rv
 = 
çl£
;

338 
£t
[
i
].
æags
 = 
CACHE_ENTRY_NONE
;

344  
rv
;

345 
	}
}

347 
	gCacheBªk
::
	$S‘R—dTime
Ğ
ušt64_t
 
¹ime
 )

349 
»adTime
 = 
¹ime
;

350 
	}
}

352 
	gCacheBªk
::
	$S‘Wr™eTime
Ğ
ušt64_t
 
wtime
 )

354 
wr™eTime
 = 
wtime
;

355 
	}
}

357 
ušt64_t
 
	gCacheBªk
::
	$G‘R—dTime
( )

359  
»adTime
;

360 
	}
}

362 
ušt64_t
 
	gCacheBªk
::
	$G‘Wr™eTime
( )

364  
wr™eTime
;

365 
	}
}

367 
ušt64_t
 
	gCacheBªk
::
	$G‘AssocŸtiv™y
( )

369  
numAssoc
;

370 
	}
}

372 
ušt64_t
 
	gCacheBªk
::
	$G‘Cach–šeSize
( )

374  
ÿch–šeSize
;

375 
	}
}

377 
ušt64_t
 
	gCacheBªk
::
	$G‘S‘CouÁ
( )

379  
numS‘s
;

380 
	}
}

382 
	gCacheBªk
::
	$G‘CacheOccu·ncy
( )

384 
occu·ncy
;

385 
ušt64_t
 
v®id
, 
tÙ®
;

387 
v®id
 = 0;

388 
tÙ®
 = 
numS‘s
*
numAssoc
;

390  
ušt64_t
 
£tIdx
 = 0; s‘Idx < 
numS‘s
; setIdx++ )

392 
CacheEÁry
 *
£t
 = 
ÿcheEÁry
[
£tIdx
];

394  
ušt64_t
 
assocIdx
 = 0;‡ssocIdx < 
numAssoc
;‡ssocIdx++ )

396 ifĞ
£t
[
assocIdx
].
æags
 & 
CACHE_ENTRY_VALID
 )

397 
v®id
++;

401 
occu·ncy
 = 
¡©ic_ÿ¡
<>(
v®id
è/ stic_ÿ¡<>(
tÙ®
);

403  
occu·ncy
;

404 
	}
}

406 
boŞ
 
	gCacheBªk
::
	$IsIssuabË
Ğ
NVMašReque¡
 * , 
FaR—sÚ
 * )

408 
boŞ
 
rv
 = 
çl£
;

411 ifĞ
¡©e
 =ğ
CACHE_IDLE
 )

413 
rv
 = 
Œue
;

417 
rv
 = 
çl£
;

420  
rv
;

421 
	}
}

423 
boŞ
 
	gCacheBªk
::
	$IssueCommªd
Ğ
NVMašReque¡
 *
Äeq
 )

425 
NVMD©aBlock
 
dummy
;

426 
CacheReque¡
 *
»q
 = 
¡©ic_ÿ¡
<CacheReque¡ *>Ğ
Äeq
->
»qInfo
 );

428 
	`as£¹
Ğ
	`IsIssuabË
Ğ
Äeq
, 
NULL
 ) );

430 ifĞ!
	`IsIssuabË
Ğ
Äeq
, 
NULL
 ) )

431  
çl£
;

433  
»q
->
İty³
 )

435 
CACHE_READ
:

436 
¡©e
 = 
CACHE_BUSY
;

437 
¡©eTim”
 = 
	`G‘Ev’tQueue
Ğ)->
	`G‘Cu¼’tCyşe
Ğè+ 
»adTime
;

438 
»q
->
h™
 = 
	`P»£Á
Ğ»q->
add»ss
 );

439 ifĞ
»q
->
h™
 )

440 
	`R—d
Ğ
»q
->
add»ss
, &Ôeq->
d©a
) );

441 
	`G‘Ev’tQueue
Ğ)->
	`In£¹Ev’t
Ğ
Ev’tRe¥Ú£
, 
this
, 
Äeq
, 
¡©eTim”
 );

444 
CACHE_WRITE
:

445 
¡©e
 = 
CACHE_BUSY
;

446 
¡©eTim”
 = 
	`G‘Ev’tQueue
Ğ)->
	`G‘Cu¼’tCyşe
Ğè+ 
wr™eTime
;

448 ifĞ
	`S‘FuÎ
Ğ
»q
->
add»ss
 ) )

450 
NVMašReque¡
 *
mmEviù
 = 
Ãw
 
	`NVMašReque¡
( );

451 
CacheReque¡
 *
ev»q
 = 
Ãw
 CacheRequest;

453 
	`Choo£Viùim
Ğ
»q
->
add»ss
, &(
ev»q
->address) );

454 
	`Eviù
Ğ
ev»q
->
add»ss
, &Óv»q->
d©a
) );

456 
ev»q
->
İty³
 = 
CACHE_EVICT
;

458 *
mmEviù
 = *
Äeq
;

459 
mmEviù
->
owÃr
 = 
Äeq
->owner;

460 
mmEviù
->
»qInfo
 = 
¡©ic_ÿ¡
<*>Ğ
ev»q
 );

461 
mmEviù
->
g
 = 
Äeq
->tag;

463 
	`G‘Ev’tQueue
Ğ)->
	`In£¹Ev’t
Ğ
Ev’tRe¥Ú£
, 
this
, 
mmEviù
,

464 
¡©eTim”
 );

467 
»q
->
h™
 = 
	`P»£Á
Ğ»q->
add»ss
 );

468 ifĞ
»q
->
h™
 )

469 
	`Wr™e
Ğ
»q
->
add»ss
,„eq->
d©a
 );

471 
	`In¡®l
Ğ
»q
->
add»ss
,„eq->
d©a
 );

473 
	`G‘Ev’tQueue
Ğ)->
	`In£¹Ev’t
Ğ
Ev’tRe¥Ú£
, 
this
, 
Äeq
, 
¡©eTim”
 );

478 
¡d
::
cout
 << "CacheBªk: UnknowÀİ”©iÚ `" << 
»q
->
İty³
 << "'!"

479 << 
¡d
::
’dl
;

483  
Œue
;

484 
	}
}

486 
boŞ
 
	gCacheBªk
::
	$Reque¡Com¶‘e
Ğ
NVMašReque¡
 *
»q
 )

488 
	`G‘P¬’t
Ğ)->
	`Reque¡Com¶‘e
Ğ
»q
 );

490 
¡©e
 = 
CACHE_IDLE
;

492  
Œue
;

493 
	}
}

495 
	gCacheBªk
::
	$Cyşe
Ğ
ncyşe_t
 )

497 
	}
}

	@Utils/Caches/CacheBank.h

34 #iâdeà
__NVMAIN_UTILS_CACHES_CACHEBANK_H__


35 
	#__NVMAIN_UTILS_CACHES_CACHEBANK_H__


	)

37 
	~<ut™y
>

38 
	~"šşude/NVMAdd»ss.h
"

39 
	~"šşude/NVMD©aBlock.h
"

40 
	~"¤c/NVMObjeù.h
"

41 
	~"¤c/Add»ssT¿n¦©Ü.h
"

42 
	~"šşude/CommÚEnums.h
"

44 
Çme¥aû
 
	gNVM
 {

46 
ušt64_t
 (
	tNVMObjeù
::*
	tCacheS‘Decod”
)(
	tNVMAdd»ss
&);

60 ’um { 
	gCACHE_ENTRY_NONE
 = 0,

61 
	gCACHE_ENTRY_VALID
 = 1,

62 
	gCACHE_ENTRY_DIRTY
 = 2,

63 
	gCACHE_ENTRY_EXAMPLE
 = 4

66 
	sCacheEÁry


68 
ušt64_t
 
	gæags
;

69 
NVMAdd»ss
 
	gadd»ss
;

70 
NVMD©aBlock
 
	gd©a
;

73 şas 
	cCacheBªk
 : 
public
 
NVMObjeù


75 
public
:

76 
CacheBªk
Ğ
ušt64_t
 
£ts
, ušt64_ˆ
assoc
, ušt64_ˆ
lšeSize
 );

77 ~
CacheBªk
( );

80 
boŞ
 
P»£Á
Ğ
NVMAdd»ss
& 
addr
 );

83 
boŞ
 
In¡®l
Ğ
NVMAdd»ss
& 
addr
, 
NVMD©aBlock
& 
d©a
 );

86 
boŞ
 
S‘FuÎ
Ğ
NVMAdd»ss
& 
addr
 );

90 
boŞ
 
Eviù
Ğ
NVMAdd»ss
& 
addr
, 
NVMD©aBlock
 *
d©a
 );

92 
boŞ
 
R—d
Ğ
NVMAdd»ss
& 
addr
, 
NVMD©aBlock
 *
d©a
 );

93 
boŞ
 
Wr™e
Ğ
NVMAdd»ss
& 
addr
, 
NVMD©aBlock
& 
d©a
 );

95 
boŞ
 
Upd©eD©a
Ğ
NVMAdd»ss
& 
addr
, 
NVMD©aBlock
& 
d©a
 );

97 
S‘R—dTime
Ğ
ušt64_t
 
¹ime
 );

98 
S‘Wr™eTime
Ğ
ušt64_t
 
wtime
 );

100 
ušt64_t
 
G‘R—dTime
( );

101 
ušt64_t
 
G‘Wr™eTime
( );

103 
ušt64_t
 
G‘AssocŸtiv™y
( );

104 
ušt64_t
 
G‘Cach–šeSize
( );

105 
ušt64_t
 
G‘S‘CouÁ
( );

106 
G‘CacheOccu·ncy
( );

108 
boŞ
 
IsIssuabË
Ğ
NVMašReque¡
 *
»q
, 
FaR—sÚ
 *
»asÚ
 );

109 
boŞ
 
IssueCommªd
Ğ
NVMašReque¡
 *
»q
 );

110 
boŞ
 
Reque¡Com¶‘e
Ğ
NVMašReque¡
 *
»q
 );

112 
Cyşe
Ğ
ncyşe_t
 
¡•s
 );

114 
boŞ
 
Choo£Viùim
Ğ
NVMAdd»ss
& 
addr
, NVMAdd»s *
viùim
 );

116 
S‘DecodeFunùiÚ
Ğ
NVMObjeù
 *
dcCÏss
, 
CacheS‘Decod”
 
dcFunc
 );

118 
ušt64_t
 
	gnumS‘s
, 
	gnumAssoc
, 
	gÿch–šeSize
;

119 
CacheEÁry
 **
	gÿcheEÁry
;

120 
ušt64_t
 
	gacûssTime
, 
	g¡©eTim”
;

121 
ušt64_t
 
	g»adTime
, 
	gwr™eTime
;

122 
CacheS‹
 
	g¡©e
;

124 
CacheEÁry
 *
FšdS‘
Ğ
NVMAdd»ss
& 
addr
 );

125 
ušt64_t
 
S‘ID
Ğ
NVMAdd»ss
& 
addr
 );

126 
boŞ
 
	gisMissM­
;

128 
CacheS‘Decod”
 
	gdecodeFunc
;

129 
NVMObjeù
 *
	gdecodeCÏss
;

130 
ušt64_t
 
DeçuÉDecod”
Ğ
NVMAdd»ss
& 
addr
 );

	@Utils/Caches/CacheBlock.hh

6 #iâdeà
__CACHE_BLOCK_H__


7 
	#__CACHE_BLOCK_H__


	)

9 
	~"šşude/NVMD©aBlock.h
"

10 
	~"šşude/CommÚEnums.h
"

12 
Çme¥aû
 
	gNVM


14 şas 
	cCacheBlock


16 
	gpublic
:

17 
ušt64_t
 
g
;

18 
NVMD©aBlock
 *
	gd©a
;

19 
	g¡©us
;

20 
	g£t
;

21 
	g»fCouÁ
;

23 
	gpublic
:

24 
CacheBlock
():
g
(0),
¡©us
(0),
£t
(-1),
»fCouÁ
(0)

32 
CacheBlock
* 
	gİ”©Ü
=ĞcÚ¡ CacheBlock& 
cİy_blk
)

34 
this
->
g
 = 
cİy_blk
.tag;

35 
	gthis
->
	gd©a
 = 
cİy_blk
.
d©a
;

36 
	gthis
->
	g¡©us
 = 
cİy_blk
.
¡©us
;

37 
	gthis
->
	g£t
 = 
cİy_blk
.
£t
;

38 
	gthis
->
	g»fCouÁ
 = 
cİy_blk
.
»fCouÁ
;

39  
	gthis
;

42 
S‘Size
Ğ
ušt64_t
 
n
 )

44 
	gthis
->
	gd©a
->
S‘Size
(
n
);

47 
ušt64_t
 
G‘Tag
()

49  
	gg
;

52 
NVMD©aBlock
* 
G‘D©a
()

54  
	gthis
->
	gd©a
;

57 
ušt64_t
 
G‘Stus
()

59  
	g¡©us
;

62 
G‘RefCouÁ
()

64  
	gthis
->
	g»fCouÁ
;

67 
InüeRefCouÁ
()

69 
	g»fCouÁ
++;

82 
boŞ
 
IsDœty
()

84  ( 
	g¡©us
 & ( 
	gBlkV®id
 | 
	gBlkDœty
 ));

87 
boŞ
 
IsV®id
()

89  ( 
	g¡©us
 & 
	gBlkV®id
 );

95 
Inv®id©e
()

97 
	g¡©us
 = 0;

	@Utils/Caches/CacheSet.cpp

7 
	~"CacheS‘.h
"

8 
usšg
 
Çme¥aû
 
	gNVM
;

15 
	g‹m¶©e
 <
şass
 
	gblock
>

16 
block
* 
	gCacheS‘
<
	gblock
>::
	$FšdBlk
Ğ
ušt64_t
 
g
 , ušt64_t& 
way_id
)

18  
i
 = 0 ; i < 
assoc
 ; i++ )

20 ifĞ(
g
 =ğ
ÿcheS‘
[
i
]->
	`G‘Tag
())&&(ÿcheS‘[i]->
	`IsV®id
() ))

22 
way_id
 = 
i
;

23  
ÿcheS‘
[
i
];

27  
NULL
;

28 
	}
}

30 
	g‹m¶©e
 <
şass
 
	gblock
>

31 
block
* 
	gCacheS‘
<
	gblock
>::
	$FšdBlk
Ğ
ušt64_t
 
g
 )

33 
ušt64_t
 
tmp_way_id
;

34  
	`FšdBlk
Ğ
g
 , 
tmp_way_id
);

35 
	}
}

42 
	g‹m¶©e
 <
şass
 
	gblock
>

43 
	gCacheS‘
<
	gblock
>::
	$MoveToH—d
(
block
 *
blk
)

45 
block
 * 
tmp_blk
 = 
blk
;

46 
block
 * 
tmp
;

48 ifĞ
ÿcheS‘
[0] =ğ
blk
)

50 
i
=0;

53 
	`as£¹
Ğ
i
<
assoc
 );

55 
tmp
 = 
tmp_blk
;

56 
tmp_blk
 = 
ÿcheS‘
[
i
];

57 
ÿcheS‘
[
i
] = 
tmp
;

58 
i
++;

59 } 
tmp_blk
!=
blk
);

60 
	}
}

66 
	g‹m¶©e
 <
şass
 
	gblock
>

67 
	gCacheS‘
<
	gblock
>::
	$MoveToTa
(
block
 *
blk
)

69 
block
 *
tmp_blk
 = 
blk
;

70 
block
 *
sw­_tmp
;

72 ifĞ
blk
 =ğ
ÿcheS‘
[
assoc
-1] )

74 
i
 = 
assoc
-1;

77 
	`as£¹
Ğ
i
 >= 0);

79 
sw­_tmp
 = 
tmp_blk
;

80 
tmp_blk
 = 
ÿcheS‘
[
i
];

81 
ÿcheS‘
[
i
] = 
tmp_blk
;

82 
i
--;

83 } 
tmp_blk
!=
blk
);

84 
	}
}

	@Utils/Caches/CacheSet.h

6 #iâdeà
__CACHE_SET_H__


7 
	#__CACHE_SET_H__


	)

9 
	~"CacheBlock.hh
"

10 
	~"šşude/CommÚH—d”s.h
"

13 
Çme¥aû
 
	gNVM


15 
	g‹m¶©e
 <
şass
 
	gblock
>

16 şas 
	cCacheS‘


18 
	gpublic
:

19 
ušt64_t
 
assoc
;

20 
block
 **
	gÿcheS‘
;

22 
	gpublic
:

24 
block
* 
FšdBlk
Ğ
ušt64_t
 
g
 , ušt64_t& 
way_id
);

25 
block
* 
FšdBlk
Ğ
ušt64_t
 
g
 );

27 
MoveToH—d
Ğ
block
 *
blk
);

28 
MoveToTa
Ğ
block
 *
blk
);

29 
ušt64_t
 
G‘Assoc
()

31  
	gthis
->
	gassoc
;

	@Utils/Caches/bk.CacheBank.h

34 #iâdeà
__NVMAIN_UTILS_CACHES_CACHEBANK_H__


35 
	#__NVMAIN_UTILS_CACHES_CACHEBANK_H__


	)

37 
	~<ut™y
>

38 
	~"šşude/NVMAdd»ss.h
"

39 
	~"šşude/NVMD©aBlock.h
"

40 
	~"¤c/NVMObjeù.h
"

41 
	~"¤c/Add»ssT¿n¦©Ü.h
"

42 
	~"šşude/CommÚEnums.h
"

44 
Çme¥aû
 
	gNVM
 {

46 
ušt64_t
 (
	tNVMObjeù
::*
	tCacheS‘Decod”
)(
	tNVMAdd»ss
&);

60 ’um { 
	gCACHE_ENTRY_NONE
 = 0,

61 
	gCACHE_ENTRY_VALID
 = 1,

62 
	gCACHE_ENTRY_DIRTY
 = 2,

63 
	gCACHE_ENTRY_EXAMPLE
 = 4

66 
	sCacheEÁry


68 
ušt64_t
 
	gæags
;

69 
NVMAdd»ss
 
	gadd»ss
;

70 
NVMD©aBlock
 
	gd©a
;

73 şas 
	cCacheBªk
 : 
public
 
NVMObjeù


75 
public
:

76 
CacheBªk
Ğ
ušt64_t
 
£ts
, ušt64_ˆ
assoc
, ušt64_ˆ
lšeSize
 );

77 ~
CacheBªk
( );

80 
boŞ
 
P»£Á
Ğ
NVMAdd»ss
& 
addr
 );

83 
boŞ
 
In¡®l
Ğ
NVMAdd»ss
& 
addr
, 
NVMD©aBlock
& 
d©a
 );

86 
boŞ
 
S‘FuÎ
Ğ
NVMAdd»ss
& 
addr
 );

90 
boŞ
 
Eviù
Ğ
NVMAdd»ss
& 
addr
, 
NVMD©aBlock
 *
d©a
 );

92 
boŞ
 
R—d
Ğ
NVMAdd»ss
& 
addr
, 
NVMD©aBlock
 *
d©a
 );

93 
boŞ
 
Wr™e
Ğ
NVMAdd»ss
& 
addr
, 
NVMD©aBlock
& 
d©a
 );

95 
boŞ
 
Upd©eD©a
Ğ
NVMAdd»ss
& 
addr
, 
NVMD©aBlock
& 
d©a
 );

97 
S‘R—dTime
Ğ
ušt64_t
 
¹ime
 );

98 
S‘Wr™eTime
Ğ
ušt64_t
 
wtime
 );

100 
ušt64_t
 
G‘R—dTime
( );

101 
ušt64_t
 
G‘Wr™eTime
( );

103 
ušt64_t
 
G‘AssocŸtiv™y
( );

104 
ušt64_t
 
G‘Cach–šeSize
( );

105 
ušt64_t
 
G‘S‘CouÁ
( );

106 
G‘CacheOccu·ncy
( );

108 
boŞ
 
IsIssuabË
Ğ
NVMašReque¡
 *
»q
, 
FaR—sÚ
 *
»asÚ
 );

109 
boŞ
 
IssueCommªd
Ğ
NVMašReque¡
 *
»q
 );

110 
boŞ
 
Reque¡Com¶‘e
Ğ
NVMašReque¡
 *
»q
 );

112 
Cyşe
Ğ
ncyşe_t
 
¡•s
 );

114 
boŞ
 
Choo£Viùim
Ğ
NVMAdd»ss
& 
addr
, NVMAdd»s *
viùim
 );

116 
S‘DecodeFunùiÚ
Ğ
NVMObjeù
 *
dcCÏss
, 
CacheS‘Decod”
 
dcFunc
 );

118 
ušt64_t
 
	gnumS‘s
, 
	gnumAssoc
, 
	gÿch–šeSize
;

119 
CacheEÁry
 **
	gÿcheEÁry
;

120 
ušt64_t
 
	gacûssTime
, 
	g¡©eTim”
;

121 
ušt64_t
 
	g»adTime
, 
	gwr™eTime
;

122 
CacheS‹
 
	g¡©e
;

124 
CacheEÁry
 *
FšdS‘
Ğ
NVMAdd»ss
& 
addr
 );

125 
ušt64_t
 
S‘ID
Ğ
NVMAdd»ss
& 
addr
 );

126 
boŞ
 
	gisMissM­
;

128 
CacheS‘Decod”
 
	gdecodeFunc
;

129 
NVMObjeù
 *
	gdecodeCÏss
;

130 
ušt64_t
 
DeçuÉDecod”
Ğ
NVMAdd»ss
& 
addr
 );

	@Utils/CoinMigrator/CoinMigrator.cpp

34 
	~"Uts/CošMig¿tÜ/CošMig¿tÜ.h
"

35 
	~"Decod”s/Mig¿tÜ/Mig¿tÜ.h
"

36 
	~"NVM/nvmaš.h
"

37 
	~"¤c/SubA¼ay.h
"

38 
	~"¤c/Ev’tQueue.h
"

39 
	~"šşude/NVMH–³rs.h
"

41 
usšg
 
Çme¥aû
 
	gNVM
;

43 
	gCošMig¿tÜ
::
	$CošMig¿tÜ
( )

51 
	`S‘HookTy³
Ğ
NVMHOOK_BOTHISSUE
 );

53 
´omoReque¡
 = 
NULL
;

54 
demoReque¡
 = 
NULL
;

55 
´omoBufã»d
 = 
çl£
;

56 
demoBufã»d
 = 
çl£
;

58 
mig¿tiÚCouÁ
 = 0;

59 
queueWa™s
 = 0;

60 
bufã»dR—ds
 = 0;

62 
qu”›dMemÜy
 = 
çl£
;

63 
´omÙiÚChªÃlP¬ams
 = 
NULL
;

64 
cu¼’tPromÙiÚPage
 = 0;

65 
	}
}

68 
	gCošMig¿tÜ
::~
	$CošMig¿tÜ
( )

71 
	}
}

74 
CošMig¿tÜ
::
	$In™
Ğ
CÚfig
 *
cÚfig
 )

80 
£ed
 = 1;

83 
´obab™y
 = 0.02;

84 
cÚfig
->
	`G‘EÃrgy
Ğ"CošMig¿tÜProbab™y", 
´obab™y
 );

87 
´omÙiÚChªÃl
 = 0;

88 
cÚfig
->
	`G‘V®ueUL
Ğ"CošMig¿tÜPromÙiÚChªÃl", 
´omÙiÚChªÃl
 );

91 
bufãrR—dL©’cy
 = 4;

92 
cÚfig
->
	`G‘V®ueUL
Ğ"Mig¿tiÚBufãrR—dL©’cy", 
bufãrR—dL©’cy
 );

98 
numCŞs
 = 
cÚfig
->
	`G‘V®ue
( "COLS" );

100 
	`AddSt
(
mig¿tiÚCouÁ
);

101 
	`AddSt
(
queueWa™s
);

102 
	`AddSt
(
bufã»dR—ds
);

103 
	}
}

106 
boŞ
 
	gCošMig¿tÜ
::
	$IssueAtomic
Ğ
NVMašReque¡
 *
»que¡
 )

109  
	`TryMig¿tiÚ
Ğ
»que¡
, 
Œue
 );

110 
	}
}

113 
boŞ
 
	gCošMig¿tÜ
::
	$IssueCommªd
Ğ
NVMašReque¡
 *
»que¡
 )

119  
	`TryMig¿tiÚ
Ğ
»que¡
, 
çl£
 );

120 
	}
}

123 
boŞ
 
	gCošMig¿tÜ
::
	$Reque¡Com¶‘e
Ğ
NVMašReque¡
 *
»que¡
 )

125 ifĞ
	`NVMTy³M©ches
(
NVMaš
è&& 
	`G‘Cu¼’tHookTy³
Ğè=ğ
NVMHOOK_PREISSUE
 )

128 
Mig¿tÜ
 *
mig¿tÜT¿n¦©Ü
 = 
dyÇmic_ÿ¡
<Mig¿tÜ *>(
·»Á
->
	`G‘T¿mpŞše
Ğ)->
	`G‘Decod”
( ));

129 
	`as£¹
Ğ
mig¿tÜT¿n¦©Ü
 !ğ
NULL
 );

131 ifĞ
»que¡
->
owÃr
 =ğ
·»Á
->
	`G‘T¿mpŞše
Ğè&&„eque¡->
g
 =ğ
MIG_READ_TAG
 )

134 
mig¿tÜT¿n¦©Ü
->
	`S‘Mig¿tiÚS‹
Ğ
»que¡
->
add»ss
, 
MIGRATION_BUFFERED
 );

137 
boŞ
 
bufãrCom¶‘e
 = 
çl£
;

139 ifĞ(
»que¡
 =ğ
´omoReque¡


140 && 
mig¿tÜT¿n¦©Ü
->
	`IsBufã»d
Ğ
demÙ“
 ))

141 || (
»que¡
 =ğ
demoReque¡


142 && 
mig¿tÜT¿n¦©Ü
->
	`IsBufã»d
Ğ
´omÙ“
 )) )

144 
bufãrCom¶‘e
 = 
Œue
;

148 ifĞ
»que¡
 =ğ
´omoReque¡
 )

150 
´omoReque¡
 = 
Ãw
 
	`NVMašReque¡
( );

151 *
´omoReque¡
 = *
»que¡
;

153 ifĞ
»que¡
 =ğ
demoReque¡
 )

155 
demoReque¡
 = 
Ãw
 
	`NVMašReque¡
( );

156 *
demoReque¡
 = *
»que¡
;

160 
	`as£¹
Ğ
çl£
 );

164 ifĞ
bufãrCom¶‘e
 )

172 
NVMObjeù
 *
§vedP¬’t
 = 
·»Á
->
	`G‘T¿mpŞše
( );

174 
NVMAdd»ss
 
‹mpAdd»ss
 = 
´omoReque¡
->
add»ss
;

175 
´omoReque¡
->
add»ss
 = 
demoReque¡
->address;

176 
demoReque¡
->
add»ss
 = 
‹mpAdd»ss
;

178 
demoReque¡
->
ty³
 = 
WRITE
;

179 
´omoReque¡
->
ty³
 = 
WRITE
;

181 
demoReque¡
->
g
 = 
MIG_WRITE_TAG
;

182 
´omoReque¡
->
g
 = 
MIG_WRITE_TAG
;

185 
boŞ
 
demoIssued
, 
´omoIssued
;

187 
demoIssued
 = 
§vedP¬’t
->
	`G‘Chd
Ğ
demoReque¡
 )->
	`IssueCommªd
( demoRequest );

188 
´omoIssued
 = 
§vedP¬’t
->
	`G‘Chd
Ğ
´omoReque¡
 )->
	`IssueCommªd
(…romoRequest );

190 ifĞ
demoIssued
 )

192 
mig¿tÜT¿n¦©Ü
->
	`S‘Mig¿tiÚS‹
Ğ
demoReque¡
->
add»ss
, 
MIGRATION_WRITING
 );

194 ifĞ
´omoIssued
 )

196 
mig¿tÜT¿n¦©Ü
->
	`S‘Mig¿tiÚS‹
Ğ
´omoReque¡
->
add»ss
, 
MIGRATION_WRITING
 );

199 
´omoBufã»d
 = !
´omoIssued
;

200 
demoBufã»d
 = !
demoIssued
;

204 ifĞ
»que¡
->
owÃr
 =ğ
·»Á
->
	`G‘T¿mpŞše
Ğè&&„eque¡->
g
 =ğ
MIG_WRITE_TAG
 )

207 
mig¿tÜT¿n¦©Ü
->
	`S‘Mig¿tiÚS‹
Ğ
»que¡
->
add»ss
, 
MIGRATION_DONE
 );

209 
mig¿tiÚCouÁ
++;

212 ifĞ
´omoBufã»d
 || 
demoBufã»d
 )

214 
boŞ
 
demoIssued
, 
´omoIssued
;

216 ifĞ
´omoBufã»d
 )

218 
´omoIssued
 = 
·»Á
->
	`G‘T¿mpŞše
Ğ)->
	`G‘Chd
Ğ
´omoReque¡
 )->
	`IssueCommªd
(…romoRequest );

219 
´omoBufã»d
 = !
´omoIssued
;

222 ifĞ
demoBufã»d
 )

224 
demoIssued
 = 
·»Á
->
	`G‘T¿mpŞše
Ğ)->
	`G‘Chd
Ğ
demoReque¡
 )->
	`IssueCommªd
( demoRequest );

225 
demoBufã»d
 = !
demoIssued
;

230  
Œue
;

231 
	}
}

234 
boŞ
 
	gCošMig¿tÜ
::
	$CheckIssuabË
Ğ
NVMAdd»ss
 
add»ss
, 
OpTy³
 
ty³
 )

236 
NVMašReque¡
 
»que¡
;

238 
»que¡
.
add»ss
 =‡ddress;

239 
»que¡
.
ty³
 =ype;

241  
·»Á
->
	`G‘T¿mpŞše
Ğ)->
	`G‘Chd
Ğ&
»que¡
 )->
	`IsIssuabË
( &request );

242 
	}
}

245 
boŞ
 
	gCošMig¿tÜ
::
	$TryMig¿tiÚ
Ğ
NVMašReque¡
 *
»que¡
, 
boŞ
 
©omic
 )

247 
boŞ
 
rv
 = 
Œue
;

249 ifĞ
	`NVMTy³M©ches
(
NVMaš
) )

253 
Mig¿tÜ
 *
mig¿tÜT¿n¦©Ü
 = 
dyÇmic_ÿ¡
<Mig¿tÜ *>(
·»Á
->
	`G‘T¿mpŞše
Ğ)->
	`G‘Decod”
( ));

254 
	`as£¹
Ğ
mig¿tÜT¿n¦©Ü
 !ğ
NULL
 );

257 ifĞ
	`G‘Cu¼’tHookTy³
Ğè=ğ
NVMHOOK_PREISSUE
 && 
mig¿tÜT¿n¦©Ü
->
	`IsBufã»d
Ğ
»que¡
->
add»ss
 ) )

260 
rv
 = 
çl£
;

263 
	`G‘Ev’tQueue
Ğ)->
	`In£¹Ev’t
Ğ
Ev’tRe¥Ú£
, 
·»Á
->
	`G‘T¿mpŞše
Ğ), 
»que¡
,

264 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
()+
bufãrR—dL©’cy
 );

266 
bufã»dR—ds
++;

268  
rv
;

272 ifĞ
	`G‘Cu¼’tHookTy³
Ğè!ğ
NVMHOOK_POSTISSUE
 )

274  
rv
;

278 
boŞ
 
mig¿tiÚPossibË
 = 
çl£
;

280 ifĞ!
mig¿tÜT¿n¦©Ü
->
	`Mig¿tšg
( )

281 && !
mig¿tÜT¿n¦©Ü
->
	`IsMig¿‹d
Ğ
»que¡
->
add»ss
 )

282 && 
»que¡
->
add»ss
.
	`G‘ChªÃl
Ğè!ğ
´omÙiÚChªÃl
 )

284 
mig¿tiÚPossibË
 = 
Œue
;

287 ifĞ
mig¿tiÚPossibË
 )

289 
	`as£¹
Ğ!
demoBufã»d
 && !
´omoBufã»d
 );

292 
cošToss
 = 
¡©ic_ÿ¡
<>(::
	`¿nd_r
(&
£ed
))

293 / 
¡©ic_ÿ¡
<>(
RAND_MAX
);

295 ifĞ
cošToss
 <ğ
´obab™y
 )

303 
NVMObjeù
 *
§vedP¬’t
 = 
·»Á
->
	`G‘T¿mpŞše
( );

306 
ušt64_t
 
row
, 
bªk
, 
¿nk
, 
chªÃl
, 
sub¬¿y
;

307 
»que¡
->
add»ss
.
	`G‘T¿n¦©edAdd»ss
Ğ&
row
, 
NULL
, &
bªk
, &
¿nk
, &
chªÃl
, &
sub¬¿y
 );

308 
ušt64_t
 
´omÙ“Add»ss
 = 
mig¿tÜT¿n¦©Ü
->
	`Rev”£T¿n¦©e
Ğ
row
, 0, 
bªk
, 
¿nk
, 
chªÃl
, 
sub¬¿y
 );

310 
´omÙ“
.
	`S‘PhysiÿlAdd»ss
Ğ
´omÙ“Add»ss
 );

311 
´omÙ“
.
	`S‘T¿n¦©edAdd»ss
Ğ
row
, 0, 
bªk
, 
¿nk
, 
chªÃl
, 
sub¬¿y
 );

314 
	`Choo£Viùim
Ğ
mig¿tÜT¿n¦©Ü
, 
´omÙ“
, 
demÙ“
 );

316 
	`as£¹
Ğ
mig¿tÜT¿n¦©Ü
->
	`IsMig¿‹d
Ğ
demÙ“
 ) =ğ
çl£
 );

317 
	`as£¹
Ğ
mig¿tÜT¿n¦©Ü
->
	`IsMig¿‹d
Ğ
´omÙ“
 ) =ğ
çl£
 );

319 ifĞ
©omic
 )

321 
mig¿tÜT¿n¦©Ü
->
	`S¹Mig¿tiÚ
Ğ
»que¡
->
add»ss
, 
demÙ“
 );

322 
mig¿tÜT¿n¦©Ü
->
	`S‘Mig¿tiÚS‹
Ğ
´omÙ“
, 
MIGRATION_DONE
 );

323 
mig¿tÜT¿n¦©Ü
->
	`S‘Mig¿tiÚS‹
Ğ
demÙ“
, 
MIGRATION_DONE
 );

326 ifĞ
	`CheckIssuabË
Ğ
´omÙ“
, 
READ
 ) &&

327 
	`CheckIssuabË
Ğ
demÙ“
, 
READ
 ) )

329 
mig¿tÜT¿n¦©Ü
->
	`S¹Mig¿tiÚ
Ğ
»que¡
->
add»ss
, 
demÙ“
 );

331 
´omoReque¡
 = 
Ãw
 
	`NVMašReque¡
( );

332 
demoReque¡
 = 
Ãw
 
	`NVMašReque¡
( );

334 
´omoReque¡
->
add»ss
 = 
´omÙ“
;

335 
´omoReque¡
->
ty³
 = 
READ
;

336 
´omoReque¡
->
g
 = 
MIG_READ_TAG
;

337 
´omoReque¡
->
bur¡CouÁ
 = 
numCŞs
;

339 
demoReque¡
->
add»ss
 = 
demÙ“
;

340 
demoReque¡
->
ty³
 = 
READ
;

341 
demoReque¡
->
g
 = 
MIG_READ_TAG
;

342 
demoReque¡
->
bur¡CouÁ
 = 
numCŞs
;

344 
´omoReque¡
->
owÃr
 = 
§vedP¬’t
;

345 
demoReque¡
->
owÃr
 = 
§vedP¬’t
;

346 
§vedP¬’t
->
	`IssueCommªd
Ğ
´omoReque¡
 );

347 
§vedP¬’t
->
	`IssueCommªd
Ğ
demoReque¡
 );

351 
queueWa™s
++;

357  
rv
;

358 
	}
}

361 
	gCošMig¿tÜ
::
	$Choo£Viùim
Ğ
Mig¿tÜ
 *
©
, 
NVMAdd»ss
& , NVMAdd»ss& 
viùim
 )

368 ifĞ!
qu”›dMemÜy
 )

377 
NVMašReque¡
 
qu”yReque¡
;

379 
qu”yReque¡
.
add»ss
.
	`S‘T¿n¦©edAdd»ss
Ğ0, 0, 0, 0, 
´omÙiÚChªÃl
, 0 );

380 
qu”yReque¡
.
add»ss
.
	`S‘PhysiÿlAdd»ss
( 0 );

381 
qu”yReque¡
.
ty³
 = 
READ
;

382 
qu”yReque¡
.
owÃr
 = 
this
;

384 
NVMObjeù
 *
curObjeù
 = 
NULL
;

386 
	`FšdModuËChdTy³
Ğ&
qu”yReque¡
, 
SubA¼ay
, 
curObjeù
, 
·»Á
->
	`G‘T¿mpŞše
( ) );

388 
SubA¼ay
 *
´omÙiÚChªÃlSub¬¿y
 = 
NULL
;

389 
´omÙiÚChªÃlSub¬¿y
 = 
dyÇmic_ÿ¡
<
SubA¼ay
 *>Ğ
curObjeù
 );

391 
	`as£¹
Ğ
´omÙiÚChªÃlSub¬¿y
 !ğ
NULL
 );

392 
P¬ams
 *
p
 = 
´omÙiÚChªÃlSub¬¿y
->
	`G‘P¬ams
( );

393 
´omÙiÚChªÃlP¬ams
 = 
p
;

395 
tÙ®PromÙiÚPages
 = 
p
->
RANKS
 *…->
BANKS
 *…->
ROWS
;

396 
cu¼’tPromÙiÚPage
 = 0;

398 ifĞ
p
->
COLS
 !ğ
numCŞs
 )

400 
¡d
::
cout
 << "W¬nšg: Pagsizoàç¡‡nd slow memÜy difãrs." << std::
’dl
;

403 
qu”›dMemÜy
 = 
Œue
;

410 
ušt64_t
 
viùimRªk
, 
viùimBªk
, 
viùimRow
, 
viùimSub¬¿y
, 
sub¬¿yCouÁ
;

411 
ncouÁ”_t
 
´omoPage
 = 
cu¼’tPromÙiÚPage
;

413 
viùimRªk
 = 
´omoPage
 % 
´omÙiÚChªÃlP¬ams
->
RANKS
;

414 
´omoPage
 >>ğ
NVM
::
	`mlog2
Ğ
´omÙiÚChªÃlP¬ams
->
RANKS
 );

416 
viùimBªk
 = 
´omoPage
 % 
´omÙiÚChªÃlP¬ams
->
BANKS
;

417 
´omoPage
 >>ğ
NVM
::
	`mlog2
Ğ
´omÙiÚChªÃlP¬ams
->
BANKS
 );

419 
sub¬¿yCouÁ
 = 
´omÙiÚChªÃlP¬ams
->
ROWS
 /…romÙiÚChªÃlP¬ams->
MATHeight
;

420 
viùimSub¬¿y
 = 
´omoPage
 % 
sub¬¿yCouÁ
;

421 
´omoPage
 >>ğ
NVM
::
	`mlog2
Ğ
sub¬¿yCouÁ
 );

423 
viùimRow
 = 
´omoPage
;

425 
viùim
.
	`S‘T¿n¦©edAdd»ss
Ğ
viùimRow
, 0, 
viùimBªk
, 
viùimRªk
, 
´omÙiÚChªÃl
, 
viùimSub¬¿y
 );

426 
ušt64_t
 
viùimAdd»ss
 = 
©
->
	`Rev”£T¿n¦©e
Ğ
viùimRow
, 0, 
viùimBªk
, 
viùimRªk
, 
´omÙiÚChªÃl
, 
viùimSub¬¿y
 );

427 
viùim
.
	`S‘PhysiÿlAdd»ss
Ğ
viùimAdd»ss
 );

429 
cu¼’tPromÙiÚPage
 = (cu¼’tPromÙiÚPag+ 1è% 
tÙ®PromÙiÚPages
;

430 
	}
}

433 
	gCošMig¿tÜ
::
	$Cyşe
Ğ
ncyşe_t
 )

436 
	}
}

	@Utils/CoinMigrator/CoinMigrator.h

34 #iâdeà
__NVMAIN_UTILS_COINMIGRATOR_H__


35 
	#__NVMAIN_UTILS_COINMIGRATOR_H__


	)

37 
	~"¤c/NVMObjeù.h
"

38 
	~"¤c/P¬ams.h
"

39 
	~"šşude/NVMašReque¡.h
"

41 
Çme¥aû
 
	gNVM
 {

43 
	#MIG_READ_TAG
 
	`G‘TagG’”©Ü
Ğ)->
	`C»©eTag
("MIGREAD")

	)

44 
	#MIG_WRITE_TAG
 
	`G‘TagG’”©Ü
Ğ)->
	`C»©eTag
("MIGWRITE")

	)

46 
şass
 
	gMig¿tÜ
;

48 şas 
	cCošMig¿tÜ
 : 
public
 
NVMObjeù


50 
public
:

51 
CošMig¿tÜ
( );

52 ~
CošMig¿tÜ
( );

54 
In™
Ğ
CÚfig
 *
cÚfig
 );

56 
boŞ
 
IssueAtomic
Ğ
NVMašReque¡
 *
»que¡
 );

57 
boŞ
 
IssueCommªd
Ğ
NVMašReque¡
 *
»que¡
 );

58 
boŞ
 
Reque¡Com¶‘e
Ğ
NVMašReque¡
 *
»que¡
 );

60 
Cyşe
Ğ
ncyşe_t
 
¡•s
 );

62 
	g´iv©e
:

63 
boŞ
 
´omoBufã»d
, 
	gdemoBufã»d
;

64 
NVMAdd»ss
 
	gdemÙ“
, 
	g´omÙ“
;

65 
NVMašReque¡
 *
	g´omoReque¡
;

66 
NVMašReque¡
 *
	gdemoReque¡
;

68 
	g£ed
;

69 
	g´obab™y
;

70 
ncouÁ”_t
 
	gnumCŞs
;

71 
boŞ
 
	gqu”›dMemÜy
;

72 
ncyşe_t
 
	gbufãrR—dL©’cy
;

73 
P¬ams
 *
	g´omÙiÚChªÃlP¬ams
;

74 
ncouÁ”_t
 
	gtÙ®PromÙiÚPages
;

75 
ncouÁ”_t
 
	gcu¼’tPromÙiÚPage
;

76 
ncouÁ”_t
 
	g´omÙiÚChªÃl
;

78 
ncouÁ”_t
 
	gmig¿tiÚCouÁ
;

79 
ncouÁ”_t
 
	gqueueWa™s
;

80 
ncouÁ”_t
 
	gbufã»dR—ds
;

82 
boŞ
 
CheckIssuabË
Ğ
NVMAdd»ss
 
add»ss
, 
OpTy³
 
ty³
 );

83 
boŞ
 
TryMig¿tiÚ
Ğ
NVMašReque¡
 *
»que¡
, boŞ 
©omic
 );

84 
Choo£Viùim
Ğ
Mig¿tÜ
 *
©
, 
NVMAdd»ss
& 
´omo
, NVMAdd»ss& 
viùim
 );

	@Utils/HookFactory.cpp

34 
	~"Uts/HookFaùÜy.h
"

37 
	~"Uts/Visu®iz”/Visu®iz”.h
"

38 
	~"Uts/Reque¡T¿ûr/Reque¡T¿ûr.h
"

39 
	~"Uts/Po¡T¿û/Po¡T¿û.h
"

40 
	~"Uts/CošMig¿tÜ/CošMig¿tÜ.h
"

41 
	~"Uts/S–fDefšedMig¿tÜ/SticMig¿tÜ.h
"

43 
usšg
 
Çme¥aû
 
	gNVM
;

46 
NVMObjeù
 *
	gHookFaùÜy
::
C»©eHook
Ğ
¡d
::
¡ršg
 
hookName
 )

48 
NVMObjeù
 *
hook
 = 
NULL
;

50 ifĞ
	ghookName
 =ğ"Visu®iz”" ) 
hook
 = 
Ãw
 
Visu®iz”
( );

51 ifĞ
	ghookName
 =ğ"Reque¡T¿ûr" ) 
hook
 = 
Ãw
 
Reque¡T¿ûr
( );

52 ifĞ
	ghookName
 =ğ"Po¡T¿û" ) 
hook
 = 
Ãw
 
Po¡T¿û
( );

53 ifĞ
	ghookName
 =ğ"CošMig¿tÜ" ) 
hook
 = 
Ãw
 
CošMig¿tÜ
( );

54 ifĞ
	ghookName
 =ğ"SticMig¿tÜ"è
hook
 = 
Ãw
 
SticMig¿tÜ
();

57 ifĞ
	ghook
 !ğ
NULL
 )

58 
hook
->
StName
Ğ
hookName
 );

60  
	ghook
;

	@Utils/HookFactory.h

34 #iâdeà
__NVMAIN_UTILS_HOOKFACTORY_H__


35 
	#__NVMAIN_UTILS_HOOKFACTORY_H__


	)

37 
	~<¡ršg
>

38 
	~"¤c/NVMObjeù.h
"

40 
Çme¥aû
 
	gNVM
 {

42 şas 
	cHookFaùÜy


44 
	gpublic
:

45 
HookFaùÜy
( ) { }

46 ~
HookFaùÜy
( ) { }

48 
NVMObjeù
 *
C»©eHook
Ğ
¡d
::
¡ršg
 
hookName
 );

	@Utils/PostTrace/PostTrace.cpp

34 
	~"Uts/Po¡T¿û/Po¡T¿û.h
"

35 
	~"¤c/Ev’tQueue.h
"

38 
	~"¤c/Bªk.h
"

39 
	~"¤c/Rªk.h
"

40 
	~"NVM/nvmaš.h
"

41 
	~"šşude/NVMH–³rs.h
"

42 
	~"ŒaûWr™”/T¿ûWr™”FaùÜy.h
"

44 
	~<s¡»am
>

46 
usšg
 
Çme¥aû
 
	gNVM
;

48 
	gPo¡T¿û
::
	$Po¡T¿û
( )

50 
	`S‘HookTy³
Ğ
NVMHOOK_PREISSUE
 );

51 
	}
}

53 
	gPo¡T¿û
::~
	$Po¡T¿û
( )

55 
	}
}

61 
Po¡T¿û
::
	$In™
Ğ
CÚfig
 *
cÚf
 )

63 
numRªks
 = 
¡©ic_ÿ¡
<
ncouÁ”_t
>Ğ
cÚf
->
	`G‘V®ue
( "RANKS" ) );

64 
numBªks
 = 
¡©ic_ÿ¡
<
ncouÁ”_t
>Ğ
cÚf
->
	`G‘V®ue
( "BANKS" ) );

65 
numChªÃls
 = 
¡©ic_ÿ¡
<
ncyşe_t
>Ğ
cÚf
->
	`G‘V®ue
( "CHANNELS" ) );

67 
¡d
::
¡ršg
 
ŒaûWr™”Name
 = "NVMainTrace";

68 
¡d
::
¡ršg
 
ba£FeName
;

70 ifĞ
cÚf
->
	`KeyExi¡s
( "PostTraceWriter" ) )

71 
ŒaûWr™”Name
 = 
cÚf
->
	`G‘SŒšg
( "PostTraceWriter" );

73 
G’”icT¿ûWr™”
 *
‹¡T¿ûr
 = 
T¿ûWr™”FaùÜy
::
	`C»©eNewT¿ûWr™”
Ğ
ŒaûWr™”Name
 );

75 ifĞ
cÚf
->
	`KeyExi¡s
Ğ"Po¡T¿ûP”ChªÃl" ) && cÚf->
	`G‘BoŞ
( "PostTracePerChannel" ) )

76 
‹¡T¿ûr
->
	`S‘P”ChªÃlT¿ûs
Ğ
Œue
 );

77 ifĞ
cÚf
->
	`KeyExi¡s
Ğ"Po¡T¿ûP”Rªk" ) && cÚf->
	`G‘BoŞ
( "PostTracePerRank" ) )

78 
‹¡T¿ûr
->
	`S‘P”RªkT¿ûs
Ğ
Œue
 );

80 ifĞ
‹¡T¿ûr
->
	`G‘P”ChªÃlT¿ûs
(è&&e¡T¿ûr->
	`G‘P”RªkT¿ûs
() )

82 
¡d
::
cout
 << "Po¡T¿û: CªnÙ hav³¸chªÃÈªd…”„ªk¿ûs!" << std::
’dl
;

83 
	`ex™
(0);

86 ifĞ
cÚf
->
	`G‘SŒšg
( "PostTraceFile" ) == "" )

87 
ba£FeName
 = "nvmain_posttrace.nvt";

89 
ba£FeName
 = 
cÚf
->
	`G‘SŒšg
( "PostTraceFile" );

91 ifĞ
ba£FeName
[0] != '/' )

93 
ba£FeName
 = 
NVM
::
	`G‘FeP©h
Ğ
cÚf
->
	`G‘FeName
( ) );

94 
ba£FeName
 +ğ
cÚf
->
	`G‘SŒšg
( "PostTraceFile" );

97 
¡d
::
cout
 << "Po¡T¿û: Usšg¿û f" << 
ba£FeName
 << std::
’dl
;

100 ifĞ
‹¡T¿ûr
->
	`G‘P”ChªÃlT¿ûs
(è||e¡T¿ûr->
	`G‘P”RªkT¿ûs
() )

102 
ŒaûChªÃls
 = 
numChªÃls
;

106 
ŒaûChªÃls
 = 1;

110 
ŒaûWr™”
 = 
Ãw
 
G’”icT¿ûWr™”
 ** [
ŒaûChªÃls
];

113 ifĞ
‹¡T¿ûr
->
	`G‘P”RªkT¿ûs
() )

115 
ŒaûRªks
 = 
numRªks
;

119 
ŒaûRªks
 = 1;

123  
ncouÁ”_t
 
chªÃlIdx
 = 0; chªÃlIdx < 
ŒaûChªÃls
; channelIdx++ )

125 
ŒaûWr™”
[
chªÃlIdx
] = 
Ãw
 
G’”icT¿ûWr™”
 * [
ŒaûRªks
];

129  
ncouÁ”_t
 
chªÃlIdx
 = 0; chªÃlIdx < 
ŒaûChªÃls
; channelIdx++ )

131  
ncouÁ”_t
 
¿nkIdx
 = 0;„ªkIdx < 
ŒaûRªks
;„ankIdx++ )

133 
¡d
::
¡ršg¡»am
 
ŒaûFeName
;

134 
ŒaûFeName
 << 
ba£FeName
 << "_ch" << 
chªÃlIdx
 << "_rk" << 
¿nkIdx
;

136 
ŒaûWr™”
[
chªÃlIdx
][
¿nkIdx
] = 
T¿ûWr™”FaùÜy
::
	`C»©eNewT¿ûWr™”
Ğ
ŒaûWr™”Name
 );

137 
ŒaûWr™”
[
chªÃlIdx
][
¿nkIdx
]->
	`S‘T¿ûFe
Ğ
ŒaûFeName
.
	`¡r
() );

138 
ŒaûWr™”
[
chªÃlIdx
][
¿nkIdx
]->
	`S‘Echo
Ğ
cÚf
->
	`G‘BoŞ
( "EchoPostTrace" ) );

139 
ŒaûWr™”
[
chªÃlIdx
][
¿nkIdx
]->
	`In™
Ğ
cÚf
 );

143 
d–‘e
 
‹¡T¿ûr
;

144 
	}
}

152 
boŞ
 
	gPo¡T¿û
::
	$IssueAtomic
Ğ
NVMašReque¡
 *
»que¡
 )

154  
	`IssueCommªd
Ğ
»que¡
 );

155 
	}
}

163 
boŞ
 
	gPo¡T¿û
::
	$IssueCommªd
Ğ
NVMašReque¡
 *
»que¡
 )

165 
boŞ
 
isPow”Commªd
 = (
»que¡
->
ty³
 =ğ
POWERDOWN_PDA
 ||„eque¡->ty³ =ğ
POWERDOWN_PDPF
 ||

166 
»que¡
->
ty³
 =ğ
POWERDOWN_PDPS
 ||„eque¡->ty³ =ğ
POWERUP
 );

170 ifĞ(
isPow”Commªd
 && 
	`NVMTy³M©ches
(
Rªk
)è|| (!isPow”Commªd && NVMTy³M©ches(
Bªk
)) )

172 
ušt64_t
 
¿nk
, 
chªÃl
, 
rk
, 
ch
;

174 
»que¡
->
add»ss
.
	`G‘T¿n¦©edAdd»ss
Ğ
NULL
, NULL, NULL, &
¿nk
, &
chªÃl
, NULL );

175 
rk
 = (
ŒaûRªks
 =ğ1è? 0 : 
¿nk
;

176 
ch
 = (
ŒaûChªÃls
 =ğ1è? 0 : 
chªÃl
;

178 
	`as£¹
Ğ
rk
 < 
numRªks
 );

179 
	`as£¹
Ğ
ch
 < 
numChªÃls
 );

181 
T¿ûLše
 

;

183 

.
	`S‘Lše
Ğ
»que¡
->
add»ss
,

184 
»que¡
->
ty³
,

185 
	`G‘Ev’tQueue
Ğ)->
	`G‘Cu¼’tCyşe
( ),

186 
»que¡
->
d©a
,

187 
»que¡
->
th»adId


190 
ŒaûWr™”
[
ch
][
rk
]->
	`S‘NextAcûss
Ğ&

 );

193  
Œue
;

194 
	}
}

196 
boŞ
 
	gPo¡T¿û
::
	$Reque¡Com¶‘e
Ğ
NVMašReque¡
 * )

198  
Œue
;

199 
	}
}

201 
	gPo¡T¿û
::
	$Cyşe
Ğ
ncyşe_t
 )

203 
	}
}

	@Utils/PostTrace/PostTrace.h

34 #iâdeà
__NVMAIN_UTILS_POSTTRACE_H_


35 
	#__NVMAIN_UTILS_POSTTRACE_H__


	)

37 
	~"¤c/NVMObjeù.h
"

38 
	~"šşude/NVMašReque¡.h
"

39 
	~"šşude/NVMTy³s.h
"

40 
	~"ŒaûWr™”/G’”icT¿ûWr™”.h
"

42 
Çme¥aû
 
	gNVM
 {

44 şas 
	cPo¡T¿û
 : 
public
 
NVMObjeù


46 
public
:

47 
Po¡T¿û
( );

48 ~
Po¡T¿û
( );

50 
boŞ
 
IssueCommªd
Ğ
NVMašReque¡
 *
»q
 );

51 
boŞ
 
IssueAtomic
Ğ
NVMašReque¡
 *
»q
 );

53 
boŞ
 
Reque¡Com¶‘e
Ğ
NVMašReque¡
 *
»q
 );

55 
Cyşe
Ğ
ncyşe_t
 );

57 
In™
Ğ
CÚfig
 *
cÚf
 );

59 
	g´iv©e
:

60 
ncouÁ”_t
 
numRªks
, 
	gnumBªks
, 
	gnumChªÃls
;

61 
ncouÁ”_t
 
	gŒaûRªks
, 
	gŒaûChªÃls
;

63 
G’”icT¿ûWr™”
 ***
	gŒaûWr™”
;

	@Utils/RequestTracer/RequestTracer.cpp

34 
	~"Uts/Reque¡T¿ûr/Reque¡T¿ûr.h
"

35 
	~"¤c/CÚfig.h
"

37 
	~<io¡»am
>

38 
	~<iomª
>

39 
	~<c¡dlib
>

40 
	~<cxxabi.h
>

41 
	~<csigÇl
>

42 
	~<ÿs£¹
>

44 
usšg
 
Çme¥aû
 
	gNVM
;

47 
	gReque¡T¿ûr
::
	$Reque¡T¿ûr
( )

50 
	`S‘HookTy³
Ğ
NVMHOOK_PREISSUE
 );

52 
£lfHook
 = 
Ãw
 
	`NVMObjeù_hook
Ğ
this
 );

53 
d‘eùD—dlocks
 = 
Œue
;

54 
´štT¿û
 = 
Œue
;

55 
d—dlockTh»shŞd
 = 800000;

56 
	}
}

58 
	gReque¡T¿ûr
::~
	$Reque¡T¿ûr
( )

60 
d–‘e
 
£lfHook
;

61 
	}
}

69 
	gReque¡T¿ûr
::
	$In™
Ğ
CÚfig
 *
cÚf
 )

72 ifĞ
cÚf
->
	`KeyExi¡s
( "DeadlockThreshold" ) )

74 
d—dlockTh»shŞd
 = 
¡©ic_ÿ¡
<
ncyşe_t
>Ğ
cÚf
->
	`G‘V®ue
("DeadlockThreshold") );

75 
d‘eùD—dlocks
 = 
Œue
;

78 ifĞ
cÚf
->
	`KeyExi¡s
( "DetectDeadlocks" ) )

81 ifĞ
cÚf
->
	`G‘SŒšg
( "DetectDeadlocks" ) == "false" )

82 
d‘eùD—dlocks
 = 
çl£
;

85 ifĞ
cÚf
->
	`KeyExi¡s
( "PrintRequestTrace" ) )

88 ifĞ
cÚf
->
	`G‘SŒšg
( "PrintRequestTrace" ) == "false" )

89 
´štT¿û
 = 
çl£
;

91 
	}
}

94 
boŞ
 
	gReque¡T¿ûr
::
	$IssueAtomic
Ğ
NVMašReque¡
 * )

98  
Œue
;

99 
	}
}

102 
	gReque¡T¿ûr
::
	$T¿ûAdd»ss
Ğ
NVMašReque¡
 *
»q
, 
T¿ûdTy³
 
ŒaûTy³
 )

106 
ušt64_t
 
addr
 = 
»š‹½»t_ÿ¡
<ušt64_t>(
»q
);

109 ifĞ
ŒaûdReque¡s
.
	`couÁ
Ğ
addr
 ) )

111 
T¿ûdReque¡
 *
Œ
 = 
ŒaûdReque¡s
[
addr
];

113  
Œ
->
Ãxt
 !ğ
NULL
 )

115 
Œ
 =r->
Ãxt
;

118 
Œ
->
Ãxt
 = 
Ãw
 
	`T¿ûdReque¡
( );

119 
Œ
 =r->
Ãxt
;

121 
Œ
->
moduËName
 = 
	`DemªgË
(
NVMObjeùTy³
);

122 
Œ
->
ty³
 = 
ŒaûTy³
;

123 
Œ
->
Ãxt
 = 
NULL
;

128 
T¿ûdReque¡
 *
Œ
 = 
Ãw
 
	`T¿ûdReque¡
( );

130 
Œ
->
moduËName
 = 
	`DemªgË
(
NVMObjeùTy³
);

131 
Œ
->
ty³
 = 
ŒaûTy³
;

132 
Œ
->
Ãxt
 = 
NULL
;

134 
ŒaûdReque¡s
.
	`š£¹
Ğ
¡d
::
·œ
<
ušt64_t
, 
T¿ûdReque¡
*>(
addr
, 
Œ
) );

137 ifĞ
d‘eùD—dlocks
 )

139 
Ev’t
 *
d—dlockEv’t
 = 
Ãw
 
	`Ev’t
( );

140 
ncyşe_t
 
d—dlockTim”
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
(è+ 
d—dlockTh»shŞd
;

142 
d—dlockEv’t
->
	`S‘Ty³
Ğ
Ev’tC®lback
 );

143 
d—dlockEv’t
->
	`S‘Rec›Á
Ğ
£lfHook
 );

144 
d—dlockEv’t
->
	`S‘D©a
Ğ
»q
 );

146 
Œ
->
d—dlockEv’t
 = deadlockEvent;

147 
Œ
->
d—dlockTim”
 = deadlockTimer;

149 
	`G‘Ev’tQueue
()->
	`In£¹Ev’t
Ğ
d—dlockEv’t
, 
d—dlockTim”
 );

152 
	}
}

155 
boŞ
 
	gReque¡T¿ûr
::
	$IssueCommªd
Ğ
NVMašReque¡
 *
»q
 )

157 
	`T¿ûAdd»ss
Ğ
»q
, 
T¿ûdIssue
 );

159  
Œue
;

160 
	}
}

163 
boŞ
 
	gReque¡T¿ûr
::
	$Reque¡Com¶‘e
Ğ
NVMašReque¡
 *
»q
 )

165 
	`T¿ûAdd»ss
Ğ
»q
, 
T¿ûdCom¶‘iÚ
 );

167 ifĞ
»q
->
owÃr
 =ğ
	`G‘P¬’t
()->
	`G‘T¿mpŞše
() )

169 
ušt64_t
 
addr
 = 
»š‹½»t_ÿ¡
<ušt64_t>(
»q
);

171 ifĞ
´štT¿û
 )

173 
¡d
::
¡ršg
 
»qTy³
 = "NOP";

175  
»q
->
ty³
 )

177 
ACTIVATE
:

178 
»qTy³
 = "ACT";

180 
READ
:

181 
»qTy³
 = "READ";

183 
WRITE
:

184 
»qTy³
 = "WRITE";

186 
PRECHARGE
:

187 
»qTy³
 = "PRE";

189 
POWERDOWN_PDA
:

190 
»qTy³
 = "PDA";

192 
POWERDOWN_PDPF
:

193 
»qTy³
 = "PDPF";

195 
POWERDOWN_PDPS
:

196 
»qTy³
 = "PDPS";

198 
POWERUP
:

199 
»qTy³
 = "PWRUP";

201 
REFRESH
:

202 
»qTy³
 = "REF";

204 
BUS_READ
:

205 
»qTy³
 = "BUSRD";

207 
BUS_WRITE
:

208 
»qTy³
 = "BUSWR";

211 
»qTy³
 = "NOP";

215 
¡d
::
cout
 << "0x" << std::
hex
 << std::
	`£tiosæags
Ğ¡d::
ios_ba£
::
right
 ) << std::
	`£tw
(8)

216 << 
¡d
::
	`£tfl
('0'è<< 
»q
->
add»ss
.
	`G‘PhysiÿlAdd»ss
(è<< std::
dec


217 << 
¡d
::
	`»£tiosæags
Ğ¡d::
ios_ba£
::
right
 )

218 << 
¡d
::
	`£tw
(6è<< std::
	`£tfl
(' 'è<< 
»qTy³
 << " ";

220 
T¿ûdReque¡
 *
Œ
 = 
ŒaûdReque¡s
[
addr
];

224 
¡d
::
cout
 << 
Œ
->
moduËName
;

225 
¡d
::
cout
 << ((
Œ
->
ty³
 =ğ
T¿ûdIssue
) ? "[I]" : "[C]");

227 ifĞ
Œ
->
Ãxt
 !ğ
NULL
 ) 
¡d
::
cout
 << " -> ";

228 ifĞ
Œ
->
Ãxt
 =ğ
NULL
 ) ;

230 
Œ
 =r->
Ãxt
;

233 
¡d
::
cout
 << std::
’dl
;

236 ifĞ
d‘eùD—dlocks
 )

238 
T¿ûdReque¡
 *
Œ
 = 
ŒaûdReque¡s
[
addr
];

239 #iâdeà
NDEBUG


240 
boŞ
 
tim”Removed
 = 
	`G‘Ev’tQueue
()->
	`RemoveEv’t
Ğ
Œ
->
d—dlockEv’t
,r->
d—dlockTim”
 );

241 
	`as£¹
Ğ
tim”Removed
 );

243 
	`G‘Ev’tQueue
()->
	`RemoveEv’t
Ğ
Œ
->
d—dlockEv’t
,r->
d—dlockTim”
 );

247 
ŒaûdReque¡s
.
	`”a£
(
addr
);

250  
Œue
;

251 
	}
}

254 
	gReque¡T¿ûr
::
	$C®lback
Ğ*
d©a
 )

261 
NVMašReque¡
 *
»q
 = 
¡©ic_ÿ¡
<NVMašReque¡ *>(
d©a
);

264 
¡d
::
¡ršg
 
»qTy³
;

266  
»q
->
ty³
 )

268 
ACTIVATE
:

269 
»qTy³
 = "Activate";

271 
READ
:

272 
»qTy³
 = "Read";

274 
WRITE
:

275 
»qTy³
 = "Write";

277 
PRECHARGE
:

278 
»qTy³
 = "Prechange";

280 
POWERDOWN_PDA
:

281 
»qTy³
 = "Active Powerdown";

283 
POWERDOWN_PDPF
:

284 
»qTy³
 = "Precharge Powerdown (Fast)";

286 
POWERDOWN_PDPS
:

287 
»qTy³
 = "Precharge Powerdown (Slow)";

289 
POWERUP
:

290 
»qTy³
 = "Powerup";

292 
REFRESH
:

293 
»qTy³
 = "Refresh";

295 
BUS_READ
:

296 
»qTy³
 = "Bus Read";

298 
BUS_WRITE
:

299 
»qTy³
 = "Bus Write";

301 
NOP
:

302 
»qTy³
 = "No Operation";

305 
»qTy³
 = "Unknown";

309 
¡d
::
û¼
 << "RequestTracer: Deadlock detected! Request‡ddress is "

310 << 
¡d
::
hex
 << 
»q
->
add»ss
.
	`G‘PhysiÿlAdd»ss
(è<< std::
dec


311 << "„eque¡y³ i `" << 
»qTy³
 << "'. Raising SIGSTOP. "

313 << 
¡d
::
’dl
 << std::endl << "The output chain is: " << std::endl;

315 
¡d
::
û¼
 << "0x" << std::
hex
 << std::
	`£tiosæags
Ğ¡d::
ios_ba£
::
right
 ) << std::
	`£tw
(8)

316 << 
¡d
::
	`£tfl
('0'è<< 
»q
->
add»ss
.
	`G‘PhysiÿlAdd»ss
(è<< std::
dec


317 << 
¡d
::
	`»£tiosæags
Ğ¡d::
ios_ba£
::
right
 ) << " ";

319 
ušt64_t
 
addr
 = 
»š‹½»t_ÿ¡
<ušt64_t>(
»q
);

320 
T¿ûdReque¡
 *
Œ
 = 
ŒaûdReque¡s
[
addr
];

321 
¡d
::
¡ršg
 
Ï¡ModuË
;

325 
Ï¡ModuË
 = 
Œ
->
moduËName
;

326 
¡d
::
û¼
 << 
Œ
->
moduËName
;

327 
¡d
::
û¼
 << ((
Œ
->
ty³
 =ğ
T¿ûdIssue
) ? "[I]" : "[C]");

329 ifĞ
Œ
->
Ãxt
 !ğ
NULL
 ) 
¡d
::
cout
 << " -> ";

330 ifĞ
Œ
->
Ãxt
 =ğ
NULL
 ) ;

332 
Œ
 =r->
Ãxt
;

335 
¡d
::
û¼
 << std::
’dl
 << std::endl;

337 
¡d
::
û¼
 << "Checkh" << 
Ï¡ModuË
 << " code?" << std::
’dl
;

339 
	`¿i£
Ğ
SIGSTOP
 );

340 
	`ex™
(1);

341 
	}
}

344 
	gReque¡T¿ûr
::
	$Cyşe
Ğ
ncyşe_t
 )

346 
	}
}

360 
¡d
::
¡ršg
 
Reque¡T¿ûr
::
	$DemªgË
ĞcÚ¡ * 
cxxÇme
 )

362  
¡d
::
	`¡ršg
(
Çme
);

363 
	}
}

365 
	g¡d
::
¡ršg
 
Reque¡T¿ûr
::
	$DemªgË
ĞcÚ¡ * 
cxxÇme
 )

367 
¡d
::
¡ršg
 
demªgËd
;

368 
¡©us
;

369 *
»s
 = 
abi
::
	`__cxa_demªgË
Ğ
cxxÇme
, 
NULL
, NULL, &
¡©us
 );

371 ifĞ
¡©us
 == 0 )

373 
demªgËd
 = 
¡d
::
	`¡ršg
Ğ
»s
 );

374 ifĞ
demªgËd
.
	`sub¡r
(0,5) == "NVM::" )

376 
demªgËd
 = demªgËd.
	`sub¡r
(5,
¡d
::
¡ršg
::
Åos
);

381 
demªgËd
 = 
¡d
::
	`¡ršg
Ğ
cxxÇme
 );

384 
	`ä“
Ğ
»s
 );

386  
demªgËd
;

387 
	}
}

391 
	gReque¡T¿ûr
::
T¿ûdReque¡
::
	$T¿ûdReque¡
( )

394 
Ãxt
 = 
NULL
;

395 
	}
}

398 
	gReque¡T¿ûr
::
T¿ûdReque¡
::~
	$T¿ûdReque¡
( )

400 
	}
}

	@Utils/RequestTracer/RequestTracer.h

34 #iâdeà
__NVMAIN_UTILS_REQUESTTRACER_H__


35 
	#__NVMAIN_UTILS_REQUESTTRACER_H__


	)

37 
	~"¤c/NVMObjeù.h
"

38 
	~"šşude/NVMašReque¡.h
"

39 
	~"šşude/NVMTy³s.h
"

40 
	~"¤c/Ev’tQueue.h
"

42 
	~<¡ršg
>

43 
	~<m­
>

45 
Çme¥aû
 
	gNVM
 {

48 ’um { 
	gT¿ûdIssue
, 
	gT¿ûdCom¶‘iÚ
 } 
	tT¿ûdTy³
;

51 şas 
	cReque¡T¿ûr
 : 
public
 
NVMObjeù


53 
public
:

54 
Reque¡T¿ûr
( );

55 ~
Reque¡T¿ûr
( );

57 
boŞ
 
IssueCommªd
Ğ
NVMašReque¡
 *
»q
 );

58 
boŞ
 
IssueAtomic
Ğ
NVMašReque¡
 *
»q
 );

60 
boŞ
 
Reque¡Com¶‘e
Ğ
NVMašReque¡
 *
»q
 );

61 
C®lback
Ğ*
d©a
 );

63 
Cyşe
Ğ
ncyşe_t
 );

65 
In™
Ğ
CÚfig
 *
cÚf
 );

67 
	g´iv©e
:

68 şas 
	cT¿ûdReque¡


70 
public
:

71 
T¿ûdReque¡
( );

72 ~
T¿ûdReque¡
( );

74 
	g¡d
::
¡ršg
 
moduËName
;

75 
T¿ûdTy³
 
	gty³
;

76 
T¿ûdReque¡
 *
	gÃxt
;

77 
Ev’t
 *
	gd—dlockEv’t
;

78 
ncyşe_t
 
	gd—dlockTim”
;

81 
T¿ûAdd»ss
Ğ
NVMašReque¡
 *
»q
, 
T¿ûdTy³
 
ŒaûTy³
 );

82 
	g¡d
::
¡ršg
 
DemªgË
ĞcÚ¡ * 
cxxÇme
 );

84 
	g¡d
::
m­
<
ušt64_t
, 
	gT¿ûdReque¡
*> 
	gŒaûdReque¡s
;

86 
NVMObjeù_hook
 *
	g£lfHook
;

87 
ncyşe_t
 
	gd—dlockTh»shŞd
;

88 
boŞ
 
	gd‘eùD—dlocks
;

89 
boŞ
 
	g´štT¿û
;

	@Utils/SelfDefinedMigrator/DynHotPageMigrator.h

6 #iâdeà
_HOT_PAGE_MIGRATOR_H__


7 
	#_HOT_PAGE_MIGRATOR_H__


	)

9 
Çme¥aû
 
	gNVM


11 şas 
	cHÙPageMig¿tÜ
: 
public
 
NVMObjeù


	@Utils/SelfDefinedMigrator/DynamicHotPageMigrator.h

	@Utils/SelfDefinedMigrator/SelfDefinedMigrator.cpp

6 
	~"S–fDefšedMig¿tÜ.h
"

7 
usšg
 
Çme¥aû
 
	gNVM
;

12 
	gS–fDefšedMig¿tÜ
::
	$S–fDefšedMig¿tÜ
()

14 
fe_Çme
[255] = "zero";

15 
commªd_addr
 = 0x300000;

16 
cmd
 = 
Ãw
 
commªd
;

17 
âame
 = 
NULL
;

18 
is_mig¿bË
 = 
Œue
;

19 
	`CİyCh¬s
(
âame
 , 
fe_Çme
);

20 
	}
}

22 
	gS–fDefšedMig¿tÜ
::~
	$S–fDefšedMig¿tÜ
()

24 
¡d
::
cout
<<"cmd->¡¬ˆaddr"<<
cmd
->
¡¬t_addr
<<¡d::
’dl
;

25 if(
âame
)

27 
d–‘e
 
âame
 ;

28 
âame
 = 
NULL
;

30 ifĞ
fd
 != -1)

32 
	`şo£
(
fd
);

33 
fd
 = -1;

35 if(
cmd
)

37 
d–‘e
 
cmd
;

38 
cmd
 = 
NULL
;

42 
	}
}

49 
	gS–fDefšedMig¿tÜ
::
	$S‘CÚfig
(
CÚfig
* 
cÚf
 , 
boŞ
 
ü—‹Chd»n
)

51 
ušt64_t
 
tmp
;

52 if(
cÚf
->
	`KeyExi¡s
("MmapFileName"))

53 
	`CİyCh¬s
(
âame
 , 
cÚf
->
	`G‘SŒšg
("Mm­FeName").
	`c_¡r
());

54 ifĞ
cÚf
->
	`KeyExi¡s
("CommandAddr"))

56 
tmp
 = 
¡©ic_ÿ¡
<
ušt64_t
>(
cÚf
->
	`G‘V®ue
("CommandAddr"));

58 if(
tmp
<=0)

59 
NVM
::
	`F©®
("address of command must†argerhan 0 !");

61 
commªd_addr
 = 
tmp
;

65 
fd
 = 
	`İ’
(
âame
 , 
O_CREAT
|
O_RDWR
,00777);

66 ifĞ
fd
 == -1 )

67 
NVM
::
	`F©®
("create share file failed!");

69 
¡d
::
cout
<<"©chØcommªd bufãr"<<¡d::
’dl
;

71 
	}
}

97 
	gS–fDefšedMig¿tÜ
::
	$R—dCommªd
(
NVMAdd»ss
 &
¡¬t_addr
,
ušt64_t
 &
İ_Ën
,ušt64_ˆ&
İ_ty³
 , ušt64_ˆ&
¡©us
)

99 
	`»ad
(
fd
,
cmd
,(
commªd
));

100 if(
cmd
->
¡©us
==
VALID
 )

102 if(
cmd
->
¡¬t_addr
 == 0x2000000)

103 
¡d
::
cout
<<"fšd‡dd»ss:0x2000000"<<¡d::
’dl
;

104 
¡¬t_addr
.
	`S‘PhysiÿlAdd»ss
(
cmd
->start_addr);

105 
İ_Ën
 = 
cmd
->
mig¿‹_Ën
;

106 
İ_ty³
 = 
cmd
->
İty³
;

107 
¡©us
 = 
cmd
->status;

108 
cmd
->
¡©us
 = 
INVALID
;

110 
	`wr™e
(
fd
,
cmd
,(
commªd
));

112 
	}
}

116 
boŞ
 
	gS–fDefšedMig¿tÜ
::
	$CİyCh¬s
(* &
de¡_ch¬s
 , cÚ¡ * 
sourû_ch¬s
)

118 
Ën
 = 
	`¡¾’
(
sourû_ch¬s
);

119 if(!
de¡_ch¬s
)

121 
de¡_ch¬s
 = 
Ãw
 [
Ën
+1];

123 ifĞ!
de¡_ch¬s
 )

124  
çl£
;

126 
	`memıy
Ğ
de¡_ch¬s
 , 
sourû_ch¬s
 , 
Ën
);

127 
de¡_ch¬s
[
Ën
] = '\0';

128  
Œue
;

129 
	}
}

	@Utils/SelfDefinedMigrator/SelfDefinedMigrator.h

5 #iâdeà
__SELF_DEFINED_MIGRATOR_H__


6 
	#__SELF_DEFINED_MIGRATOR_H__


	)

8 
	~"¡dio.h
"

9 
	~"¡ršg.h
"

10 
	~"¡dlib.h
"

11 
	~"sys/mmª.h
"

12 
	~"fú.h
"

13 
	~"uni¡d.h
"

15 
	~"sys/c.h
"

16 
	~"sys/shm.h
"

18 
	~"šşude/CommÚEnums.h
"

19 
	~"šşude/Exû±iÚ.h
"

20 
	~<queue
>

22 
	#CMDBufãrSize
 512

23 
Çme¥aû
 
NVM
{

	)

25 
	scommªd


27 
Addr
 
	g¡¬t_addr
;

28 
ušt64_t
 
	gmig¿‹_Ën
;

29 
ušt64_t
 
	gİty³
;

30 
ušt64_t
 
	g¡©us
;

33 şas 
	cS–fDefšedMig¿tÜ


35 
	gpublic
:

36 
S–fDefšedMig¿tÜ
();

37 ~
S–fDefšedMig¿tÜ
();

38 
S‘CÚfig
(
CÚfig
* 
cÚf
 , 
boŞ
 
ü—‹Chd»n
=
Œue
);

40 
P¬£Commªd
(
Addr
 &
¡¬t_addr
,
ušt64_t
 &
İ_Ën
,ušt64_ˆ&
İ_ty³
);

41 
	gpublic
:

47 
R—dCommªd
(
NVMAdd»ss
 &
¡¬t_addr
,
ušt64_t
 &
İ_Ën
,ušt64_ˆ&
İ_ty³
 ,ušt64_ˆ&
¡©us
);

48 
boŞ
 
CİyCh¬s
(* &
de¡_ch¬s
 , cÚ¡ * 
sourû_ch¬s
);

49 
	gpublic
:

50 
Addr
 
commªd_addr
;

51 
	g´iv©e
:

53 
commªd
* 
cmd
;

54 
boŞ
 
	gis_®loùed
;

55 
boŞ
 
	gis_mig¿bË
;

56 
	gfd
;

57 *
	gâame
;

	@Utils/SelfDefinedMigrator/StaticHotPageMigrator.cpp

6 
usšg
 
Çme¥aû
 
	gNVM
;

8 
	gSticHÙPageMig¿tÜ
::
	$SticHÙPageMig¿tÜ
()

11 
	}
}

13 
SticHÙPageMig¿tÜ
::~
	$SticHÙPageMig¿tÜ
()

16 
	}
}

19 
SticHÙPageMig¿tÜ
::
	$S‘CÚfig
Ğ
CÚfig
* 
cÚf
 , 
boŞ
 
ü—‹Chd»n
)

22 
	}
}

27 
boŞ
 
	gSticHÙPageMig¿tÜ
::
	$IssueAtomic
(
NVMašReque¡
* 
»q
)

30 
	}
}

32 
boŞ
 
SticHÙPageMig¿tÜ
::
	$IssueCommªd
(
NVMašReque¡
* 
»q
)

35 
	}
}

38 
boŞ
 
SticHÙPageMig¿tÜ
::
	$Reque¡Com¶‘e
(
NVMašReque¡
* 
»q
)

41 
	}
}

44 
SticHÙPageMig¿tÜ
::
	$Cyşe
()

47 
	}
}

51 
SticHÙPageMig¿tÜ
::
	$Choo£Viùim
(
S–fDefšedMig¿tÜ
* 
m
 , 
NVMašAdd»ss
 &
´omoAdd»ss
 , NVMašAdd»s &
viùim
)

54 
	}
}

57 
boŞ
 
	gSticHÙPageMig¿tÜ
::
	$SticMig¿tiÚ
Ğ
NVMašReque¡
* 
»q
 , 
boŞ
 
©omic
)

59 
boŞ
 
»t
 = 
Œue
;

61 if(
	`NVMTy³M©ches
(
NVMaš
))

64 
S–fDefšedMig¿tÜ
 *
mig¿tÜ
 = 
dyÇmic_ÿ¡
<S–fDefšedMig¿tÜ *>(
this
->
	`G‘T¿mpŞše
()->
	`G‘Decod”
());

65 
	`as£¹
(
mig¿tÜ
);

67 if(
	`G‘Cu¼’tHookTy³
()==
NVMHOOK_PREISSUE
 || 
mig¿tÜ
->
	`IsBufã»d
Ğ
»que¡
->
addr
))

72 if(
	`G‘Cu¼’tHookTy³
()==
NVMHOOK_POSTISSUE
)

77 ifĞ!
mig¿tÜ
->
	`IsMig¿tšg
(è&& !mig¿tÜ->
	`IsMig¿‹d
(
»que¡
->
add»ss
))

80 
	}
}

82 
	gSticHÙPageMig¿tÜ
::
P¬£


	@Utils/SelfDefinedMigrator/StaticHotPageMigrator.h

5 #iâdeà
_STATIC_HOT_PAGE_MIGRATOR_H__


6 
	#_STATIC_HOT_PAGE_MIGRATOR_H__


	)

8 
Çme¥aû
 
	gNVM


10 
şass
 
	gS–fDefšedMig¿tÜ
;

12 şas 
	cSticHÙPageMig¿tÜ
:
public
 
NVMObjeù


14 
public
:

15 
SticHÙPageMig¿tÜ
();

16 ~
SticHÙPageMig¿tÜ
();

18 
In™
(
CÚfig
* 
cÚf
);

21 
boŞ
 
IssueAtomic
(
NVMašReque¡
 *
»q
);

22 
boŞ
 
IssueCommªd
(
NVMašReque¡
 *
»q
);

23 
boŞ
 
Reque¡Com¶‘e
(
NVMašReque¡
* 
»q
);

24 
Cyşe
(
ncyşe_t
 
¡•s
);

26 
boŞ
 
SticMig¿tiÚ
Ğ
NVMašReque¡
* 
»q
 , boŞ 
©omic
);

27 
Choo£Viùim
Ğ
S–fDefšedMig¿tÜ
* 
m
 , 
NVMašAdd»s
& 
´omo
 , 
NVMašAdd»ss
& 
viùim
);

29 
P¬£Reque¡
(
NVMašReque¡
* 
»q
);

30 
	g´iv©e
:

31 
NVMAdd»ss
 
demÙ“
 , 
	g´omÙ“
;

32 
NVMašReque¡
 *
	gdemoReque¡
;

33 
NVMašReque¡
 *
	g´omoReque¡
;

35 
ušt64_t
 
	g»ad_bufãr_Ït
;

36 
ušt64_t
 
	g´omo_chªÃl
;

37 
ušt64_t
 
	gdemo_chªÃl
;

38 
ušt64_t
 
	gqueue_wa™
;

	@Utils/SelfDefinedMigrator/StaticMigrator.cpp

34 
	~"Uts/S–fDefšedMig¿tÜ/SticMig¿tÜ.h
"

35 
	~"Uts/S–fDefšedMig¿tÜ/S–fDefšedMig¿tÜ.h
"

36 
	~"Decod”s/Mig¿tÜ/Mig¿tÜ.h
"

37 
	~"NVM/nvmaš.h
"

38 
	~"¤c/SubA¼ay.h
"

39 
	~"¤c/Ev’tQueue.h
"

40 
	~"šşude/NVMH–³rs.h
"

42 
usšg
 
Çme¥aû
 
	gNVM
;

44 
	gSticMig¿tÜ
::
	$SticMig¿tÜ
( )

52 
	`S‘HookTy³
Ğ
NVMHOOK_BOTHISSUE
 );

54 
´omoReque¡
 = 
NULL
;

55 
demoReque¡
 = 
NULL
;

56 
´omoBufã»d
 = 
çl£
;

57 
demoBufã»d
 = 
çl£
;

59 
mig¿tiÚCouÁ
 = 0;

60 
queueWa™s
 = 0;

61 
bufã»dR—ds
 = 0;

63 
qu”›dMemÜy
 = 
çl£
;

64 
´omÙiÚChªÃlP¬ams
 = 
NULL
;

65 
cu¼’tPromÙiÚPage
 = 0;

66 
commªd_addr
 = 0x300000;

67 
commªd_·r£r
 = 
Ãw
 
S–fDefšedMig¿tÜ
;

68 
is_mig¿‹d
 = 
çl£
;

69 
	}
}

72 
	gSticMig¿tÜ
::~
	$SticMig¿tÜ
( )

74 if(
commªd_·r£r
)

76 
d–‘e
 
commªd_·r£r
;

77 
commªd_·r£r
 = 
NULL
;

78 
¡d
::
cout
<<"d–‘commªd…¬£r"<<¡d::
’dl
;

80 
¡d
::
cout
<<"d–‘¡©iømig¿tÜ"<<¡d::
’dl
;

81 
	}
}

84 
	gSticMig¿tÜ
::
	$In™
Ğ
CÚfig
 *
cÚfig
 )

86 
ušt64_t
 
tmp
;

91 
£ed
 = 1;

94 
´obab™y
 = 0.02;

95 
cÚfig
->
	`G‘EÃrgy
Ğ"CošMig¿tÜProbab™y", 
´obab™y
 );

98 
´omÙiÚChªÃl
 = 0;

99 
cÚfig
->
	`G‘V®ueUL
Ğ"CošMig¿tÜPromÙiÚChªÃl", 
´omÙiÚChªÃl
 );

102 
bufãrR—dL©’cy
 = 4;

103 
cÚfig
->
	`G‘V®ueUL
Ğ"Mig¿tiÚBufãrR—dL©’cy", 
bufãrR—dL©’cy
 );

105 if(
cÚfig
->
	`KeyExi¡s
("CommandAddr"))

107 
tmp
 = 
¡©ic_ÿ¡
<
ušt64_t
>(
cÚfig
->
	`G‘V®ue
("CommandAddr"));

108 ifĞ
tmp
<=0 )

109 
NVM
::
	`F©®
("address of command must†argerhan 0");

111 
commªd_addr
 = 
tmp
;

113 if(
cÚfig
->
	`KeyExi¡s
("MigrateAddress"))

115 
mig¿‹_addr
 = 
¡©ic_ÿ¡
<
ušt64_t
>(
cÚfig
->
	`G‘V®ue
("MigrateAddress"));

117 
¡d
::
cout
<<"commªd‡dd»s is:"<<¡d::
hex
<<
commªd_addr
<<¡d::
’dl
;

122 
numCŞs
 = 
cÚfig
->
	`G‘V®ue
( "COLS" );

124 
commªd_·r£r
->
	`S‘CÚfig
(
cÚfig
);

126 
	`AddSt
(
mig¿tiÚCouÁ
);

127 
	`AddSt
(
queueWa™s
);

128 
	`AddSt
(
bufã»dR—ds
);

129 
	}
}

132 
boŞ
 
	gSticMig¿tÜ
::
	$IssueAtomic
Ğ
NVMašReque¡
 *
»que¡
 )

135  
	`TryMig¿tiÚ
Ğ
»que¡
, 
Œue
 );

136 
	}
}

139 
boŞ
 
	gSticMig¿tÜ
::
	$IssueCommªd
Ğ
NVMašReque¡
 *
»que¡
 )

145 
boŞ
 
»t
 = 
Œue
;

148 if(!
is_mig¿‹d
)

150 
NVMašReque¡
 *
¡©ic_»q
 = 
Ãw
 NVMainRequest;

151 *
¡©ic_»q
 = *
»que¡
;

152 
¡©ic_»q
->
add»ss
.
	`S‘PhysiÿlAdd»ss
Ğ
mig¿‹_addr
);

153 
¡©ic_»q
->
owÃr
 = 
this
;

154 
is_mig¿‹d
 = 
Œue
;

158 if(
»que¡
->
owÃr
==
this
)

159 
	`TryMig¿tiÚ
(
»que¡
,
çl£
);

174  
»t
;

175 
	}
}

178 
boŞ
 
	gSticMig¿tÜ
::
	$Reque¡Com¶‘e
Ğ
NVMašReque¡
 *
»que¡
 )

180 ifĞ
»que¡
->
owÃr
 =ğ
this
)

182 
¡d
::
cout
<<"mig¿tiÚ„eque¡ com¶‘e"<<¡d::
’dl
;

183 ifĞ
	`NVMTy³M©ches
(
NVMaš
è&& 
	`G‘Cu¼’tHookTy³
Ğè=ğ
NVMHOOK_PREISSUE
 )

186 
Mig¿tÜ
 *
mig¿tÜT¿n¦©Ü
 = 
dyÇmic_ÿ¡
<Mig¿tÜ *>(
·»Á
->
	`G‘T¿mpŞše
Ğ)->
	`G‘Decod”
( ));

187 
	`as£¹
Ğ
mig¿tÜT¿n¦©Ü
 !ğ
NULL
 );

189 ifĞ
»que¡
->
owÃr
 =ğ
·»Á
->
	`G‘T¿mpŞše
Ğè&&„eque¡->
g
 =ğ
MIG_READ_TAG
 )

192 
mig¿tÜT¿n¦©Ü
->
	`S‘Mig¿tiÚS‹
Ğ
»que¡
->
add»ss
, 
MIGRATION_BUFFERED
 );

195 
boŞ
 
bufãrCom¶‘e
 = 
çl£
;

197 ifĞ(
»que¡
 =ğ
´omoReque¡


198 && 
mig¿tÜT¿n¦©Ü
->
	`IsBufã»d
Ğ
demÙ“
 ))

199 || (
»que¡
 =ğ
demoReque¡


200 && 
mig¿tÜT¿n¦©Ü
->
	`IsBufã»d
Ğ
´omÙ“
 )) )

202 
bufãrCom¶‘e
 = 
Œue
;

206 ifĞ
»que¡
 =ğ
´omoReque¡
 )

208 
´omoReque¡
 = 
Ãw
 
	`NVMašReque¡
( );

209 *
´omoReque¡
 = *
»que¡
;

211 ifĞ
»que¡
 =ğ
demoReque¡
 )

213 
demoReque¡
 = 
Ãw
 
	`NVMašReque¡
( );

214 *
demoReque¡
 = *
»que¡
;

218 
	`as£¹
Ğ
çl£
 );

222 ifĞ
bufãrCom¶‘e
 )

230 
NVMObjeù
 *
§vedP¬’t
 = 
·»Á
->
	`G‘T¿mpŞše
( );

232 
NVMAdd»ss
 
‹mpAdd»ss
 = 
´omoReque¡
->
add»ss
;

233 
´omoReque¡
->
add»ss
 = 
demoReque¡
->address;

234 
demoReque¡
->
add»ss
 = 
‹mpAdd»ss
;

236 
demoReque¡
->
ty³
 = 
WRITE
;

237 
´omoReque¡
->
ty³
 = 
WRITE
;

239 
demoReque¡
->
g
 = 
MIG_WRITE_TAG
;

240 
´omoReque¡
->
g
 = 
MIG_WRITE_TAG
;

243 
boŞ
 
demoIssued
, 
´omoIssued
;

245 
demoIssued
 = 
§vedP¬’t
->
	`G‘Chd
Ğ
demoReque¡
 )->
	`IssueCommªd
( demoRequest );

246 
´omoIssued
 = 
§vedP¬’t
->
	`G‘Chd
Ğ
´omoReque¡
 )->
	`IssueCommªd
(…romoRequest );

248 ifĞ
demoIssued
 )

250 
mig¿tÜT¿n¦©Ü
->
	`S‘Mig¿tiÚS‹
Ğ
demoReque¡
->
add»ss
, 
MIGRATION_WRITING
 );

252 ifĞ
´omoIssued
 )

254 
mig¿tÜT¿n¦©Ü
->
	`S‘Mig¿tiÚS‹
Ğ
´omoReque¡
->
add»ss
, 
MIGRATION_WRITING
 );

257 
´omoBufã»d
 = !
´omoIssued
;

258 
demoBufã»d
 = !
demoIssued
;

262 ifĞ
»que¡
->
owÃr
 =ğ
·»Á
->
	`G‘T¿mpŞše
Ğè&&„eque¡->
g
 =ğ
MIG_WRITE_TAG
 )

265 
mig¿tÜT¿n¦©Ü
->
	`S‘Mig¿tiÚS‹
Ğ
»que¡
->
add»ss
, 
MIGRATION_DONE
 );

267 
mig¿tiÚCouÁ
++;

270 ifĞ
´omoBufã»d
 || 
demoBufã»d
 )

272 
boŞ
 
demoIssued
, 
´omoIssued
;

274 ifĞ
´omoBufã»d
 )

276 
´omoIssued
 = 
·»Á
->
	`G‘T¿mpŞše
Ğ)->
	`G‘Chd
Ğ
´omoReque¡
 )->
	`IssueCommªd
(…romoRequest );

277 
´omoBufã»d
 = !
´omoIssued
;

280 ifĞ
demoBufã»d
 )

282 
demoIssued
 = 
·»Á
->
	`G‘T¿mpŞše
Ğ)->
	`G‘Chd
Ğ
demoReque¡
 )->
	`IssueCommªd
( demoRequest );

283 
demoBufã»d
 = !
demoIssued
;

288  
Œue
;

289 
	}
}

292 
boŞ
 
	gSticMig¿tÜ
::
	$CheckIssuabË
Ğ
NVMAdd»ss
 
add»ss
, 
OpTy³
 
ty³
 )

294 
NVMašReque¡
 
»que¡
;

296 
»que¡
.
add»ss
 =‡ddress;

297 
»que¡
.
ty³
 =ype;

299  
·»Á
->
	`G‘T¿mpŞše
Ğ)->
	`G‘Chd
Ğ&
»que¡
 )->
	`IsIssuabË
( &request );

300 
	}
}

303 
boŞ
 
	gSticMig¿tÜ
::
	$TryMig¿tiÚ
Ğ
NVMašReque¡
 *
»que¡
, 
boŞ
 
©omic
 )

305 
boŞ
 
rv
 = 
Œue
;

306 if(
»que¡
->
owÃr
==
this
)

308 
¡d
::
cout
<<"Œy mig¿tiÚ"<<¡d::
’dl
;

310 ifĞ
	`NVMTy³M©ches
(
NVMaš
) )

314 
Mig¿tÜ
 *
mig¿tÜT¿n¦©Ü
 = 
dyÇmic_ÿ¡
<Mig¿tÜ *>(
·»Á
->
	`G‘T¿mpŞše
Ğ)->
	`G‘Decod”
( ));

315 
	`as£¹
Ğ
mig¿tÜT¿n¦©Ü
 !ğ
NULL
 );

318 ifĞ
	`G‘Cu¼’tHookTy³
Ğè=ğ
NVMHOOK_PREISSUE
 && 
mig¿tÜT¿n¦©Ü
->
	`IsBufã»d
Ğ
»que¡
->
add»ss
 ) )

321 
rv
 = 
çl£
;

324 
	`G‘Ev’tQueue
Ğ)->
	`In£¹Ev’t
Ğ
Ev’tRe¥Ú£
, 
·»Á
->
	`G‘T¿mpŞše
Ğ), 
»que¡
,

325 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
()+
bufãrR—dL©’cy
 );

327 
bufã»dR—ds
++;

329  
rv
;

333 ifĞ
	`G‘Cu¼’tHookTy³
Ğè!ğ
NVMHOOK_POSTISSUE
 )

335  
rv
;

339 
boŞ
 
mig¿tiÚPossibË
 = 
çl£
;

341 ifĞ!
mig¿tÜT¿n¦©Ü
->
	`Mig¿tšg
( )

342 && !
mig¿tÜT¿n¦©Ü
->
	`IsMig¿‹d
Ğ
»que¡
->
add»ss
 )

343 && 
»que¡
->
add»ss
.
	`G‘ChªÃl
Ğè!ğ
´omÙiÚChªÃl
 )

345 
mig¿tiÚPossibË
 = 
Œue
;

348 ifĞ
mig¿tiÚPossibË
 )

350 
	`as£¹
Ğ!
demoBufã»d
 && !
´omoBufã»d
 );

357 
NVMObjeù
 *
§vedP¬’t
 = 
·»Á
->
	`G‘T¿mpŞše
( );

360 
ušt64_t
 
row
, 
bªk
, 
¿nk
, 
chªÃl
, 
sub¬¿y
;

361 
»que¡
->
add»ss
.
	`G‘T¿n¦©edAdd»ss
Ğ&
row
, 
NULL
, &
bªk
, &
¿nk
, &
chªÃl
, &
sub¬¿y
 );

362 
ušt64_t
 
´omÙ“Add»ss
 = 
mig¿tÜT¿n¦©Ü
->
	`Rev”£T¿n¦©e
Ğ
row
, 0, 
bªk
, 
¿nk
, 
chªÃl
, 
sub¬¿y
 );

364 
´omÙ“
.
	`S‘PhysiÿlAdd»ss
Ğ
´omÙ“Add»ss
 );

365 
´omÙ“
.
	`S‘T¿n¦©edAdd»ss
Ğ
row
, 0, 
bªk
, 
¿nk
, 
chªÃl
, 
sub¬¿y
 );

368 
	`Choo£Viùim
Ğ
mig¿tÜT¿n¦©Ü
, 
´omÙ“
, 
demÙ“
 );

370 
	`as£¹
Ğ
mig¿tÜT¿n¦©Ü
->
	`IsMig¿‹d
Ğ
demÙ“
 ) =ğ
çl£
 );

371 
	`as£¹
Ğ
mig¿tÜT¿n¦©Ü
->
	`IsMig¿‹d
Ğ
´omÙ“
 ) =ğ
çl£
 );

373 ifĞ
©omic
 )

375 
mig¿tÜT¿n¦©Ü
->
	`S¹Mig¿tiÚ
Ğ
»que¡
->
add»ss
, 
demÙ“
 );

376 
mig¿tÜT¿n¦©Ü
->
	`S‘Mig¿tiÚS‹
Ğ
´omÙ“
, 
MIGRATION_DONE
 );

377 
mig¿tÜT¿n¦©Ü
->
	`S‘Mig¿tiÚS‹
Ğ
demÙ“
, 
MIGRATION_DONE
 );

380 ifĞ
	`CheckIssuabË
Ğ
´omÙ“
, 
READ
 ) &&

381 
	`CheckIssuabË
Ğ
demÙ“
, 
READ
 ) )

383 
mig¿tÜT¿n¦©Ü
->
	`S¹Mig¿tiÚ
Ğ
»que¡
->
add»ss
, 
demÙ“
 );

385 
´omoReque¡
 = 
Ãw
 
	`NVMašReque¡
( );

386 
demoReque¡
 = 
Ãw
 
	`NVMašReque¡
( );

388 
´omoReque¡
->
add»ss
 = 
´omÙ“
;

389 
´omoReque¡
->
ty³
 = 
READ
;

390 
´omoReque¡
->
g
 = 
MIG_READ_TAG
;

391 
´omoReque¡
->
bur¡CouÁ
 = 
numCŞs
;

393 
demoReque¡
->
add»ss
 = 
demÙ“
;

394 
demoReque¡
->
ty³
 = 
READ
;

395 
demoReque¡
->
g
 = 
MIG_READ_TAG
;

396 
demoReque¡
->
bur¡CouÁ
 = 
numCŞs
;

398 
´omoReque¡
->
owÃr
 = 
§vedP¬’t
;

399 
demoReque¡
->
owÃr
 = 
§vedP¬’t
;

400 
§vedP¬’t
->
	`IssueCommªd
Ğ
´omoReque¡
 );

401 
§vedP¬’t
->
	`IssueCommªd
Ğ
demoReque¡
 );

405 
queueWa™s
++;

410  
rv
;

411 
	}
}

414 
	gSticMig¿tÜ
::
	$Choo£Viùim
Ğ
Mig¿tÜ
 *
©
, 
NVMAdd»ss
& , NVMAdd»ss& 
viùim
 )

421 ifĞ!
qu”›dMemÜy
 )

430 
NVMašReque¡
 
qu”yReque¡
;

432 
qu”yReque¡
.
add»ss
.
	`S‘T¿n¦©edAdd»ss
Ğ0, 0, 0, 0, 
´omÙiÚChªÃl
, 0 );

433 
qu”yReque¡
.
add»ss
.
	`S‘PhysiÿlAdd»ss
( 0 );

434 
qu”yReque¡
.
ty³
 = 
READ
;

435 
qu”yReque¡
.
owÃr
 = 
this
;

437 
NVMObjeù
 *
curObjeù
 = 
NULL
;

439 
	`FšdModuËChdTy³
Ğ&
qu”yReque¡
, 
SubA¼ay
, 
curObjeù
, 
·»Á
->
	`G‘T¿mpŞše
( ) );

441 
SubA¼ay
 *
´omÙiÚChªÃlSub¬¿y
 = 
NULL
;

442 
´omÙiÚChªÃlSub¬¿y
 = 
dyÇmic_ÿ¡
<
SubA¼ay
 *>Ğ
curObjeù
 );

444 
	`as£¹
Ğ
´omÙiÚChªÃlSub¬¿y
 !ğ
NULL
 );

445 
P¬ams
 *
p
 = 
´omÙiÚChªÃlSub¬¿y
->
	`G‘P¬ams
( );

446 
´omÙiÚChªÃlP¬ams
 = 
p
;

448 
tÙ®PromÙiÚPages
 = 
p
->
RANKS
 *…->
BANKS
 *…->
ROWS
;

449 
cu¼’tPromÙiÚPage
 = 0;

451 ifĞ
p
->
COLS
 !ğ
numCŞs
 )

453 
¡d
::
cout
 << "W¬nšg: Pagsizoàç¡‡nd slow memÜy difãrs." << std::
’dl
;

456 
qu”›dMemÜy
 = 
Œue
;

463 
ušt64_t
 
viùimRªk
, 
viùimBªk
, 
viùimRow
, 
viùimSub¬¿y
, 
sub¬¿yCouÁ
;

464 
ncouÁ”_t
 
´omoPage
 = 
cu¼’tPromÙiÚPage
;

466 
viùimRªk
 = 
´omoPage
 % 
´omÙiÚChªÃlP¬ams
->
RANKS
;

467 
´omoPage
 >>ğ
NVM
::
	`mlog2
Ğ
´omÙiÚChªÃlP¬ams
->
RANKS
 );

469 
viùimBªk
 = 
´omoPage
 % 
´omÙiÚChªÃlP¬ams
->
BANKS
;

470 
´omoPage
 >>ğ
NVM
::
	`mlog2
Ğ
´omÙiÚChªÃlP¬ams
->
BANKS
 );

472 
sub¬¿yCouÁ
 = 
´omÙiÚChªÃlP¬ams
->
ROWS
 /…romÙiÚChªÃlP¬ams->
MATHeight
;

473 
viùimSub¬¿y
 = 
´omoPage
 % 
sub¬¿yCouÁ
;

474 
´omoPage
 >>ğ
NVM
::
	`mlog2
Ğ
sub¬¿yCouÁ
 );

476 
viùimRow
 = 
´omoPage
;

478 
viùim
.
	`S‘T¿n¦©edAdd»ss
Ğ
viùimRow
, 0, 
viùimBªk
, 
viùimRªk
, 
´omÙiÚChªÃl
, 
viùimSub¬¿y
 );

479 
ušt64_t
 
viùimAdd»ss
 = 
©
->
	`Rev”£T¿n¦©e
Ğ
viùimRow
, 0, 
viùimBªk
, 
viùimRªk
, 
´omÙiÚChªÃl
, 
viùimSub¬¿y
 );

480 
viùim
.
	`S‘PhysiÿlAdd»ss
Ğ
viùimAdd»ss
 );

482 
cu¼’tPromÙiÚPage
 = (cu¼’tPromÙiÚPag+ 1è% 
tÙ®PromÙiÚPages
;

483 
	}
}

486 
	gSticMig¿tÜ
::
	$Cyşe
Ğ
ncyşe_t
 )

489 
	}
}

491 
boŞ
 
SticMig¿tÜ
::
	$P¬£Reque¡
(
NVMašReque¡
* 
»q
 , 
NVMAdd»ss
 &
¡¬t_addr
 , 
ušt64_t
 &
İ_Ën
 , ušt64_ˆ&
İ_ty³
 , ušt64_ˆ&
¡©us
)

493 
boŞ
 
»t
 = 
çl£
;

497 ifĞ
»q
->
add»ss
.
	`G‘Vœtu®Add»ss
()== 0x300000 )

499 
commªd_·r£r
->
	`R—dCommªd
(
¡¬t_addr
 , 
İ_Ën
,
İ_ty³
 , 
¡©us
);

500 
¡d
::
cout
<<"add»s tØmig¿‹:"<<¡d::
hex
<<
¡¬t_addr
.
	`G‘PhysiÿlAdd»ss
()<<¡d::
’dl
;

501 
»t
 = 
Œue
;

503  
»t
;

504 
	}
}

	@Utils/SelfDefinedMigrator/StaticMigrator.h

34 #iâdeà
__NVMAIN_UTILS_STATICMIGRATOR_H__


35 
	#__NVMAIN_UTILS_STATICMIGRATOR_H__


	)

37 
	~"¤c/NVMObjeù.h
"

38 
	~"¤c/P¬ams.h
"

39 
	~"šşude/NVMašReque¡.h
"

40 
	~"šşude/Exû±iÚ.h
"

41 
	~"Decod”s/Mig¿tÜ/Mig¿tÜ.h
"

42 
	~"Uts/S–fDefšedMig¿tÜ/S–fDefšedMig¿tÜ.h
"

43 
	~"¤c/Ev’tQueue.h
"

45 
Çme¥aû
 
	gNVM
 {

47 
	#MIG_READ_TAG
 
	`G‘TagG’”©Ü
Ğ)->
	`C»©eTag
("MIGREAD")

	)

48 
	#MIG_WRITE_TAG
 
	`G‘TagG’”©Ü
Ğ)->
	`C»©eTag
("MIGWRITE")

	)

50 
şass
 
	gMig¿tÜ
;

52 şas 
	cSticMig¿tÜ
 : 
public
 
NVMObjeù


54 
public
:

55 
SticMig¿tÜ
( );

56 
	gvœtu®
 ~
SticMig¿tÜ
( );

58 
In™
Ğ
CÚfig
 *
cÚfig
 );

60 
boŞ
 
IssueAtomic
Ğ
NVMašReque¡
 *
»que¡
 );

61 
boŞ
 
IssueCommªd
Ğ
NVMašReque¡
 *
»que¡
 );

62 
boŞ
 
Reque¡Com¶‘e
Ğ
NVMašReque¡
 *
»que¡
 );

64 
Cyşe
Ğ
ncyşe_t
 
¡•s
 );

66 
boŞ
 
P¬£Reque¡
Ğ
NVMašReque¡
* 
»q
,
NVMAdd»ss
& 
¡¬t_addr
 , 
ušt64_t
 &
İ_Ën
 , ušt64_ˆ&
İ_ty³
,ušt64_ˆ&
¡©us
);

67 
	g´iv©e
:

68 
boŞ
 
´omoBufã»d
, 
	gdemoBufã»d
;

69 
NVMAdd»ss
 
	gdemÙ“
, 
	g´omÙ“
;

70 
NVMašReque¡
 *
	g´omoReque¡
;

71 
NVMašReque¡
 *
	gdemoReque¡
;

72 
ušt64_t
 
	gcommªd_addr
;

74 
ušt64_t
 
	gmig¿‹_addr
;

76 
	g£ed
;

77 
	g´obab™y
;

78 
ncouÁ”_t
 
	gnumCŞs
;

79 
boŞ
 
	gqu”›dMemÜy
;

80 
ncyşe_t
 
	gbufãrR—dL©’cy
;

81 
P¬ams
 *
	g´omÙiÚChªÃlP¬ams
;

83 
S–fDefšedMig¿tÜ
* 
	gcommªd_·r£r
;

84 
boŞ
 
	gis_mig¿‹d
;

85 
ncouÁ”_t
 
	gtÙ®PromÙiÚPages
;

86 
ncouÁ”_t
 
	gcu¼’tPromÙiÚPage
;

87 
ncouÁ”_t
 
	g´omÙiÚChªÃl
;

89 
ncouÁ”_t
 
	gmig¿tiÚCouÁ
;

90 
ncouÁ”_t
 
	gqueueWa™s
;

91 
ncouÁ”_t
 
	gbufã»dR—ds
;

93 
boŞ
 
CheckIssuabË
Ğ
NVMAdd»ss
 
add»ss
, 
OpTy³
 
ty³
 );

94 
boŞ
 
TryMig¿tiÚ
Ğ
NVMašReque¡
 *
»que¡
, boŞ 
©omic
 );

95 
Choo£Viùim
Ğ
Mig¿tÜ
 *
©
, 
NVMAdd»ss
& 
´omo
, NVMAdd»ss& 
viùim
 );

	@Utils/SelfDefinedMigrator/self_defined.cpp

1 
	~"Uts/S–fDefšedMig¿tÜ/S–fDefšedMig¿tÜ.h
"

2 
	~"šşude/CommÚEnums.h
"

3 
	~<io¡»am
>

4 
usšg
 
Çme¥aû
 
	gNVM
;

5 
	$maš
()

7 
S–fDefšedMig¿tÜ
 *
mig¿tÜ_‹¡
 = 
Ãw
 SelfDefinedMigrator;

8 
¡d
::
cout
<<"mig¿‹ sucûed"<<¡d::
’dl
;

9 
mig¿tÜ_‹¡
->
	`Mig¿‹
(0x2000000,1,
DRAM_MEM
);

11 
	}
}

	@Utils/Visualizer/Visualizer.cpp

34 
	~"Uts/Visu®iz”/Visu®iz”.h
"

35 
	~"¤c/Ev’tQueue.h
"

38 
	~"¤c/Bªk.h
"

39 
	~"¤c/Rªk.h
"

40 
	~"NVM/nvmaš.h
"

42 
usšg
 
Çme¥aû
 
	gNVM
;

44 
	gVisu®iz”
::
	$Visu®iz”
( )

52 
	`S‘HookTy³
Ğ
NVMHOOK_PREISSUE
 );

53 
	}
}

55 
	gVisu®iz”
::~
	$Visu®iz”
( )

57 
	}
}

63 
Visu®iz”
::
	$In™
Ğ
CÚfig
 *
cÚf
 )

65 
numRªks
 = 
¡©ic_ÿ¡
<
ncouÁ”_t
>Ğ
cÚf
->
	`G‘V®ue
( "RANKS" ) );

66 
numBªks
 = 
¡©ic_ÿ¡
<
ncouÁ”_t
>Ğ
cÚf
->
	`G‘V®ue
( "BANKS" ) );

67 
busBur¡L’gth
 = 
¡©ic_ÿ¡
<
ncyşe_t
>Ğ
cÚf
->
	`G‘V®ue
( "tBURST" ) );

69 
lšeL’gth
 = 100;

70 ifĞ
cÚf
->
	`KeyExi¡s
( "VisLineLength" ) )

72 
lšeL’gth
 = 
¡©ic_ÿ¡
<
ncouÁ”_t
>Ğ
cÚf
->
	`G‘V®ue
( "VisLineLength" ) );

79  
ncouÁ”_t
 
i
 = 0; i < (
numRªks
 * 
numBªks
 +‚umRanks); i++ )

81 
g¿phLšes
.
	`push_back
( "" );

82 
g¿phSymbŞ
.
	`push_back
( '-' );

86 
ncyşe_t
 
fœ¡Ouut
 = 
¡©ic_ÿ¡
<ncycle_t>(

87 
	`G‘Ev’tQueue
Ğ)->
	`G‘Cu¼’tCyşe
Ğè/ 
lšeL’gth
) +†ineLength;

89 
	`G‘Ev’tQueue
Ğ)->
	`In£¹Ev’t
Ğ
Ev’tCyşe
, 
this
, 
fœ¡Ouut
 );

91 
’dCyşe
 = 
fœ¡Ouut
;

92 
¡¬tCyşe
 = 
’dCyşe
 - 
lšeL’gth
;

93 
’dCyşe2
 = 
’dCyşe
 + 
lšeL’gth
;

94 
	}
}

102 
boŞ
 
	gVisu®iz”
::
	$IssueAtomic
Ğ
NVMašReque¡
 *
»q
 )

104  
	`IssueCommªd
Ğ
»q
 );

105 
	}
}

113 
boŞ
 
	gVisu®iz”
::
	$IssueCommªd
Ğ
NVMašReque¡
 *
»q
 )

115 
ušt64_t
 
bªk
, 
¿nk
;

116 
ncouÁ”_t
 
g¿phId
;

118 
»q
->
add»ss
.
	`G‘T¿n¦©edAdd»ss
Ğ
NULL
, NULL, &
bªk
, &
¿nk
, NULL, NULL );

123 ifĞ
	`NVMTy³M©ches
(
Bªk
) )

125 
g¿phId
 = 
¿nk
 * (
numBªks
 + 1è+ (
bªk
 + 1);

128 
ncouÁ”_t
 
flStİ
 = 
	`G‘Ev’tQueue
Ğ)->
	`G‘Cu¼’tCyşe
Ğè% 
lšeL’gth
;

129 
ncouÁ”_t
 
flS¹
 = 
g¿phLšes
[
g¿phId
].
	`Ëngth
( );

131  
ncouÁ”_t
 
i
 = 
flS¹
; i < 
flStİ
; i++ )

132 
g¿phLšes
[
g¿phId
] +ğ
g¿phSymbŞ
[graphId];

135  
»q
->
ty³
 )

137 
ACTIVATE
:

138 
g¿phSymbŞ
[
g¿phId
] = 'A';

141 
PRECHARGE
:

142 
g¿phSymbŞ
[
g¿phId
] = 'P';

145 
POWERDOWN_PDA
:

146 
POWERDOWN_PDPF
:

147 
POWERDOWN_PDPS
:

148 
g¿phSymbŞ
[
g¿phId
] = 'D';

151 
POWERUP
:

152 
g¿phSymbŞ
[
g¿phId
] = 'U';

155 
REFRESH
:

156 
g¿phSymbŞ
[
g¿phId
] = 'F';

166 
READ
:

167 
WRITE
:

171 
g¿phSymbŞ
[
g¿phId
] = '?';

176 ifĞ
	`NVMTy³M©ches
(
Rªk
) )

178 
g¿phId
 = 
¿nk
 * (
numBªks
 + 1);

181 ifĞ
	`G‘Ev’tQueue
Ğ)->
	`G‘Cu¼’tCyşe
Ğè% 
lšeL’gth
 != 0 )

184 
ncouÁ”_t
 
flStİ
 =

185 (
	`G‘Ev’tQueue
Ğ)->
	`G‘Cu¼’tCyşe
Ğè% 
lšeL’gth
) - 1;

187 
ncouÁ”_t
 
flS¹
 = 
g¿phLšes
[
g¿phId
].
	`Ëngth
( );

189  
ncouÁ”_t
 
i
 = 
flS¹
; i < 
flStİ
; i++ )

190 
g¿phLšes
[
g¿phId
] += '-';

193 
g¿phLšes
[
g¿phId
] += 'X';

196  
Œue
;

197 
	}
}

199 
boŞ
 
	gVisu®iz”
::
	$Reque¡Com¶‘e
Ğ
NVMašReque¡
 *
»q
 )

201 
ušt64_t
 
bªk
, 
¿nk
;

202 
ncouÁ”_t
 
g¿phId
;

204 
»q
->
add»ss
.
	`G‘T¿n¦©edAdd»ss
Ğ
NULL
, NULL, &
bªk
, &
¿nk
, NULL, NULL );

206 ifĞ
	`NVMTy³M©ches
(
Bªk
) )

208 
g¿phId
 = 
¿nk
 * (
numBªks
 + 1è+ (
bªk
 + 1);

215 ifĞ
»q
->
ty³
 =ğ
BUS_READ
 ||„eq->ty³ =ğ
BUS_WRITE
 )

217 
flSymbŞ
 = '?';

219 ifĞ
»q
->
ty³
 =ğ
BUS_WRITE
 )

220 
flSymbŞ
 = 'R';

221 ifĞ
»q
->
ty³
 =ğ
BUS_READ
 )

222 
flSymbŞ
 = 'W';

224 
ncouÁ”_t
 
flStİ
 =

225 
	`G‘Ev’tQueue
Ğ)->
	`G‘Cu¼’tCyşe
Ğè% 
lšeL’gth
;

227 
ncouÁ”_t
 
flS¹
 = 
g¿phLšes
[
g¿phId
].
	`Ëngth
( );

229  
ncouÁ”_t
 
i
 = 
flS¹
; i < 
flStİ
; i++ )

230 
g¿phLšes
[
g¿phId
] += '-';

232  
ncouÁ”_t
 
i
 = 0; i < 
busBur¡L’gth
; i++ )

233 
g¿phLšes
[
g¿phId
] +ğ
flSymbŞ
;

239 
ncouÁ”_t
 
flStİ
 =

240 
	`G‘Ev’tQueue
Ğ)->
	`G‘Cu¼’tCyşe
Ğè% 
lšeL’gth
;

242 
ncouÁ”_t
 
flS¹
 = 
g¿phLšes
[
g¿phId
].
	`Ëngth
( );

244  
ncouÁ”_t
 
i
 = 
flS¹
; i < 
flStİ
; i++ )

245 
g¿phLšes
[
g¿phId
] +ğ
g¿phSymbŞ
[graphId];

248 
g¿phSymbŞ
[
g¿phId
] = '-';

252  
Œue
;

253 
	}
}

255 
	gVisu®iz”
::
	$Cyşe
Ğ
ncyşe_t
 )

257 
’dCyşe
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
();

258 
¡¬tCyşe
 = 
’dCyşe
 - 
lšeL’gth
;

259 
’dCyşe2
 = 
’dCyşe
 + 
lšeL’gth
;

265  
ncouÁ”_t
 
i
 = 0; i < 
numRªks
; i++ )

268 
ncouÁ”_t
 
flStİ
 = 
lšeL’gth
;

269 
ncouÁ”_t
 
flS¹
 = 
g¿phLšes
[
i
 * (
numBªks
+1)].
	`Ëngth
( );

271  
ncouÁ”_t
 
k
 = 
flS¹
; k < 
flStİ
; k++ )

272 
g¿phLšes
[
i
 * (
numBªks
+1)] += '-';

275 
¡d
::
cout
 << "RANK " << 
i
 << " "

276 << 
g¿phLšes
[
i
 * (
numBªks
+1)].
	`sub¡r
(0,
lšeL’gth
è<< 
¡d
::
’dl
;

278  
ncouÁ”_t
 
j
 = 0; j < 
numBªks
; j++ )

280 
ncouÁ”_t
 
g¿phId
 = 
i
 * (
numBªks
+1è+ (
j
+1);

283 
ncouÁ”_t
 
flStİ
 = 
lšeL’gth
;

284 
ncouÁ”_t
 
flS¹
 = 
g¿phLšes
[
g¿phId
].
	`Ëngth
( );

286  
ncouÁ”_t
 
k
 = 
flS¹
; k < 
flStİ
; k++ )

287 
g¿phLšes
[
g¿phId
] +ğ
g¿phSymbŞ
[graphId];

290 
¡d
::
cout
 << "BANK " << 
j
 << " "

291 << 
g¿phLšes
[
g¿phId
].
	`sub¡r
(0,
lšeL’gth
è<< 
¡d
::
’dl
;

296 
	`G‘Ev’tQueue
Ğ)->
	`In£¹Ev’t
Ğ
Ev’tCyşe
, 
this
,

297 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
(è+ 
lšeL’gth
 );

301  
ncouÁ”_t
 
i
 = 0; i < (
numRªks
 * 
numBªks
 +‚umRanks); i++ )

303 
¡d
::
¡ršg
 
‹mpSŒšg
;

305 
‹mpSŒšg
 = 
g¿phLšes
[
i
].
	`sub¡r
Ğ
lšeL’gth
, 
¡d
::
¡ršg
::
Åos
 );

306 
g¿phLšes
[
i
] = 
‹mpSŒšg
;

308 
	}
}

	@Utils/Visualizer/Visualizer.h

34 #iâdeà
__NVMAIN_UTILS_VISUALIZER_H__


35 
	#__NVMAIN_UTILS_VISUALIZER_H__


	)

37 
	~"¤c/NVMObjeù.h
"

38 
	~"šşude/NVMašReque¡.h
"

39 
	~"šşude/NVMTy³s.h
"

41 
Çme¥aû
 
	gNVM
 {

43 şas 
	cVisu®iz”
 : 
public
 
NVMObjeù


45 
public
:

46 
Visu®iz”
( );

47 ~
Visu®iz”
( );

49 
boŞ
 
IssueCommªd
Ğ
NVMašReque¡
 *
»q
 );

50 
boŞ
 
IssueAtomic
Ğ
NVMašReque¡
 *
»q
 );

52 
boŞ
 
Reque¡Com¶‘e
Ğ
NVMašReque¡
 *
»q
 );

54 
Cyşe
Ğ
ncyşe_t
 );

56 
In™
Ğ
CÚfig
 *
cÚf
 );

58 
	g´iv©e
:

59 
ncouÁ”_t
 
numRªks
, 
	gnumBªks
;

60 
ncyşe_t
 
	gbusBur¡L’gth
;

61 
ncyşe_t
 
	g¡¬tCyşe
, 
	g’dCyşe
, 
	g’dCyşe2
;

62 
ncouÁ”_t
 
	glšeL’gth
;

64 
	g¡d
::
veùÜ
<
¡d
::
¡ršg
> 
g¿phLšes
;

65 
	g¡d
::
veùÜ
<> 
g¿phSymbŞ
;

	@include/CacheBlock.hh

6 #iâdeà
__CACHE_BLOCK_H__


7 
	#__CACHE_BLOCK_H__


	)

9 
	~"šşude/NVMD©aBlock.h
"

10 
	~"šşude/CommÚEnums.h
"

13 
Çme¥aû
 
	gNVM


15 şas 
	cCacheBlock


17 
	gpublic
:

18 
ušt64_t
 
g
;

19 
NVMD©aBlock
 *
	gd©a
;

20 
	g¡©us
;

21 
	g£t
;

22 
	g»fCouÁ
;

24 
	gpublic
:

25 
CacheBlock
():
g
(0),
¡©us
(0),
£t
(-1),
»fCouÁ
(0)

27 
	gd©a
 = 
NULL
;

30 ~
CacheBlock
()

32 iàĞ
	gd©a
 )

34 
d–‘e
 
	gd©a
;

35 
	gd©a
 = 
NULL
;

44 
CacheBlock
* 
	gİ”©Ü
=ĞcÚ¡ CacheBlock 
cİy_blk
)

46 
this
->
g
 = 
cİy_blk
.tag;

47 
	gthis
->
	gd©a
 = 
cİy_blk
.
d©a
;

48 
	gthis
->
	g¡©us
 = 
cİy_blk
.
¡©us
;

49 
	gthis
->
	g£t
 = 
cİy_blk
.
£t
;

50 
	gthis
->
	g»fCouÁ
 = 
cİy_blk
.
»fCouÁ
;

51  
	gthis
;

54 
S‘Size
Ğ
ušt64_t
 
n
 )

56 
	gthis
->
	gd©a
->
S‘Size
(
n
);

59 
ušt64_t
 
G‘Tag
()

61  
	gg
;

64 
NVMD©aBlock
* 
G‘D©a
()

66  
	gthis
->
	gd©a
;

69 
ušt64_t
 
G‘Stus
()

71  
	g¡©us
;

74 
G‘RefCouÁ
()

76  
	gthis
->
	g»fCouÁ
;

79 
InüeRefCouÁ
()

81 
	g»fCouÁ
++;

94 
boŞ
 
IsDœty
()

96  ( 
	g¡©us
 & ( 
	gBlkV®id
 | 
	gBlkDœty
 ));

99 
boŞ
 
IsV®id
()

101  ( 
	g¡©us
 & 
	gBlkV®id
 );

107 
Inv®id©e
()

109 
	gd©a
->
S‘V®id
(
çl£
);

110 
	g¡©us
 = 0;

	@include/CacheSet.hh

8 #iâdeà
__CACHE_SET_H__


9 
	#__CACHE_SET_H__


	)

10 
	~"šşude/CacheBlock.hh
"

11 
	~"šşude/CommÚH—d”s.h
"

12 
	~"šşude/Exû±iÚ.h
"

14 
Çme¥aû
 
	gNVM


16 
	g‹m¶©e
 <
şass
 
	gblock
>

17 şas 
	cCacheS‘


19 
	gpublic
:

20 
ušt64_t
 
assoc
;

21 
block
 **
	gÿcheS‘
;

22 
	gpublic
:

27 
MoveToH—d
Ğ
block
 *
blk
);

28 
MoveToTa
Ğ
block
 *
blk
);

29 
ušt64_t
 
G‘Assoc
()

31  
	gthis
->
	gassoc
;

73 
	g‹m¶©e
 <
şass
 
	gblock
>

74 
	gCacheS‘
<
	gblock
>::
	$MoveToH—d
(
block
 *
blk
)

76 
block
 * 
tmp_blk
 = 
blk
;

77 
block
 * 
tmp
;

79 ifĞ
ÿcheS‘
[0] =ğ
blk
)

81 
i
=0;

85 ifĞ
i
<
assoc
 ){

87 
tmp
 = 
tmp_blk
;

88 
tmp_blk
 = 
ÿcheS‘
[
i
];

89 
ÿcheS‘
[
i
] = 
tmp
;

90 
i
++;

94 } 
tmp_blk
!=
blk
);

95 
	}
}

101 
	g‹m¶©e
 <
şass
 
	gblock
>

102 
	gCacheS‘
<
	gblock
>::
	$MoveToTa
(
block
 *
blk
)

104 
block
 *
tmp_blk
 = 
blk
;

105 
block
 *
sw­_tmp
;

107 ifĞ
blk
 =ğ
ÿcheS‘
[
assoc
-1] )

109 
i
 = 
assoc
-1;

113 ifĞ
i
 >= 0)

116 
sw­_tmp
 = 
tmp_blk
;

117 
tmp_blk
 = 
ÿcheS‘
[
i
];

118 
ÿcheS‘
[
i
] = 
tmp_blk
;

119 
i
--;

123 } 
tmp_blk
!=
blk
);

124 
	}
}

	@include/CommonCallBack.hh

7 #iâdeà
__COMMON_CALL_BACK__


8 
	#__COMMON_CALL_BACK__


	)

10 
Çme¥aû
 
	gNVM


15 
	g‹m¶©e
 <
şass
 
	gT
>

16 
šlše
 
T
 
G‘DRAMMissTime
ĞT 
tRP
 , T 
tRCD
 , T 
tCAS
 )

18  (
	gtRP
+
	gtRCD
+
	gtCAS
);

25 
	g‹m¶©e
 <
şass
 
	gT
>

26 
šlše
 
T
 
G‘PCMCËªMissTime
ĞT 
tRCD
,T 
tCAS
 )

28  
	gtRCD
+
	gtCAS
;

37 
	g‹m¶©e
<
şass
 
	gT
>

38 
šlše
 
T
 
G‘PCMDœtyMissTime
ĞT 
tRCD
 , T 
tWP
 ,T 
tRP
 , T 
tCAS
 )

40  
	gtRCD
+
	gtWP
+
	gtRP
+
	gtCAS
;

	@include/CommonEnums.h

4 #iâdeà
__COMMON_ENUMS_H__


5 
	#__COMMON_ENUMS_H__


	)

6 
	~"šşude/NVMAdd»ss.h
"

7 
	~"šşude/NVMD©aBlock.h
"

8 
	~"¤c/NVMObjeù.h
"

10 
Çme¥aû
 
	gNVM


12 
	eCacheS‹
 { 
	gCACHE_IDLE
, 
	gCACHE_BUSY
 };

13 
	eCacheO³¿tiÚ
 { 
	gCACHE_NONE
, 
	gCACHE_READ
, 
	gCACHE_WRITE
,
	gCACHE_FILL
,
	gCACHE_SCRUB
, 
	gCACHE_EVICT
 };

15 
	eCacheBlkStus


17 
	gBlkV®id
 = 0x01,

20 
	gBlkDœty
 = 0x02

25 
	sCacheReque¡


26 { 
CacheO³¿tiÚ
 
	gİty³
;

27 
NVMAdd»ss
 
	gadd»ss
;

28 
NVMAdd»ss
 
	g’dAddr
;

30 
NVMD©aBlock
 
	gd©a
;

31 
boŞ
 
	gh™
;

32 
NVMObjeù
 *
	gowÃr
;

33 
NVMašReque¡
 *
	gÜigš®Reque¡
;

36 
ušt64_t
 
	tAddr
;

38 
	e_İ_ty³
{

39 
	gPCM_MEM
 = 0x01,

40 
	gDRAM_MEM
 = 0x02};

43 
	gVALID
 = 1,

44 
	gINVALID
 = 0 };

	@include/CommonHeaders.h

1 #iâdeà
__COMMON_HEADERS_H__


2 
	#__COMMON_HEADERS_H__


	)

3 
	~"¡dio.h
"

4 
	~"¡dlib.h
"

5 
	~<io¡»am
>

6 
	~"¡dšt.h
"

7 
	~<as£¹.h
>

8 
	~"¡ršg.h
"

	@include/CommonMath.cpp

1 
	~"šşude/CommÚM©h.h
"

2 
usšg
 
Çme¥aû
 
	gNVM
;

	@include/CommonMath.h

2 #iâdeà
__COMMON_MATH_HH__


3 
	#__COMMON_MATH_HH__


	)

4 
	~"šşude/CommÚH—d”s.h
"

5 
	~"šşude/Exû±iÚ.h
"

6 
	~<cùy³
>

7 
	~<®gÜ™hm
>

10 
Çme¥aû
 
	gNVM
{

12 
	g‹m¶©e
 <
şass
 
	gT
>

13 
šlše
 
T


14 
L—¡SigB™
(
T
 
n
)

16  
	gn
 & ~(n - 1);

19 
	g‹m¶©e
 <
şass
 
	gT
>

20 
šlše
 
boŞ


21 
IsPow”Of2
(
T
 
n
)

23  
	gn
 !ğ0 && 
L—¡SigB™
(
n
) ==‚;

26 
šlše
 
ušt64_t


27 
Pow”
(
ušt32_t
 
n
, ušt32_ˆ
e
)

29 ià(
	gn
 > 20)

30 
	gNVM
::
W¬nšg
("Warning,…ower() function is quite slow for†argeƒxponents\n");

32 ià(
	ge
 == 0)

35 
ušt64_t
 
	g»suÉ
 = 
n
;

36 
ušt64_t
 
	gŞd_»suÉ
 = 0;

37 
	gx
 = 1; x < 
	ge
; x++) {

38 
	gŞd_»suÉ
 = 
»suÉ
;

39 
	g»suÉ
 *ğ
n
;

40 ià(
	gŞd_»suÉ
 > 
	g»suÉ
)

41 
	gNVM
::
W¬nšg
("power() overflowed!\n");

43  
	g»suÉ
;

47 
šlše
 

48 
Log2
(
x
)

50 
as£¹
(
x
 > 0);

52 
	gy
 = 0;

54 ià(
	gx
 & 0xffff0000è{ 
	gy
 += 16; x >>= 16; }

55 ià(
	gx
 & 0x0000ff00è{ 
	gy
 += 8; x >>= 8; }

56 ià(
	gx
 & 0x000000f0è{ 
	gy
 += 4; x >>= 4; }

57 ià(
	gx
 & 0x0000000cè{ 
	gy
 += 2; x >>= 2; }

58 ià(
	gx
 & 0x00000002è{ 
	gy
 += 1; }

60  
	gy
;

63 
šlše
 

64 
Log2
(
x
)

66 
as£¹
(
x
 > 0);

68 
	gy
 = 0;

70 #ià
defšed
(
__LP64__
)

71 ià(
	gx
 & (
	gušt64_t
)(0xffffffff00000000)è{ 
	gy
 += 32; x >>= 32; }

73 ià(
	gx
 & 0xffff0000è{ 
	gy
 += 16; x >>= 16; }

74 ià(
	gx
 & 0x0000ff00è{ 
	gy
 += 8; x >>= 8; }

75 ià(
	gx
 & 0x000000f0è{ 
	gy
 += 4; x >>= 4; }

76 ià(
	gx
 & 0x0000000cè{ 
	gy
 += 2; x >>= 2; }

77 ià(
	gx
 & 0x00000002è{ 
	gy
 += 1; }

79  
	gy
;

82 
šlše
 

83 
Log2
(
x
)

85 
as£¹
(
x
 > 0);

87 
	gy
 = 0;

89 ià(
	gx
 & (
	gušt64_t
)(0xffffffff00000000)è{ 
	gy
 += 32; x >>= 32; }

90 ià(
	gx
 & (
	gušt64_t
)0x00000000ffff0000è{ 
	gy
 += 16; x >>= 16; }

91 ià(
	gx
 & (
	gušt64_t
)(0x000000000000ff00)è{ 
	gy
 += 8; x >>= 8; }

92 ià(
	gx
 & (
	gušt64_t
)(0x00000000000000f0)è{ 
	gy
 += 4; x >>= 4; }

93 ià(
	gx
 & (
	gušt64_t
)(0x000000000000000c)è{ 
	gy
 += 2; x >>= 2; }

94 ià(
	gx
 & (
	gušt64_t
)(0x0000000000000002)è{ 
	gy
 += 1; }

96  
	gy
;

99 
šlše
 

100 
Log2
(
x
)

102 
as£¹
(
x
 > 0);

103  
Log2
(()
x
);

106 
šlše
 

107 
Log2
(
x
)

109 
as£¹
(
x
 > 0);

110  
Log2
(()
x
);

113 
šlše
 

114 
Log2
(
x
)

116 
as£¹
(
x
 > 0);

117  
Log2
(()
x
);

131 
šlše
 
ušt64_t
 
SŒšgP¬£r
Ğ
¡d
::
¡ršg
& 
num_¡r
 , std::¡ršg& 
un™_¡r
 , std::¡ršg 
sourû_¡r
 , 
ba£
=10,
Œim
=' ')

133 
pos
 = 0;

134 
	gËn
 = 
sourû_¡r
.
fšd_fœ¡_nÙ_of
(
Œim
);

138 
	gsourû_¡r
.
”a£
Ğ
pos
 , 
Ën
 );

139 
	gsourû_¡r
.
”a£
Ğ
sourû_¡r
.
fšd_Ï¡_nÙ_of
(
Œim
)+1);

142 
	gpos
 = 
sourû_¡r
.
fšd_fœ¡_of
(
Œim
);

143 if(
	gpos
>=0)

145 
Ën
 = 
sourû_¡r
.
fšd_Ï¡_of
(
Œim
)-
pos
+1;

146 
	gsourû_¡r
.
”a£
(
pos
 , 
Ën
);

148 
	gun™_Ën
 = 0;

149 
	gpos
 = 
sourû_¡r
.
size
()-1;

150 cÚ¡ * 
	gtmp
 = 
sourû_¡r
.
c_¡r
();

151 *
	g’d
;

153  ( 
	gtmp
[
pos
]<'0')||(tmp[pos]>'9') )

155 
	gun™_Ën
++;

156 
	gpos
--;

158 
	gun™_¡r
 = 
sourû_¡r
.
sub¡r
Ğ
pos
+1, 
un™_Ën
);

159 
	gnum_¡r
 = 
sourû_¡r
.
sub¡r
Ğ0 , sourû_¡r.
size
()-
un™_Ën
 );

160 
ušt64_t
 
	g»suÉ
 = 
¡©ic_ÿ¡
<ušt64_t>(
¡¹Ş
Ğ
num_¡r
.
c_¡r
(è, &
’d
 , 
ba£
));

161  
	g»suÉ
;

166 
šlše
 
ToUµ”SŒšg
(
¡d
::
¡ršg
 &
¡r
)

168 
ŒªsfÜm
Ğ
¡r
.
begš
(è, sŒ.
’d
(è, sŒ.begš(), ((*)())
touµ”
);

173 
šlše
 
ToLow”SŒšg
(
¡d
::
¡ršg
 &
¡r
)

175 
ŒªsfÜm
Ğ
¡r
.
begš
(è, sŒ.
’d
(è, sŒ.begš(), ((*)())
tŞow”
);

182 
šlše
 
ušt64_t
 
ToBy‹s
Ğušt64_ˆ
»suÉ
 , 
¡d
::
¡ršg
 
un™_¡r
)

184 
ToUµ”SŒšg
Ğ
un™_¡r
);

185 ifĞ(
	gun™_¡r
 =="B")|| (
un™_¡r
==""))

186  
»suÉ
;

187 if(
	gun™_¡r
 == "KB")

188  
»suÉ
*(
NVM
::
Pow”
(2,10));

189 ifĞ
	gun™_¡r
 == "MB")

190  
»suÉ
*Ğ
NVM
::
Pow”
(2,20));

191 ifĞ
	gun™_¡r
 =="GB")

192  
»suÉ
*Ğ
NVM
::
Pow”
(2,30));

193 ifĞ
	gun™_¡r
 =="TB")

194  
»suÉ
*Ğ
NVM
::
Pow”
(2,40));

203 
šlše
 
ušt64_t
 
T¿nsToBy‹s
Ğ
¡d
::
¡ršg
 
ÿ·c™y_¡r
 , 
ba£
=10 )

206 
¡d
::
¡ršg
 
num_¡r
 , 
un™_¡r
;

207 
ušt64_t
 
	g»suÉ
 = 
SŒšgP¬£r
Ğ
num_¡r
 , 
un™_¡r
 , 
ÿ·c™y_¡r
,
ba£
 );

208 
	g¡d
::
cout
<<"num_¡r:"<<
num_¡r
<<" un™_¡r:"<<
un™_¡r
<<
¡d
::
’dl
;

209  
ToBy‹s
Ğ
»suÉ
 , 
un™_¡r
);

216 
šlše
 
T¿nsCheck
Ğ
¡d
::
¡ršg
 
ÿ·c™y_¡r
, 
ba£
=10)

218 
¡d
::
¡ršg
 
num_¡r
 , 
un™_¡r
;

219 
ušt64_t
 
	g»suÉ
 = 
SŒšgP¬£r
Ğ
num_¡r
 , 
un™_¡r
 , 
ÿ·c™y_¡r
,
ba£
 );

220 if(
IsPow”Of2
(
»suÉ
))

222  
ToBy‹s
Ğ
»suÉ
 , 
un™_¡r
 );

245 
šlše
 
boŞ
 
CİyCh¬s
(* 
de¡_ch¬s
 , cÚ¡ * 
sourû_ch¬s
)

247 
	gËn
 = 
¡¾’
(
sourû_ch¬s
);

248 if(!
	gde¡_ch¬s
)

250 
	gde¡_ch¬s
 = 
Ãw
 [
Ën
+1];

252 ifĞ!
	gde¡_ch¬s
 )

253  
	gçl£
;

255 
memıy
Ğ
de¡_ch¬s
 , 
sourû_ch¬s
 , 
Ën
);

256 
	gde¡_ch¬s
[
Ën
] = '\0';

257  
	gŒue
;

	@include/Exception.h

6 #iâdeà
__EXCEPTION_H__


7 
	#__EXCEPTION_H__


	)

8 
	#__DEBUG__


	)

10 
	~<io¡»am
>

11 
	~<c¡dlib
>

12 
Çme¥aû
 
	gNVM


18 
	g‹m¶©e
 < 
şass
 
	gT
>

19 
F©®
Ğ
T
 
desütiÚ
)

22 
	g¡d
::
cout
<<
desütiÚ
<<
¡d
::
’dl
;

23 
abÜt
();

27 
	g‹m¶©e
 < 
şass
 
	gT
>

28 
W¬nšg
Ğ
T
 
desütiÚ
)

30 
	g¡d
::
cout
<<
desütiÚ
<<
¡d
::
’dl
;

34 
	g‹m¶©e
< 
şass
 
	gT
>

35 
DebugOuut
(
T
 
desütiÚ
)

37 #ifdeà
__DEBUG__


38 
	g¡d
::
cout
<<"DEBUG:"<<
desütiÚ
<<
¡d
::
’dl
;

	@include/FailReasons.h

34 #iâdeà
__INCLUDE_FAIL_REASONS_H__


35 
	#__INCLUDE_FAIL_REASONS_H__


	)

37 
Çme¥aû
 
	gNVM
 {

39 
	eFaR—sÚs
 { 
	gUNKNOWN_FAILURE
,

40 
	gOPEN_REFRESH_WAITING
,

41 
	gCLOSED_REFRESH_WAITING
,

42 
	gREFRESH_OPEN_FAILURE
,

43 
	gSUBARRAY_TIMING
,

44 
	gBANK_TIMING
,

45 
	gRANK_TIMING
,

46 
	gUNSUPPORTED_COMMAND


49 şas 
	cFaR—sÚ


51 
	gpublic
:

52 
FaR—sÚ
Ğè: 
»asÚ
(
UNKNOWN_FAILURE
) { }

53 ~
FaR—sÚ
( ) { }

55 
FaR—sÚs
 
»asÚ
;

	@include/NVMAddress.cpp

34 
	~"šşude/NVMAdd»ss.h
"

36 
usšg
 
Çme¥aû
 
	gNVM
;

38 
	gNVMAdd»ss
::
	$NVMAdd»ss
( )

40 
Œª¦©ed
 = 
çl£
;

41 
hasPhysiÿlAdd»ss
 = 
çl£
;

42 
hasVœtu®Add»ss
 = 
çl£
;

43 
physiÿlAdd»ss
 = 0;

44 
vœtu®Add»ss
 = 0;

45 
sub¬¿y
 = 
row
 = 
cŞ
 = 
bªk
 = 
¿nk
 = 
chªÃl
 = 0;

46 
	}
}

48 
	gNVMAdd»ss
::~
	$NVMAdd»ss
( )

50 
	}
}

52 
NVMAdd»ss
::
	$NVMAdd»ss
Ğ
ušt64_t
 
addrRow
, ušt64_ˆ
addrCŞ
, ušt64_ˆ
addrBªk
,

53 
ušt64_t
 
addrRªk
, ušt64_ˆ
addrChªÃl
, ušt64_ˆ
addrSA
 )

55 
	`S‘T¿n¦©edAdd»ss
Ğ
addrRow
, 
addrCŞ
, 
addrBªk
, 
addrRªk
, 
addrChªÃl
, 
addrSA
 );

56 
	}
}

58 
	gNVMAdd»ss
::
	$S‘T¿n¦©edAdd»ss
Ğ
ušt64_t
 
addrRow
, ušt64_ˆ
addrCŞ
, ušt64_ˆ
addrBªk
,

59 
ušt64_t
 
addrRªk
, ušt64_ˆ
addrChªÃl
, ušt64_ˆ
addrSA
 )

61 
Œª¦©ed
 = 
Œue
;

62 
row
 = 
addrRow
;

63 
cŞ
 = 
addrCŞ
;

64 
bªk
 = 
addrBªk
;

65 
¿nk
 = 
addrRªk
;

66 
chªÃl
 = 
addrChªÃl
;

67 
sub¬¿y
 = 
addrSA
;

68 
	}
}

70 
	gNVMAdd»ss
::
	$S‘PhysiÿlAdd»ss
Ğ
ušt64_t
 
pAdd»ss
 )

72 
hasPhysiÿlAdd»ss
 = 
Œue
;

73 
physiÿlAdd»ss
 = 
pAdd»ss
;

74 
	}
}

76 
	gNVMAdd»ss
::
	$S‘Vœtu®Add»ss
Ğ
ušt64_t
 
vAdd»ss
)

78 
hasVœtu®Add»ss
 = 
Œue
;

79 
vœtu®Add»ss
 = 
vAdd»ss
;

80 
	}
}

83 
	gNVMAdd»ss
::
	$S‘B™Add»ss
Ğ
ušt8_t
 
b™Addr
 )

85 
b™
 = 
b™Addr
;

86 
	}
}

88 
	gNVMAdd»ss
::
	$G‘T¿n¦©edAdd»ss
Ğ
ušt64_t
 *
addrRow
, ušt64_ˆ*
addrCŞ
, ušt64_ˆ*
addrBªk
,

89 
ušt64_t
 *
addrRªk
, ušt64_ˆ*
addrChªÃl
, ušt64_ˆ*
addrSA
 )

91 ifĞ
addrRow
 ) *addrRow = 
row
;

92 ifĞ
addrCŞ
 ) *addrCŞ = 
cŞ
;

93 ifĞ
addrBªk
 ) *addrBªk = 
bªk
;

94 ifĞ
addrRªk
 ) *addrRªk = 
¿nk
;

95 ifĞ
addrChªÃl
 ) *addrChªÃÈğ
chªÃl
;

96 ifĞ
addrSA
 ) *addrSA = 
sub¬¿y
;

97 
	}
}

99 
ušt64_t
 
	gNVMAdd»ss
::
	$G‘PhysiÿlAdd»ss
( )

101  
physiÿlAdd»ss
;

102 
	}
}

105 
ušt64_t
 
	gNVMAdd»ss
::
	$G‘Vœtu®Add»ss
( )

107  
vœtu®Add»ss
;

108 
	}
}

110 
ušt64_t
 
	gNVMAdd»ss
::
	$G‘B™Add»ss
( )

112  
b™
;

113 
	}
}

115 
ušt64_t
 
	gNVMAdd»ss
::
	$G‘Row
( )

117  
row
;

118 
	}
}

120 
ušt64_t
 
	gNVMAdd»ss
::
	$G‘CŞ
( )

122  
cŞ
;

123 
	}
}

125 
ušt64_t
 
	gNVMAdd»ss
::
	$G‘Bªk
( )

127  
bªk
;

128 
	}
}

130 
ušt64_t
 
	gNVMAdd»ss
::
	$G‘Rªk
( )

132  
¿nk
;

133 
	}
}

135 
ušt64_t
 
	gNVMAdd»ss
::
	$G‘ChªÃl
( )

137  
chªÃl
;

138 
	}
}

140 
ušt64_t
 
	gNVMAdd»ss
::
	$G‘SubA¼ay
( )

142  
sub¬¿y
;

143 
	}
}

145 
boŞ
 
	gNVMAdd»ss
::
	$IsT¿n¦©ed
( )

147  
Œª¦©ed
;

148 
	}
}

150 
boŞ
 
	gNVMAdd»ss
::
	$HasPhysiÿlAdd»ss
( )

152  
hasPhysiÿlAdd»ss
;

153 
	}
}

155 
	gNVMAdd»ss
& NVMAdd»ss::
İ”©Ü
=ĞcÚ¡ 
NVMAdd»ss
& 
m
 )

157 
Œª¦©ed
 = 
m
.translated;

158 
	ghasPhysiÿlAdd»ss
 = 
m
.
hasPhysiÿlAdd»ss
;

159 
	gphysiÿlAdd»ss
 = 
m
.
physiÿlAdd»ss
;

160 
	grow
 = 
m
.
row
;

161 
	gcŞ
 = 
m
.
cŞ
;

162 
	gbªk
 = 
m
.
bªk
;

163 
	g¿nk
 = 
m
.
¿nk
;

164 
	gchªÃl
 = 
m
.
chªÃl
;

165 
	gsub¬¿y
 = 
m
.
sub¬¿y
;

166 
	gb™
 = 
m
.
b™
;

168  *
	gthis
;

	@include/NVMAddress.h

34 #iâdeà
__NVMADDRESS_H__


35 
	#__NVMADDRESS_H__


	)

37 
	~<¡dšt.h
>

39 
Çme¥aû
 
	gNVM
 {

41 şas 
	cNVMAdd»ss


43 
	gpublic
:

44 
NVMAdd»ss
( );

45 ~
NVMAdd»ss
( );

47 
NVMAdd»ss
Ğ
ušt64_t
 
addrRow
, ušt64_ˆ
addrCŞ
, ušt64_ˆ
addrBªk
,

48 
ušt64_t
 
addrRªk
, ušt64_ˆ
addrChªÃl
, ušt64_ˆ
addrSA
 );

50 
S‘T¿n¦©edAdd»ss
Ğ
ušt64_t
 
addrRow
, ušt64_ˆ
addrCŞ
, ušt64_ˆ
addrBªk
,

51 
ušt64_t
 
addrRªk
, ušt64_ˆ
addrChªÃl
, ušt64_ˆ
addrSA
 );

52 
S‘PhysiÿlAdd»ss
Ğ
ušt64_t
 
physiÿlAdd»ss
 );

53 
S‘Vœtu®Add»ss
(
ušt64_t
 
vœtu®Add»ss
);

55 
S‘B™Add»ss
Ğ
ušt8_t
 
b™Addr
 );

57 
G‘T¿n¦©edAdd»ss
Ğ
ušt64_t
 *
addrRow
, ušt64_ˆ*
addrCŞ
, ušt64_ˆ*
addrBªk
,

58 
ušt64_t
 *
addrRªk
, ušt64_ˆ*
addrChªÃl
, ušt64_ˆ*
addrSA
 );

59 
ušt64_t
 
G‘PhysiÿlAdd»ss
( );

60 
ušt64_t
 
G‘Vœtu®Add»ss
();

61 
ušt64_t
 
G‘B™Add»ss
( );

63 
ušt64_t
 
G‘Row
( );

64 
ušt64_t
 
G‘CŞ
( );

65 
ušt64_t
 
G‘Bªk
( );

66 
ušt64_t
 
G‘Rªk
( );

67 
ušt64_t
 
G‘ChªÃl
( );

68 
ušt64_t
 
G‘SubA¼ay
( );

70 
boŞ
 
IsT¿n¦©ed
( );

71 
boŞ
 
HasPhysiÿlAdd»ss
( );

73 
	gNVMAdd»ss
& 
	gİ”©Ü
=ĞcÚ¡ 
NVMAdd»ss
& 
m
 );

75 
	g´iv©e
:

76 
boŞ
 
Œª¦©ed
;

77 
boŞ
 
	ghasPhysiÿlAdd»ss
;

78 
boŞ
 
	ghasVœtu®Add»ss
;

79 
ušt64_t
 
	gphysiÿlAdd»ss
;

80 
ušt64_t
 
	gvœtu®Add»ss
;

81 
ušt64_t
 
	gsub¬¿y
;

82 
ušt64_t
 
	grow
;

83 
ušt64_t
 
	gcŞ
;

84 
ušt64_t
 
	gbªk
;

85 
ušt64_t
 
	g¿nk
;

86 
ušt64_t
 
	gchªÃl
;

87 
ušt64_t
 
	gb™
;

	@include/NVMDataBlock.cpp

34 
	~"šşude/NVMD©aBlock.h
"

35 
	~<iomª
>

36 
	~<ÿs£¹
>

37 
	~<c¡ršg
>

38 
	~<io¡»am
>

40 
usšg
 
Çme¥aû
 
	gNVM
;

42 
	gNVMD©aBlock
::
	$NVMD©aBlock
( )

44 
¿wD©a
 = 
NULL
;

45 
isV®id
 = 
çl£
;

46 
size
 = 0;

47 
	}
}

49 
	gNVMD©aBlock
::~
	$NVMD©aBlock
( )

51 
d–‘e
 
¿wD©a
;

52 
¿wD©a
 = 
NULL
;

53 
	}
}

55 
	gNVMD©aBlock
::
	$S‘Size
Ğ
ušt64_t
 
s
 )

57 
	`as£¹
Ğ
¿wD©a
 =ğ
NULL
 );

58 
¿wD©a
 = 
Ãw
 
ušt8_t
[
s
];

59 
size
 = 
s
;

60 
	}
}

62 
ušt64_t
 
	gNVMD©aBlock
::
	$G‘Size
( )

64  
size
;

65 
	}
}

67 
ušt8_t
 
	gNVMD©aBlock
::
	$G‘By‹
Ğ
ušt64_t
 
by‹
 )

69 
ušt8_t
 
rv
 = 0;

71 ifĞ
isV®id
 && 
by‹
 <ğ
size
 )

73 
rv
 = *((
ušt8_t
*)(
¿wD©a
)+
by‹
);

76  
rv
;

77 
	}
}

79 
	gNVMD©aBlock
::
	$S‘By‹
Ğ
ušt64_t
 
by‹
, 
ušt8_t
 
v®ue
 )

81 ifĞ
by‹
 <ğ
size
 )

83 
¿wD©a
[
by‹
] = 
v®ue
;

87 
	`as£¹
Ğ
çl£
 );

89 
	}
}

91 
	gNVMD©aBlock
::
	$S‘V®id
Ğ
boŞ
 
v®id
 )

93 
isV®id
 = 
v®id
;

94 
	}
}

96 
boŞ
 
	gNVMD©aBlock
::
	$IsV®id
( )

98  
isV®id
;

99 
	}
}

101 
	gNVMD©aBlock
::
Pršt
Ğ
¡d
::
o¡»am
& 
out
 ) const

103 
out
 << 
¡d
::
hex
;

104  
ušt64_t
 
	gi
 = 0; i < 
	gsize
; i++ )

106 
	gout
 << 
	g¡d
::
£tw
(2è<< 
¡d
::
£tfl
('0'è<< ()
¿wD©a
[
i
];

108 
	gout
 << 
	g¡d
::
dec
;

111 
	gNVMD©aBlock
& NVMD©aBlock::
İ”©Ü
=ĞcÚ¡ 
NVMD©aBlock
& 
m
 )

113 ifĞ
m
.
¿wD©a
 )

115 ifĞ
¿wD©a
 =ğ
NULL
 )

116 
¿wD©a
 = 
Ãw
 
ušt8_t
[
m
.
size
];

117 
memıy
(
¿wD©a
, 
m
.¿wD©a, m.
size
);

119 
	gisV®id
 = 
m
.
isV®id
;

120 
	gsize
 = 
m
.
size
;

122  *
	gthis
;

125 
	g¡d
::
o¡»am
& 
İ”©Ü
<<Ğ
¡d
::o¡»am& 
out
, cÚ¡ 
	gNVMD©aBlock
& 
	gobj
 )

127 
	gobj
.
Pršt
Ğ
out
 );

128  
	gout
;

	@include/NVMDataBlock.h

34 #iâdeà
__NVMDATABLOCK_H__


35 
	#__NVMDATABLOCK_H__


	)

37 
	~<veùÜ
>

38 
	~<¡dšt.h
>

39 
	~<o¡»am
>

41 
Çme¥aû
 
	gNVM
 {

43 şas 
	cNVMD©aBlock


45 
	gpublic
:

46 
NVMD©aBlock
( );

47 ~
NVMD©aBlock
( );

49 
S‘Size
Ğ
ušt64_t
 
s
 );

50 
ušt64_t
 
G‘Size
( );

52 
ušt8_t
 
G‘By‹
Ğ
ušt64_t
 
by‹
 );

53 
S‘By‹
Ğ
ušt64_t
 
by‹
, 
ušt8_t
 
v®ue
 );

55 
S‘V®id
Ğ
boŞ
 
v®id
 );

56 
boŞ
 
IsV®id
( );

58 
Pršt
Ğ
¡d
::
o¡»am
& 
out
 ) const;

60 
	gNVMD©aBlock
& 
	gİ”©Ü
=ĞcÚ¡ 
NVMD©aBlock
& 
m
 );

62 
ušt8_t
 *
	g¿wD©a
;

64 
	g´iv©e
:

65 
boŞ
 
isV®id
;

66 
ušt64_t
 
	gsize
;

68 
NVMD©aBlock
( const NVMDataBlock& ) { }

73 
	g¡d
::
o¡»am
& 
İ”©Ü
<<Ğ
¡d
::o¡»am& 
out
, cÚ¡ 
	gNVM
::
NVMD©aBlock
& 
obj
 );

	@include/NVMHelpers.cpp

34 
	~"šşude/NVMH–³rs.h
"

36 
Çme¥aû
 
	gNVM
 {

38 
mlog2
Ğ
num
 )

40 
	g»tV®
 = -1;

41 
	gÃwNum
 = 
num
;

43 ifĞ
	gnum
 < 2 )

46  
	gÃwNum
 != 0 )

48 
»tV®
++;

49 
	gÃwNum
 >>= 1;

52  
	g»tV®
;

55 
	g¡d
::
¡ršg
 
G‘FeP©h
Ğ
¡d
::¡ršg 
fe
 )

57 
size_t
 
Ï¡_£p
;

59 
	gÏ¡_£p
 = 
fe
.
fšd_Ï¡_of
( "/\\" );

61  
	gfe
.
sub¡r
Ğ0, 
Ï¡_£p
+1 );

	@include/NVMHelpers.h

34 #iâdeà
__NVMAIN_HELPERS_H__


35 
	#__NVMAIN_HELPERS_H__


	)

37 
	~<¡ršg
>

38 
	~<m­
>

39 
	~<c¡dšt
>

40 
	~<s¡»am
>

42 
Çme¥aû
 
	gNVM
 {

44 
mlog2
Ğ
num
 );

45 
	g¡d
::
¡ršg
 
G‘FeP©h
Ğ
¡d
::¡ršg 
fe
 );

47 
	g‹m¶©e
 <
ty³Çme
 
	gT1
,y³Çm
	gT2
>

48 
	g¡d
::
¡ršg
 
PyDiùHi¡og¿m
Ğ
¡d
::
m­
<
T1
, 
T2
> 
iiM­
 )

52 
	g¡d
::
¡ršg¡»am
 
pyHi¡oSS
;

54 
	gpyHi¡oSS
.
¡r
("");

55 
	gpyHi¡oSS
 << "{";

57 
boŞ
 
	gouutComma
 = 
çl£
;

58  
ty³Çme
 
	g¡d
::
m­
<
T1
, 
	gT2
>::
™”©Ü
 
™”
 = 
iiM­
.
begš
();

59 
	g™”
 !ğ
iiM­
.
’d
(); ++iter )

61 ifĞ
	gouutComma
 )

62 
	gpyHi¡oSS
 << ", ";

64 
	gpyHi¡oSS
 << 
	g™”
->
	gfœ¡
;

65 
	gpyHi¡oSS
 << ": ";

66 
	gpyHi¡oSS
 << 
	g™”
->
	g£cÚd
;

68 
	gouutComma
 = 
Œue
;

71 
	gpyHi¡oSS
 << "}";

73  
	gpyHi¡oSS
.
¡r
();

	@include/NVMTypes.h

34 #iâdeà
__INCLUDE_NVMTYPES_H__


35 
	#__INCLUDE_NVMTYPES_H__


	)

37 
	~<¡dšt.h
>

38 
	~<deque
>

39 
	~<li¡
>

41 
Çme¥aû
 
	gNVM
 {

43 
şass
 
	gNVMašReque¡
;

45 
ušt64_t
 
	tncyşe_t
;

46 
št64_t
 
	tncyşes_t
;

48 
ušt64_t
 
	tncouÁ”_t
;

49 
št64_t
 
	tncouÁ”s_t
;

51 
	g¡d
::
	tli¡
<
	tNVMašReque¡
 *> 
	tNVMT¿n§ùiÚQueue
;

52 
	g¡d
::
	tdeque
<
	tNVMašReque¡
 *> 
	tNVMCommªdQueue
;

	@include/NVMainRequest.h

34 #iâdeà
__NVMAINREQUESTzz_H__


35 
	#__NVMAINREQUESTzz_H__


	)

37 
	~"šşude/NVMAdd»ss.h
"

38 
	~"šşude/NVMD©aBlock.h
"

39 
	~"šşude/NVMTy³s.h
"

40 
	~<io¡»am
>

41 
	~<sigÇl.h
>

43 
Çme¥aû
 
	gNVM
 {

46 
	eOpTy³


48 
	gNOP
 = 0,

49 
	gACTIVATE
,

50 
	gREAD
,

51 
	gREAD_PRECHARGE
,

52 
	gWRITE
,

53 
	gWRITE_PRECHARGE
,

54 
	gPRECHARGE
,

55 
	gPRECHARGE_ALL
,

56 
	gPOWERDOWN_PDA
,

57 
	gPOWERDOWN_PDPF
,

58 
	gPOWERDOWN_PDPS
,

59 
	gPOWERUP
,

60 
	gREFRESH
,

61 
	gBUS_READ
,

62 
	gBUS_WRITE
,

63 
	gCACHED_READ
,

64 
	gCACHED_WRITE
,

67 
	eMemReque¡Stus


69 
	gMEM_REQUEST_INCOMPLETE
,

70 
	gMEM_REQUEST_COMPLETE
,

71 
	gMEM_REQUEST_RETRY
,

72 
	gMEM_REQUEST_NUM


75 
	eNVMAcûssTy³


77 
	gUNKNOWN_ACCESS
,

78 
	gSUPERVISOR_ACCESS
,

79 
	gUSER_ACCESS


82 
	eBulkCommªd


85 
	gCMD_NOP
 = 0,

86 
	gCMD_PRE
,

87 
	gCMD_READPRE
,

88 
	gCMD_READ2PRE
,

89 
	gCMD_READ3PRE
,

90 
	gCMD_READ4PRE
,

91 
	gCMD_WRITEPRE
,

92 
	gCMD_WRITE2PRE
,

93 
	gCMD_WRITE3PRE
,

94 
	gCMD_WRITE4PRE
,

95 
	gCMD_ACTREADPRE
,

96 
	gCMD_ACTREAD2PRE
,

97 
	gCMD_ACTREAD3PRE
,

98 
	gCMD_ACTREAD4PRE
,

99 
	gCMD_ACTWRITEPRE
,

100 
	gCMD_ACTWRITE2PRE
,

101 
	gCMD_ACTWRITE3PRE
,

102 
	gCMD_ACTWRITE4PRE
,

103 
	gCMD_PU_ACT_READ_PRE_PDPF
,

104 
	gCMD_PU_ACT_WRITE_PRE_PDPF
,

105 
	gCMD_ACT_READ_PRE_PDPF
,

106 
	gCMD_ACT_WRITE_PRE_PDPF
,

107 
	gCMD_READ_PRE_PDPF
,

108 
	gCMD_WRITE_PRE_PDPF
,

109 
	gCMD_PRE_PDPF
,

110 
	gCMD_PDPF
,

111 
	gCMD_PU_ACT_READ_PRE
,

112 
	gCMD_PU_ACT_WRITE_PRE
,

115 
şass
 
	gNVMObjeù
;

117 şas 
	cNVMašReque¡


119 
	gpublic
:

120 
NVMašReque¡
( )

122 
ty³
 = 
NOP
;

123 
	gbulkCmd
 = 
CMD_NOP
;

124 
	gth»adId
 = 0;

125 
	gg
 = 0;

126 
	g»qInfo
 = 
NULL
;

127 
	gæags
 = 0;

128 
	g¬riv®Cyşe
 = 0;

129 
	gissueCyşe
 = 0;

130 
	gqueueCyşe
 = 0;

131 
	gcom¶‘iÚCyşe
 = 0;

132 
	gisP»ãtch
 = 
çl£
;

133 
	g´og¿mCouÁ”
 = 0;

134 
	gbur¡CouÁ
 = 1;

135 
	gwr™eProg»ss
 = 0;

136 
	gÿnûÎ©iÚs
 = 0;

137 
	gowÃr
 = 
NULL
;

140 ~
NVMašReque¡
( )

145 
NVMAdd»ss
 
	gadd»ss
;

146 
OpTy³
 
	gty³
;

147 
BulkCommªd
 
	gbulkCmd
;

148 
ncouÁ”s_t
 
	gth»adId
;

149 
NVMD©aBlock
 
	gd©a
;

150 
NVMD©aBlock
 
	gŞdD©a
;

151 
MemReque¡Stus
 
	g¡©us
;

152 
NVMAcûssTy³
 
	gacûss
;

153 
	gg
;

154 *
	g»qInfo
;

155 
ušt64_t
 
	gæags
;

156 
boŞ
 
	gisP»ãtch
;

157 
NVMAdd»ss
 
	gpfTrigg”
;

158 
ušt64_t
 
	g´og¿mCouÁ”
;

159 
ncouÁ”_t
 
	gbur¡CouÁ
;

160 
NVMObjeù
 *
	gowÃr
;

162 
ncyşe_t
 
	g¬riv®Cyşe
;

163 
ncyşe_t
 
	gqueueCyşe
;

164 
ncyşe_t
 
	gissueCyşe
;

165 
ncyşe_t
 
	gcom¶‘iÚCyşe
;

167 
ncyşe_t
 
	gwr™eProg»ss
;

168 
ncyşe_t
 
	gÿnûÎ©iÚs
;

170 cÚ¡ 
	gNVMašReque¡
& 
	gİ”©Ü
=ĞcÚ¡ 
NVMašReque¡
& );

171 
boŞ
 
	gİ”©Ü
<Ğ
NVMašReque¡
 
	gm
 ) const;

173 
	eNVMašReque¡FÏgs


175 
	gFLAG_LAST_REQUEST
 = 1,

176 
	gFLAG_IS_READ
 = 2,

177 
	gFLAG_IS_WRITE
 = 4,

178 
	gFLAG_CANCELLED
 = 8,

179 
	gFLAG_PAUSED
 = 16,

180 
	gFLAG_FORCED
 = 32,

181 
	gFLAG_PRIORITY
 = 64,

182 
	gFLAG_ISSUED
 = 128,

183 
	gFLAG_COUNT


188 
šlše


189 cÚ¡ 
	gNVMašReque¡
& NVMašReque¡::
İ”©Ü
=ĞcÚ¡ 
NVMašReque¡
& 
m
 )

191 
add»ss
 = 
m
.address;

192 
	gty³
 = 
m
.
ty³
;

193 
	gbulkCmd
 = 
m
.
bulkCmd
;

194 
	gth»adId
 = 
m
.
th»adId
;

195 
	gd©a
 = 
m
.
d©a
;

196 
	gŞdD©a
 = 
m
.
ŞdD©a
;

197 
	g¡©us
 = 
m
.
¡©us
;

198 
	gacûss
 = 
m
.
acûss
;

199 
	gg
 = 
m
.
g
;

200 
	g»qInfo
 = 
m
.
»qInfo
;

201 
	gisP»ãtch
 = 
m
.
isP»ãtch
;

202 
	gpfTrigg”
 = 
m
.
pfTrigg”
;

203 
	g´og¿mCouÁ”
 = 
m
.
´og¿mCouÁ”
;

204 
	gowÃr
 = 
m
.
owÃr
;

206 
	g¬riv®Cyşe
 = 
m
.
¬riv®Cyşe
;

207 
	gqueueCyşe
 = 
m
.
queueCyşe
;

208 
	gissueCyşe
 = 
m
.
issueCyşe
;

209 
	gcom¶‘iÚCyşe
 = 
m
.
com¶‘iÚCyşe
;

211  *
	gthis
;

214 
šlše


215 
boŞ
 
	gNVMašReque¡
::
İ”©Ü
<Ğ
NVMašReque¡
 
m
 ) const

217  ( 
this
 < &
m
 );

	@include/StatsStoreBlock.hh

6 #iâdeà
__STATS_STORE_BLOCK_HH__


7 
	#__STATS_STORE_BLOCK_HH__


	)

8 
Çme¥aû
 
	gNVM
{

10 şas 
	cStsStÜeBlock


12 
	gpublic
:

13 
ušt64_t
 
row_id
;

14 
ušt64_t
 
	gmiss_time
;

15 
ušt64_t
 
	g¡©us
;

17 
StsStÜeBlock
():
row_id
(0),
miss_time
(0),
¡©us
(0)

21 
StsStÜeBlock
* 
	gİ”©Ü
=Ğ
StsStÜe
& 
cİy_block
)

23 
row_id
 = 
cİy_block
.row_id;

24 
	gmiss_time
 = 
cİy_block
.
miss_time
;

25 
	g¡©us
 = 
cİy_block
.
¡©us
;

28 
S‘V®id
()

30 
	g¡©us
 = 1;

33 
Inv®id©e
()

35 
	g¡©us
 = 0;

38 
boŞ
 
IsV®id
()

40 
boŞ
 
	gv®id
 = 
çl£
;

41 ifĞ
	g¡©us
&1 )

42 
	gv®id
 = 
Œue
;

43  
	gv®id
;

	@include/global_vars.h

7 
boŞ
 
cÚfig_fe_»aded
 = 
çl£
;

	@src/AddressTranslator.cpp

36 
	~<io¡»am
>

37 
	~<c¡dlib
>

40 
	~"¤c/Add»ssT¿n¦©Ü.h
"

41 
	~"šşude/NVMH–³rs.h
"

44 
usšg
 
Çme¥aû
 
	gNVM
;

46 
	gAdd»ssT¿n¦©Ü
::
	$Add»ssT¿n¦©Ü
( )

48 
m‘hod
 = 
NULL
;

49 
deçuÉF›ld
 = 
NO_FIELD
;

52 
busWidth
 = 64;

54 
bur¡L’gth
 = 8;

56 
lowCŞB™s
 = 0;

57 
b™Widths
 = 
Ãw
 [
FIELD_NUM
];

58 
f›ldOrd”
 = 
Ãw
 [
FIELD_NUM
];

60 
b™WidthsIn™ed
 = 
çl£
;

61 
f›ldOrd”In™ed
 = 
çl£
;

63 
	}
}

66 
	gAdd»ssT¿n¦©Ü
::~
	$Add»ssT¿n¦©Ü
( )

68 if(!
b™Widths
)

69 
d–‘e
 
b™Widths
;

70 if(!
f›ldOrd”
)

71 
d–‘e
 
f›ldOrd”
;

72 
	}
}

75 
	gAdd»ssT¿n¦©Ü
::
	$S‘T¿n¦©iÚM‘hod
Ğ
T¿n¦©iÚM‘hod
 *
m
 )

77 
m‘hod
 = 
m
;

78 
	}
}

81 
T¿n¦©iÚM‘hod
 *
	gAdd»ssT¿n¦©Ü
::
	$G‘T¿n¦©iÚM‘hod
( )

83  
m‘hod
;

84 
	}
}

88 
ušt64_t
 
	gAdd»ssT¿n¦©Ü
::
	$Rev”£T¿n¦©e
ĞcÚ¡ 
ušt64_t
& 
row
,

89 cÚ¡ 
ušt64_t
& 
cŞ
,

90 cÚ¡ 
ušt64_t
& 
bªk
,

91 cÚ¡ 
ušt64_t
& 
¿nk
,

92 cÚ¡ 
ušt64_t
& 
chªÃl
,

93 cÚ¡ 
ušt64_t
& 
sub¬¿y
 )

95 ifĞ
	`G‘T¿n¦©iÚM‘hod
Ğè=ğ
NULL
 )

97 
¡d
::
û¼
 << "Divid” T¿n¦©Ü: T¿n¦©iÚ m‘hod‚Ù s³cif›d!" << std::
’dl
;

98 
	`ex™
(1);

101 
ušt64_t
 
un™Addr
 = 1;

102 
ušt64_t
 
phyAddr
 = 0;

103 
MemÜyP¬t™iÚ
 
·¹
 = 
MEM_UNKNOWN
;

105 
busOff£tB™s
 = 
	`mlog2
Ğ
busWidth
 / 8 );

106 
bur¡B™s
 = 
	`mlog2
Ğ(
busWidth
 * 
bur¡L’gth
) / 8 );

107 
lowCŞB™s
 = 
bur¡B™s
 - 
busOff£tB™s
;

110 
un™Addr
 <<ğ
busOff£tB™s
;

113 
un™Addr
 <<ğ
lowCŞB™s
;

119 if(!
b™WidthsIn™ed
)

121 
b™Widths
 = 
m‘hod
->
	`G‘B™Widths
();

122 
b™WidthsIn™ed
 = 
Œue
;

125 if(!
f›ldOrd”In™ed
)

127 
f›ldOrd”
 = 
m‘hod
->
	`G‘Ord”
();

128 
f›ldOrd”In™ed
 = 
Œue
;

131  
i
 = 0; i < 6 ; i++ )

134 
	`FšdOrd”_modif›d
Ğ
i
, &
·¹
 );

136  
·¹
 )

138 
MEM_ROW
:

139 
phyAddr
 +ğĞ
row
 * 
un™Addr
 );

140 
un™Addr
 <<ğ
b™Widths
[
MEM_ROW
];

143 
MEM_COL
:

144 
phyAddr
 +ğĞ
cŞ
 * 
un™Addr
 );

145 
un™Addr
 <<ğ(
b™Widths
[
MEM_COL
] );

148 
MEM_BANK
:

149 
phyAddr
 +ğĞ
bªk
 * 
un™Addr
 );

150 
un™Addr
 <<ğ
b™Widths
[
MEM_BANK
];

153 
MEM_RANK
:

154 
phyAddr
 +ğĞ
¿nk
 * 
un™Addr
 );

155 
un™Addr
 <<ğ
b™Widths
[
MEM_RANK
];

158 
MEM_CHANNEL
:

159 
phyAddr
 +ğĞ
chªÃl
 * 
un™Addr
 );

160 
un™Addr
 <<ğ
b™Widths
[
MEM_CHANNEL
];

163 
MEM_SUBARRAY
:

164 
phyAddr
 +ğĞ
sub¬¿y
 * 
un™Addr
 );

165 
un™Addr
 <<ğ
b™Widths
[
MEM_SUBARRAY
];

168 
MEM_UNKNOWN
:

170 
¡d
::
û¼
 << "Add»s T¿n¦©Ü: NØ·¹™iÚ found fÜ‡dd»s " << std::
’dl
;

175  
phyAddr
;

176 
	}
}

183 
	gAdd»ssT¿n¦©Ü
::
	$S‘BusWidth
Ğ
b™s
 )

185 
busWidth
 = 
b™s
;

186 
	}
}

193 
	gAdd»ssT¿n¦©Ü
::
	$S‘Bur¡L’gth
Ğ
b—t
 )

195 
bur¡L’gth
 = 
b—t
;

196 
	}
}

202 
	gAdd»ssT¿n¦©Ü
::
	$T¿n¦©e
Ğ
NVMašReque¡
 *
»que¡
, 
ušt64_t
 *
row
, ušt64_ˆ*
cŞ
, ušt64_ˆ*
bªk
,

203 
ušt64_t
 *
¿nk
, ušt64_ˆ*
chªÃl
, ušt64_ˆ*
sub¬¿y
 )

205  
	`T¿n¦©e
Ğ
»que¡
->
add»ss
.
	`G‘PhysiÿlAdd»ss
Ğ), 
row
, 
cŞ
, 
bªk
, 
¿nk
, 
chªÃl
, 
sub¬¿y
 );

206 
	}
}

213 
	gAdd»ssT¿n¦©Ü
::
	$T¿n¦©e
Ğ
ušt64_t
 
add»ss
, ušt64_ˆ*
row
, ušt64_ˆ*
cŞ
, ušt64_ˆ*
bªk
,

214 
ušt64_t
 *
¿nk
, ušt64_ˆ*
chªÃl
, ušt64_ˆ*
sub¬¿y
 )

216 
ušt64_t
 
»fAdd»ss
;

217 
MemÜyP¬t™iÚ
 
·¹
ğ
MEM_UNKNOWN
;

219 
ušt64_t
 *
·¹™iÚs
[6] = { 
row
, 
cŞ
, 
bªk
, 
¿nk
, 
chªÃl
, 
sub¬¿y
 };

221 ifĞ
m‘hod
 =ğ
NULL
 )

223 
¡d
::
û¼
 << "Divid” T¿n¦©Ü: T¿n¦©iÚ m‘hod‚Ù s³cif›d!" << std::
’dl
;

227 
busOff£tB™s
 = 
	`mlog2
Ğ
busWidth
 / 8 );

228 
bur¡B™s
 = 
	`mlog2
Ğ(
busWidth
 * 
bur¡L’gth
) / 8 );

229 
lowCŞB™s
 = 
bur¡B™s
 - 
busOff£tB™s
;

232 
»fAdd»ss
 = 
add»ss
 >> 
busOff£tB™s
;

235 
»fAdd»ss
 >>ğ
lowCŞB™s
;

238 if(!
f›ldOrd”In™ed
)

240 
f›ldOrd”
 = 
m‘hod
->
	`G‘Ord”
();

241 
f›ldOrd”In™ed
 = 
Œue
;

244 if(!
b™WidthsIn™ed
)

246 
b™Widths
 = 
m‘hod
->
	`G‘B™Widths
();

247 
b™WidthsIn™ed
 = 
Œue
;

251  
i
 = 0; i < 6; i++ )

253 
	`FšdOrd”_modif›d
Ğ
i
, &
·¹
 );

258 if(
·¹
!=
MEM_UNKNOWN
)

259 *
·¹™iÚs
[
·¹
] = 
	`Modulo_modif›d
(
»fAdd»ss
,part);

262 
¡d
::
û¼
<<"Add»s T¿n¦©Ü:unknowÀmemÜy"<<¡d::
’dl
;

272 
	}
}

274 
ušt64_t
 
	gAdd»ssT¿n¦©Ü
::
	$T¿n¦©e
Ğ
NVMašReque¡
 *
»que¡
 )

276 
ušt64_t
 
rv
 = 0;

278 ifĞ
»que¡
->
add»ss
.
	`IsT¿n¦©ed
( ) )

280  
deçuÉF›ld
 )

282 
ROW_FIELD
:

283 
rv
 = 
»que¡
->
add»ss
.
	`G‘Row
( );

286 
COL_FIELD
:

287 
rv
 = 
»que¡
->
add»ss
.
	`G‘CŞ
( );

290 
BANK_FIELD
:

291 
rv
 = 
»que¡
->
add»ss
.
	`G‘Bªk
( );

294 
RANK_FIELD
:

295 
rv
 = 
»que¡
->
add»ss
.
	`G‘Rªk
( );

298 
CHANNEL_FIELD
:

299 
rv
 = 
»que¡
->
add»ss
.
	`G‘ChªÃl
( );

302 
SUBARRAY_FIELD
:

303 
rv
 = 
»que¡
->
add»ss
.
	`G‘SubA¼ay
( );

306 
NO_FIELD
:

308 
rv
 = 0;

314 
rv
 = 
	`T¿n¦©e
Ğ
»que¡
->
add»ss
.
	`G‘PhysiÿlAdd»ss
( ) );

317  
rv
;

318 
	}
}

321 
ušt64_t
 
	gAdd»ssT¿n¦©Ü
::
	$T¿n¦©e
Ğ
ušt64_t
 
add»ss
 )

323 
ušt64_t
 
row
, 
cŞ
, 
bªk
, 
¿nk
, 
chªÃl
, 
sub¬¿y
;

324 
ušt64_t
 
rv
;

326 
	`T¿n¦©e
Ğ
add»ss
, &
row
, &
cŞ
, &
bªk
, &
¿nk
, &
chªÃl
, &
sub¬¿y
 );

328  
deçuÉF›ld
 )

330 
ROW_FIELD
:

331 
rv
 = 
row
;

334 
COL_FIELD
:

335 
rv
 = 
cŞ
;

338 
BANK_FIELD
:

339 
rv
 = 
bªk
;

342 
RANK_FIELD
:

343 
rv
 = 
¿nk
;

346 
CHANNEL_FIELD
:

347 
rv
 = 
chªÃl
;

350 
SUBARRAY_FIELD
:

351 
rv
 = 
sub¬¿y
;

354 
NO_FIELD
:

356 
rv
 = 0;

360  
rv
;

361 
	}
}

363 
	gAdd»ssT¿n¦©Ü
::
	$S‘DeçuÉF›ld
Ğ
T¿n¦©iÚF›ld
 
f
 )

365 
deçuÉF›ld
 = 
f
;

366 
	}
}

369 
ušt64_t
 
	gAdd»ssT¿n¦©Ü
::
	$Divide_modif›d
Ğ
ušt64_t
 
·¹Size
, 
MemÜyP¬t™iÚ
 
·¹™iÚ
 )

371 
ušt64_t
 
»tSize
 = 
·¹Size
;

373 ifĞ
·¹™iÚ
 =ğ
MEM_ROW
 )

374 
»tSize
 >>ğ
b™Widths
[
MEM_ROW
];

375 ifĞ
·¹™iÚ
 =ğ
MEM_COL
 )

376 
»tSize
 >>ğĞ
b™Widths
[
MEM_COL
] );

377 ifĞ
·¹™iÚ
 =ğ
MEM_BANK
 )

378 
»tSize
 >>ğ
b™Widths
[
MEM_BANK
];

379 ifĞ
·¹™iÚ
 =ğ
MEM_RANK
 )

380 
»tSize
 >>ğ
b™Widths
[
MEM_RANK
];

381 ifĞ
·¹™iÚ
 =ğ
MEM_CHANNEL
 )

382 
»tSize
 >>ğ
b™Widths
[
MEM_CHANNEL
];

383 ifĞ
·¹™iÚ
 =ğ
MEM_SUBARRAY
 )

384 
»tSize
 >>ğ
b™Widths
[
MEM_SUBARRAY
];

386 
¡d
::
cout
 << "Divid” T¿n¦©Ü: W¬nšg: Inv®id…¬t™iÚ " << ()
·¹™iÚ
 << std::
’dl
;

388  
»tSize
;

389 
	}
}

394 
ušt64_t
 
	gAdd»ssT¿n¦©Ü
::
	$Divide
Ğ
ušt64_t
 
·¹Size
, 
MemÜyP¬t™iÚ
 
·¹™iÚ
 )

396 
ušt64_t
 
»tSize
 = 
·¹Size
;

397 
chªÃlB™s
, 
¿nkB™s
, 
bªkB™s
, 
rowB™s
, 
cŞB™s
, 
sub¬¿yB™s
;

399 
m‘hod
->
	`G‘B™Widths
Ğ&
rowB™s
, &
cŞB™s
, &
bªkB™s
,

400 &
¿nkB™s
, &
chªÃlB™s
, &
sub¬¿yB™s
 );

402 ifĞ
·¹™iÚ
 =ğ
MEM_ROW
 )

403 
»tSize
 >>ğ
rowB™s
;

404 ifĞ
·¹™iÚ
 =ğ
MEM_COL
 )

405 
»tSize
 >>ğĞ
cŞB™s
 );

406 ifĞ
·¹™iÚ
 =ğ
MEM_BANK
 )

407 
»tSize
 >>ğ
bªkB™s
;

408 ifĞ
·¹™iÚ
 =ğ
MEM_RANK
 )

409 
»tSize
 >>ğ
¿nkB™s
;

410 ifĞ
·¹™iÚ
 =ğ
MEM_CHANNEL
 )

411 
»tSize
 >>ğ
chªÃlB™s
;

412 ifĞ
·¹™iÚ
 =ğ
MEM_SUBARRAY
 )

413 
»tSize
 >>ğ
sub¬¿yB™s
;

415 
¡d
::
cout
 << "Divid” T¿n¦©Ü: W¬nšg: Inv®id…¬t™iÚ " << ()
·¹™iÚ
 << std::
’dl
;

417  
»tSize
;

418 
	}
}

426 
ušt64_t
 
	gAdd»ssT¿n¦©Ü
::
	$Modulo_modif›d
Ğ
ušt64_t
 &
·tŸlAddr
,
MemÜyP¬t™iÚ
 
·¹™iÚ
)

429 
ušt64_t
 
»tV®
=0;

430 
ušt64_t
 
moduloSize
 = 1;

432 ifĞ
·¹™iÚ
 =ğ
MEM_ROW
 )

433 
moduloSize
 <<ğ
b™Widths
[
MEM_ROW
];

434 ifĞ
·¹™iÚ
 =ğ
MEM_COL
 )

435 
moduloSize
 <<ğĞ
b™Widths
[
MEM_COL
] );

436 ifĞ
·¹™iÚ
 =ğ
MEM_BANK
 )

437 
moduloSize
 <<ğ
b™Widths
[
MEM_BANK
];

438 ifĞ
·¹™iÚ
 =ğ
MEM_RANK
 )

439 
moduloSize
 <<ğ
b™Widths
[
MEM_RANK
];

440 ifĞ
·¹™iÚ
 =ğ
MEM_CHANNEL
 )

441 
moduloSize
 <<ğ
b™Widths
[
MEM_CHANNEL
];

442 ifĞ
·¹™iÚ
 =ğ
MEM_SUBARRAY
 )

443 
moduloSize
 <<ğ
b™Widths
[
MEM_SUBARRAY
];

445 
¡d
::
cout
 << "ModulØT¿n¦©Ü: W¬nšg: Inv®id…¬t™iÚ " << ()
·¹™iÚ
 << std::
’dl
;

447 
»tV®
 = 
·tŸlAddr
 % 
moduloSize
;

448 
·tŸlAddr
 /ğ
moduloSize
;

450  
»tV®
;

451 
	}
}

454 
ušt64_t
 
	gAdd»ssT¿n¦©Ü
::
	$Modulo
Ğ
ušt64_t
 
·¹ŸlAddr
, 
MemÜyP¬t™iÚ
 
·¹™iÚ
 )

456 
ušt64_t
 
»tV®
 = 
·¹ŸlAddr
;

457 
chªÃlB™s
, 
¿nkB™s
, 
bªkB™s
, 
rowB™s
, 
cŞB™s
, 
sub¬¿yB™s
;

459 
m‘hod
->
	`G‘B™Widths
Ğ&
rowB™s
, &
cŞB™s
, &
bªkB™s
,

460 &
¿nkB™s
, &
chªÃlB™s
, &
sub¬¿yB™s
 );

462 
ušt64_t
 
moduloSize
 = 1;

464 ifĞ
·¹™iÚ
 =ğ
MEM_ROW
 )

465 
moduloSize
 <<ğ
rowB™s
;

466 ifĞ
·¹™iÚ
 =ğ
MEM_COL
 )

467 
moduloSize
 <<ğĞ
cŞB™s
 );

468 ifĞ
·¹™iÚ
 =ğ
MEM_BANK
 )

469 
moduloSize
 <<ğ
bªkB™s
;

470 ifĞ
·¹™iÚ
 =ğ
MEM_RANK
 )

471 
moduloSize
 <<ğ
¿nkB™s
;

472 ifĞ
·¹™iÚ
 =ğ
MEM_CHANNEL
 )

473 
moduloSize
 <<ğ
chªÃlB™s
;

474 ifĞ
·¹™iÚ
 =ğ
MEM_SUBARRAY
 )

475 
moduloSize
 <<ğ
sub¬¿yB™s
;

477 
¡d
::
cout
 << "ModulØT¿n¦©Ü: W¬nšg: Inv®id…¬t™iÚ " << ()
·¹™iÚ
 << std::
’dl
;

479 
»tV®
 = 
·¹ŸlAddr
 % 
moduloSize
;

481  
»tV®
;

482 
	}
}

490 
	gAdd»ssT¿n¦©Ü
::
	$FšdOrd”_modif›d
Ğ
Üd”
,
MemÜyP¬t™iÚ
 *
p
)

492 if(
Üd”
 =ğ
f›ldOrd”
[
MEM_ROW
])

493 *
p
 = 
MEM_ROW
;

494 if(
Üd”
 =ğ
f›ldOrd”
[
MEM_COL
])

495 *
p
 = 
MEM_COL
;

496 if(
Üd”
 =ğ
f›ldOrd”
[
MEM_BANK
])

497 *
p
 = 
MEM_BANK
;

498 if(
Üd”
 =ğ
f›ldOrd”
[
MEM_RANK
])

499 *
p
 = 
MEM_RANK
;

500 if(
Üd”
 =ğ
f›ldOrd”
[
MEM_CHANNEL
])

501 *
p
 = 
MEM_CHANNEL
;

502 if(
Üd”
 =ğ
f›ldOrd”
[
MEM_SUBARRAY
])

503 *
p
 = 
MEM_SUBARRAY
;

506 *
p
 = 
MEM_UNKNOWN
;

507 
¡d
::
û¼
<<"Ad»ssT¿n¦©iÚ : NO ord”"<<
Üd”
<<¡d::
’dl
;

510 
	}
}

512 
	gAdd»ssT¿n¦©Ü
::
	$FšdOrd”
Ğ
Üd”
, 
MemÜyP¬t™iÚ
 *
p
 )

514 
rowOrd”
, 
cŞOrd”
, 
bªkOrd”
, 
¿nkOrd”
, 
chªÃlOrd”
, 
sub¬¿yOrd”
;

516 
m‘hod
->
	`G‘Ord”
Ğ&
rowOrd”
, &
cŞOrd”
, &
bªkOrd”
,

517 &
¿nkOrd”
, &
chªÃlOrd”
, &
sub¬¿yOrd”
 );

519 ifĞ
rowOrd”
 =ğ
Üd”
 )

520 *
p
 = 
MEM_ROW
;

521 ifĞ
cŞOrd”
 =ğ
Üd”
 )

522 *
p
 = 
MEM_COL
;

523 ifĞ
bªkOrd”
 =ğ
Üd”
 )

524 *
p
 = 
MEM_BANK
;

525 ifĞ
¿nkOrd”
 =ğ
Üd”
 )

526 *
p
 = 
MEM_RANK
;

527 ifĞ
chªÃlOrd”
 =ğ
Üd”
 )

528 *
p
 = 
MEM_CHANNEL
;

529 ifĞ
sub¬¿yOrd”
 =ğ
Üd”
 )

530 *
p
 = 
MEM_SUBARRAY
;

533 *
p
 = 
MEM_UNKNOWN
;

534 
¡d
::
û¼
 << "Add»s T¿n¦©Ü: NØÜd” " << 
Üd”
 << std::
’dl
 << "Row = " << 
rowOrd”


535 << " CŞumÀğ" << 
cŞOrd”
 << " Bªk = " << 
bªkOrd”
 << " Rªk = " << 
¿nkOrd”


536 << " ChªÃÈğ" << 
chªÃlOrd”
 << " SubA¼ay = " << 
sub¬¿yOrd”
 << 
¡d
::
’dl
;

538 
	}
}

541 
	gAdd»ssT¿n¦©Ü
::
	$S‘Sts
Ğ
Sts
 *
s
 )

543 
¡©s
 = 
s
;

544 
	}
}

547 
Sts
 *
	gAdd»ssT¿n¦©Ü
::
	$G‘Sts
( )

549  
¡©s
;

550 
	}
}

553 
	gAdd»ssT¿n¦©Ü
::
StName
Ğ
¡d
::
¡ršg
 
Çme
 )

555 
¡©Name
 = 
Çme
;

559 
	g¡d
::
¡ršg
 
Add»ssT¿n¦©Ü
::
	$StName
( )

561  
¡©Name
;

562 
	}
}

	@src/AddressTranslator.h

36 #iâdeà
__ADDRESSTRANSLATOR_H__


37 
	#__ADDRESSTRANSLATOR_H__


	)

39 
	~"¤c/T¿n¦©iÚM‘hod.h
"

40 
	~"¤c/CÚfig.h
"

41 
	~"¤c/Sts.h
"

42 
	~"šşude/NVMašReque¡.h
"

43 
	#FIELD_NUM
 6

	)

45 
Çme¥aû
 
	gNVM
 {

49 
	gNO_FIELD
,

50 
	gROW_FIELD
,

51 
	gCOL_FIELD
,

52 
	gBANK_FIELD
,

53 
	gRANK_FIELD
,

54 
	gCHANNEL_FIELD
,

55 
	gSUBARRAY_FIELD
,

56 } 
	tT¿n¦©iÚF›ld
;

58 şas 
	cAdd»ssT¿n¦©Ü


60 
	gpublic
:

62 
Add»ssT¿n¦©Ü
( );

63 
	gvœtu®
 ~
Add»ssT¿n¦©Ü
( );

65 
vœtu®
 
S‘CÚfig
Ğ
CÚfig
 * , 
boŞ
 = 
Œue
 ) { }

67 
S‘BusWidth
( );

68 
S‘Bur¡L’gth
( );

69 
S‘T¿n¦©iÚM‘hod
Ğ
T¿n¦©iÚM‘hod
 *
m
 );

70 
T¿n¦©iÚM‘hod
 *
G‘T¿n¦©iÚM‘hod
( );

72 
vœtu®
 
T¿n¦©e
Ğ
ušt64_t
 
add»ss
, ušt64_ˆ*
row
, ušt64_ˆ*
cŞ
, ušt64_ˆ*
bªk
, ušt64_ˆ*
¿nk
, ušt64_ˆ*
chªÃl
, ušt64_ˆ*
sub¬¿y
 );

73 
vœtu®
 
T¿n¦©e
Ğ
NVMašReque¡
 *
»que¡
, 
ušt64_t
 *
row
, ušt64_ˆ*
cŞ
, ušt64_ˆ*
bªk
,

74 
ušt64_t
 *
¿nk
, ušt64_ˆ*
chªÃl
, ušt64_ˆ*
sub¬¿y
 );

76 
vœtu®
 
ušt64_t
 
Rev”£T¿n¦©e
ĞcÚ¡ ušt64_t& 
row
, cÚ¡ ušt64_t& 
cŞ
,

77 cÚ¡ 
ušt64_t
& 
bªk
, cÚ¡ ušt64_t& 
¿nk
,

78 cÚ¡ 
ušt64_t
& 
chªÃl
, cÚ¡ ušt64_t& 
sub¬¿y
 );

80 
vœtu®
 
ušt64_t
 
T¿n¦©e
Ğušt64_ˆ
add»ss
 );

81 
vœtu®
 
ušt64_t
 
T¿n¦©e
Ğ
NVMašReque¡
 *
»que¡
 );

82 
vœtu®
 
S‘DeçuÉF›ld
Ğ
T¿n¦©iÚF›ld
 
f
 );

84 
S‘Sts
Ğ
Sts
 *
¡©s
 );

85 
Sts
 *
G‘Sts
( );

87 
StName
Ğ
¡d
::
¡ršg
 
Çme
 );

88 
	g¡d
::
¡ršg
 
StName
( );

90 
vœtu®
 
Regi¡”Sts
( ) { }

91 
vœtu®
 
C®cuÏ‹Sts
( ) { }

93 
vœtu®
 
C»©eCheckpošt
Ğ
¡d
::
¡ršg
 ) { }

94 
vœtu®
 
Re¡ÜeCheckpošt
Ğ
¡d
::
¡ršg
 ) { }

96 
´iv©e
:

97 
T¿n¦©iÚM‘hod
 *
m‘hod
;

98 
T¿n¦©iÚF›ld
 
	gdeçuÉF›ld
;

99 
	gbusWidth
;

100 
	gbur¡L’gth
;

101 
	glowCŞB™s
;

103 *
	gb™Widths
;

104 *
	gf›ldOrd”
;

105 
boŞ
 
	gb™WidthsIn™ed
;

106 
boŞ
 
	gf›ldOrd”In™ed
;

110 
Sts
 *
	g¡©s
;

111 
	g¡d
::
¡ršg
 
¡©Name
;

113 
	g´Ùeùed
:

114 
ušt64_t
 
Divide
Ğušt64_ˆ
·¹Size
, 
MemÜyP¬t™iÚ
 
·¹™iÚ
 );

115 
ušt64_t
 
Modulo
Ğušt64_ˆ
·¹ŸlAddr
, 
MemÜyP¬t™iÚ
 
·¹™iÚ
 );

116 
FšdOrd”
Ğ
Üd”
, 
MemÜyP¬t™iÚ
 *
p
 );

119 
ušt64_t
 
Modulo_modif›d
Ğušt64_ˆ&
·¹ŸlAddr
, 
MemÜyP¬t™iÚ
 
·¹™iÚ
 );

121 
FšdOrd”_modif›d
Ğ
Üd”
, 
MemÜyP¬t™iÚ
 *
p
 );

123 
ušt64_t
 
Divide_modif›d
Ğušt64_ˆ
·¹Size
, 
MemÜyP¬t™iÚ
 
·¹™iÚ
 );

	@src/Bank.cpp

36 
	~"¤c/Bªk.h
"

38 
usšg
 
Çme¥aû
 
	gNVM
;

40 
	gBªk
::
	$Bªk
(){

42 
this
->
idË
=
Œue
;

43 
	}
}

49 
	gBªk
::
	$S‘Id
Ğ
ncouÁ”_t
 
id
 )

51 
bªkId
 = 
id
;

52 
	}
}

54 
ncouÁ”_t
 
	gBªk
::
	$G‘Id
( )

56  
bªkId
;

57 
	}
}

59 
	gBªk
::
S‘Name
(
¡d
::
¡ršg
 
bªkName
)

61 
this
->
bªkName
 = bankName;

64 
	g¡d
::
¡ršg
 
Bªk
::
	$G‘Name
()

66  
this
->
bªkName
;

67 
	}
}

69 
boŞ
 
	gBªk
::
	$IdË
( )

71  
idË
;

72 
	}
}

	@src/Bank.h

36 #iâdeà
__BANK_H__


37 
	#__BANK_H__


	)

39 
	~"¤c/NVMObjeù.h
"

40 
	~"¤c/CÚfig.h
"

42 
Çme¥aû
 
	gNVM
 {

44 şas 
	cBªk
 : 
public
 
NVMObjeù


46 
public
:

47 
Bªk
( );

48 ~
Bªk
( ) { }

50 
vœtu®
 
S‘CÚfig
Ğ
CÚfig
 * , 
boŞ
 ) { }

52 
vœtu®
 
boŞ
 
IdË
( ) = 0;

53 
vœtu®
 
G‘EÃrgy
( & , & , &, & ) { }

54 
vœtu®
 
ncouÁ”_t
 
G‘R—ds
( ) {  0; }

55 
vœtu®
 
ncouÁ”_t
 
G‘Wr™es
( ) {  0; }

57 
vœtu®
 
ncyşe_t
 
G‘NextAùiv©e
( ) {  0; }

58 
vœtu®
 
ncyşe_t
 
G‘NextR—d
( ) {  0; }

59 
vœtu®
 
ncyşe_t
 
G‘NextWr™e
( ) {  0; }

60 
vœtu®
 
ncyşe_t
 
G‘NextP»ch¬ge
( ) {  0; }

61 
vœtu®
 
ncyşe_t
 
G‘NextReäesh
( ) {  0; }

62 
vœtu®
 
ncyşe_t
 
G‘NextPow”Down
( ) {  0; }

64 
vœtu®
 
S‘Id
Ğ
ncouÁ”_t
 );

65 
vœtu®
 
ncouÁ”_t
 
G‘Id
( );

67 
vœtu®
 
S‘Name
 (
¡d
::
¡ršg
 
bªkName
);

68 
vœtu®
 
	g¡d
::
¡ršg
 
G‘Name
();

70 
	g´Ùeùed
:

71 
ncouÁ”_t
 
bªkId
;

72 
	g¡d
::
¡ršg
 
bªkName
;

73 
boŞ
 
	gidË
;

	@src/Config.cpp

36 
	~<io¡»am
>

37 
	~<f¡»am
>

38 
	~<c¡ršg
>

39 
	~<c¡dlib
>

40 
	~<as£¹.h
>

41 
	~<lim™s
>

42 
	~"¤c/CÚfig.h
"

44 
usšg
 
Çme¥aû
 
	gNVM
;

46 
	gCÚfig
::
	$CÚfig
( )

48 
simPŒ
 = 
NULL
;

49 
u£DebugLog
 = 
çl£
;

50 
	}
}

53 
	gCÚfig
::~
	$CÚfig
( )

55 
	}
}

57 
CÚfig
::
	$CÚfig
(cÚ¡ 
CÚfig
& 
cÚf
)

59 
¡d
::
m­
<¡d::
¡ršg
, std::¡ršg>::
™”©Ü
 
™
;

61 
¡d
::
m­
<¡d::
¡ršg
, std::¡ršg> 
	`tmpM­
 (
cÚf
.
v®ues
);

63  
™
 = 
tmpM­
.
	`begš
(); iˆ!ğtmpM­.
	`’d
(); it++ )

65 
v®ues
.
	`š£¹
Ğ
¡d
::
·œ
<¡d::
¡ršg
, std::¡ršg>Ğ
™
->
fœ¡
, it->
£cÚd
 ) );

68 
feName
 = 
cÚf
.fileName;

69 
simPŒ
 = 
cÚf
.simPtr;

71 
¡d
::
veùÜ
<¡d::
¡ršg
> 
	`tmpVec
(
cÚf
.
hookLi¡
);

72 
¡d
::
veùÜ
<¡d::
¡ršg
>::
™”©Ü
 
v™
;

74  
v™
 = 
tmpVec
.
	`begš
(); v™ !ğtmpVec.
	`’d
(); vit++ )

76 
hookLi¡
.
	`push_back
Ğ(*
v™
) );

78 
	`S‘DebugLog
( );

79 
	}
}

82 
	g¡d
::
¡ršg
 
CÚfig
::
	$G‘FeName
( )

84  
this
->
feName
;

85 
	}
}

88 
	gCÚfig
::
R—d
Ğ
¡d
::
¡ršg
 
f’ame
 )

90 
¡d
::
¡ršg
 
lše
;

91 
	g¡d
::
if¡»am
 
cÚfigFe
Ğ
f’ame
.
c_¡r
( ) );

92 
	g¡d
::
m­
<
¡d
::
¡ršg
, std::¡ršg>::
™”©Ü
 
i
;

93 
	g¡d
::
¡ršg
 
sublše
;

95 
	gthis
->
	gfeName
 = 
f’ame
;

97 ifĞ
	gcÚfigFe
.
is_İ’
( ) )

99  !
	gcÚfigFe
.
eof
( ) )

101 
g‘lše
Ğ
cÚfigFe
, 
lše
 );

106 
size_t
 
	gcPos
 = 
lše
.
fšd_fœ¡_nÙ_of
( " \t\r\n" );

109 ifĞ
	gcPos
 =ğ
¡d
::
¡ršg
::
Åos
 )

115 ifĞ
	glše
[
cPos
] == ';' )

121 
size_t
 
	gcŞÚPos
 = 
lše
.
fšd_fœ¡_of
( ";" );

124 ifĞ
	gcŞÚPos
 =ğ
¡d
::
¡ršg
::
Åos
 )

126 
sublše
 = 
lše
.
sub¡r
Ğ
cPos
 );

131 
as£¹
Ğ
cŞÚPos
 > 
cPos
 );

134 
	gsublše
 = 
lše
.
sub¡r
Ğ
cPos
, (
cŞÚPos
 - cPos) );

139 *
	gşše
;

140 
	gşše
 = 
Ãw
 [
sublše
.
size
( ) + 1];

141 
¡rıy
Ğ
şše
, 
sublše
.
c_¡r
( ) );

143 *
	gtok’s
 = 
¡¹ok
Ğ
şše
, " " );

145 
	g¡d
::
¡ršg
 
ty
 = 
¡d
::¡ršgĞ
tok’s
 );

147 
	gtok’s
 = 
¡¹ok
Ğ
NULL
, " " );

149 
	gi
 = 
v®ues
.
fšd
Ğ
ty
 );

150 ifĞ
	gi
 !ğ
v®ues
.
’d
( ) )

151 
v®ues
.
”a£
Ğ
i
 );

153 ifĞ
	gtok’s
 !ğ
NULL
 )

156 ifĞ
ty
 == "AddHook" )

158 
hookLi¡
.
push_back
Ğ
tok’s
 );

162 
	gv®ues
.
š£¹
Ğ
¡d
::
·œ
<¡d::
¡ršg
,

163 
¡d
::
¡ršg
>Ğ
ty
, 
tok’s
 ) );

168 
	g¡d
::
cout
 << "CÚfig: Missšg v®ufÜ key " << 
ty
 << 
¡d
::
’dl
;

169 
	gv®ues
.
š£¹
Ğ
¡d
::
·œ
<¡d::
¡ršg
, std::¡ršg>Ğ
ty
, "" ) );

176 
	g¡d
::
cout
 << "NVMain: Could‚ot„ead configuration file: "

177 << 
f’ame
 << 
¡d
::
’dl
;

178 
ex™
(1);

181 
S‘DebugLog
( );

184 
boŞ
 
	gCÚfig
::
KeyExi¡s
Ğ
¡d
::
¡ršg
 
key
 )

186 
¡d
::
m­
<¡d::
¡ršg
, 
	g¡d
::¡ršg>::
™”©Ü
 
i
;

188 ifĞ
	gv®ues
.
em±y
( ) )

189  
	gçl£
;

191 
	gi
 = 
v®ues
.
fšd
Ğ
key
 );

193 ifĞ
	gi
 =ğ
v®ues
.
’d
( ) )

194  
çl£
;

196  
	gŒue
;

200 
	gCÚfig
::
G‘SŒšg
Ğ
¡d
::
¡ršg
 
key
, std::¡ršg& 
v®ue
 )

203 ifĞ!
KeyExi¡s
Ğ
key
 ) && !
w¬Ãd
.
couÁ
( key ) )

205 
¡d
::
cout
 << "CÚfig: W¬nšg: Key " << 
key
 << " i nÙ s‘. Usšg '" << 
v®ue


206 << "'‡ thdeçuÉ. PËa£ cÚfigu»hi v®uiàthi i wrÚg." << 
¡d
::
’dl
;

207 
	gw¬Ãd
.
š£¹
Ğ
key
 );

209 ifĞ
KeyExi¡s
Ğ
key
 ) )

211 
	gv®ue
 = 
G‘SŒšg
Ğ
key
 );

216 
	g¡d
::
¡ršg
 
CÚfig
::
G‘SŒšg
Ğ
¡d
::¡ršg 
key
 )

218 
¡d
::
m­
<¡d::
¡ršg
, 
	g¡d
::¡ršg>::
™”©Ü
 
i
;

219 
	g¡d
::
¡ršg
 
v®ue
;

221 ifĞ
	gv®ues
.
em±y
( ) )

223 
	g¡d
::
û¼
 << "CÚfigu¿tiÚ ha nÙ b“À»ad y‘." << 
¡d
::
’dl
;

227 
	gi
 = 
v®ues
.
fšd
Ğ
key
 );

229 ifĞ!
KeyExi¡s
Ğ
key
 ) && !
	gw¬Ãd
.
couÁ
( key ) )

231 
	g¡d
::
cout
 << "CÚfig: W¬nšg: Key " << 
key
 << " i nÙ s‘. Usšg ''‡ thdeçuÉ. PËa£ cÚfigu»hi v®uiàthi i wrÚg." << 
¡d
::
’dl
;

232 
	gw¬Ãd
.
š£¹
Ğ
key
 );

243 ifĞ
	gi
 =ğ
v®ues
.
’d
( ) )

244 
v®ue
 = "";

246 
	gv®ue
 = 
i
->
£cÚd
;

248  
	gv®ue
;

252 
	gCÚfig
::
S‘SŒšg
Ğ
¡d
::
¡ršg
 
key
, std::¡ršg 
v®ue
 )

254 
v®ues
.
š£¹
Ğ
¡d
::
·œ
<¡d::
¡ršg
, std::¡ršg>Ğ
key
, 
v®ue
 ) );

257 
	gCÚfig
::
G‘V®ueUL
Ğ
¡d
::
¡ršg
 
key
, 
ušt64_t
& 
v®ue
 )

259 ifĞ!
KeyExi¡s
Ğ
key
 ) && !
	gw¬Ãd
.
couÁ
( key ) )

261 
	g¡d
::
cout
 << "CÚfig: W¬nšg: Key " << 
key
 << " i nÙ s‘. Usšg '" << 
v®ue


262 << "'‡ thdeçuÉ. PËa£ cÚfigu»hi v®uiàthi i wrÚg." << 
¡d
::
’dl
;

263 
	gw¬Ãd
.
š£¹
Ğ
key
 );

265 ifĞ
KeyExi¡s
Ğ
key
 ) )

267 
	gv®ue
 = 
G‘V®ueUL
Ğ
key
 );

271 
ušt64_t
 
	gCÚfig
::
G‘V®ueUL
Ğ
¡d
::
¡ršg
 
key
 )

273 
¡d
::
m­
<¡d::
¡ršg
, 
	g¡d
::¡ršg>::
™”©Ü
 
i
;

274 
ušt64_t
 
	gv®ue
;

276 ifĞ
	gv®ues
.
em±y
( ) )

278 
	g¡d
::
û¼
 << "CÚfigu¿tiÚ ha nÙ b“À»ad y‘." << 
¡d
::
’dl
;

279  
	g¡d
::
num”ic_lim™s
<
ušt64_t
>::
max
( );

282 
	gi
 = 
v®ues
.
fšd
Ğ
key
 );

284 ifĞ!
KeyExi¡s
Ğ
key
 ) && !
	gw¬Ãd
.
couÁ
( key ) )

286 
	g¡d
::
cout
 << "CÚfig: W¬nšg: Key " << 
key
 << " i nÙ s‘. Usšg '-1'‡ thdeçuÉ. PËa£ cÚfigu»hi v®uiàthi i wrÚg." << 
¡d
::
’dl
;

287 
	gw¬Ãd
.
š£¹
Ğ
key
 );

297 ifĞ
	gi
 =ğ
v®ues
.
’d
( ) )

298 
v®ue
 = 
¡d
::
num”ic_lim™s
<
ušt64_t
>::
max
( );

300 
	gv®ue
 = 
¡¹oul
Ğ
i
->
£cÚd
.
c_¡r
Ğ), 
NULL
, 10 );

302  
	gv®ue
;

305 
	gCÚfig
::
G‘V®ue
Ğ
¡d
::
¡ršg
 
key
, & 
v®ue
 )

307 ifĞ!
KeyExi¡s
Ğ
key
 ) && !
	gw¬Ãd
.
couÁ
( key ) )

309 
	g¡d
::
cout
 << "CÚfig: W¬nšg: Key " << 
key
 << " i nÙ s‘. Usšg '" << 
v®ue


310 << "'‡ thdeçuÉ. PËa£ cÚfigu»hi v®uiàthi i wrÚg." << 
¡d
::
’dl
;

311 
	gw¬Ãd
.
š£¹
Ğ
key
 );

313 ifĞ
KeyExi¡s
Ğ
key
 ) )

315 
	gv®ue
 = 
G‘V®ue
Ğ
key
 );

319 
	gCÚfig
::
G‘V®ue
Ğ
¡d
::
¡ršg
 
key
 )

321 
¡d
::
m­
<¡d::
¡ršg
, 
	g¡d
::¡ršg>::
™”©Ü
 
i
;

322 
	gv®ue
;

324 ifĞ
	gv®ues
.
em±y
( ) )

326 
	g¡d
::
û¼
 << "CÚfigu¿tiÚ ha nÙ b“À»ad y‘." << 
¡d
::
’dl
;

330 
	gi
 = 
v®ues
.
fšd
Ğ
key
 );

332 ifĞ!
KeyExi¡s
Ğ
key
 ) && !
	gw¬Ãd
.
couÁ
( key ) )

334 
	g¡d
::
cout
 << "CÚfig: W¬nšg: Key " << 
key
 << " i nÙ s‘. Usšg '-1'‡ thdeçuÉ. PËa£ cÚfigu»hi v®uiàthi i wrÚg." << 
¡d
::
’dl
;

335 
	gw¬Ãd
.
š£¹
Ğ
key
 );

345 ifĞ
	gi
 =ğ
v®ues
.
’d
( ) )

346 
v®ue
 = -1;

348 
	gv®ue
 = 
©oi
Ğ
i
->
£cÚd
.
c_¡r
( ) );

350  
	gv®ue
;

353 
	gCÚfig
::
S‘V®ue
Ğ
¡d
::
¡ršg
 
key
, std::¡ršg 
v®ue
 )

355 
¡d
::
m­
<¡d::
¡ršg
, 
	g¡d
::¡ršg>::
™”©Ü
 
i
;

357 
	gi
 = 
v®ues
.
fšd
Ğ
key
 );

359 ifĞ
	gi
 !ğ
v®ues
.
’d
( ) )

360 
v®ues
.
”a£
Ğ
i
 );

362 
	gv®ues
.
š£¹
Ğ
¡d
::
·œ
<¡d::
¡ršg
, std::¡ršg>Ğ
key
, 
v®ue
 ) );

365 
	gCÚfig
::
G‘EÃrgy
Ğ
¡d
::
¡ršg
 
key
, & 
v®ue
 )

367 ifĞ!
KeyExi¡s
Ğ
key
 ) && !
	gw¬Ãd
.
couÁ
( key ) )

369 
	g¡d
::
cout
 << "CÚfig: W¬nšg: Key " << 
key
 << " i nÙ s‘. Usšg '" << 
v®ue


370 << "'‡ thdeçuÉ. PËa£ cÚfigu»hi v®uiàthi i wrÚg." << 
¡d
::
’dl
;

371 
	gw¬Ãd
.
š£¹
Ğ
key
 );

373 ifĞ
KeyExi¡s
Ğ
key
 ) )

375 
	gv®ue
 = 
G‘EÃrgy
Ğ
key
 );

379 
	gCÚfig
::
G‘EÃrgy
Ğ
¡d
::
¡ršg
 
key
 )

381 
¡d
::
m­
<¡d::
¡ršg
, 
	g¡d
::¡ršg>::
™”©Ü
 
i
;

382 
	gv®ue
;

384 ifĞ
	gv®ues
.
em±y
( ) )

386 
	g¡d
::
û¼
 << "CÚfigu¿tiÚ ha nÙ b“À»ad y‘." << 
¡d
::
’dl
;

390 
	gi
 = 
v®ues
.
fšd
Ğ
key
 );

392 ifĞ!
KeyExi¡s
Ğ
key
 ) && !
	gw¬Ãd
.
couÁ
( key ) )

394 
	g¡d
::
cout
 << "CÚfig: W¬nšg: Key " << 
key
 << " i nÙ s‘. Usšg '-1.0'‡ thdeçuÉ. PËa£ cÚfigu»hi v®uiàthi i wrÚg." << 
¡d
::
’dl
;

395 
	gw¬Ãd
.
š£¹
Ğ
key
 );

405 ifĞ
	gi
 =ğ
v®ues
.
’d
( ) )

406 
v®ue
 = -1.0;

408 
	gv®ue
 = ()
©of
Ğ
i
->
£cÚd
.
c_¡r
( ) );

410  
	gv®ue
;

413 
	gCÚfig
::
S‘EÃrgy
Ğ
¡d
::
¡ršg
 
key
, std::¡ršg 
’”gy
 )

415 
v®ues
.
š£¹
Ğ
¡d
::
·œ
<¡d::
¡ršg
, std::¡ršg>Ğ
key
, 
’”gy
 ) );

418 
	gCÚfig
::
G‘BoŞ
Ğ
¡d
::
¡ršg
 
key
, 
boŞ
& 
v®ue
 )

420 ifĞ!
KeyExi¡s
Ğ
key
 ) && !
	gw¬Ãd
.
couÁ
( key ) )

422 
	g¡d
::
¡ršg
 
deçuÉV®ue
 = (
v®ue
 ? "true" : "false");

423 
	g¡d
::
cout
 << "CÚfig: W¬nšg: Key " << 
key
 << " i nÙ s‘. Usšg '" << 
deçuÉV®ue


424 << "'‡ thdeçuÉ. PËa£ cÚfigu»hi v®uiàthi i wrÚg." << 
¡d
::
’dl
;

425 
	gw¬Ãd
.
š£¹
Ğ
key
 );

427 ifĞ
KeyExi¡s
Ğ
key
 ) )

429 
	gv®ue
 = 
G‘BoŞ
Ğ
key
 );

433 
boŞ
 
	gCÚfig
::
G‘BoŞ
Ğ
¡d
::
¡ršg
 
key
 )

435 
boŞ
 
rv
 = 
çl£
;

437 ifĞ!
KeyExi¡s
Ğ
key
 ) && !
	gw¬Ãd
.
couÁ
( key ) )

439 
	g¡d
::
cout
 << "CÚfig: W¬nšg: Key " << 
key
 << " i nÙ s‘. Usšg 'çl£'‡ thdeçuÉ. PËa£ cÚfigu»hi v®uiàthi i wrÚg." << 
¡d
::
’dl
;

440 
	gw¬Ãd
.
š£¹
Ğ
key
 );

443 ifĞ
KeyExi¡s
Ğ
key
 ) && 
G‘SŒšg
( key ) == "true" )

444 
rv
 = 
Œue
;

446  
	grv
;

449 
	gCÚfig
::
S‘BoŞ
Ğ
¡d
::
¡ršg
 
key
, 
boŞ
 
v®ue
 )

451 ifĞ
	gv®ue
 )

452 
S‘SŒšg
Ğ
key
, "true" );

454 
S‘SŒšg
Ğ
key
, "false" );

457 
	g¡d
::
veùÜ
<
¡d
::
¡ršg
>& 
CÚfig
::
	$G‘Hooks
( )

459  
hookLi¡
;

460 
	}
}

463 
	gCÚfig
::
	$Pršt
( )

465 
¡d
::
m­
<¡d::
¡ršg
, std::¡ršg>::
™”©Ü
 
i
;

467  
i
 = 
v®ues
.
	`begš
Ğ); i !ğv®ues.
	`’d
( ); ++i)

469 
¡d
::
cout
 << (
i
->
fœ¡
è<< " = " << (i->
£cÚd
è<< std::
’dl
;

471 
	}
}

473 
	gCÚfig
::
	$S‘SimIÁ”çû
Ğ
SimIÁ”çû
 *
±r
 )

475 
simPŒ
 = 
±r
;

476 
	}
}

478 
SimIÁ”çû
 *
	gCÚfig
::
	$G‘SimIÁ”çû
( )

480  
simPŒ
;

481 
	}
}

483 
	gCÚfig
::
	$S‘DebugLog
( )

485 ifĞ
this
->
	`KeyExi¡s
( "DebugLog" ) )

487 
¡d
::
¡ršg
 
debugLogF’ame
 = 
this
->
	`G‘SŒšg
( "DebugLog" );

488 
debugLogFe
.
	`İ’
Ğ
debugLogF’ame
.
	`c_¡r
() );

489 ifĞ!
debugLogFe
.
	`is_İ’
() )

491 
¡d
::
û¼
 << "NVMaš: Could‚Ù o³Àdebug†og fe: " << 
debugLogF’ame
 << std::
’dl
;

492 
	`ex™
(1);

494 
¡d
::
cout
 << &
debugLogFe
 << std::
’dl
;

495 
¡d
::
cout
 << "Prštšg debug infÜm©iÚØ'" << 
debugLogF’ame
 << "'" << std::
’dl
;

496 
u£DebugLog
 = 
Œue
;

498 
	}
}

500 
	g¡d
::
o¡»am
 *
CÚfig
::
	$G‘DebugLog
( )

502 ifĞ
u£DebugLog
 )

503  &
debugLogFe
;

505  &
¡d
::
û¼
;

506 
	}
}

	@src/Config.h

34 #iâdeà
__CONFIG_H__


35 
	#__CONFIG_H__


	)

37 
	~<veùÜ
>

38 
	~<¡ršg
>

39 
	~<m­
>

40 
	~<£t
>

41 
	~<f¡»am
>

43 
	~"¤c/SimIÁ”çû.h
"

45 
Çme¥aû
 
	gNVM
 {

47 şas 
	cCÚfig


49 
	gpublic
:

50 
CÚfig
 ();

51 ~
CÚfig
 ();

53 
CÚfig
(cÚ¡ CÚfig& 
cÚf
);

55 
R—d
Ğ
¡d
::
¡ršg
 
f’ame
 );

56 
	g¡d
::
¡ršg
 
G‘FeName
( );

58 
ušt64_t
 
G‘V®ueUL
Ğ
¡d
::
¡ršg
 
key
 );

59 
G‘V®ueUL
Ğ
¡d
::
¡ršg
 
Key
, 
ušt64_t
& 
v®ue
 );

60 
G‘V®ue
Ğ
¡d
::
¡ršg
 
key
 );

61 
G‘V®ue
Ğ
¡d
::
¡ršg
 
key
, & 
v®ue
 );

62 
S‘V®ue
Ğ
¡d
::
¡ršg
 
key
, std::¡ršg 
v®ue
 );

64 
G‘EÃrgy
Ğ
¡d
::
¡ršg
 
key
 );

65 
G‘EÃrgy
Ğ
¡d
::
¡ršg
 
key
, &
’”gy
 );

66 
S‘EÃrgy
Ğ
¡d
::
¡ršg
 
key
, std::¡ršg 
’”gy
 );

68 
	g¡d
::
¡ršg
 
G‘SŒšg
Ğ
¡d
::¡ršg 
key
 );

69 
G‘SŒšg
Ğ
¡d
::
¡ršg
 
key
, std::¡ršg& 
v®ue
 );

70 
S‘SŒšg
Ğ
¡d
::
¡ršg
 
key
, std::string );

72 
boŞ
 
G‘BoŞ
Ğ
¡d
::
¡ršg
 
key
 );

73 
G‘BoŞ
Ğ
¡d
::
¡ršg
 
key
, 
boŞ
& 
v®ue
 );

74 
S‘BoŞ
Ğ
¡d
::
¡ršg
 
key
, 
boŞ
 
v®ue
 );

76 
boŞ
 
KeyExi¡s
Ğ
¡d
::
¡ršg
 
key
 );

78 
	g¡d
::
veùÜ
<
¡d
::
¡ršg
>& 
G‘Hooks
( );

80 
Pršt
( );

86 
S‘SimIÁ”çû
Ğ
SimIÁ”çû
 *
simPŒ
 );

87 
SimIÁ”çû
 *
G‘SimIÁ”çû
( );

89 
S‘DebugLog
( );

90 
	g¡d
::
o¡»am
 *
G‘DebugLog
( );

92 
	g´iv©e
:

93 
¡d
::
¡ršg
 
feName
;

94 
	g¡d
::
m­
<
¡d
::
¡ršg
, std::¡ršg> 
v®ues
;

95 
	g¡d
::
£t
<
¡d
::
¡ršg
> 
w¬Ãd
;

96 
	g¡d
::
veùÜ
<
¡d
::
¡ršg
> 
hookLi¡
;

97 
SimIÁ”çû
 *
	gsimPŒ
;

98 
	g¡d
::
of¡»am
 
debugLogFe
;

99 
boŞ
 
	gu£DebugLog
;

	@src/DataEncoder.cpp

34 
	~"¤c/D©aEncod”.h
"

36 
usšg
 
Çme¥aû
 
	gNVM
;

38 
	gD©aEncod”
::
	$D©aEncod”
( )

41 
	}
}

44 
D©aEncod”
::~
	$D©aEncod”
( )

47 
	}
}

50 
D©aEncod”
::
	$S‘CÚfig
Ğ
CÚfig
* , 
boŞ
 )

53 
	}
}

56 
ncyşe_t
 
	gD©aEncod”
::
	$R—d
Ğ
NVMašReque¡
* )

59 
	}
}

62 
ncyşe_t
 
	gD©aEncod”
::
	$Wr™e
Ğ
NVMašReque¡
* )

65 
	}
}

68 
	gD©aEncod”
::
	$Cyşe
Ğ
ncyşe_t
 )

71 
	}
}

	@src/DataEncoder.h

34 #iâdeà
__DATAENCODER_H__


35 
	#__DATAENCODER_H__


	)

38 
	~"šşude/NVMTy³s.h
"

39 
	~"¤c/NVMObjeù.h
"

40 
	~"¤c/P¬ams.h
"

42 
Çme¥aû
 
	gNVM
 {

44 
şass
 
	gCÚfig
;

45 
şass
 
	gNVMašReque¡
;

47 şas 
	cD©aEncod”
 : 
public
 
NVMObjeù


49 
public
:

50 
D©aEncod”
( );

51 ~
D©aEncod”
( );

53 
vœtu®
 
S‘CÚfig
Ğ
CÚfig
 *
cÚf
, 
boŞ
 
ü—‹Chd»n
 = 
Œue
 );

55 
vœtu®
 
ncyşe_t
 
R—d
Ğ
NVMašReque¡
 *
»que¡
 );

56 
vœtu®
 
ncyşe_t
 
Wr™e
Ğ
NVMašReque¡
 *
»que¡
 );

58 
vœtu®
 
PrštSts
( ) { }

60 
vœtu®
 
Cyşe
Ğ
ncyşe_t
 
¡•s
 );

	@src/Debug.cpp

36 
	~"¤c/Debug.h
"

38 
usšg
 
Çme¥aû
 
	gNVM
;

	@src/Debug.h

36 #iâdeà
__NVM_DEBUG_H__


37 
	#__NVM_DEBUG_H__


	)

40 
	~<iosfwd
>

41 
	~<f¡»am
>

43 
Çme¥aû
 
	gNVM
 {

45 şas 
	cnuÎ¡»am
 : 
public
 
¡d
::
o¡»am
 {};

48 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

49 
	gnuÎ¡»am
& 
	gİ”©Ü
<<ĞnuÎ¡»am& 
	gs
, 
T
 const& ) {  s; }

53 
nuÎ¡»am
 
	gnvmašDebugInhib™Ü
;

	@src/EnduranceDistribution.h

34 #iâdeà
__ENDURANCEDISTRIBUTION_H__


35 
	#__ENDURANCEDISTRIBUTION_H__


	)

37 
	~"¤c/CÚfig.h
"

39 
Çme¥aû
 
	gNVM
 {

41 şas 
	cEndu¿nûDi¡ributiÚ


43 
	gpublic
:

44 
Endu¿nûDi¡ributiÚ
( ) { }

45 
vœtu®
 ~
Endu¿nûDi¡ributiÚ
( ) { }

47 
vœtu®
 
ušt64_t
 
G‘Endu¿nû
( ) = 0;

	@src/EnduranceModel.cpp

34 
	~"¤c/Endu¿nûMod–.h
"

35 
	~"Endu¿nû/Endu¿nûDi¡ributiÚFaùÜy.h
"

36 
	~"¤c/FauÉMod–.h
"

37 
	~<io¡»am
>

38 
	~<lim™s
>

40 
usšg
 
Çme¥aû
 
	gNVM
;

42 
	gEndu¿nûMod–
::
	$Endu¿nûMod–
( )

44 
liã
.
	`ş—r
( );

46 
g¿nuÏr™y
 = 0;

47 
	}
}

49 
	gEndu¿nûMod–
::
	$S‘CÚfig
Ğ
CÚfig
 *
cÚfig
, 
boŞ
 )

51 
’du¿nûDi¡
 = 
Endu¿nûDi¡ributiÚFaùÜy
::
	`C»©eEndu¿nûDi¡ributiÚ
(

52 
cÚfig
->
	`G‘SŒšg
( "EnduranceDist" ), config );

53 
	}
}

60 
ušt64_t
 
	gEndu¿nûMod–
::
	$G‘WÜ¡Liã
( )

62 
¡d
::
m­
<
ušt64_t
, ušt64_t>::
™”©Ü
 
i
;

63 
ušt64_t
 
mš
 = 
¡d
::
num”ic_lim™s
< ušt64_ˆ>::
	`max
( );

65  
i
 = 
liã
.
	`begš
Ğ); i !ğliã.
	`’d
( ); i++ )

67 ifĞ
i
->
£cÚd
 < 
mš
 )

68 
mš
 = 
i
->
£cÚd
;

71  
mš
;

72 
	}
}

79 
ušt64_t
 
	gEndu¿nûMod–
::
	$G‘Av”ageLiã
( )

81 
¡d
::
m­
<
ušt64_t
, ušt64_t>::
™”©Ü
 
i
;

82 
ušt64_t
 
tÙ®
 = 0;

83 
ušt64_t
 
av”age
 = 0;

85  
i
 = 
liã
.
	`begš
Ğ); i !ğliã.
	`’d
( ); i++ )

86 
tÙ®
 +ğ
i
->
£cÚd
;

88 ifĞ
liã
.
	`size
( ) != 0 )

89 
av”age
 = 
tÙ®
 / 
liã
.
	`size
( );

91 
av”age
 = 0;

93  
av”age
;

94 
	}
}

96 
boŞ
 
	gEndu¿nûMod–
::
	$Deüem’tLiã
Ğ
ušt64_t
 
addr
 )

98 
¡d
::
m­
<
ušt64_t
, ušt64_t>::
™”©Ü
 
i
 = 
liã
.
	`fšd
Ğ
addr
 );

99 
boŞ
 
rv
 = 
Œue
;

101 ifĞ
i
 =ğ
liã
.
	`’d
( ) )

104 
liã
.
	`š£¹
Ğ
¡d
::
·œ
<
ušt64_t
, ušt64_t>Ğ
addr
, 
’du¿nûDi¡
->
	`G‘Endu¿nû
( ) ) );

109 ifĞ
i
->
£cÚd
 != 0 )

111 
i
->
£cÚd
 = i->second - 1;

115 
rv
 = 
çl£
;

119  
rv
;

120 
	}
}

122 
boŞ
 
	gEndu¿nûMod–
::
	$IsD—d
Ğ
ušt64_t
 
addr
 )

124 
¡d
::
m­
<
ušt64_t
, ušt64_t>::
™”©Ü
 
i
 = 
liã
.
	`fšd
Ğ
addr
 );

125 
boŞ
 
rv
 = 
çl£
;

127 ifĞ
i
 !ğ
liã
.
	`’d
Ğè&& i->
£cÚd
 == 0 )

129 
rv
 = 
Œue
;

132  
rv
;

133 
	}
}

135 
	gEndu¿nûMod–
::
	$S‘G¿nuÏr™y
Ğ
ušt64_t
 
b™s
 )

137 
g¿nuÏr™y
 = 
b™s
;

138 
	}
}

141 
ušt64_t
 
	gEndu¿nûMod–
::
	$G‘G¿nuÏr™y
( )

143  
g¿nuÏr™y
;

144 
	}
}

147 
	gEndu¿nûMod–
::
	$Cyşe
Ğ
ncyşe_t
 )

149 
	}
}

	@src/EnduranceModel.h

34 #iâdeà
__ENDURANCEMODEL_H__


35 
	#__ENDURANCEMODEL_H__


	)

37 
	~<¡ršg
>

38 
	~<m­
>

39 
	~<¡dšt.h
>

40 
	~"¤c/CÚfig.h
"

41 
	~"¤c/P¬ams.h
"

42 
	~"¤c/NVMObjeù.h
"

43 
	~"¤c/Endu¿nûDi¡ributiÚ.h
"

44 
	~"šşude/NVMD©aBlock.h
"

45 
	~"šşude/NVMAdd»ss.h
"

46 
	~"¤c/FauÉMod–.h
"

48 
Çme¥aû
 
	gNVM
 {

50 
şass
 
	gFauÉMod–
;

52 şas 
	cEndu¿nûMod–
 : 
public
 
NVMObjeù


54 
public
:

55 
Endu¿nûMod–
( );

56 ~
Endu¿nûMod–
( ) {}

59 
vœtu®
 
ncyşes_t
 
R—d
Ğ
NVMašReque¡
 *
»que¡
 ) = 0;

61 
vœtu®
 
ncyşes_t
 
Wr™e
Ğ
NVMašReque¡
 *
»que¡
, 
NVMD©aBlock
& 
ŞdD©a
 ) = 0;

63 
vœtu®
 
S‘CÚfig
Ğ
CÚfig
 *
cÚf
, 
boŞ
 
ü—‹Chd»n
 = 
Œue
 );

65 
ušt64_t
 
G‘WÜ¡Liã
( );

66 
ušt64_t
 
G‘Av”ageLiã
( );

68 
vœtu®
 
PrštSts
( ) { }

70 
Cyşe
Ğ
ncyşe_t
 
¡•s
 );

72 
	g´Ùeùed
:

73 
Endu¿nûDi¡ributiÚ
 *
’du¿nûDi¡
;

74 
	g¡d
::
m­
<
ušt64_t
, 
	gušt64_t
> 
	gliã
;

76 
boŞ
 
Deüem’tLiã
Ğ
ušt64_t
 
addr
 );

77 
boŞ
 
IsD—d
Ğ
ušt64_t
 
addr
 );

79 
S‘G¿nuÏr™y
Ğ
ušt64_t
 
b™s
 );

80 
ušt64_t
 
G‘G¿nuÏr™y
( );

82 
	g´iv©e
:

83 
ušt64_t
 
g¿nuÏr™y
;

	@src/EventQueue.cpp

34 
	~"¤c/Ev’tQueue.h
"

35 
	~"¤c/NVMObjeù.h
"

36 
	~"¤c/CÚfig.h
"

37 
	~"NVM/nvmaš.h
"

39 
	~<lim™s
>

40 
	~<as£¹.h
>

42 
usšg
 
Çme¥aû
 
	gNVM
;

44 
	gEv’t
::
	$S‘Rec›Á
Ğ
NVMObjeù
 *
r
 )

46 
¡d
::
veùÜ
<
NVMObjeù_hook
 *>& 
chd»n
 = 
r
->
	`G‘P¬’t
Ğ)->
	`G‘T¿mpŞše
Ğ)->
	`G‘Chd»n
( );

47 
¡d
::
veùÜ
<
NVMObjeù_hook
 *>::
™”©Ü
 
™
;

48 
NVMObjeù_hook
 *
hook
 = 
NULL
;

50  
™
 = 
chd»n
.
	`begš
(); iˆ!ğchd»n.
	`’d
(); it++ )

52 ifĞ(*
™
)->
	`G‘T¿mpŞše
(è=ğ
r
 )

54 
hook
 = (*
™
);

59 
	`as£¹
Ğ
hook
 !ğ
NULL
 );

61 
»c›Á
 = 
hook
;

62 
	}
}

64 
	gEv’tQueue
::
	$Ev’tQueue
( )

66 
ev’tM­
.
	`ş—r
( );

67 
Ï¡Ev’tCyşe
 = 0;

68 
ÃxtEv’tCyşe
 = 
¡d
::
num”ic_lim™s
<
ncyşe_t
>::
	`max
();

69 
cu¼’tCyşe
 = 0;

70 
	}
}

72 
	gEv’tQueue
::~
	$Ev’tQueue
( )

74 
	}
}

76 
Ev’tQueue
::
	$In£¹Ev’t
Ğ
Ev’tTy³
 
ty³
, 
NVMObjeù
 *
»c›Á
, 
ncyşe_t
 
wh’
, *
d©a
, 
´iÜ™y
 )

79 
¡d
::
veùÜ
<
NVMObjeù_hook
 *>& 
chd»n
 = 
»c›Á
->
	`G‘P¬’t
Ğ)->
	`G‘T¿mpŞše
Ğ)->
	`G‘Chd»n
( );

80 
¡d
::
veùÜ
<
NVMObjeù_hook
 *>::
™”©Ü
 
™
;

81 
NVMObjeù_hook
 *
hook
 = 
NULL
;

83  
™
 = 
chd»n
.
	`begš
(); iˆ!ğchd»n.
	`’d
(); it++ )

85 ifĞ(*
™
)->
	`G‘T¿mpŞše
(è=ğ
»c›Á
 )

87 
hook
 = (*
™
);

92 
	`as£¹
Ğ
hook
 !ğ
NULL
 );

94 
	`In£¹Ev’t
Ğ
ty³
, 
hook
, 
NULL
, 
wh’
, 
d©a
, 
´iÜ™y
 );

95 
	}
}

97 
	gEv’tQueue
::
	$In£¹Ev’t
Ğ
Ev’tTy³
 
ty³
, 
NVMObjeù_hook
 *
»c›Á
, 
ncyşe_t
 
wh’
, *
d©a
, 
´iÜ™y
 )

99 
	`In£¹Ev’t
Ğ
ty³
, 
»c›Á
, 
NULL
, 
wh’
, 
d©a
, 
´iÜ™y
 );

100 
	}
}

102 
	gEv’tQueue
::
	$In£¹Ev’t
Ğ
Ev’tTy³
 
ty³
, 
NVMObjeù
 *
»c›Á
, 
NVMašReque¡
 *
»q
, 
ncyşe_t
 
wh’
, *
d©a
, 
´iÜ™y
 )

105 
¡d
::
veùÜ
<
NVMObjeù_hook
 *>& 
chd»n
 = 
»c›Á
->
	`G‘P¬’t
Ğ)->
	`G‘T¿mpŞše
Ğ)->
	`G‘Chd»n
( );

106 
¡d
::
veùÜ
<
NVMObjeù_hook
 *>::
™”©Ü
 
™
;

107 
NVMObjeù_hook
 *
hook
 = 
NULL
;

109  
™
 = 
chd»n
.
	`begš
(); iˆ!ğchd»n.
	`’d
(); it++ )

111 ifĞ(*
™
)->
	`G‘T¿mpŞše
(è=ğ
»c›Á
 )

113 
hook
 = (*
™
);

118 
	`as£¹
Ğ
hook
 !ğ
NULL
 );

120 
	`In£¹Ev’t
Ğ
ty³
, 
hook
, 
»q
, 
wh’
, 
d©a
, 
´iÜ™y
 );

121 
	}
}

123 
	gEv’tQueue
::
	$In£¹Ev’t
Ğ
Ev’tTy³
 
ty³
, 
NVMObjeù_hook
 *
»c›Á
, 
NVMašReque¡
 *
»q
, 
ncyşe_t
 
wh’
, *
d©a
, 
´iÜ™y
 )

126 
Ev’t
 *
ev’t
 = 
Ãw
 
	`Ev’t
( );

128 
ev’t
->
	`S‘Ty³
Ğ
ty³
 );

129 
ev’t
->
	`S‘Rec›Á
Ğ
»c›Á
 );

130 
ev’t
->
	`S‘Reque¡
Ğ
»q
 );

131 
ev’t
->
	`S‘Cyşe
Ğ
wh’
 );

132 
ev’t
->
	`S‘D©a
Ğ
d©a
 );

134 
	`In£¹Ev’t
Ğ
ev’t
, 
wh’
, 
´iÜ™y
 );

135 
	}
}

138 
	gEv’tQueue
::
	$In£¹Ev’t
Ğ
Ev’t
 *
ev’t
, 
ncyşe_t
 
wh’
, 
´iÜ™y
 )

140 
ev’t
->
	`S‘Cyşe
Ğ
wh’
 );

143 ifĞ
wh’
 < 
ÃxtEv’tCyşe
 )

145 
ÃxtEv’tCyşe
 = 
wh’
;

149 ifĞ
ev’tM­
.
	`couÁ
Ğ
wh’
 ) == 0 )

151 
Ev’tLi¡
 
ev’tLi¡
;

153 
ev’tLi¡
.
	`push_back
Ğ
ev’t
 );

155 
ev’tM­
.
	`š£¹
Ğ
¡d
::
·œ
<
ncyşe_t
, 
Ev’tLi¡
>Ğ
wh’
, 
ev’tLi¡
 ) );

160 
Ev’tLi¡
& 
ev’tLi¡
 = 
ev’tM­
[
wh’
];

162 
Ev’tLi¡
::
™”©Ü
 
™
;

163 
boŞ
 
š£¹ed
 = 
çl£
;

165  
™
 = 
ev’tLi¡
.
	`begš
(); iˆ!ğev’tLi¡.
	`’d
(); it++ )

167 ifĞ(*
™
)->
	`G‘PriÜ™y
Ğè> 
´iÜ™y
 )

169 
ev’tLi¡
.
	`š£¹
Ğ
™
, 
ev’t
 );

170 
š£¹ed
 = 
Œue
;

175 ifĞ!
š£¹ed
 )

177 
ev’tLi¡
.
	`push_back
Ğ
ev’t
 );

180 
	}
}

183 
	gEv’tQueue
::
	$In£¹C®lback
Ğ
NVMObjeù
 *
»c›Á
, 
C®lbackPŒ
 
m‘hod
,

184 
ncyşe_t
 
wh’
, *
d©a
, 
´iÜ™y
 )

186 
Ev’t
 *
ev’t
 = 
Ãw
 
	`Ev’t
( );

188 
ev’t
->
	`S‘Ty³
Ğ
Ev’tC®lback
 );

189 
ev’t
->
	`S‘Rec›Á
Ğ
»c›Á
 );

190 
ev’t
->
	`S‘D©a
Ğ
d©a
 );

191 
ev’t
->
	`S‘Cyşe
Ğ
wh’
 );

192 
ev’t
->
	`S‘PriÜ™y
Ğ
´iÜ™y
 );

193 
ev’t
->
	`S‘C®lback
Ğ
m‘hod
 );

195 
	`In£¹Ev’t
Ğ
ev’t
, 
wh’
, 
´iÜ™y
 );

196 
	}
}

199 
boŞ
 
	gEv’tQueue
::
	$RemoveEv’t
Ğ
Ev’t
 *
ev’t
, 
ncyşe_t
 
wh’
 )

201 
boŞ
 
rv
 = 
çl£
;

203 ifĞ
ev’tM­
.
	`couÁ
Ğ
wh’
 ) == 0 )

205 
rv
 = 
çl£
;

209 
Ev’tLi¡
& 
ev’tLi¡
 = 
ev’tM­
[
wh’
];

211 
Ev’tLi¡
::
™”©Ü
 
™
;

212  
™
 = 
ev’tLi¡
.
	`begš
(); iˆ!ğev’tLi¡.
	`’d
(); it++ )

215 ifĞ(*
™
è=ğ
ev’t
 )

217 
ev’tLi¡
.
	`”a£
Ğ
™
 );

219 
rv
 = 
Œue
;

222 ifĞ
ev’tLi¡
.
	`em±y
() )

223 
ev’tM­
.
	`”a£
Ğ
wh’
 );

229 ifĞ
ev’tM­
.
	`em±y
() )

231 
ÃxtEv’tCyşe
 = 
¡d
::
num”ic_lim™s
<
ušt64_t
>::
	`max
( );

235 
ÃxtEv’tCyşe
 = 
ev’tM­
.
	`begš
()->
fœ¡
;

239  
rv
;

240 
	}
}

243 
Ev’t
 *
	gEv’tQueue
::
	$FšdEv’t
Ğ
Ev’tTy³
 
ty³
, 
NVMObjeù
 *
»c›Á
, 
NVMašReque¡
 *
»q
, 
ncyşe_t
 
wh’
 ) const

246 
¡d
::
veùÜ
<
NVMObjeù_hook
 *>& 
chd»n
 = 
»c›Á
->
	`G‘P¬’t
Ğ)->
	`G‘T¿mpŞše
Ğ)->
	`G‘Chd»n
( );

247 
¡d
::
veùÜ
<
NVMObjeù_hook
 *>::
™”©Ü
 
™
;

248 
NVMObjeù_hook
 *
hook
 = 
NULL
;

250  
™
 = 
chd»n
.
	`begš
(); iˆ!ğchd»n.
	`’d
(); it++ )

252 ifĞ(*
™
)->
	`G‘T¿mpŞše
(è=ğ
»c›Á
 )

254 
hook
 = (*
™
);

259 
	`as£¹
Ğ
hook
 !ğ
NULL
 );

261  
	`FšdEv’t
Ğ
ty³
, 
hook
, 
»q
, 
wh’
 );

262 
	}
}

265 
Ev’t
 *
	gEv’tQueue
::
	$FšdEv’t
Ğ
Ev’tTy³
 
ty³
, 
NVMObjeù_hook
 *
»c›Á
, 
NVMašReque¡
 *
»q
, 
ncyşe_t
 
wh’
 ) const

267 
Ev’t
 *
rv
 = 
NULL
;

269 ià(
ev’tM­
.
	`couÁ
(
wh’
) == 0) {

270  
rv
;

272 cÚ¡ 
Ev’tLi¡
& 
ev’tLi¡
 = 
ev’tM­
.
	`fšd
(
wh’
)->
£cÚd
;

274 
Ev’tLi¡
::
cÚ¡_™”©Ü
 
™
;

275  
™
 = 
ev’tLi¡
.
	`begš
(); iˆ!ğev’tLi¡.
	`’d
(); it++ )

277 ifĞ(*
™
)->
	`G‘Ty³
Ğè=ğ
ty³
 && (*™)->
	`G‘Rec›Á
Ğè=ğ
»c›Á


278 && (*
™
)->
	`G‘Reque¡
Ğè=ğ
»q
 )

280 
rv
 = (*
™
);

283  
rv
;

285 
	}
}

288 
Ev’t
 *
	gEv’tQueue
::
	$FšdC®lback
Ğ
NVMObjeù
 *
»c›Á
, 
C®lbackPŒ
 
m‘hod
, 
ncyşe_t
 
wh’
, *
d©a
, 
´iÜ™y
 ) const

290 
Ev’t
 *
rv
 = 
NULL
;

292 ifĞ
ev’tM­
.
	`couÁ
(
wh’
) != 0 )

294 cÚ¡ 
Ev’tLi¡
& 
ev’tLi¡
 = 
ev’tM­
.
	`fšd
(
wh’
)->
£cÚd
;

296 
Ev’tLi¡
::
cÚ¡_™”©Ü
 
™
;

297  
™
 = 
ev’tLi¡
.
	`begš
(); iˆ!ğev’tLi¡.
	`’d
(); it++ )

299 ifĞ(*
™
)->
	`G‘Rec›Á
()->
	`G‘T¿mpŞše
(è=ğ
»c›Á


300 && (*
™
)->
	`G‘C®lback
(è=ğ
m‘hod


301 && (*
™
)->
	`G‘D©a
(è=ğ
d©a


302 && (*
™
)->
	`G‘PriÜ™y
(è=ğ
´iÜ™y
 )

304 
rv
 = (*
™
);

310  
rv
;

311 
	}
}

314 
	gEv’tQueue
::
	$Loİ
( )

322 ifĞ
ÃxtEv’tCyşe
 =ğ
cu¼’tCyşe
 )

323 
	`Proûss
( );

325 
cu¼’tCyşe
++;

326 
	}
}

329 
	gEv’tQueue
::
	$Loİ
Ğ
ncyşe_t
 
¡•s
 )

332 ifĞ
¡•s
 =ğ0 && 
ÃxtEv’tCyşe
 =ğ
cu¼’tCyşe
 )

334 
	`Proûss
( );

338 
ncyşe_t
 
¡•Cyşes
 = 
¡•s
;

340  
¡•Cyşes
 > 0 )

343 ifĞ
ÃxtEv’tCyşe
 > 
cu¼’tCyşe
 + 
¡•Cyşes
 )

345 
cu¼’tCyşe
 +ğ
¡•Cyşes
;

349 
ncyşe_t
 
cu¼’tS‹ps
 = 
ÃxtEv’tCyşe
 - 
cu¼’tCyşe
;

351 
cu¼’tCyşe
 +ğ
cu¼’tS‹ps
;

352 
¡•Cyşes
 -ğ
cu¼’tS‹ps
;

355 
	`Proûss
( );

357 
	}
}

360 
	gEv’tQueue
::
	$Proûss
( )

363 
	`as£¹
Ğ
ev’tM­
.
	`couÁ
Ğ
ÃxtEv’tCyşe
 ) );

365 
Ev’tLi¡
& 
ev’tLi¡
 = 
ev’tM­
[
ÃxtEv’tCyşe
];

366 
Ev’tLi¡
::
™”©Ü
 
™
;

368  
™
 = 
ev’tLi¡
.
	`begš
Ğ); iˆ!ğev’tLi¡.
	`’d
( ); it++ )

370  (*
™
)->
	`G‘Ty³
( ) )

372 
Ev’tCyşe
:

373 (*
™
)->
	`G‘Rec›Á
Ğ)->
	`Cyşe
Ğ
ÃxtEv’tCyşe
 - 
Ï¡Ev’tCyşe
 );

376 
Ev’tIdË
:

380 
Ev’tReque¡
:

384 
Ev’tRe¥Ú£
:

385 (*
™
)->
	`G‘Rec›Á
Ğ)->
	`Reque¡Com¶‘e
Ğ(*™)->
	`G‘Reque¡
( ) );

388 
Ev’tC®lback
:

390 
C®lbackPŒ
 
cb
 = (*
™
)->
	`G‘C®lback
( );

391 
NVMObjeù
 *
thisPŒ
 = (*
™
)->
	`G‘Rec›Á
Ğ)->
	`G‘T¿mpŞše
( );

392 (*
thisPŒ
.*
cb
)Ğ(*
™
)->
	`G‘D©a
() );

396 
Ev’tUnknown
:

403 
	`d–‘e
 (*
™
);

406 
ev’tM­
.
	`”a£
Ğ
ÃxtEv’tCyşe
 );

409 ifĞ
ev’tM­
.
	`em±y
( ) )

411 
Ï¡Ev’tCyşe
 = 
ÃxtEv’tCyşe
;

412 
ÃxtEv’tCyşe
 = 
¡d
::
num”ic_lim™s
<
ncyşe_t
>::
	`max
();

416 
Ï¡Ev’tCyşe
 = 
ÃxtEv’tCyşe
;

418 
ÃxtEv’tCyşe
 = 
ev’tM­
.
	`begš
()->
fœ¡
;

420 
	}
}

422 
	gEv’tQueue
::
	$S‘F»qu’cy
Ğ
äeq
 )

424 
äequ’cy
 = 
äeq
;

425 
	}
}

427 
	gEv’tQueue
::
	$G‘F»qu’cy
( )

429  
äequ’cy
;

430 
	}
}

432 
ncyşe_t
 
	gEv’tQueue
::
	$G‘NextEv’t
( )

434  
ÃxtEv’tCyşe
;

435 
	}
}

437 
ncyşe_t
 
	gEv’tQueue
::
	$G‘Cu¼’tCyşe
( )

439  
cu¼’tCyşe
;

440 
	}
}

442 
	gEv’tQueue
::
	$S‘Cu¼’tCyşe
Ğ
ncyşe_t
 
curCyşe
 )

444 
cu¼’tCyşe
 = 
curCyşe
;

445 
	}
}

448 
	gGlob®Ev’tQueue
::
	$Glob®Ev’tQueue
( )

450 
cu¼’tCyşe
 = 0;

451 
ev’tDriv’
 = 
çl£
;

452 
	}
}

454 
	gGlob®Ev’tQueue
::~
	$Glob®Ev’tQueue
( )

457 
	}
}

459 
Glob®Ev’tQueue
::
	$AddSy¡em
Ğ
NVMaš
 *
subSy¡em
, 
CÚfig
 *
cÚfig
 )

461 
subSy¡emF»qu’cy
 = 
cÚfig
->
	`G‘EÃrgy
( "CLK" ) * 1000000.0;

462 
Ev’tQueue
 *
queue
 = 
subSy¡em
->
	`G‘Ev’tQueue
( );

463 
boŞ
 
ev’tDriv’Sub
 = 
cÚfig
->
	`G‘BoŞ
( "EventDriven" );

466 ifĞ
ev’tQueues
.
	`em±y
( ) )

467 
ev’tDriv’
 = 
ev’tDriv’Sub
;

469 ifĞ
ev’tDriv’Sub
 !ğ
ev’tDriv’
 )

471 
¡d
::
cout
 << "NVMain: Warning: Subsystem setting ofƒvent driven does‚ot match…arent!"

472 << 
¡d
::
’dl
;

474 ifĞ
ev’tDriv’
 )

476 
¡d
::
cout
 << " FÜcšg subsy¡emØbev’ˆdriv’." << std::
’dl
;

477 
cÚfig
->
	`S‘BoŞ
Ğ"Ev’tDriv’", 
Œue
 );

481 
¡d
::
cout
 << " FÜcšg subsy¡emØbexecutiÚ driv’." << std::
’dl
;

482 
cÚfig
->
	`S‘BoŞ
Ğ"Ev’tDriv’", 
çl£
 );

486 
	`as£¹
Ğ
subSy¡emF»qu’cy
 <ğ
äequ’cy
 );

493 
ev’tQueues
.
	`š£¹
Ğ
¡d
::
·œ
<
Ev’tQueue
*, >(
queue
, 
subSy¡emF»qu’cy
) );

494 
queue
->
	`S‘F»qu’cy
Ğ
subSy¡emF»qu’cy
 );

496 
¡d
::
cout
 << "NVMain: GlobalEventQueue: Added‡ memory subsystem„unning‡t "

497 << 
cÚfig
->
	`G‘EÃrgy
( "CLK" ) << "MHz. My frequency is "

498 << (
äequ’cy
 / 1000000.0è<< "MHz." << 
¡d
::
’dl
;

499 
	}
}

503 
	gGlob®Ev’tQueue
::
	$Cyşe
Ğ
ncyşe_t
 
¡•s
 )

505 
Ev’tQueue
 *
ÃxtEv’tQueue
;

506 
ncyşe_t
 
™”©iÚS‹ps
 = 0;

508  
™”©iÚS‹ps
 < 
¡•s
 )

510 
ncyşe_t
 
ÃxtEv’t
 = 
	`G‘NextEv’t
Ğ&
ÃxtEv’tQueue
 );

512 
ncyşe_t
 
glob®QueueS‹ps
 = 0;

513 ifĞ
ÃxtEv’t
 > 
cu¼’tCyşe
 )

515 
glob®QueueS‹ps
 = 
ÃxtEv’t
 - 
cu¼’tCyşe
;

520 ifĞ
glob®QueueS‹ps
 > (
¡•s
 - 
™”©iÚS‹ps
))

522 
cu¼’tCyşe
 +ğ
¡•s
 - 
™”©iÚS‹ps
;

523 
	`Sync
( );

527 
ncyşe_t
 
loÿlQueueS‹ps
 = 
ÃxtEv’tQueue
->
	`G‘NextEv’t
Ğè-‚extEv’tQueue->
	`G‘Cu¼’tCyşe
( );

528 
ÃxtEv’tQueue
->
	`Loİ
Ğ
loÿlQueueS‹ps
 );

530 
cu¼’tCyşe
 +ğ
glob®QueueS‹ps
;

531 
™”©iÚS‹ps
 +ğ
glob®QueueS‹ps
;

533 
	`Sync
( );

535 
	}
}

538 
	gGlob®Ev’tQueue
::
	$S‘F»qu’cy
Ğ
äeq
 )

540 
äequ’cy
 = 
äeq
;

541 
	}
}

543 
	gGlob®Ev’tQueue
::
	$G‘F»qu’cy
( )

545  
äequ’cy
;

546 
	}
}

548 
ncyşe_t
 
	gGlob®Ev’tQueue
::
	$G‘NextEv’t
Ğ
Ev’tQueue
 **
eq
 )

550 
¡d
::
m­
<
Ev’tQueue
 *, >::
cÚ¡_™”©Ü
 
™”
;

551 
ncyşe_t
 
ÃxtEv’tCyşe
 = 
¡d
::
num”ic_lim™s
<ncyşe_t>::
	`max
( );

553 ifĞ
eq
 !ğ
NULL
 )

554 *
eq
 = 
NULL
;

556  
™”
 = 
ev’tQueues
.
	`begš
Ğ); i‹¸!ğev’tQueues.
	`’d
( ); iter++ )

562 ifĞ
™”
->
fœ¡
->
	`G‘NextEv’t
Ğè=ğ
¡d
::
num”ic_lim™s
<
ncyşe_t
>::
	`max
( ) )

565 
äequ’cyMuÉl›r
 = 
äequ’cy
 / 
™”
->
£cÚd
;

568 
glob®Ev’tCyşe
 = 
™”
->
fœ¡
->
	`G‘NextEv’t
Ğè* 
äequ’cyMuÉl›r
;

570 ifĞ
¡©ic_ÿ¡
<
ncyşe_t
>(
glob®Ev’tCyşe
è< 
ÃxtEv’tCyşe
 )

572 
ÃxtEv’tCyşe
 = 
¡©ic_ÿ¡
<
ncyşe_t
>(
glob®Ev’tCyşe
);

573 ifĞ
eq
 !ğ
NULL
 )

574 *
eq
 = 
™”
->
fœ¡
;

578  
ÃxtEv’tCyşe
;

579 
	}
}

581 
ncyşe_t
 
	gGlob®Ev’tQueue
::
	$G‘Cu¼’tCyşe
( )

583  
cu¼’tCyşe
;

584 
	}
}

586 
	gGlob®Ev’tQueue
::
	$Sync
( )

588 
¡d
::
m­
<
Ev’tQueue
 *, >::
cÚ¡_™”©Ü
 
™”
;

589  
™”
 = 
ev’tQueues
.
	`begš
Ğ); i‹¸!ğev’tQueues.
	`’d
( ); iter++ )

591 
äequ’cyMuÉl›r
 = 
äequ’cy
 / 
™”
->
£cÚd
;

594 
£tCyşe
 = 
¡©ic_ÿ¡
<>(
cu¼’tCyşe
è/ 
äequ’cyMuÉl›r
;

596 
ncyşe_t
 
¡•CouÁ
 = 
¡©ic_ÿ¡
<ncyşe_t>(
£tCyşe
è- 
™”
->
fœ¡
->
	`G‘Cu¼’tCyşe
( );

599 ifĞ
¡©ic_ÿ¡
<
ncyşe_t
>(
£tCyşe
è> 
™”
->
fœ¡
->
	`G‘Cu¼’tCyşe
( ) )

601 
™”
->
fœ¡
->
	`Loİ
Ğ
¡•CouÁ
 );

604 
	}
}

	@src/EventQueue.h

34 #iâdeà
__NVMAIN_EVENTQUEUE_H__


35 
	#__NVMAIN_EVENTQUEUE_H__


	)

37 
	~<m­
>

38 
	~<li¡
>

39 
	~"šşude/NVMTy³s.h
"

40 
	~"šşude/NVMašReque¡.h
"

42 
Çme¥aû
 
	gNVM
 {

44 
şass
 
	gEv’t
;

45 
şass
 
	gNVMObjeù_hook
;

46 
şass
 
	gCÚfig
;

47 
şass
 
	gNVMaš
;

49 
	g¡d
::
	tli¡
<
	tEv’t
 *> 
	tEv’tLi¡
;

50 (
	gNVMObjeù
::*
	tC®lbackPŒ
)(*);

52 
	eEv’tTy³
 { 
	gEv’tUnknown
,

53 
	gEv’tCyşe
,

54 
	gEv’tIdË
,

55 
	gEv’tReque¡
,

56 
	gEv’tRe¥Ú£
,

57 
	gEv’tC®lback


60 şas 
	cEv’t


62 
	gpublic
:

63 
Ev’t
(è: 
ty³
(
Ev’tUnknown
), 
»c›Á
(
NULL
), 
»que¡
(NULL), 
d©a
(NULL), 
cyşe
(0), 
´iÜ™y
(0) {}

64 ~
Ev’t
() {}

66 
S‘Ty³
Ğ
Ev’tTy³
 
e
 ) { 
	gty³
 =ƒ; }

67 
S‘Rec›Á
Ğ
NVMObjeù
 *
r
 );

68 
S‘Rec›Á
Ğ
NVMObjeù_hook
 *
r
 ) { 
	g»c›Á
 =„; }

69 
S‘Reque¡
Ğ
NVMašReque¡
 *
r
 ) { 
	g»que¡
 =„; }

70 
S‘D©a
Ğ*
d
 ) { 
	gd©a
 = d; }

71 
S‘Cyşe
Ğ
ncyşe_t
 
c
 ) { 
	gcyşe
 = c; }

72 
S‘PriÜ™y
Ğ
p
 ) { 
	g´iÜ™y
 =…; }

73 
S‘C®lback
Ğ
C®lbackPŒ
 
m
 ) { 
	gm‘hod
 = m; }

75 
Ev’tTy³
 
G‘Ty³
Ğè{  
	gty³
; }

76 
NVMObjeù_hook
 *
G‘Rec›Á
Ğè{  
	g»c›Á
; }

77 
NVMašReque¡
 *
G‘Reque¡
Ğè{  
	g»que¡
; }

78 *
G‘D©a
Ğè{  
	gd©a
; }

79 
ncyşe_t
 
G‘Cyşe
Ğè{  
	gcyşe
; }

80 
G‘PriÜ™y
Ğè{  
	g´iÜ™y
; }

81 
C®lbackPŒ
 
G‘C®lback
Ğè{  
	gm‘hod
; }

83 
	g´iv©e
:

84 
Ev’tTy³
 
ty³
;

85 
NVMObjeù_hook
 *
	g»c›Á
;

86 
NVMašReque¡
 *
	g»que¡
;

87 *
	gd©a
;

88 
ncyşe_t
 
	gcyşe
;

89 
	g´iÜ™y
;

90 
C®lbackPŒ
 
	gm‘hod
;

94 şas 
	cEv’tQueue


96 
	gpublic
:

97 
Ev’tQueue
();

98 ~
Ev’tQueue
();

100 
In£¹Ev’t
Ğ
Ev’tTy³
 
ty³
, 
NVMObjeù_hook
 *
»c›Á
, 
NVMašReque¡
 *
»q
, 
ncyşe_t
 
wh’
, *
d©a
 = 
NULL
, 
´iÜ™y
 = 0 );

101 
In£¹Ev’t
Ğ
Ev’tTy³
 
ty³
, 
NVMObjeù
 *
»c›Á
, 
NVMašReque¡
 *
»q
, 
ncyşe_t
 
wh’
, *
d©a
 = 
NULL
, 
´iÜ™y
 = 0 );

102 
In£¹Ev’t
Ğ
Ev’tTy³
 
ty³
, 
NVMObjeù_hook
 *
»c›Á
, 
ncyşe_t
 
wh’
, *
d©a
 = 
NULL
, 
´iÜ™y
 = 0 );

103 
In£¹Ev’t
Ğ
Ev’tTy³
 
ty³
, 
NVMObjeù
 *
»c›Á
, 
ncyşe_t
 
wh’
, *
d©a
 = 
NULL
, 
´iÜ™y
 = 0 );

104 
In£¹Ev’t
Ğ
Ev’t
 *
ev’t
, 
ncyşe_t
 
wh’
, 
´iÜ™y
 = 0 );

106 
In£¹C®lback
Ğ
NVMObjeù
 *
»c›Á
, 
C®lbackPŒ
 
m‘hod
, 
ncyşe_t
 
wh’
, *
d©a
 = 
NULL
, 
´iÜ™y
 = 0 );

108 
Ev’t
 *
FšdEv’t
Ğ
Ev’tTy³
 
ty³
, 
NVMObjeù
 *
»c›Á
, 
NVMašReque¡
 *
»q
, 
ncyşe_t
 
wh’
 ) const;

109 
Ev’t
 *
FšdEv’t
Ğ
Ev’tTy³
 
ty³
, 
NVMObjeù_hook
 *
»c›Á
, 
NVMašReque¡
 *
»q
, 
ncyşe_t
 
wh’
 ) const;

111 
Ev’t
 *
FšdC®lback
Ğ
NVMObjeù
 *
»c›Á
, 
C®lbackPŒ
 
m‘hod
, 
ncyşe_t
 
wh’
, *
d©a
 = 
NULL
, 
´iÜ™y
 = 0 ) const;

113 
boŞ
 
RemoveEv’t
Ğ
Ev’t
 *
ev’t
, 
ncyşe_t
 
wh’
 );

115 
Proûss
( );

116 
Loİ
( );

117 
Loİ
Ğ
ncyşe_t
 
¡•s
 );

119 
S‘F»qu’cy
Ğ
äeq
 );

120 
G‘F»qu’cy
( );

122 
ncyşe_t
 
G‘NextEv’t
( );

123 
ncyşe_t
 
G‘Cu¼’tCyşe
( );

124 
S‘Cu¼’tCyşe
Ğ
ncyşe_t
 
curCyşe
 );

126 
	g´iv©e
:

127 
ncyşe_t
 
ÃxtEv’tCyşe
;

128 
ncyşe_t
 
	gÏ¡Ev’tCyşe
;

129 
ncyşe_t
 
	gcu¼’tCyşe
;

130 
	gäequ’cy
;

132 
	g¡d
::
m­
< 
ncyşe_t
, 
	gEv’tLi¡
> 
	gev’tM­
;

136 şas 
	cGlob®Ev’tQueue


138 
	gpublic
:

139 
Glob®Ev’tQueue
();

140 ~
Glob®Ev’tQueue
();

142 
AddSy¡em
Ğ
NVMaš
 *
subSy¡em
, 
CÚfig
 *
cÚfig
 );

143 
Cyşe
Ğ
ncyşe_t
 
¡•s
 );

145 
S‘F»qu’cy
Ğ
äeq
 );

146 
G‘F»qu’cy
( );

148 
ncyşe_t
 
G‘NextEv’t
Ğ
Ev’tQueue
 **
eq
 = 
NULL
 );

149 
ncyşe_t
 
G‘Cu¼’tCyşe
( );

151 
	g´iv©e
:

152 
ncyşe_t
 
cu¼’tCyşe
;

153 
	gäequ’cy
;

154 
boŞ
 
	gev’tDriv’
;

156 
	g¡d
::
m­
<
Ev’tQueue
 *, > 
	gev’tQueues
;

158 
Sync
( );

	@src/FaultModel.cpp

34 
	~"¤c/FauÉMod–.h
"

36 
usšg
 
Çme¥aû
 
	gNVM
;

38 
	gFauÉMod–
::
	$FauÉMod–
( )

40 
cÚfig
 = 
NULL
;

41 
	}
}

43 
	gFauÉMod–
::~
	$FauÉMod–
( )

45 
	}
}

47 
FauÉMod–
::
	$S‘CÚfig
Ğ
CÚfig
 *
cÚf
, 
boŞ
 )

49 
cÚfig
 = 
cÚf
;

50 
	}
}

52 
CÚfig
 *
	gFauÉMod–
::
	$G‘CÚfig
( )

54  
cÚfig
;

55 
	}
}

57 
boŞ
 
	gFauÉMod–
::
	$FauÉ
Ğ
NVMAdd»ss
 )

63  
çl£
;

64 
	}
}

67 
	gFauÉMod–
::
	$Cyşe
Ğ
ncyşe_t
 )

69 
	}
}

	@src/FaultModel.h

34 #iâdeà
__FAULTMODEL_H__


35 
	#__FAULTMODEL_H__


	)

37 
	~"¤c/CÚfig.h
"

38 
	~"¤c/NVMObjeù.h
"

39 
	~"šşude/NVMAdd»ss.h
"

41 
Çme¥aû
 
	gNVM
 {

43 
şass
 
	gEndu¿nûMod–
;

45 şas 
	cFauÉMod–
 : 
public
 
NVMObjeù


47 
public
:

48 
FauÉMod–
( );

49 ~
FauÉMod–
 ( );

52 
vœtu®
 
boŞ
 
FauÉ
Ğ
NVMAdd»ss
 
çuÉAddr
 );

54 
vœtu®
 
S‘CÚfig
Ğ
CÚfig
 *
cÚf
, 
boŞ
 
ü—‹Chd»n
 = 
Œue
 );

55 
CÚfig
 *
G‘CÚfig
( );

57 
Cyşe
Ğ
ncyşe_t
 
¡•s
 );

59 
	g´Ùeùed
:

60 
CÚfig
 *
cÚfig
;

61 
Endu¿nûMod–
 *
	g’du¿nû
;

	@src/Interconnect.cpp

34 
	~"¤c/IÁ”cÚÃù.h
"

35 
	~"¤c/MemÜyCÚŒŞËr.h
"

36 
	~"šşude/NVMašReque¡.h
"

38 
usšg
 
Çme¥aû
 
	gNVM
;

	@src/Interconnect.h

34 #iâdeà
__INTERCONNECT_H__


35 
	#__INTERCONNECT_H__


	)

37 
	~"¤c/NVMObjeù.h
"

38 
	~"¤c/CÚfig.h
"

39 
	~"šşude/NVMTy³s.h
"

40 
	~"šşude/NVMašReque¡.h
"

42 
Çme¥aû
 
	gNVM
 {

44 şas 
	cIÁ”cÚÃù
 : 
public
 
NVMObjeù


46 
public
:

47 
IÁ”cÚÃù
( ) { }

48 
vœtu®
 ~
IÁ”cÚÃù
( ) { }

50 
vœtu®
 
S‘CÚfig
Ğ
CÚfig
 *
c
, 
boŞ
 
ü—‹Chd»n
 = 
Œue
 ) = 0;

52 
vœtu®
 
Regi¡”Sts
( ) { }

53 
vœtu®
 
C®cuÏ‹Sts
( ) { }

55 
vœtu®
 
Cyşe
Ğ
ncyşe_t
 
¡•s
 ) = 0;

	@src/MemoryController.cpp

36 
	~"¤c/MemÜyCÚŒŞËr.h
"

37 
	~"šşude/NVMašReque¡.h
"

38 
	~"¤c/Ev’tQueue.h
"

39 
	~"¤c/IÁ”cÚÃù.h
"

40 
	~"IÁ”cÚÃù/IÁ”cÚÃùFaùÜy.h
"

41 
	~"¤c/Rªk.h
"

42 
	~"¤c/SubA¼ay.h
"

43 
	~"šşude/NVMH–³rs.h
"

45 
	~<s¡»am
>

46 
	~<ÿs£¹
>

47 
	~<c¡dlib
>

48 
	~<csigÇl
>

49 
	~<lim™s
>

50 
	~<®gÜ™hm
>

52 
usšg
 
Çme¥aû
 
	gNVM
;

55 
boŞ
 
WasIssued
Ğ
NVMašReque¡
 *
»que¡
 );

58 
boŞ
 
	$WasIssued
Ğ
NVMašReque¡
 *
»que¡
 ) {  (»que¡->
æags
 & NVMašReque¡::
FLAG_ISSUED
); 
	}
}

60 
	gMemÜyCÚŒŞËr
::
	$MemÜyCÚŒŞËr
( )

62 
Œª§ùiÚQueues
 = 
NULL
;

63 
Œª§ùiÚQueueCouÁ
 = 0;

64 
commªdQueues
 = 
NULL
;

65 
commªdQueueCouÁ
 = 0;

67 
Ï¡CommªdWake
 = 0;

68 
wakeupCouÁ
 = 0;

69 
Ï¡IssueCyşe
 = 0;

71 
¡¬v©iÚTh»shŞd
 = 4;

72 
subA¼ayNum
 = 1;

73 
¡¬v©iÚCouÁ”
 = 
NULL
;

74 
aùiv©eQueued
 = 
NULL
;

75 
efãùiveRow
 = 
NULL
;

76 
efãùiveMuxedRow
 = 
NULL
;

77 
aùiveSubA¼ay
 = 
NULL
;

79 
d–ayedReäeshCouÁ”
 = 
NULL
;

81 
curQueue
 = 0;

82 
ÃxtReäeshRªk
 = 0;

83 
ÃxtReäeshBªk
 = 0;

85 
hªdËdReäesh
 = 
¡d
::
num”ic_lim™s
<
ncyşe_t
>::
	`max
( );

86 
	}
}

88 
	gMemÜyCÚŒŞËr
::~
	$MemÜyCÚŒŞËr
( )

90  
ncouÁ”_t
 
i
 = 0; i < 
p
->
RANKS
; i++ )

92 
d–‘e
 [] 
aùiv©eQueued
[
i
];

93 
d–‘e
 [] 
bªkN“dReäesh
[
i
];

94 
d–‘e
 [] 
»äeshQueued
[
i
];

96  
ncouÁ”_t
 
j
 = 0;j < 
p
->
BANKS
; j++ )

98 
d–‘e
 [] 
¡¬v©iÚCouÁ”
[
i
][
j
];

99 
d–‘e
 [] 
efãùiveRow
[
i
][
j
];

100 
d–‘e
 [] 
efãùiveMuxedRow
[
i
][
j
];

101 
d–‘e
 [] 
aùiveSubA¼ay
[
i
][
j
];

103 
d–‘e
 [] 
¡¬v©iÚCouÁ”
[
i
];

104 
d–‘e
 [] 
efãùiveRow
[
i
];

105 
d–‘e
 [] 
efãùiveMuxedRow
[
i
];

106 
d–‘e
 [] 
aùiveSubA¼ay
[
i
];

109 
d–‘e
 [] 
commªdQueues
;

110 
d–‘e
 [] 
¡¬v©iÚCouÁ”
;

111 
d–‘e
 [] 
aùiv©eQueued
;

112 
d–‘e
 [] 
efãùiveRow
;

113 
d–‘e
 [] 
efãùiveMuxedRow
;

114 
d–‘e
 [] 
aùiveSubA¼ay
;

115 
d–‘e
 [] 
bªkN“dReäesh
;

116 
d–‘e
 [] 
¿nkPow”Down
;

118 ifĞ
p
->
U£Reäesh
 )

120  
ncouÁ”_t
 
i
 = 0; i < 
p
->
RANKS
; i++ )

123 
d–‘e
 [] 
d–ayedReäeshCouÁ”
[
i
];

127 
d–‘e
 [] 
d–ayedReäeshCouÁ”
;

128 
	}
}

132 
	gMemÜyCÚŒŞËr
::
	$In™Queues
Ğ
numQueues
 )

134 ifĞ
Œª§ùiÚQueues
 !ğ
NULL
 )

135 
d–‘e
 [] 
Œª§ùiÚQueues
;

137 
Œª§ùiÚQueues
 = 
Ãw
 
NVMT¿n§ùiÚQueue
[ 
numQueues
 ];

138 
Œª§ùiÚQueueCouÁ
 = 
numQueues
;

140  
i
 = 0; i < 
numQueues
; i++ )

141 
Œª§ùiÚQueues
[
i
].
	`ş—r
( );

142 
	}
}

146 
	gMemÜyCÚŒŞËr
::
	$Cyşe
Ğ
ncyşe_t
 
¡•s
 )

148 ifĞ
p
->
Ev’tDriv’
 )

155 
boŞ
 
scheduËd
 = 
çl£
;

156 
ncyşe_t
 
ÃxtWakeup
 = 
	`G‘Ev’tQueue
Ğ)->
	`G‘Cu¼’tCyşe
( ) + 1;

159 ifĞ
	`G‘Ev’tQueue
Ğ)->
	`FšdEv’t
Ğ
Ev’tCyşe
, 
this
, 
NULL
, 
ÃxtWakeup
 ) )

162  
ncouÁ”_t
 
queueIdx
 = 0; queueIdx < 
commªdQueueCouÁ
; queueIdx++ )

164 ifĞ
	`Efãùiv–yEm±y
Ğ
queueIdx
 )

165 && 
	`T¿n§ùiÚAvaabË
Ğ
queueIdx
 ) )

167 
	`G‘Ev’tQueue
Ğ)->
	`In£¹Ev’t
Ğ
Ev’tCyşe
, 
this
, 
ÃxtWakeup
, 
NULL
, 
Œª§ùiÚQueuePriÜ™y
 );

172 
scheduËd
 = 
Œue
;

176 ifĞ
scheduËd
 )

184 
	`G‘Chd
Ğ)->
	`Cyşe
Ğ
¡•s
 );

186 
	}
}

188 
	gMemÜyCÚŒŞËr
::
	$P»queue
Ğ
ncouÁ”_t
 
queueNum
, 
NVMašReque¡
 *
»que¡
 )

190 
	`as£¹
Ğ
queueNum
 < 
Œª§ùiÚQueueCouÁ
 );

192 
Œª§ùiÚQueues
[
queueNum
].
	`push_äÚt
Ğ
»que¡
 );

193 
	}
}

199 
	gMemÜyCÚŒŞËr
::
	$Enqueue
Ğ
ncouÁ”_t
 
queueNum
, 
NVMašReque¡
 *
»que¡
 )

202 
ncouÁ”_t
 
chªÃl
, 
¿nk
, 
bªk
, 
row
, 
cŞ
, 
sub¬¿y
;

204 
	`G‘Decod”
Ğ)->
	`T¿n¦©e
Ğ
»que¡
->
add»ss
.
	`G‘PhysiÿlAdd»ss
( ),

205 &
row
, &
cŞ
, &
bªk
, &
¿nk
, &
chªÃl
, &
sub¬¿y
 );

206 
chªÃl
 = 
»que¡
->
add»ss
.
	`G‘ChªÃl
( );

207 
»que¡
->
add»ss
.
	`S‘T¿n¦©edAdd»ss
Ğ
row
, 
cŞ
, 
bªk
, 
¿nk
, 
chªÃl
, 
sub¬¿y
 );

210 
	`as£¹
Ğ
queueNum
 < 
Œª§ùiÚQueueCouÁ
 );

212 
Œª§ùiÚQueues
[
queueNum
].
	`push_back
Ğ
»que¡
 );

214 ifĞ
p
->
Ev’tDriv’
 )

217 
ncouÁ”_t
 
queueId
 = 
	`G‘CommªdQueueId
Ğ
»que¡
->
add»ss
 );

219 ifĞ
	`Efãùiv–yEm±y
Ğ
queueId
 ) )

221 
ncyşe_t
 
ÃxtWakeup
 = 
	`G‘Ev’tQueue
Ğ)->
	`G‘Cu¼’tCyşe
( );

223 ifĞ
	`G‘Ev’tQueue
Ğ)->
	`FšdEv’t
Ğ
Ev’tCyşe
, 
this
, 
NULL
, 
ÃxtWakeup
 ) == NULL )

225 
	`G‘Ev’tQueue
Ğ)->
	`In£¹Ev’t
Ğ
Ev’tCyşe
, 
this
, 
ÃxtWakeup
, 
NULL
, 
Œª§ùiÚQueuePriÜ™y
 );

231 
	}
}

233 
boŞ
 
	gMemÜyCÚŒŞËr
::
	$T¿n§ùiÚAvaabË
Ğ
ncouÁ”_t
 
queueId
 )

235 
boŞ
 
rv
 = 
çl£
;

237  
ncouÁ”_t
 
queueIdx
 = 0; queueIdx < 
Œª§ùiÚQueueCouÁ
; queueIdx++ )

239 
¡d
::
li¡
<
NVMašReque¡
 *>::
™”©Ü
 
™
;

241  
™
 = 
Œª§ùiÚQueues
[
queueIdx
].
	`begš
( );

242 
™
 !ğ
Œª§ùiÚQueues
[
queueIdx
].
	`’d
( ); it++ )

244 ifĞ
	`G‘CommªdQueueId
Ğ(*
™
)->
add»ss
 ) =ğ
queueId
 )

246 
rv
 = 
Œue
;

252  
rv
;

253 
	}
}

255 
	gMemÜyCÚŒŞËr
::
	$ScheduËCommªdWake
( )

258 ifĞ
p
->
Ev’tDriv’
 )

260 
ncyşe_t
 
ÃxtWakeup
 = 
	`NextIssuabË
Ğ
NULL
 );

263 
boŞ
 
ÃxtWakeupScheduËd
 = 
	`G‘Ev’tQueue
()->
	`FšdC®lback
Ğ
this
,

264 (
C®lbackPŒ
)&
MemÜyCÚŒŞËr
::
CommªdQueueC®lback
,

265 
ÃxtWakeup
, 
NULL
, 
commªdQueuePriÜ™y
 );

267 ifĞ!
ÃxtWakeupScheduËd
 )

269 
	`G‘Ev’tQueue
Ğ)->
	`In£¹C®lback
Ğ
this
,

270 (
C®lbackPŒ
)&
MemÜyCÚŒŞËr
::
CommªdQueueC®lback
,

271 
ÃxtWakeup
, 
NULL
, 
commªdQueuePriÜ™y
 );

276 
	}
}

278 
	gMemÜyCÚŒŞËr
::
	$CommªdQueueC®lback
( * )

280 
	`as£¹
Ğ
p
->
Ev’tDriv’
 =ğ
Œue
 );

283 
ncyşe_t
 
»®S‹ps
 = 
	`G‘Ev’tQueue
Ğ)->
	`G‘Cu¼’tCyşe
Ğè- 
Ï¡CommªdWake
;

284 
Ï¡CommªdWake
 = 
	`G‘Ev’tQueue
Ğ)->
	`G‘Cu¼’tCyşe
( );

287 
ncyşe_t
 
ÃxtWakeup
 = 
	`NextIssuabË
Ğ
NULL
 );

288 
wakeupCouÁ
++;

291 
boŞ
 
ÃxtWakeupScheduËd
 = 
	`G‘Ev’tQueue
()->
	`FšdC®lback
Ğ
this
,

292 (
C®lbackPŒ
)&
MemÜyCÚŒŞËr
::
CommªdQueueC®lback
,

293 
ÃxtWakeup
, 
NULL
, 
commªdQueuePriÜ™y
 );

295 ifĞ!
ÃxtWakeupScheduËd


296 && 
ÃxtWakeup
 !ğ
¡d
::
num”ic_lim™s
<
ncyşe_t
>::
	`max
( ) )

298 
	`G‘Ev’tQueue
Ğ)->
	`In£¹C®lback
Ğ
this
,

299 (
C®lbackPŒ
)&
MemÜyCÚŒŞËr
::
CommªdQueueC®lback
,

300 
ÃxtWakeup
, 
NULL
, 
commªdQueuePriÜ™y
 );

305 
	`CyşeCommªdQueues
( );

307 
	`G‘Chd
Ğ)->
	`Cyşe
Ğ
»®S‹ps
 );

308 
	}
}

311 
	gMemÜyCÚŒŞËr
::
	$ReäeshC®lback
Ğ*
d©a
 )

313 
NVMašReque¡
 *
»que¡
 = 
»š‹½»t_ÿ¡
<NVMašReque¡ *>(
d©a
);

315 ifĞ
p
->
Ev’tDriv’
 )

317 
ncyşe_t
 
»®S‹ps
 = 
	`G‘Ev’tQueue
Ğ)->
	`G‘Cu¼’tCyşe
Ğè- 
Ï¡CommªdWake
;

318 
Ï¡CommªdWake
 = 
	`G‘Ev’tQueue
Ğ)->
	`G‘Cu¼’tCyşe
( );

319 
wakeupCouÁ
++;

321 
	`ProûssReäeshPul£
Ğ
»que¡
 );

322 
	`HªdËReäesh
( );

325 
	`G‘Chd
Ğ)->
	`Cyşe
Ğ
»®S‹ps
 );

329 
	`ProûssReäeshPul£
Ğ
»que¡
 );

331 
	}
}

333 
	gMemÜyCÚŒŞËr
::
	$CËªupC®lback
( * )

335  
ncyşe_t
 
queueId
 = 0; queueId < 
commªdQueueCouÁ
; queueId++ )

338 
commªdQueues
[
queueId
].
	`”a£
(

339 
¡d
::
	`»move_if
Ğ
commªdQueues
[
queueId
].
	`begš
(),

340 
commªdQueues
[
queueId
].
	`’d
(),

341 
WasIssued
 ),

342 
commªdQueues
[
queueId
].
	`’d
()

345 
	}
}

347 
boŞ
 
	gMemÜyCÚŒŞËr
::
	$Reque¡Com¶‘e
Ğ
NVMašReque¡
 *
»que¡
 )

352 ifĞ
»que¡
->
owÃr
 =ğ
this
 )

358 
d–‘e
 
»que¡
;

362  
	`G‘P¬’t
Ğ)->
	`Reque¡Com¶‘e
Ğ
»que¡
 );

365  
Œue
;

366 
	}
}

368 
boŞ
 
	gMemÜyCÚŒŞËr
::
	$IsIssuabË
Ğ
NVMašReque¡
 * , 
FaR—sÚ
 * )

370  
Œue
;

371 
	}
}

373 
	gMemÜyCÚŒŞËr
::
	$S‘M­pšgScheme
( )

376 
	`G‘Decod”
Ğ)->
	`G‘T¿n¦©iÚM‘hod
Ğ)->
	`S‘Add»ssM­pšgScheme
Ğ
p
->
Add»ssM­pšgScheme
 );

377 
	}
}

379 
	gMemÜyCÚŒŞËr
::
	$S‘CÚfig
Ğ
CÚfig
 *
cÚf
, 
boŞ
 
ü—‹Chd»n
 )

381 
this
->
cÚfig
 = 
cÚf
;

383 
P¬ams
 *
·¿ms
 = 
Ãw
 
	`P¬ams
( );

384 
·¿ms
->
	`S‘P¬ams
Ğ
cÚf
 );

385 
	`S‘P¬ams
Ğ
·¿ms
 );

387 ifĞ
ü—‹Chd»n
 )

389 
ušt64_t
 
chªÃls
, 
¿nks
, 
bªks
, 
rows
, 
cŞs
, 
sub¬¿ys
;

392 
Add»ssT¿n¦©Ü
 *
mcAT
 = 
Decod”FaùÜy
::
	`C»©eDecod”NoW¬n
Ğ
cÚf
->
	`G‘SŒšg
( "Decoder" ) );

393 
mcAT
->
	`S‘DeçuÉF›ld
Ğ
NO_FIELD
 );

394 
mcAT
->
	`S‘CÚfig
Ğ
cÚf
, 
ü—‹Chd»n
 );

395 
	`S‘Decod”
Ğ
mcAT
 );

399 
	`G‘P¬’t
()->
	`G‘T¿mpŞše
()->
	`G‘Decod”
()->
	`G‘T¿n¦©iÚM‘hod
()->
	`G‘CouÁ
(

400 &
rows
, &
cŞs
, &
bªks
, &
¿nks
, &
chªÃls
, &
sub¬¿ys
 );

403 ifĞ
cÚf
->
	`KeyExi¡s
( "MATHeight" ) )

405 
rows
 = 
p
->
MATHeight
;

406 
sub¬¿ys
 = 
p
->
ROWS
 /…->
MATHeight
;

410 
rows
 = 
p
->
ROWS
;

411 
sub¬¿ys
 = 1;

413 
cŞs
 = 
p
->
COLS
;

414 
bªks
 = 
p
->
BANKS
;

415 
¿nks
 = 
p
->
RANKS
;

417 
T¿n¦©iÚM‘hod
 *
m‘hod
 = 
Ãw
 
	`T¿n¦©iÚM‘hod
( );

419 
m‘hod
->
	`S‘B™Widths
Ğ
NVM
::
	`mlog2
Ğ
rows
 ),

420 
NVM
::
	`mlog2
Ğ
cŞs
 ),

421 
NVM
::
	`mlog2
Ğ
bªks
 ),

422 
NVM
::
	`mlog2
Ğ
¿nks
 ),

423 
NVM
::
	`mlog2
Ğ
chªÃls
 ),

424 
NVM
::
	`mlog2
Ğ
sub¬¿ys
 )

427 
m‘hod
->
	`S‘CouÁ
Ğ
rows
, 
cŞs
, 
bªks
, 
¿nks
, 
chªÃls
, 
sub¬¿ys
 );

428 
mcAT
->
	`S‘T¿n¦©iÚM‘hod
Ğ
m‘hod
 );

431 
¡d
::
¡ršg¡»am
 
cÚfSŒšg
;

433 
memÜy
 = 
IÁ”cÚÃùFaùÜy
::
	`C»©eIÁ”cÚÃù
Ğ
cÚf
->
	`G‘SŒšg
( "INTERCONNECT" ) );

435 
cÚfSŒšg
.
	`¡r
( "" );

436 
cÚfSŒšg
 << 
	`StName
Ğè<< ".chªÃl" << 
	`G‘ID
( );

437 
memÜy
->
	`StName
Ğ
cÚfSŒšg
.
	`¡r
( ) );

439 
memÜy
->
	`S‘P¬’t
Ğ
this
 );

440 
	`AddChd
Ğ
memÜy
 );

442 
memÜy
->
	`S‘CÚfig
Ğ
cÚf
, 
ü—‹Chd»n
 );

443 
memÜy
->
	`Regi¡”Sts
( );

445 
	`S‘M­pšgScheme
( );

455 
¡d
::
cout
 << 
	`StName
Ğè<< " c­ac™y i " << ((
p
->
ROWS
 *…->
COLS
 *…->
DeviûWidth
 *…->
tBURST
 *…->
RATE
 * (p->
BusWidth
 /…->DeviûWidthè*…->
BANKS
 *…->
RANKS
è/ (8*1024*1024)è<< " MB." << std::
’dl
;

457 ifĞ
cÚf
->
	`KeyExi¡s
( "MATHeight" ) )

459 
subA¼ayNum
 = 
p
->
ROWS
 /…->
MATHeight
;

463 
subA¼ayNum
 = 1;

467 
queueMod–
 = 
P”BªkQueues
;

468 
commªdQueueCouÁ
 = 
p
->
RANKS
 *…->
BANKS
;

469 ifĞ
cÚf
->
	`KeyExi¡s
( "QueueModel" ) )

471 ifĞ
cÚf
->
	`G‘SŒšg
( "QueueModel" ) == "PerRank" )

473 
queueMod–
 = 
P”RªkQueues
;

474 
commªdQueueCouÁ
 = 
p
->
RANKS
;

476 ifĞ
cÚf
->
	`G‘SŒšg
( "QueueModel" ) == "PerBank" )

478 
queueMod–
 = 
P”BªkQueues
;

479 
commªdQueueCouÁ
 = 
p
->
RANKS
 *…->
BANKS
;

481 ifĞ
cÚf
->
	`G‘SŒšg
( "QueueModel" ) == "PerSubArray" )

483 
queueMod–
 = 
P”SubA¼ayQueues
;

484 
commªdQueueCouÁ
 = 
p
->
RANKS
 *…->
BANKS
 * 
subA¼ayNum
;

489 
¡d
::
cout
 << "C»©šg " << 
commªdQueueCouÁ
 << " commªd queues." << std::
’dl
;

492 
commªdQueues
 = 
Ãw
 
¡d
::
deque
<
NVMašReque¡
 *> [
commªdQueueCouÁ
];

494 
aùiv©eQueued
 = 
Ãw
 
boŞ
 * [
p
->
RANKS
];

495 
»äeshQueued
 = 
Ãw
 
boŞ
 * [
p
->
RANKS
];

496 
¡¬v©iÚCouÁ”
 = 
Ãw
 
ncouÁ”_t
 ** [
p
->
RANKS
];

497 
efãùiveRow
 = 
Ãw
 
ncouÁ”_t
 ** [
p
->
RANKS
];

498 
efãùiveMuxedRow
 = 
Ãw
 
ncouÁ”_t
 ** [
p
->
RANKS
];

499 
aùiveSubA¼ay
 = 
Ãw
 
ncouÁ”_t
 ** [
p
->
RANKS
];

500 
¿nkPow”Down
 = 
Ãw
 
boŞ
 [
p
->
RANKS
];

502  
ncouÁ”_t
 
i
 = 0; i < 
p
->
RANKS
; i++ )

504 
aùiv©eQueued
[
i
] = 
Ãw
 
boŞ
[
p
->
BANKS
];

505 
»äeshQueued
[
i
] = 
Ãw
 
boŞ
[
p
->
BANKS
];

506 
aùiveSubA¼ay
[
i
] = 
Ãw
 
ncouÁ”_t
 * [
p
->
BANKS
];

507 
efãùiveRow
[
i
] = 
Ãw
 
ncouÁ”_t
 * [
p
->
BANKS
];

508 
efãùiveMuxedRow
[
i
] = 
Ãw
 
ncouÁ”_t
 * [
p
->
BANKS
];

509 
¡¬v©iÚCouÁ”
[
i
] = 
Ãw
 
ncouÁ”_t
 * [
p
->
BANKS
];

511 ifĞ
p
->
U£LowPow”
 )

512 
¿nkPow”Down
[
i
] = 
p
->
In™PD
;

514 
¿nkPow”Down
[
i
] = 
çl£
;

516  
ncouÁ”_t
 
j
 = 0; j < 
p
->
BANKS
; j++ )

518 
aùiv©eQueued
[
i
][
j
] = 
çl£
;

519 
»äeshQueued
[
i
][
j
] = 
çl£
;

521 
¡¬v©iÚCouÁ”
[
i
][
j
] = 
Ãw
 
ncouÁ”_t
 [
subA¼ayNum
];

522 
efãùiveRow
[
i
][
j
] = 
Ãw
 
ncouÁ”_t
 [
subA¼ayNum
];

523 
efãùiveMuxedRow
[
i
][
j
] = 
Ãw
 
ncouÁ”_t
 [
subA¼ayNum
];

524 
aùiveSubA¼ay
[
i
][
j
] = 
Ãw
 
ncouÁ”_t
 [
subA¼ayNum
];

526  
ncouÁ”_t
 
m
 = 0; m < 
subA¼ayNum
; m++ )

528 
¡¬v©iÚCouÁ”
[
i
][
j
][
m
] = 0;

529 
aùiveSubA¼ay
[
i
][
j
][
m
] = 
çl£
;

531 
efãùiveRow
[
i
][
j
][
m
] = 
p
->
ROWS
;

532 
efãùiveMuxedRow
[
i
][
j
][
m
] = 
p
->
ROWS
;

537 
bªkN“dReäesh
 = 
Ãw
 
boŞ
 * [
p
->
RANKS
];

538  
ncouÁ”_t
 
i
 = 0; i < 
p
->
RANKS
; i++ )

540 
bªkN“dReäesh
[
i
] = 
Ãw
 
boŞ
 [
p
->
BANKS
];

541  
ncouÁ”_t
 
j
 = 0; j < 
p
->
BANKS
; j++ )

543 
bªkN“dReäesh
[
i
][
j
] = 
çl£
;

547 
d–ayedReäeshCouÁ”
 = 
Ãw
 
ncouÁ”_t
 * [
p
->
RANKS
];

549 ifĞ
p
->
U£Reäesh
 )

552 
	`as£¹
Ğ
p
->
BªksP”Reäesh
 <ğp->
BANKS
 );

558 
	`as£¹
Ğ
p
->
BªksP”Reäesh
 != 0 );

560 
m_»äeshBªkNum
 = 
p
->
BANKS
 /…->
BªksP”Reäesh
;

563 
m_tREFI
 = 
p
->
tREFW
 / (p->
ROWS
 /…->
ReäeshRows
 );

566 
ncyşe_t
 
m_»äeshSliû
 = 
m_tREFI
 / ( 
p
->
RANKS
 * 
m_»äeshBªkNum
 );

568  
ncouÁ”_t
 
i
 = 0; i < 
p
->
RANKS
; i++ )

570 
d–ayedReäeshCouÁ”
[
i
] = 
Ãw
 
ncouÁ”_t
 [
m_»äeshBªkNum
];

573  
ncouÁ”_t
 
j
 = 0; j < 
m_»äeshBªkNum
; j++ )

575 
d–ayedReäeshCouÁ”
[
i
][
j
] = 0;

577 
ncouÁ”_t
 
»äeshBªkH—d
 = 
j
 * 
p
->
BªksP”Reäesh
;

580 
NVMašReque¡
* 
»äeshPul£
 = 
	`MakeReäeshReque¡
(

581 0, 0, 
»äeshBªkH—d
, 
i
, 0 );

585 
ncyşe_t
 
off£t
 = (
i
 * 
m_»äeshBªkNum
 + 
j
 ) * 
m_»äeshSliû
;

591 
	`G‘Ev’tQueue
()->
	`In£¹C®lback
Ğ
this
,

592 (
C®lbackPŒ
)&
MemÜyCÚŒŞËr
::
ReäeshC®lback
,

593 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
()+
m_tREFI
+
off£t
,

594 
»š‹½»t_ÿ¡
<*>(
»äeshPul£
),

595 
»äeshPriÜ™y
 );

600 ifĞ
p
->
PrštCÚfig
 )

601 
cÚfig
->
	`Pršt
();

603 
	`S‘DebugName
Ğ"MemÜyCÚŒŞËr", 
cÚf
 );

604 
	}
}

606 
	gMemÜyCÚŒŞËr
::
	$Regi¡”Sts
( )

608 
	`AddSt
(
simuÏtiÚ_cyşes
);

609 
	`AddSt
(
wakeupCouÁ
);

610 
	}
}

621 
boŞ
 
	gMemÜyCÚŒŞËr
::
	$N“dReäesh
ĞcÚ¡ 
ncouÁ”_t
 
bªk
, cÚ¡ 
ušt64_t
 
¿nk
 )

623 
boŞ
 
rv
 = 
çl£
;

625 ifĞ
p
->
U£Reäesh
 )

626 ifĞ
d–ayedReäeshCouÁ”
[
¿nk
][
bªk
/
p
->
BªksP”Reäesh
]

627 >ğ
p
->
D–ayedReäeshTh»shŞd
 )

628 
rv
 = 
Œue
;

630  
rv
;

631 
	}
}

636 
	gMemÜyCÚŒŞËr
::
	$S‘Reäesh
ĞcÚ¡ 
ncouÁ”_t
 
bªk
, cÚ¡ 
ušt64_t
 
¿nk
 )

639 
ncouÁ”_t
 
bªkH—d
 = ( 
bªk
 / 
p
->
BªksP”Reäesh
 ) *…->BanksPerRefresh;

641  
ncouÁ”_t
 
i
 = 0; i < 
p
->
BªksP”Reäesh
; i++ )

642 
bªkN“dReäesh
[
¿nk
][
bªkH—d
 + 
i
] = 
Œue
;

643 
	}
}

648 
	gMemÜyCÚŒŞËr
::
	$Re£tReäesh
ĞcÚ¡ 
ncouÁ”_t
 
bªk
, cÚ¡ 
ušt64_t
 
¿nk
 )

651 
ncouÁ”_t
 
bªkH—d
 = ( 
bªk
 / 
p
->
BªksP”Reäesh
 ) *…->BanksPerRefresh;

653  
ncouÁ”_t
 
i
 = 0; i < 
p
->
BªksP”Reäesh
; i++ )

654 
bªkN“dReäesh
[
¿nk
][
bªkH—d
 + 
i
] = 
çl£
;

655 
	}
}

660 
	gMemÜyCÚŒŞËr
::
	$Re£tReäeshQueued
ĞcÚ¡ 
ncouÁ”_t
 
bªk
, cÚ¡‚couÁ”_ˆ
¿nk
 )

663 
ncouÁ”_t
 
bªkH—d
 = ( 
bªk
 / 
p
->
BªksP”Reäesh
 ) *…->BanksPerRefresh;

665  
ncouÁ”_t
 
i
 = 0; i < 
p
->
BªksP”Reäesh
; i++ )

667 
	`as£¹
Ğ
»äeshQueued
[
¿nk
][
bªkH—d
 + 
i
] );

668 
»äeshQueued
[
¿nk
][
bªkH—d
 + 
i
] = 
çl£
;

670 
	}
}

675 
	gMemÜyCÚŒŞËr
::
	$Inüem’tReäeshCouÁ”
ĞcÚ¡ 
ncouÁ”_t
 
bªk
, cÚ¡ 
ušt64_t
 
¿nk
 )

678 
ncouÁ”_t
 
bªkGroupID
 = 
bªk
 / 
p
->
BªksP”Reäesh
;

680 
d–ayedReäeshCouÁ”
[
¿nk
][
bªkGroupID
]++;

681 
	}
}

686 
	gMemÜyCÚŒŞËr
::
	$Deüem’tReäeshCouÁ”
ĞcÚ¡ 
ncouÁ”_t
 
bªk
, cÚ¡ 
ušt64_t
 
¿nk
 )

689 
ncouÁ”_t
 
bªkGroupID
 = 
bªk
 / 
p
->
BªksP”Reäesh
;

691 
d–ayedReäeshCouÁ”
[
¿nk
][
bªkGroupID
]--;

692 
	}
}

698 
boŞ
 
	gMemÜyCÚŒŞËr
::
	$HªdËReäesh
( )

700  
ncouÁ”_t
 
¿nkIdx
 = 0;„ªkIdx < 
p
->
RANKS
;„ankIdx++ )

702 
ncouÁ”_t
 
i
 = (
ÃxtReäeshRªk
 + 
¿nkIdx
è% 
p
->
RANKS
;

704  
ncouÁ”_t
 
bªkIdx
 = 0; bªkIdx < 
m_»äeshBªkNum
; bankIdx++ )

706 
ncouÁ”_t
 
j
 = (
ÃxtReäeshBªk
 + 
bªkIdx
 * 
p
->
BªksP”Reäesh
è%…->
BANKS
;

707 
FaR—sÚ
 
ç
;

709 ifĞ
	`N“dReäesh
Ğ
j
, 
i
 ) )

712 
NVMašReque¡
* 
cmdReäesh
 = 
	`MakeReäeshReque¡
Ğ0, 0, 
j
, 
i
, 0 );

715 ifĞ
p
->
U£P»ch¬ge
 )

717  
ncouÁ”_t
 
tmpBªk
 = 0;mpBªk < 
p
->
BªksP”Reäesh
;mpBank++ )

720 
ncouÁ”_t
 
»fBªk
 = (
tmpBªk
 + 
j
è% 
p
->
BANKS
;

721 
ncouÁ”_t
 
queueId
 = 
	`G‘CommªdQueueId
Ğ
	`NVMAdd»ss
Ğ0, 0, 
»fBªk
, 
i
 , 0, 0 ) );

725 ifĞ
aùiv©eQueued
[
i
][
»fBªk
] =ğ
Œue
 )

730 
NVMašReque¡
 *
cmdRefP»
 = 
	`MakeP»ch¬geAÎReque¡
Ğ0, 0, 
»fBªk
, 
i
, 0 );

732 
commªdQueues
[
queueId
].
	`push_back
Ğ
cmdRefP»
 );

735  
ncouÁ”_t
 
§
 = 0; s¨< 
subA¼ayNum
; sa++ )

737 
aùiveSubA¼ay
[
i
][
»fBªk
][
§
] = 
çl£
;

738 
efãùiveRow
[
i
][
»fBªk
][
§
] = 
p
->
ROWS
;

739 
efãùiveMuxedRow
[
i
][
»fBªk
][
§
] = 
p
->
ROWS
;

741 
aùiv©eQueued
[
i
][
»fBªk
] = 
çl£
;

746 
ncouÁ”_t
 
queueId
 = 
	`G‘CommªdQueueId
Ğ
	`NVMAdd»ss
Ğ0, 0, 
j
, 
i
, 0, 0 ) );

749 
cmdReäesh
->
issueCyşe
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
();

750 
commªdQueues
[
queueId
].
	`push_back
Ğ
cmdReäesh
 );

752  
ncouÁ”_t
 
tmpBªk
 = 0;mpBªk < 
p
->
BªksP”Reäesh
;mpBank++ )

754 
ncouÁ”_t
 
»fBªk
 = (
tmpBªk
 + 
j
è% 
p
->
BANKS
;

757 
»äeshQueued
[
i
][
»fBªk
] = 
Œue
;

761 
	`Deüem’tReäeshCouÁ”
Ğ
j
, 
i
 );

764 ifĞ!
	`N“dReäesh
Ğ
j
, 
i
 ) )

765 
	`Re£tReäesh
Ğ
j
, 
i
 );

768 
ÃxtReäeshBªk
 +ğ
p
->
BªksP”Reäesh
;

769 ifĞ
ÃxtReäeshBªk
 >ğ
p
->
BANKS
 )

771 
ÃxtReäeshBªk
 = 0;

772 
ÃxtReäeshRªk
++;

774 ifĞ
ÃxtReäeshRªk
 =ğ
p
->
RANKS
 )

775 
ÃxtReäeshRªk
 = 0;

778 
hªdËdReäesh
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
();

780 
	`ScheduËCommªdWake
( );

783  
Œue
;

787  
çl£
;

788 
	}
}

794 
	gMemÜyCÚŒŞËr
::
	$ProûssReäeshPul£
Ğ
NVMašReque¡
* 
»äesh
 )

796 
	`as£¹
Ğ
»äesh
->
ty³
 =ğ
REFRESH
 );

798 
ncouÁ”_t
 
¿nk
, 
bªk
;

800 
»äesh
->
add»ss
.
	`G‘T¿n¦©edAdd»ss
Ğ
NULL
, NULL, &
bªk
, &
¿nk
, NULL, NULL );

802 
	`Inüem’tReäeshCouÁ”
Ğ
bªk
, 
¿nk
 );

804 ifĞ
	`N“dReäesh
Ğ
bªk
, 
¿nk
 ) )

805 
	`S‘Reäesh
Ğ
bªk
, 
¿nk
 );

807 
	`G‘Ev’tQueue
()->
	`In£¹C®lback
Ğ
this
,

808 (
C®lbackPŒ
)&
MemÜyCÚŒŞËr
::
ReäeshC®lback
,

809 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
()+
m_tREFI
,

810 
»š‹½»t_ÿ¡
<*>(
»äesh
),

811 
»äeshPriÜ™y
 );

812 
	}
}

818 
boŞ
 
	gMemÜyCÚŒŞËr
::
	$IsReäeshBªkQueueEm±y
ĞcÚ¡ 
ncouÁ”_t
 
bªk
, cÚ¡ 
ušt64_t
 
¿nk
 )

821 
ncouÁ”_t
 
bªkH—d
 = ( 
bªk
 / 
p
->
BªksP”Reäesh
 ) *…->BanksPerRefresh;

823  
ncouÁ”_t
 
i
 = 0; i < 
p
->
BªksP”Reäesh
; i++ )

825 
ncouÁ”_t
 
queueId
 = 
	`G‘CommªdQueueId
Ğ
	`NVMAdd»ss
Ğ0, 0, 
bªkH—d
 + 
i
, 
¿nk
, 0, 0 ) );

827 ifĞ!
	`Efãùiv–yEm±y
Ğ
queueId
 ) )

829  
çl£
;

833  
Œue
;

834 
	}
}

836 
	gMemÜyCÚŒŞËr
::
	$Pow”Down
ĞcÚ¡ 
ncouÁ”_t
& 
¿nkId
 )

838 
OpTy³
 
pdOp
 = 
POWERDOWN_PDPF
;

839 ifĞ
p
->
Pow”DownMode
 == "SLOWEXIT" )

840 
pdOp
 = 
POWERDOWN_PDPS
;

841 ifĞ
p
->
Pow”DownMode
 == "FASTEXIT" )

842 
pdOp
 = 
POWERDOWN_PDPF
;

844 
¡d
::
û¼
 << "NVMaš E¼Ü: Undefšed†ow…ow” mode" << std::
’dl
;

846 
NVMašReque¡
 *
pow”downReque¡
 = 
	`MakePow”downReque¡
Ğ
pdOp
, 
¿nkId
 );

849 
NVMObjeù
 *
chd
;

850 
	`FšdChdTy³
Ğ
pow”downReque¡
, 
Rªk
, 
chd
 );

851 
Rªk
 *
pdRªk
 = 
dyÇmic_ÿ¡
<Rªk *>(
chd
);

853 ifĞ
pdRªk
->
	`IdË
Ğè=ğ
çl£
 )

856 
d–‘e
 
pow”downReque¡
;

858 
pdOp
 = 
POWERDOWN_PDA
;

859 
pow”downReque¡
 = 
	`MakePow”downReque¡
Ğ
pdOp
, 
¿nkId
 );

862 ifĞ
	`RªkQueueEm±y
Ğ
¿nkId
 ) && 
	`G‘Chd
()->
	`IsIssuabË
Ğ
pow”downReque¡
 ) )

864 
	`G‘Chd
()->
	`IssueCommªd
Ğ
pow”downReque¡
 );

865 
¿nkPow”Down
[
¿nkId
] = 
Œue
;

869 
d–‘e
 
pow”downReque¡
;

871 
	}
}

873 
	gMemÜyCÚŒŞËr
::
	$Pow”Up
ĞcÚ¡ 
ncouÁ”_t
& 
¿nkId
 )

875 
NVMašReque¡
 *
pow”upReque¡
 = 
	`MakePow”upReque¡
Ğ
¿nkId
 );

878 ifĞ
	`RªkQueueEm±y
Ğ
¿nkId
 ) =ğ
çl£


879 && 
	`G‘Chd
()->
	`IsIssuabË
Ğ
pow”upReque¡
 ) )

881 
	`G‘Chd
()->
	`IssueCommªd
Ğ
pow”upReque¡
 );

882 
¿nkPow”Down
[
¿nkId
] = 
çl£
;

886 
d–‘e
 
pow”upReque¡
;

888 
	}
}

890 
	gMemÜyCÚŒŞËr
::
	$HªdËLowPow”
( )

892  
ncouÁ”_t
 
¿nkId
 = 0;„ªkId < 
p
->
RANKS
;„ankId++ )

894 
boŞ
 
ÃedReäesh
 = 
çl£
;

895 ifĞ
p
->
U£Reäesh
 )

897  
ncouÁ”_t
 
bªkId
 = 0; bªkId < 
m_»äeshBªkNum
; bankId++ )

899 
ncouÁ”_t
 
bªkGroupH—d
 = 
bªkId
 * 
p
->
BªksP”Reäesh
;

901 ifĞ
	`N“dReäesh
Ğ
bªkGroupH—d
, 
¿nkId
 ) )

903 
ÃedReäesh
 = 
Œue
;

910 ifĞ
ÃedReäesh
 )

912 
NVMašReque¡
 *
pow”upReque¡
 = 
	`MakePow”upReque¡
Ğ
¿nkId
 );

915 ifĞ
¿nkPow”Down
[
¿nkId
] && 
	`G‘Chd
()->
	`IsIssuabË
Ğ
pow”upReque¡
 ) )

917 
	`G‘Chd
()->
	`IssueCommªd
Ğ
pow”upReque¡
 );

918 
¿nkPow”Down
[
¿nkId
] = 
çl£
;

922 
d–‘e
 
pow”upReque¡
;

928 ifĞ
¿nkPow”Down
[
¿nkId
] )

929 
	`Pow”Up
Ğ
¿nkId
 );

931 
	`Pow”Down
Ğ
¿nkId
 );

934 
	}
}

936 
CÚfig
 *
	gMemÜyCÚŒŞËr
::
	$G‘CÚfig
( )

938  (
this
->
cÚfig
);

939 
	}
}

941 
	gMemÜyCÚŒŞËr
::
	$S‘ID
Ğ
id
 )

943 
this
->
id
 = id;

944 
	}
}

946 
	gMemÜyCÚŒŞËr
::
	$G‘ID
( )

948  
this
->
id
;

949 
	}
}

951 
NVMašReque¡
 *
	gMemÜyCÚŒŞËr
::
	$MakeCachedReque¡
Ğ
NVMašReque¡
 *
Œigg”Reque¡
 )

954 
	`as£¹
Ğ
Œigg”Reque¡
->
ty³
 =ğ
READ
 ||rigg”Reque¡->ty³ =ğ
WRITE
 );

956 
NVMašReque¡
 *
ÿchedReque¡
 = 
Ãw
 
	`NVMašReque¡
( );

958 *
ÿchedReque¡
 = *
Œigg”Reque¡
;

959 
ÿchedReque¡
->
ty³
 = (
Œigg”Reque¡
->ty³ =ğ
READ
 ? 
CACHED_READ
 : 
CACHED_WRITE
);

960 
ÿchedReque¡
->
owÃr
 = 
this
;

962  
ÿchedReque¡
;

963 
	}
}

965 
NVMašReque¡
 *
	gMemÜyCÚŒŞËr
::
	$MakeAùiv©eReque¡
Ğ
NVMašReque¡
 *
Œigg”Reque¡
 )

967 
NVMašReque¡
 *
aùiv©eReque¡
 = 
Ãw
 
	`NVMašReque¡
( );

969 
aùiv©eReque¡
->
ty³
 = 
ACTIVATE
;

970 
aùiv©eReque¡
->
issueCyşe
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
();

971 
aùiv©eReque¡
->
add»ss
 = 
Œigg”Reque¡
->address;

972 
aùiv©eReque¡
->
owÃr
 = 
this
;

974  
aùiv©eReque¡
;

975 
	}
}

977 
NVMašReque¡
 *
	gMemÜyCÚŒŞËr
::
	$MakeAùiv©eReque¡
ĞcÚ¡ 
ncouÁ”_t
 
row
,

978 cÚ¡ 
ncouÁ”_t
 
cŞ
,

979 cÚ¡ 
ncouÁ”_t
 
bªk
,

980 cÚ¡ 
ncouÁ”_t
 
¿nk
,

981 cÚ¡ 
ncouÁ”_t
 
sub¬¿y
 )

983 
NVMašReque¡
 *
aùiv©eReque¡
 = 
Ãw
 
	`NVMašReque¡
( );

985 
aùiv©eReque¡
->
ty³
 = 
ACTIVATE
;

986 
ncouÁ”_t
 
aùAddr
 = 
	`G‘Decod”
Ğ)->
	`Rev”£T¿n¦©e
Ğ
row
, 
cŞ
, 
bªk
, 
¿nk
, 
id
, 
sub¬¿y
 );

987 
aùiv©eReque¡
->
add»ss
.
	`S‘PhysiÿlAdd»ss
Ğ
aùAddr
 );

988 
aùiv©eReque¡
->
add»ss
.
	`S‘T¿n¦©edAdd»ss
Ğ
row
, 
cŞ
, 
bªk
, 
¿nk
, 
id
, 
sub¬¿y
 );

989 
aùiv©eReque¡
->
issueCyşe
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
();

990 
aùiv©eReque¡
->
owÃr
 = 
this
;

992  
aùiv©eReque¡
;

993 
	}
}

995 
NVMašReque¡
 *
	gMemÜyCÚŒŞËr
::
	$MakeP»ch¬geReque¡
Ğ
NVMašReque¡
 *
Œigg”Reque¡
 )

997 
NVMašReque¡
 *
´ech¬geReque¡
 = 
Ãw
 
	`NVMašReque¡
( );

999 
´ech¬geReque¡
->
ty³
 = 
PRECHARGE
;

1000 
´ech¬geReque¡
->
issueCyşe
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
();

1001 
´ech¬geReque¡
->
add»ss
 = 
Œigg”Reque¡
->address;

1002 
´ech¬geReque¡
->
owÃr
 = 
this
;

1004  
´ech¬geReque¡
;

1005 
	}
}

1007 
NVMašReque¡
 *
	gMemÜyCÚŒŞËr
::
	$MakeP»ch¬geReque¡
ĞcÚ¡ 
ncouÁ”_t
 
row
,

1008 cÚ¡ 
ncouÁ”_t
 
cŞ
,

1009 cÚ¡ 
ncouÁ”_t
 
bªk
,

1010 cÚ¡ 
ncouÁ”_t
 
¿nk
,

1011 cÚ¡ 
ncouÁ”_t
 
sub¬¿y
 )

1013 
NVMašReque¡
 *
´ech¬geReque¡
 = 
Ãw
 
	`NVMašReque¡
( );

1015 
´ech¬geReque¡
->
ty³
 = 
PRECHARGE
;

1016 
ncouÁ”_t
 
´eAddr
 = 
	`G‘Decod”
Ğ)->
	`Rev”£T¿n¦©e
Ğ
row
, 
cŞ
, 
bªk
, 
¿nk
, 
id
, 
sub¬¿y
 );

1017 
´ech¬geReque¡
->
add»ss
.
	`S‘PhysiÿlAdd»ss
Ğ
´eAddr
 );

1018 
´ech¬geReque¡
->
add»ss
.
	`S‘T¿n¦©edAdd»ss
Ğ
row
, 
cŞ
, 
bªk
, 
¿nk
, 
id
, 
sub¬¿y
 );

1019 
´ech¬geReque¡
->
issueCyşe
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
();

1020 
´ech¬geReque¡
->
owÃr
 = 
this
;

1022  
´ech¬geReque¡
;

1023 
	}
}

1025 
NVMašReque¡
 *
	gMemÜyCÚŒŞËr
::
	$MakeP»ch¬geAÎReque¡
Ğ
NVMašReque¡
 *
Œigg”Reque¡
 )

1027 
NVMašReque¡
 *
´ech¬geAÎReque¡
 = 
Ãw
 
	`NVMašReque¡
( );

1029 
´ech¬geAÎReque¡
->
ty³
 = 
PRECHARGE_ALL
;

1030 
´ech¬geAÎReque¡
->
issueCyşe
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
();

1031 
´ech¬geAÎReque¡
->
add»ss
 = 
Œigg”Reque¡
->address;

1032 
´ech¬geAÎReque¡
->
owÃr
 = 
this
;

1034  
´ech¬geAÎReque¡
;

1035 
	}
}

1037 
NVMašReque¡
 *
	gMemÜyCÚŒŞËr
::
	$MakeP»ch¬geAÎReque¡
ĞcÚ¡ 
ncouÁ”_t
 
row
,

1038 cÚ¡ 
ncouÁ”_t
 
cŞ
,

1039 cÚ¡ 
ncouÁ”_t
 
bªk
,

1040 cÚ¡ 
ncouÁ”_t
 
¿nk
,

1041 cÚ¡ 
ncouÁ”_t
 
sub¬¿y
 )

1043 
NVMašReque¡
 *
´ech¬geAÎReque¡
 = 
Ãw
 
	`NVMašReque¡
( );

1045 
´ech¬geAÎReque¡
->
ty³
 = 
PRECHARGE_ALL
;

1046 
ncouÁ”_t
 
´eAddr
 = 
	`G‘Decod”
Ğ)->
	`Rev”£T¿n¦©e
Ğ
row
, 
cŞ
, 
bªk
, 
¿nk
, 
id
, 
sub¬¿y
 );

1047 
´ech¬geAÎReque¡
->
add»ss
.
	`S‘PhysiÿlAdd»ss
Ğ
´eAddr
 );

1048 
´ech¬geAÎReque¡
->
add»ss
.
	`S‘T¿n¦©edAdd»ss
Ğ
row
, 
cŞ
, 
bªk
, 
¿nk
, 
id
, 
sub¬¿y
 );

1049 
´ech¬geAÎReque¡
->
issueCyşe
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
();

1050 
´ech¬geAÎReque¡
->
owÃr
 = 
this
;

1052  
´ech¬geAÎReque¡
;

1053 
	}
}

1055 
NVMašReque¡
 *
	gMemÜyCÚŒŞËr
::
	$MakeIm¶ic™P»ch¬geReque¡
Ğ
NVMašReque¡
 *
Œigg”Reque¡
 )

1057 ifĞ
Œigg”Reque¡
->
ty³
 =ğ
READ
 )

1058 
Œigg”Reque¡
->
ty³
 = 
READ_PRECHARGE
;

1059 ifĞ
Œigg”Reque¡
->
ty³
 =ğ
WRITE
 )

1060 
Œigg”Reque¡
->
ty³
 = 
WRITE_PRECHARGE
;

1062 
Œigg”Reque¡
->
issueCyşe
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
();

1064  
Œigg”Reque¡
;

1065 
	}
}

1067 
NVMašReque¡
 *
	gMemÜyCÚŒŞËr
::
	$MakeReäeshReque¡
ĞcÚ¡ 
ncouÁ”_t
 
row
,

1068 cÚ¡ 
ncouÁ”_t
 
cŞ
,

1069 cÚ¡ 
ncouÁ”_t
 
bªk
,

1070 cÚ¡ 
ncouÁ”_t
 
¿nk
,

1071 cÚ¡ 
ncouÁ”_t
 
sub¬¿y
 )

1073 
NVMašReque¡
 *
»äeshReque¡
 = 
Ãw
 
	`NVMašReque¡
( );

1075 
»äeshReque¡
->
ty³
 = 
REFRESH
;

1077 
ncouÁ”_t
 
´eAddr
 = 
	`G‘Decod”
Ğ)->
	`Rev”£T¿n¦©e
Ğ
row
, 
cŞ
, 
bªk
, 
¿nk
, 
id
, 
sub¬¿y
 );

1078 
»äeshReque¡
->
add»ss
.
	`S‘PhysiÿlAdd»ss
Ğ
´eAddr
 );

1079 
»äeshReque¡
->
add»ss
.
	`S‘T¿n¦©edAdd»ss
Ğ
row
, 
cŞ
, 
bªk
, 
¿nk
, 
id
, 
sub¬¿y
 );

1080 
»äeshReque¡
->
issueCyşe
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
();

1081 
»äeshReque¡
->
owÃr
 = 
this
;

1083  
»äeshReque¡
;

1084 
	}
}

1086 
NVMašReque¡
 *
	gMemÜyCÚŒŞËr
::
	$MakePow”downReque¡
Ğ
OpTy³
 
pdOp
,

1087 cÚ¡ 
ncouÁ”_t
 
¿nk
 )

1089 
NVMašReque¡
 *
pow”downReque¡
 = 
Ãw
 
	`NVMašReque¡
( );

1091 
pow”downReque¡
->
ty³
 = 
pdOp
;

1092 
ncouÁ”_t
 
pdAddr
 = 
	`G‘Decod”
Ğ)->
	`Rev”£T¿n¦©e
Ğ0, 0, 0, 
¿nk
, 
id
, 0 );

1093 
pow”downReque¡
->
add»ss
.
	`S‘PhysiÿlAdd»ss
Ğ
pdAddr
 );

1094 
pow”downReque¡
->
add»ss
.
	`S‘T¿n¦©edAdd»ss
Ğ0, 0, 0, 
¿nk
, 
id
, 0 );

1095 
pow”downReque¡
->
issueCyşe
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
();

1096 
pow”downReque¡
->
owÃr
 = 
this
;

1098  
pow”downReque¡
;

1099 
	}
}

1101 
NVMašReque¡
 *
	gMemÜyCÚŒŞËr
::
	$MakePow”upReque¡
ĞcÚ¡ 
ncouÁ”_t
 
¿nk
 )

1103 
NVMašReque¡
 *
pow”upReque¡
 = 
Ãw
 
	`NVMašReque¡
( );

1105 
pow”upReque¡
->
ty³
 = 
POWERUP
;

1106 
ncouÁ”_t
 
puAddr
 = 
	`G‘Decod”
Ğ)->
	`Rev”£T¿n¦©e
Ğ0, 0, 0, 
¿nk
, 
id
, 0 );

1107 
pow”upReque¡
->
add»ss
.
	`S‘PhysiÿlAdd»ss
Ğ
puAddr
 );

1108 
pow”upReque¡
->
add»ss
.
	`S‘T¿n¦©edAdd»ss
Ğ0, 0, 0, 
¿nk
, 
id
, 0 );

1109 
pow”upReque¡
->
issueCyşe
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
();

1110 
pow”upReque¡
->
owÃr
 = 
this
;

1112  
pow”upReque¡
;

1113 
	}
}

1115 
boŞ
 
	gMemÜyCÚŒŞËr
::
IsLa¡Reque¡
Ğ
¡d
::
li¡
<
NVMašReque¡
 *>& 
Œª§ùiÚQueue
,

1116 
NVMašReque¡
 *
»que¡
 )

1118 
boŞ
 
	grv
 = 
Œue
;

1120 ifĞ
	gp
->
	gClo£Page
 == 0 )

1122 
rv
 = 
çl£
;

1124 ifĞ
	gp
->
	gClo£Page
 == 1 )

1126 
ncouÁ”_t
 
mRªk
, 
mBªk
, 
mRow
, 
mSubA¼ay
;

1127 
	g»que¡
->
	gadd»ss
.
G‘T¿n¦©edAdd»ss
Ğ&
mRow
, 
NULL
, &
mBªk
, &
mRªk
, NULL, &
mSubA¼ay
 );

1128 
	g¡d
::
li¡
<
NVMašReque¡
 *>::
™”©Ü
 
™
;

1130  
	g™
 = 
Œª§ùiÚQueue
.
begš
(); iˆ!ğŒª§ùiÚQueue.
’d
(); it++ )

1132 
ncouÁ”_t
 
	g¿nk
, 
	gbªk
, 
	grow
, 
	gsub¬¿y
;

1134 (*
	g™
)->
	gadd»ss
.
G‘T¿n¦©edAdd»ss
Ğ&
row
, 
NULL
, &
bªk
, &
¿nk
, NULL, &
sub¬¿y
 );

1137 ifĞ
	g¿nk
 =ğ
mRªk
 && 
bªk
 =ğ
mBªk
 && 
row
 =ğ
mRow
 && 
sub¬¿y
 =ğ
mSubA¼ay
 )

1139 
rv
 = 
çl£
;

1145  
	grv
;

1148 
boŞ
 
	gMemÜyCÚŒŞËr
::
FšdSrvedReque¡
Ğ
¡d
::
li¡
<
NVMašReque¡
 *>& 
Œª§ùiÚQueue
,

1149 
NVMašReque¡
 **
¡¬vedReque¡
 )

1151 
DummyP»diÿ‹
 
	g´ed
;

1153  
FšdSrvedReque¡
Ğ
Œª§ùiÚQueue
, 
¡¬vedReque¡
, 
´ed
 );

1156 
boŞ
 
	gMemÜyCÚŒŞËr
::
FšdSrvedReque¡
Ğ
¡d
::
li¡
<
NVMašReque¡
 *>& 
Œª§ùiÚQueue
,

1157 
NVMašReque¡
 **
¡¬vedReque¡
,

1158 
SchedulšgP»diÿ‹
& 
´ed
 )

1160 
boŞ
 
	grv
 = 
çl£
;

1161 
	g¡d
::
li¡
<
NVMašReque¡
 *>::
™”©Ü
 
™
;

1163 *
	g¡¬vedReque¡
 = 
NULL
;

1165  
	g™
 = 
Œª§ùiÚQueue
.
begš
(); iˆ!ğŒª§ùiÚQueue.
’d
(); it++ )

1167 
ncouÁ”_t
 
	g¿nk
, 
	gbªk
, 
	grow
, 
	gsub¬¿y
, 
	gcŞ
;

1168 
ncouÁ”_t
 
	gqueueId
 = 
G‘CommªdQueueId
Ğ(*
™
)->
add»ss
 );

1170 ifĞ!
	gcommªdQueues
[
queueId
].
em±y
() ) ;

1172 (*
	g™
)->
	gadd»ss
.
G‘T¿n¦©edAdd»ss
Ğ&
row
, &
cŞ
, &
bªk
, &
¿nk
, 
NULL
, &
sub¬¿y
 );

1175 
ncouÁ”_t
 
	gmuxLev–
 = 
¡©ic_ÿ¡
<ncouÁ”_t>(
cŞ
 / 
p
->
RBSize
);

1177 ifĞ
	gaùiv©eQueued
[
¿nk
][
bªk
]

1178 && ( !
	gaùiveSubA¼ay
[
¿nk
][
bªk
][
sub¬¿y
]

1179 || 
	gefãùiveRow
[
¿nk
][
bªk
][
sub¬¿y
] !ğ
row


1180 || 
efãùiveMuxedRow
[
¿nk
][
bªk
][
sub¬¿y
] !ğ
muxLev–
 )

1181 && !
bªkN“dReäesh
[
¿nk
][
bªk
]

1182 && !
»äeshQueued
[
¿nk
][
bªk
]

1183 && 
¡¬v©iÚCouÁ”
[
¿nk
][
bªk
][
sub¬¿y
]

1184 >ğ
¡¬v©iÚTh»shŞd


1185 && (*
™
)->
¬riv®Cyşe
 !ğ
G‘Ev’tQueue
()->
G‘Cu¼’tCyşe
()

1186 && 
commªdQueues
[
queueId
].
em±y
()

1187 && 
´ed
Ğ(*
™
) ) )

1189 *
¡¬vedReque¡
 = (*
™
);

1190 
	gŒª§ùiÚQueue
.
”a£
Ğ
™
 );

1200 ifĞ
IsLa¡Reque¡
Ğ
Œª§ùiÚQueue
, (*
¡¬vedReque¡
) ) )

1201 (*
	g¡¬vedReque¡
)->
	gæags
 |ğ
NVMašReque¡
::
FLAG_LAST_REQUEST
;

1203 
	grv
 = 
Œue
;

1208  
	grv
;

1214 
boŞ
 
	gMemÜyCÚŒŞËr
::
FšdCachedAdd»ss
Ğ
¡d
::
li¡
<
NVMašReque¡
 *>& 
Œª§ùiÚQueue
,

1215 
NVMašReque¡
 **
acûssibËReque¡
 )

1217 
DummyP»diÿ‹
 
	g´ed
;

1219  
FšdCachedAdd»ss
Ğ
Œª§ùiÚQueue
, 
acûssibËReque¡
, 
´ed
 );

1225 
boŞ
 
	gMemÜyCÚŒŞËr
::
FšdCachedAdd»ss
Ğ
¡d
::
li¡
<
NVMašReque¡
 *>& 
Œª§ùiÚQueue
,

1226 
NVMašReque¡
 **
acûssibËReque¡
,

1227 
SchedulšgP»diÿ‹
& 
´ed
 )

1229 
boŞ
 
	grv
 = 
çl£
;

1230 
	g¡d
::
li¡
<
NVMašReque¡
 *>::
™”©Ü
 
™
;

1232 *
	gacûssibËReque¡
 = 
NULL
;

1234  
	g™
 = 
Œª§ùiÚQueue
.
begš
(); iˆ!ğŒª§ùiÚQueue.
’d
(); it++ )

1236 
ncouÁ”_t
 
	gqueueId
 = 
G‘CommªdQueueId
Ğ(*
™
)->
add»ss
 );

1237 
NVMašReque¡
 *
	gÿchedReque¡
 = 
MakeCachedReque¡
Ğ(*
™
) );

1239 ifĞ
	gcommªdQueues
[
queueId
].
em±y
()

1240 && 
G‘Chd
Ğ)->
IsIssuabË
Ğ
ÿchedReque¡
 )

1241 && (*
	g™
)->
	g¬riv®Cyşe
 !ğ
G‘Ev’tQueue
()->
G‘Cu¼’tCyşe
()

1242 && 
´ed
Ğ(*
™
 ) ) )

1248 *
acûssibËReque¡
 = (*
™
);

1249 
	gŒª§ùiÚQueue
.
”a£
Ğ
™
 );

1251 
d–‘e
 
	gÿchedReque¡
;

1253 
	grv
 = 
Œue
;

1257 
d–‘e
 
	gÿchedReque¡
;

1260  
	grv
;

1263 
boŞ
 
	gMemÜyCÚŒŞËr
::
FšdWr™eSÎedR—d
Ğ
¡d
::
li¡
<
NVMašReque¡
 *>& 
Œª§ùiÚQueue
,

1264 
NVMašReque¡
 **
h™Reque¡
 )

1266 
DummyP»diÿ‹
 
	g´ed
;

1268  
FšdWr™eSÎedR—d
Ğ
Œª§ùiÚQueue
, 
h™Reque¡
, 
´ed
 );

1271 
boŞ
 
	gMemÜyCÚŒŞËr
::
FšdWr™eSÎedR—d
Ğ
¡d
::
li¡
<
NVMašReque¡
 *>& 
Œª§ùiÚQueue
,

1272 
NVMašReque¡
 **
h™Reque¡
, 
SchedulšgP»diÿ‹
& 
´ed
 )

1274 
boŞ
 
	grv
 = 
çl£
;

1275 
	g¡d
::
li¡
<
NVMašReque¡
 *>::
™”©Ü
 
™
;

1277 *
	gh™Reque¡
 = 
NULL
;

1279 ifĞ!
	gp
->
	gWr™ePausšg
 )

1280  
	gçl£
;

1282  
	g™
 = 
Œª§ùiÚQueue
.
begš
(); iˆ!ğŒª§ùiÚQueue.
’d
(); it++ )

1284 ifĞ(*
	g™
)->
	gty³
 !ğ
READ
 )

1287 
ncouÁ”_t
 
	g¿nk
, 
	gbªk
, 
	grow
, 
	gsub¬¿y
, 
	gcŞ
;

1288 
ncouÁ”_t
 
	gqueueId
 = 
G‘CommªdQueueId
Ğ(*
™
)->
add»ss
 );

1290 ifĞ!
	gcommªdQueues
[
queueId
].
em±y
() ) ;

1292 (*
	g™
)->
	gadd»ss
.
G‘T¿n¦©edAdd»ss
Ğ&
row
, &
cŞ
, &
bªk
, &
¿nk
, 
NULL
, &
sub¬¿y
 );

1295 
SubA¼ay
 *
	gwr™šgA¼ay
 = 
FšdChd
Ğ(*
™
), SubArray );

1298 ifĞ
	gwr™šgA¼ay
 =ğ
NULL
 )

1299  
çl£
;

1306 
NVMašReque¡
 *
	g‹¡Aùiv©e
 = 
MakeAùiv©eReque¡
Ğ(*
™
) );

1307 
	g‹¡Aùiv©e
->
	gæags
 |ğ
NVMašReque¡
::
FLAG_PRIORITY
;

1309 ifĞ!
	gbªkN“dReäesh
[
¿nk
][
bªk
]

1310 && !
	g»äeshQueued
[
¿nk
][
bªk
]

1311 && 
	gwr™šgA¼ay
->
IsWr™šg
( )

1312 && ( 
G‘Chd
Ğ)->
IsIssuabË
Ğ(*
™
 ) )

1313 || 
G‘Chd
Ğ)->
IsIssuabË
Ğ
‹¡Aùiv©e
 ) )

1314 && (*
	g™
)->
	g¬riv®Cyşe
 !ğ
G‘Ev’tQueue
()->
G‘Cu¼’tCyşe
()

1315 && 
commªdQueues
[
queueId
].
em±y
()

1316 && 
´ed
Ğ(*
™
) ) )

1318 ifĞ!
wr™šgA¼ay
->
B‘w“nWr™eI‹¿tiÚs
Ğè&& 
p
->
·u£Mode
 =ğ
Pau£Mode_NÜm®
 )

1320 
d–‘e
 
‹¡Aùiv©e
;

1323 
	grv
 = 
Œue
;

1327 *
	gh™Reque¡
 = (*
™
);

1328 
	gŒª§ùiÚQueue
.
”a£
Ğ
™
 );

1330 
d–‘e
 
	g‹¡Aùiv©e
;

1340 ifĞ
IsLa¡Reque¡
Ğ
Œª§ùiÚQueue
, (*
h™Reque¡
) ) )

1341 (*
	gh™Reque¡
)->
	gæags
 |ğ
NVMašReque¡
::
FLAG_LAST_REQUEST
;

1343 
	grv
 = 
Œue
;

1348 
d–‘e
 
	g‹¡Aùiv©e
;

1351  
	grv
;

1356 
boŞ
 
	gMemÜyCÚŒŞËr
::
FšdRowBufãrH™
Ğ
¡d
::
li¡
<
NVMašReque¡
 *>& 
Œª§ùiÚQueue
,

1357 
NVMašReque¡
 **
h™Reque¡
 )

1359 
DummyP»diÿ‹
 
	g´ed
;

1360  
FšdRowBufãrH™
Ğ
Œª§ùiÚQueue
, 
h™Reque¡
, 
´ed
 );

1373 
boŞ
 
	gMemÜyCÚŒŞËr
::
FšdRowBufãrH™
Ğ
¡d
::
li¡
<
NVMašReque¡
 *>& 
Œª§ùiÚQueue
,

1374 
NVMašReque¡
 **
h™Reque¡
, 
SchedulšgP»diÿ‹
& 
´ed
 )

1376 
	g¡d
::
li¡
<
NVMašReque¡
 *>::
™”©Ü
 
™
;

1378 *
	gh™Reque¡
 = 
NULL
;

1379 
boŞ
 
	g»t
 = 
çl£
;

1380  
	g™
 = 
Œª§ùiÚQueue
.
begš
(); iˆ!ğŒª§ùiÚQueue.
’d
(); it++ )

1382 
ncouÁ”_t
 
	g¿nk
, 
	gbªk
, 
	grow
, 
	gsub¬¿y
, 
	gcŞ
;

1383 
ncouÁ”_t
 
	gqueueId
 = 
G‘CommªdQueueId
Ğ(*
™
)->
add»ss
 );

1385 ifĞ!
	gcommªdQueues
[
queueId
].
em±y
() ) ;

1387 (*
	g™
)->
	gadd»ss
.
G‘T¿n¦©edAdd»ss
Ğ&
row
, &
cŞ
, &
bªk
, &
¿nk
, 
NULL
, &
sub¬¿y
 );

1390 
ncouÁ”_t
 
	gmuxLev–
 = 
¡©ic_ÿ¡
<ncouÁ”_t>(
cŞ
 / 
p
->
RBSize
);

1392 ifĞ
	gaùiv©eQueued
[
¿nk
][
bªk
]

1393 && 
	gaùiveSubA¼ay
[
¿nk
][
bªk
][
sub¬¿y
]

1394 && 
	gefãùiveRow
[
¿nk
][
bªk
][
sub¬¿y
] =ğ
row


1395 && 
efãùiveMuxedRow
[
¿nk
][
bªk
][
sub¬¿y
] =ğ
muxLev–


1396 && !
bªkN“dReäesh
[
¿nk
][
bªk
]

1397 && !
»äeshQueued
[
¿nk
][
bªk
]

1398 && (*
™
)->
¬riv®Cyşe
 !ğ
G‘Ev’tQueue
()->
G‘Cu¼’tCyşe
()

1399 && 
commªdQueues
[
queueId
].
em±y
( )

1400 && 
´ed
Ğ(*
™
) ) )

1402 *
h™Reque¡
 = (*
™
);

1403 
	gŒª§ùiÚQueue
.
”a£
Ğ
™
 );

1413 ifĞ
IsLa¡Reque¡
Ğ
Œª§ùiÚQueue
, (*
h™Reque¡
) ) )

1414 (*
	gh™Reque¡
)->
	gæags
 |ğ
NVMašReque¡
::
FLAG_LAST_REQUEST
;

1416 
	g»t
 = 
Œue
;

1420  
	g»t
;

1423 
boŞ
 
	gMemÜyCÚŒŞËr
::
FšdOlde¡R—dyReque¡
Ğ
¡d
::
li¡
<
NVMašReque¡
 *>& 
Œª§ùiÚQueue
,

1424 
NVMašReque¡
 **
Şde¡Reque¡
 )

1426 
DummyP»diÿ‹
 
	g´ed
;

1428  
FšdOlde¡R—dyReque¡
Ğ
Œª§ùiÚQueue
, 
Şde¡Reque¡
, 
´ed
 );

1431 
boŞ
 
	gMemÜyCÚŒŞËr
::
FšdOlde¡R—dyReque¡
Ğ
¡d
::
li¡
<
NVMašReque¡
 *>& 
Œª§ùiÚQueue
,

1432 
NVMašReque¡
 **
Şde¡Reque¡
,

1433 
SchedulšgP»diÿ‹
& 
´ed
 )

1435 
boŞ
 
	grv
 = 
çl£
;

1436 
	g¡d
::
li¡
<
NVMašReque¡
 *>::
™”©Ü
 
™
;

1438 *
	gŞde¡Reque¡
 = 
NULL
;

1440  
	g™
 = 
Œª§ùiÚQueue
.
begš
(); iˆ!ğŒª§ùiÚQueue.
’d
(); it++ )

1442 
ncouÁ”_t
 
	g¿nk
, 
	gbªk
;

1443 
ncouÁ”_t
 
	gqueueId
 = 
G‘CommªdQueueId
Ğ(*
™
)->
add»ss
 );

1445 ifĞ!
	gcommªdQueues
[
queueId
].
em±y
() ) ;

1447 (*
	g™
)->
	gadd»ss
.
G‘T¿n¦©edAdd»ss
Ğ
NULL
, NULL, &
bªk
, &
¿nk
, NULL, NULL );

1449 ifĞ
	gaùiv©eQueued
[
¿nk
][
bªk
]

1450 && !
	gbªkN“dReäesh
[
¿nk
][
bªk
]

1451 && !
	g»äeshQueued
[
¿nk
][
bªk
]

1452 && 
	gcommªdQueues
[
queueId
].
em±y
()

1453 && (*
	g™
)->
	g¬riv®Cyşe
 !ğ
G‘Ev’tQueue
()->
G‘Cu¼’tCyşe
()

1454 && 
´ed
Ğ(*
™
) ) )

1456 *
Şde¡Reque¡
 = (*
™
);

1457 
	gŒª§ùiÚQueue
.
”a£
Ğ
™
 );

1467 ifĞ
IsLa¡Reque¡
Ğ
Œª§ùiÚQueue
, (*
Şde¡Reque¡
) ) )

1468 (*
	gŞde¡Reque¡
)->
	gæags
 |ğ
NVMašReque¡
::
FLAG_LAST_REQUEST
;

1470 
	grv
 = 
Œue
;

1475  
	grv
;

1478 
boŞ
 
	gMemÜyCÚŒŞËr
::
FšdClo£dBªkReque¡
Ğ
¡d
::
li¡
<
NVMašReque¡
 *>& 
Œª§ùiÚQueue
,

1479 
NVMašReque¡
 **
şo£dReque¡
 )

1481 
DummyP»diÿ‹
 
	g´ed
;

1483  
FšdClo£dBªkReque¡
Ğ
Œª§ùiÚQueue
, 
şo£dReque¡
, 
´ed
 );

1486 
boŞ
 
	gMemÜyCÚŒŞËr
::
FšdClo£dBªkReque¡
Ğ
¡d
::
li¡
<
NVMašReque¡
 *>& 
Œª§ùiÚQueue
,

1487 
NVMašReque¡
 **
şo£dReque¡
,

1488 
SchedulšgP»diÿ‹
& 
´ed
 )

1490 
boŞ
 
	grv
 = 
çl£
;

1491 
	g¡d
::
li¡
<
NVMašReque¡
 *>::
™”©Ü
 
™
;

1493 *
	gşo£dReque¡
 = 
NULL
;

1495  
	g™
 = 
Œª§ùiÚQueue
.
begš
(); iˆ!ğŒª§ùiÚQueue.
’d
(); it++ )

1497 
ncouÁ”_t
 
	g¿nk
, 
	gbªk
;

1498 
ncouÁ”_t
 
	gqueueId
 = 
G‘CommªdQueueId
Ğ(*
™
)->
add»ss
 );

1500 ifĞ!
	gcommªdQueues
[
queueId
].
em±y
() ) ;

1502 (*
	g™
)->
	gadd»ss
.
G‘T¿n¦©edAdd»ss
Ğ
NULL
, NULL, &
bªk
, &
¿nk
, NULL, NULL );

1504 ifĞ!
	gaùiv©eQueued
[
¿nk
][
bªk
]

1505 && !
	gbªkN“dReäesh
[
¿nk
][
bªk
]

1506 && !
	g»äeshQueued
[
¿nk
][
bªk
]

1507 && 
	gcommªdQueues
[
queueId
].
em±y
()

1508 && (*
	g™
)->
	g¬riv®Cyşe
 !ğ
G‘Ev’tQueue
()->
G‘Cu¼’tCyşe
()

1509 && 
´ed
Ğ(*
™
) ) )

1511 *
şo£dReque¡
 = (*
™
);

1512 
	gŒª§ùiÚQueue
.
”a£
Ğ
™
 );

1522 ifĞ
IsLa¡Reque¡
Ğ
Œª§ùiÚQueue
, (*
şo£dReque¡
) ) )

1523 (*
	gşo£dReque¡
)->
	gæags
 |ğ
NVMašReque¡
::
FLAG_LAST_REQUEST
;

1525 
	grv
 = 
Œue
;

1530  
	grv
;

1533 
boŞ
 
	gMemÜyCÚŒŞËr
::
DummyP»diÿ‹
::
	$İ”©Ü
(èĞ
NVMašReque¡
* )

1535  
Œue
;

1536 
	}
}

1543 
boŞ
 
	gMemÜyCÚŒŞËr
::
	$IssueMemÜyCommªds
Ğ
NVMašReque¡
 *
»q
 )

1545 
boŞ
 
rv
 = 
çl£
;

1546 
ncouÁ”_t
 
¿nk
, 
bªk
, 
row
, 
sub¬¿y
, 
cŞ
;

1548 
»q
->
add»ss
.
	`G‘T¿n¦©edAdd»ss
Ğ&
row
, &
cŞ
, &
bªk
, &
¿nk
, 
NULL
, &
sub¬¿y
 );

1550 
SubA¼ay
 *
wr™šgA¼ay
 = 
	`FšdChd
Ğ
»q
, SubArray );

1552 
ncouÁ”_t
 
muxLev–
 = 
¡©ic_ÿ¡
<ncouÁ”_t>(
cŞ
 / 
p
->
RBSize
);

1553 
ncouÁ”_t
 
queueId
 = 
	`G‘CommªdQueueId
Ğ
»q
->
add»ss
 );

1560 
FaR—sÚ
 
»asÚ
;

1561 
NVMašReque¡
 *
ÿchedReque¡
 = 
	`MakeCachedReque¡
Ğ
»q
 );

1563 ifĞ
	`G‘Chd
Ğ)->
	`IsIssuabË
Ğ
ÿchedReque¡
, &
»asÚ
 ) )

1566 iàĞ!
aùiv©eQueued
[
¿nk
][
bªk
]

1567 || !
aùiveSubA¼ay
[
¿nk
][
bªk
][
sub¬¿y
]

1568 || 
efãùiveRow
[
¿nk
][
bªk
][
sub¬¿y
] !ğ
row


1569 || 
efãùiveMuxedRow
[
¿nk
][
bªk
][
sub¬¿y
] !ğ
muxLev–
 )

1571 
»q
->
issueCyşe
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
();

1574 
commªdQueues
[
queueId
].
	`push_back
Ğ
»q
 );

1576 
d–‘e
 
ÿchedReque¡
;

1578  
Œue
;

1582 
d–‘e
 
ÿchedReque¡
;

1587 
d–‘e
 
ÿchedReque¡
;

1590 ifĞ!
aùiv©eQueued
[
¿nk
][
bªk
] && 
commªdQueues
[
queueId
].
	`em±y
() )

1593 
aùiv©eQueued
[
¿nk
][
bªk
] = 
Œue
;

1594 
aùiveSubA¼ay
[
¿nk
][
bªk
][
sub¬¿y
] = 
Œue
;

1595 
efãùiveRow
[
¿nk
][
bªk
][
sub¬¿y
] = 
row
;

1596 
efãùiveMuxedRow
[
¿nk
][
bªk
][
sub¬¿y
] = 
muxLev–
;

1597 
¡¬v©iÚCouÁ”
[
¿nk
][
bªk
][
sub¬¿y
] = 0;

1599 
»q
->
issueCyşe
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
();

1601 
NVMašReque¡
 *
aùReque¡
 = 
	`MakeAùiv©eReque¡
Ğ
»q
 );

1602 
aùReque¡
->
æags
 |ğ(
wr™šgA¼ay
 !ğ
NULL
 && wr™šgA¼ay->
	`IsWr™šg
Ğ)è? 
NVMašReque¡
::
FLAG_PRIORITY
 : 0;

1603 
commªdQueues
[
queueId
].
	`push_back
Ğ
aùReque¡
 );

1612 ifĞ
»q
->
æags
 & 
NVMašReque¡
::
FLAG_LAST_REQUEST
 && 
p
->
U£P»ch¬ge
 )

1614 
commªdQueues
[
queueId
].
	`push_back
Ğ
	`MakeIm¶ic™P»ch¬geReque¡
Ğ
»q
 ) );

1615 
aùiveSubA¼ay
[
¿nk
][
bªk
][
sub¬¿y
] = 
çl£
;

1616 
efãùiveRow
[
¿nk
][
bªk
][
sub¬¿y
] = 
p
->
ROWS
;

1617 
efãùiveMuxedRow
[
¿nk
][
bªk
][
sub¬¿y
] = 
p
->
ROWS
;

1618 
aùiv©eQueued
[
¿nk
][
bªk
] = 
çl£
;

1622 
commªdQueues
[
queueId
].
	`push_back
Ğ
»q
 );

1625 
rv
 = 
Œue
;

1627 ifĞ
aùiv©eQueued
[
¿nk
][
bªk
]

1628 && ( !
aùiveSubA¼ay
[
¿nk
][
bªk
][
sub¬¿y
]

1629 || 
efãùiveRow
[
¿nk
][
bªk
][
sub¬¿y
] !ğ
row


1630 || 
efãùiveMuxedRow
[
¿nk
][
bªk
][
sub¬¿y
] !ğ
muxLev–
 )

1631 && 
commªdQueues
[
queueId
].
	`em±y
() )

1634 
¡¬v©iÚCouÁ”
[
¿nk
][
bªk
][
sub¬¿y
] = 0;

1635 
aùiv©eQueued
[
¿nk
][
bªk
] = 
Œue
;

1637 
»q
->
issueCyşe
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
();

1639 ifĞ
aùiveSubA¼ay
[
¿nk
][
bªk
][
sub¬¿y
] && 
p
->
U£P»ch¬ge
 )

1641 
commªdQueues
[
queueId
].
	`push_back
(

1642 
	`MakeP»ch¬geReque¡
Ğ
efãùiveRow
[
¿nk
][
bªk
][
sub¬¿y
], 0, bank,„ank, subarray ) );

1645 
NVMašReque¡
 *
aùReque¡
 = 
	`MakeAùiv©eReque¡
Ğ
»q
 );

1646 
aùReque¡
->
æags
 |ğ(
wr™šgA¼ay
 !ğ
NULL
 && wr™šgA¼ay->
	`IsWr™šg
Ğ)è? 
NVMašReque¡
::
FLAG_PRIORITY
 : 0;

1647 
commªdQueues
[
queueId
].
	`push_back
Ğ
aùReque¡
 );

1648 
commªdQueues
[
queueId
].
	`push_back
Ğ
»q
 );

1649 
aùiveSubA¼ay
[
¿nk
][
bªk
][
sub¬¿y
] = 
Œue
;

1650 
efãùiveRow
[
¿nk
][
bªk
][
sub¬¿y
] = 
row
;

1651 
efãùiveMuxedRow
[
¿nk
][
bªk
][
sub¬¿y
] = 
muxLev–
;

1653 
rv
 = 
Œue
;

1655 ifĞ
aùiv©eQueued
[
¿nk
][
bªk
]

1656 && 
aùiveSubA¼ay
[
¿nk
][
bªk
][
sub¬¿y
]

1657 && 
efãùiveRow
[
¿nk
][
bªk
][
sub¬¿y
] =ğ
row


1658 && 
efãùiveMuxedRow
[
¿nk
][
bªk
][
sub¬¿y
] =ğ
muxLev–
 )

1660 
¡¬v©iÚCouÁ”
[
¿nk
][
bªk
][
sub¬¿y
]++;

1662 
»q
->
issueCyşe
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
();

1671 ifĞ
»q
->
æags
 & 
NVMašReque¡
::
FLAG_LAST_REQUEST
 && 
p
->
U£P»ch¬ge
 )

1674 
	`as£¹
Ğ
p
->
Clo£Page
 != 2 );

1676 
commªdQueues
[
queueId
].
	`push_back
Ğ
	`MakeIm¶ic™P»ch¬geReque¡
Ğ
»q
 ) );

1677 
aùiveSubA¼ay
[
¿nk
][
bªk
][
sub¬¿y
] = 
çl£
;

1678 
efãùiveRow
[
¿nk
][
bªk
][
sub¬¿y
] = 
p
->
ROWS
;

1679 
efãùiveMuxedRow
[
¿nk
][
bªk
][
sub¬¿y
] = 
p
->
ROWS
;

1681 
boŞ
 
idË
 = 
Œue
;

1682  
ncouÁ”_t
 
i
 = 0; i < 
subA¼ayNum
; i++ )

1684 ifĞ
aùiveSubA¼ay
[
¿nk
][
bªk
][
i
] =ğ
Œue
 )

1686 
idË
 = 
çl£
;

1691 ifĞ
idË
 )

1692 
aùiv©eQueued
[
¿nk
][
bªk
] = 
çl£
;

1696 
commªdQueues
[
queueId
].
	`push_back
Ğ
»q
 );

1699 
rv
 = 
Œue
;

1703 
rv
 = 
çl£
;

1707 ifĞ
rv
 =ğ
Œue
 )

1709 
	`ScheduËCommªdWake
( );

1712  
rv
;

1713 
	}
}

1715 
	gMemÜyCÚŒŞËr
::
	$CyşeCommªdQueues
( )

1717 ifĞ
p
->
U£LowPow”
 && !p->
Ev’tDriv’
 )

1719 
	`HªdËLowPow”
( );

1723 ifĞ
p
->
U£Reäesh
 && !p->
Ev’tDriv’
 )

1725 ifĞ
	`HªdËReäesh
( ) )

1733 ifĞ
p
->
Ev’tDriv’


1734 && 
hªdËdReäesh
 =ğ
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
() )

1739  
ncouÁ”_t
 
queueIdx
 = 0; queueIdx < 
commªdQueueCouÁ
; queueIdx++ )

1745 
ncouÁ”_t
 
queueId
 = (
curQueue
 + 
queueIdx
è% 
commªdQueueCouÁ
;

1746 
FaR—sÚ
 
ç
;

1748 ifĞ!
commªdQueues
[
queueId
].
	`em±y
( )

1749 && 
Ï¡IssueCyşe
 !ğ
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
()

1750 && 
	`G‘Chd
Ğ)->
	`IsIssuabË
Ğ
commªdQueues
[
queueId
].
	`©
Ğ0 ), &
ç
 ) )

1752 
NVMašReque¡
 *
queueH—d
 = 
commªdQueues
[
queueId
].
	`©
( 0 );

1754 *
debugSŒ—m
 << 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
() << " MemoryController: Issued„equestype "

1755 << 
queueH—d
->
ty³
 << " fÜ‡dd»s 0x" << 
¡d
::
hex


1756 << 
queueH—d
->
add»ss
.
	`G‘PhysiÿlAdd»ss
()

1757 << 
¡d
::
dec
 << " fÜ queu" << 
queueId
 << std::
’dl
;

1759 
	`G‘Chd
Ğ)->
	`IssueCommªd
Ğ
queueH—d
 );

1761 
queueH—d
->
æags
 |ğ
NVMašReque¡
::
FLAG_ISSUED
;

1763 ifĞ
queueH—d
->
ty³
 =ğ
REFRESH
 )

1764 
	`Re£tReäeshQueued
Ğ
queueH—d
->
add»ss
.
	`G‘Bªk
(),

1765 
queueH—d
->
add»ss
.
	`G‘Rªk
() );

1767 ifĞ
	`G‘Ev’tQueue
Ğ)->
	`G‘Cu¼’tCyşe
Ğè!ğ
Ï¡IssueCyşe
 )

1768 
Ï¡IssueCyşe
 = 
	`G‘Ev’tQueue
Ğ)->
	`G‘Cu¼’tCyşe
( );

1771 
ncyşe_t
 
ş—nupCyşe
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
() + 1;

1772 
boŞ
 
ş—nupScheduËd
 = 
	`G‘Ev’tQueue
()->
	`FšdC®lback
Ğ
this
,

1773 (
C®lbackPŒ
)&
MemÜyCÚŒŞËr
::
CËªupC®lback
,

1774 
ş—nupCyşe
, 
NULL
, 
ş—nupPriÜ™y
 );

1776 ifĞ!
ş—nupScheduËd
 )

1777 
	`G‘Ev’tQueue
Ğ)->
	`In£¹C®lback
Ğ
this
,

1778 (
C®lbackPŒ
)&
MemÜyCÚŒŞËr
::
CËªupC®lback
,

1779 
ş—nupCyşe
, 
NULL
, 
ş—nupPriÜ™y
 );

1782 ifĞ
p
->
Ev’tDriv’
 && 
commªdQueues
[
queueId
].
	`size
( ) == 1 )

1785 ifĞ
	`T¿n§ùiÚAvaabË
Ğ
queueId
 ) )

1787 
ncyşe_t
 
ÃxtWakeup
 = 
	`G‘Ev’tQueue
Ğ)->
	`G‘Cu¼’tCyşe
( ) + 1;

1789 
	`G‘Ev’tQueue
Ğ)->
	`In£¹Ev’t
Ğ
Ev’tCyşe
, 
this
, 
ÃxtWakeup
, 
NULL
, 
Œª§ùiÚQueuePriÜ™y
 );

1795 
	`MoveCu¼’tQueue
( );

1800 ifĞ!
commªdQueues
[
queueId
].
	`em±y
( ) )

1802 
NVMašReque¡
 *
queueH—d
 = 
commªdQueues
[
queueId
].
	`©
( 0 );

1804 ifĞĞ
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
(è- 
queueH—d
->
issueCyşe
 ) > 
p
->
D—dlockTim”
 )

1806 
ncouÁ”_t
 
row
, 
cŞ
, 
bªk
, 
¿nk
, 
chªÃl
, 
sub¬¿y
;

1807 
queueH—d
->
add»ss
.
	`G‘T¿n¦©edAdd»ss
Ğ&
row
, &
cŞ
, &
bªk
, &
¿nk
, &
chªÃl
, &
sub¬¿y
 );

1808 
¡d
::
cout
 << "NVMain Warning: Operation could‚ot be sento memory‡fter‡ very†ongime: "

1809 << 
¡d
::
’dl
;

1810 
¡d
::
cout
 << " Add»ss: 0x" << std::
hex


1811 << 
queueH—d
->
add»ss
.
	`G‘PhysiÿlAdd»ss
( )

1812 << 
¡d
::
dec
 << " @ Bªk " << 
bªk
 << ", Rªk " << 
¿nk
 << ", ChªÃÈ" << 
chªÃl


1813 << " Sub¬¿y " << 
sub¬¿y
 << " Row " << 
row
 << " CŞumÀ" << 
cŞ


1814 << ". Queuedime: " << 
queueH—d
->
¬riv®Cyşe


1815 << ". Issutime: " << 
queueH—d
->
issueCyşe


1816 << ". Cu¼’ˆtime: " << 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
() << ". Type: "

1817 << 
queueH—d
->
ty³
 << 
¡d
::
’dl
;

1820 #iâdeà
NDEBUG


1821 
	`¿i£
Ğ
SIGSTOP
 );

1823 
	`G‘Sts
Ğ)->
	`PrštAÎ
Ğ
¡d
::
û¼
 );

1824 
	`ex™
(1);

1828 
	}
}

1837 
ncouÁ”_t
 
	gMemÜyCÚŒŞËr
::
	$G‘CommªdQueueId
Ğ
NVMAdd»ss
 
addr
 )

1839 
ncouÁ”_t
 
queueId
 = 
¡d
::
num”ic_lim™s
<ncouÁ”_t>::
	`max
( );

1841 ifĞ
queueMod–
 =ğ
P”RªkQueues
 )

1844 
queueId
 = 
addr
.
	`G‘Rªk
( );

1846 ifĞ
queueMod–
 =ğ
P”BªkQueues
 )

1849 ifĞ
p
->
ScheduËScheme
 == 1 )

1852 
queueId
 = (
addr
.
	`G‘Bªk
Ğè* 
p
->
RANKS
 +‡ddr.
	`G‘Rªk
( ));

1854 ifĞ
p
->
ScheduËScheme
 == 2 )

1857 
queueId
 = (
addr
.
	`G‘Rªk
Ğè* 
p
->
BANKS
 +‡ddr.
	`G‘Bªk
( ));

1860 ifĞ
queueMod–
 =ğ
P”SubA¼ayQueues
 )

1863 
queueId
 = (
addr
.
	`G‘Rªk
Ğè* 
p
->
BANKS
 * 
subA¼ayNum
)

1864 + (
addr
.
	`G‘Bªk
Ğè* 
subA¼ayNum
è+‡ddr.
	`G‘SubA¼ay
( );

1867 
	`as£¹
Ğ
queueId
 < 
commªdQueueCouÁ
 );

1869  
queueId
;

1870 
	}
}

1872 
ncyşe_t
 
	gMemÜyCÚŒŞËr
::
	$NextIssuabË
Ğ
NVMašReque¡
 * )

1875 
ncyşe_t
 
ÃxtWakeup
 = 
¡d
::
num”ic_lim™s
<ncyşe_t>::
	`max
( );

1878  
ncouÁ”_t
 
¿nkIdx
 = 0;„ªkIdx < 
p
->
RANKS
;„ankIdx++ )

1880  
ncouÁ”_t
 
bªkIdx
 = 0; bªkIdx < 
p
->
BANKS
; bankIdx++ )

1883 
ncouÁ”_t
 
queueIdx
 = 
	`G‘CommªdQueueId
Ğ
	`NVMAdd»ss
Ğ0, 0, 
bªkIdx
, 
¿nkIdx
, 0, 0 ) );

1886 ifĞ
	`N“dReäesh
Ğ
bªkIdx
, 
¿nkIdx
 )

1887 && 
	`IsReäeshBªkQueueEm±y
Ğ
bªkIdx
, 
¿nkIdx
 ) )

1889 ifĞ
Ï¡IssueCyşe
 !ğ
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
() )

1890 
	`HªdËReäesh
( );

1892 
ÃxtWakeup
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
() + 1;

1895 ifĞ
commªdQueues
[
queueIdx
].
	`em±y
( ) )

1898 
NVMašReque¡
 *
queueH—d
 = 
commªdQueues
[
queueIdx
].
	`©
( 0 );

1904 
ÃxtWakeup
 = 
	`MIN
ĞÃxtWakeup, 
	`G‘Chd
Ğ)->
	`NextIssuabË
Ğ
queueH—d
 ) );

1908 ifĞ
ÃxtWakeup
 <ğ
	`G‘Ev’tQueue
Ğ)->
	`G‘Cu¼’tCyşe
( ) )

1909 
ÃxtWakeup
 = 
	`G‘Ev’tQueue
Ğ)->
	`G‘Cu¼’tCyşe
( ) + 1;

1911  
ÃxtWakeup
;

1912 
	}
}

1918 
boŞ
 
	gMemÜyCÚŒŞËr
::
	$RªkQueueEm±y
ĞcÚ¡ 
ncouÁ”_t
& 
¿nkId
 )

1920 
boŞ
 
rv
 = 
Œue
;

1922  
ncouÁ”_t
 
i
 = 0; i < 
p
->
BANKS
; i++ )

1924 
ncouÁ”_t
 
queueId
 = 
	`G‘CommªdQueueId
Ğ
	`NVMAdd»ss
Ğ0, 0, 
i
, 
¿nkId
, 0, 0 ) );

1925 ifĞ
commªdQueues
[
queueId
].
	`em±y
Ğè=ğ
çl£
 )

1927 
rv
 = 
çl£
;

1932  
rv
;

1933 
	}
}

1938 
boŞ
 
	gMemÜyCÚŒŞËr
::
	$Efãùiv–yEm±y
ĞcÚ¡ 
ncouÁ”_t
& 
queueId
 )

1940 
	`as£¹
(
queueId
 < 
commªdQueueCouÁ
);

1942 
boŞ
 
efãùiv–yEm±y
 = (
commªdQueues
[
queueId
].
	`size
( ) == 1)

1943 && (
	`WasIssued
(
commªdQueues
[
queueId
].
	`©
(0)));

1945  (
commªdQueues
[
queueId
].
	`em±y
(è|| 
efãùiv–yEm±y
);

1946 
	}
}

1951 
	gMemÜyCÚŒŞËr
::
	$MoveCu¼’tQueue
( )

1954 ifĞ
p
->
ScheduËScheme
 != 0 )

1956 
curQueue
++;

1957 ifĞ
curQueue
 > 
commªdQueueCouÁ
 )

1959 
curQueue
 = 0;

1962 
	}
}

1964 
	gMemÜyCÚŒŞËr
::
	$C®cuÏ‹Sts
( )

1967 ifĞ
p
->
Ev’tDriv’
 )

1969 
ncyşe_t
 
syncCyşes
 = 
	`G‘Ev’tQueue
Ğ)->
	`G‘Cu¼’tCyşe
Ğè- 
Ï¡CommªdWake
;

1970 
	`G‘Chd
Ğ)->
	`Cyşe
Ğ
syncCyşes
 );

1973 
simuÏtiÚ_cyşes
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
();

1975 
	`G‘Chd
Ğ)->
	`C®cuÏ‹Sts
( );

1976 
	`G‘Decod”
Ğ)->
	`C®cuÏ‹Sts
( );

1977 
	}
}

	@src/MemoryController.h

36 #iâdeà
__MEMORYCONTROLLER_H__


37 
	#__MEMORYCONTROLLER_H__


	)

39 
	~<¡ršg
>

40 
	~<veùÜ
>

41 
	~"¤c/NVMObjeù.h
"

42 
	~"¤c/CÚfig.h
"

43 
	~"¤c/IÁ”cÚÃù.h
"

44 
	~"¤c/Add»ssT¿n¦©Ü.h
"

45 
	~"šşude/NVMašReque¡.h
"

46 
	~<deque
>

47 
	~<io¡»am
>

48 
	~<li¡
>

51 
Çme¥aû
 
	gNVM
 {

54 
	eProûssÜOp
 { 
	gLOAD
, 
	gSTORE
 };

55 
	eQueueMod–
 { 
	gP”RªkQueues
, 
	gP”BªkQueues
, 
	gP”SubA¼ayQueues
 };

65 cÚ¡ 
	gŒª§ùiÚQueuePriÜ™y
 = 30;

66 cÚ¡ 
	gcommªdQueuePriÜ™y
 = 40;

67 cÚ¡ 
	g»äeshPriÜ™y
 = 20;

68 cÚ¡ 
	glowPow”PriÜ™y
 = 10;

69 cÚ¡ 
	gş—nupPriÜ™y
 = -10;

71 şas 
	cSchedulšgP»diÿ‹


73 
	gpublic
:

74 
SchedulšgP»diÿ‹
( ) { }

75 ~
SchedulšgP»diÿ‹
( ) { }

77 
vœtu®
 
boŞ
 
İ”©Ü
(è(
NVMašReque¡
 * ) {  
Œue
; }

82 şas 
	cCom¶em’tP»diÿ‹
 : 
public
 
SchedulšgP»diÿ‹


84 
´iv©e
:

85 
Com¶em’tP»diÿ‹
() {}

87 
SchedulšgP»diÿ‹
 *
´ed
;

89 
	gpublic
:

90 
ex¶ic™
 
Com¶em’tP»diÿ‹
Ğ
SchedulšgP»diÿ‹
 *
_´ed
 ) : 
´ed
(_pred) { }

91 ~
Com¶em’tP»diÿ‹
( ) { }

93 
boŞ
 
İ”©Ü
(è(
NVMašReque¡
 *
»que¡
)

95  !Ğ(*
´ed
)Ğ
»que¡
 ) );

100 şas 
	cMemÜyCÚŒŞËr
 : 
public
 
NVMObjeù


102 
public
:

103 
MemÜyCÚŒŞËr
( );

104 ~
MemÜyCÚŒŞËr
( );

107 
In™Queues
Ğ
numQueues
 );

108 
In™BªkQueues
Ğ
numQueues
 );

110 
vœtu®
 
boŞ
 
Reque¡Com¶‘e
Ğ
NVMašReque¡
 *
»que¡
 );

111 
vœtu®
 
boŞ
 
IsIssuabË
Ğ
NVMašReque¡
 *
»que¡
, 
FaR—sÚ
 *
ç
 );

112 
ncyşe_t
 
NextIssuabË
Ğ
NVMašReque¡
 *
»que¡
 );

114 
vœtu®
 
Regi¡”Sts
( );

115 
vœtu®
 
C®cuÏ‹Sts
( );

117 
CommªdQueueC®lback
Ğ*
d©a
 );

118 
CËªupC®lback
Ğ*
d©a
 );

119 
ReäeshC®lback
Ğ*
d©a
 );

120 
vœtu®
 
Cyşe
Ğ
ncyşe_t
 
¡•s
 );

122 
vœtu®
 
S‘CÚfig
Ğ
CÚfig
 *
cÚf
, 
boŞ
 
ü—‹Chd»n
 = 
Œue
 );

123 
S‘M­pšgScheme
( );

124 
CÚfig
 *
G‘CÚfig
( );

126 
S‘ID
Ğ
id
 );

127 
G‘ID
( );

129 
	g´Ùeùed
:

130 
IÁ”cÚÃù
 *
memÜy
;

131 
CÚfig
 *
	gcÚfig
;

132 
ncouÁ”_t
 
	gpsIÁ”v®
;

133 
ncyşe_t
 
	gÏ¡CommªdWake
;

134 
ncouÁ”_t
 
	gwakeupCouÁ
;

135 
ncyşe_t
 
	gÏ¡IssueCyşe
;

137 
	g¡d
::
li¡
<
NVMašReque¡
 *> *
Œª§ùiÚQueues
;

138 
	g¡d
::
deque
<
NVMašReque¡
 *> *
commªdQueues
;

139 
ncouÁ”_t
 
	gcommªdQueueCouÁ
;

140 
ncouÁ”_t
 
	gŒª§ùiÚQueueCouÁ
;

141 
QueueMod–
 
	gqueueMod–
;

143 
ncouÁ”_t
 
G‘CommªdQueueId
Ğ
NVMAdd»ss
 
addr
 );

145 
boŞ
 **
	gaùiv©eQueued
;

146 
boŞ
 **
	g»äeshQueued
;

147 
ncouÁ”_t
 ***
	gefãùiveRow
;

148 
ncouÁ”_t
 ***
	gefãùiveMuxedRow
;

149 
ncouÁ”_t
 ***
	gaùiveSubA¼ay
;

150 
ncouÁ”_t
 ***
	g¡¬v©iÚCouÁ”
;

151 
ncouÁ”_t
 
	g¡¬v©iÚTh»shŞd
;

152 
ncouÁ”_t
 
	gsubA¼ayNum
;

154 
boŞ
 *
	g¿nkPow”Down
;

156 
boŞ
 
T¿n§ùiÚAvaabË
Ğ
ncouÁ”_t
 
queueId
 );

157 
ScheduËCommªdWake
( );

158 
P»queue
Ğ
ncouÁ”_t
 
queueNum
, 
NVMašReque¡
 *
»que¡
 );

159 
Enqueue
Ğ
ncouÁ”_t
 
queueNum
, 
NVMašReque¡
 *
»que¡
 );

161 
NVMašReque¡
 *
MakeCachedReque¡
ĞNVMašReque¡ *
Œigg”Reque¡
 );

162 
NVMašReque¡
 *
MakeAùiv©eReque¡
ĞNVMašReque¡ *
Œigg”Reque¡
 );

163 
NVMašReque¡
 *
MakeAùiv©eReque¡
ĞcÚ¡ 
ncouÁ”_t
, const‚counter_t,

164 cÚ¡ 
ncouÁ”_t
, const‚counter_t,

165 cÚ¡ 
ncouÁ”_t
 );

166 
NVMašReque¡
 *
MakeIm¶ic™P»ch¬geReque¡
ĞNVMašReque¡ *
Œigg”Reque¡
 );

167 
NVMašReque¡
 *
MakeP»ch¬geReque¡
ĞNVMašReque¡ *
Œigg”Reque¡
 );

168 
NVMašReque¡
 *
MakeP»ch¬geReque¡
ĞcÚ¡ 
ncouÁ”_t
, const‚counter_t,

169 cÚ¡ 
ncouÁ”_t
, const‚counter_t,

170 cÚ¡ 
ncouÁ”_t
 );

171 
NVMašReque¡
 *
MakeP»ch¬geAÎReque¡
ĞNVMašReque¡ *
Œigg”Reque¡
 );

172 
NVMašReque¡
 *
MakeP»ch¬geAÎReque¡
ĞcÚ¡ 
ncouÁ”_t
, const‚counter_t,

173 cÚ¡ 
ncouÁ”_t
, const‚counter_t,

174 cÚ¡ 
ncouÁ”_t
 );

175 
NVMašReque¡
 *
MakeReäeshReque¡
ĞcÚ¡ 
ncouÁ”_t
, const‚counter_t,

176 cÚ¡ 
ncouÁ”_t
, const‚counter_t,

177 cÚ¡ 
ncouÁ”_t
 );

178 
NVMašReque¡
 *
MakePow”downReque¡
Ğ
OpTy³
 
pdOp
,

179 cÚ¡ 
ncouÁ”_t
 
¿nk
 );

180 
NVMašReque¡
 *
MakePow”upReque¡
ĞcÚ¡ 
ncouÁ”_t
 
¿nk
 );

184 
boŞ
 
FšdSrvedReque¡
Ğ
¡d
::
li¡
<
NVMašReque¡
 *>& 
Œª§ùiÚQueue
, NVMašReque¡ **
¡¬vedReque¡
 );

185 
boŞ
 
FšdCachedAdd»ss
Ğ
¡d
::
li¡
<
NVMašReque¡
 *>& 
Œª§ùiÚQueue
, NVMašReque¡ **
acûssibËReque¡
 );

186 
boŞ
 
FšdRowBufãrH™
Ğ
¡d
::
li¡
<
NVMašReque¡
 *>& 
Œª§ùiÚQueue
, NVMašReque¡ **
h™Reque¡
 );

187 
boŞ
 
FšdWr™eSÎedR—d
Ğ
¡d
::
li¡
<
NVMašReque¡
 *>& 
Œª§ùiÚQueue
, NVMašReque¡ **
h™Reque¡
 );

188 
boŞ
 
FšdOlde¡R—dyReque¡
Ğ
¡d
::
li¡
<
NVMašReque¡
 *>& 
Œª§ùiÚQueue
, NVMašReque¡ **
Şde¡Reque¡
 );

189 
boŞ
 
FšdClo£dBªkReque¡
Ğ
¡d
::
li¡
<
NVMašReque¡
 *>& 
Œª§ùiÚQueue
, NVMašReque¡ **
şo£dReque¡
 );

190 
boŞ
 
FšdSrvedReque¡s
Ğ
¡d
::
li¡
<
NVMašReque¡
 *>& 
Œª§ùiÚQueue
, std::
veùÜ
<NVMašReque¡ *>& 
¡¬vedReque¡s
 );

191 
boŞ
 
FšdRowBufãrH™s
Ğ
¡d
::
li¡
<
NVMašReque¡
 *>& 
Œª§ùiÚQueue
, std::
veùÜ
<NVMašReque¡ *>& 
h™Reque¡s
 );

192 
boŞ
 
FšdOlde¡R—dyReque¡s
Ğ
¡d
::
li¡
<
NVMašReque¡
 *>& 
Œª§ùiÚQueue
, std::
veùÜ
<NVMašReque¡ *>& 
Şde¡Reque¡s
 );

193 
boŞ
 
FšdClo£dBªkReque¡s
Ğ
¡d
::
li¡
<
NVMašReque¡
 *>& 
Œª§ùiÚQueue
, std::
veùÜ
<NVMašReque¡ *>& 
şo£dReque¡s
 );

196 
boŞ
 
IssueMemÜyCommªds
Ğ
NVMašReque¡
 *
»q
 );

197 
CyşeCommªdQueues
( );

199 
boŞ
 
FšdSrvedReque¡
Ğ
¡d
::
li¡
<
NVMašReque¡
 *>& 
Œª§ùiÚQueue
, NVMašReque¡ **
¡¬vedReque¡
, 
NVM
::
SchedulšgP»diÿ‹
& 
p
 );

200 
boŞ
 
FšdCachedAdd»ss
Ğ
¡d
::
li¡
<
NVMašReque¡
 *>& 
Œª§ùiÚQueue
, NVMašReque¡ **
acûssibËReque¡
, 
NVM
::
SchedulšgP»diÿ‹
& 
p
 );

201 
boŞ
 
FšdRowBufãrH™
Ğ
¡d
::
li¡
<
NVMašReque¡
 *>& 
Œª§ùiÚQueue
, NVMašReque¡ **
h™Reque¡
, 
NVM
::
SchedulšgP»diÿ‹
& 
p
 );

202 
boŞ
 
FšdWr™eSÎedR—d
Ğ
¡d
::
li¡
<
NVMašReque¡
 *>& 
Œª§ùiÚQueue
, NVMašReque¡ **
h™Reque¡
, 
NVM
::
SchedulšgP»diÿ‹
& 
p
 );

203 
boŞ
 
FšdOlde¡R—dyReque¡
Ğ
¡d
::
li¡
<
NVMašReque¡
 *>& 
Œª§ùiÚQueue
, NVMašReque¡ **
Şde¡Reque¡
, 
NVM
::
SchedulšgP»diÿ‹
& 
p
 );

204 
boŞ
 
FšdClo£dBªkReque¡
Ğ
¡d
::
li¡
<
NVMašReque¡
 *>& 
Œª§ùiÚQueue
, NVMašReque¡ **
şo£dReque¡
, 
NVM
::
SchedulšgP»diÿ‹
& 
p
 );

205 
boŞ
 
FšdSrvedReque¡s
Ğ
¡d
::
li¡
<
NVMašReque¡
 *>& 
Œª§ùiÚQueue
, std::
veùÜ
<NVMašReque¡ *>& 
¡¬vedReque¡s
, 
NVM
::
SchedulšgP»diÿ‹
& 
p
 );

206 
boŞ
 
FšdRowBufãrH™s
Ğ
¡d
::
li¡
<
NVMašReque¡
 *>& 
Œª§ùiÚQueue
, std::
veùÜ
<NVMašReque¡ *>& 
h™Reque¡s
, 
NVM
::
SchedulšgP»diÿ‹
& 
p
 );

207 
boŞ
 
FšdOlde¡R—dyReque¡s
Ğ
¡d
::
li¡
<
NVMašReque¡
 *>& 
Œª§ùiÚQueue
, std::
veùÜ
<NVMašReque¡ *>& 
Şde¡Reque¡s
, 
NVM
::
SchedulšgP»diÿ‹
& 
p
 );

208 
boŞ
 
FšdClo£dBªkReque¡s
Ğ
¡d
::
li¡
<
NVMašReque¡
 *>& 
Œª§ùiÚQueue
, std::
veùÜ
<NVMašReque¡ *>& 
şo£dReque¡s
, 
NVM
::
SchedulšgP»diÿ‹
& 
p
 );

211 
vœtu®
 
boŞ
 
IsLa¡Reque¡
Ğ
¡d
::
li¡
<
NVMašReque¡
 *>& 
Œª§ùiÚQueue
, NVMašReque¡ *
»que¡
);

213 
ncouÁ”_t
 
	gcurQueue
;

215 
MoveCu¼’tQueue
( );

217 
ncouÁ”_t
 **
	gd–ayedReäeshCouÁ”
;

220 
boŞ
 **
	gbªkN“dReäesh
;

223 
ncyşe_t
 
	gm_tREFI
;

225 
ncouÁ”_t
 
	gm_»äeshBªkNum
;

227 
boŞ
 
N“dReäesh
(cÚ¡ 
ncouÁ”_t
, const‚counter_t);

229 
ProûssReäeshPul£
Ğ
NVMašReque¡
* );

231 
boŞ
 
IsReäeshBªkQueueEm±y
(cÚ¡ 
ncouÁ”_t
, const‚counter_t);

234 
S‘Reäesh
(cÚ¡ 
ncouÁ”_t
, const‚counter_t);

236 
Re£tReäesh
(cÚ¡ 
ncouÁ”_t
, const‚counter_t);

239 
Re£tReäeshQueued
ĞcÚ¡ 
ncouÁ”_t
 
bªk
, cÚ¡‚couÁ”_ˆ
¿nk
 );

242 
Inüem’tReäeshCouÁ”
(cÚ¡ 
ncouÁ”_t
, const‚counter_t);

244 
Deüem’tReäeshCouÁ”
(cÚ¡ 
ncouÁ”_t
, const‚counter_t);

246 
ncyşe_t
 
	ghªdËdReäesh
;

248 
ncouÁ”_t
 
	gÃxtReäeshRªk
, 
	gÃxtReäeshBªk
;

250 
vœtu®
 
boŞ
 
HªdËReäesh
( );

253 
boŞ
 
RªkQueueEm±y
ĞcÚ¡ 
ncouÁ”_t
& );

255 
Pow”Down
ĞcÚ¡ 
ncouÁ”_t
& );

256 
Pow”Up
ĞcÚ¡ 
ncouÁ”_t
& );

257 
vœtu®
 
HªdËLowPow”
( );

260 
boŞ
 
Efãùiv–yEm±y
ĞcÚ¡ 
ncouÁ”_t
& );

262 şas 
	cDummyP»diÿ‹
 : 
public
 
SchedulšgP»diÿ‹


264 
public
:

265 
boŞ
 
İ”©Ü
(èĞ
NVMašReque¡
* 
»que¡
 );

268 
ncouÁ”_t
 
	gid
;

271 
ncouÁ”_t
 
	gsimuÏtiÚ_cyşes
;

	@src/NVMObject.cpp

36 
	~"¤c/NVMObjeù.h
"

37 
	~"šşude/NVMašReque¡.h
"

38 
	~"¤c/Ev’tQueue.h
"

39 
	~"¤c/Add»ssT¿n¦©Ü.h
"

40 
	~"¤c/Rªk.h
"

41 
	~"¤c/Debug.h
"

43 
	~<ÿs£¹
>

44 
	~<®gÜ™hm
>

46 
usšg
 
Çme¥aû
 
	gNVM
;

48 
	gNVMObjeù_hook
::
	$NVMObjeù_hook
Ğ
NVMObjeù
 *
t
 )

50 
ŒampŞše
 = 
t
;

51 
	}
}

53 
	gNVMObjeù_hook
::~
	$NVMObjeù_hook
( )

55 
	}
}

57 
boŞ
 
NVMObjeù_hook
::
	$IssueCommªd
Ğ
NVMašReque¡
 *
»q
 )

59 
boŞ
 
rv
 = 
Œue
, 
drİReque¡
 = 
çl£
;

61 
¡d
::
veùÜ
<
NVMObjeù
 *>& 
´eHooks
 = 
ŒampŞše
->
	`G‘Hooks
Ğ
NVMHOOK_PREISSUE
 );

63 
¡d
::
veùÜ
<
NVMObjeù
 *>& 
po¡Hooks
 = 
ŒampŞše
->
	`G‘Hooks
Ğ
NVMHOOK_POSTISSUE
 );

64 
¡d
::
veùÜ
<
NVMObjeù
 *>::
™”©Ü
 
™
;

67  
™
 = 
´eHooks
.
	`begš
(); iˆ!ğ´eHooks.
	`’d
(); it++ )

69 (*
™
)->
	`S‘P¬’t
Ğ
ŒampŞše
 );

70 (*
™
)->
	`S‘Cu¼’tHookTy³
Ğ
NVMHOOK_PREISSUE
 );

71 
drİReque¡
 = !(*
™
)->
	`IssueCommªd
Ğ
»q
 );

72 (*
™
)->
	`Un£tP¬’t
( );

77 ifĞ!
drİReque¡
 )

78 
rv
 = 
ŒampŞše
->
	`IssueCommªd
Ğ
»q
 );

81  
™
 = 
po¡Hooks
.
	`begš
(); iˆ!ğpo¡Hooks.
	`’d
(); it++ )

83 (*
™
)->
	`S‘P¬’t
Ğ
ŒampŞše
 );

84 (*
™
)->
	`S‘Cu¼’tHookTy³
Ğ
NVMHOOK_POSTISSUE
 );

85 (*
™
)->
	`IssueCommªd
Ğ
»q
 );

86 (*
™
)->
	`Un£tP¬’t
( );

89  
rv
;

90 
	}
}

92 
boŞ
 
	gNVMObjeù_hook
::
	$IsIssuabË
Ğ
NVMašReque¡
 *
»q
, 
FaR—sÚ
 *
»asÚ
 )

94  
ŒampŞše
->
	`IsIssuabË
Ğ
»q
, 
»asÚ
 );

95 
	}
}

97 
boŞ
 
	gNVMObjeù_hook
::
	$IssueAtomic
Ğ
NVMašReque¡
 *
»q
 )

99 
boŞ
 
rv
 = 
Œue
, 
drİReque¡
 = 
çl£
;

100 
¡d
::
veùÜ
<
NVMObjeù
 *>& 
´eHooks
 = 
ŒampŞše
->
	`G‘Hooks
Ğ
NVMHOOK_PREISSUE
 );

101 
¡d
::
veùÜ
<
NVMObjeù
 *>& 
po¡Hooks
 = 
ŒampŞše
->
	`G‘Hooks
Ğ
NVMHOOK_POSTISSUE
 );

102 
¡d
::
veùÜ
<
NVMObjeù
 *>::
™”©Ü
 
™
;

105  
™
 = 
´eHooks
.
	`begš
(); iˆ!ğ´eHooks.
	`’d
(); it++ )

107 (*
™
)->
	`S‘P¬’t
Ğ
ŒampŞše
 );

108 (*
™
)->
	`S‘Cu¼’tHookTy³
Ğ
NVMHOOK_PREISSUE
 );

109 
drİReque¡
 = !(*
™
)->
	`IssueAtomic
Ğ
»q
 );

110 (*
™
)->
	`Un£tP¬’t
( );

114 ifĞ!
drİReque¡
 )

115 
rv
 = 
ŒampŞše
->
	`IssueAtomic
Ğ
»q
 );

118  
™
 = 
po¡Hooks
.
	`begš
(); iˆ!ğpo¡Hooks.
	`’d
(); it++ )

120 (*
™
)->
	`S‘P¬’t
Ğ
ŒampŞše
 );

121 (*
™
)->
	`S‘Cu¼’tHookTy³
Ğ
NVMHOOK_POSTISSUE
 );

122 (*
™
)->
	`IssueAtomic
Ğ
»q
 );

123 (*
™
)->
	`Un£tP¬’t
( );

126  
rv
;

127 
	}
}

129 
boŞ
 
	gNVMObjeù_hook
::
	$IssueFunùiÚ®
Ğ
NVMašReque¡
 *
»q
 )

131 
boŞ
 
rv
 = 
Œue
, 
drİReque¡
 = 
çl£
;

132 
¡d
::
veùÜ
<
NVMObjeù
 *>& 
´eHooks
 = 
ŒampŞše
->
	`G‘Hooks
Ğ
NVMHOOK_PREISSUE
 );

133 
¡d
::
veùÜ
<
NVMObjeù
 *>& 
po¡Hooks
 = 
ŒampŞše
->
	`G‘Hooks
Ğ
NVMHOOK_POSTISSUE
 );

134 
¡d
::
veùÜ
<
NVMObjeù
 *>::
™”©Ü
 
™
;

137  
™
 = 
´eHooks
.
	`begš
(); iˆ!ğ´eHooks.
	`’d
(); it++ )

139 (*
™
)->
	`S‘P¬’t
Ğ
ŒampŞše
 );

140 (*
™
)->
	`S‘Cu¼’tHookTy³
Ğ
NVMHOOK_PREISSUE
 );

141 
drİReque¡
 = !(*
™
)->
	`IssueAtomic
Ğ
»q
 );

142 (*
™
)->
	`Un£tP¬’t
( );

146 ifĞ!
drİReque¡
 )

147 
rv
 = 
ŒampŞše
->
	`IssueFunùiÚ®
Ğ
»q
 );

150  
™
 = 
po¡Hooks
.
	`begš
(); iˆ!ğpo¡Hooks.
	`’d
(); it++ )

152 (*
™
)->
	`S‘P¬’t
Ğ
ŒampŞše
 );

153 (*
™
)->
	`S‘Cu¼’tHookTy³
Ğ
NVMHOOK_POSTISSUE
 );

154 (*
™
)->
	`IssueAtomic
Ğ
»q
 );

155 (*
™
)->
	`Un£tP¬’t
( );

158  
rv
;

159 
	}
}

161 
ncyşe_t
 
	gNVMObjeù_hook
::
	$NextIssuabË
Ğ
NVMašReque¡
 *
»q
 )

163  
ŒampŞše
->
	`NextIssuabË
Ğ
»q
 );

164 
	}
}

166 
boŞ
 
	gNVMObjeù_hook
::
	$IdË
( )

168  
ŒampŞše
->
	`IdË
( );

169 
	}
}

171 
	gNVMObjeù_hook
::
	$NÙify
Ğ
NVMašReque¡
 *
»q
 )

173 
ŒampŞše
->
	`NÙify
Ğ
»q
 );

174 
	}
}

176 
boŞ
 
	gNVMObjeù_hook
::
	$Reque¡Com¶‘e
Ğ
NVMašReque¡
 *
»q
 )

178 
boŞ
 
rv
;

179 
¡d
::
veùÜ
<
NVMObjeù
 *>& 
´eHooks
 = 
ŒampŞše
->
	`G‘Hooks
Ğ
NVMHOOK_PREISSUE
 );

180 
¡d
::
veùÜ
<
NVMObjeù
 *>& 
po¡Hooks
 = 
ŒampŞše
->
	`G‘Hooks
Ğ
NVMHOOK_POSTISSUE
 );

181 
¡d
::
veùÜ
<
NVMObjeù
 *>::
™”©Ü
 
™
;

184  
™
 = 
´eHooks
.
	`begš
(); iˆ!ğ´eHooks.
	`’d
(); it++ )

187 (*
™
)->
	`S‘P¬’t
Ğ
ŒampŞše
 );

188 (*
™
)->
	`S‘Cu¼’tHookTy³
Ğ
NVMHOOK_PREISSUE
 );

189 (*
™
)->
	`Reque¡Com¶‘e
Ğ
»q
 );

190 (*
™
)->
	`Un£tP¬’t
( );

194  
™
 = 
po¡Hooks
.
	`begš
(); iˆ!ğpo¡Hooks.
	`’d
(); it++ )

197 (*
™
)->
	`S‘P¬’t
Ğ
ŒampŞše
 );

198 (*
™
)->
	`S‘Cu¼’tHookTy³
Ğ
NVMHOOK_POSTISSUE
 );

199 (*
™
)->
	`Reque¡Com¶‘e
Ğ
»q
 );

200 (*
™
)->
	`Un£tP¬’t
( );

204 
rv
 = 
ŒampŞše
->
	`Reque¡Com¶‘e
Ğ
»q
 );

206  
rv
;

207 
	}
}

209 
	gNVMObjeù_hook
::
	$C®lback
Ğ*
d©a
 )

212 
ŒampŞše
->
	`C®lback
Ğ
d©a
 );

213 
	}
}

215 
	gNVMObjeù_hook
::
	$C®cuÏ‹Sts
( )

217 ifĞ
ŒampŞše
->
	`G‘Decod”
( ) )

218 
ŒampŞše
->
	`G‘Decod”
Ğ)->
	`C®cuÏ‹Sts
( );

220 
ŒampŞše
->
	`C®cuÏ‹Sts
( );

221 
	}
}

223 
	gNVMObjeù_hook
::
	$Re£tSts
( )

225 
ŒampŞše
->
	`Re£tSts
( );

226 
	}
}

228 
	gNVMObjeù_hook
::
	$PrštH›¿rchy
Ğ
d•th
 )

230 
ŒampŞše
->
	`PrštH›¿rchy
Ğ
d•th
 );

231 
	}
}

233 
	gNVMObjeù_hook
::
	$S‘Sts
Ğ
Sts
 *
s
 )

235 
ŒampŞše
->
	`S‘Sts
Ğ
s
 );

236 
	}
}

238 
Sts
 *
	gNVMObjeù_hook
::
	$G‘Sts
( )

240  
ŒampŞše
->
	`G‘Sts
( );

241 
	}
}

243 
	gNVMObjeù_hook
::
	$Regi¡”Sts
( )

245 
ŒampŞše
->
	`Regi¡”Sts
( );

246 
	}
}

248 
	gNVMObjeù_hook
::
StName
Ğ
¡d
::
¡ršg
 
Çme
 )

250 
ŒampŞše
->
StName
Ğ
Çme
 );

253 
	g¡d
::
¡ršg
 
NVMObjeù_hook
::
	$StName
( )

255  
ŒampŞše
->
	`StName
( );

256 
	}
}

258 
	gNVMObjeù_hook
::
	$Cyşe
Ğ
ncyşe_t
 
¡•s
 )

260 
ŒampŞše
->
	`Cyşe
Ğ
¡•s
 );

261 
	}
}

263 
NVMObjeù
 *
	gNVMObjeù_hook
::
	$G‘T¿mpŞše
( )

265  
ŒampŞše
;

266 
	}
}

268 
	gNVMObjeù
::
	$NVMObjeù
( )

270 
·»Á
 = 
NULL
;

271 
decod”
 = 
NULL
;

272 
chd»n
.
	`ş—r
( );

273 
ev’tQueue
 = 
NULL
;

274 
hookTy³
 = 
NVMHOOK_NONE
;

275 
hooks
 = 
Ãw
 
¡d
::
veùÜ
<
NVMObjeù
 *> [
NVMHOOK_COUNT
];

276 
debugSŒ—m
 = 
NULL
;

277 
gG’
 = 
NULL
;

278 
	}
}

280 
	gNVMObjeù
::~
	$NVMObjeù
( )

282  
size_t
 
chdIdx
 = 0; chdIdx < 
	`G‘ChdCouÁ
( ); childIdx++ )

284 
d–‘e
 
chd»n
[
chdIdx
];

286 
	}
}

288 
	gNVMObjeù
::
	$In™
Ğ
CÚfig
 * )

290 
	}
}

292 
NVMObjeù
::
	$NÙify
Ğ
NVMašReque¡
 * )

294 
	}
}

296 
boŞ
 
NVMObjeù
::
	$IssueAtomic
Ğ
NVMašReque¡
 * )

298  
Œue
;

299 
	}
}

301 
boŞ
 
	gNVMObjeù
::
	$IssueFunùiÚ®
Ğ
NVMašReque¡
 * )

303  
Œue
;

304 
	}
}

306 
boŞ
 
	gNVMObjeù
::
	$IssueCommªd
Ğ
NVMašReque¡
 * )

308  
çl£
;

309 
	}
}

311 
boŞ
 
	gNVMObjeù
::
	$IsIssuabË
Ğ
NVMašReque¡
 *, 
FaR—sÚ
 * )

313  
Œue
;

314 
	}
}

316 
ncyşe_t
 
	gNVMObjeù
::
	$NextIssuabË
Ğ
NVMašReque¡
 *
»q
 )

319  
	`G‘Chd
Ğ
»q
 )->
	`NextIssuabË
(„eq );

320 
	}
}

322 
boŞ
 
	gNVMObjeù
::
	$IdË
( )

324  
Œue
;

325 
	}
}

327 
boŞ
 
	gNVMObjeù
::
	$Reque¡Com¶‘e
Ğ
NVMašReque¡
 *
»que¡
 )

329 
boŞ
 
rv
 = 
çl£
;

335 ifĞ
»que¡
->
owÃr
 =ğ
this
 )

337 
d–‘e
 
»que¡
;

338 
rv
 = 
Œue
;

350 
rv
 = 
	`G‘P¬’t
Ğ)->
	`Reque¡Com¶‘e
Ğ
»que¡
 );

353  
rv
;

354 
	}
}

356 
	gNVMObjeù
::
	$C®lback
( * )

359 
	}
}

361 
NVMObjeù
::
	$S‘Ev’tQueue
Ğ
Ev’tQueue
 *
eq
 )

363 
ev’tQueue
 = 
eq
;

364 
	}
}

366 
Ev’tQueue
 *
	gNVMObjeù
::
	$G‘Ev’tQueue
( )

368  
ev’tQueue
;

369 
	}
}

371 
	gNVMObjeù
::
	$S‘Glob®Ev’tQueue
Ğ
Glob®Ev’tQueue
 *
geq
 )

373 
glob®Ev’tQueue
 = 
geq
;

374 
	}
}

376 
Glob®Ev’tQueue
 *
	gNVMObjeù
::
	$G‘Glob®Ev’tQueue
( )

378  
glob®Ev’tQueue
;

379 
	}
}

381 
	gNVMObjeù
::
	$S‘P¬’t
Ğ
NVMObjeù
 *
p
 )

383 
NVMObjeù_hook
 *
hook
 = 
Ãw
 
	`NVMObjeù_hook
Ğ
p
 );

385 
·»Á
 = 
hook
;

386 
	`S‘Ev’tQueue
Ğ
p
->
	`G‘Ev’tQueue
( ) );

387 
	`S‘Glob®Ev’tQueue
Ğ
p
->
	`G‘Glob®Ev’tQueue
( ) );

388 
	`S‘Sts
Ğ
p
->
	`G‘Sts
( ) );

389 
	`S‘TagG’”©Ü
Ğ
p
->
	`G‘TagG’”©Ü
( ) );

390 
	}
}

392 
	gNVMObjeù
::
	$Un£tP¬’t
( )

394 ifĞ
·»Á
 !ğ
NULL
 )

396 
d–‘e
 
·»Á
;

397 
·»Á
 = 
NULL
;

399 
	}
}

401 
	gNVMObjeù
::
	$AddChd
Ğ
NVMObjeù
 *
c
 )

403 
NVMObjeù_hook
 *
hook
 = 
Ãw
 
	`NVMObjeù_hook
Ğ
c
 );

404 
¡d
::
veùÜ
<
NVMObjeù
 *>::
™”©Ü
 
™
;

409  
i
 = 0; i < 
¡©ic_ÿ¡
<>(
NVMHOOK_COUNT
); i++ )

411  
™
 = 
hooks
[
i
].
	`begš
(); iˆ!ğhooks[i].
	`’d
(); it++ )

413 
c
->
	`AddHook
Ğ(*
™
) );

417 
chd»n
.
	`push_back
Ğ
hook
 );

418 
	}
}

421 
NVMObjeù
 *
	gNVMObjeù
::
	$_FšdChd
Ğ
NVMašReque¡
 *
»q
, cÚ¡ *
chdCÏss
 )

423 
NVMObjeù
 *
curChd
 = 
this
;

425  
curChd
 !ğ
NULL
 && 
	`NVMCÏss
(*curChdè!ğ
chdCÏss
 )

427 
NVMObjeù_hook
 *
curHook
 = 
curChd
->
	`G‘Chd
Ğ
»q
 );

430 ifĞ
curHook
 =ğ
NULL
 )

431  
NULL
;

433 
curChd
 = curChd->
	`G‘Chd
Ğ
»q
 )->
	`G‘T¿mpŞše
();

436  
curChd
;

437 
	}
}

439 
ncouÁ”_t
 
	gNVMObjeù
::
	$G‘ChdId
Ğ
NVMObjeù
 *
c
 )

441 
¡d
::
veùÜ
<
NVMObjeù_hook
 *>::
™”©Ü
 
™
;

442 
ncouÁ”_t
 
id
 = 0;

443 
ncouÁ”_t
 
rv
 = 0;

445  
™
 = 
chd»n
.
	`begš
(); iˆ!ğchd»n.
	`’d
(); ++it )

447 ifĞ(*
™
)->
	`G‘T¿mpŞše
(è=ğ
c
 )

449 
rv
 = 
id
;

453 ++
id
;

456  
rv
;

457 
	}
}

459 
ncouÁ”_t
 
	gNVMObjeù
::
	$G‘ChdCouÁ
( )

461  
chd»n
.
	`size
();

462 
	}
}

464 
NVMObjeù_hook
* 
	gNVMObjeù
::
	$G‘P¬’t
( )

466  
·»Á
;

467 
	}
}

469 
	g¡d
::
veùÜ
<
NVMObjeù_hook
 *>& 
NVMObjeù
::
	$G‘Chd»n
( )

471  
chd»n
;

472 
	}
}

474 
NVMObjeù_hook
 *
	gNVMObjeù
::
	$G‘Chd
Ğ
NVMašReque¡
 *
»q
 )

477 ifĞ
	`G‘Decod”
Ğè=ğ
NULL
 )

478  
	`G‘Chd
( );

481 
ušt64_t
 
chd
;

484 
chd
 = 
	`G‘Decod”
Ğ)->
	`T¿n¦©e
Ğ
»q
 );

486  
chd»n
[
chd
];

487 
	}
}

489 
NVMObjeù_hook
 *
	gNVMObjeù
::
	$G‘Chd
Ğ
ncouÁ”_t
 
chd
 )

491 
	`as£¹
Ğ
chd
 < 
chd»n
.
	`size
() );

493  
chd»n
[
chd
];

494 
	}
}

496 
NVMObjeù_hook
 *
	gNVMObjeù
::
	$G‘Chd
( )

498 ifĞ
chd»n
.
	`size
() == 0 )

499  
NULL
;

502 
	`as£¹
Ğ
chd»n
.
	`size
() == 1 );

504  
chd»n
[0];

505 
	}
}

507 
	gNVMObjeù
::
	$S‘Decod”
Ğ
Add»ssT¿n¦©Ü
 *
©
 )

509 
decod”
 = 
©
;

511 
decod”
->
	`StName
Ğ
¡©Name
 + ".decoder" );

512 
decod”
->
	`S‘Sts
Ğ
	`G‘Sts
( ) );

513 
decod”
->
	`Regi¡”Sts
( );

514 
	}
}

516 
Add»ssT¿n¦©Ü
 *
	gNVMObjeù
::
	$G‘Decod”
( )

518  
decod”
;

519 
	}
}

522 
	gNVMObjeù
::
	$C®cuÏ‹Sts
( )

524 
¡d
::
veùÜ
<
NVMObjeù_hook
 *>::
™”©Ü
 
™
;

526  
™
 = 
chd»n
.
	`begš
(); iˆ!ğchd»n.
	`’d
(); it++ )

528 (*
™
)->
	`C®cuÏ‹Sts
( );

530 
	}
}

532 
	gNVMObjeù
::
	$Re£tSts
( )

534 
¡d
::
veùÜ
<
NVMObjeù_hook
 *>::
™”©Ü
 
™
;

536  
™
 = 
chd»n
.
	`begš
(); iˆ!ğchd»n.
	`’d
(); it++ )

538 (*
™
)->
	`Re£tSts
( );

540 
	}
}

543 
	gNVMObjeù
::
C»©eCheckpošt
Ğ
¡d
::
¡ršg
 
dœ
 )

545 
¡d
::
veùÜ
<
NVMObjeù_hook
 *>::
™”©Ü
 
™
;

547  
	g™
 = 
chd»n
.
begš
(); iˆ!ğchd»n.
’d
(); it++ )

549 (*
	g™
)->
G‘T¿mpŞše
Ğ)->
C»©eCheckpošt
Ğ
dœ
 );

552 ifĞ
G‘Decod”
( ) )

553 
G‘Decod”
Ğ)->
C»©eCheckpošt
Ğ
dœ
 );

556 
	gNVMObjeù
::
Re¡ÜeCheckpošt
Ğ
¡d
::
¡ršg
 
dœ
 )

558 
¡d
::
veùÜ
<
NVMObjeù_hook
 *>::
™”©Ü
 
™
;

560  
	g™
 = 
chd»n
.
begš
(); iˆ!ğchd»n.
’d
(); it++ )

562 (*
	g™
)->
G‘T¿mpŞše
Ğ)->
Re¡ÜeCheckpošt
Ğ
dœ
 );

565 ifĞ
G‘Decod”
( ) )

566 
G‘Decod”
Ğ)->
Re¡ÜeCheckpošt
Ğ
dœ
 );

569 
	gNVMObjeù
::
	$PrštH›¿rchy
Ğ
d•th
 )

571 
¡d
::
veùÜ
<
NVMObjeù_hook
 *>::
™”©Ü
 
™
;

573 ifĞ
d•th
 > 0 )

575 
¡d
::
cout
 << std::
	`¡ršg
(
d•th
*2, '-'è<< " " << 
	`StName
Ğè<< std::
’dl
;

579 
¡d
::
cout
 << 
	`StName
Ğè<< std::
’dl
;

582  
™
 = 
chd»n
.
	`begš
(); iˆ!ğchd»n.
	`’d
(); it++ )

584 (*
™
)->
	`PrštH›¿rchy
Ğ
d•th
 + 1 );

586 
	}
}

588 
	gNVMObjeù
::
	$S‘Sts
Ğ
Sts
 *
s
 )

590 
¡©s
 = 
s
;

591 
	}
}

593 
Sts
 *
	gNVMObjeù
::
	$G‘Sts
( )

595  
¡©s
;

596 
	}
}

598 
	gNVMObjeù
::
	$Regi¡”Sts
( )

600 
	}
}

602 
NVMObjeù
::
	$S‘P¬ams
Ğ
P¬ams
 *
·¿ms
 )

604 
p
 = 
·¿ms
;

605 
	}
}

607 
P¬ams
 *
	gNVMObjeù
::
	$G‘P¬ams
( )

609  
p
;

610 
	}
}

612 
	gNVMObjeù
::
StName
Ğ
¡d
::
¡ršg
 
Çme
 )

614 
¡©Name
 = 
Çme
;

617 
	g¡d
::
¡ršg
 
NVMObjeù
::
	$StName
( )

619  
¡©Name
;

620 
	}
}

622 
	gNVMObjeù
::
	$S‘TagG’”©Ü
Ğ
TagG’”©Ü
 *
tg
 )

624 
gG’
 = 
tg
;

625 
	}
}

627 
TagG’”©Ü
 *
	gNVMObjeù
::
	$G‘TagG’”©Ü
( )

629  
gG’
;

630 
	}
}

632 
HookTy³
 
	gNVMObjeù
::
	$G‘HookTy³
( )

634  
hookTy³
;

635 
	}
}

637 
	gNVMObjeù
::
	$S‘HookTy³
Ğ
HookTy³
 
h
 )

639 
hookTy³
 = 
h
;

640 
	}
}

642 
HookTy³
 
	gNVMObjeù
::
	$G‘Cu¼’tHookTy³
( )

644  
cu¼’tHookTy³
;

645 
	}
}

647 
	gNVMObjeù
::
	$S‘Cu¼’tHookTy³
Ğ
HookTy³
 
h
 )

649 
cu¼’tHookTy³
 = 
h
;

650 
	}
}

652 
	gNVMObjeù
::
	$AddHook
Ğ
NVMObjeù
 *
hook
 )

654 
HookTy³
 
h
 = 
hook
->
	`G‘HookTy³
( );

657 ifĞ
h
 =ğ
NVMHOOK_BOTHISSUE
 )

659 
	`AddHookUnique
Ğ
hooks
[
NVMHOOK_PREISSUE
], 
hook
 );

660 
	`AddHookUnique
Ğ
hooks
[
NVMHOOK_POSTISSUE
], 
hook
 );

664 
	`AddHookUnique
Ğ
hooks
[
h
], 
hook
 );

666 
	}
}

668 
	gNVMObjeù
::
AddHookUnique
Ğ
¡d
::
veùÜ
<
NVMObjeù
 *>& 
li¡
, NVMObjeù *
hook
 )

671 ifĞ
	g¡d
::
fšd
Ğ
li¡
.
begš
(),†i¡.
’d
(), 
hook
 ) ==†ist.end() )

673 
li¡
.
push_back
Ğ
hook
 );

677 
	g¡d
::
veùÜ
<
NVMObjeù
 *>& NVMObjeù::
	$G‘Hooks
Ğ
HookTy³
 
h
 )

679  
hooks
[
h
];

680 
	}
}

682 
	gNVMObjeù
::
S‘DebugName
Ğ
¡d
::
¡ršg
 
dn
, 
CÚfig
 *
cÚfig
 )

684 
P¬ams
 *
	g·¿ms
 = 
Ãw
 Params( );

685 
	g·¿ms
->
S‘P¬ams
Ğ
cÚfig
 );

688 ifĞ
	gdebugSŒ—m
 =ğ
cÚfig
->
G‘DebugLog
Ğè|| 
debugSŒ—m
 =ğ&
¡d
::
û¼
 )

692 ifĞ
	g·¿ms
->
	gdebugOn
 &&…¬ams->
	gdebugCÏs£s
.
couÁ
Ğ
dn
 ) )

694 
	gdebugSŒ—m
 = 
cÚfig
->
G‘DebugLog
( );

698 
	gdebugSŒ—m
 = &
nvmašDebugInhib™Ü
;

702 
ncyşe_t
 
	gNVMObjeù
::
	$MAX
ĞcÚ¡ 
ncyşe_t
 
a
, cÚ¡‚cyşe_ˆ
b
 )

704  (Ğ
a
 > 
b
 ) ?‡ : b );

705 
	}
}

707 
ncyşe_t
 
	gNVMObjeù
::
	$MIN
ĞcÚ¡ 
ncyşe_t
 
a
, cÚ¡‚cyşe_ˆ
b
 )

709  (Ğ
a
 < 
b
 ) ?‡ : b );

710 
	}
}

	@src/NVMObject.h

36 #iâdeà
__CYCLER_H__


37 
	#__CYCLER_H__


	)

39 
	~"šşude/NVMTy³s.h
"

40 
	~"šşude/FaR—sÚs.h
"

41 
	~"Decod”s/Decod”FaùÜy.h
"

42 
	~"¤c/Sts.h
"

43 
	~"¤c/TagG’”©Ü.h
"

45 
	~<o¡»am
>

46 
	~<veùÜ
>

47 
	~<ty³šfo
>

49 
	#NVMObjeùTy³
 (
	`ty³id
(*(
·»Á
->
	`G‘T¿mpŞše
())).
	`Çme
())

	)

50 
	#NVMCÏss
(
a
è(
	`ty³id
×).
	`Çme
())

	)

51 
	#NVMTy³M©ches
(
a
è((
dyÇmic_ÿ¡
<¨*>(
·»Á
->
	`G‘T¿mpŞše
())è!ğ
NULL
)

	)

54 
	#FšdChd
(
a
,
b
è(
dyÇmic_ÿ¡
<b *>(
	`_FšdChd
×,
	`ty³id
(b).
	`Çme
())))

	)

57 
	#FšdChdTy³
(
a
,
b
,
c
è
	`FšdModuËChdTy³
×,b,c,
this
)

	)

60 
	#FšdModuËChdTy³
(
a
,
b
,
c
,
d
) \

62 
NVMObjeù
 *
curChd
 = 
d
; \

64  
curChd
 !ğ
NULL
 && 
dyÇmic_ÿ¡
<
b
 *>(curChild) == NULL ) \

66 
NVMObjeù_hook
 *
curHook
 = 
curChd
->
	`G‘Chd
Ğ
a
 ); \

68 ifĞ
curHook
 =ğ
NULL
 ) \

70 
c
 = 
NULL
; \

74 
curChd
 = 
curHook
->
	`G‘T¿mpŞše
(); \

77 ifĞ
dyÇmic_ÿ¡
<
b
 *>(
curChd
è!ğ
NULL
 ) \

79 
c
 = 
curChd
; \

83 
c
 = 
NULL
; \

85 }

	)

87 
Çme¥aû
 
	gNVM
 {

89 
şass
 
	gNVMašReque¡
;

90 
şass
 
	gEv’tQueue
;

91 
şass
 
	gGlob®Ev’tQueue
;

92 
şass
 
	gAdd»ssT¿n¦©Ü
;

93 
şass
 
	gNVMObjeù
;

94 
şass
 
	gCÚfig
;

95 
şass
 
	gP¬ams
;

97 
	eHookTy³
 { 
	gNVMHOOK_NONE
 = 0,

98 
	gNVMHOOK_PREISSUE
,

99 
	gNVMHOOK_POSTISSUE
,

100 
	gNVMHOOK_COUNT
,

101 
	gNVMHOOK_BOTHISSUE


109 şas 
	cNVMObjeù_hook


111 
	gpublic
:

112 
NVMObjeù_hook
Ğ
NVMObjeù
 *
ŒampŞše
 );

113 
	gvœtu®
 ~
NVMObjeù_hook
( );

115 
boŞ
 
IssueCommªd
Ğ
NVMašReque¡
 *
»q
 );

116 
boŞ
 
IsIssuabË
Ğ
NVMašReque¡
 *
»q
, 
FaR—sÚ
 *
»asÚ
 = 
NULL
 );

117 
boŞ
 
IssueAtomic
Ğ
NVMašReque¡
 *
»q
 );

118 
boŞ
 
IssueFunùiÚ®
Ğ
NVMašReque¡
 *
»q
 );

119 
NÙify
Ğ
NVMašReque¡
 *
»q
 );

120 
ncyşe_t
 
NextIssuabË
Ğ
NVMašReque¡
 *
»q
 );

121 
vœtu®
 
boŞ
 
IdË
( );

123 
boŞ
 
Reque¡Com¶‘e
Ğ
NVMašReque¡
 *
»q
 );

124 
C®lback
Ğ*
d©a
 );

126 
Cyşe
Ğ
ncyşe_t
 
¡•s
 );

128 
C®cuÏ‹Sts
( );

129 
Re£tSts
( );

131 
PrštH›¿rchy
Ğ
d•th
 );

133 
S‘Sts
Ğ
Sts
* );

134 
Sts
* 
G‘Sts
( );

135 
Regi¡”Sts
( );

137 
StName
Ğ
¡d
::
¡ršg
 
Çme
 );

138 
	g¡d
::
¡ršg
 
StName
( );

140 
NVMObjeù
 *
G‘T¿mpŞše
( );

142 
	g´iv©e
:

143 
NVMObjeù
 *
ŒampŞše
;

151 şas 
	cNVMObjeù


153 
	gpublic
:

154 
NVMObjeù
( );

155 
	gvœtu®
 ~
NVMObjeù
( );

157 
vœtu®
 
In™
Ğ
CÚfig
 *
cÚf
 );

159 
vœtu®
 
Cyşe
Ğ
ncyşe_t
 
¡•s
 ) = 0;

161 
vœtu®
 
boŞ
 
IssueCommªd
Ğ
NVMašReque¡
 *
»q
 );

162 
vœtu®
 
boŞ
 
IsIssuabË
Ğ
NVMašReque¡
 *
»q
, 
FaR—sÚ
 *
»asÚ
 = 
NULL
 );

163 
vœtu®
 
boŞ
 
IssueAtomic
Ğ
NVMašReque¡
 *
»q
 );

164 
vœtu®
 
boŞ
 
IssueFunùiÚ®
Ğ
NVMašReque¡
 *
»q
 );

165 
vœtu®
 
NÙify
Ğ
NVMašReque¡
 *
»q
 );

166 
vœtu®
 
ncyşe_t
 
NextIssuabË
Ğ
NVMašReque¡
 *
»q
 );

167 
vœtu®
 
boŞ
 
IdË
( );

169 
vœtu®
 
boŞ
 
Reque¡Com¶‘e
Ğ
NVMašReque¡
 *
»q
 );

170 
vœtu®
 
C®lback
Ğ*
d©a
 );

172 
vœtu®
 
S‘P¬’t
Ğ
NVMObjeù
 *
p
 );

173 
Un£tP¬’t
( );

174 
vœtu®
 
AddChd
Ğ
NVMObjeù
 *
c
 );

175 
NVMObjeù
 *
_FšdChd
Ğ
NVMašReque¡
 *
»q
, cÚ¡ *
chdCÏss
 );

177 
vœtu®
 
S‘Ev’tQueue
Ğ
Ev’tQueue
 *
eq
 );

178 
vœtu®
 
Ev’tQueue
 *
G‘Ev’tQueue
( );

179 
vœtu®
 
S‘Glob®Ev’tQueue
Ğ
Glob®Ev’tQueue
 *
geq
 );

180 
vœtu®
 
Glob®Ev’tQueue
 *
G‘Glob®Ev’tQueue
( );

182 
NVMObjeù_hook
 *
G‘P¬’t
( );

183 
	g¡d
::
veùÜ
<
NVMObjeù_hook
 *>& 
G‘Chd»n
( );

184 
NVMObjeù_hook
 *
G‘Chd
Ğ
NVMašReque¡
 *
»q
 );

185 
NVMObjeù_hook
 *
G‘Chd
Ğ
ncouÁ”_t
 
chd
 );

186 
NVMObjeù_hook
 *
G‘Chd
( );

187 
ncouÁ”_t
 
G‘ChdId
Ğ
NVMObjeù
 *
c
 );

188 
ncouÁ”_t
 
G‘ChdCouÁ
( );

190 
vœtu®
 
S‘Decod”
Ğ
Add»ssT¿n¦©Ü
 *
©
 );

191 
vœtu®
 
Add»ssT¿n¦©Ü
 *
G‘Decod”
( );

193 
vœtu®
 
C®cuÏ‹Sts
( );

194 
vœtu®
 
Re£tSts
( );

196 
vœtu®
 
C»©eCheckpošt
Ğ
¡d
::
¡ršg
 
dœ
 );

197 
vœtu®
 
Re¡ÜeCheckpošt
Ğ
¡d
::
¡ršg
 
dœ
 );

199 
PrštH›¿rchy
Ğ
d•th
 = 0 );

201 
S‘Sts
Ğ
Sts
* );

202 
Sts
* 
G‘Sts
( );

203 
vœtu®
 
Regi¡”Sts
( );

205 
S‘P¬ams
Ğ
P¬ams
 *
·¿ms
 );

206 
P¬ams
 *
G‘P¬ams
( );

208 
StName
Ğ
¡d
::
¡ršg
 
Çme
 );

209 
	g¡d
::
¡ršg
 
StName
( );

211 
S‘TagG’”©Ü
Ğ
TagG’”©Ü
 *
tg
 );

212 
TagG’”©Ü
 *
G‘TagG’”©Ü
( );

214 
HookTy³
 
G‘HookTy³
( );

215 
S‘HookTy³
Ğ
HookTy³
 );

217 
HookTy³
 
G‘Cu¼’tHookTy³
( );

218 
S‘Cu¼’tHookTy³
Ğ
HookTy³
 );

220 
AddHook
Ğ
NVMObjeù
 *
hook
 );

221 
	g¡d
::
veùÜ
<
NVMObjeù
 *>& 
G‘Hooks
Ğ
HookTy³
 
h
 );

223 
vœtu®
 
S‘DebugName
Ğ
¡d
::
¡ršg
 
dn
, 
CÚfig
 *
cÚfig
 );

225 
	g´Ùeùed
:

226 
NVMObjeù_hook
 *
·»Á
;

227 
Add»ssT¿n¦©Ü
 *
	gdecod”
;

228 
Sts
 *
	g¡©s
;

229 
P¬ams
 *
	gp
;

230 
	g¡d
::
¡ršg
 
¡©Name
;

231 
	g¡d
::
veùÜ
<
NVMObjeù_hook
 *> 
chd»n
;

232 
	g¡d
::
veùÜ
<
NVMObjeù
 *> *
hooks
;

233 
Ev’tQueue
 *
	gev’tQueue
;

234 
Glob®Ev’tQueue
 *
	gglob®Ev’tQueue
;

235 
	g¡d
::
o¡»am
 *
debugSŒ—m
;

236 
TagG’”©Ü
 *
	ggG’
;

237 
HookTy³
 
	ghookTy³
, 
	gcu¼’tHookTy³
;

239 
AddHookUnique
Ğ
¡d
::
veùÜ
<
NVMObjeù
 *>& 
li¡
, NVMObjeù *
hook
 );

241 
ncyşe_t
 
MAX
( const‚cycle_t, const‚cycle_t );

242 
ncyşe_t
 
MIN
( const‚cycle_t, const‚cycle_t );

	@src/Params.cpp

36 
	~"¤c/P¬ams.h
"

37 
	~"šşude/NVMH–³rs.h
"

39 
	~<cm©h
>

40 
	~<c¡dlib
>

41 
	~<s¡»am
>

42 
	~<io¡»am
>

44 
usšg
 
Çme¥aû
 
	gNVM
;

46 
	gP¬ams
::
	$P¬ams
( )

48 
Ev’tDriv’
 = 
çl£
;

50 
BPC
 = 8;

51 
BusWidth
 = 64;

52 
DeviûWidth
 = 8;

53 
CLK
 = 666;

54 
MULT
 = 4;

55 
RATE
 = 2;

56 
CPUF»q
 = 2000;

58 
EIDD0
 = 85;

59 
EIDD1
 = 54;

60 
EIDD2P0
 = 30;

61 
EIDD2P1
 = 30;

62 
EIDD2N
 = 37;

63 
EIDD3P
 = 35;

64 
EIDD3N
 = 40;

65 
EIDD4R
 = 160;

66 
EIDD4W
 = 165;

67 
EIDD5B
 = 200;

68 
EIDD6
 = 12;

71 
Erd
 = 3.405401;

72 
Eİ’rd
 = 1.081080;

73 
Ewr
 = 1.023750;

74 
E»f
 = 38.558533;

75 
Eaù¡dby
 = 0.090090;

76 
E´e¡dby
 = 0.083333;

78 
Epda
 = 0.000000;

79 
Epdpf
 = 0.000000;

80 
Epdps
 = 0.000000;

81 
VŞge
 = 1.5;

87 
R‰_nom
 = 30;

92 
R‰_wr
 = 60;

97 
R‰_cÚt
 = 75;

100 
Vddq
 = 1.5;

102 
Vssq
 = 0.0;

104 
RªksP”DIMM
 = 1;

106 
Endu¿nûMod–
 = "NullModel";

107 
D©aEncod”
 = "default";

108 
EÃrgyMod–
 = "current";

110 
U£LowPow”
 = 
Œue
;

111 
Pow”DownMode
 = "FASTEXIT";

112 
In™PD
 = 
çl£
;

114 
PrštG¿phs
 = 
çl£
;

115 
PrštAÎDeviûs
 = 
çl£
;

116 
PrštCÚfig
 = 
çl£
;

118 
PrštP»T¿û
 = 
çl£
;

119 
EchoP»T¿û
 = 
çl£
;

121 
ReäeshRows
 = 4;

122 
U£Reäesh
 = 
Œue
;

123 
Sgg”Reäesh
 = 
çl£
;

124 
U£P»ch¬ge
 = 
Œue
;

126 
OffChL©’cy
 = 10;

128 
P”iodicStsIÁ”v®
 = 0;

130 
ROWS
 = 65536;

131 
COLS
 = 32;

132 
CHANNELS
 = 2;

133 
RANKS
 = 2;

134 
BANKS
 = 8;

135 
RAW
 = 4;

136 
MATHeight
 = 
ROWS
;

137 
RBSize
 = 
COLS
;

139 
tAL
 = 0;

140 
tBURST
 = 4;

141 
tCAS
 = 10;

142 
tCCD
 = 4;

143 
tCMD
 = 1;

144 
tCWD
 = 7;

145 
tRAW
 = 20;

146 
tOST
 = 1;

147 
tPD
 = 6;

148 
tRAS
 = 24;

149 
tRCD
 = 9;

150 
tRDB
 = 2;

151 
tREFW
 = 42666667;

152 
tRFC
 = 107;

153 
tRP
 = 9;

154 
tRRDR
 = 5;

155 
tRRDW
 = 5;

156 
tRTP
 = 5;

157 
tRTRS
 = 1;

158 
tWP
 = 0;

159 
tWR
 = 10;

160 
tWTR
 = 5;

161 
tXP
 = 6;

162 
tXPDLL
 = 17;

163 
tXS
 = 5;

164 
tXSDLL
 = 512;

166 
tRDPDEN
 = 24;

167 
tWRPDEN
 = 19;

168 
tWRAPDEN
 = 22;

169 
Clo£Page
 = 1;

170 
ScheduËScheme
 = 1;

171 
HighW©”M¬k
 = 32;

172 
LowW©”M¬k
 = 16;

173 
BªksP”Reäesh
 = 
BANKS
;

174 
D–ayedReäeshTh»shŞd
 = 1;

175 
Add»ssM­pšgScheme
 = "R:SA:RK:BK:CH:C";

177 
MemÜyP»ãtch”
 = "none";

178 
P»ãtchBufãrSize
 = 32;

180 
´og¿mMode
 = 
Prog¿mMode_SRMS
;

181 
MLCLev–s
 = 1;

182 
WPV¬Ÿnû
 = 1;

183 
UnifÜmWr™es
 = 
Œue
;

185 
E»£t
 = 0.054331;

186 
E£t
 = 0.101581;

187 
tWP0
 = 40;

188 
tWP1
 = 60;

190 
nWP00
 = 0;

191 
nWP01
 = 7;

192 
nWP10
 = 5;

193 
nWP11
 = 1;

195 
WPMaxV¬Ÿnû
 = 2;

197 
Wr™ePausšg
 = 
çl£
;

198 
Pau£Th»shŞd
 = 0.4;

199 
MaxCªûÎ©iÚs
 = 4;

200 
·u£Mode
 = 
Pau£Mode_NÜm®
;

202 
D—dlockTim”
 = 10000000;

204 
debugOn
 = 
çl£
;

205 
debugCÏs£s
.
	`ş—r
();

206 
	}
}

208 
	gP¬ams
::~
	$P¬ams
( )

210 
	}
}

212 
P¬ams
::
CÚv”tTimšg
Ğ
CÚfig
 *
cÚf
, 
¡d
::
¡ršg
 
·¿m
, 
ncyşe_t
& 
v®ue
 )

214 ifĞ
	gcÚf
->
KeyExi¡s
Ğ
·¿m
 ) )

216 
	gv®ue
 = 
CÚv”tTimšg
Ğ
cÚf
, 
·¿m
 );

220 
ncyşe_t
 
	gP¬ams
::
CÚv”tTimšg
Ğ
CÚfig
 *
cÚf
, 
¡d
::
¡ršg
 
·¿m
 )

225 
¡d
::
¡ršg
 
¡ršgV®ue
 = 
cÚf
->
G‘SŒšg
Ğ
·¿m
 );

226 
	gnum”icV®ue
 = 
cÚf
->
G‘EÃrgy
Ğ
·¿m
 );

227 
	gÿlcuÏ‹dV®ue
 = 
num”icV®ue
;

228 
ncouÁ”_t
 
	gşock
 = 
cÚf
->
G‘V®ue
( "CLK" );

230 ifĞ
	g¡ršgV®ue
.
Ëngth
() > 2 )

232 
	g¡d
::
¡ršg
 
un™s
 = 
¡ršgV®ue
.
sub¡r
Ğ¡ršgV®ue.
Ëngth
(è- 2, 
¡d
::¡ršg::
Åos
 );

234 ifĞ
	gun™s
 == "ns" )

237 
ÿlcuÏ‹dV®ue
 = 
¡©ic_ÿ¡
<>(
num”icV®ue
è* (¡©ic_ÿ¡<>(
şock
) / 1e3f);

239 ifĞ
	gun™s
 == "us" )

242 
ÿlcuÏ‹dV®ue
 = 
¡©ic_ÿ¡
<>(
num”icV®ue
è* (¡©ic_ÿ¡<>(
şock
));

244 ifĞ
	gun™s
 == "ms" )

247 
ÿlcuÏ‹dV®ue
 = 
¡©ic_ÿ¡
<>(
num”icV®ue
è* (¡©ic_ÿ¡<>(
şock
) * 1e3f);

251  
	g¡©ic_ÿ¡
<
	gncyşe_t
>Ğ
	g¡d
::
û
Ğ
ÿlcuÏ‹dV®ue
 ) );

255 
	gP¬ams
::
	$S‘P¬ams
Ğ
CÚfig
 *
c
 )

257 
c
->
	`G‘BoŞ
Ğ"Ev’tDriv’", 
Ev’tDriv’
 );

259 
c
->
	`G‘V®ueUL
Ğ"BPC", 
BPC
 );

260 
c
->
	`G‘V®ueUL
Ğ"BusWidth", 
BusWidth
 );

261 
c
->
	`G‘V®ueUL
Ğ"DeviûWidth", 
DeviûWidth
 );

262 
c
->
	`G‘V®ueUL
Ğ"CLK", 
CLK
 );

263 
c
->
	`G‘V®ueUL
Ğ"MULT", 
MULT
 );

264 
c
->
	`G‘V®ueUL
Ğ"RATE", 
RATE
 );

265 
c
->
	`G‘V®ueUL
Ğ"CPUF»q", 
CPUF»q
 );

267 
c
->
	`G‘EÃrgy
Ğ"EIDD0", 
EIDD0
 );

268 
c
->
	`G‘EÃrgy
Ğ"EIDD1", 
EIDD1
 );

269 
c
->
	`G‘EÃrgy
Ğ"EIDD2P0", 
EIDD2P0
 );

270 
c
->
	`G‘EÃrgy
Ğ"EIDD2P1", 
EIDD2P1
 );

271 
c
->
	`G‘EÃrgy
Ğ"EIDD2N", 
EIDD2N
 );

272 
c
->
	`G‘EÃrgy
Ğ"EIDD3P", 
EIDD3P
 );

273 
c
->
	`G‘EÃrgy
Ğ"EIDD3N", 
EIDD3N
 );

274 
c
->
	`G‘EÃrgy
Ğ"EIDD4R", 
EIDD4R
 );

275 
c
->
	`G‘EÃrgy
Ğ"EIDD4W", 
EIDD4W
 );

276 
c
->
	`G‘EÃrgy
Ğ"EIDD5B", 
EIDD5B
 );

277 
c
->
	`G‘EÃrgy
Ğ"EIDD6", 
EIDD6
 );

278 
c
->
	`G‘EÃrgy
Ğ"Eİ’rd", 
Eİ’rd
 );

279 
c
->
	`G‘EÃrgy
Ğ"Erd", 
Erd
 );

280 
c
->
	`G‘EÃrgy
Ğ"E»f", 
E»f
 );

281 
c
->
	`G‘EÃrgy
Ğ"Ewr", 
Ewr
 );

282 
c
->
	`G‘EÃrgy
Ğ"Eaù¡dby", 
Eaù¡dby
 );

283 
c
->
	`G‘EÃrgy
Ğ"E´e¡dby", 
E´e¡dby
 );

284 
c
->
	`G‘EÃrgy
Ğ"Epda", 
Epda
 );

285 
c
->
	`G‘EÃrgy
Ğ"Epdpf", 
Epdpf
 );

286 
c
->
	`G‘EÃrgy
Ğ"Epdps", 
Epdps
 );

287 
c
->
	`G‘EÃrgy
Ğ"VŞge", 
VŞge
 );

289 
c
->
	`G‘V®ue
Ğ"R‰_nom", 
R‰_nom
 );

290 
c
->
	`G‘V®ue
Ğ"R‰_wr", 
R‰_wr
 );

291 
c
->
	`G‘V®ue
Ğ"R‰_cÚt", 
R‰_cÚt
 );

292 
c
->
	`G‘EÃrgy
Ğ"VDDQ", 
Vddq
 );

293 
c
->
	`G‘EÃrgy
Ğ"VSSQ", 
Vssq
 );

295 
c
->
	`G‘V®ue
Ğ"RªksP”DIMM", 
RªksP”DIMM
 );

297 
c
->
	`G‘SŒšg
Ğ"Endu¿nûMod–", 
Endu¿nûMod–
 );

298 
c
->
	`G‘SŒšg
Ğ"EÃrgyMod–", 
EÃrgyMod–
 );

300 
c
->
	`G‘BoŞ
Ğ"U£LowPow”", 
U£LowPow”
 );

301 
c
->
	`G‘SŒšg
Ğ"Pow”DownMode", 
Pow”DownMode
 );

302 
c
->
	`G‘BoŞ
Ğ"In™PD", 
In™PD
 );

304 
c
->
	`G‘BoŞ
Ğ"PrštG¿phs", 
PrštG¿phs
 );

305 
c
->
	`G‘BoŞ
Ğ"PrštAÎDeviûs", 
PrštAÎDeviûs
 );

306 
c
->
	`G‘BoŞ
Ğ"PrštCÚfig", 
PrštCÚfig
 );

308 
c
->
	`G‘BoŞ
Ğ"PrštP»T¿û", 
PrštP»T¿û
 );

309 
c
->
	`G‘BoŞ
Ğ"EchoP»T¿û", 
EchoP»T¿û
 );

311 
c
->
	`G‘V®ueUL
Ğ"ReäeshRows", 
ReäeshRows
 );

312 
c
->
	`G‘BoŞ
Ğ"U£Reäesh", 
U£Reäesh
 );

313 
c
->
	`G‘BoŞ
Ğ"Sgg”Reäesh", 
Sgg”Reäesh
 );

314 
c
->
	`G‘BoŞ
Ğ"U£P»ch¬ge", 
U£P»ch¬ge
 );

316 
c
->
	`G‘V®ueUL
Ğ"OffChL©’cy", 
OffChL©’cy
 );

318 
c
->
	`G‘V®ueUL
Ğ"P”iodicStsIÁ”v®", 
P”iodicStsIÁ”v®
 );

320 
c
->
	`G‘V®ueUL
Ğ"ROWS", 
ROWS
 );

321 
c
->
	`G‘V®ueUL
Ğ"COLS", 
COLS
 );

322 
c
->
	`G‘V®ueUL
Ğ"CHANNELS", 
CHANNELS
 );

323 
c
->
	`G‘V®ueUL
Ğ"RANKS", 
RANKS
 );

324 
c
->
	`G‘V®ueUL
Ğ"BANKS", 
BANKS
 );

325 
c
->
	`G‘V®ueUL
Ğ"RAW", 
RAW
 );

326 
c
->
	`G‘V®ueUL
Ğ"MATHeight", 
MATHeight
 );

327 
c
->
	`G‘V®ueUL
Ğ"RBSize", 
RBSize
 );

329 
	`CÚv”tTimšg
Ğ
c
, "tAL", 
tAL
 );

330 
	`CÚv”tTimšg
Ğ
c
, "tBURST", 
tBURST
 );

331 
	`CÚv”tTimšg
Ğ
c
, "tCAS", 
tCAS
 );

332 
	`CÚv”tTimšg
Ğ
c
, "tCCD", 
tCCD
 );

333 
	`CÚv”tTimšg
Ğ
c
, "tCMD", 
tCMD
 );

334 
	`CÚv”tTimšg
Ğ
c
, "tCWD", 
tCWD
 );

335 
	`CÚv”tTimšg
Ğ
c
, "tRAW", 
tRAW
 );

336 
	`CÚv”tTimšg
Ğ
c
, "tOST", 
tOST
 );

337 
	`CÚv”tTimšg
Ğ
c
, "tPD", 
tPD
 );

338 
	`CÚv”tTimšg
Ğ
c
, "tRAS", 
tRAS
 );

339 
	`CÚv”tTimšg
Ğ
c
, "tRCD", 
tRCD
 );

340 
	`CÚv”tTimšg
Ğ
c
, "tRDB", 
tRDB
 );

341 
	`CÚv”tTimšg
Ğ
c
, "tREFW", 
tREFW
 );

342 
	`CÚv”tTimšg
Ğ
c
, "tRFC", 
tRFC
 );

343 
	`CÚv”tTimšg
Ğ
c
, "tRP", 
tRP
 );

344 
	`CÚv”tTimšg
Ğ
c
, "tRRDR", 
tRRDR
 );

345 
	`CÚv”tTimšg
Ğ
c
, "tRRDW", 
tRRDW
 );

346 
	`CÚv”tTimšg
Ğ
c
, "tRTP", 
tRTP
 );

347 
	`CÚv”tTimšg
Ğ
c
, "tRTRS", 
tRTRS
 );

348 
	`CÚv”tTimšg
Ğ
c
, "tWP", 
tWP
 );

349 
	`CÚv”tTimšg
Ğ
c
, "tWR", 
tWR
 );

350 
	`CÚv”tTimšg
Ğ
c
, "tWTR", 
tWTR
 );

351 
	`CÚv”tTimšg
Ğ
c
, "tXP", 
tXP
 );

352 
	`CÚv”tTimšg
Ğ
c
, "tXPDLL", 
tXPDLL
 );

353 
	`CÚv”tTimšg
Ğ
c
, "tXS", 
tXS
 );

354 
	`CÚv”tTimšg
Ğ
c
, "tXSDLL", 
tXSDLL
 );

356 
c
->
	`G‘V®ueUL
Ğ"tRDPDEN", 
tRDPDEN
 );

357 
c
->
	`G‘V®ueUL
Ğ"tWRPDEN", 
tWRPDEN
 );

358 
c
->
	`G‘V®ueUL
Ğ"tWRAPDEN", 
tWRAPDEN
 );

359 
c
->
	`G‘V®ueUL
Ğ"Clo£Page", 
Clo£Page
 );

360 
c
->
	`G‘V®ue
Ğ"ScheduËScheme", 
ScheduËScheme
 );

361 
c
->
	`G‘V®ue
Ğ"HighW©”M¬k", 
HighW©”M¬k
 );

362 
c
->
	`G‘V®ue
Ğ"LowW©”M¬k", 
LowW©”M¬k
 );

363 
c
->
	`G‘V®ueUL
Ğ"BªksP”Reäesh", 
BªksP”Reäesh
 );

364 
c
->
	`G‘V®ueUL
Ğ"D–ayedReäeshTh»shŞd", 
D–ayedReäeshTh»shŞd
 );

365 
c
->
	`G‘SŒšg
Ğ"Add»ssM­pšgScheme", 
Add»ssM­pšgScheme
 );

367 
c
->
	`G‘SŒšg
Ğ"MemÜyP»ãtch”", 
MemÜyP»ãtch”
 );

368 
c
->
	`G‘V®ueUL
Ğ"P»ãtchBufãrSize", 
P»ãtchBufãrSize
 );

370 ifĞ
c
->
	`KeyExi¡s
( "ProgramMode" ) )

372 ifĞ
c
->
	`G‘SŒšg
( "ProgramMode" ) == "SRMS" )

373 
´og¿mMode
 = 
Prog¿mMode_SRMS
;

374 ifĞ
c
->
	`G‘SŒšg
( "ProgramMode" ) == "SSMR" )

375 
´og¿mMode
 = 
Prog¿mMode_SSMR
;

377 
¡d
::
cout
 << "UnknowÀProg¿mMode: " << 
c
->
	`G‘SŒšg
( "ProgramMode" )

378 << ". DeçuÉšgØSRMS" << 
¡d
::
’dl
;

380 
c
->
	`G‘V®ueUL
Ğ"MLCLev–s", 
MLCLev–s
 );

381 
c
->
	`G‘V®ueUL
Ğ"WPV¬Ÿnû", 
WPV¬Ÿnû
 );

382 
c
->
	`G‘BoŞ
Ğ"UnifÜmWr™es", 
UnifÜmWr™es
 );

384 
c
->
	`G‘EÃrgy
Ğ"E»£t", 
E»£t
 );

385 
c
->
	`G‘EÃrgy
Ğ"E£t", 
E£t
 );

386 
	`CÚv”tTimšg
Ğ
c
, "tWP0", 
tWP0
 );

387 
	`CÚv”tTimšg
Ğ
c
, "tWP1", 
tWP1
 );

389 
c
->
	`G‘V®ueUL
Ğ"nWP00", 
nWP00
 );

390 
c
->
	`G‘V®ueUL
Ğ"nWP01", 
nWP01
 );

391 
c
->
	`G‘V®ueUL
Ğ"nWP10", 
nWP10
 );

392 
c
->
	`G‘V®ueUL
Ğ"nWP11", 
nWP11
 );

394 
c
->
	`G‘V®ueUL
Ğ"WPMaxV¬Ÿnû", 
WPMaxV¬Ÿnû
 );

396 
c
->
	`G‘V®ueUL
Ğ"D—dlockTim”", 
D—dlockTim”
 );

398 
c
->
	`G‘BoŞ
Ğ"EÇbËDebug", 
debugOn
 );

399 ifĞ
c
->
	`KeyExi¡s
( "DebugClasses" ) )

401 
¡d
::
¡ršg
 
debugCÏssLi¡
 = 
c
->
	`G‘SŒšg
( "DebugClasses" );

402 
¡d
::
¡ršg
 
debugCÏss
;

403 
¡d
::
i¡ršg¡»am
 
	`debugCÏssSŒ—m
Ğ
debugCÏssLi¡
 );

405  
¡d
::
	`g‘lše
Ğ
debugCÏssSŒ—m
, 
debugCÏss
, ',' ) )

408 
¡d
::
cout
 << "WÈ´šˆdebug infÜm©iÚ from \"" << 
debugCÏss
 << ".\"" << std::
’dl
;

409 
debugCÏs£s
.
	`š£¹
Ğ
debugCÏss
 );

413 
c
->
	`G‘BoŞ
Ğ"Wr™ePausšg", 
Wr™ePausšg
 );

414 
c
->
	`G‘EÃrgy
Ğ"Pau£Th»shŞd", 
Pau£Th»shŞd
 );

415 
c
->
	`G‘V®ueUL
Ğ"MaxCªûÎ©iÚs", 
MaxCªûÎ©iÚs
 );

416 ifĞ
c
->
	`KeyExi¡s
( "PauseMode" ) )

418 ifĞ
c
->
	`G‘SŒšg
( "PauseMode" ) == "Normal" )

419 
·u£Mode
 = 
Pau£Mode_NÜm®
;

420 ifĞ
c
->
	`G‘SŒšg
( "PauseMode" ) == "IIWC" )

421 
·u£Mode
 = 
Pau£Mode_IIWC
;

422 ifĞ
c
->
	`G‘SŒšg
( "PauseMode" ) == "Optimal" )

423 
·u£Mode
 = 
Pau£Mode_O±im®
;

425 
¡d
::
cout
 << "UnknowÀPau£Mode: " << 
c
->
	`G‘SŒšg
( "PauseMode" )

426 << ". DeçuÉšgØNÜm®" << 
¡d
::
’dl
;

428 
	}
}

	@src/Params.h

36 #iâdeà
__NVM_PARAMS_H__


37 
	#__NVM_PARAMS_H__


	)

39 
	~"¤c/CÚfig.h
"

40 
	~"¤c/Debug.h
"

41 
	~"šşude/NVMTy³s.h
"

43 
	~<£t
>

44 
	~<¡ršg
>

46 
Çme¥aû
 
	gNVM
 {

48 
	eProg¿mMode
 {

49 
	gProg¿mMode_SRMS
,

50 
	gProg¿mMode_SSMR


53 
	ePau£Mode
 {

54 
	gPau£Mode_NÜm®
,

55 
	gPau£Mode_IIWC
,

56 
	gPau£Mode_O±im®


59 şas 
	cP¬ams


61 
	gpublic
:

62 
P¬ams
( );

63 ~
P¬ams
( );

65 
S‘P¬ams
Ğ
CÚfig
 *
c
 );

67 
boŞ
 
	gEv’tDriv’
;

69 
ncouÁ”_t
 
	gBPC
;

70 
ncouÁ”_t
 
	gBusWidth
;

71 
ncouÁ”_t
 
	gDeviûWidth
;

72 
ncouÁ”_t
 
	gCLK
;

73 
ncouÁ”_t
 
	gMULT
;

74 
ncouÁ”_t
 
	gRATE
;

75 
ncouÁ”_t
 
	gCPUF»q
;

77 
	gEIDD0
;

78 
	gEIDD1
;

79 
	gEIDD2P0
;

80 
	gEIDD2P1
;

81 
	gEIDD2N
;

82 
	gEIDD3P
;

83 
	gEIDD3N
;

84 
	gEIDD4R
;

85 
	gEIDD4W
;

86 
	gEIDD5B
;

87 
	gEIDD6
;

88 
	gEİ’rd
;

89 
	gErd
;

90 
	gE»f
;

91 
	gEwr
;

92 
	gEaù¡dby
;

93 
	gE´e¡dby
;

94 
	gEpda
;

95 
	gEpdpf
;

96 
	gEpdps
;

97 
	gVŞge
;

99 
	gR‰_nom
;

100 
	gR‰_wr
;

101 
	gR‰_cÚt
;

102 
	gVddq
;

103 
	gVssq
;

105 
	gRªksP”DIMM
;

107 
	g¡d
::
¡ršg
 
Endu¿nûMod–
;

108 
	g¡d
::
¡ršg
 
D©aEncod”
;

109 
	g¡d
::
¡ršg
 
EÃrgyMod–
;

111 
boŞ
 
	gU£LowPow”
;

112 
	g¡d
::
¡ršg
 
Pow”DownMode
;

113 
boŞ
 
	gIn™PD
;

115 
boŞ
 
	gPrštG¿phs
;

116 
boŞ
 
	gPrštAÎDeviûs
;

117 
boŞ
 
	gPrštCÚfig
;

119 
boŞ
 
	gPrštP»T¿û
;

120 
boŞ
 
	gEchoP»T¿û
;

122 
ncouÁ”_t
 
	gReäeshRows
;

123 
boŞ
 
	gU£Reäesh
;

124 
boŞ
 
	gSgg”Reäesh
;

125 
boŞ
 
	gU£P»ch¬ge
;

127 
ncouÁ”_t
 
	gOffChL©’cy
;

129 
ncouÁ”_t
 
	gP”iodicStsIÁ”v®
;

131 
ncouÁ”_t
 
	gROWS
;

132 
ncouÁ”_t
 
	gCOLS
;

133 
ncouÁ”_t
 
	gCHANNELS
;

134 
ncouÁ”_t
 
	gRANKS
;

135 
ncouÁ”_t
 
	gBANKS
;

136 
ncouÁ”_t
 
	gRAW
;

137 
ncouÁ”_t
 
	gMATHeight
;

138 
ncouÁ”_t
 
	gRBSize
;

140 
ncyşe_t
 
	gtAL
;

141 
ncyşe_t
 
	gtBURST
;

142 
ncyşe_t
 
	gtCAS
;

143 
ncyşe_t
 
	gtCCD
;

144 
ncyşe_t
 
	gtCMD
;

145 
ncyşe_t
 
	gtCWD
;

146 
ncyşe_t
 
	gtRAW
;

147 
ncyşe_t
 
	gtOST
;

148 
ncyşe_t
 
	gtPD
;

149 
ncyşe_t
 
	gtRAS
;

150 
ncyşe_t
 
	gtRCD
;

151 
ncyşe_t
 
	gtRDB
;

152 
ncyşe_t
 
	gtREFW
;

153 
ncyşe_t
 
	gtRFC
;

154 
ncyşe_t
 
	gtRP
;

155 
ncyşe_t
 
	gtRRDR
;

156 
ncyşe_t
 
	gtRRDW
;

157 
ncyşe_t
 
	gtRTP
;

158 
ncyşe_t
 
	gtRTRS
;

159 
ncyşe_t
 
	gtWP
;

160 
ncyşe_t
 
	gtWR
;

161 
ncyşe_t
 
	gtWTR
;

162 
ncyşe_t
 
	gtXP
;

163 
ncyşe_t
 
	gtXPDLL
;

164 
ncyşe_t
 
	gtXS
;

165 
ncyşe_t
 
	gtXSDLL
;

167 
ncyşe_t
 
	gtRDPDEN
;

168 
ncyşe_t
 
	gtWRPDEN
;

169 
ncyşe_t
 
	gtWRAPDEN
;

170 
ncyşe_t
 
	gClo£Page
;

171 
	gScheduËScheme
;

172 
	gHighW©”M¬k
;

173 
	gLowW©”M¬k
;

174 
ncouÁ”_t
 
	gBªksP”Reäesh
;

175 
ncouÁ”_t
 
	gD–ayedReäeshTh»shŞd
;

176 
	g¡d
::
¡ršg
 
Add»ssM­pšgScheme
;

178 
	g¡d
::
¡ršg
 
MemÜyP»ãtch”
;

179 
ncouÁ”_t
 
	gP»ãtchBufãrSize
;

181 
Prog¿mMode
 
	g´og¿mMode
;

182 
ncouÁ”_t
 
	gMLCLev–s
;

183 
ncouÁ”_t
 
	gWPV¬Ÿnû
;

184 
boŞ
 
	gUnifÜmWr™es
;

187 
	gE»£t
;

188 
	gE£t
;

189 
ncyşe_t
 
	gtWP0
;

190 
ncyşe_t
 
	gtWP1
;

193 
ncyşe_t
 
	gnWP00
;

194 
ncyşe_t
 
	gnWP01
;

195 
ncyşe_t
 
	gnWP10
;

196 
ncyşe_t
 
	gnWP11
;

199 
ncyşe_t
 
	gWPMaxV¬Ÿnû
;

202 
ncyşe_t
 
	gD—dlockTim”
;

205 
boŞ
 
	gdebugOn
;

206 
	g¡d
::
£t
<
¡d
::
¡ršg
> 
debugCÏs£s
;

208 
boŞ
 
	gWr™ePausšg
;

209 
	gPau£Th»shŞd
;

210 
ncouÁ”_t
 
	gMaxCªûÎ©iÚs
;

211 
Pau£Mode
 
	g·u£Mode
;

213 
	g´iv©e
:

214 
CÚv”tTimšg
Ğ
CÚfig
 *
cÚf
, 
¡d
::
¡ršg
 
·¿m
, 
ncyşe_t
& 
v®ue
 );

215 
ncyşe_t
 
CÚv”tTimšg
Ğ
CÚfig
 *
cÚf
, 
¡d
::
¡ršg
 
·¿m
 );

	@src/Prefetcher.cpp

34 
	~"¤c/P»ãtch”.h
"

36 
usšg
 
Çme¥aû
 
	gNVM
;

38 
boŞ
 
	gP»ãtch”
::
NÙifyAcûss
Ğ
NVMašReque¡
 * ,

39 
¡d
::
veùÜ
<
NVMAdd»ss
>& )

41  
çl£
;

45 
boŞ
 
	gP»ãtch”
::
DoP»ãtch
Ğ
NVMašReque¡
 * ,

46 
¡d
::
veùÜ
<
NVMAdd»ss
>& )

48  
çl£
;

	@src/Prefetcher.h

34 #iâdeà
__NVMAIN_PREFETCHER_H__


35 
	#__NVMAIN_PREFETCHER_H__


	)

37 
	~"šşude/NVMAdd»ss.h
"

38 
	~"šşude/NVMašReque¡.h
"

39 
	~<veùÜ
>

41 
Çme¥aû
 
	gNVM
 {

43 şas 
	cP»ãtch”


45 
	gpublic
:

46 
P»ãtch”
( ) { }

47 
vœtu®
 ~
P»ãtch”
( ) { }

53 
vœtu®
 
boŞ
 
NÙifyAcûss
Ğ
NVMašReque¡
 *
acûssOp
,

54 
¡d
::
veùÜ
<
NVMAdd»ss
>& 
´eãtchLi¡
 );

62 
vœtu®
 
boŞ
 
DoP»ãtch
Ğ
NVMašReque¡
 *
Œigg”Op
,

63 
¡d
::
veùÜ
<
NVMAdd»ss
>& 
´eãtchLi¡
 );

	@src/Rank.cpp

36 
	~"¤c/Rªk.h
"

38 
usšg
 
Çme¥aû
 
	gNVM
;

40 
	gRªk
::
	$Rªk
()

42 
idË
 = 
Œue
;

43 
	}
}

45 
boŞ
 
	gRªk
::
	$IdË
( )

47  
idË
;

48 
	}
}

	@src/Rank.h

36 #iâdeà
__RANK_H__


37 
	#__RANK_H__


	)

39 
	~<¡dšt.h
>

40 
	~<li¡
>

41 
	~"¤c/Bªk.h
"

42 
	~"¤c/P¬ams.h
"

43 
	~"¤c/NVMObjeù.h
"

44 
	~<io¡»am
>

46 
Çme¥aû
 
	gNVM
 {

61 
	eRªkS‹


63 
	gRANK_UNKNOWN
,

64 
	gRANK_OPEN
,

65 
	gRANK_CLOSED
,

66 
	gRANK_REFRESHING
,

67 
	gRANK_PDPF
,

68 
	gRANK_PDA
,

69 
	gRANK_PDPS


72 şas 
	cRªk
 : 
public
 
NVMObjeù


74 
public
:

75 
Rªk
( );

76 ~
Rªk
( ) { }

78 
vœtu®
 
S‘CÚfig
Ğ
CÚfig
 * , 
boŞ
 = 
Œue
 ) { }

80 
vœtu®
 
boŞ
 
IdË
( );

82 
	g´iv©e
:

83 
boŞ
 
idË
;

	@src/SimInterface.cpp

34 
	~"¤c/SimIÁ”çû.h
"

35 
	~"¤c/CÚfig.h
"

36 
	~<io¡»am
>

38 
usšg
 
Çme¥aû
 
	gNVM
;

40 
	gSimIÁ”çû
::
	$G‘D©aAtAdd»ss
Ğ
ušt64_t
 
add»ss
, 
NVMD©aBlock
 *
d©a
 )

42 
»tv®
;

44 ifĞ!
memÜyD©a
.
	`couÁ
Ğ
add»ss
 ) )

46 
»tv®
 = 0;

51 ifĞ
d©a
 )

52 
d©a
 = 
memÜyD©a
[ 
add»ss
 ];

53 
»tv®
 = 1;

56  
»tv®
;

57 
	}
}

59 
	gSimIÁ”çû
::
	$S‘D©aAtAdd»ss
Ğ
ušt64_t
 
add»ss
, 
NVMD©aBlock
& 
d©a
 )

63 ifĞ!
acûssCouÁs
.
	`couÁ
Ğ
add»ss
 ) )

65 
NVMD©aBlock
 *
ÃwD©a
 = 
Ãw
 
	`NVMD©aBlock
( );

66 
memÜyD©a
[ 
add»ss
 ] = 
ÃwD©a
;

67 *
ÃwD©a
 = 
d©a
;

68 
acûssCouÁs
[ 
add»ss
 ] = 0;

72 
NVMD©aBlock
 *
ÃwD©a
 = 
memÜyD©a
[ 
add»ss
 ];

73 *
ÃwD©a
 = 
d©a
;

74 
acûssCouÁs
[ 
add»ss
 ]++;

76 
	}
}

78 
	gSimIÁ”çû
::
	$S‘CÚfig
Ğ
CÚfig
 *
cÚfig
, 
boŞ
 )

80 
cÚf
 = 
cÚfig
;

81 
	}
}

83 
CÚfig
 *
	gSimIÁ”çû
::
	$G‘CÚfig
( )

85  
cÚf
;

86 
	}
}

	@src/SimInterface.h

34 #iâdeà
__SIMINTERFACE_H__


35 
	#__SIMINTERFACE_H__


	)

37 
	~<¡dšt.h
>

38 
	~<m­
>

39 
	~"šşude/NVMD©aBlock.h
"

41 
Çme¥aû
 
	gNVM
 {

43 
şass
 
	gCÚfig
;

44 şas 
	cSimIÁ”çû


46 
	gpublic
:

47 
SimIÁ”çû
( ) { }

48 
vœtu®
 ~
SimIÁ”çû
( ) { }

50 
vœtu®
 
G‘In¡ruùiÚCouÁ
( ) = 0;

51 
vœtu®
 
G‘CacheMis£s
( , ) = 0;

52 
vœtu®
 
G‘CacheH™s
( , ) = 0;

54 
vœtu®
 
boŞ
 
HasIn¡ruùiÚCouÁ
( ) = 0;

55 
vœtu®
 
boŞ
 
HasCacheMis£s
( ) = 0;

56 
vœtu®
 
boŞ
 
HasCacheH™s
( ) = 0;

58 
vœtu®
 
G‘D©aAtAdd»ss
Ğ
ušt64_t
 
add»ss
, 
NVMD©aBlock
 *
d©a
 );

59 
vœtu®
 
S‘D©aAtAdd»ss
Ğ
ušt64_t
 
add»ss
, 
NVMD©aBlock
& 
d©a
 );

61 
S‘CÚfig
Ğ
CÚfig
 *
cÚf
, 
boŞ
 
ü—‹Chd»n
 = 
Œue
 );

62 
CÚfig
 *
G‘CÚfig
( );

64 
	g´iv©e
:

65 
¡d
::
m­
< 
ušt64_t
, 
	gNVMD©aBlock
* > 
	gmemÜyD©a
;

66 
	g¡d
::
m­
< 
ušt64_t
, > 
	gacûssCouÁs
;

67 
CÚfig
 *
	gcÚf
;

	@src/Stats.cpp

35 
	~"¤c/Sts.h
"

37 
usšg
 
Çme¥aû
 
	gNVM
;

40 
	gSts
::
	$Sts
( )

42 
psIÁ”v®
 = 0;

43 
	}
}

45 
	gSts
::~
	$Sts
( )

47 
¡d
::
veùÜ
<
StBa£
 *>::
™”©Ü
 
™
;

49  
™
 = 
¡©Li¡
.
	`begš
(); iˆ!ğ¡©Li¡.
	`’d
(); it++ )

52 
ušt8_t
 *
rv®
 = 
¡©ic_ÿ¡
<ušt8_ˆ*>((*
™
)->
	`G‘Re£tV®ue
( ));

53 
d–‘e
 
rv®
;

54 
	`d–‘e
 (*
™
);

56 
	}
}

60 
	gSts
::
addSt
Ğ
StTy³
 
¡©
, StTy³ 
»£tV®ue
, 
¡d
::
¡ršg
 
¡©Ty³
, 
size_t
 
ty³Size
, std::¡ršg 
Çme
, std::¡ršg 
un™s
 )

62 
StBa£
 *
sb
 = 
Ãw
 StatBase( );

64 
	gsb
->
S‘Name
Ğ
Çme
 );

65 
	gsb
->
S‘V®ue
Ğ
¡©
 );

66 
	gsb
->
S‘Re£tV®ue
Ğ
»£tV®ue
 );

67 
	gsb
->
S‘StTy³
Ğ
¡©Ty³
, 
ty³Size
 );

68 
	gsb
->
S‘Un™s
Ğ
un™s
 );

70 
	g¡©Li¡
.
push_back
Ğ
sb
 );

74 
	gSts
::
	$»moveSt
Ğ
StTy³
 
¡©
 )

76 
¡d
::
veùÜ
<
StBa£
 *>::
™”©Ü
 
™
;

78  
™
 = 
¡©Li¡
.
	`begš
(); iˆ!ğ¡©Li¡.
	`’d
(); it++ )

80 ifĞ(*
™
)->
	`G‘V®ue
Ğè=ğ
¡©
 )

83 
ušt8_t
 *
rv®
 = 
¡©ic_ÿ¡
<ušt8_ˆ*>((*
™
)->
	`G‘Re£tV®ue
( ));

84 
d–‘e
 
rv®
;

86 
¡©Li¡
.
	`”a£
Ğ
™
 );

90 
	}
}

93 
StTy³
 
	gSts
::
g‘St
Ğ
¡d
::
¡ršg
 
Çme
 )

95 
StTy³
 
rv
 = 
NULL
;

96 
	g¡d
::
veùÜ
<
StBa£
 *>::
™”©Ü
 
™
;

98  
	g™
 = 
¡©Li¡
.
begš
(); iˆ!ğ¡©Li¡.
’d
(); it++ )

100 ifĞ(*
	g™
)->
G‘Name
Ğè=ğ
Çme
 )

102 
rv
 = (*
™
)->
G‘V®ue
( );

107  
	grv
;

111 
	gSts
::
PrštAÎ
Ğ
¡d
::
o¡»am
& 
¡»am
 )

113 
¡d
::
veùÜ
<
StBa£
 *>::
™”©Ü
 
™
;

115  
	g™
 = 
¡©Li¡
.
begš
(); iˆ!ğ¡©Li¡.
’d
(); it++ )

117 (*
	g™
)->
Pršt
Ğ
¡»am
, 
psIÁ”v®
 );

120 
	gpsIÁ”v®
++;

124 
	gSts
::
	$Re£tAÎ
( )

126 
¡d
::
veùÜ
<
StBa£
 *>::
™”©Ü
 
™
;

128  
™
 = 
¡©Li¡
.
	`begš
(); iˆ!ğ¡©Li¡.
	`’d
(); it++ )

130 (*
™
)->
	`Re£t
( );

132 
	}
}

135 
	gStBa£
::
	$Re£t
( )

137 
¡d
::
	`memıy
Ğ
v®ue
, 
»£tV®ue
, 
ty³Size
 );

138 
	}
}

140 
	gStBa£
::
Pršt
Ğ
¡d
::
o¡»am
& 
¡»am
, 
ncouÁ”_t
 
psIÁ”v®
 )

142 
	g¡»am
 << "i" << 
	gpsIÁ”v®
 << "." << 
	gÇme
 << " ";

144 ifĞ
	g¡©Ty³
 =ğ
ty³id
().
Çme
(èè
¡»am
 << *(
¡©ic_ÿ¡
<*>(
v®ue
));

145 ifĞ
	g¡©Ty³
 =ğ
ty³id
().
Çme
(èè
¡»am
 << *(
¡©ic_ÿ¡
<*>(
v®ue
));

146 ifĞ
	g¡©Ty³
 =ğ
ty³id
().
Çme
(èè
¡»am
 << *(
¡©ic_ÿ¡
<*>(
v®ue
));

147 ifĞ
	g¡©Ty³
 =ğ
ty³id
(
ncouÁ”_t
).
Çme
(èè
¡»am
 << *(
¡©ic_ÿ¡
<ncouÁ”_ˆ*>(
v®ue
));

148 ifĞ
	g¡©Ty³
 =ğ
ty³id
(
ncouÁ”s_t
).
Çme
(èè
¡»am
 << *(
¡©ic_ÿ¡
<ncouÁ”s_ˆ*>(
v®ue
));

149 ifĞ
	g¡©Ty³
 =ğ
ty³id
(
ncyşe_t
).
Çme
(èè
¡»am
 << *(
¡©ic_ÿ¡
<ncyşe_ˆ*>(
v®ue
));

150 ifĞ
	g¡©Ty³
 =ğ
ty³id
(
ncyşes_t
).
Çme
(èè
¡»am
 << *(
¡©ic_ÿ¡
<ncyşes_ˆ*>(
v®ue
));

151 ifĞ
	g¡©Ty³
 =ğ
ty³id
(
¡d
::
¡ršg
).
Çme
(èè
¡»am
 << *(
¡©ic_ÿ¡
<¡d::¡ršg *>(
v®ue
));

152 
	g¡»am
 << "?????";

154 
	g¡»am
 << 
	gun™s
 << 
	g¡d
::
’dl
;

	@src/Stats.h

34 #iâdeà
__SRC_STATS_H__


35 
	#__SRC_STATS_H__


	)

38 
	#AddSt
(
STAT
) \

40 
	`_AddSt
(
STAT
, "") \

41 }

	)

42 
	#AddUn™St
(
STAT
, 
UNITS
) \

44 
	`_AddSt
(
STAT
, 
UNITS
) \

45 }

	)

46 
	#_AddSt
(
STAT
, 
UNITS
) \

48 
ušt8_t
 *
__»£tV®ue
 = 
Ãw
 ušt8_ˆ[(
STAT
)]; \

49 
	`memıy
(
__»£tV®ue
, 
¡©ic_ÿ¡
<
StTy³
>(&
STAT
), (STAT)); \

50 
this
->
	`G‘Sts
()->
	`addSt
(
¡©ic_ÿ¡
<
StTy³
>(&(
STAT
)), \

51 
¡©ic_ÿ¡
<
StTy³
>(
__»£tV®ue
), \

52 
	`ty³id
(
STAT
).
	`Çme
(), \

53 (
STAT
), \

54 
	`StName
() + "." + #STAT, \

55 
UNITS
); \

56 }

	)

57 
	#RemoveSt
(
STAT
è(
this
->
	`G‘Sts
()->
	`»moveSt
(
¡©ic_ÿ¡
<
StTy³
>(&STAT)))

	)

60 
	#G‘St
(
CHLD
, 
STAT
è(CHLD->
	`G‘Sts
Ğ)->
	`g‘St
ĞCHLD->
	`StName
Ğè+ "." + STAT ) )

	)

63 
	#Ca¡St
(
STAT
, 
TYPE
è(*(
¡©ic_ÿ¡
< TYPE * >ĞSTAT )))

	)

67 
	~<o¡»am
>

68 
	~<ty³šfo
>

69 
	~<veùÜ
>

70 
	~<c¡ršg
>

71 
	~<®gÜ™hm
>

73 
	~"šşude/NVMTy³s.h
"

75 
Çme¥aû
 
	gNVM
 {

77 * 
	tStTy³
;

78 şas 
	cStBa£


80 
	gpublic
:

81 
StBa£
( ) { }

82 ~
StBa£
( ) { }

84 
Re£t
( );

85 
Pršt
Ğ
¡d
::
o¡»am
& 
¡»am
, 
ncouÁ”_t
 
psIÁ”v®
 );

87 
	g¡d
::
¡ršg
 
G‘Name
Ğè{  
Çme
; }

88 
S‘Name
Ğ
¡d
::
¡ršg
 
n
 ) { 
Çme
 =‚; }

90 * 
G‘V®ue
Ğè{  
	gv®ue
; }

91 
S‘V®ue
(
StTy³
 
v®
 ){

92 
	gv®ue
 = 
v®
;

95 
	g¡d
::
¡ršg
 
G‘Un™s
Ğè{  
un™s
; }

96 
S‘Un™s
Ğ
¡d
::
¡ršg
 
u
 ) { 
un™s
 = u; }

98 
S‘Re£tV®ue
Ğ
StTy³
 
rv®
 ) { 
	g»£tV®ue
 =„val; }

99 *
G‘Re£tV®ue
Ğè{  
	g»£tV®ue
; }

101 
S‘StTy³
Ğ
¡d
::
¡ršg
 
¡
, 
size_t
 
ts
 ) { 
	g¡©Ty³
 = st; 
	gty³Size
 =s; }

102 
size_t
 
G‘Ty³Size
Ğè{  
	gty³Size
; }

103 
	g¡d
::
¡ršg
 
G‘Ty³Name
(è{  
¡©Ty³
; }

105 
	g´iv©e
:

106 
¡d
::
¡ršg
 
Çme
, 
	g¡©Ty³
, 
	gun™s
;

107 
size_t
 
	gty³Size
;

108 
StTy³
 
	g»£tV®ue
;

109 
StTy³
 
	gv®ue
;

112 şas 
	cSts


114 
	gpublic
:

115 
Sts
( );

116 ~
Sts
( );

118 
addSt
Ğ
StTy³
 
¡©
, StTy³ 
»£tV®ue
, 
¡d
::
¡ršg
 
¡©Ty³
, 
size_t
 
ty³Size
, std::¡ršg 
Çme
, std::¡ršg 
un™s
 );

119 
»moveSt
Ğ
StTy³
 
¡©
 );

120 
StTy³
 
g‘St
Ğ
¡d
::
¡ršg
 
Çme
 );

122 
PrštAÎ
Ğ
¡d
::
o¡»am
& );

123 
Re£tAÎ
( );

125 
	g´iv©e
:

126 
¡d
::
veùÜ
<
StBa£
 *> 
¡©Li¡
;

127 
ncouÁ”_t
 
	gpsIÁ”v®
;

	@src/SubArray.cpp

34 
	~"¤c/SubA¼ay.h
"

35 
	~"¤c/Bªk.h
"

36 
	~"¤c/MemÜyCÚŒŞËr.h
"

37 
	~"¤c/Ev’tQueue.h
"

38 
	~"šşude/NVMH–³rs.h
"

39 
	~"Endu¿nû/Endu¿nûMod–FaùÜy.h
"

40 
	~"Endu¿nû/NuÎMod–/NuÎMod–.h
"

41 
	~"Endu¿nû/Di¡ributiÚs/NÜm®.h
"

42 
	~"D©aEncod”s/D©aEncod”FaùÜy.h
"

44 
	~<sigÇl.h
>

45 
	~<ÿs£¹
>

46 
	~<io¡»am
>

47 
	~<lim™s
>

49 
	#Wr™eC–lD©a
 
Wr™eC–lD©a2


	)

51 
usšg
 
Çme¥aû
 
	gNVM
;

53 
	gSubA¼ay
::
	$SubA¼ay
( )

55 
cÚf
 = 
NULL
;

57 
ÃxtAùiv©e
 = 0;

58 
ÃxtP»ch¬ge
 = 0;

59 
ÃxtR—d
 = 0;

60 
ÃxtWr™e
 = 0;

61 
ÃxtPow”Down
 = 0;

62 
ÃxtCommªd
 = 
CMD_NOP
;

64 
¡©e
 = 
SUBARRAY_CLOSED
;

65 
Ï¡Aùiv©e
 = 0;

66 
İ’Row
 = 0;

68 
ÃxtAùiv©e
 = 0;

69 
ÃxtP»ch¬ge
 = 0;

70 
ÃxtR—d
 = 0;

71 
ÃxtWr™e
 = 0;

73 
d©aCyşes
 = 0;

74 
wÜ¡Ca£Wr™e
 = 0;

76 
subA¼ayEÃrgy
 = 0.0f;

77 
aùiveEÃrgy
 = 0.0f;

78 
bur¡EÃrgy
 = 0.0f;

79 
wr™eEÃrgy
 = 0.0f;

80 
»äeshEÃrgy
 = 0.0f;

82 
wr™eCyşe
 = 
çl£
;

83 
wr™eMode
 = 
WRITE_THROUGH
;

84 
isWr™šg
 = 
çl£
;

85 
wr™eEnd
 = 0;

86 
wr™eS¹
 = 0;

87 
wr™eEv’tTime
 = 0;

88 
wr™eEv’t
 = 
NULL
;

89 
wr™eReque¡
 = 
NULL
;

90 
ÃxtAùiv©eP»Wr™e
 = 0;

91 
ÃxtP»ch¬geP»Wr™e
 = 0;

92 
ÃxtR—dP»Wr™e
 = 0;

93 
ÃxtWr™eP»Wr™e
 = 0;

94 
ÃxtPow”DownP»Wr™e
 = 0;

95 
idËTim”
 = 0;

97 
ÿnûÎedWr™es
 = 0;

98 
ÿnûÎedWr™eTime
 = 0;

99 
·u£dWr™es
 = 0;

101 
av”agePau£sP”Reque¡
 = 0.0;

102 
m—su»dPau£s
 = 0;

104 
av”agePau£dReque¡Prog»ss
 = 0.0;

105 
m—su»dProg»s£s
 = 0;

107 
»ads
 = 0;

108 
wr™es
 = 0;

109 
aùiv©es
 = 0;

110 
´ech¬ges
 = 0;

111 
»äeshes
 = 0;

113 
aùWa™s
 = 0;

114 
aùWa™TÙ®
 = 0;

115 
aùWa™Av”age
 = 0.0;

117 
num00Wr™es
 = 0;

118 
num01Wr™es
 = 0;

119 
num10Wr™es
 = 0;

120 
num11Wr™es
 = 0;

121 
mlcTimšgHi¡o
 = "";

122 
ÿnûlCouÁHi¡o
 = "";

123 
wpPau£Hi¡o
 = "";

124 
wpCªûlHi¡o
 = "";

125 
av”ageWr™eTime
 = 0.0;

126 
m—su»dWr™eTimes
 = 0;

127 
av”ageWr™eI‹¿tiÚs
 = 1;

129 
’drMod–
 = 
NULL
;

130 
d©aEncod”
 = 
NULL
;

132 
subA¼ayId
 = -1;

134 
psIÁ”v®
 = 0;

135 
	}
}

137 
	gSubA¼ay
::~
	$SubA¼ay
( )

139 
	}
}

141 
SubA¼ay
::
	$S‘CÚfig
Ğ
CÚfig
 *
c
, 
boŞ
 
ü—‹Chd»n
 )

143 
cÚf
 = 
c
;

145 
P¬ams
 *
·¿ms
 = 
Ãw
 
	`P¬ams
( );

146 
·¿ms
->
	`S‘P¬ams
Ğ
c
 );

147 
	`S‘P¬ams
Ğ
·¿ms
 );

149 
MATHeight
 = 
p
->MATHeight;

151 ifĞ
cÚf
->
	`KeyExi¡s
( "MATWidth" ) )

152 
MATWidth
 = 
¡©ic_ÿ¡
<
ncouÁ”_t
>Ğ
cÚf
->
	`G‘V®ue
( "MATWidth" ) );

155 ifĞ
cÚf
->
	`KeyExi¡s
( "WriteMode" ) )

157 ifĞ
cÚf
->
	`G‘SŒšg
( "WriteMode" ) == "WriteThrough" )

159 
wr™eMode
 = 
WRITE_THROUGH
;

161 ifĞ
cÚf
->
	`G‘SŒšg
( "WriteMode" ) == "WriteBack" )

163 
wr™eMode
 = 
WRITE_BACK
;

167 
¡d
::
cout
 << "NVMain Warning: Unknown write mode `"

168 << 
cÚf
->
	`G‘SŒšg
( "WriteMode" )

169 << "'. DeçuÉšgØWr™eThrough" << 
¡d
::
’dl
;

170 
wr™eMode
 = 
WRITE_THROUGH
;

174 
ncouÁ”_t
 
tÙ®Wr™ePul£s
 = 
p
->
nWP00
 +…->
nWP01
 +…->
nWP10
 +…->
nWP11
;

175 
av”ageWr™eI‹¿tiÚs
 = 
¡©ic_ÿ¡
<
ncouÁ”_t
>Ğ(
tÙ®Wr™ePul£s
+2)/4 );

177 ifĞ
ü—‹Chd»n
 )

181 
’drMod–
 = 
Endu¿nûMod–FaùÜy
::
	`C»©eEndu¿nûMod–
Ğ
p
->
Endu¿nûMod–
 );

182 ifĞ
’drMod–
 )

184 
’drMod–
->
	`S‘CÚfig
Ğ
cÚf
, 
ü—‹Chd»n
 );

185 
’drMod–
->
	`S‘Sts
Ğ
	`G‘Sts
( ) );

188 
d©aEncod”
 = 
D©aEncod”FaùÜy
::
	`C»©eNewD©aEncod”
Ğ
p
->
D©aEncod”
 );

189 ifĞ
d©aEncod”
 )

191 
d©aEncod”
->
	`S‘CÚfig
Ğ
cÚf
, 
ü—‹Chd»n
 );

192 
d©aEncod”
->
	`S‘Sts
Ğ
	`G‘Sts
( ) );

195 
	}
}

197 
	gSubA¼ay
::
	$Regi¡”Sts
( )

199 ifĞ
’drMod–
 )

201 
’drMod–
->
	`Regi¡”Sts
( );

204 ifĞ
d©aEncod”
 )

206 
d©aEncod”
->
	`Regi¡”Sts
( );

210 ifĞ
p
->
EÃrgyMod–
 == "current" )

212 
	`AddUn™St
(
subA¼ayEÃrgy
, "mA*t");

213 
	`AddUn™St
(
aùiveEÃrgy
, "mA*t");

214 
	`AddUn™St
(
bur¡EÃrgy
, "mA*t");

215 
	`AddUn™St
(
»äeshEÃrgy
, "mA*t");

220 
	`AddUn™St
(
subA¼ayEÃrgy
, "nJ");

221 
	`AddUn™St
(
aùiveEÃrgy
, "nJ");

222 
	`AddUn™St
(
bur¡EÃrgy
, "nJ");

223 
	`AddUn™St
(
wr™eEÃrgy
, "nJ");

224 
	`AddUn™St
(
»äeshEÃrgy
, "nJ");

227 
	`AddSt
(
ÿnûÎedWr™es
);

228 
	`AddSt
(
ÿnûÎedWr™eTime
);

229 
	`AddSt
(
·u£dWr™es
);

231 
	`AddSt
(
av”agePau£sP”Reque¡
);

232 
	`AddSt
(
m—su»dPau£s
);

234 
	`AddSt
(
av”agePau£dReque¡Prog»ss
);

235 
	`AddSt
(
m—su»dProg»s£s
);

237 
	`AddSt
(
»ads
);

238 
	`AddSt
(
wr™es
);

239 
	`AddSt
(
aùiv©es
);

240 
	`AddSt
(
´ech¬ges
);

241 
	`AddSt
(
»äeshes
);

243 ifĞ
’drMod–
 )

245 
	`AddSt
(
wÜ¡Ca£Endu¿nû
);

246 
	`AddSt
(
av”ageEndu¿nû
);

249 
	`AddSt
(
aùWa™s
);

250 
	`AddSt
(
aùWa™TÙ®
);

251 
	`AddSt
(
aùWa™Av”age
);

253 
	`AddSt
(
wÜ¡Ca£Wr™e
);

254 
	`AddSt
(
num00Wr™es
);

255 
	`AddSt
(
num01Wr™es
);

256 
	`AddSt
(
num10Wr™es
);

257 
	`AddSt
(
num11Wr™es
);

258 
	`AddSt
(
av”ageWr™eTime
);

259 
	`AddSt
(
m—su»dWr™eTimes
);

261 
	`AddSt
(
mlcTimšgHi¡o
);

262 
	`AddSt
(
ÿnûlCouÁHi¡o
);

263 
	`AddSt
(
wpPau£Hi¡o
);

264 
	`AddSt
(
wpCªûlHi¡o
);

265 
	}
}

270 
boŞ
 
	gSubA¼ay
::
	$Aùiv©e
Ğ
NVMašReque¡
 *
»que¡
 )

272 
ušt64_t
 
aùiv©eRow
;

274 
»que¡
->
add»ss
.
	`G‘T¿n¦©edAdd»ss
Ğ&
aùiv©eRow
, 
NULL
, NULL, NULL, NULL, NULL );

277 
	`CheckWr™ePausšg
( );

281 ifĞ
ÃxtAùiv©e
 > 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
() )

283 
¡d
::
û¼
 << "NVMain Error: SubArray violates ACTIVATIONiming constraint!"

284 << 
¡d
::
’dl
;

285  
çl£
;

288 ifĞ
p
->
U£P»ch¬ge
 && 
¡©e
 !ğ
SUBARRAY_CLOSED
 )

290 
¡d
::
û¼
 << "NVMain Error:ryo open‡ subarrayhat is‚ot idle!"

291 << 
¡d
::
’dl
;

292  
çl£
;

296 
ÃxtP»ch¬ge
 = 
	`MAX
(‚extPrecharge,

297 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
()

298 + 
	`MAX
Ğ
p
->
tRCD
,…->
tRAS
 ) );

300 
ÃxtR—d
 = 
	`MAX
(‚extRead,

301 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
()

302 + 
p
->
tRCD
 -…->
tAL
 );

304 
ÃxtWr™e
 = 
	`MAX
(‚extWrite,

305 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
()

306 + 
p
->
tRCD
 -…->
tAL
 );

308 
ÃxtPow”Down
 = 
	`MAX
(‚extPowerDown,

309 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
()

310 + 
	`MAX
Ğ
p
->
tRCD
,…->
tRAS
 ) );

314 
»que¡
->
owÃr
 = 
this
;

315 
	`G‘Ev’tQueue
Ğ)->
	`In£¹Ev’t
Ğ
Ev’tRe¥Ú£
, 
this
, 
»que¡
,

316 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
(è+ 
	`MAX
Ğ
p
->
tRCD
,…->
tRAS
 ) );

322 
İ’Row
 = 
aùiv©eRow
;

324 
¡©e
 = 
SUBARRAY_OPEN
;

325 
wr™eCyşe
 = 
çl£
;

327 
Ï¡Aùiv©e
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
();

330 ifĞ
p
->
EÃrgyMod–
 == "current" )

333 
ncyşe_t
 
tRC
 = 
p
->
tRAS
 +…->
tRP
;

335 
subA¼ayEÃrgy
 +ğĞĞ
p
->
EIDD0
 * ()
tRC
 )

336 - ( ( 
p
-> 
EIDD3N
 * ()Õ->
tRAS
) )

337 + ( 
p
->
EIDD2N
 * ()Õ->
tRP
èèèè/ ()Õ->
BANKS
);

339 
aùiveEÃrgy
 +ğĞĞ
p
->
EIDD0
 * ()
tRC
 )

340 - ( ( 
p
->
EIDD3N
 * ()Õ->
tRAS
) )

341 + ( 
p
->
EIDD2N
 * ()Õ->
tRP
èèèè/ ()Õ->
BANKS
);

346 
subA¼ayEÃrgy
 +ğ
p
->
Erd
;

347 
aùiveEÃrgy
 +ğ
p
->
Erd
;

350 
aùiv©es
++;

352  
Œue
;

353 
	}
}

358 
boŞ
 
	gSubA¼ay
::
	$R—d
Ğ
NVMašReque¡
 *
»que¡
 )

360 
ušt64_t
 
»adRow
;

362 
»que¡
->
add»ss
.
	`G‘T¿n¦©edAdd»ss
Ğ&
»adRow
, 
NULL
, NULL, NULL, NULL, NULL );

365 
	`CheckWr™ePausšg
( );

369 ifĞ
ÃxtR—d
 > 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
() )

371 
¡d
::
û¼
 << "NVMain Error: Subarray violates READiming constraint!"

372 << 
¡d
::
’dl
;

373  
çl£
;

375 ifĞ
¡©e
 !ğ
SUBARRAY_OPEN
 )

377 
¡d
::
û¼
 << "NVMain Error:ryo„ead‡ subarrayhat is‚ot‡ctive!"

378 << 
¡d
::
’dl
;

379  
çl£
;

381 ifĞ
»adRow
 !ğ
İ’Row
 )

383 
¡d
::
û¼
 << "NVMain Error:ryo„ead‡„owhat is‚ot opened in‡ subarray!"

384 << 
¡d
::
’dl
;

385  
çl£
;

389 
ncyşes_t
 
decL©
 = (
d©aEncod”
 ? d©aEncod”->
	`R—d
Ğ
»que¡
 ) : 0);

392 ifĞ
»que¡
->
ty³
 =ğ
READ_PRECHARGE
 )

394 
ÃxtAùiv©e
 = 
	`MAX
(‚extActivate,

395 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
()

396 + 
	`MAX
Ğ
p
->
tBURST
,…->
tCCD
 ) * (
»que¡
->
bur¡CouÁ
 - 1)

397 + 
p
->
tAL
 +…->
tRTP
 +…->
tRP
 + 
decL©
 );

399 
ÃxtP»ch¬ge
 = 
	`MAX
ĞÃxtP»ch¬ge, 
ÃxtAùiv©e
 );

400 
ÃxtR—d
 = 
	`MAX
ĞÃxtR—d, 
ÃxtAùiv©e
 );

401 
ÃxtWr™e
 = 
	`MAX
ĞÃxtWr™e, 
ÃxtAùiv©e
 );

403 
NVMašReque¡
 *
´eReq
 = 
Ãw
 
	`NVMašReque¡
( );

404 *
´eReq
 = *
»que¡
;

405 
´eReq
->
owÃr
 = 
this
;

408 
	`G‘Ev’tQueue
Ğ)->
	`In£¹Ev’t
Ğ
Ev’tRe¥Ú£
, 
this
, 
´eReq
,

409 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
(è+ 
p
->
tAL
 +…->
tRTP
 + 
decL©


410 + 
	`MAX
Ğ
p
->
tBURST
,…->
tCCD
 ) * (
»que¡
->
bur¡CouÁ
 - 1) );

414 
ÃxtP»ch¬ge
 = 
	`MAX
(‚extPrecharge,

415 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
()

416 + 
	`MAX
Ğ
p
->
tBURST
,…->
tCCD
 ) * (
»que¡
->
bur¡CouÁ
 - 1)

417 + 
p
->
tAL
 +…->
tBURST
 +…->
tRTP
 -…->
tCCD
 + 
decL©
 );

419 
ÃxtR—d
 = 
	`MAX
(‚extRead,

420 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
()

421 + 
	`MAX
Ğ
p
->
tBURST
,…->
tCCD
 ) * 
»que¡
->
bur¡CouÁ
 );

423 
ÃxtWr™e
 = 
	`MAX
(‚extWrite,

424 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
()

425 + 
	`MAX
Ğ
p
->
tBURST
,…->
tCCD
 ) * (
»que¡
->
bur¡CouÁ
 - 1)

426 + 
p
->
tCAS
 +…->
tBURST
 +…->
tRTRS
 -…->
tCWD
 + 
decL©
 );

430 
ÃxtPow”Down
 = 
	`MAX
(‚extPowerDown,

431 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
()

432 + 
	`MAX
Ğ
p
->
tBURST
,…->
tCCD
 ) * (
»que¡
->
bur¡CouÁ
 - 1)

433 + 
p
->
tCAS
 +…->
tAL
 +…->
tBURST
 + 1 + 
decL©
 );

442 
NVMašReque¡
 *
busReq
 = 
Ãw
 
	`NVMašReque¡
( );

443 *
busReq
 = *
»que¡
;

444 
busReq
->
ty³
 = 
BUS_WRITE
;

445 
busReq
->
owÃr
 = 
this
;

447 
	`G‘Ev’tQueue
Ğ)->
	`In£¹Ev’t
Ğ
Ev’tRe¥Ú£
, 
this
, 
busReq
,

448 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
(è+ 
p
->
tCAS
 + 
decL©
 );

451 
	`G‘Ev’tQueue
Ğ)->
	`In£¹Ev’t
Ğ
Ev’tRe¥Ú£
, 
this
, 
»que¡
,

452 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
(è+ 
p
->
tCAS
 +…->
tBURST
 + 
decL©
 );

456 ifĞ
p
->
EÃrgyMod–
 == "current" )

459 
subA¼ayEÃrgy
 +ğĞĞ
p
->
EIDD4R
 -…->
EIDD3N
 ) * ()Õ->
tBURST
èè/ ()Õ->
BANKS
);

461 
bur¡EÃrgy
 +ğĞĞ
p
->
EIDD4R
 -…->
EIDD3N
 ) * ()Õ->
tBURST
èè/ ()Õ->
BANKS
);

466 
subA¼ayEÃrgy
 +ğ
p
->
Eİ’rd
;

468 
bur¡EÃrgy
 +ğ
p
->
Eİ’rd
;

474 ifĞ
cÚf
->
	`G‘SimIÁ”çû
Ğè!ğ
NULL
 && 
’drMod–
 != NULL )

486 ifĞ!
cÚf
->
	`G‘SimIÁ”çû
Ğ)->
	`G‘D©aAtAdd»ss
(

487 
»que¡
->
add»ss
.
	`G‘PhysiÿlAdd»ss
Ğ), 
NULL
 ) )

491 
cÚf
->
	`G‘SimIÁ”çû
Ğ)->
	`S‘D©aAtAdd»ss
(

492 
»que¡
->
add»ss
.
	`G‘PhysiÿlAdd»ss
Ğ),„eque¡->
d©a
 );

496 
»ads
++;

497 
d©aCyşes
 +ğ
p
->
tBURST
;

499  
Œue
;

500 
	}
}

505 
boŞ
 
	gSubA¼ay
::
	$Wr™e
Ğ
NVMašReque¡
 *
»que¡
 )

507 
ušt64_t
 
wr™eRow
;

508 
ncyşe_t
 
wr™eTim”
;

510 
»que¡
->
add»ss
.
	`G‘T¿n¦©edAdd»ss
Ğ&
wr™eRow
, 
NULL
, NULL, NULL, NULL, NULL );

514 ifĞ
ÃxtWr™e
 > 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
() )

516 
¡d
::
û¼
 << "NVMain Error: Subarray violates WRITEiming constraint!"

517 << 
¡d
::
’dl
;

518  
çl£
;

520 ifĞ
¡©e
 !ğ
SUBARRAY_OPEN
 )

522 
¡d
::
û¼
 << "NVMain Error:ryo write‡ subarrayhat is‚ot‡ctive!"

523 << 
¡d
::
’dl
;

524  
çl£
;

526 ifĞ
wr™eRow
 !ğ
İ’Row
 )

528 
¡d
::
û¼
 << "NVMain Error:ryo write‡„owhat is‚ot opened "

529 << "š‡ sub¬¿y!" << 
¡d
::
’dl
;

530  
çl£
;

534 
wr™eTim”
 = 
	`Wr™eC–lD©a
Ğ
»que¡
 );

535 ifĞ
»que¡
->
æags
 & 
NVMašReque¡
::
FLAG_PAUSED
 )

537 
wr™eTim”
 = 
»que¡
->
wr™eProg»ss
;

538 
»que¡
->
æags
 &ğ~
NVMašReque¡
::
FLAG_PAUSED
;

545 
wr™eTim”
 = 
	`Wr™eC–lD©a
Ğ
»que¡
 );

548 ifĞ
»que¡
->
æags
 & 
NVMašReque¡
::
FLAG_CANCELLED
 )

550 
»que¡
->
æags
 &ğ~
NVMašReque¡
::
FLAG_CANCELLED
;

556 ifĞ
wr™eMode
 =ğ
WRITE_BACK
 && 
wr™eCyşe
 )

558 
wr™eTim”
 = 0;

560 
NVMašReque¡
 *
»que¡Cİy
 = 
Ãw
 
	`NVMašReque¡
( );

561 *
»que¡Cİy
 = *
»que¡
;

562 
wr™eBackReque¡s
.
	`push_back
Ğ
»que¡Cİy
 );

566 ifĞ
wr™eMode
 =ğ
WRITE_THROUGH
 )

567 
»que¡
->
wr™eProg»ss
 = 
wr™eTim”
;

570 
ÃxtAùiv©eP»Wr™e
 = 
ÃxtAùiv©e
;

571 
ÃxtP»ch¬geP»Wr™e
 = 
ÃxtP»ch¬ge
;

572 
ÃxtR—dP»Wr™e
 = 
ÃxtR—d
;

573 
ÃxtWr™eP»Wr™e
 = 
ÃxtWr™e
;

574 
ÃxtPow”DownP»Wr™e
 = 
ÃxtPow”Down
;

576 ifĞ
wr™eMode
 =ğ
WRITE_THROUGH
 )

578 
ncyşe_t
 
’cL©
 = (
d©aEncod”
 ? d©aEncod”->
	`Wr™e
Ğ
»que¡
 ) : 0);

579 
ncyşe_t
 
’drL©
 = 
	`Upd©eEndu¿nû
Ğ
»que¡
 );

581 
wr™eTim”
 +ğ
’cL©
 + 
’drL©
;

583 
av”ageWr™eTime
 = (×v”ageWr™eTim* 
¡©ic_ÿ¡
<>(
m—su»dWr™eTimes
)è+ stic_ÿ¡<>(
wr™eTim”
))

584 / (
¡©ic_ÿ¡
<>(
m—su»dWr™eTimes
) + 1.0);

585 
m—su»dWr™eTimes
++;

589 ifĞ
»que¡
->
ty³
 =ğ
WRITE_PRECHARGE
 )

591 
ÃxtAùiv©e
 = 
	`MAX
(‚extActivate,

592 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
()

593 + 
	`MAX
Ğ
p
->
tBURST
,…->
tCCD
 ) * (
»que¡
->
bur¡CouÁ
 - 1)

594 + 
p
->
tAL
 +…->
tCWD
 +…->
tBURST


595 + 
wr™eTim”
 + 
p
->
tWR
 +…->
tRP
 );

597 
ÃxtP»ch¬ge
 = 
	`MAX
ĞÃxtP»ch¬ge, 
ÃxtAùiv©e
 );

598 
ÃxtR—d
 = 
	`MAX
ĞÃxtR—d, 
ÃxtAùiv©e
 );

599 
ÃxtWr™e
 = 
	`MAX
ĞÃxtWr™e, 
ÃxtAùiv©e
 );

602 
NVMašReque¡
 *
´eReq
 = 
Ãw
 
	`NVMašReque¡
( );

603 *
´eReq
 = *
»que¡
;

604 
´eReq
->
owÃr
 = 
this
;

607 
	`G‘Ev’tQueue
Ğ)->
	`In£¹Ev’t
Ğ
Ev’tRe¥Ú£
, 
this
, 
´eReq
,

608 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
()

609 + 
	`MAX
Ğ
p
->
tBURST
,…->
tCCD
 ) * (
»que¡
->
bur¡CouÁ
 - 1)

610 + 
p
->
tAL
 +…->
tCWD
 +…->
tBURST
 + 
wr™eTim”
 +…->
tWR
 );

614 
ÃxtP»ch¬ge
 = 
	`MAX
(‚extPrecharge,

615 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
()

616 + 
	`MAX
Ğ
p
->
tBURST
,…->
tCCD
 ) * (
»que¡
->
bur¡CouÁ
 - 1)

617 + 
p
->
tAL
 +…->
tCWD
 +…->
tBURST
 + 
wr™eTim”
 +…->
tWR
 );

619 
ÃxtR—d
 = 
	`MAX
(‚extRead,

620 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
()

621 + 
	`MAX
Ğ
p
->
tBURST
,…->
tCCD
 ) * (
»que¡
->
bur¡CouÁ
 - 1)

622 + 
p
->
tCWD
 +…->
tBURST
 +…->
tWTR
 + 
wr™eTim”
 );

624 
ÃxtWr™e
 = 
	`MAX
(‚extWrite,

625 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
()

626 + 
	`MAX
Ğ
p
->
tBURST
,…->
tCCD
 ) * 
»que¡
->
bur¡CouÁ
 + 
wr™eTim”
 );

629 
ÃxtPow”Down
 = 
	`MAX
ĞÃxtPow”Down, 
ÃxtP»ch¬ge
 );

632 
isWr™šg
 = 
Œue
;

633 
wr™eReque¡
 = 
»que¡
;

635 
wr™eS¹
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
();

636 
wr™eEnd
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
(è+ 
wr™eTim”
;

637 
wr™eEv’tTime
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
(è+ 
p
->
tCWD


638 + 
	`MAX
Ğ
p
->
tBURST
,…->
tCCD
 ) * 
»que¡
->
bur¡CouÁ
 + 
wr™eTim”
;

645 
¡d
::
veùÜ
<
NVMObjeù_hook
 *>& 
chd»n
 = 
	`G‘P¬’t
Ğ)->
	`G‘T¿mpŞše
Ğ)->
	`G‘Chd»n
( );

646 
¡d
::
veùÜ
<
NVMObjeù_hook
 *>::
™”©Ü
 
™
;

647 
NVMObjeù_hook
 *
hook
 = 
NULL
;

649  
™
 = 
chd»n
.
	`begš
(); iˆ!ğchd»n.
	`’d
(); it++ )

651 ifĞ(*
™
)->
	`G‘T¿mpŞše
(è=ğ
this
 )

653 
hook
 = (*
™
);

658 
	`as£¹
Ğ
hook
 !ğ
NULL
 );

660 
wr™eEv’t
 = 
Ãw
 
NVM
::
	`Ev’t
( );

661 
wr™eEv’t
->
	`S‘Ty³
Ğ
Ev’tRe¥Ú£
 );

662 
wr™eEv’t
->
	`S‘Rec›Á
Ğ
hook
 );

663 
wr™eEv’t
->
	`S‘Reque¡
Ğ
»que¡
 );

666 
NVMašReque¡
 *
busReq
 = 
Ãw
 
	`NVMašReque¡
( );

667 *
busReq
 = *
»que¡
;

668 
busReq
->
ty³
 = 
BUS_READ
;

669 
busReq
->
owÃr
 = 
this
;

671 
	`G‘Ev’tQueue
Ğ)->
	`In£¹Ev’t
Ğ
Ev’tRe¥Ú£
, 
this
, 
busReq
,

672 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
(è+ 
p
->
tCWD
 );

675 
	`G‘Ev’tQueue
Ğ)->
	`In£¹Ev’t
Ğ
wr™eEv’t
, 
wr™eEv’tTime
 );

678 ifĞ
p
->
EÃrgyMod–
 == "current" )

681 
subA¼ayEÃrgy
 +ğĞĞ
p
->
EIDD4W
 -…->
EIDD3N
 ) * ()Õ->
tBURST
èè/ ()Õ->
BANKS
);

683 
bur¡EÃrgy
 +ğĞĞ
p
->
EIDD4W
 -…->
EIDD3N
 ) * ()Õ->
tBURST
èè/ ()Õ->
BANKS
);

688 
subA¼ayEÃrgy
 +ğ
p
->
Ewr
;

690 
bur¡EÃrgy
 +ğ
p
->
Ewr
;

693 
wr™eCyşe
 = 
Œue
;

695 
wr™es
++;

696 
d©aCyşes
 +ğ
p
->
tBURST
;

698  
Œue
;

699 
	}
}

704 
boŞ
 
	gSubA¼ay
::
	$P»ch¬ge
Ğ
NVMašReque¡
 *
»que¡
 )

706 
ncyşe_t
 
wr™eTim”
;

710 ifĞ
ÃxtP»ch¬ge
 > 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
() )

712 
¡d
::
û¼
 << "NVMain Error: SubArray violates PRECHARGEiming constraint!"

713 << 
¡d
::
’dl
;

714  
çl£
;

716 ifĞ
¡©e
 !ğ
SUBARRAY_CLOSED
 && s‹ !ğ
SUBARRAY_OPEN
 )

718 
¡d
::
û¼
 << "NVMain Error:ryo…recharge‡ subarrayhat is‚either "

719 << "idË‚Ü‡ùive" << 
¡d
::
’dl
;

720  
çl£
;

724 
wr™eTim”
 = 
	`MAX
Ğ1, 
p
->
tRP
 );

725 ifĞ
wr™eMode
 =ğ
WRITE_BACK
 && 
wr™eCyşe
 )

727 
wr™eTim”
 = 
	`MAX
Ğ1, 
p
->
tRP
 + 
	`Wr™eC–lD©a
Ğ
»que¡
 ) );

729 
ncyşe_t
 
’cL©
 = 0;

730 
ncyşe_t
 
’drL©
 = 0;

732 
¡d
::
veùÜ
<
NVMašReque¡
 *>::
™”©Ü
 
w™
;

733  
w™
 = 
wr™eBackReque¡s
.
	`begš
(); w™ !ğwr™eBackReque¡s.
	`’d
(); wit++ )

735 
’cL©
 +ğ(
d©aEncod”
 ? d©aEncod”->
	`Wr™e
Ğ*
w™
 ) : 0);

736 
’drL©
 +ğ
	`Upd©eEndu¿nû
Ğ*
w™
 );

738 
wr™eBackReque¡s
.
	`ş—r
( );

740 
wr™eTim”
 +ğ
’cL©
 + 
’drL©
;

742 
av”ageWr™eTime
 = (×v”ageWr™eTim* 
¡©ic_ÿ¡
<>(
m—su»dWr™eTimes
)è+ stic_ÿ¡<>(
wr™eTim”
))

743 / (
¡©ic_ÿ¡
<>(
m—su»dWr™eTimes
) + 1.0);

744 
m—su»dWr™eTimes
++;

747 
ÃxtAùiv©e
 = 
	`MAX
(‚extActivate,

748 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
(è+ 
wr™eTim”
 );

751 
»que¡
->
owÃr
 = 
this
;

752 
	`G‘Ev’tQueue
Ğ)->
	`In£¹Ev’t
Ğ
Ev’tRe¥Ú£
, 
this
, 
»que¡
,

753 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
(è+ 
wr™eTim”
 );

756 
¡©e
 = 
SUBARRAY_PRECHARGING
;

758  
Œue
;

759 
	}
}

765 
boŞ
 
	gSubA¼ay
::
	$Reäesh
Ğ
NVMašReque¡
* 
»que¡
 )

769 ifĞ
ÃxtAùiv©e
 > 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
() )

771 
¡d
::
û¼
 << "NVMain Error: SubArray violates REFRESHiming constraint!"

772 << 
¡d
::
’dl
;

773  
çl£
;

775 ifĞ
¡©e
 !ğ
SUBARRAY_CLOSED
 )

777 
¡d
::
û¼
 << "NVMain Error:ryo„efresh‡ subarrayhat is‚ot idle "

778 << 
¡d
::
’dl
;

779  
çl£
;

783 
ÃxtAùiv©e
 = 
	`MAX
(‚extActivate,

784 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
(è+ 
p
->
tRFC
 );

790 
»que¡
->
owÃr
 = 
this
;

791 
	`G‘Ev’tQueue
Ğ)->
	`In£¹Ev’t
Ğ
Ev’tRe¥Ú£
, 
this
, 
»que¡
,

792 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
(è+ 
p
->
tRFC
 );

795 
¡©e
 = 
SUBARRAY_REFRESHING
;

797 ifĞ
p
->
EÃrgyMod–
 == "current" )

800 
subA¼ayEÃrgy
 +ğĞĞ
p
->
EIDD5B
 -…->
EIDD3N
 )

801 * ()(
p
->
tRFC
è/ ()Õ->
BANKS
) );

803 
»äeshEÃrgy
 +ğĞĞ
p
->
EIDD5B
 -…->
EIDD3N
 )

804 * ()
p
->
tRFC
 / ()Õ->
BANKS
) );

810 
subA¼ayEÃrgy
 +ğ
p
->
E»f
;

812 
»äeshEÃrgy
 +ğ
p
->
E»f
;

815  
Œue
;

816 
	}
}

818 
	gSubA¼ay
::
	$CheckWr™ePausšg
( )

820 ifĞ
p
->
Wr™ePausšg
 && 
isWr™šg
 )

823 
ncyşe_t
 
wr™eProg»ss
 = 
wr™eEnd
 - 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
();

824 
ncyşe_t
 
wr™eTim”
 = 
wr™eEnd
 - 
wr™eS¹
;

830 ifĞ
p
->
·u£Mode
 !ğ
Pau£Mode_O±im®
 )

832 
ncyşe_t
 
ÃxtI‹¿tiÚS¹
 = 
wr™eS¹
;

833 
¡d
::
£t
<
ncyşe_t
>::
™”©Ü
 
™”
;

835  
™”
 = 
wr™eI‹¿tiÚS¹s
.
	`begš
(); i‹¸!ğwr™eI‹¿tiÚS¹s.
	`’d
(); iter++ )

837 ifĞ(*
™”
è> 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
() )

842 
ÃxtI‹¿tiÚS¹
 = (*
™”
);

845 
wr™eProg»ss
 = 
wr™eEnd
 - 
ÃxtI‹¿tiÚS¹
;

849 
wr™eReque¡
->
wr™eProg»ss
 = writeProgress;

851 
wr™eP”ûÁ
 = 1.0à- (
¡©ic_ÿ¡
<>(
wr™eProg»ss
è/ stic_ÿ¡<>(
wr™eTim”
));

853 
av”agePau£dReque¡Prog»ss
 = (×v”agePau£dReque¡Prog»s * 
¡©ic_ÿ¡
<>(
m—su»dProg»s£s
))

854 + 
wr™eP”ûÁ
è/ 
¡©ic_ÿ¡
<>(
m—su»dProg»s£s
 + 1);

855 
m—su»dProg»s£s
++;

860 ifĞ
wr™eP”ûÁ
 > 
p
->
Pau£Th»shŞd
 )

864 ifĞ
wr™eProg»ss
 !ğ
wr™eEnd
 )

866 
wr™eReque¡
->
æags
 |ğ
NVMašReque¡
::
FLAG_PAUSED
;

867 
·u£dWr™es
++;

870 ifĞ
wpPau£M­
.
	`couÁ
Ğ
wr™eP”ûÁ
 ) )

871 
wpPau£M­
[
wr™eP”ûÁ
]++;

873 
wpPau£M­
[
wr™eP”ûÁ
] = 1;

877 
wr™eReque¡
->
æags
 |ğ
NVMašReque¡
::
FLAG_CANCELLED
;

880 ifĞ++
wr™eReque¡
->
ÿnûÎ©iÚs
 >ğ
p
->
MaxCªûÎ©iÚs
 )

881 
wr™eReque¡
->
æags
 |ğ
NVMašReque¡
::
FLAG_FORCED
;

883 
ÿnûÎedWr™es
++;

884 
ÿnûÎedWr™eTime
 +ğ
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
(è- 
wr™eS¹
;

886 ifĞ
wpCªûlM­
.
	`couÁ
Ğ
wr™eP”ûÁ
 ) )

887 
wpCªûlM­
[
wr™eP”ûÁ
]++;

889 
wpCªûlM­
[
wr™eP”ûÁ
] = 1;

893 
	`G‘Ev’tQueue
Ğ)->
	`RemoveEv’t
Ğ
wr™eEv’t
, 
wr™eEv’tTime
 );

894 
d–‘e
 
wr™eEv’t
;

895 
wr™eEv’t
 = 
NULL
;

898 
	`G‘Ev’tQueue
Ğ)->
	`In£¹Ev’t
Ğ
Ev’tRe¥Ú£
, 
this
, 
wr™eReque¡
,

899 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
() + 1 );

902 
ÃxtAùiv©e
 = 
ÃxtAùiv©eP»Wr™e
;

903 
ÃxtP»ch¬ge
 = 
ÃxtP»ch¬geP»Wr™e
;

904 
ÃxtWr™e
 = 
ÃxtWr™eP»Wr™e
;

905 
ÃxtR—d
 = 
ÃxtR—dP»Wr™e
;

906 
ÃxtPow”Down
 = 
ÃxtPow”DownP»Wr™e
;

908 
	}
}

911 
boŞ
 
	gSubA¼ay
::
	$B‘w“nWr™eI‹¿tiÚs
( )

913 
boŞ
 
rv
 = 
çl£
;

915 ifĞ
isWr™šg
 && 
wr™eI‹¿tiÚS¹s
.
	`couÁ
Ğ
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
() ) != 0 )

917 
rv
 = 
Œue
;

920  
rv
;

921 
	}
}

923 
ncyşe_t
 
	gSubA¼ay
::
	$Wr™eC–lD©a2
Ğ
NVMašReque¡
 *
»que¡
 )

925 
wr™eI‹¿tiÚS¹s
.
	`ş—r
( );

927 ifĞ
p
->
UnifÜmWr™es
 )

929 ifĞ
p
->
MLCLev–s
 > 1 )

931  
ncouÁ”_t
 
™”
 = 0; i‹¸< 
av”ageWr™eI‹¿tiÚs
; iter++ )

933 
ncyşe_t
 
™”S¹
 = 
	`G‘Ev’tQueue
Ğ)->
	`G‘Cu¼’tCyşe
( );

934 
™”S¹
 +ğ
™”
 * 
¡©ic_ÿ¡
<
ncyşe_t
>(
p
->
tWP
 / 
av”ageWr™eI‹¿tiÚs
);

935 
wr™eI‹¿tiÚS¹s
.
	`š£¹
Ğ
™”S¹
 );

939  
p
->
tWP
;

942 
ncyşe_t
 
maxD–ay
 = 0;

944 
memÜyWÜdSize
 = 
¡©ic_ÿ¡
<>(
p
->
tBURST
 *…->
RATE
 *…->
BusWidth
);

945 
wr™eBy‹s32
 = 
memÜyWÜdSize
 / 32;

946 
ušt32_t
 *
¿wD©a
 = 
»š‹½»t_ÿ¡
<ušt32_t*>(
»que¡
->
d©a
.rawData);

949 ifĞ!
¿wD©a
 )

950  
p
->
tWP0
;

953 ifĞ
p
->
MLCLev–s
 == 1 )

955 
ncouÁ”_t
 
wr™eCouÁ0
 = 
	`CouÁB™sMLC1
Ğ0, 
¿wD©a
, 
wr™eBy‹s32
 );

956 
ncouÁ”_t
 
wr™eCouÁ1
 = 
	`CouÁB™sMLC1
Ğ1, 
¿wD©a
, 
wr™eBy‹s32
 );

958 ifĞ
p
->
EÃrgyMod–
 != "current" )

960 
subA¼ayEÃrgy
 +ğ
p
->
E»£t
 * 
wr™eCouÁ0
;

961 
subA¼ayEÃrgy
 +ğ
p
->
E£t
 * 
wr™eCouÁ1
;

962 
wr™eEÃrgy
 +ğ
p
->
E»£t
 * 
wr™eCouÁ0
;

963 
wr™eEÃrgy
 +ğ
p
->
E£t
 * 
wr™eCouÁ1
;

966 
ncyşe_t
 
d–ay0
 = (
wr™eCouÁ0
 =ğ0è? 0 : 
p
->
tWP0
;

967 
ncyşe_t
 
d–ay1
 = (
wr™eCouÁ1
 =ğ0è? 0 : 
p
->
tWP1
;

969 
maxD–ay
 = 
	`MAX
(
d–ay0
, 
d–ay1
);

971 ifĞ
p
->
MLCLev–s
 == 2 )

973 
ncouÁ”_t
 
wr™eCouÁ00
 = 
	`CouÁB™sMLC2
Ğ0, 
¿wD©a
, 
wr™eBy‹s32
 );

974 
ncouÁ”_t
 
wr™eCouÁ01
 = 
	`CouÁB™sMLC2
Ğ1, 
¿wD©a
, 
wr™eBy‹s32
 );

975 
ncouÁ”_t
 
wr™eCouÁ10
 = 
	`CouÁB™sMLC2
Ğ2, 
¿wD©a
, 
wr™eBy‹s32
 );

976 
ncouÁ”_t
 
wr™eCouÁ11
 = 
	`CouÁB™sMLC2
Ğ3, 
¿wD©a
, 
wr™eBy‹s32
 );

978 
	`as£¹
Ğ(
wr™eCouÁ00
 + 
wr™eCouÁ01
 + 
wr™eCouÁ10
 + 
wr™eCouÁ11
)

979 =ğ(
memÜyWÜdSize
/2) );

987 
ncyşe_t
 
ÚûPul£D–ay
 = 0;

988 
ncyşe_t
 
»³©Pul£D–ay
 = 0;

990 
ncyşe_t
 
d–ay00
 = (
wr™eCouÁ00
 =ğ0è? 0 : 
p
->
nWP00
;

991 
ncyşe_t
 
d–ay01
 = (
wr™eCouÁ01
 =ğ0è? 0 : 
p
->
nWP01
;

992 
ncyşe_t
 
d–ay10
 = (
wr™eCouÁ10
 =ğ0è? 0 : 
p
->
nWP10
;

993 
ncyşe_t
 
d–ay11
 = (
wr™eCouÁ11
 =ğ0è? 0 : 
p
->
nWP11
;

995 
ncyşe_t
 
´og¿mPul£CouÁ
 = 
	`MAX
ĞMAXĞ
d–ay00
, 
d–ay01
 ),

996 
	`MAX
Ğ
d–ay10
, 
d–ay11
 ) );

997 
ncyşe_t
 
thisPul£CouÁ
 = 0;

1000 ifĞ
wr™eCouÁ01
 || 
wr™eCouÁ10
 )

1003 
ncouÁ”s_t
 
max_¡ddev
 = 
p
->
WPMaxV¬Ÿnû
;

1004 
ncouÁ”s_t
 
maxPul£CouÁ
 = 
max_¡ddev
 + 
´og¿mPul£CouÁ
;

1005 
ncouÁ”s_t
 
mšPul£CouÁ
 = 
´og¿mPul£CouÁ
 - 
max_¡ddev
;

1006 ifĞ
mšPul£CouÁ
 < 0 ) minPulseCount = 0;

1008 
NÜm®Di¡ributiÚ
 
nÜm
;

1010 
nÜm
.
	`S‘M—n
Ğ
´og¿mPul£CouÁ
 );

1011 
nÜm
.
	`S‘V¬Ÿnû
Ğ
p
->
WPV¬Ÿnû
 );

1013 
thisPul£CouÁ
 = 
nÜm
.
	`G‘Endu¿nû
( );

1015 ifĞ
thisPul£CouÁ
 > 
¡©ic_ÿ¡
<
ncyşe_t
>(
maxPul£CouÁ
) )

1016 
thisPul£CouÁ
 = 
¡©ic_ÿ¡
<
ncyşe_t
>(
maxPul£CouÁ
);

1017 ifĞ
thisPul£CouÁ
 < 
¡©ic_ÿ¡
<
ncyşe_t
>(
mšPul£CouÁ
) )

1018 
thisPul£CouÁ
 = 
¡©ic_ÿ¡
<
ncyşe_t
>(
mšPul£CouÁ
);

1020 ifĞ
p
->
´og¿mMode
 =ğ
Prog¿mMode_SRMS
 )

1022 
ÚûPul£D–ay
 = 
p
->
tWP0
;

1023 
»³©Pul£D–ay
 = 
p
->
tWP1
;

1027 
ÚûPul£D–ay
 = 
p
->
tWP1
;

1028 
»³©Pul£D–ay
 = 
p
->
tWP0
;

1031 ifĞ
wr™eCouÁ00
 && !
wr™eCouÁ11
 )

1033 
ÚûPul£D–ay
 = 
p
->
tWP0
;

1035 ifĞ!
wr™eCouÁ00
 && 
wr™eCouÁ11
 )

1037 
ÚûPul£D–ay
 = 
p
->
tWP1
;

1041 
	`as£¹
(
çl£
);

1045 
ncyşe_t
 
™”S¹
 = 
	`G‘Ev’tQueue
Ğ)->
	`G‘Cu¼’tCyşe
( );

1046 
wr™eI‹¿tiÚS¹s
.
	`š£¹
Ğ
™”S¹
 );

1047 
™”S¹
 +ğ
ÚûPul£D–ay
;

1049  
ncyşe_t
 
™”
 = 0; i‹¸< 
thisPul£CouÁ
; iter++ )

1051 
wr™eI‹¿tiÚS¹s
.
	`š£¹
Ğ
™”S¹
 );

1052 
™”S¹
 +ğ
»³©Pul£D–ay
;

1055 
maxD–ay
 = 
ÚûPul£D–ay
 + 
thisPul£CouÁ
 * 
»³©Pul£D–ay
;

1057 ifĞ
mlcTimšgM­
.
	`couÁ
Ğ
maxD–ay
 ) > 0 )

1058 
mlcTimšgM­
[
maxD–ay
]++;

1060 
mlcTimšgM­
[
maxD–ay
] = 1;

1062 ifĞ
maxD–ay
 > 
wÜ¡Ca£Wr™e
 )

1063 
wÜ¡Ca£Wr™e
 = 
maxD–ay
;

1066  
maxD–ay
;

1067 
	}
}

1069 
ncyşe_t
 
	gSubA¼ay
::
	$NextIssuabË
Ğ
NVMašReque¡
 *
»que¡
 )

1071 
ncyşe_t
 
ÃxtCom·»
 = 0;

1073 ifĞ
»que¡
->
ty³
 =ğ
ACTIVATE
 ) 
ÃxtCom·»
 = 
ÃxtAùiv©e
;

1074 ifĞ
»que¡
->
ty³
 =ğ
READ
 ) 
ÃxtCom·»
 = 
ÃxtR—d
;

1075 ifĞ
»que¡
->
ty³
 =ğ
WRITE
 ) 
ÃxtCom·»
 = 
ÃxtWr™e
;

1076 ifĞ
»que¡
->
ty³
 =ğ
PRECHARGE
 ) 
ÃxtCom·»
 = 
ÃxtP»ch¬ge
;

1079  
ÃxtCom·»
;

1080 
	}
}

1085 
boŞ
 
	gSubA¼ay
::
	$IsIssuabË
Ğ
NVMašReque¡
 *
»q
, 
FaR—sÚ
 *
»asÚ
 )

1087 
ušt64_t
 
İRow
;

1088 
boŞ
 
rv
 = 
Œue
;

1090 
»q
->
add»ss
.
	`G‘T¿n¦©edAdd»ss
Ğ&
İRow
, 
NULL
, NULL, NULL, NULL, NULL );

1092 ifĞ
ÃxtCommªd
 !ğ
CMD_NOP
 )

1093  
çl£
;

1095 ifĞ
»q
->
ty³
 =ğ
ACTIVATE
 )

1097 ifĞ
ÃxtAùiv©e
 > (
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
())

1098 || (
p
->
U£P»ch¬ge
 && 
¡©e
 !ğ
SUBARRAY_CLOSED
)

1099 || (
p
->
Wr™ePausšg
 && 
isWr™šg
 && 
wr™eReque¡
->
æags
 & 
NVMašReque¡
::
FLAG_FORCED
)

1100 || (
p
->
Wr™ePausšg
 && 
isWr™šg
 && !(
»q
->
æags
 & 
NVMašReque¡
::
FLAG_PRIORITY
)) )

1102 
rv
 = 
çl£
;

1103 ifĞ
»asÚ
 )

1104 
»asÚ
->»asÚ = 
SUBARRAY_TIMING
;

1107 ifĞ
rv
 =ğ
çl£
 )

1110 ifĞ
ÃxtAùiv©e
 > (
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
()) )

1112 
aùWa™s
++;

1113 
aùWa™TÙ®
 +ğ
ÃxtAùiv©e
 - (
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
() );

1117 ifĞ
»q
->
ty³
 =ğ
READ
 ||„eq->ty³ =ğ
READ_PRECHARGE
 )

1119 ifĞ
ÃxtR—d
 > (
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
())

1120 || 
¡©e
 !ğ
SUBARRAY_OPEN


1121 || 
İRow
 !ğ
İ’Row


1122 || ( 
p
->
Wr™ePausšg
 && 
isWr™šg
 && 
wr™eReque¡
->
æags
 & 
NVMašReque¡
::
FLAG_FORCED
 ) )

1124 
rv
 = 
çl£
;

1125 ifĞ
»asÚ
 )

1126 
»asÚ
->»asÚ = 
SUBARRAY_TIMING
;

1129 ifĞ
»q
->
ty³
 =ğ
WRITE
 ||„eq->ty³ =ğ
WRITE_PRECHARGE
 )

1131 ifĞ
ÃxtWr™e
 > (
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
())

1132 || 
¡©e
 !ğ
SUBARRAY_OPEN


1133 || 
İRow
 !ğ
İ’Row
 )

1135 
rv
 = 
çl£
;

1136 ifĞ
»asÚ
 )

1137 
»asÚ
->»asÚ = 
SUBARRAY_TIMING
;

1140 ifĞ
»q
->
ty³
 =ğ
PRECHARGE
 ||„eq->ty³ =ğ
PRECHARGE_ALL
 )

1142 ifĞ
ÃxtP»ch¬ge
 > (
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
())

1143 || ( 
¡©e
 !ğ
SUBARRAY_OPEN


1144 && 
¡©e
 !ğ
SUBARRAY_CLOSED
 ) )

1146 
rv
 = 
çl£
;

1147 ifĞ
»asÚ
 )

1148 
»asÚ
->»asÚ = 
SUBARRAY_TIMING
;

1151 ifĞ
»q
->
ty³
 =ğ
POWERDOWN_PDA


1152 || 
»q
->
ty³
 =ğ
POWERDOWN_PDPF


1153 || 
»q
->
ty³
 =ğ
POWERDOWN_PDPS
 )

1156 ifĞ
ÃxtPow”Down
 > (
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
()è|| 
isWr™šg
 )

1158 
rv
 = 
çl£
;

1159 ifĞ
»asÚ
 )

1160 
»asÚ
->»asÚ = 
SUBARRAY_TIMING
;

1163 ifĞ
»q
->
ty³
 =ğ
POWERUP
 )

1167 ifĞ
»q
->
ty³
 =ğ
REFRESH
 )

1169 ifĞ
ÃxtAùiv©e
 > ( 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
() )

1170 || 
¡©e
 !ğ
SUBARRAY_CLOSED
 )

1172 
rv
 = 
çl£
;

1173 ifĞ
»asÚ
 )

1174 
»asÚ
->»asÚ = 
SUBARRAY_TIMING
;

1183 
rv
 = 
çl£
;

1184 ifĞ
»asÚ
 )

1185 
»asÚ
->»asÚ = 
UNSUPPORTED_COMMAND
;

1188  
rv
;

1189 
	}
}

1194 
boŞ
 
	gSubA¼ay
::
	$IssueCommªd
Ğ
NVMašReque¡
 *
»q
 )

1196 
boŞ
 
rv
 = 
çl£
;

1198 ifĞ!
	`IsIssuabË
Ğ
»q
 ) )

1200 
¡d
::
û¼
 << "NVMaš E¼Ü: Commªd " << 
»q
->
ty³
 << " can‚ot be "

1201 << "issued iÀthsub¬¿y!" << 
¡d
::
’dl
;

1205 
rv
 = 
Œue
;

1207  
»q
->
ty³
 )

1209 
ACTIVATE
:

1210 
rv
 = 
this
->
	`Aùiv©e
Ğ
»q
 );

1213 
READ
:

1214 
READ_PRECHARGE
:

1215 
rv
 = 
this
->
	`R—d
Ğ
»q
 );

1218 
WRITE
:

1219 
WRITE_PRECHARGE
:

1220 
rv
 = 
this
->
	`Wr™e
Ğ
»q
 );

1223 
PRECHARGE
:

1224 
PRECHARGE_ALL
:

1225 
rv
 = 
this
->
	`P»ch¬ge
Ğ
»q
 );

1228 
REFRESH
:

1229 
rv
 = 
this
->
	`Reäesh
Ğ
»q
 );

1233 
¡d
::
û¼
 << "NVMain Error : subarray detects unknown operation "

1234 << "š commªd queue! " << 
»q
->
ty³
 << 
¡d
::
’dl
;

1239  
rv
;

1240 
	}
}

1242 
boŞ
 
	gSubA¼ay
::
	$Reque¡Com¶‘e
Ğ
NVMašReque¡
 *
»q
 )

1244 ifĞ
»q
->
ty³
 =ğ
WRITE
 ||„eq->ty³ =ğ
WRITE_PRECHARGE
 )

1254 ifĞ
wr™eReque¡
 =ğ
»q
 )

1256 
isWr™šg
 = 
çl£
;

1259 ifĞ!Ğ
»q
->
æags
 & 
NVMašReque¡
::
FLAG_PAUSED
 ||„eq->æag & NVMašReque¡::
FLAG_CANCELLED
 ) )

1261 
av”agePau£sP”Reque¡
 = (×v”agePau£sP”Reque¡ * 
¡©ic_ÿ¡
<>(
m—su»dPau£s
))

1262 + 
»q
->
ÿnûÎ©iÚs
è/ 
¡©ic_ÿ¡
<>(
m—su»dPau£s
 + 1.0);

1263 
m—su»dPau£s
++;

1265 ifĞ
ÿnûlCouÁM­
.
	`couÁ
Ğ
»q
->
ÿnûÎ©iÚs
 ) == 0 )

1266 
ÿnûlCouÁM­
[
»q
->
ÿnûÎ©iÚs
] = 0;

1268 
ÿnûlCouÁM­
[
»q
->
ÿnûÎ©iÚs
]++;

1272 ifĞ
»q
->
owÃr
 =ğ
this
 )

1274  
»q
->
ty³
 )

1277 
ACTIVATE
:

1278 
READ
:

1279 
WRITE
:

1280 
d–‘e
 
»q
;

1283 
READ_PRECHARGE
:

1284 
WRITE_PRECHARGE
:

1285 
»q
->
ty³
 = 
PRECHARGE
;

1286 
¡©e
 = 
SUBARRAY_PRECHARGING
;

1289 
	`G‘Ev’tQueue
Ğ)->
	`In£¹Ev’t
Ğ
Ev’tRe¥Ú£
, 
this
, 
»q
,

1290 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
(è+ 
p
->
tRP
 );

1293 
PRECHARGE
:

1294 
PRECHARGE_ALL
:

1296 
¡©e
 = 
SUBARRAY_CLOSED
;

1297 
İ’Row
 = 
p
->
ROWS
;

1298 
´ech¬ges
++;

1299 
d–‘e
 
»q
;

1302 
REFRESH
:

1304 
¡©e
 = 
SUBARRAY_CLOSED
;

1305 
İ’Row
 = 
p
->
ROWS
;

1306 
»äeshes
++;

1307 
d–‘e
 
»q
;

1311 
d–‘e
 
»q
;

1315  
Œue
;

1319  
	`G‘P¬’t
Ğ)->
	`Reque¡Com¶‘e
Ğ
»q
 );

1321 
	}
}

1323 
ncyşe_t
 
	gSubA¼ay
::
	$Upd©eEndu¿nû
Ğ
NVMašReque¡
 *
»que¡
 )

1325 
ncyşe_t
 
Ï‹ncy
 = 0;

1327 ifĞ
’drMod–
 )

1330 ifĞ
dyÇmic_ÿ¡
<
NuÎMod–
 *>(
’drMod–
è!ğ
NULL
 )

1332  
Ï‹ncy
;

1335 
NVMD©aBlock
 
ŞdD©a
;

1337 ifĞ
cÚf
->
	`G‘SimIÁ”çû
Ğè!ğ
NULL
 )

1340 
ušt64_t
 
wÜdSize
;

1341 
boŞ
 
h¬dE¼Ü
;

1342 
ncyşes_t
 
exŒaL©’cy
;

1344 
wÜdSize
 = 
p
->
BusWidth
;

1345 
wÜdSize
 *ğ
p
->
tBURST
 *…->
RATE
;

1346 
wÜdSize
 /= 8;

1348 ifĞ
»que¡
->
ŞdD©a
.
	`IsV®id
( ) )

1350 
ŞdD©a
 = 
»que¡
->oldData;

1352 ifĞ!
»que¡
->
ŞdD©a
.
	`IsV®id
( ) &&

1353 !
cÚf
->
	`G‘SimIÁ”çû
Ğ)-> 
	`G‘D©aAtAdd»ss
(

1354 
»que¡
->
add»ss
.
	`G‘PhysiÿlAdd»ss
Ğ), &
ŞdD©a
 ) )

1356  
ušt64_t
 
i
 = 0; i < 
wÜdSize
; i++ )

1357 
ŞdD©a
.
	`S‘By‹
Ğ
i
, 0 );

1361 
cÚf
->
	`G‘SimIÁ”çû
Ğ)->
	`S‘D©aAtAdd»ss
(

1362 
»que¡
->
add»ss
.
	`G‘PhysiÿlAdd»ss
Ğ),„eque¡->
d©a
 );

1365 
h¬dE¼Ü
 = 
çl£
;

1367 
exŒaL©’cy
 = 
’drMod–
->
	`Wr™e
Ğ
»que¡
, 
ŞdD©a
 );

1368 ifĞ
exŒaL©’cy
 < 0 )

1370 
exŒaL©’cy
 = -extraLatency;

1371 
exŒaL©’cy
--;

1372 
h¬dE¼Ü
 = 
Œue
;

1375 
Ï‹ncy
 = 
¡©ic_ÿ¡
<
ncyşe_t
>(
exŒaL©’cy
);

1377 ifĞ
h¬dE¼Ü
 )

1381 
¡d
::
cout
 << "WARNING: Wr™tØ0x" << std::
hex


1382 << 
»que¡
->
add»ss
.
	`G‘PhysiÿlAdd»ss
( )

1383 << 
¡d
::
dec
 << "„esuÉed iÀ¨h¬dƒ¼Ü! " << std::
’dl
;

1388 
¡d
::
û¼
 << "NVMain Error: Endurance modeled without simulator "

1389 << "š‹rçû fÜ d©¨Œackšg!" << 
¡d
::
’dl
;

1393  
Ï‹ncy
;

1394 
	}
}

1396 
SubA¼ayS‹
 
	gSubA¼ay
::
	$G‘S‹
( )

1398  
¡©e
;

1399 
	}
}

1401 
	gSubA¼ay
::
S‘Name
Ğ
¡d
::
¡ršg
 )

1408 
SubA¼ay
::
	$S‘Id
Ğ
ncouÁ”_t
 
id
 )

1410 
subA¼ayId
 = 
id
;

1411 
	}
}

1413 
	g¡d
::
¡ršg
 
SubA¼ay
::
	$G‘Name
( )

1416 
	}
}

1419 
ncouÁ”_t
 
	gSubA¼ay
::
	$G‘Id
( )

1421  
subA¼ayId
;

1422 
	}
}

1424 
	gSubA¼ay
::
	$C®cuÏ‹Sts
( )

1426 
wÜ¡Ca£Endu¿nû
 = 
’drMod–
->
	`G‘WÜ¡Liã
( );

1427 
av”ageEndu¿nû
 = 
’drMod–
->
	`G‘Av”ageLiã
( );

1429 
aùWa™Av”age
 = 
¡©ic_ÿ¡
<>(
aùWa™TÙ®
è/ stic_ÿ¡<>(
aùWa™s
);

1432 
mlcTimšgHi¡o
 = 
PyDiùHi¡og¿m
<
ušt64_t
, ušt64_t>Ğ
mlcTimšgM­
 );

1433 
ÿnûlCouÁHi¡o
 = 
PyDiùHi¡og¿m
<
ušt64_t
, ušt64_t>Ğ
ÿnûlCouÁM­
 );

1434 
wpPau£Hi¡o
 = 
PyDiùHi¡og¿m
<, 
ušt64_t
>Ğ
wpPau£M­
 );

1435 
wpCªûlHi¡o
 = 
PyDiùHi¡og¿m
<, 
ušt64_t
>Ğ
wpCªûlM­
 );

1436 
	}
}

1438 
boŞ
 
	gSubA¼ay
::
	$IdË
( )

1440  ( 
¡©e
 =ğ
SUBARRAY_CLOSED
 || s‹ =ğ
SUBARRAY_PRECHARGING
 );

1441 
	}
}

1443 
	gSubA¼ay
::
	$Cyşe
Ğ
ncyşe_t
 )

1445 
	}
}

1452 
ncouÁ”_t
 
__©Œibu‹__
((
İtimize
("0"))è
SubA¼ay
::
	$CouÁ32MLC2
Ğ
ušt8_t
 
v®ue
, 
ušt32_t
 
d©a
 )

1458 ifĞ
v®ue
 == 0 )

1459 
d©a
 ^= 0xFFFFFFFF;

1460 ifĞ
v®ue
 == 1 )

1461 
d©a
 ^= 0xAAAAAAAA;

1462 ifĞ
v®ue
 == 2 )

1463 
d©a
 ^= 0x55555555;

1465 
	`as£¹
Ğ
v®ue
 < 4 );

1472 
ušt32_t
 
couÁ
 = (
d©a
 & 0x55555555) & ((data & 0xAAAAAAAA) >> 1);

1474  
	`CouÁ32MLC1
(
couÁ
);

1475 
	}
}

1478 
ncouÁ”_t
 
__©Œibu‹__
((
İtimize
("0"))è
	gSubA¼ay
::
	$CouÁB™sMLC2
Ğ
ušt8_t
 
v®ue
, 
ušt32_t
 *
d©a
, 
ncouÁ”_t
 
wÜds
 )

1480 
ncouÁ”_t
 
couÁ
 = 0;

1482  
ncouÁ”_t
 
i
 = 0; i < 
wÜds
; i++ )

1484 
couÁ
 +ğ
	`CouÁ32MLC2
Ğ
v®ue
, 
d©a
[
i
] );

1487  
couÁ
;

1488 
	}
}

1491 
ncouÁ”_t
 
__©Œibu‹__
((
İtimize
("0"))è
	gSubA¼ay
::
	$CouÁ32MLC1
Ğ
ušt32_t
 
d©a
 )

1497 
ušt32_t
 
couÁ
 = 
d©a
;

1498 
couÁ
 = count - ((count >> 1) & 0x55555555);

1499 
couÁ
 = (count & 0x33333333) + ((count >> 2) & 0x33333333);

1500 
couÁ
 = (((count + (count >> 4)) & 0x0f0f0f0f) * 0x01010101) >> 24;

1502  
¡©ic_ÿ¡
<
ncouÁ”_t
>(
couÁ
);

1503 
	}
}

1506 
ncouÁ”_t
 
__©Œibu‹__
((
İtimize
("0"))è
	gSubA¼ay
::
	$CouÁB™sMLC1
Ğ
ušt8_t
 
v®ue
, 
ušt32_t
 *
d©a
, 
ncouÁ”_t
 
wÜds
 )

1508 
ncouÁ”_t
 
couÁ
 = 0;

1510  
ncouÁ”_t
 
i
 = 0; i < 
wÜds
; i++ )

1512 
couÁ
 +ğ
	`CouÁ32MLC1
Ğ
d©a
[
i
] );

1515 
couÁ
 = (
v®ue
 =ğ1è? couÁ : (
wÜds
*32 - count);

1517  
couÁ
;

1518 
	}
}

	@src/SubArray.h

34 #iâdeà
__SUBARRAY_H__


35 
	#__SUBARRAY_H__


	)

37 
	~<¡dšt.h
>

38 
	~<m­
>

40 
	~"¤c/NVMObjeù.h
"

41 
	~"¤c/CÚfig.h
"

42 
	~"¤c/Endu¿nûMod–.h
"

43 
	~"¤c/D©aEncod”.h
"

44 
	~"šşude/NVMAdd»ss.h
"

45 
	~"šşude/NVMašReque¡.h
"

46 
	~"¤c/P¬ams.h
"

48 
	~<io¡»am
>

50 
Çme¥aû
 
	gNVM
 {

52 
şass
 
	gEv’t
;

64 
	eSubA¼ayS‹


66 
	gSUBARRAY_UNKNOWN
,

67 
	gSUBARRAY_OPEN
,

68 
	gSUBARRAY_CLOSED
,

69 
	gSUBARRAY_PRECHARGING
,

70 
	gSUBARRAY_REFRESHING


73 
	eWr™eMode


75 
	gWRITE_BACK
,

76 
	gWRITE_THROUGH
,

77 
	gDELAYED_WRITE


80 şas 
	cSubA¼ay
 : 
public
 
NVMObjeù


82 
public
:

83 
SubA¼ay
( );

84 ~
SubA¼ay
( );

86 
boŞ
 
Aùiv©e
Ğ
NVMašReque¡
 *
»que¡
 );

87 
boŞ
 
R—d
Ğ
NVMašReque¡
 *
»que¡
 );

88 
boŞ
 
Wr™e
Ğ
NVMašReque¡
 *
»que¡
 );

89 
boŞ
 
P»ch¬ge
Ğ
NVMašReque¡
 *
»que¡
 );

90 
boŞ
 
Reäesh
Ğ
NVMašReque¡
 *
»que¡
 );

92 
boŞ
 
IsIssuabË
Ğ
NVMašReque¡
 *
»q
, 
FaR—sÚ
 *
»asÚ
 = 
NULL
 );

93 
boŞ
 
IssueCommªd
Ğ
NVMašReque¡
 *
»q
 );

94 
boŞ
 
Reque¡Com¶‘e
Ğ
NVMašReque¡
 *
»q
 );

95 
ncyşe_t
 
NextIssuabË
Ğ
NVMašReque¡
 *
»que¡
 );

97 
S‘CÚfig
Ğ
CÚfig
 *
c
, 
boŞ
 
ü—‹Chd»n
 = 
Œue
 );

99 
SubA¼ayS‹
 
G‘S‹
( );

101 
boŞ
 
B‘w“nWr™eI‹¿tiÚs
( );

103 
boŞ
 
IdË
( );

104 
ncyşe_t
 
G‘D©aCyşes
Ğè{  
	gd©aCyşes
; }

106 
ncyşe_t
 
G‘NextAùiv©e
Ğè{  
	gÃxtAùiv©e
; }

107 
ncyşe_t
 
G‘NextR—d
Ğè{  
	gÃxtR—d
; }

108 
ncyşe_t
 
G‘NextWr™e
Ğè{  
	gÃxtWr™e
; }

109 
ncyşe_t
 
G‘NextP»ch¬ge
Ğè{  
	gÃxtP»ch¬ge
; }

110 
ncyşe_t
 
G‘AùiveWa™s
Ğè{  
	gaùWa™s
; }

111 
ušt64_t
 
G‘O³nRow
Ğè{  
	gİ’Row
; }

113 
S‘Name
Ğ
¡d
::
¡ršg
 );

114 
S‘Id
Ğ
ncouÁ”_t
 );

116 
Regi¡”Sts
( );

117 
C®cuÏ‹Sts
( );

119 
ncouÁ”_t
 
G‘Id
( );

120 
	g¡d
::
¡ršg
 
G‘Name
( );

122 
Cyşe
Ğ
ncyşe_t
 );

123 
boŞ
 
IsWr™šg
Ğè{  
	gisWr™šg
; }

125 
	g´iv©e
:

126 
CÚfig
 *
cÚf
;

127 
ncouÁ”_t
 
	gpsIÁ”v®
;

129 
ncouÁ”_t
 
	gMATWidth
;

130 
ncouÁ”_t
 
	gMATHeight
;

132 
SubA¼ayS‹
 
	g¡©e
;

133 
BulkCommªd
 
	gÃxtCommªd
;

134 
NVMašReque¡
 
	gÏ¡O³¿tiÚ
;

136 
ncyşe_t
 
	gÏ¡Aùiv©e
;

137 
ncyşe_t
 
	gÃxtAùiv©e
;

138 
ncyşe_t
 
	gÃxtP»ch¬ge
;

139 
ncyşe_t
 
	gÃxtR—d
;

140 
ncyşe_t
 
	gÃxtWr™e
;

141 
ncyşe_t
 
	gÃxtPow”Down
;

142 
boŞ
 
	gwr™eCyşe
;

143 
	g¡d
::
veùÜ
<
NVMašReque¡
 *> 
wr™eBackReque¡s
;

144 
boŞ
 
	gisWr™šg
;

145 
ncyşe_t
 
	gwr™eEnd
;

146 
ncyşe_t
 
	gwr™eS¹
;

147 
	g¡d
::
£t
<
ncyşe_t
> 
wr™eI‹¿tiÚS¹s
;

148 
NVMašReque¡
 *
	gwr™eReque¡
;

149 
	gNVM
::
Ev’t
 *
wr™eEv’t
;

150 
ncyşe_t
 
	gwr™eEv’tTime
;

151 
Wr™eMode
 
	gwr™eMode
;

152 
ncyşe_t
 
	gÃxtAùiv©eP»Wr™e
;

153 
ncyşe_t
 
	gÃxtP»ch¬geP»Wr™e
;

154 
ncyşe_t
 
	gÃxtR—dP»Wr™e
;

155 
ncyşe_t
 
	gÃxtWr™eP»Wr™e
;

156 
ncyşe_t
 
	gÃxtPow”DownP»Wr™e
;

157 
ncouÁ”_t
 
	gd©aCyşes
;

158 
ncyşe_t
 
	gwÜ¡Ca£Wr™e
;

159 
ncouÁ”_t
 
	gnum00Wr™es
;

160 
ncouÁ”_t
 
	gnum01Wr™es
;

161 
ncouÁ”_t
 
	gnum10Wr™es
;

162 
ncouÁ”_t
 
	gnum11Wr™es
;

163 
	gav”ageWr™eTime
;

164 
ncouÁ”_t
 
	gm—su»dWr™eTimes
;

165 
ncouÁ”_t
 
	gav”ageWr™eI‹¿tiÚs
;

166 
	gav”agePau£sP”Reque¡
;

167 
ncouÁ”_t
 
	gm—su»dPau£s
;

168 
	gav”agePau£dReque¡Prog»ss
;

169 
ncouÁ”_t
 
	gm—su»dProg»s£s
;

171 
ncouÁ”_t
 
	gÿnûÎedWr™es
;

172 
ncouÁ”_t
 
	gÿnûÎedWr™eTime
;

173 
ncouÁ”_t
 
	g·u£dWr™es
;

175 
ncouÁ”_t
 
	gaùWa™s
;

176 
ncouÁ”_t
 
	gaùWa™TÙ®
;

177 
	gaùWa™Av”age
;

179 
	gsubA¼ayEÃrgy
;

180 
	gaùiveEÃrgy
;

181 
	gbur¡EÃrgy
;

182 
	gwr™eEÃrgy
;

183 
	g»äeshEÃrgy
;

185 
ušt64_t
 
	gwÜ¡Ca£Endu¿nû
, 
	gav”ageEndu¿nû
;

187 
ncouÁ”_t
 
	g»ads
, 
	gwr™es
, 
	gaùiv©es
, 
	g´ech¬ges
, 
	g»äeshes
;

188 
ncouÁ”_t
 
	gidËTim”
;

190 
ncouÁ”_t
 
	gİ’Row
;

192 
D©aEncod”
 *
	gd©aEncod”
;

193 
Endu¿nûMod–
 *
	g’drMod–
;

195 
ncouÁ”_t
 
	gsubA¼ayId
;

197 
	g¡d
::
m­
<
ušt64_t
, 
	gušt64_t
> 
	gmlcTimšgM­
;

198 
	g¡d
::
m­
<
ušt64_t
, 
	gušt64_t
> 
	gÿnûlCouÁM­
;

199 
	g¡d
::
m­
<, 
	gušt64_t
> 
	gwpPau£M­
;

200 
	g¡d
::
m­
<, 
	gušt64_t
> 
	gwpCªûlM­
;

201 
	g¡d
::
¡ršg
 
mlcTimšgHi¡o
;

202 
	g¡d
::
¡ršg
 
ÿnûlCouÁHi¡o
;

203 
	g¡d
::
¡ršg
 
wpPau£Hi¡o
;

204 
	g¡d
::
¡ršg
 
wpCªûlHi¡o
;

206 
ncyşe_t
 
Wr™eC–lD©a1
Ğ
NVMašReque¡
 *
»que¡
 );

207 
ncyşe_t
 
Wr™eC–lD©a2
Ğ
NVMašReque¡
 *
»que¡
 );

208 
CheckWr™ePausšg
( );

210 
ncyşe_t
 
Upd©eEndu¿nû
Ğ
NVMašReque¡
 *
»que¡
 );

212 
ncouÁ”_t
 
CouÁ32MLC2
Ğ
ušt8_t
 
v®ue
, 
ušt32_t
 
d©a
 );

213 
ncouÁ”_t
 
CouÁB™sMLC2
Ğ
ušt8_t
 
v®ue
, 
ušt32_t
 *
d©a
,‚couÁ”_ˆ
wÜds
 );

214 
ncouÁ”_t
 
CouÁ32MLC1
Ğ
ušt32_t
 
d©a
 );

215 
ncouÁ”_t
 
CouÁB™sMLC1
Ğ
ušt8_t
 
v®ue
, 
ušt32_t
 *
d©a
,‚couÁ”_ˆ
wÜds
 );

	@src/TagGenerator.cpp

34 
	~"¤c/TagG’”©Ü.h
"

37 
usšg
 
Çme¥aû
 
	gNVM
;

40 
	gTagG’”©Ü
::
	$TagG’”©Ü
Ğ
¡¬tId
 )

42 
ÃxtTag
 = 
¡¬tId
;

45 ()
	`C»©eTag
( );

46 
	}
}

49 
	gTagG’”©Ü
::~
	$TagG’”©Ü
( )

51 
	}
}

53 
TagG’”©Ü
::
C»©eTag
Ğ
¡d
::
¡ršg
 
Çme
 )

55 
rv
 = 0;

57 ifĞ
	ggNames
.
couÁ
Ğ
Çme
 ) == 0 )

59 
gNames
.
š£¹
Ğ
¡d
::
·œ
<¡d::
¡ršg
, >Ğ
Çme
, 
ÃxtTag
 ) );

60 
	grv
 = 
ÃxtTag
;

61 
	gÃxtTag
++;

66 
	grv
 = 
gNames
[
Çme
];

69  
	grv
;

73 
	g¡d
::
¡ršg
 
TagG’”©Ü
::
	$G‘TagName
Ğ
g
 )

75 
¡d
::
¡ršg
 
rv
 = "";

76 
¡d
::
m­
<¡d::
¡ršg
, >::
™”©Ü
 
™
;

78  
™
 = 
gNames
.
	`begš
Ğ); iˆ!ğgNames.
	`’d
( ); it++ )

80 ifĞ
™
->
£cÚd
 =ğ
g
 )

82 
rv
 = 
™
->
fœ¡
;

87  
rv
;

88 
	}
}

91 
	gTagG’”©Ü
::
G‘TagId
Ğ
¡d
::
¡ršg
 
Çme
 )

93 
rv
 = 0;

95 ifĞ
	ggNames
.
couÁ
Ğ
Çme
 ) != 0 )

96 
rv
 = 
gNames
[
Çme
];

98  
	grv
;

	@src/TagGenerator.h

34 #iâdeà
__NVMAIN_TAGGENERATOR_H__


35 
	#__NVMAIN_TAGGENERATOR_H__


	)

38 
	~<m­
>

39 
	~<¡ršg
>

42 
Çme¥aû
 
	gNVM
 {

47 şas 
	cTagG’”©Ü


49 
	gpublic
:

50 
TagG’”©Ü
Ğ
¡¬tId
 );

51 ~
TagG’”©Ü
( );

53 
C»©eTag
Ğ
¡d
::
¡ršg
 
Çme
 = "" );

55 
	g¡d
::
¡ršg
 
G‘TagName
Ğ
g
 );

56 
G‘TagId
Ğ
¡d
::
¡ršg
 
Çme
 );

58 
	g´iv©e
:

60 
¡d
::
m­
<¡d::
¡ršg
, > 
	ggNames
;

61 
	gÃxtTag
;

	@src/TranslationMethod.cpp

36 
	~<io¡»am
>

37 
	~<c¡ršg
>

38 
	~"¤c/T¿n¦©iÚM‘hod.h
"

40 
usšg
 
Çme¥aû
 
	gNVM
;

42 
	gT¿n¦©iÚM‘hod
::
	$T¿n¦©iÚM‘hod
( )

50 
	`S‘B™Widths
( 10, 8, 3, 1, 1, 6 );

51 
	`S‘Ord”
( 4, 1, 3, 5, 6, 2 );

52 
	}
}

54 
	gT¿n¦©iÚM‘hod
::~
	$T¿n¦©iÚM‘hod
( )

56 
	}
}

58 
T¿n¦©iÚM‘hod
::
	$S‘B™Widths
Ğ
rowB™s
, 
cŞB™s
, 
bªkB™s
,

59 
¿nkB™s
, 
chªÃlB™s
, 
sub¬¿yB™s
 )

61 
b™Widths
[
MEM_ROW
] = 
rowB™s
;

62 
b™Widths
[
MEM_COL
] = 
cŞB™s
;

63 
b™Widths
[
MEM_BANK
] = 
bªkB™s
;

64 
b™Widths
[
MEM_RANK
] = 
¿nkB™s
;

65 
b™Widths
[
MEM_CHANNEL
] = 
chªÃlB™s
;

66 
b™Widths
[
MEM_SUBARRAY
] = 
sub¬¿yB™s
;

67 
	}
}

70 
	gT¿n¦©iÚM‘hod
::
	$S‘Ord”
Ğ
row
, 
cŞ
, 
bªk
, 
¿nk
, 
chªÃl
, 
sub¬¿y
 )

72 ifĞ
row
 =ğ
cŞ
 ||„ow =ğ
bªk
 ||„ow =ğ
¿nk
 ||„ow =ğ
chªÃl


73 || 
cŞ
 =ğ
bªk
 || cŞ =ğ
¿nk
 || cŞ =ğ
chªÃl


74 || 
bªk
 =ğ
¿nk
 || bªk =ğ
chªÃl
 ||„ank == channel

75 || 
sub¬¿y
 =ğ
row
 || sub¬¿y =ğ
cŞ
 || sub¬¿y =ğ
bªk


76 || 
sub¬¿y
 =ğ
¿nk
 || sub¬¿y =ğ
chªÃl
 )

78 
¡d
::
cout
 << "T¿n¦©iÚ M‘hod: Ord” ¬nÙ unique!" << std::
’dl
;

81 
Üd”
[
MEM_ROW
] = 
row
 - 1;

82 
Üd”
[
MEM_COL
] = 
cŞ
 - 1;

83 
Üd”
[
MEM_BANK
] = 
bªk
 - 1;

84 
Üd”
[
MEM_RANK
] = 
¿nk
 - 1;

85 
Üd”
[
MEM_CHANNEL
] = 
chªÃl
 - 1;

86 
Üd”
[
MEM_SUBARRAY
] = 
sub¬¿y
 - 1;

87 
	}
}

89 
	gT¿n¦©iÚM‘hod
::
	$S‘CouÁ
Ğ
ušt64_t
 
rows
, ušt64_ˆ
cŞs
, ušt64_ˆ
bªks
,

90 
ušt64_t
 
¿nks
, ušt64_ˆ
chªÃls
, ušt64_ˆ
sub¬¿ys
 )

92 
couÁ
[
MEM_ROW
] = 
rows
;

93 
couÁ
[
MEM_COL
] = 
cŞs
;

94 
couÁ
[
MEM_BANK
] = 
bªks
;

95 
couÁ
[
MEM_RANK
] = 
¿nks
;

96 
couÁ
[
MEM_CHANNEL
] = 
chªÃls
;

97 
couÁ
[
MEM_SUBARRAY
] = 
sub¬¿ys
;

98 
	}
}

100 
	gT¿n¦©iÚM‘hod
::
	$G‘B™Widths
Ğ*
rowB™s
, *
cŞB™s
, *
bªkB™s
,

101 *
¿nkB™s
, *
chªÃlB™s
, *
sub¬¿yB™s
 )

103 *
rowB™s
 = 
b™Widths
[
MEM_ROW
];

104 *
cŞB™s
 = 
b™Widths
[
MEM_COL
];

105 *
bªkB™s
 = 
b™Widths
[
MEM_BANK
];

106 *
¿nkB™s
 = 
b™Widths
[
MEM_RANK
];

107 *
chªÃlB™s
 = 
b™Widths
[
MEM_CHANNEL
];

108 *
sub¬¿yB™s
 = 
b™Widths
[
MEM_SUBARRAY
];

109 
	}
}

113 * 
	gT¿n¦©iÚM‘hod
::
	$G‘Ord”
( )

115  
Üd”
;

116 
	}
}

118 
ušt64_t
* 
	gT¿n¦©iÚM‘hod
::
	$G‘CouÁ
()

120  
couÁ
;

121 
	}
}

123 *
	gT¿n¦©iÚM‘hod
::
	$G‘B™Widths
()

125  
b™Widths
;

126 
	}
}

130 
	gT¿n¦©iÚM‘hod
::
	$G‘Ord”
Ğ*
row
, *
cŞ
, *
bªk
, *
¿nk
, *
chªÃl
, *
sub¬¿y
 )

132 *
row
 = 
Üd”
[
MEM_ROW
];

133 *
cŞ
 = 
Üd”
[
MEM_COL
];

134 *
bªk
 = 
Üd”
[
MEM_BANK
];

135 *
¿nk
 = 
Üd”
[
MEM_RANK
];

136 *
chªÃl
 = 
Üd”
[
MEM_CHANNEL
];

137 *
sub¬¿y
 = 
Üd”
[
MEM_SUBARRAY
];

138 
	}
}

140 
	gT¿n¦©iÚM‘hod
::
	$G‘CouÁ
Ğ
ušt64_t
 *
rows
, ušt64_ˆ*
cŞs
, ušt64_ˆ*
bªks
,

141 
ušt64_t
 *
¿nks
, ušt64_ˆ*
chªÃls
, ušt64_ˆ*
sub¬¿ys
 )

143 *
rows
 = 
couÁ
[
MEM_ROW
];

144 *
cŞs
 = 
couÁ
[
MEM_COL
];

145 *
bªks
 = 
couÁ
[
MEM_BANK
];

146 *
¿nks
 = 
couÁ
[
MEM_RANK
];

147 *
chªÃls
 = 
couÁ
[
MEM_CHANNEL
];

148 *
sub¬¿ys
 = 
couÁ
[
MEM_SUBARRAY
];

149 
	}
}

155 
	gT¿n¦©iÚM‘hod
::
S‘Add»ssM­pšgScheme
Ğ
¡d
::
¡ršg
 
scheme
 )

158 
addrM­pšgScheme
[16];

159 *
	gaddrP¬£r
, *
	g§vePŒ
;

161 
¡rıy
Ğ
addrM­pšgScheme
, (*)
scheme
.
c_¡r
( ) );

163 
	grow
, 
	gcŞ
, 
	gbªk
, 
	g¿nk
, 
	gchªÃl
, 
	gsub¬¿y
;

164 
	grow
 = 
cŞ
 = 
bªk
 = 
¿nk
 = 
chªÃl
 = 
sub¬¿y
 = 0;

165 
	gcu¼’tOrd”
 = 6;

168  
	gaddrP¬£r
 = 
¡¹ok_r
Ğ
addrM­pšgScheme
, ":", &
§vePŒ
 );

169 
	gaddrP¬£r
 ;‡ddrP¬£¸ğ
¡¹ok_r
Ğ
NULL
, ":", &
§vePŒ
 ) )

171 ifĞ!
¡rcmp
Ğ
addrP¬£r
, "R" ) )

172 
	grow
 = 
cu¼’tOrd”
;

173 ifĞ!
¡rcmp
Ğ
addrP¬£r
, "C" ) )

174 
	gcŞ
 = 
cu¼’tOrd”
;

175 ifĞ!
¡rcmp
Ğ
addrP¬£r
, "BK" ) )

176 
	gbªk
 = 
cu¼’tOrd”
;

177 ifĞ!
¡rcmp
Ğ
addrP¬£r
, "RK" ) )

178 
	g¿nk
 = 
cu¼’tOrd”
;

179 ifĞ!
¡rcmp
Ğ
addrP¬£r
, "CH" ) )

180 
	gchªÃl
 = 
cu¼’tOrd”
;

181 ifĞ!
¡rcmp
Ğ
addrP¬£r
, "SA" ) )

182 
	gsub¬¿y
 = 
cu¼’tOrd”
;

184 
	g¡d
::
û¼
 << "NVMain Error: unrecognized‡ddress mapping scheme: "

185 << 
scheme
 << 
¡d
::
’dl
;

188 
	gcu¼’tOrd”
--;

189 ifĞ
	gcu¼’tOrd”
 < 0 )

190 
	g¡d
::
û¼
 << "NVMain Error: invalid‡ddress mapping scheme: "

191 << 
scheme
 << 
¡d
::
’dl
;

195 ifĞ
	gsub¬¿y
 =ğ0 ) { 
sub¬¿y
 = 
cu¼’tOrd”
--; }

196 ifĞ
	gchªÃl
 =ğ0 ) { 
chªÃl
 = 
cu¼’tOrd”
--; }

197 ifĞ
	g¿nk
 =ğ0 ) { 
¿nk
 = 
cu¼’tOrd”
--; }

198 ifĞ
	gbªk
 =ğ0 ) { 
bªk
 = 
cu¼’tOrd”
--; }

199 ifĞ
	grow
 =ğ0 ) { 
row
 = 
cu¼’tOrd”
--; }

200 ifĞ
	gcŞ
 =ğ0 ) { 
cŞ
 = 
cu¼’tOrd”
--; }

202 
S‘Ord”
Ğ
row
, 
cŞ
, 
bªk
, 
¿nk
, 
chªÃl
, 
sub¬¿y
 );

203 
	g¡d
::
cout
 << "NVMaš:hadd»s m­pšg ord” i " << 
¡d
::
’dl


204 << "\tSub-A¼ay " << 
sub¬¿y
 << 
¡d
::
’dl


205 << "\tRow " << 
row
 << 
¡d
::
’dl


206 << "\tCŞumÀ" << 
cŞ
 << 
¡d
::
’dl


207 << "\tBªk " << 
bªk
 << 
¡d
::
’dl


208 << "\tRªk " << 
¿nk
 << 
¡d
::
’dl


209 << "\tChªÃÈ" << 
chªÃl
 << 
¡d
::
’dl
;

	@src/TranslationMethod.h

36 #iâdeà
__TRANSLATIONMETHOD_H__


37 
	#__TRANSLATIONMETHOD_H__


	)

39 
	~<¡dšt.h
>

40 
	~<¡ršg
>

42 
Çme¥aû
 
	gNVM
 {

44 
	eMemÜyP¬t™iÚ


46 
	gMEM_ROW
 = 0,

47 
	gMEM_COL
 = 1,

48 
	gMEM_BANK
 = 2,

49 
	gMEM_RANK
 = 3,

50 
	gMEM_CHANNEL
 = 4,

51 
	gMEM_SUBARRAY
 = 5,

52 
	gMEM_UNKNOWN
 = 100

55 şas 
	cT¿n¦©iÚM‘hod


57 
	gpublic
:

58 
T¿n¦©iÚM‘hod
( );

59 ~
T¿n¦©iÚM‘hod
( );

65 
S‘Add»ssM­pšgScheme
Ğ
¡d
::
¡ršg
 
scheme
 );

67 
S‘B™Widths
Ğ
rowB™s
, 
cŞB™s
, 
bªkB™s
,

68 
¿nkB™s
, 
chªÃlB™s
, 
sub¬¿yB™s
 );

70 
S‘Ord”
Ğ
row
, 
cŞ
, 
bªk
, 
¿nk
, 
chªÃl
, 
sub¬¿y
 );

72 
S‘CouÁ
Ğ
ušt64_t
 
rows
, ušt64_ˆ
cŞs
, ušt64_ˆ
bªks
,

73 
ušt64_t
 
¿nks
, ušt64_ˆ
chªÃls
, ušt64_ˆ
sub¬¿ys
 );

75 
G‘B™Widths
Ğ*
rowB™s
, *
cŞB™s
, *
bªkB™s
,

76 *
¿nkB™s
, *
chªÃlB™s
, *
sub¬¿yB™s
 );

77 
G‘Ord”
Ğ*
row
, *
cŞ
, *
bªk
, *
¿nk
, *
chªÃl
, *
sub¬¿yB™s
 );

78 
G‘CouÁ
Ğ
ušt64_t
 *
rows
, ušt64_ˆ*
cŞs
, ušt64_ˆ*
bªks
,

79 
ušt64_t
 *
¿nks
, ušt64_ˆ*
chªÃls
, ušt64_ˆ*
sub¬¿ys
 );

83 *
G‘Ord”
();

84 
ušt64_t
 *
G‘CouÁ
();

85 * 
G‘B™Widths
();

87 
	gpublic
:

88 
b™Widths
[6];

89 
ušt64_t
 
	gcouÁ
[6];

90 
	gÜd”
[6];

	@src/bk/MemoryController.cpp

36 
	~"¤c/MemÜyCÚŒŞËr.h
"

37 
	~"šşude/NVMašReque¡.h
"

38 
	~"¤c/Ev’tQueue.h
"

39 
	~"¤c/IÁ”cÚÃù.h
"

40 
	~"IÁ”cÚÃù/IÁ”cÚÃùFaùÜy.h
"

41 
	~"¤c/Rªk.h
"

42 
	~"¤c/SubA¼ay.h
"

43 
	~"šşude/NVMH–³rs.h
"

45 
	~<s¡»am
>

46 
	~<ÿs£¹
>

47 
	~<c¡dlib
>

48 
	~<csigÇl
>

49 
	~<lim™s
>

50 
	~<®gÜ™hm
>

52 
usšg
 
Çme¥aû
 
	gNVM
;

55 
boŞ
 
WasIssued
Ğ
NVMašReque¡
 *
»que¡
 );

58 
boŞ
 
	$WasIssued
Ğ
NVMašReque¡
 *
»que¡
 ) {  (»que¡->
æags
 & NVMašReque¡::
FLAG_ISSUED
); 
	}
}

60 
	gMemÜyCÚŒŞËr
::
	$MemÜyCÚŒŞËr
( )

62 
Œª§ùiÚQueues
 = 
NULL
;

63 
Œª§ùiÚQueueCouÁ
 = 0;

64 
commªdQueues
 = 
NULL
;

65 
commªdQueueCouÁ
 = 0;

67 
Ï¡CommªdWake
 = 0;

68 
wakeupCouÁ
 = 0;

69 
Ï¡IssueCyşe
 = 0;

71 
¡¬v©iÚTh»shŞd
 = 4;

72 
subA¼ayNum
 = 1;

73 
¡¬v©iÚCouÁ”
 = 
NULL
;

74 
aùiv©eQueued
 = 
NULL
;

75 
efãùiveRow
 = 
NULL
;

76 
efãùiveMuxedRow
 = 
NULL
;

77 
aùiveSubA¼ay
 = 
NULL
;

79 
d–ayedReäeshCouÁ”
 = 
NULL
;

81 
curQueue
 = 0;

82 
ÃxtReäeshRªk
 = 0;

83 
ÃxtReäeshBªk
 = 0;

85 
hªdËdReäesh
 = 
¡d
::
num”ic_lim™s
<
ncyşe_t
>::
	`max
( );

86 
	}
}

88 
	gMemÜyCÚŒŞËr
::~
	$MemÜyCÚŒŞËr
( )

90  
ncouÁ”_t
 
i
 = 0; i < 
p
->
RANKS
; i++ )

92 
d–‘e
 [] 
aùiv©eQueued
[
i
];

93 
d–‘e
 [] 
bªkN“dReäesh
[
i
];

94 
d–‘e
 [] 
»äeshQueued
[
i
];

96  
ncouÁ”_t
 
j
 = 0;j < 
p
->
BANKS
; j++ )

98 
d–‘e
 [] 
¡¬v©iÚCouÁ”
[
i
][
j
];

99 
d–‘e
 [] 
efãùiveRow
[
i
][
j
];

100 
d–‘e
 [] 
efãùiveMuxedRow
[
i
][
j
];

101 
d–‘e
 [] 
aùiveSubA¼ay
[
i
][
j
];

103 
d–‘e
 [] 
¡¬v©iÚCouÁ”
[
i
];

104 
d–‘e
 [] 
efãùiveRow
[
i
];

105 
d–‘e
 [] 
efãùiveMuxedRow
[
i
];

106 
d–‘e
 [] 
aùiveSubA¼ay
[
i
];

109 
d–‘e
 [] 
commªdQueues
;

110 
d–‘e
 [] 
¡¬v©iÚCouÁ”
;

111 
d–‘e
 [] 
aùiv©eQueued
;

112 
d–‘e
 [] 
efãùiveRow
;

113 
d–‘e
 [] 
efãùiveMuxedRow
;

114 
d–‘e
 [] 
aùiveSubA¼ay
;

115 
d–‘e
 [] 
bªkN“dReäesh
;

116 
d–‘e
 [] 
¿nkPow”Down
;

118 ifĞ
p
->
U£Reäesh
 )

120  
ncouÁ”_t
 
i
 = 0; i < 
p
->
RANKS
; i++ )

123 
d–‘e
 [] 
d–ayedReäeshCouÁ”
[
i
];

127 
d–‘e
 [] 
d–ayedReäeshCouÁ”
;

128 
	}
}

132 
	gMemÜyCÚŒŞËr
::
	$In™Queues
Ğ
numQueues
 )

134 ifĞ
Œª§ùiÚQueues
 !ğ
NULL
 )

135 
d–‘e
 [] 
Œª§ùiÚQueues
;

137 
Œª§ùiÚQueues
 = 
Ãw
 
NVMT¿n§ùiÚQueue
[ 
numQueues
 ];

138 
Œª§ùiÚQueueCouÁ
 = 
numQueues
;

140  
i
 = 0; i < 
numQueues
; i++ )

141 
Œª§ùiÚQueues
[
i
].
	`ş—r
( );

142 
	}
}

146 
	gMemÜyCÚŒŞËr
::
	$Cyşe
Ğ
ncyşe_t
 
¡•s
 )

148 ifĞ
p
->
Ev’tDriv’
 )

155 
boŞ
 
scheduËd
 = 
çl£
;

156 
ncyşe_t
 
ÃxtWakeup
 = 
	`G‘Ev’tQueue
Ğ)->
	`G‘Cu¼’tCyşe
( ) + 1;

159 ifĞ
	`G‘Ev’tQueue
Ğ)->
	`FšdEv’t
Ğ
Ev’tCyşe
, 
this
, 
NULL
, 
ÃxtWakeup
 ) )

162  
ncouÁ”_t
 
queueIdx
 = 0; queueIdx < 
commªdQueueCouÁ
; queueIdx++ )

164 ifĞ
	`Efãùiv–yEm±y
Ğ
queueIdx
 )

165 && 
	`T¿n§ùiÚAvaabË
Ğ
queueIdx
 ) )

167 
	`G‘Ev’tQueue
Ğ)->
	`In£¹Ev’t
Ğ
Ev’tCyşe
, 
this
, 
ÃxtWakeup
, 
NULL
, 
Œª§ùiÚQueuePriÜ™y
 );

172 
scheduËd
 = 
Œue
;

176 ifĞ
scheduËd
 )

184 
	`G‘Chd
Ğ)->
	`Cyşe
Ğ
¡•s
 );

186 
	}
}

188 
	gMemÜyCÚŒŞËr
::
	$P»queue
Ğ
ncouÁ”_t
 
queueNum
, 
NVMašReque¡
 *
»que¡
 )

190 
	`as£¹
Ğ
queueNum
 < 
Œª§ùiÚQueueCouÁ
 );

192 
Œª§ùiÚQueues
[
queueNum
].
	`push_äÚt
Ğ
»que¡
 );

193 
	}
}

199 
	gMemÜyCÚŒŞËr
::
	$Enqueue
Ğ
ncouÁ”_t
 
queueNum
, 
NVMašReque¡
 *
»que¡
 )

202 
ncouÁ”_t
 
chªÃl
, 
¿nk
, 
bªk
, 
row
, 
cŞ
, 
sub¬¿y
;

204 
	`G‘Decod”
Ğ)->
	`T¿n¦©e
Ğ
»que¡
->
add»ss
.
	`G‘PhysiÿlAdd»ss
( ),

205 &
row
, &
cŞ
, &
bªk
, &
¿nk
, &
chªÃl
, &
sub¬¿y
 );

206 
chªÃl
 = 
»que¡
->
add»ss
.
	`G‘ChªÃl
( );

207 
»que¡
->
add»ss
.
	`S‘T¿n¦©edAdd»ss
Ğ
row
, 
cŞ
, 
bªk
, 
¿nk
, 
chªÃl
, 
sub¬¿y
 );

210 
	`as£¹
Ğ
queueNum
 < 
Œª§ùiÚQueueCouÁ
 );

212 
Œª§ùiÚQueues
[
queueNum
].
	`push_back
Ğ
»que¡
 );

214 ifĞ
p
->
Ev’tDriv’
 )

217 
ncouÁ”_t
 
queueId
 = 
	`G‘CommªdQueueId
Ğ
»que¡
->
add»ss
 );

219 ifĞ
	`Efãùiv–yEm±y
Ğ
queueId
 ) )

221 
ncyşe_t
 
ÃxtWakeup
 = 
	`G‘Ev’tQueue
Ğ)->
	`G‘Cu¼’tCyşe
( );

223 ifĞ
	`G‘Ev’tQueue
Ğ)->
	`FšdEv’t
Ğ
Ev’tCyşe
, 
this
, 
NULL
, 
ÃxtWakeup
 ) == NULL )

225 
	`G‘Ev’tQueue
Ğ)->
	`In£¹Ev’t
Ğ
Ev’tCyşe
, 
this
, 
ÃxtWakeup
, 
NULL
, 
Œª§ùiÚQueuePriÜ™y
 );

231 
	}
}

233 
boŞ
 
	gMemÜyCÚŒŞËr
::
	$T¿n§ùiÚAvaabË
Ğ
ncouÁ”_t
 
queueId
 )

235 
boŞ
 
rv
 = 
çl£
;

237  
ncouÁ”_t
 
queueIdx
 = 0; queueIdx < 
Œª§ùiÚQueueCouÁ
; queueIdx++ )

239 
¡d
::
li¡
<
NVMašReque¡
 *>::
™”©Ü
 
™
;

241  
™
 = 
Œª§ùiÚQueues
[
queueIdx
].
	`begš
( );

242 
™
 !ğ
Œª§ùiÚQueues
[
queueIdx
].
	`’d
( ); it++ )

244 ifĞ
	`G‘CommªdQueueId
Ğ(*
™
)->
add»ss
 ) =ğ
queueId
 )

246 
rv
 = 
Œue
;

252  
rv
;

253 
	}
}

255 
	gMemÜyCÚŒŞËr
::
	$ScheduËCommªdWake
( )

258 ifĞ
p
->
Ev’tDriv’
 )

260 
ncyşe_t
 
ÃxtWakeup
 = 
	`NextIssuabË
Ğ
NULL
 );

263 
boŞ
 
ÃxtWakeupScheduËd
 = 
	`G‘Ev’tQueue
()->
	`FšdC®lback
Ğ
this
,

264 (
C®lbackPŒ
)&
MemÜyCÚŒŞËr
::
CommªdQueueC®lback
,

265 
ÃxtWakeup
, 
NULL
, 
commªdQueuePriÜ™y
 );

267 ifĞ!
ÃxtWakeupScheduËd
 )

269 
	`G‘Ev’tQueue
Ğ)->
	`In£¹C®lback
Ğ
this
,

270 (
C®lbackPŒ
)&
MemÜyCÚŒŞËr
::
CommªdQueueC®lback
,

271 
ÃxtWakeup
, 
NULL
, 
commªdQueuePriÜ™y
 );

276 
	}
}

278 
	gMemÜyCÚŒŞËr
::
	$CommªdQueueC®lback
( * )

280 
	`as£¹
Ğ
p
->
Ev’tDriv’
 =ğ
Œue
 );

283 
ncyşe_t
 
»®S‹ps
 = 
	`G‘Ev’tQueue
Ğ)->
	`G‘Cu¼’tCyşe
Ğè- 
Ï¡CommªdWake
;

284 
Ï¡CommªdWake
 = 
	`G‘Ev’tQueue
Ğ)->
	`G‘Cu¼’tCyşe
( );

287 
ncyşe_t
 
ÃxtWakeup
 = 
	`NextIssuabË
Ğ
NULL
 );

288 
wakeupCouÁ
++;

291 
boŞ
 
ÃxtWakeupScheduËd
 = 
	`G‘Ev’tQueue
()->
	`FšdC®lback
Ğ
this
,

292 (
C®lbackPŒ
)&
MemÜyCÚŒŞËr
::
CommªdQueueC®lback
,

293 
ÃxtWakeup
, 
NULL
, 
commªdQueuePriÜ™y
 );

295 ifĞ!
ÃxtWakeupScheduËd


296 && 
ÃxtWakeup
 !ğ
¡d
::
num”ic_lim™s
<
ncyşe_t
>::
	`max
( ) )

298 
	`G‘Ev’tQueue
Ğ)->
	`In£¹C®lback
Ğ
this
,

299 (
C®lbackPŒ
)&
MemÜyCÚŒŞËr
::
CommªdQueueC®lback
,

300 
ÃxtWakeup
, 
NULL
, 
commªdQueuePriÜ™y
 );

305 
	`CyşeCommªdQueues
( );

307 
	`G‘Chd
Ğ)->
	`Cyşe
Ğ
»®S‹ps
 );

308 
	}
}

311 
	gMemÜyCÚŒŞËr
::
	$ReäeshC®lback
Ğ*
d©a
 )

313 
NVMašReque¡
 *
»que¡
 = 
»š‹½»t_ÿ¡
<NVMašReque¡ *>(
d©a
);

315 ifĞ
p
->
Ev’tDriv’
 )

317 
ncyşe_t
 
»®S‹ps
 = 
	`G‘Ev’tQueue
Ğ)->
	`G‘Cu¼’tCyşe
Ğè- 
Ï¡CommªdWake
;

318 
Ï¡CommªdWake
 = 
	`G‘Ev’tQueue
Ğ)->
	`G‘Cu¼’tCyşe
( );

319 
wakeupCouÁ
++;

321 
	`ProûssReäeshPul£
Ğ
»que¡
 );

322 
	`HªdËReäesh
( );

325 
	`G‘Chd
Ğ)->
	`Cyşe
Ğ
»®S‹ps
 );

329 
	`ProûssReäeshPul£
Ğ
»que¡
 );

331 
	}
}

333 
	gMemÜyCÚŒŞËr
::
	$CËªupC®lback
( * )

335  
ncyşe_t
 
queueId
 = 0; queueId < 
commªdQueueCouÁ
; queueId++ )

338 
commªdQueues
[
queueId
].
	`”a£
(

339 
¡d
::
	`»move_if
Ğ
commªdQueues
[
queueId
].
	`begš
(),

340 
commªdQueues
[
queueId
].
	`’d
(),

341 
WasIssued
 ),

342 
commªdQueues
[
queueId
].
	`’d
()

345 
	}
}

347 
boŞ
 
	gMemÜyCÚŒŞËr
::
	$Reque¡Com¶‘e
Ğ
NVMašReque¡
 *
»que¡
 )

352 ifĞ
»que¡
->
owÃr
 =ğ
this
 )

358 
d–‘e
 
»que¡
;

362  
	`G‘P¬’t
Ğ)->
	`Reque¡Com¶‘e
Ğ
»que¡
 );

365  
Œue
;

366 
	}
}

368 
boŞ
 
	gMemÜyCÚŒŞËr
::
	$IsIssuabË
Ğ
NVMašReque¡
 * , 
FaR—sÚ
 * )

370  
Œue
;

371 
	}
}

373 
	gMemÜyCÚŒŞËr
::
	$S‘M­pšgScheme
( )

376 
	`G‘Decod”
Ğ)->
	`G‘T¿n¦©iÚM‘hod
Ğ)->
	`S‘Add»ssM­pšgScheme
Ğ
p
->
Add»ssM­pšgScheme
 );

377 
	}
}

379 
	gMemÜyCÚŒŞËr
::
	$S‘CÚfig
Ğ
CÚfig
 *
cÚf
, 
boŞ
 
ü—‹Chd»n
 )

381 
this
->
cÚfig
 = 
cÚf
;

383 
P¬ams
 *
·¿ms
 = 
Ãw
 
	`P¬ams
( );

384 
·¿ms
->
	`S‘P¬ams
Ğ
cÚf
 );

385 
	`S‘P¬ams
Ğ
·¿ms
 );

387 ifĞ
ü—‹Chd»n
 )

389 
ušt64_t
 
chªÃls
, 
¿nks
, 
bªks
, 
rows
, 
cŞs
, 
sub¬¿ys
;

392 
Add»ssT¿n¦©Ü
 *
mcAT
 = 
Decod”FaùÜy
::
	`C»©eDecod”NoW¬n
Ğ
cÚf
->
	`G‘SŒšg
( "Decoder" ) );

393 
mcAT
->
	`S‘DeçuÉF›ld
Ğ
NO_FIELD
 );

394 
mcAT
->
	`S‘CÚfig
Ğ
cÚf
, 
ü—‹Chd»n
 );

395 
	`S‘Decod”
Ğ
mcAT
 );

399 
	`G‘P¬’t
()->
	`G‘T¿mpŞše
()->
	`G‘Decod”
()->
	`G‘T¿n¦©iÚM‘hod
()->
	`G‘CouÁ
(

400 &
rows
, &
cŞs
, &
bªks
, &
¿nks
, &
chªÃls
, &
sub¬¿ys
 );

403 ifĞ
cÚf
->
	`KeyExi¡s
( "MATHeight" ) )

405 
rows
 = 
p
->
MATHeight
;

406 
sub¬¿ys
 = 
p
->
ROWS
 /…->
MATHeight
;

410 
rows
 = 
p
->
ROWS
;

411 
sub¬¿ys
 = 1;

413 
cŞs
 = 
p
->
COLS
;

414 
bªks
 = 
p
->
BANKS
;

415 
¿nks
 = 
p
->
RANKS
;

417 
T¿n¦©iÚM‘hod
 *
m‘hod
 = 
Ãw
 
	`T¿n¦©iÚM‘hod
( );

419 
m‘hod
->
	`S‘B™Widths
Ğ
NVM
::
	`mlog2
Ğ
rows
 ),

420 
NVM
::
	`mlog2
Ğ
cŞs
 ),

421 
NVM
::
	`mlog2
Ğ
bªks
 ),

422 
NVM
::
	`mlog2
Ğ
¿nks
 ),

423 
NVM
::
	`mlog2
Ğ
chªÃls
 ),

424 
NVM
::
	`mlog2
Ğ
sub¬¿ys
 )

427 
m‘hod
->
	`S‘CouÁ
Ğ
rows
, 
cŞs
, 
bªks
, 
¿nks
, 
chªÃls
, 
sub¬¿ys
 );

428 
mcAT
->
	`S‘T¿n¦©iÚM‘hod
Ğ
m‘hod
 );

431 
¡d
::
¡ršg¡»am
 
cÚfSŒšg
;

433 
memÜy
 = 
IÁ”cÚÃùFaùÜy
::
	`C»©eIÁ”cÚÃù
Ğ
cÚf
->
	`G‘SŒšg
( "INTERCONNECT" ) );

435 
cÚfSŒšg
.
	`¡r
( "" );

436 
cÚfSŒšg
 << 
	`StName
Ğè<< ".chªÃl" << 
	`G‘ID
( );

437 
memÜy
->
	`StName
Ğ
cÚfSŒšg
.
	`¡r
( ) );

439 
memÜy
->
	`S‘P¬’t
Ğ
this
 );

440 
	`AddChd
Ğ
memÜy
 );

442 
memÜy
->
	`S‘CÚfig
Ğ
cÚf
, 
ü—‹Chd»n
 );

443 
memÜy
->
	`Regi¡”Sts
( );

445 
	`S‘M­pšgScheme
( );

455 
¡d
::
cout
 << 
	`StName
Ğè<< " c­ac™y i " << ((
p
->
ROWS
 *…->
COLS
 *…->
DeviûWidth
 *…->
tBURST
 *…->
RATE
 * (p->
BusWidth
 /…->DeviûWidthè*…->
BANKS
 *…->
RANKS
è/ (8*1024*1024)è<< " MB." << std::
’dl
;

457 ifĞ
cÚf
->
	`KeyExi¡s
( "MATHeight" ) )

459 
subA¼ayNum
 = 
p
->
ROWS
 /…->
MATHeight
;

463 
subA¼ayNum
 = 1;

467 
queueMod–
 = 
P”BªkQueues
;

468 
commªdQueueCouÁ
 = 
p
->
RANKS
 *…->
BANKS
;

469 ifĞ
cÚf
->
	`KeyExi¡s
( "QueueModel" ) )

471 ifĞ
cÚf
->
	`G‘SŒšg
( "QueueModel" ) == "PerRank" )

473 
queueMod–
 = 
P”RªkQueues
;

474 
commªdQueueCouÁ
 = 
p
->
RANKS
;

476 ifĞ
cÚf
->
	`G‘SŒšg
( "QueueModel" ) == "PerBank" )

478 
queueMod–
 = 
P”BªkQueues
;

479 
commªdQueueCouÁ
 = 
p
->
RANKS
 *…->
BANKS
;

481 ifĞ
cÚf
->
	`G‘SŒšg
( "QueueModel" ) == "PerSubArray" )

483 
queueMod–
 = 
P”SubA¼ayQueues
;

484 
commªdQueueCouÁ
 = 
p
->
RANKS
 *…->
BANKS
 * 
subA¼ayNum
;

489 
¡d
::
cout
 << "C»©šg " << 
commªdQueueCouÁ
 << " commªd queues." << std::
’dl
;

492 
commªdQueues
 = 
Ãw
 
¡d
::
deque
<
NVMašReque¡
 *> [
commªdQueueCouÁ
];

494 
aùiv©eQueued
 = 
Ãw
 
boŞ
 * [
p
->
RANKS
];

495 
»äeshQueued
 = 
Ãw
 
boŞ
 * [
p
->
RANKS
];

496 
¡¬v©iÚCouÁ”
 = 
Ãw
 
ncouÁ”_t
 ** [
p
->
RANKS
];

497 
efãùiveRow
 = 
Ãw
 
ncouÁ”_t
 ** [
p
->
RANKS
];

498 
efãùiveMuxedRow
 = 
Ãw
 
ncouÁ”_t
 ** [
p
->
RANKS
];

499 
aùiveSubA¼ay
 = 
Ãw
 
ncouÁ”_t
 ** [
p
->
RANKS
];

500 
¿nkPow”Down
 = 
Ãw
 
boŞ
 [
p
->
RANKS
];

502  
ncouÁ”_t
 
i
 = 0; i < 
p
->
RANKS
; i++ )

504 
aùiv©eQueued
[
i
] = 
Ãw
 
boŞ
[
p
->
BANKS
];

505 
»äeshQueued
[
i
] = 
Ãw
 
boŞ
[
p
->
BANKS
];

506 
aùiveSubA¼ay
[
i
] = 
Ãw
 
ncouÁ”_t
 * [
p
->
BANKS
];

507 
efãùiveRow
[
i
] = 
Ãw
 
ncouÁ”_t
 * [
p
->
BANKS
];

508 
efãùiveMuxedRow
[
i
] = 
Ãw
 
ncouÁ”_t
 * [
p
->
BANKS
];

509 
¡¬v©iÚCouÁ”
[
i
] = 
Ãw
 
ncouÁ”_t
 * [
p
->
BANKS
];

511 ifĞ
p
->
U£LowPow”
 )

512 
¿nkPow”Down
[
i
] = 
p
->
In™PD
;

514 
¿nkPow”Down
[
i
] = 
çl£
;

516  
ncouÁ”_t
 
j
 = 0; j < 
p
->
BANKS
; j++ )

518 
aùiv©eQueued
[
i
][
j
] = 
çl£
;

519 
»äeshQueued
[
i
][
j
] = 
çl£
;

521 
¡¬v©iÚCouÁ”
[
i
][
j
] = 
Ãw
 
ncouÁ”_t
 [
subA¼ayNum
];

522 
efãùiveRow
[
i
][
j
] = 
Ãw
 
ncouÁ”_t
 [
subA¼ayNum
];

523 
efãùiveMuxedRow
[
i
][
j
] = 
Ãw
 
ncouÁ”_t
 [
subA¼ayNum
];

524 
aùiveSubA¼ay
[
i
][
j
] = 
Ãw
 
ncouÁ”_t
 [
subA¼ayNum
];

526  
ncouÁ”_t
 
m
 = 0; m < 
subA¼ayNum
; m++ )

528 
¡¬v©iÚCouÁ”
[
i
][
j
][
m
] = 0;

529 
aùiveSubA¼ay
[
i
][
j
][
m
] = 
çl£
;

531 
efãùiveRow
[
i
][
j
][
m
] = 
p
->
ROWS
;

532 
efãùiveMuxedRow
[
i
][
j
][
m
] = 
p
->
ROWS
;

537 
bªkN“dReäesh
 = 
Ãw
 
boŞ
 * [
p
->
RANKS
];

538  
ncouÁ”_t
 
i
 = 0; i < 
p
->
RANKS
; i++ )

540 
bªkN“dReäesh
[
i
] = 
Ãw
 
boŞ
 [
p
->
BANKS
];

541  
ncouÁ”_t
 
j
 = 0; j < 
p
->
BANKS
; j++ )

543 
bªkN“dReäesh
[
i
][
j
] = 
çl£
;

547 
d–ayedReäeshCouÁ”
 = 
Ãw
 
ncouÁ”_t
 * [
p
->
RANKS
];

549 ifĞ
p
->
U£Reäesh
 )

552 
	`as£¹
Ğ
p
->
BªksP”Reäesh
 <ğp->
BANKS
 );

558 
	`as£¹
Ğ
p
->
BªksP”Reäesh
 != 0 );

560 
m_»äeshBªkNum
 = 
p
->
BANKS
 /…->
BªksP”Reäesh
;

563 
m_tREFI
 = 
p
->
tREFW
 / (p->
ROWS
 /…->
ReäeshRows
 );

566 
ncyşe_t
 
m_»äeshSliû
 = 
m_tREFI
 / ( 
p
->
RANKS
 * 
m_»äeshBªkNum
 );

568  
ncouÁ”_t
 
i
 = 0; i < 
p
->
RANKS
; i++ )

570 
d–ayedReäeshCouÁ”
[
i
] = 
Ãw
 
ncouÁ”_t
 [
m_»äeshBªkNum
];

573  
ncouÁ”_t
 
j
 = 0; j < 
m_»äeshBªkNum
; j++ )

575 
d–ayedReäeshCouÁ”
[
i
][
j
] = 0;

577 
ncouÁ”_t
 
»äeshBªkH—d
 = 
j
 * 
p
->
BªksP”Reäesh
;

580 
NVMašReque¡
* 
»äeshPul£
 = 
	`MakeReäeshReque¡
(

581 0, 0, 
»äeshBªkH—d
, 
i
, 0 );

585 
ncyşe_t
 
off£t
 = (
i
 * 
m_»äeshBªkNum
 + 
j
 ) * 
m_»äeshSliû
;

591 
	`G‘Ev’tQueue
()->
	`In£¹C®lback
Ğ
this
,

592 (
C®lbackPŒ
)&
MemÜyCÚŒŞËr
::
ReäeshC®lback
,

593 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
()+
m_tREFI
+
off£t
,

594 
»š‹½»t_ÿ¡
<*>(
»äeshPul£
),

595 
»äeshPriÜ™y
 );

600 ifĞ
p
->
PrštCÚfig
 )

601 
cÚfig
->
	`Pršt
();

603 
	`S‘DebugName
Ğ"MemÜyCÚŒŞËr", 
cÚf
 );

604 
	}
}

606 
	gMemÜyCÚŒŞËr
::
	$Regi¡”Sts
( )

608 
	`AddSt
(
simuÏtiÚ_cyşes
);

609 
	`AddSt
(
wakeupCouÁ
);

610 
	}
}

621 
boŞ
 
	gMemÜyCÚŒŞËr
::
	$N“dReäesh
ĞcÚ¡ 
ncouÁ”_t
 
bªk
, cÚ¡ 
ušt64_t
 
¿nk
 )

623 
boŞ
 
rv
 = 
çl£
;

625 ifĞ
p
->
U£Reäesh
 )

626 ifĞ
d–ayedReäeshCouÁ”
[
¿nk
][
bªk
/
p
->
BªksP”Reäesh
]

627 >ğ
p
->
D–ayedReäeshTh»shŞd
 )

628 
rv
 = 
Œue
;

630  
rv
;

631 
	}
}

636 
	gMemÜyCÚŒŞËr
::
	$S‘Reäesh
ĞcÚ¡ 
ncouÁ”_t
 
bªk
, cÚ¡ 
ušt64_t
 
¿nk
 )

639 
ncouÁ”_t
 
bªkH—d
 = ( 
bªk
 / 
p
->
BªksP”Reäesh
 ) *…->BanksPerRefresh;

641  
ncouÁ”_t
 
i
 = 0; i < 
p
->
BªksP”Reäesh
; i++ )

642 
bªkN“dReäesh
[
¿nk
][
bªkH—d
 + 
i
] = 
Œue
;

643 
	}
}

648 
	gMemÜyCÚŒŞËr
::
	$Re£tReäesh
ĞcÚ¡ 
ncouÁ”_t
 
bªk
, cÚ¡ 
ušt64_t
 
¿nk
 )

651 
ncouÁ”_t
 
bªkH—d
 = ( 
bªk
 / 
p
->
BªksP”Reäesh
 ) *…->BanksPerRefresh;

653  
ncouÁ”_t
 
i
 = 0; i < 
p
->
BªksP”Reäesh
; i++ )

654 
bªkN“dReäesh
[
¿nk
][
bªkH—d
 + 
i
] = 
çl£
;

655 
	}
}

660 
	gMemÜyCÚŒŞËr
::
	$Re£tReäeshQueued
ĞcÚ¡ 
ncouÁ”_t
 
bªk
, cÚ¡‚couÁ”_ˆ
¿nk
 )

663 
ncouÁ”_t
 
bªkH—d
 = ( 
bªk
 / 
p
->
BªksP”Reäesh
 ) *…->BanksPerRefresh;

665  
ncouÁ”_t
 
i
 = 0; i < 
p
->
BªksP”Reäesh
; i++ )

667 
	`as£¹
Ğ
»äeshQueued
[
¿nk
][
bªkH—d
 + 
i
] );

668 
»äeshQueued
[
¿nk
][
bªkH—d
 + 
i
] = 
çl£
;

670 
	}
}

675 
	gMemÜyCÚŒŞËr
::
	$Inüem’tReäeshCouÁ”
ĞcÚ¡ 
ncouÁ”_t
 
bªk
, cÚ¡ 
ušt64_t
 
¿nk
 )

678 
ncouÁ”_t
 
bªkGroupID
 = 
bªk
 / 
p
->
BªksP”Reäesh
;

680 
d–ayedReäeshCouÁ”
[
¿nk
][
bªkGroupID
]++;

681 
	}
}

686 
	gMemÜyCÚŒŞËr
::
	$Deüem’tReäeshCouÁ”
ĞcÚ¡ 
ncouÁ”_t
 
bªk
, cÚ¡ 
ušt64_t
 
¿nk
 )

689 
ncouÁ”_t
 
bªkGroupID
 = 
bªk
 / 
p
->
BªksP”Reäesh
;

691 
d–ayedReäeshCouÁ”
[
¿nk
][
bªkGroupID
]--;

692 
	}
}

698 
boŞ
 
	gMemÜyCÚŒŞËr
::
	$HªdËReäesh
( )

700  
ncouÁ”_t
 
¿nkIdx
 = 0;„ªkIdx < 
p
->
RANKS
;„ankIdx++ )

702 
ncouÁ”_t
 
i
 = (
ÃxtReäeshRªk
 + 
¿nkIdx
è% 
p
->
RANKS
;

704  
ncouÁ”_t
 
bªkIdx
 = 0; bªkIdx < 
m_»äeshBªkNum
; bankIdx++ )

706 
ncouÁ”_t
 
j
 = (
ÃxtReäeshBªk
 + 
bªkIdx
 * 
p
->
BªksP”Reäesh
è%…->
BANKS
;

707 
FaR—sÚ
 
ç
;

709 ifĞ
	`N“dReäesh
Ğ
j
, 
i
 ) )

712 
NVMašReque¡
* 
cmdReäesh
 = 
	`MakeReäeshReque¡
Ğ0, 0, 
j
, 
i
, 0 );

715 ifĞ
p
->
U£P»ch¬ge
 )

717  
ncouÁ”_t
 
tmpBªk
 = 0;mpBªk < 
p
->
BªksP”Reäesh
;mpBank++ )

720 
ncouÁ”_t
 
»fBªk
 = (
tmpBªk
 + 
j
è% 
p
->
BANKS
;

721 
ncouÁ”_t
 
queueId
 = 
	`G‘CommªdQueueId
Ğ
	`NVMAdd»ss
Ğ0, 0, 
»fBªk
, 
i
 , 0, 0 ) );

725 ifĞ
aùiv©eQueued
[
i
][
»fBªk
] =ğ
Œue
 )

730 
NVMašReque¡
 *
cmdRefP»
 = 
	`MakeP»ch¬geAÎReque¡
Ğ0, 0, 
»fBªk
, 
i
, 0 );

732 
commªdQueues
[
queueId
].
	`push_back
Ğ
cmdRefP»
 );

735  
ncouÁ”_t
 
§
 = 0; s¨< 
subA¼ayNum
; sa++ )

737 
aùiveSubA¼ay
[
i
][
»fBªk
][
§
] = 
çl£
;

738 
efãùiveRow
[
i
][
»fBªk
][
§
] = 
p
->
ROWS
;

739 
efãùiveMuxedRow
[
i
][
»fBªk
][
§
] = 
p
->
ROWS
;

741 
aùiv©eQueued
[
i
][
»fBªk
] = 
çl£
;

746 
ncouÁ”_t
 
queueId
 = 
	`G‘CommªdQueueId
Ğ
	`NVMAdd»ss
Ğ0, 0, 
j
, 
i
, 0, 0 ) );

749 
cmdReäesh
->
issueCyşe
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
();

750 
commªdQueues
[
queueId
].
	`push_back
Ğ
cmdReäesh
 );

752  
ncouÁ”_t
 
tmpBªk
 = 0;mpBªk < 
p
->
BªksP”Reäesh
;mpBank++ )

754 
ncouÁ”_t
 
»fBªk
 = (
tmpBªk
 + 
j
è% 
p
->
BANKS
;

757 
»äeshQueued
[
i
][
»fBªk
] = 
Œue
;

761 
	`Deüem’tReäeshCouÁ”
Ğ
j
, 
i
 );

764 ifĞ!
	`N“dReäesh
Ğ
j
, 
i
 ) )

765 
	`Re£tReäesh
Ğ
j
, 
i
 );

768 
ÃxtReäeshBªk
 +ğ
p
->
BªksP”Reäesh
;

769 ifĞ
ÃxtReäeshBªk
 >ğ
p
->
BANKS
 )

771 
ÃxtReäeshBªk
 = 0;

772 
ÃxtReäeshRªk
++;

774 ifĞ
ÃxtReäeshRªk
 =ğ
p
->
RANKS
 )

775 
ÃxtReäeshRªk
 = 0;

778 
hªdËdReäesh
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
();

780 
	`ScheduËCommªdWake
( );

783  
Œue
;

787  
çl£
;

788 
	}
}

794 
	gMemÜyCÚŒŞËr
::
	$ProûssReäeshPul£
Ğ
NVMašReque¡
* 
»äesh
 )

796 
	`as£¹
Ğ
»äesh
->
ty³
 =ğ
REFRESH
 );

798 
ncouÁ”_t
 
¿nk
, 
bªk
;

800 
»äesh
->
add»ss
.
	`G‘T¿n¦©edAdd»ss
Ğ
NULL
, NULL, &
bªk
, &
¿nk
, NULL, NULL );

802 
	`Inüem’tReäeshCouÁ”
Ğ
bªk
, 
¿nk
 );

804 ifĞ
	`N“dReäesh
Ğ
bªk
, 
¿nk
 ) )

805 
	`S‘Reäesh
Ğ
bªk
, 
¿nk
 );

807 
	`G‘Ev’tQueue
()->
	`In£¹C®lback
Ğ
this
,

808 (
C®lbackPŒ
)&
MemÜyCÚŒŞËr
::
ReäeshC®lback
,

809 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
()+
m_tREFI
,

810 
»š‹½»t_ÿ¡
<*>(
»äesh
),

811 
»äeshPriÜ™y
 );

812 
	}
}

818 
boŞ
 
	gMemÜyCÚŒŞËr
::
	$IsReäeshBªkQueueEm±y
ĞcÚ¡ 
ncouÁ”_t
 
bªk
, cÚ¡ 
ušt64_t
 
¿nk
 )

821 
ncouÁ”_t
 
bªkH—d
 = ( 
bªk
 / 
p
->
BªksP”Reäesh
 ) *…->BanksPerRefresh;

823  
ncouÁ”_t
 
i
 = 0; i < 
p
->
BªksP”Reäesh
; i++ )

825 
ncouÁ”_t
 
queueId
 = 
	`G‘CommªdQueueId
Ğ
	`NVMAdd»ss
Ğ0, 0, 
bªkH—d
 + 
i
, 
¿nk
, 0, 0 ) );

827 ifĞ!
	`Efãùiv–yEm±y
Ğ
queueId
 ) )

829  
çl£
;

833  
Œue
;

834 
	}
}

836 
	gMemÜyCÚŒŞËr
::
	$Pow”Down
ĞcÚ¡ 
ncouÁ”_t
& 
¿nkId
 )

838 
OpTy³
 
pdOp
 = 
POWERDOWN_PDPF
;

839 ifĞ
p
->
Pow”DownMode
 == "SLOWEXIT" )

840 
pdOp
 = 
POWERDOWN_PDPS
;

841 ifĞ
p
->
Pow”DownMode
 == "FASTEXIT" )

842 
pdOp
 = 
POWERDOWN_PDPF
;

844 
¡d
::
û¼
 << "NVMaš E¼Ü: Undefšed†ow…ow” mode" << std::
’dl
;

846 
NVMašReque¡
 *
pow”downReque¡
 = 
	`MakePow”downReque¡
Ğ
pdOp
, 
¿nkId
 );

849 
NVMObjeù
 *
chd
;

850 
	`FšdChdTy³
Ğ
pow”downReque¡
, 
Rªk
, 
chd
 );

851 
Rªk
 *
pdRªk
 = 
dyÇmic_ÿ¡
<Rªk *>(
chd
);

853 ifĞ
pdRªk
->
	`IdË
Ğè=ğ
çl£
 )

856 
d–‘e
 
pow”downReque¡
;

858 
pdOp
 = 
POWERDOWN_PDA
;

859 
pow”downReque¡
 = 
	`MakePow”downReque¡
Ğ
pdOp
, 
¿nkId
 );

862 ifĞ
	`RªkQueueEm±y
Ğ
¿nkId
 ) && 
	`G‘Chd
()->
	`IsIssuabË
Ğ
pow”downReque¡
 ) )

864 
	`G‘Chd
()->
	`IssueCommªd
Ğ
pow”downReque¡
 );

865 
¿nkPow”Down
[
¿nkId
] = 
Œue
;

869 
d–‘e
 
pow”downReque¡
;

871 
	}
}

873 
	gMemÜyCÚŒŞËr
::
	$Pow”Up
ĞcÚ¡ 
ncouÁ”_t
& 
¿nkId
 )

875 
NVMašReque¡
 *
pow”upReque¡
 = 
	`MakePow”upReque¡
Ğ
¿nkId
 );

878 ifĞ
	`RªkQueueEm±y
Ğ
¿nkId
 ) =ğ
çl£


879 && 
	`G‘Chd
()->
	`IsIssuabË
Ğ
pow”upReque¡
 ) )

881 
	`G‘Chd
()->
	`IssueCommªd
Ğ
pow”upReque¡
 );

882 
¿nkPow”Down
[
¿nkId
] = 
çl£
;

886 
d–‘e
 
pow”upReque¡
;

888 
	}
}

890 
	gMemÜyCÚŒŞËr
::
	$HªdËLowPow”
( )

892  
ncouÁ”_t
 
¿nkId
 = 0;„ªkId < 
p
->
RANKS
;„ankId++ )

894 
boŞ
 
ÃedReäesh
 = 
çl£
;

895 ifĞ
p
->
U£Reäesh
 )

897  
ncouÁ”_t
 
bªkId
 = 0; bªkId < 
m_»äeshBªkNum
; bankId++ )

899 
ncouÁ”_t
 
bªkGroupH—d
 = 
bªkId
 * 
p
->
BªksP”Reäesh
;

901 ifĞ
	`N“dReäesh
Ğ
bªkGroupH—d
, 
¿nkId
 ) )

903 
ÃedReäesh
 = 
Œue
;

910 ifĞ
ÃedReäesh
 )

912 
NVMašReque¡
 *
pow”upReque¡
 = 
	`MakePow”upReque¡
Ğ
¿nkId
 );

915 ifĞ
¿nkPow”Down
[
¿nkId
] && 
	`G‘Chd
()->
	`IsIssuabË
Ğ
pow”upReque¡
 ) )

917 
	`G‘Chd
()->
	`IssueCommªd
Ğ
pow”upReque¡
 );

918 
¿nkPow”Down
[
¿nkId
] = 
çl£
;

922 
d–‘e
 
pow”upReque¡
;

928 ifĞ
¿nkPow”Down
[
¿nkId
] )

929 
	`Pow”Up
Ğ
¿nkId
 );

931 
	`Pow”Down
Ğ
¿nkId
 );

934 
	}
}

936 
CÚfig
 *
	gMemÜyCÚŒŞËr
::
	$G‘CÚfig
( )

938  (
this
->
cÚfig
);

939 
	}
}

941 
	gMemÜyCÚŒŞËr
::
	$S‘ID
Ğ
id
 )

943 
this
->
id
 = id;

944 
	}
}

946 
	gMemÜyCÚŒŞËr
::
	$G‘ID
( )

948  
this
->
id
;

949 
	}
}

951 
NVMašReque¡
 *
	gMemÜyCÚŒŞËr
::
	$MakeCachedReque¡
Ğ
NVMašReque¡
 *
Œigg”Reque¡
 )

954 
	`as£¹
Ğ
Œigg”Reque¡
->
ty³
 =ğ
READ
 ||rigg”Reque¡->ty³ =ğ
WRITE
 );

956 
NVMašReque¡
 *
ÿchedReque¡
 = 
Ãw
 
	`NVMašReque¡
( );

958 *
ÿchedReque¡
 = *
Œigg”Reque¡
;

959 
ÿchedReque¡
->
ty³
 = (
Œigg”Reque¡
->ty³ =ğ
READ
 ? 
CACHED_READ
 : 
CACHED_WRITE
);

960 
ÿchedReque¡
->
owÃr
 = 
this
;

962  
ÿchedReque¡
;

963 
	}
}

965 
NVMašReque¡
 *
	gMemÜyCÚŒŞËr
::
	$MakeAùiv©eReque¡
Ğ
NVMašReque¡
 *
Œigg”Reque¡
 )

967 
NVMašReque¡
 *
aùiv©eReque¡
 = 
Ãw
 
	`NVMašReque¡
( );

969 
aùiv©eReque¡
->
ty³
 = 
ACTIVATE
;

970 
aùiv©eReque¡
->
issueCyşe
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
();

971 
aùiv©eReque¡
->
add»ss
 = 
Œigg”Reque¡
->address;

972 
aùiv©eReque¡
->
owÃr
 = 
this
;

974  
aùiv©eReque¡
;

975 
	}
}

977 
NVMašReque¡
 *
	gMemÜyCÚŒŞËr
::
	$MakeAùiv©eReque¡
ĞcÚ¡ 
ncouÁ”_t
 
row
,

978 cÚ¡ 
ncouÁ”_t
 
cŞ
,

979 cÚ¡ 
ncouÁ”_t
 
bªk
,

980 cÚ¡ 
ncouÁ”_t
 
¿nk
,

981 cÚ¡ 
ncouÁ”_t
 
sub¬¿y
 )

983 
NVMašReque¡
 *
aùiv©eReque¡
 = 
Ãw
 
	`NVMašReque¡
( );

985 
aùiv©eReque¡
->
ty³
 = 
ACTIVATE
;

986 
ncouÁ”_t
 
aùAddr
 = 
	`G‘Decod”
Ğ)->
	`Rev”£T¿n¦©e
Ğ
row
, 
cŞ
, 
bªk
, 
¿nk
, 
id
, 
sub¬¿y
 );

987 
aùiv©eReque¡
->
add»ss
.
	`S‘PhysiÿlAdd»ss
Ğ
aùAddr
 );

988 
aùiv©eReque¡
->
add»ss
.
	`S‘T¿n¦©edAdd»ss
Ğ
row
, 
cŞ
, 
bªk
, 
¿nk
, 
id
, 
sub¬¿y
 );

989 
aùiv©eReque¡
->
issueCyşe
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
();

990 
aùiv©eReque¡
->
owÃr
 = 
this
;

992  
aùiv©eReque¡
;

993 
	}
}

995 
NVMašReque¡
 *
	gMemÜyCÚŒŞËr
::
	$MakeP»ch¬geReque¡
Ğ
NVMašReque¡
 *
Œigg”Reque¡
 )

997 
NVMašReque¡
 *
´ech¬geReque¡
 = 
Ãw
 
	`NVMašReque¡
( );

999 
´ech¬geReque¡
->
ty³
 = 
PRECHARGE
;

1000 
´ech¬geReque¡
->
issueCyşe
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
();

1001 
´ech¬geReque¡
->
add»ss
 = 
Œigg”Reque¡
->address;

1002 
´ech¬geReque¡
->
owÃr
 = 
this
;

1004  
´ech¬geReque¡
;

1005 
	}
}

1007 
NVMašReque¡
 *
	gMemÜyCÚŒŞËr
::
	$MakeP»ch¬geReque¡
ĞcÚ¡ 
ncouÁ”_t
 
row
,

1008 cÚ¡ 
ncouÁ”_t
 
cŞ
,

1009 cÚ¡ 
ncouÁ”_t
 
bªk
,

1010 cÚ¡ 
ncouÁ”_t
 
¿nk
,

1011 cÚ¡ 
ncouÁ”_t
 
sub¬¿y
 )

1013 
NVMašReque¡
 *
´ech¬geReque¡
 = 
Ãw
 
	`NVMašReque¡
( );

1015 
´ech¬geReque¡
->
ty³
 = 
PRECHARGE
;

1016 
ncouÁ”_t
 
´eAddr
 = 
	`G‘Decod”
Ğ)->
	`Rev”£T¿n¦©e
Ğ
row
, 
cŞ
, 
bªk
, 
¿nk
, 
id
, 
sub¬¿y
 );

1017 
´ech¬geReque¡
->
add»ss
.
	`S‘PhysiÿlAdd»ss
Ğ
´eAddr
 );

1018 
´ech¬geReque¡
->
add»ss
.
	`S‘T¿n¦©edAdd»ss
Ğ
row
, 
cŞ
, 
bªk
, 
¿nk
, 
id
, 
sub¬¿y
 );

1019 
´ech¬geReque¡
->
issueCyşe
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
();

1020 
´ech¬geReque¡
->
owÃr
 = 
this
;

1022  
´ech¬geReque¡
;

1023 
	}
}

1025 
NVMašReque¡
 *
	gMemÜyCÚŒŞËr
::
	$MakeP»ch¬geAÎReque¡
Ğ
NVMašReque¡
 *
Œigg”Reque¡
 )

1027 
NVMašReque¡
 *
´ech¬geAÎReque¡
 = 
Ãw
 
	`NVMašReque¡
( );

1029 
´ech¬geAÎReque¡
->
ty³
 = 
PRECHARGE_ALL
;

1030 
´ech¬geAÎReque¡
->
issueCyşe
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
();

1031 
´ech¬geAÎReque¡
->
add»ss
 = 
Œigg”Reque¡
->address;

1032 
´ech¬geAÎReque¡
->
owÃr
 = 
this
;

1034  
´ech¬geAÎReque¡
;

1035 
	}
}

1037 
NVMašReque¡
 *
	gMemÜyCÚŒŞËr
::
	$MakeP»ch¬geAÎReque¡
ĞcÚ¡ 
ncouÁ”_t
 
row
,

1038 cÚ¡ 
ncouÁ”_t
 
cŞ
,

1039 cÚ¡ 
ncouÁ”_t
 
bªk
,

1040 cÚ¡ 
ncouÁ”_t
 
¿nk
,

1041 cÚ¡ 
ncouÁ”_t
 
sub¬¿y
 )

1043 
NVMašReque¡
 *
´ech¬geAÎReque¡
 = 
Ãw
 
	`NVMašReque¡
( );

1045 
´ech¬geAÎReque¡
->
ty³
 = 
PRECHARGE_ALL
;

1046 
ncouÁ”_t
 
´eAddr
 = 
	`G‘Decod”
Ğ)->
	`Rev”£T¿n¦©e
Ğ
row
, 
cŞ
, 
bªk
, 
¿nk
, 
id
, 
sub¬¿y
 );

1047 
´ech¬geAÎReque¡
->
add»ss
.
	`S‘PhysiÿlAdd»ss
Ğ
´eAddr
 );

1048 
´ech¬geAÎReque¡
->
add»ss
.
	`S‘T¿n¦©edAdd»ss
Ğ
row
, 
cŞ
, 
bªk
, 
¿nk
, 
id
, 
sub¬¿y
 );

1049 
´ech¬geAÎReque¡
->
issueCyşe
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
();

1050 
´ech¬geAÎReque¡
->
owÃr
 = 
this
;

1052  
´ech¬geAÎReque¡
;

1053 
	}
}

1055 
NVMašReque¡
 *
	gMemÜyCÚŒŞËr
::
	$MakeIm¶ic™P»ch¬geReque¡
Ğ
NVMašReque¡
 *
Œigg”Reque¡
 )

1057 ifĞ
Œigg”Reque¡
->
ty³
 =ğ
READ
 )

1058 
Œigg”Reque¡
->
ty³
 = 
READ_PRECHARGE
;

1059 ifĞ
Œigg”Reque¡
->
ty³
 =ğ
WRITE
 )

1060 
Œigg”Reque¡
->
ty³
 = 
WRITE_PRECHARGE
;

1062 
Œigg”Reque¡
->
issueCyşe
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
();

1064  
Œigg”Reque¡
;

1065 
	}
}

1067 
NVMašReque¡
 *
	gMemÜyCÚŒŞËr
::
	$MakeReäeshReque¡
ĞcÚ¡ 
ncouÁ”_t
 
row
,

1068 cÚ¡ 
ncouÁ”_t
 
cŞ
,

1069 cÚ¡ 
ncouÁ”_t
 
bªk
,

1070 cÚ¡ 
ncouÁ”_t
 
¿nk
,

1071 cÚ¡ 
ncouÁ”_t
 
sub¬¿y
 )

1073 
NVMašReque¡
 *
»äeshReque¡
 = 
Ãw
 
	`NVMašReque¡
( );

1075 
»äeshReque¡
->
ty³
 = 
REFRESH
;

1077 
ncouÁ”_t
 
´eAddr
 = 
	`G‘Decod”
Ğ)->
	`Rev”£T¿n¦©e
Ğ
row
, 
cŞ
, 
bªk
, 
¿nk
, 
id
, 
sub¬¿y
 );

1078 
»äeshReque¡
->
add»ss
.
	`S‘PhysiÿlAdd»ss
Ğ
´eAddr
 );

1079 
»äeshReque¡
->
add»ss
.
	`S‘T¿n¦©edAdd»ss
Ğ
row
, 
cŞ
, 
bªk
, 
¿nk
, 
id
, 
sub¬¿y
 );

1080 
»äeshReque¡
->
issueCyşe
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
();

1081 
»äeshReque¡
->
owÃr
 = 
this
;

1083  
»äeshReque¡
;

1084 
	}
}

1086 
NVMašReque¡
 *
	gMemÜyCÚŒŞËr
::
	$MakePow”downReque¡
Ğ
OpTy³
 
pdOp
,

1087 cÚ¡ 
ncouÁ”_t
 
¿nk
 )

1089 
NVMašReque¡
 *
pow”downReque¡
 = 
Ãw
 
	`NVMašReque¡
( );

1091 
pow”downReque¡
->
ty³
 = 
pdOp
;

1092 
ncouÁ”_t
 
pdAddr
 = 
	`G‘Decod”
Ğ)->
	`Rev”£T¿n¦©e
Ğ0, 0, 0, 
¿nk
, 
id
, 0 );

1093 
pow”downReque¡
->
add»ss
.
	`S‘PhysiÿlAdd»ss
Ğ
pdAddr
 );

1094 
pow”downReque¡
->
add»ss
.
	`S‘T¿n¦©edAdd»ss
Ğ0, 0, 0, 
¿nk
, 
id
, 0 );

1095 
pow”downReque¡
->
issueCyşe
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
();

1096 
pow”downReque¡
->
owÃr
 = 
this
;

1098  
pow”downReque¡
;

1099 
	}
}

1101 
NVMašReque¡
 *
	gMemÜyCÚŒŞËr
::
	$MakePow”upReque¡
ĞcÚ¡ 
ncouÁ”_t
 
¿nk
 )

1103 
NVMašReque¡
 *
pow”upReque¡
 = 
Ãw
 
	`NVMašReque¡
( );

1105 
pow”upReque¡
->
ty³
 = 
POWERUP
;

1106 
ncouÁ”_t
 
puAddr
 = 
	`G‘Decod”
Ğ)->
	`Rev”£T¿n¦©e
Ğ0, 0, 0, 
¿nk
, 
id
, 0 );

1107 
pow”upReque¡
->
add»ss
.
	`S‘PhysiÿlAdd»ss
Ğ
puAddr
 );

1108 
pow”upReque¡
->
add»ss
.
	`S‘T¿n¦©edAdd»ss
Ğ0, 0, 0, 
¿nk
, 
id
, 0 );

1109 
pow”upReque¡
->
issueCyşe
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
();

1110 
pow”upReque¡
->
owÃr
 = 
this
;

1112  
pow”upReque¡
;

1113 
	}
}

1115 
boŞ
 
	gMemÜyCÚŒŞËr
::
IsLa¡Reque¡
Ğ
¡d
::
li¡
<
NVMašReque¡
 *>& 
Œª§ùiÚQueue
,

1116 
NVMašReque¡
 *
»que¡
 )

1118 
boŞ
 
	grv
 = 
Œue
;

1120 ifĞ
	gp
->
	gClo£Page
 == 0 )

1122 
rv
 = 
çl£
;

1124 ifĞ
	gp
->
	gClo£Page
 == 1 )

1126 
ncouÁ”_t
 
mRªk
, 
mBªk
, 
mRow
, 
mSubA¼ay
;

1127 
	g»que¡
->
	gadd»ss
.
G‘T¿n¦©edAdd»ss
Ğ&
mRow
, 
NULL
, &
mBªk
, &
mRªk
, NULL, &
mSubA¼ay
 );

1128 
	g¡d
::
li¡
<
NVMašReque¡
 *>::
™”©Ü
 
™
;

1130  
	g™
 = 
Œª§ùiÚQueue
.
begš
(); iˆ!ğŒª§ùiÚQueue.
’d
(); it++ )

1132 
ncouÁ”_t
 
	g¿nk
, 
	gbªk
, 
	grow
, 
	gsub¬¿y
;

1134 (*
	g™
)->
	gadd»ss
.
G‘T¿n¦©edAdd»ss
Ğ&
row
, 
NULL
, &
bªk
, &
¿nk
, NULL, &
sub¬¿y
 );

1137 ifĞ
	g¿nk
 =ğ
mRªk
 && 
bªk
 =ğ
mBªk
 && 
row
 =ğ
mRow
 && 
sub¬¿y
 =ğ
mSubA¼ay
 )

1139 
rv
 = 
çl£
;

1145  
	grv
;

1148 
boŞ
 
	gMemÜyCÚŒŞËr
::
FšdSrvedReque¡
Ğ
¡d
::
li¡
<
NVMašReque¡
 *>& 
Œª§ùiÚQueue
,

1149 
NVMašReque¡
 **
¡¬vedReque¡
 )

1151 
DummyP»diÿ‹
 
	g´ed
;

1153  
FšdSrvedReque¡
Ğ
Œª§ùiÚQueue
, 
¡¬vedReque¡
, 
´ed
 );

1156 
boŞ
 
	gMemÜyCÚŒŞËr
::
FšdSrvedReque¡
Ğ
¡d
::
li¡
<
NVMašReque¡
 *>& 
Œª§ùiÚQueue
,

1157 
NVMašReque¡
 **
¡¬vedReque¡
,

1158 
SchedulšgP»diÿ‹
& 
´ed
 )

1160 
boŞ
 
	grv
 = 
çl£
;

1161 
	g¡d
::
li¡
<
NVMašReque¡
 *>::
™”©Ü
 
™
;

1163 *
	g¡¬vedReque¡
 = 
NULL
;

1165  
	g™
 = 
Œª§ùiÚQueue
.
begš
(); iˆ!ğŒª§ùiÚQueue.
’d
(); it++ )

1167 
ncouÁ”_t
 
	g¿nk
, 
	gbªk
, 
	grow
, 
	gsub¬¿y
, 
	gcŞ
;

1168 
ncouÁ”_t
 
	gqueueId
 = 
G‘CommªdQueueId
Ğ(*
™
)->
add»ss
 );

1170 ifĞ!
	gcommªdQueues
[
queueId
].
em±y
() ) ;

1172 (*
	g™
)->
	gadd»ss
.
G‘T¿n¦©edAdd»ss
Ğ&
row
, &
cŞ
, &
bªk
, &
¿nk
, 
NULL
, &
sub¬¿y
 );

1175 
ncouÁ”_t
 
	gmuxLev–
 = 
¡©ic_ÿ¡
<ncouÁ”_t>(
cŞ
 / 
p
->
RBSize
);

1177 ifĞ
	gaùiv©eQueued
[
¿nk
][
bªk
]

1178 && ( !
	gaùiveSubA¼ay
[
¿nk
][
bªk
][
sub¬¿y
]

1179 || 
	gefãùiveRow
[
¿nk
][
bªk
][
sub¬¿y
] !ğ
row


1180 || 
efãùiveMuxedRow
[
¿nk
][
bªk
][
sub¬¿y
] !ğ
muxLev–
 )

1181 && !
bªkN“dReäesh
[
¿nk
][
bªk
]

1182 && !
»äeshQueued
[
¿nk
][
bªk
]

1183 && 
¡¬v©iÚCouÁ”
[
¿nk
][
bªk
][
sub¬¿y
]

1184 >ğ
¡¬v©iÚTh»shŞd


1185 && (*
™
)->
¬riv®Cyşe
 !ğ
G‘Ev’tQueue
()->
G‘Cu¼’tCyşe
()

1186 && 
commªdQueues
[
queueId
].
em±y
()

1187 && 
´ed
Ğ(*
™
) ) )

1189 *
¡¬vedReque¡
 = (*
™
);

1190 
	gŒª§ùiÚQueue
.
”a£
Ğ
™
 );

1200 ifĞ
IsLa¡Reque¡
Ğ
Œª§ùiÚQueue
, (*
¡¬vedReque¡
) ) )

1201 (*
	g¡¬vedReque¡
)->
	gæags
 |ğ
NVMašReque¡
::
FLAG_LAST_REQUEST
;

1203 
	grv
 = 
Œue
;

1208  
	grv
;

1214 
boŞ
 
	gMemÜyCÚŒŞËr
::
FšdCachedAdd»ss
Ğ
¡d
::
li¡
<
NVMašReque¡
 *>& 
Œª§ùiÚQueue
,

1215 
NVMašReque¡
 **
acûssibËReque¡
 )

1217 
DummyP»diÿ‹
 
	g´ed
;

1219  
FšdCachedAdd»ss
Ğ
Œª§ùiÚQueue
, 
acûssibËReque¡
, 
´ed
 );

1225 
boŞ
 
	gMemÜyCÚŒŞËr
::
FšdCachedAdd»ss
Ğ
¡d
::
li¡
<
NVMašReque¡
 *>& 
Œª§ùiÚQueue
,

1226 
NVMašReque¡
 **
acûssibËReque¡
,

1227 
SchedulšgP»diÿ‹
& 
´ed
 )

1229 
boŞ
 
	grv
 = 
çl£
;

1230 
	g¡d
::
li¡
<
NVMašReque¡
 *>::
™”©Ü
 
™
;

1232 *
	gacûssibËReque¡
 = 
NULL
;

1234  
	g™
 = 
Œª§ùiÚQueue
.
begš
(); iˆ!ğŒª§ùiÚQueue.
’d
(); it++ )

1236 
ncouÁ”_t
 
	gqueueId
 = 
G‘CommªdQueueId
Ğ(*
™
)->
add»ss
 );

1237 
NVMašReque¡
 *
	gÿchedReque¡
 = 
MakeCachedReque¡
Ğ(*
™
) );

1239 ifĞ
	gcommªdQueues
[
queueId
].
em±y
()

1240 && 
G‘Chd
Ğ)->
IsIssuabË
Ğ
ÿchedReque¡
 )

1241 && (*
	g™
)->
	g¬riv®Cyşe
 !ğ
G‘Ev’tQueue
()->
G‘Cu¼’tCyşe
()

1242 && 
´ed
Ğ(*
™
 ) ) )

1248 *
acûssibËReque¡
 = (*
™
);

1249 
	gŒª§ùiÚQueue
.
”a£
Ğ
™
 );

1251 
d–‘e
 
	gÿchedReque¡
;

1253 
	grv
 = 
Œue
;

1257 
d–‘e
 
	gÿchedReque¡
;

1260  
	grv
;

1263 
boŞ
 
	gMemÜyCÚŒŞËr
::
FšdWr™eSÎedR—d
Ğ
¡d
::
li¡
<
NVMašReque¡
 *>& 
Œª§ùiÚQueue
,

1264 
NVMašReque¡
 **
h™Reque¡
 )

1266 
DummyP»diÿ‹
 
	g´ed
;

1268  
FšdWr™eSÎedR—d
Ğ
Œª§ùiÚQueue
, 
h™Reque¡
, 
´ed
 );

1271 
boŞ
 
	gMemÜyCÚŒŞËr
::
FšdWr™eSÎedR—d
Ğ
¡d
::
li¡
<
NVMašReque¡
 *>& 
Œª§ùiÚQueue
,

1272 
NVMašReque¡
 **
h™Reque¡
, 
SchedulšgP»diÿ‹
& 
´ed
 )

1274 
boŞ
 
	grv
 = 
çl£
;

1275 
	g¡d
::
li¡
<
NVMašReque¡
 *>::
™”©Ü
 
™
;

1277 *
	gh™Reque¡
 = 
NULL
;

1279 ifĞ!
	gp
->
	gWr™ePausšg
 )

1280  
	gçl£
;

1282  
	g™
 = 
Œª§ùiÚQueue
.
begš
(); iˆ!ğŒª§ùiÚQueue.
’d
(); it++ )

1284 ifĞ(*
	g™
)->
	gty³
 !ğ
READ
 )

1287 
ncouÁ”_t
 
	g¿nk
, 
	gbªk
, 
	grow
, 
	gsub¬¿y
, 
	gcŞ
;

1288 
ncouÁ”_t
 
	gqueueId
 = 
G‘CommªdQueueId
Ğ(*
™
)->
add»ss
 );

1290 ifĞ!
	gcommªdQueues
[
queueId
].
em±y
() ) ;

1292 (*
	g™
)->
	gadd»ss
.
G‘T¿n¦©edAdd»ss
Ğ&
row
, &
cŞ
, &
bªk
, &
¿nk
, 
NULL
, &
sub¬¿y
 );

1295 
SubA¼ay
 *
	gwr™šgA¼ay
 = 
FšdChd
Ğ(*
™
), SubArray );

1298 ifĞ
	gwr™šgA¼ay
 =ğ
NULL
 )

1299  
çl£
;

1306 
NVMašReque¡
 *
	g‹¡Aùiv©e
 = 
MakeAùiv©eReque¡
Ğ(*
™
) );

1307 
	g‹¡Aùiv©e
->
	gæags
 |ğ
NVMašReque¡
::
FLAG_PRIORITY
;

1309 ifĞ!
	gbªkN“dReäesh
[
¿nk
][
bªk
]

1310 && !
	g»äeshQueued
[
¿nk
][
bªk
]

1311 && 
	gwr™šgA¼ay
->
IsWr™šg
( )

1312 && ( 
G‘Chd
Ğ)->
IsIssuabË
Ğ(*
™
 ) )

1313 || 
G‘Chd
Ğ)->
IsIssuabË
Ğ
‹¡Aùiv©e
 ) )

1314 && (*
	g™
)->
	g¬riv®Cyşe
 !ğ
G‘Ev’tQueue
()->
G‘Cu¼’tCyşe
()

1315 && 
commªdQueues
[
queueId
].
em±y
()

1316 && 
´ed
Ğ(*
™
) ) )

1318 ifĞ!
wr™šgA¼ay
->
B‘w“nWr™eI‹¿tiÚs
Ğè&& 
p
->
·u£Mode
 =ğ
Pau£Mode_NÜm®
 )

1320 
d–‘e
 
‹¡Aùiv©e
;

1323 
	grv
 = 
Œue
;

1327 *
	gh™Reque¡
 = (*
™
);

1328 
	gŒª§ùiÚQueue
.
”a£
Ğ
™
 );

1330 
d–‘e
 
	g‹¡Aùiv©e
;

1340 ifĞ
IsLa¡Reque¡
Ğ
Œª§ùiÚQueue
, (*
h™Reque¡
) ) )

1341 (*
	gh™Reque¡
)->
	gæags
 |ğ
NVMašReque¡
::
FLAG_LAST_REQUEST
;

1343 
	grv
 = 
Œue
;

1348 
d–‘e
 
	g‹¡Aùiv©e
;

1351  
	grv
;

1354 
boŞ
 
	gMemÜyCÚŒŞËr
::
FšdRowBufãrH™
Ğ
¡d
::
li¡
<
NVMašReque¡
 *>& 
Œª§ùiÚQueue
,

1355 
NVMašReque¡
 **
h™Reque¡
 )

1357 
DummyP»diÿ‹
 
	g´ed
;

1359  
FšdRowBufãrH™
Ğ
Œª§ùiÚQueue
, 
h™Reque¡
, 
´ed
 );

1362 
boŞ
 
	gMemÜyCÚŒŞËr
::
FšdRowBufãrH™
Ğ
¡d
::
li¡
<
NVMašReque¡
 *>& 
Œª§ùiÚQueue
,

1363 
NVMašReque¡
 **
h™Reque¡
, 
SchedulšgP»diÿ‹
& 
´ed
 )

1365 
boŞ
 
	grv
 = 
çl£
;

1366 
	g¡d
::
li¡
<
NVMašReque¡
 *>::
™”©Ü
 
™
;

1368 *
	gh™Reque¡
 = 
NULL
;

1370  
	g™
 = 
Œª§ùiÚQueue
.
begš
(); iˆ!ğŒª§ùiÚQueue.
’d
(); it++ )

1372 
ncouÁ”_t
 
	g¿nk
, 
	gbªk
, 
	grow
, 
	gsub¬¿y
, 
	gcŞ
;

1373 
ncouÁ”_t
 
	gqueueId
 = 
G‘CommªdQueueId
Ğ(*
™
)->
add»ss
 );

1375 ifĞ!
	gcommªdQueues
[
queueId
].
em±y
() ) ;

1377 (*
	g™
)->
	gadd»ss
.
G‘T¿n¦©edAdd»ss
Ğ&
row
, &
cŞ
, &
bªk
, &
¿nk
, 
NULL
, &
sub¬¿y
 );

1380 
ncouÁ”_t
 
	gmuxLev–
 = 
¡©ic_ÿ¡
<ncouÁ”_t>(
cŞ
 / 
p
->
RBSize
);

1382 ifĞ
	gaùiv©eQueued
[
¿nk
][
bªk
]

1383 && 
	gaùiveSubA¼ay
[
¿nk
][
bªk
][
sub¬¿y
]

1384 && 
	gefãùiveRow
[
¿nk
][
bªk
][
sub¬¿y
] =ğ
row


1385 && 
efãùiveMuxedRow
[
¿nk
][
bªk
][
sub¬¿y
] =ğ
muxLev–


1386 && !
bªkN“dReäesh
[
¿nk
][
bªk
]

1387 && !
»äeshQueued
[
¿nk
][
bªk
]

1388 && (*
™
)->
¬riv®Cyşe
 !ğ
G‘Ev’tQueue
()->
G‘Cu¼’tCyşe
()

1389 && 
commªdQueues
[
queueId
].
em±y
( )

1390 && 
´ed
Ğ(*
™
) ) )

1392 *
h™Reque¡
 = (*
™
);

1393 
	gŒª§ùiÚQueue
.
”a£
Ğ
™
 );

1403 ifĞ
IsLa¡Reque¡
Ğ
Œª§ùiÚQueue
, (*
h™Reque¡
) ) )

1404 (*
	gh™Reque¡
)->
	gæags
 |ğ
NVMašReque¡
::
FLAG_LAST_REQUEST
;

1406 
	grv
 = 
Œue
;

1412  
	grv
;

1415 
boŞ
 
	gMemÜyCÚŒŞËr
::
FšdOlde¡R—dyReque¡
Ğ
¡d
::
li¡
<
NVMašReque¡
 *>& 
Œª§ùiÚQueue
,

1416 
NVMašReque¡
 **
Şde¡Reque¡
 )

1418 
DummyP»diÿ‹
 
	g´ed
;

1420  
FšdOlde¡R—dyReque¡
Ğ
Œª§ùiÚQueue
, 
Şde¡Reque¡
, 
´ed
 );

1423 
boŞ
 
	gMemÜyCÚŒŞËr
::
FšdOlde¡R—dyReque¡
Ğ
¡d
::
li¡
<
NVMašReque¡
 *>& 
Œª§ùiÚQueue
,

1424 
NVMašReque¡
 **
Şde¡Reque¡
,

1425 
SchedulšgP»diÿ‹
& 
´ed
 )

1427 
boŞ
 
	grv
 = 
çl£
;

1428 
	g¡d
::
li¡
<
NVMašReque¡
 *>::
™”©Ü
 
™
;

1430 *
	gŞde¡Reque¡
 = 
NULL
;

1432  
	g™
 = 
Œª§ùiÚQueue
.
begš
(); iˆ!ğŒª§ùiÚQueue.
’d
(); it++ )

1434 
ncouÁ”_t
 
	g¿nk
, 
	gbªk
;

1435 
ncouÁ”_t
 
	gqueueId
 = 
G‘CommªdQueueId
Ğ(*
™
)->
add»ss
 );

1437 ifĞ!
	gcommªdQueues
[
queueId
].
em±y
() ) ;

1439 (*
	g™
)->
	gadd»ss
.
G‘T¿n¦©edAdd»ss
Ğ
NULL
, NULL, &
bªk
, &
¿nk
, NULL, NULL );

1441 ifĞ
	gaùiv©eQueued
[
¿nk
][
bªk
]

1442 && !
	gbªkN“dReäesh
[
¿nk
][
bªk
]

1443 && !
	g»äeshQueued
[
¿nk
][
bªk
]

1444 && 
	gcommªdQueues
[
queueId
].
em±y
()

1445 && (*
	g™
)->
	g¬riv®Cyşe
 !ğ
G‘Ev’tQueue
()->
G‘Cu¼’tCyşe
()

1446 && 
´ed
Ğ(*
™
) ) )

1448 *
Şde¡Reque¡
 = (*
™
);

1449 
	gŒª§ùiÚQueue
.
”a£
Ğ
™
 );

1459 ifĞ
IsLa¡Reque¡
Ğ
Œª§ùiÚQueue
, (*
Şde¡Reque¡
) ) )

1460 (*
	gŞde¡Reque¡
)->
	gæags
 |ğ
NVMašReque¡
::
FLAG_LAST_REQUEST
;

1462 
	grv
 = 
Œue
;

1467  
	grv
;

1470 
boŞ
 
	gMemÜyCÚŒŞËr
::
FšdClo£dBªkReque¡
Ğ
¡d
::
li¡
<
NVMašReque¡
 *>& 
Œª§ùiÚQueue
,

1471 
NVMašReque¡
 **
şo£dReque¡
 )

1473 
DummyP»diÿ‹
 
	g´ed
;

1475  
FšdClo£dBªkReque¡
Ğ
Œª§ùiÚQueue
, 
şo£dReque¡
, 
´ed
 );

1478 
boŞ
 
	gMemÜyCÚŒŞËr
::
FšdClo£dBªkReque¡
Ğ
¡d
::
li¡
<
NVMašReque¡
 *>& 
Œª§ùiÚQueue
,

1479 
NVMašReque¡
 **
şo£dReque¡
,

1480 
SchedulšgP»diÿ‹
& 
´ed
 )

1482 
boŞ
 
	grv
 = 
çl£
;

1483 
	g¡d
::
li¡
<
NVMašReque¡
 *>::
™”©Ü
 
™
;

1485 *
	gşo£dReque¡
 = 
NULL
;

1487  
	g™
 = 
Œª§ùiÚQueue
.
begš
(); iˆ!ğŒª§ùiÚQueue.
’d
(); it++ )

1489 
ncouÁ”_t
 
	g¿nk
, 
	gbªk
;

1490 
ncouÁ”_t
 
	gqueueId
 = 
G‘CommªdQueueId
Ğ(*
™
)->
add»ss
 );

1492 ifĞ!
	gcommªdQueues
[
queueId
].
em±y
() ) ;

1494 (*
	g™
)->
	gadd»ss
.
G‘T¿n¦©edAdd»ss
Ğ
NULL
, NULL, &
bªk
, &
¿nk
, NULL, NULL );

1496 ifĞ!
	gaùiv©eQueued
[
¿nk
][
bªk
]

1497 && !
	gbªkN“dReäesh
[
¿nk
][
bªk
]

1498 && !
	g»äeshQueued
[
¿nk
][
bªk
]

1499 && 
	gcommªdQueues
[
queueId
].
em±y
()

1500 && (*
	g™
)->
	g¬riv®Cyşe
 !ğ
G‘Ev’tQueue
()->
G‘Cu¼’tCyşe
()

1501 && 
´ed
Ğ(*
™
) ) )

1503 *
şo£dReque¡
 = (*
™
);

1504 
	gŒª§ùiÚQueue
.
”a£
Ğ
™
 );

1514 ifĞ
IsLa¡Reque¡
Ğ
Œª§ùiÚQueue
, (*
şo£dReque¡
) ) )

1515 (*
	gşo£dReque¡
)->
	gæags
 |ğ
NVMašReque¡
::
FLAG_LAST_REQUEST
;

1517 
	grv
 = 
Œue
;

1522  
	grv
;

1525 
boŞ
 
	gMemÜyCÚŒŞËr
::
DummyP»diÿ‹
::
	$İ”©Ü
(èĞ
NVMašReque¡
* )

1527  
Œue
;

1528 
	}
}

1535 
boŞ
 
	gMemÜyCÚŒŞËr
::
	$IssueMemÜyCommªds
Ğ
NVMašReque¡
 *
»q
 )

1537 
boŞ
 
rv
 = 
çl£
;

1538 
ncouÁ”_t
 
¿nk
, 
bªk
, 
row
, 
sub¬¿y
, 
cŞ
;

1540 
»q
->
add»ss
.
	`G‘T¿n¦©edAdd»ss
Ğ&
row
, &
cŞ
, &
bªk
, &
¿nk
, 
NULL
, &
sub¬¿y
 );

1542 
SubA¼ay
 *
wr™šgA¼ay
 = 
	`FšdChd
Ğ
»q
, SubArray );

1544 
ncouÁ”_t
 
muxLev–
 = 
¡©ic_ÿ¡
<ncouÁ”_t>(
cŞ
 / 
p
->
RBSize
);

1545 
ncouÁ”_t
 
queueId
 = 
	`G‘CommªdQueueId
Ğ
»q
->
add»ss
 );

1552 
FaR—sÚ
 
»asÚ
;

1553 
NVMašReque¡
 *
ÿchedReque¡
 = 
	`MakeCachedReque¡
Ğ
»q
 );

1555 ifĞ
	`G‘Chd
Ğ)->
	`IsIssuabË
Ğ
ÿchedReque¡
, &
»asÚ
 ) )

1558 iàĞ!
aùiv©eQueued
[
¿nk
][
bªk
]

1559 || !
aùiveSubA¼ay
[
¿nk
][
bªk
][
sub¬¿y
]

1560 || 
efãùiveRow
[
¿nk
][
bªk
][
sub¬¿y
] !ğ
row


1561 || 
efãùiveMuxedRow
[
¿nk
][
bªk
][
sub¬¿y
] !ğ
muxLev–
 )

1563 
»q
->
issueCyşe
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
();

1566 
commªdQueues
[
queueId
].
	`push_back
Ğ
»q
 );

1568 
d–‘e
 
ÿchedReque¡
;

1570  
Œue
;

1574 
d–‘e
 
ÿchedReque¡
;

1579 
d–‘e
 
ÿchedReque¡
;

1582 ifĞ!
aùiv©eQueued
[
¿nk
][
bªk
] && 
commªdQueues
[
queueId
].
	`em±y
() )

1585 
aùiv©eQueued
[
¿nk
][
bªk
] = 
Œue
;

1586 
aùiveSubA¼ay
[
¿nk
][
bªk
][
sub¬¿y
] = 
Œue
;

1587 
efãùiveRow
[
¿nk
][
bªk
][
sub¬¿y
] = 
row
;

1588 
efãùiveMuxedRow
[
¿nk
][
bªk
][
sub¬¿y
] = 
muxLev–
;

1589 
¡¬v©iÚCouÁ”
[
¿nk
][
bªk
][
sub¬¿y
] = 0;

1591 
»q
->
issueCyşe
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
();

1593 
NVMašReque¡
 *
aùReque¡
 = 
	`MakeAùiv©eReque¡
Ğ
»q
 );

1594 
aùReque¡
->
æags
 |ğ(
wr™šgA¼ay
 !ğ
NULL
 && wr™šgA¼ay->
	`IsWr™šg
Ğ)è? 
NVMašReque¡
::
FLAG_PRIORITY
 : 0;

1595 
commªdQueues
[
queueId
].
	`push_back
Ğ
aùReque¡
 );

1604 ifĞ
»q
->
æags
 & 
NVMašReque¡
::
FLAG_LAST_REQUEST
 && 
p
->
U£P»ch¬ge
 )

1606 
commªdQueues
[
queueId
].
	`push_back
Ğ
	`MakeIm¶ic™P»ch¬geReque¡
Ğ
»q
 ) );

1607 
aùiveSubA¼ay
[
¿nk
][
bªk
][
sub¬¿y
] = 
çl£
;

1608 
efãùiveRow
[
¿nk
][
bªk
][
sub¬¿y
] = 
p
->
ROWS
;

1609 
efãùiveMuxedRow
[
¿nk
][
bªk
][
sub¬¿y
] = 
p
->
ROWS
;

1610 
aùiv©eQueued
[
¿nk
][
bªk
] = 
çl£
;

1614 
commªdQueues
[
queueId
].
	`push_back
Ğ
»q
 );

1617 
rv
 = 
Œue
;

1619 ifĞ
aùiv©eQueued
[
¿nk
][
bªk
]

1620 && ( !
aùiveSubA¼ay
[
¿nk
][
bªk
][
sub¬¿y
]

1621 || 
efãùiveRow
[
¿nk
][
bªk
][
sub¬¿y
] !ğ
row


1622 || 
efãùiveMuxedRow
[
¿nk
][
bªk
][
sub¬¿y
] !ğ
muxLev–
 )

1623 && 
commªdQueues
[
queueId
].
	`em±y
() )

1626 
¡¬v©iÚCouÁ”
[
¿nk
][
bªk
][
sub¬¿y
] = 0;

1627 
aùiv©eQueued
[
¿nk
][
bªk
] = 
Œue
;

1629 
»q
->
issueCyşe
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
();

1631 ifĞ
aùiveSubA¼ay
[
¿nk
][
bªk
][
sub¬¿y
] && 
p
->
U£P»ch¬ge
 )

1633 
commªdQueues
[
queueId
].
	`push_back
(

1634 
	`MakeP»ch¬geReque¡
Ğ
efãùiveRow
[
¿nk
][
bªk
][
sub¬¿y
], 0, bank,„ank, subarray ) );

1637 
NVMašReque¡
 *
aùReque¡
 = 
	`MakeAùiv©eReque¡
Ğ
»q
 );

1638 
aùReque¡
->
æags
 |ğ(
wr™šgA¼ay
 !ğ
NULL
 && wr™šgA¼ay->
	`IsWr™šg
Ğ)è? 
NVMašReque¡
::
FLAG_PRIORITY
 : 0;

1639 
commªdQueues
[
queueId
].
	`push_back
Ğ
aùReque¡
 );

1640 
commªdQueues
[
queueId
].
	`push_back
Ğ
»q
 );

1641 
aùiveSubA¼ay
[
¿nk
][
bªk
][
sub¬¿y
] = 
Œue
;

1642 
efãùiveRow
[
¿nk
][
bªk
][
sub¬¿y
] = 
row
;

1643 
efãùiveMuxedRow
[
¿nk
][
bªk
][
sub¬¿y
] = 
muxLev–
;

1645 
rv
 = 
Œue
;

1647 ifĞ
aùiv©eQueued
[
¿nk
][
bªk
]

1648 && 
aùiveSubA¼ay
[
¿nk
][
bªk
][
sub¬¿y
]

1649 && 
efãùiveRow
[
¿nk
][
bªk
][
sub¬¿y
] =ğ
row


1650 && 
efãùiveMuxedRow
[
¿nk
][
bªk
][
sub¬¿y
] =ğ
muxLev–
 )

1652 
¡¬v©iÚCouÁ”
[
¿nk
][
bªk
][
sub¬¿y
]++;

1654 
»q
->
issueCyşe
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
();

1663 ifĞ
»q
->
æags
 & 
NVMašReque¡
::
FLAG_LAST_REQUEST
 && 
p
->
U£P»ch¬ge
 )

1666 
	`as£¹
Ğ
p
->
Clo£Page
 != 2 );

1668 
commªdQueues
[
queueId
].
	`push_back
Ğ
	`MakeIm¶ic™P»ch¬geReque¡
Ğ
»q
 ) );

1669 
aùiveSubA¼ay
[
¿nk
][
bªk
][
sub¬¿y
] = 
çl£
;

1670 
efãùiveRow
[
¿nk
][
bªk
][
sub¬¿y
] = 
p
->
ROWS
;

1671 
efãùiveMuxedRow
[
¿nk
][
bªk
][
sub¬¿y
] = 
p
->
ROWS
;

1673 
boŞ
 
idË
 = 
Œue
;

1674  
ncouÁ”_t
 
i
 = 0; i < 
subA¼ayNum
; i++ )

1676 ifĞ
aùiveSubA¼ay
[
¿nk
][
bªk
][
i
] =ğ
Œue
 )

1678 
idË
 = 
çl£
;

1683 ifĞ
idË
 )

1684 
aùiv©eQueued
[
¿nk
][
bªk
] = 
çl£
;

1688 
commªdQueues
[
queueId
].
	`push_back
Ğ
»q
 );

1691 
rv
 = 
Œue
;

1695 
rv
 = 
çl£
;

1699 ifĞ
rv
 =ğ
Œue
 )

1701 
	`ScheduËCommªdWake
( );

1704  
rv
;

1705 
	}
}

1707 
	gMemÜyCÚŒŞËr
::
	$CyşeCommªdQueues
( )

1709 ifĞ
p
->
U£LowPow”
 && !p->
Ev’tDriv’
 )

1711 
	`HªdËLowPow”
( );

1715 ifĞ
p
->
U£Reäesh
 && !p->
Ev’tDriv’
 )

1717 ifĞ
	`HªdËReäesh
( ) )

1725 ifĞ
p
->
Ev’tDriv’


1726 && 
hªdËdReäesh
 =ğ
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
() )

1731  
ncouÁ”_t
 
queueIdx
 = 0; queueIdx < 
commªdQueueCouÁ
; queueIdx++ )

1737 
ncouÁ”_t
 
queueId
 = (
curQueue
 + 
queueIdx
è% 
commªdQueueCouÁ
;

1738 
FaR—sÚ
 
ç
;

1740 ifĞ!
commªdQueues
[
queueId
].
	`em±y
( )

1741 && 
Ï¡IssueCyşe
 !ğ
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
()

1742 && 
	`G‘Chd
Ğ)->
	`IsIssuabË
Ğ
commªdQueues
[
queueId
].
	`©
Ğ0 ), &
ç
 ) )

1744 
NVMašReque¡
 *
queueH—d
 = 
commªdQueues
[
queueId
].
	`©
( 0 );

1746 *
debugSŒ—m
 << 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
() << " MemoryController: Issued„equestype "

1747 << 
queueH—d
->
ty³
 << " fÜ‡dd»s 0x" << 
¡d
::
hex


1748 << 
queueH—d
->
add»ss
.
	`G‘PhysiÿlAdd»ss
()

1749 << 
¡d
::
dec
 << " fÜ queu" << 
queueId
 << std::
’dl
;

1751 
	`G‘Chd
Ğ)->
	`IssueCommªd
Ğ
queueH—d
 );

1753 
queueH—d
->
æags
 |ğ
NVMašReque¡
::
FLAG_ISSUED
;

1755 ifĞ
queueH—d
->
ty³
 =ğ
REFRESH
 )

1756 
	`Re£tReäeshQueued
Ğ
queueH—d
->
add»ss
.
	`G‘Bªk
(),

1757 
queueH—d
->
add»ss
.
	`G‘Rªk
() );

1759 ifĞ
	`G‘Ev’tQueue
Ğ)->
	`G‘Cu¼’tCyşe
Ğè!ğ
Ï¡IssueCyşe
 )

1760 
Ï¡IssueCyşe
 = 
	`G‘Ev’tQueue
Ğ)->
	`G‘Cu¼’tCyşe
( );

1763 
ncyşe_t
 
ş—nupCyşe
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
() + 1;

1764 
boŞ
 
ş—nupScheduËd
 = 
	`G‘Ev’tQueue
()->
	`FšdC®lback
Ğ
this
,

1765 (
C®lbackPŒ
)&
MemÜyCÚŒŞËr
::
CËªupC®lback
,

1766 
ş—nupCyşe
, 
NULL
, 
ş—nupPriÜ™y
 );

1768 ifĞ!
ş—nupScheduËd
 )

1769 
	`G‘Ev’tQueue
Ğ)->
	`In£¹C®lback
Ğ
this
,

1770 (
C®lbackPŒ
)&
MemÜyCÚŒŞËr
::
CËªupC®lback
,

1771 
ş—nupCyşe
, 
NULL
, 
ş—nupPriÜ™y
 );

1774 ifĞ
p
->
Ev’tDriv’
 && 
commªdQueues
[
queueId
].
	`size
( ) == 1 )

1777 ifĞ
	`T¿n§ùiÚAvaabË
Ğ
queueId
 ) )

1779 
ncyşe_t
 
ÃxtWakeup
 = 
	`G‘Ev’tQueue
Ğ)->
	`G‘Cu¼’tCyşe
( ) + 1;

1781 
	`G‘Ev’tQueue
Ğ)->
	`In£¹Ev’t
Ğ
Ev’tCyşe
, 
this
, 
ÃxtWakeup
, 
NULL
, 
Œª§ùiÚQueuePriÜ™y
 );

1787 
	`MoveCu¼’tQueue
( );

1792 ifĞ!
commªdQueues
[
queueId
].
	`em±y
( ) )

1794 
NVMašReque¡
 *
queueH—d
 = 
commªdQueues
[
queueId
].
	`©
( 0 );

1796 ifĞĞ
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
(è- 
queueH—d
->
issueCyşe
 ) > 
p
->
D—dlockTim”
 )

1798 
ncouÁ”_t
 
row
, 
cŞ
, 
bªk
, 
¿nk
, 
chªÃl
, 
sub¬¿y
;

1799 
queueH—d
->
add»ss
.
	`G‘T¿n¦©edAdd»ss
Ğ&
row
, &
cŞ
, &
bªk
, &
¿nk
, &
chªÃl
, &
sub¬¿y
 );

1800 
¡d
::
cout
 << "NVMain Warning: Operation could‚ot be sento memory‡fter‡ very†ongime: "

1801 << 
¡d
::
’dl
;

1802 
¡d
::
cout
 << " Add»ss: 0x" << std::
hex


1803 << 
queueH—d
->
add»ss
.
	`G‘PhysiÿlAdd»ss
( )

1804 << 
¡d
::
dec
 << " @ Bªk " << 
bªk
 << ", Rªk " << 
¿nk
 << ", ChªÃÈ" << 
chªÃl


1805 << " Sub¬¿y " << 
sub¬¿y
 << " Row " << 
row
 << " CŞumÀ" << 
cŞ


1806 << ". Queuedime: " << 
queueH—d
->
¬riv®Cyşe


1807 << ". Issutime: " << 
queueH—d
->
issueCyşe


1808 << ". Cu¼’ˆtime: " << 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
() << ". Type: "

1809 << 
queueH—d
->
ty³
 << 
¡d
::
’dl
;

1812 #iâdeà
NDEBUG


1813 
	`¿i£
Ğ
SIGSTOP
 );

1815 
	`G‘Sts
Ğ)->
	`PrštAÎ
Ğ
¡d
::
û¼
 );

1816 
	`ex™
(1);

1820 
	}
}

1829 
ncouÁ”_t
 
	gMemÜyCÚŒŞËr
::
	$G‘CommªdQueueId
Ğ
NVMAdd»ss
 
addr
 )

1831 
ncouÁ”_t
 
queueId
 = 
¡d
::
num”ic_lim™s
<ncouÁ”_t>::
	`max
( );

1833 ifĞ
queueMod–
 =ğ
P”RªkQueues
 )

1836 
queueId
 = 
addr
.
	`G‘Rªk
( );

1838 ifĞ
queueMod–
 =ğ
P”BªkQueues
 )

1841 ifĞ
p
->
ScheduËScheme
 == 1 )

1844 
queueId
 = (
addr
.
	`G‘Bªk
Ğè* 
p
->
RANKS
 +‡ddr.
	`G‘Rªk
( ));

1846 ifĞ
p
->
ScheduËScheme
 == 2 )

1849 
queueId
 = (
addr
.
	`G‘Rªk
Ğè* 
p
->
BANKS
 +‡ddr.
	`G‘Bªk
( ));

1852 ifĞ
queueMod–
 =ğ
P”SubA¼ayQueues
 )

1855 
queueId
 = (
addr
.
	`G‘Rªk
Ğè* 
p
->
BANKS
 * 
subA¼ayNum
)

1856 + (
addr
.
	`G‘Bªk
Ğè* 
subA¼ayNum
è+‡ddr.
	`G‘SubA¼ay
( );

1859 
	`as£¹
Ğ
queueId
 < 
commªdQueueCouÁ
 );

1861  
queueId
;

1862 
	}
}

1864 
ncyşe_t
 
	gMemÜyCÚŒŞËr
::
	$NextIssuabË
Ğ
NVMašReque¡
 * )

1867 
ncyşe_t
 
ÃxtWakeup
 = 
¡d
::
num”ic_lim™s
<ncyşe_t>::
	`max
( );

1870  
ncouÁ”_t
 
¿nkIdx
 = 0;„ªkIdx < 
p
->
RANKS
;„ankIdx++ )

1872  
ncouÁ”_t
 
bªkIdx
 = 0; bªkIdx < 
p
->
BANKS
; bankIdx++ )

1875 
ncouÁ”_t
 
queueIdx
 = 
	`G‘CommªdQueueId
Ğ
	`NVMAdd»ss
Ğ0, 0, 
bªkIdx
, 
¿nkIdx
, 0, 0 ) );

1878 ifĞ
	`N“dReäesh
Ğ
bªkIdx
, 
¿nkIdx
 )

1879 && 
	`IsReäeshBªkQueueEm±y
Ğ
bªkIdx
, 
¿nkIdx
 ) )

1881 ifĞ
Ï¡IssueCyşe
 !ğ
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
() )

1882 
	`HªdËReäesh
( );

1884 
ÃxtWakeup
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
() + 1;

1887 ifĞ
commªdQueues
[
queueIdx
].
	`em±y
( ) )

1890 
NVMašReque¡
 *
queueH—d
 = 
commªdQueues
[
queueIdx
].
	`©
( 0 );

1896 
ÃxtWakeup
 = 
	`MIN
ĞÃxtWakeup, 
	`G‘Chd
Ğ)->
	`NextIssuabË
Ğ
queueH—d
 ) );

1900 ifĞ
ÃxtWakeup
 <ğ
	`G‘Ev’tQueue
Ğ)->
	`G‘Cu¼’tCyşe
( ) )

1901 
ÃxtWakeup
 = 
	`G‘Ev’tQueue
Ğ)->
	`G‘Cu¼’tCyşe
( ) + 1;

1903  
ÃxtWakeup
;

1904 
	}
}

1910 
boŞ
 
	gMemÜyCÚŒŞËr
::
	$RªkQueueEm±y
ĞcÚ¡ 
ncouÁ”_t
& 
¿nkId
 )

1912 
boŞ
 
rv
 = 
Œue
;

1914  
ncouÁ”_t
 
i
 = 0; i < 
p
->
BANKS
; i++ )

1916 
ncouÁ”_t
 
queueId
 = 
	`G‘CommªdQueueId
Ğ
	`NVMAdd»ss
Ğ0, 0, 
i
, 
¿nkId
, 0, 0 ) );

1917 ifĞ
commªdQueues
[
queueId
].
	`em±y
Ğè=ğ
çl£
 )

1919 
rv
 = 
çl£
;

1924  
rv
;

1925 
	}
}

1930 
boŞ
 
	gMemÜyCÚŒŞËr
::
	$Efãùiv–yEm±y
ĞcÚ¡ 
ncouÁ”_t
& 
queueId
 )

1932 
	`as£¹
(
queueId
 < 
commªdQueueCouÁ
);

1934 
boŞ
 
efãùiv–yEm±y
 = (
commªdQueues
[
queueId
].
	`size
( ) == 1)

1935 && (
	`WasIssued
(
commªdQueues
[
queueId
].
	`©
(0)));

1937  (
commªdQueues
[
queueId
].
	`em±y
(è|| 
efãùiv–yEm±y
);

1938 
	}
}

1943 
	gMemÜyCÚŒŞËr
::
	$MoveCu¼’tQueue
( )

1946 ifĞ
p
->
ScheduËScheme
 != 0 )

1948 
curQueue
++;

1949 ifĞ
curQueue
 > 
commªdQueueCouÁ
 )

1951 
curQueue
 = 0;

1954 
	}
}

1956 
	gMemÜyCÚŒŞËr
::
	$C®cuÏ‹Sts
( )

1959 ifĞ
p
->
Ev’tDriv’
 )

1961 
ncyşe_t
 
syncCyşes
 = 
	`G‘Ev’tQueue
Ğ)->
	`G‘Cu¼’tCyşe
Ğè- 
Ï¡CommªdWake
;

1962 
	`G‘Chd
Ğ)->
	`Cyşe
Ğ
syncCyşes
 );

1965 
simuÏtiÚ_cyşes
 = 
	`G‘Ev’tQueue
()->
	`G‘Cu¼’tCyşe
();

1967 
	`G‘Chd
Ğ)->
	`C®cuÏ‹Sts
( );

1968 
	`G‘Decod”
Ğ)->
	`C®cuÏ‹Sts
( );

1969 
	}
}

	@src/bk/MemoryController.h

36 #iâdeà
__MEMORYCONTROLLER_H__


37 
	#__MEMORYCONTROLLER_H__


	)

39 
	~<¡ršg
>

40 
	~<veùÜ
>

41 
	~"¤c/NVMObjeù.h
"

42 
	~"¤c/CÚfig.h
"

43 
	~"¤c/IÁ”cÚÃù.h
"

44 
	~"¤c/Add»ssT¿n¦©Ü.h
"

45 
	~"šşude/NVMašReque¡.h
"

46 
	~<deque
>

47 
	~<io¡»am
>

48 
	~<li¡
>

51 
Çme¥aû
 
	gNVM
 {

54 
	eProûssÜOp
 { 
	gLOAD
, 
	gSTORE
 };

55 
	eQueueMod–
 { 
	gP”RªkQueues
, 
	gP”BªkQueues
, 
	gP”SubA¼ayQueues
 };

65 cÚ¡ 
	gŒª§ùiÚQueuePriÜ™y
 = 30;

66 cÚ¡ 
	gcommªdQueuePriÜ™y
 = 40;

67 cÚ¡ 
	g»äeshPriÜ™y
 = 20;

68 cÚ¡ 
	glowPow”PriÜ™y
 = 10;

69 cÚ¡ 
	gş—nupPriÜ™y
 = -10;

71 şas 
	cSchedulšgP»diÿ‹


73 
	gpublic
:

74 
SchedulšgP»diÿ‹
( ) { }

75 ~
SchedulšgP»diÿ‹
( ) { }

77 
vœtu®
 
boŞ
 
İ”©Ü
(è(
NVMašReque¡
 * ) {  
Œue
; }

82 şas 
	cCom¶em’tP»diÿ‹
 : 
public
 
SchedulšgP»diÿ‹


84 
´iv©e
:

85 
Com¶em’tP»diÿ‹
() {}

87 
SchedulšgP»diÿ‹
 *
´ed
;

89 
	gpublic
:

90 
ex¶ic™
 
Com¶em’tP»diÿ‹
Ğ
SchedulšgP»diÿ‹
 *
_´ed
 ) : 
´ed
(_pred) { }

91 ~
Com¶em’tP»diÿ‹
( ) { }

93 
boŞ
 
İ”©Ü
(è(
NVMašReque¡
 *
»que¡
)

95  !Ğ(*
´ed
)Ğ
»que¡
 ) );

100 şas 
	cMemÜyCÚŒŞËr
 : 
public
 
NVMObjeù


102 
public
:

103 
MemÜyCÚŒŞËr
( );

104 ~
MemÜyCÚŒŞËr
( );

107 
In™Queues
Ğ
numQueues
 );

108 
In™BªkQueues
Ğ
numQueues
 );

110 
vœtu®
 
boŞ
 
Reque¡Com¶‘e
Ğ
NVMašReque¡
 *
»que¡
 );

111 
vœtu®
 
boŞ
 
IsIssuabË
Ğ
NVMašReque¡
 *
»que¡
, 
FaR—sÚ
 *
ç
 );

112 
ncyşe_t
 
NextIssuabË
Ğ
NVMašReque¡
 *
»que¡
 );

114 
vœtu®
 
Regi¡”Sts
( );

115 
vœtu®
 
C®cuÏ‹Sts
( );

117 
CommªdQueueC®lback
Ğ*
d©a
 );

118 
CËªupC®lback
Ğ*
d©a
 );

119 
ReäeshC®lback
Ğ*
d©a
 );

120 
vœtu®
 
Cyşe
Ğ
ncyşe_t
 
¡•s
 );

122 
vœtu®
 
S‘CÚfig
Ğ
CÚfig
 *
cÚf
, 
boŞ
 
ü—‹Chd»n
 = 
Œue
 );

123 
S‘M­pšgScheme
( );

124 
CÚfig
 *
G‘CÚfig
( );

126 
S‘ID
Ğ
id
 );

127 
G‘ID
( );

129 
	g´Ùeùed
:

130 
IÁ”cÚÃù
 *
memÜy
;

131 
CÚfig
 *
	gcÚfig
;

132 
ncouÁ”_t
 
	gpsIÁ”v®
;

133 
ncyşe_t
 
	gÏ¡CommªdWake
;

134 
ncouÁ”_t
 
	gwakeupCouÁ
;

135 
ncyşe_t
 
	gÏ¡IssueCyşe
;

137 
	g¡d
::
li¡
<
NVMašReque¡
 *> *
Œª§ùiÚQueues
;

138 
	g¡d
::
deque
<
NVMašReque¡
 *> *
commªdQueues
;

139 
ncouÁ”_t
 
	gcommªdQueueCouÁ
;

140 
ncouÁ”_t
 
	gŒª§ùiÚQueueCouÁ
;

141 
QueueMod–
 
	gqueueMod–
;

143 
ncouÁ”_t
 
G‘CommªdQueueId
Ğ
NVMAdd»ss
 
addr
 );

145 
boŞ
 **
	gaùiv©eQueued
;

146 
boŞ
 **
	g»äeshQueued
;

147 
ncouÁ”_t
 ***
	gefãùiveRow
;

148 
ncouÁ”_t
 ***
	gefãùiveMuxedRow
;

149 
ncouÁ”_t
 ***
	gaùiveSubA¼ay
;

150 
ncouÁ”_t
 ***
	g¡¬v©iÚCouÁ”
;

151 
ncouÁ”_t
 
	g¡¬v©iÚTh»shŞd
;

152 
ncouÁ”_t
 
	gsubA¼ayNum
;

154 
boŞ
 *
	g¿nkPow”Down
;

156 
boŞ
 
T¿n§ùiÚAvaabË
Ğ
ncouÁ”_t
 
queueId
 );

157 
ScheduËCommªdWake
( );

158 
P»queue
Ğ
ncouÁ”_t
 
queueNum
, 
NVMašReque¡
 *
»que¡
 );

159 
Enqueue
Ğ
ncouÁ”_t
 
queueNum
, 
NVMašReque¡
 *
»que¡
 );

161 
NVMašReque¡
 *
MakeCachedReque¡
ĞNVMašReque¡ *
Œigg”Reque¡
 );

162 
NVMašReque¡
 *
MakeAùiv©eReque¡
ĞNVMašReque¡ *
Œigg”Reque¡
 );

163 
NVMašReque¡
 *
MakeAùiv©eReque¡
ĞcÚ¡ 
ncouÁ”_t
, const‚counter_t,

164 cÚ¡ 
ncouÁ”_t
, const‚counter_t,

165 cÚ¡ 
ncouÁ”_t
 );

166 
NVMašReque¡
 *
MakeIm¶ic™P»ch¬geReque¡
ĞNVMašReque¡ *
Œigg”Reque¡
 );

167 
NVMašReque¡
 *
MakeP»ch¬geReque¡
ĞNVMašReque¡ *
Œigg”Reque¡
 );

168 
NVMašReque¡
 *
MakeP»ch¬geReque¡
ĞcÚ¡ 
ncouÁ”_t
, const‚counter_t,

169 cÚ¡ 
ncouÁ”_t
, const‚counter_t,

170 cÚ¡ 
ncouÁ”_t
 );

171 
NVMašReque¡
 *
MakeP»ch¬geAÎReque¡
ĞNVMašReque¡ *
Œigg”Reque¡
 );

172 
NVMašReque¡
 *
MakeP»ch¬geAÎReque¡
ĞcÚ¡ 
ncouÁ”_t
, const‚counter_t,

173 cÚ¡ 
ncouÁ”_t
, const‚counter_t,

174 cÚ¡ 
ncouÁ”_t
 );

175 
NVMašReque¡
 *
MakeReäeshReque¡
ĞcÚ¡ 
ncouÁ”_t
, const‚counter_t,

176 cÚ¡ 
ncouÁ”_t
, const‚counter_t,

177 cÚ¡ 
ncouÁ”_t
 );

178 
NVMašReque¡
 *
MakePow”downReque¡
Ğ
OpTy³
 
pdOp
,

179 cÚ¡ 
ncouÁ”_t
 
¿nk
 );

180 
NVMašReque¡
 *
MakePow”upReque¡
ĞcÚ¡ 
ncouÁ”_t
 
¿nk
 );

182 
boŞ
 
FšdSrvedReque¡
Ğ
¡d
::
li¡
<
NVMašReque¡
 *>& 
Œª§ùiÚQueue
, NVMašReque¡ **
¡¬vedReque¡
 );

183 
boŞ
 
FšdCachedAdd»ss
Ğ
¡d
::
li¡
<
NVMašReque¡
 *>& 
Œª§ùiÚQueue
, NVMašReque¡ **
acûssibËReque¡
 );

184 
boŞ
 
FšdRowBufãrH™
Ğ
¡d
::
li¡
<
NVMašReque¡
 *>& 
Œª§ùiÚQueue
, NVMašReque¡ **
h™Reque¡
 );

185 
boŞ
 
FšdWr™eSÎedR—d
Ğ
¡d
::
li¡
<
NVMašReque¡
 *>& 
Œª§ùiÚQueue
, NVMašReque¡ **
h™Reque¡
 );

186 
boŞ
 
FšdOlde¡R—dyReque¡
Ğ
¡d
::
li¡
<
NVMašReque¡
 *>& 
Œª§ùiÚQueue
, NVMašReque¡ **
Şde¡Reque¡
 );

187 
boŞ
 
FšdClo£dBªkReque¡
Ğ
¡d
::
li¡
<
NVMašReque¡
 *>& 
Œª§ùiÚQueue
, NVMašReque¡ **
şo£dReque¡
 );

188 
boŞ
 
FšdSrvedReque¡s
Ğ
¡d
::
li¡
<
NVMašReque¡
 *>& 
Œª§ùiÚQueue
, std::
veùÜ
<NVMašReque¡ *>& 
¡¬vedReque¡s
 );

189 
boŞ
 
FšdRowBufãrH™s
Ğ
¡d
::
li¡
<
NVMašReque¡
 *>& 
Œª§ùiÚQueue
, std::
veùÜ
<NVMašReque¡ *>& 
h™Reque¡s
 );

190 
boŞ
 
FšdOlde¡R—dyReque¡s
Ğ
¡d
::
li¡
<
NVMašReque¡
 *>& 
Œª§ùiÚQueue
, std::
veùÜ
<NVMašReque¡ *>& 
Şde¡Reque¡s
 );

191 
boŞ
 
FšdClo£dBªkReque¡s
Ğ
¡d
::
li¡
<
NVMašReque¡
 *>& 
Œª§ùiÚQueue
, std::
veùÜ
<NVMašReque¡ *>& 
şo£dReque¡s
 );

194 
boŞ
 
IssueMemÜyCommªds
Ğ
NVMašReque¡
 *
»q
 );

195 
CyşeCommªdQueues
( );

197 
boŞ
 
FšdSrvedReque¡
Ğ
¡d
::
li¡
<
NVMašReque¡
 *>& 
Œª§ùiÚQueue
, NVMašReque¡ **
¡¬vedReque¡
, 
NVM
::
SchedulšgP»diÿ‹
& 
p
 );

198 
boŞ
 
FšdCachedAdd»ss
Ğ
¡d
::
li¡
<
NVMašReque¡
 *>& 
Œª§ùiÚQueue
, NVMašReque¡ **
acûssibËReque¡
, 
NVM
::
SchedulšgP»diÿ‹
& 
p
 );

199 
boŞ
 
FšdRowBufãrH™
Ğ
¡d
::
li¡
<
NVMašReque¡
 *>& 
Œª§ùiÚQueue
, NVMašReque¡ **
h™Reque¡
, 
NVM
::
SchedulšgP»diÿ‹
& 
p
 );

200 
boŞ
 
FšdWr™eSÎedR—d
Ğ
¡d
::
li¡
<
NVMašReque¡
 *>& 
Œª§ùiÚQueue
, NVMašReque¡ **
h™Reque¡
, 
NVM
::
SchedulšgP»diÿ‹
& 
p
 );

201 
boŞ
 
FšdOlde¡R—dyReque¡
Ğ
¡d
::
li¡
<
NVMašReque¡
 *>& 
Œª§ùiÚQueue
, NVMašReque¡ **
Şde¡Reque¡
, 
NVM
::
SchedulšgP»diÿ‹
& 
p
 );

202 
boŞ
 
FšdClo£dBªkReque¡
Ğ
¡d
::
li¡
<
NVMašReque¡
 *>& 
Œª§ùiÚQueue
, NVMašReque¡ **
şo£dReque¡
, 
NVM
::
SchedulšgP»diÿ‹
& 
p
 );

203 
boŞ
 
FšdSrvedReque¡s
Ğ
¡d
::
li¡
<
NVMašReque¡
 *>& 
Œª§ùiÚQueue
, std::
veùÜ
<NVMašReque¡ *>& 
¡¬vedReque¡s
, 
NVM
::
SchedulšgP»diÿ‹
& 
p
 );

204 
boŞ
 
FšdRowBufãrH™s
Ğ
¡d
::
li¡
<
NVMašReque¡
 *>& 
Œª§ùiÚQueue
, std::
veùÜ
<NVMašReque¡ *>& 
h™Reque¡s
, 
NVM
::
SchedulšgP»diÿ‹
& 
p
 );

205 
boŞ
 
FšdOlde¡R—dyReque¡s
Ğ
¡d
::
li¡
<
NVMašReque¡
 *>& 
Œª§ùiÚQueue
, std::
veùÜ
<NVMašReque¡ *>& 
Şde¡Reque¡s
, 
NVM
::
SchedulšgP»diÿ‹
& 
p
 );

206 
boŞ
 
FšdClo£dBªkReque¡s
Ğ
¡d
::
li¡
<
NVMašReque¡
 *>& 
Œª§ùiÚQueue
, std::
veùÜ
<NVMašReque¡ *>& 
şo£dReque¡s
, 
NVM
::
SchedulšgP»diÿ‹
& 
p
 );

209 
vœtu®
 
boŞ
 
IsLa¡Reque¡
Ğ
¡d
::
li¡
<
NVMašReque¡
 *>& 
Œª§ùiÚQueue
, NVMašReque¡ *
»que¡
);

211 
ncouÁ”_t
 
	gcurQueue
;

213 
MoveCu¼’tQueue
( );

215 
ncouÁ”_t
 **
	gd–ayedReäeshCouÁ”
;

218 
boŞ
 **
	gbªkN“dReäesh
;

221 
ncyşe_t
 
	gm_tREFI
;

223 
ncouÁ”_t
 
	gm_»äeshBªkNum
;

225 
boŞ
 
N“dReäesh
(cÚ¡ 
ncouÁ”_t
, const‚counter_t);

227 
ProûssReäeshPul£
Ğ
NVMašReque¡
* );

229 
boŞ
 
IsReäeshBªkQueueEm±y
(cÚ¡ 
ncouÁ”_t
, const‚counter_t);

232 
S‘Reäesh
(cÚ¡ 
ncouÁ”_t
, const‚counter_t);

234 
Re£tReäesh
(cÚ¡ 
ncouÁ”_t
, const‚counter_t);

237 
Re£tReäeshQueued
ĞcÚ¡ 
ncouÁ”_t
 
bªk
, cÚ¡‚couÁ”_ˆ
¿nk
 );

240 
Inüem’tReäeshCouÁ”
(cÚ¡ 
ncouÁ”_t
, const‚counter_t);

242 
Deüem’tReäeshCouÁ”
(cÚ¡ 
ncouÁ”_t
, const‚counter_t);

244 
ncyşe_t
 
	ghªdËdReäesh
;

246 
ncouÁ”_t
 
	gÃxtReäeshRªk
, 
	gÃxtReäeshBªk
;

248 
vœtu®
 
boŞ
 
HªdËReäesh
( );

251 
boŞ
 
RªkQueueEm±y
ĞcÚ¡ 
ncouÁ”_t
& );

253 
Pow”Down
ĞcÚ¡ 
ncouÁ”_t
& );

254 
Pow”Up
ĞcÚ¡ 
ncouÁ”_t
& );

255 
vœtu®
 
HªdËLowPow”
( );

258 
boŞ
 
Efãùiv–yEm±y
ĞcÚ¡ 
ncouÁ”_t
& );

260 şas 
	cDummyP»diÿ‹
 : 
public
 
SchedulšgP»diÿ‹


262 
public
:

263 
boŞ
 
İ”©Ü
(èĞ
NVMašReque¡
* 
»que¡
 );

266 
ncouÁ”_t
 
	gid
;

269 
ncouÁ”_t
 
	gsimuÏtiÚ_cyşes
;

	@traceReader/GenericTraceReader.h

34 #iâdeà
__GENERICTRACEREADER_H__


35 
	#__GENERICTRACEREADER_H__


	)

37 
	~<¡ršg
>

38 
	~<veùÜ
>

39 
	~"ŒaûR—d”/T¿ûLše.h
"

41 
Çme¥aû
 
	gNVM
 {

43 şas 
	cG’”icT¿ûR—d”


45 
	gpublic
:

46 
G’”icT¿ûR—d”
( ) { }

48 
vœtu®
 ~
G’”icT¿ûR—d”
( ) { }

49 
vœtu®
 
S‘T¿ûFe
Ğ
¡d
::
¡ršg
 
fe
 ) = 0;

51 
vœtu®
 
	g¡d
::
¡ršg
 
G‘T¿ûFe
( ) = 0;

52 
vœtu®
 
boŞ
 
G‘NextAcûss
Ğ
T¿ûLše
 *
ÃxtAcûss
 ) = 0;

53 
vœtu®
 
G‘NextNAcûs£s
Ğ
N
,

54 
¡d
::
veùÜ
<
T¿ûLše
 *> *
ÃxtAcûs£s
 ) = 0;

	@traceReader/NVMainTrace/NVMainTraceReader.cpp

34 
	~"ŒaûR—d”/NVMašT¿û/NVMašT¿ûR—d”.h
"

35 
	~<s¡»am
>

36 
	~<c¡dlib
>

37 
	~<ÿs£¹
>

38 
	~<c¡ršg
>

40 
usšg
 
Çme¥aû
 
	gNVM
;

42 
	gNVMašT¿ûR—d”
::
	$NVMašT¿ûR—d”
( )

44 
ŒaûFe
 = "";

45 
	}
}

47 
	gNVMašT¿ûR—d”
::~
	$NVMašT¿ûR—d”
( )

49 ifĞ
Œaû
.
	`is_İ’
( ) )

50 
Œaû
.
	`şo£
( );

51 
	}
}

53 
	gNVMašT¿ûR—d”
::
S‘T¿ûFe
Ğ
¡d
::
¡ršg
 
fe
 )

55 
ŒaûFe
 = 
fe
;

58 
	g¡d
::
¡ršg
 
NVMašT¿ûR—d”
::
	$G‘T¿ûFe
( )

60  
ŒaûFe
;

61 
	}
}

68 
boŞ
 
	gNVMašT¿ûR—d”
::
	$G‘NextAcûss
Ğ
T¿ûLše
 *
ÃxtAcûss
 )

71 ifĞ
ŒaûFe
 == "" )

73 
¡d
::
û¼
 << "NØŒaû f¥ecif›d!" << std::
’dl
;

74  
çl£
;

78 ifĞ!
Œaû
.
	`is_İ’
( ) )

80 
Œaû
.
	`İ’
Ğ
ŒaûFe
.
	`c_¡r
( ) );

81 ifĞ!
Œaû
.
	`is_İ’
( ) )

83 
¡d
::
û¼
 << "Could‚Ù o³ÀŒaû fe: " << 
ŒaûFe
 << "!" << std::
’dl
;

84  
çl£
;

88 
¡d
::
¡ršg
 
fuÎLše
;

91 
cyşe
 = 0;

92 
OpTy³
 
İ”©iÚ
 = 
READ
;

93 
ušt64_t
 
add»ss
;

94 
NVMD©aBlock
 
d©aBlock
;

95 
th»adId
 = 0;

98 
	`g‘lše
Ğ
Œaû
, 
fuÎLše
 );

99 ifĞ
Œaû
.
	`eof
( ) )

101 
NVMAdd»ss
 
nAdd»ss
;

102 
nAdd»ss
.
	`S‘PhysiÿlAdd»ss
( 0xDEADC0DEDEADBEEFULL );

103 
ÃxtAcûss
->
	`S‘Lše
Ğ
nAdd»ss
, 
NOP
, 0, 
d©aBlock
, 0 );

104 
¡d
::
cout
 << "NVMašT¿ûR—d”: R—ched EOF!" << std::
’dl
;

105  
çl£
;

108 
¡d
::
i¡ršg¡»am
 
	`lšeSŒ—m
Ğ
fuÎLše
 );

109 
¡d
::
¡ršg
 
f›ld
;

110 
f›ldId
 = 0;

116  
	`g‘lše
Ğ
lšeSŒ—m
, 
f›ld
, ' ' ) )

118 ifĞ
f›ld
 != "" )

120 ifĞ
f›ldId
 == 0 )

121 
cyşe
 = 
	`©oi
Ğ
f›ld
.
	`c_¡r
( ) );

122 ifĞ
f›ldId
 == 1 )

124 ifĞ
f›ld
 == "R" )

125 
İ”©iÚ
 = 
READ
;

126 ifĞ
f›ld
 == "W" )

127 
İ”©iÚ
 = 
WRITE
;

129 
¡d
::
cout
 << "Warning: Unknown operation `"

130 << 
f›ld
 << "'" << 
¡d
::
’dl
;

132 ifĞ
f›ldId
 == 2 )

134 
¡d
::
¡ršg¡»am
 
fm©
;

136 
fm©
 << 
¡d
::
hex
 << 
f›ld
;

137 
fm©
 >> 
add»ss
;

139 ifĞ
f›ldId
 == 3 )

141 
by‹
;

142 
¡¬t
, 
’d
;

146 
	`as£¹
((
ušt64_t
)*8 == 64);

147 
	`as£¹
(
f›ld
.
	`Ëngth
() == 128);

149 
d©aBlock
.
	`S‘Size
( 64 );

151 
ušt64_t
 *
¿wD©a
 = 
»š‹½»t_ÿ¡
<ušt64_t*>(
d©aBlock
.rawData);

152 
	`mem£t
(
¿wD©a
, 0, 64);

154  
by‹
 = 0; byte < 8; byte++ )

156 
¡d
::
¡ršg¡»am
 
fm©
;

158 
’d
 = ()
f›ld
.
	`Ëngth
Ğè- 16*
by‹
;

159 
¡¬t
 = ()
f›ld
.
	`Ëngth
Ğè- 16*
by‹
 - 16;

161 
fm©
 << 
¡d
::
hex
 << 
f›ld
.
	`sub¡r
Ğ
¡¬t
, 
’d
 - start );

162 
fm©
 >> 
¿wD©a
[
by‹
];

165 ifĞ
f›ldId
 == 4 )

166 
th»adId
 = 
	`©oi
Ğ
f›ld
.
	`c_¡r
( ) );

168 
f›ldId
++;

172 
lš’um
 = 0;

174 
lš’um
++;

176 ifĞ
İ”©iÚ
 !ğ
READ
 && o³¿tiÚ !ğ
WRITE
 )

177 
¡d
::
cout
 << "NVMašT¿ûR—d”: UnknowÀO³¿tiÚ: " << 
İ”©iÚ


178 << "Lšnumb” i " << 
lš’um
 << ". FuÎ Lši \"" << 
fuÎLše


179 << "\"" << 
¡d
::
’dl
;

184 
NVMAdd»ss
 
nAdd»ss
;

186 
nAdd»ss
.
	`S‘PhysiÿlAdd»ss
Ğ
add»ss
 );

188 
ÃxtAcûss
->
	`S‘Lše
Ğ
nAdd»ss
, 
İ”©iÚ
, 
cyşe
, 
d©aBlock
, 
th»adId
 );

190  
Œue
;

191 
	}
}

197 
	gNVMašT¿ûR—d”
::
G‘NextNAcûs£s
Ğ
N
,

198 
¡d
::
veùÜ
<
T¿ûLše
 *> *
ÃxtAcûs£s
 )

200 
sucûs£s
;

201 
şass
 
T¿ûLše
 *
	gÃxtLše
;

204 
	gsucûs£s
 = 0;

207  
	gi
 = 0; i < 
	gN
; i++ )

210 
	gÃxtLše
 = 
Ãw
 
T¿ûLše
( );

213 ifĞ
G‘NextAcûss
Ğ
ÃxtLše
 ) )

216 
	gÃxtAcûs£s
->
push_back
Ğ
ÃxtLše
 );

218 
	gsucûs£s
++;

222  
	gsucûs£s
;

	@traceReader/NVMainTrace/NVMainTraceReader.h

34 #iâdeà
__NVMAINTRACEREADER_H__


35 
	#__NVMAINTRACEREADER_H__


	)

37 
	~"ŒaûR—d”/G’”icT¿ûR—d”.h
"

38 
	~<¡ršg
>

39 
	~<io¡»am
>

40 
	~<f¡»am
>

42 
Çme¥aû
 
	gNVM
 {

44 şas 
	cNVMašT¿ûR—d”
 : 
public
 
G’”icT¿ûR—d”


46 
public
:

47 
NVMašT¿ûR—d”
( );

48 ~
NVMašT¿ûR—d”
( );

50 
S‘T¿ûFe
Ğ
¡d
::
¡ršg
 
fe
 );

51 
	g¡d
::
¡ršg
 
G‘T¿ûFe
( );

53 
boŞ
 
G‘NextAcûss
Ğ
T¿ûLše
 *
ÃxtAcûss
 );

54 
G‘NextNAcûs£s
Ğ
N
, 
¡d
::
veùÜ
<
T¿ûLše
 *> *
ÃxtAcûss
 );

56 
	g´iv©e
:

57 
¡d
::
¡ršg
 
ŒaûFe
;

58 
	g¡d
::
if¡»am
 
Œaû
;

	@traceReader/RubyTrace/RubyTraceReader.cpp

34 
	~<s¡»am
>

35 
	~<¡dlib.h
>

36 
	~"ŒaûR—d”/RubyT¿û/RubyT¿ûR—d”.h
"

38 
usšg
 
Çme¥aû
 
	gNVM
;

40 
	gRubyT¿ûR—d”
::
	$RubyT¿ûR—d”
( )

42 
ŒaûFe
 = "";

43 
	}
}

45 
	gRubyT¿ûR—d”
::~
	$RubyT¿ûR—d”
( )

48 ifĞ
Œaû
.
	`is_İ’
( ) )

49 
Œaû
.
	`şo£
( );

50 
	}
}

53 
	gRubyT¿ûR—d”
::
S‘T¿ûFe
Ğ
¡d
::
¡ršg
 
fe
 )

55 
ŒaûFe
 = 
fe
;

59 
	g¡d
::
¡ršg
 
RubyT¿ûR—d”
::
	$G‘T¿ûFe
( )

61  
ŒaûFe
;

62 
	}
}

68 
boŞ
 
	gRubyT¿ûR—d”
::
	$G‘NextAcûss
Ğ
T¿ûLše
 *
ÃxtAcûss
 )

71 ifĞ
ŒaûFe
 == "" )

73 
¡d
::
û¼
 << "NØŒaû f¥ecif›d!" << std::
’dl
;

74  
çl£
;

78 ifĞ!
Œaû
.
	`is_İ’
( ) )

80 
Œaû
.
	`İ’
Ğ
ŒaûFe
.
	`c_¡r
() );

81 ifĞ!
Œaû
.
	`is_İ’
( ) )

83 
¡d
::
û¼
 << "Could‚Ù o³ÀŒaû fe: " << 
ŒaûFe
 << "!" << std::
’dl
;

84  
çl£
;

92 
¡d
::
¡ršg
 
fuÎLše
;

97 
NVMD©aBlock
 
d©aBlock
;

98 
th»adId
;

100 
th»adId
 = 0;

106 ifĞ
Œaû
.
	`eof
( ) )

108 
NVMAdd»ss
 
nAdd»ss
;

109 
nAdd»ss
.
	`S‘PhysiÿlAdd»ss
( 0xDEADC0DEDEADBEEFULL );

110 
ÃxtAcûss
->
	`S‘Lše
Ğ
nAdd»ss
, 
NOP
, 0, 
d©aBlock
, 0 );

111  
çl£
;

113 
	`g‘lše
Ğ
Œaû
, 
fuÎLše
 );

119 
¡d
::
i¡ršg¡»am
 
	`lšeSŒ—m
Ğ
fuÎLše
 );

120 
¡d
::
¡ršg
 
f›ld
;

121 
f›ldId
;

128 
¡d
::
¡ršg
 
cyşe
, 
un™
, 
commªd
, 
add»ss
, 
memÜy
, 
İ”©iÚ
;

129 
ušt64_t
 
decAdd»ss
;

130 
cu¼’tCyşe
 = 0;

131 
cyşes
 = 0;

132 
OpTy³
 
memOp
;

150 
f›ldId
 = 0;

151  
	`g‘lše
Ğ
lšeSŒ—m
, 
f›ld
, ' ' ) )

153 ifĞ
f›ld
 != "" )

155 ifĞ
f›ldId
 == 0 )

156 
cu¼’tCyşe
 = 
	`©oi
Ğ
f›ld
.
	`c_¡r
( ) );

157 ifĞ
f›ldId
 == 3 )

158 
un™
 = 
f›ld
;

159 ifĞ
f›ldId
 == 4 )

160 
commªd
 = 
f›ld
;

161 ifĞ
f›ldId
 == 6 )

162 
add»ss
 = 
f›ld
.
	`sub¡r
Ğ1, f›ld.
	`Ëngth
( ) - 2 );

163 ifĞ
f›ldId
 == 9 )

164 
cyşes
 = 
	`©oi
Ğ
f›ld
.
	`c_¡r
( ) );

165 ifĞ
f›ldId
 == 11 )

166 
memÜy
 = 
f›ld
;

167 ifĞ
f›ldId
 == 12 )

168 
İ”©iÚ
 = 
f›ld
;

170 
f›ldId
++;

187 ifĞ
un™
 == "Seq" )

189 ifĞ
commªd
 =ğ"DÚe" && 
memÜy
 == "NULL" )

191 
¡d
::
¡ršg¡»am
 
fm©
;

193 
fm©
 << 
¡d
::
hex
 << 
add»ss
;

194 
fm©
 >> 
decAdd»ss
;

196 ifĞ
İ”©iÚ
 == "IFETCH" || operation == "LD" )

197 
memOp
 = 
READ
;

198 ifĞ
İ”©iÚ
 == "ST" || operation == "ATOMIC" )

199 
memOp
 = 
WRITE
;

202 
memOp
 = 
NOP
;

203 
¡d
::
cout
 << "RubyTraceReader: Unknown memory operation! "

204 << 
İ”©iÚ
 << 
¡d
::
’dl
;

207 
NVMAdd»ss
 
nAdd»ss
;

208 
nAdd»ss
.
	`S‘PhysiÿlAdd»ss
Ğ
decAdd»ss
 );

210 
ÃxtAcûss
->
	`S‘Lše
Ğ
nAdd»ss
, 
memOp
, 
cu¼’tCyşe
 - 
cyşes
,

211 
d©aBlock
, 
th»adId
 );

217  
Œue
;

218 
	}
}

224 
	gRubyT¿ûR—d”
::
G‘NextNAcûs£s
Ğ
N
,

225 
¡d
::
veùÜ
<
T¿ûLše
 *> *
ÃxtAcûs£s
 )

227 
sucûs£s
;

228 
şass
 
T¿ûLše
 *
	gÃxtLše
;

231 
	gsucûs£s
 = 0;

234  
	gi
 = 0; i < 
	gN
; i++ )

237 
	gÃxtLše
 = 
Ãw
 
T¿ûLše
( );

240 ifĞ
G‘NextAcûss
Ğ
ÃxtLše
 ) )

243 
	gÃxtAcûs£s
->
push_back
Ğ
ÃxtLše
 );

245 
	gsucûs£s
++;

249  
	gsucûs£s
;

	@traceReader/RubyTrace/RubyTraceReader.h

34 #iâdeà
__READRUBYTRACE_H__


35 
	#__READRUBYTRACE_H__


	)

37 
	~<io¡»am
>

38 
	~<f¡»am
>

39 
	~"ŒaûR—d”/G’”icT¿ûR—d”.h
"

41 
Çme¥aû
 
	gNVM
 {

47 şas 
	cRubyT¿ûR—d”
 : 
public
 
G’”icT¿ûR—d”


49 
public
:

50 
RubyT¿ûR—d”
();

51 ~
RubyT¿ûR—d”
();

53 
S‘T¿ûFe
Ğ
¡d
::
¡ršg
 
fe
 );

55 
	g¡d
::
¡ršg
 
G‘T¿ûFe
( );

56 
boŞ
 
G‘NextAcûss
Ğ
T¿ûLše
 *
ÃxtAcûss
 );

57 
G‘NextNAcûs£s
Ğ
N
, 
¡d
::
veùÜ
<
T¿ûLše
 *> *
ÃxtAcûs£s
 );

59 
	g´iv©e
:

60 
¡d
::
¡ršg
 
ŒaûFe
;

61 
	g¡d
::
if¡»am
 
Œaû
;

	@traceReader/TraceLine.cpp

34 
	~"ŒaûR—d”/T¿ûLše.h
"

36 
usšg
 
Çme¥aû
 
	gNVM
;

38 
	gT¿ûLše
::
	$T¿ûLše
( )

44 
add»ss
.
	`S‘PhysiÿlAdd»ss
( 0xDEADC0DE0BADC0DEULL );

45 
İ”©iÚ
 = 
NOP
;

46 
cyşe
 = 0;

47 
th»adId
 = 0;

48 
	}
}

50 
	gT¿ûLše
::~
	$T¿ûLše
( )

53 
	}
}

56 
T¿ûLše
::
	$S‘Lše
Ğ
NVMAdd»ss
& 
addr
, 
OpTy³
 
İ
, 
ncyşe_t
 
cy
, 
NVMD©aBlock
& 
d©a
, 
ncouÁ”s_t
 
th»adId
 )

58 
this
->
add»ss
 = 
addr
;

59 
this
->
İ”©iÚ
 = 
İ
;

60 
this
->
cyşe
 = 
cy
;

61 
this
->
d©a
 = data;

62 
this
->
th»adId
 =hreadId;

63 
	}
}

66 
	gNVMAdd»ss
& 
	gT¿ûLše
::
	$G‘Add»ss
( )

68  
add»ss
;

69 
	}
}

72 
OpTy³
 
	gT¿ûLše
::
	$G‘O³¿tiÚ
( )

74  
İ”©iÚ
;

75 
	}
}

77 
ncyşe_t
 
	gT¿ûLše
::
	$G‘Cyşe
( )

79  
cyşe
;

80 
	}
}

82 
	gNVMD©aBlock
& 
	gT¿ûLše
::
	$G‘D©a
( )

84  
d©a
;

85 
	}
}

87 
ncouÁ”s_t
 
	gT¿ûLše
::
	$G‘Th»adId
( )

89  
th»adId
;

90 
	}
}

	@traceReader/TraceLine.h

34 #iâdeà
__TRACELINE_H__


35 
	#__TRACELINE_H__


	)

37 
	~"šşude/NVMašReque¡.h
"

38 
	~"šşude/NVMAdd»ss.h
"

39 
	~"šşude/NVMTy³s.h
"

41 
Çme¥aû
 
	gNVM
 {

43 şas 
	cT¿ûLše


45 
	gpublic
:

46 
T¿ûLše
();

47 ~
T¿ûLše
();

49 
S‘Lše
Ğ
NVMAdd»ss
& 
addr
, 
OpTy³
 
İ
, 
ncyşe_t
 
cyşe
,

50 
NVMD©aBlock
& 
d©a
, 
ncouÁ”s_t
 
th»adId
 );

52 
	gNVMAdd»ss
& 
G‘Add»ss
( );

53 
OpTy³
 
G‘O³¿tiÚ
( );

54 
ncyşe_t
 
G‘Cyşe
( );

55 
	gNVMD©aBlock
& 
G‘D©a
( );

56 
ncouÁ”s_t
 
G‘Th»adId
( );

58 
	g´iv©e
:

59 
NVMAdd»ss
 
add»ss
;

60 
OpTy³
 
	gİ”©iÚ
;

61 
ncyşe_t
 
	gcyşe
;

62 
NVMD©aBlock
 
	gd©a
;

63 
ncouÁ”s_t
 
	gth»adId
;

	@traceReader/TraceReaderFactory.cpp

34 
	~"ŒaûR—d”/T¿ûR—d”FaùÜy.h
"

35 
	~<io¡»am
>

38 
	~"ŒaûR—d”/NVMašT¿û/NVMašT¿ûR—d”.h
"

39 
	~"ŒaûR—d”/RubyT¿û/RubyT¿ûR—d”.h
"

41 
usšg
 
Çme¥aû
 
	gNVM
;

43 
G’”icT¿ûR—d”
 *
	gT¿ûR—d”FaùÜy
::
C»©eNewT¿ûR—d”
Ğ
¡d
::
¡ršg
 
»ad”
 )

45 
G’”icT¿ûR—d”
 *
Œaûr
 = 
NULL
;

47 ifĞ
	g»ad”
 == "" )

48 
¡d
::
cout
 << "NVMain: TraceReader is‚ot set in configuration file!"

49 << 
¡d
::
’dl
;

51 ifĞ
	g»ad”
 == "NVMainTrace" )

52 
Œaûr
 = 
Ãw
 
NVMašT¿ûR—d”
( );

53 ifĞ
	g»ad”
 == "RubyTrace" )

54 
Œaûr
 = 
Ãw
 
RubyT¿ûR—d”
( );

56 ifĞ
	gŒaûr
 =ğ
NULL
 )

57 
¡d
::
cout
 << "NVMaš: UnknowÀŒaû„—d” `" << 
»ad”
 << "'."

58 << 
¡d
::
’dl
;

60  
	gŒaûr
;

	@traceReader/TraceReaderFactory.h

34 #iâdeà
__TRACEREADER_TRACEREADERFACTORY_H__


35 
	#__TRACEREADER_TRACEREADERFACTORY_H__


	)

37 
	~"ŒaûR—d”/G’”icT¿ûR—d”.h
"

38 
	~<¡ršg
>

40 
Çme¥aû
 
	gNVM
 {

42 şas 
	cT¿ûR—d”FaùÜy


44 
	gpublic
:

45 
T¿ûR—d”FaùÜy
( ) { }

46 ~
T¿ûR—d”FaùÜy
( ) { }

48 
G’”icT¿ûR—d”
 *
C»©eNewT¿ûR—d”
Ğ
¡d
::
¡ršg
 
»ad”
 );

	@traceSim/traceMain.cpp

34 
	~<s¡»am
>

35 
	~<cm©h
>

36 
	~<¡dlib.h
>

37 
	~<f¡»am
>

39 
	~"¤c/IÁ”cÚÃù.h
"

40 
	~"IÁ”cÚÃù/IÁ”cÚÃùFaùÜy.h
"

41 
	~"¤c/CÚfig.h
"

42 
	~"¤c/T¿n¦©iÚM‘hod.h
"

43 
	~"ŒaûR—d”/T¿ûR—d”FaùÜy.h
"

44 
	~"¤c/Add»ssT¿n¦©Ü.h
"

45 
	~"Decod”s/Decod”FaùÜy.h
"

46 
	~"¤c/MemÜyCÚŒŞËr.h
"

47 
	~"MemCÚŒŞ/MemÜyCÚŒŞËrFaùÜy.h
"

48 
	~"Endu¿nû/Endu¿nûDi¡ributiÚFaùÜy.h
"

49 
	~"SimIÁ”çû/NuÎIÁ”çû/NuÎIÁ”çû.h
"

50 
	~"šşude/NVMH–³rs.h
"

51 
	~"Uts/HookFaùÜy.h
"

52 
	~"¤c/Ev’tQueue.h
"

53 
	~"NVM/nvmaš.h
"

54 
	~"ŒaûSim/ŒaûMaš.h
"

56 
usšg
 
Çme¥aû
 
	gNVM
;

58 
	$maš
Ğ
¬gc
, *
¬gv
[] )

60 
T¿ûMaš
 *
ŒaûRuÂ”
 = 
Ãw
 
	`T¿ûMaš
( );

62  
ŒaûRuÂ”
->
	`RunT¿û
Ğ
¬gc
, 
¬gv
 );

63 
	}
}

65 
	gT¿ûMaš
::
	$T¿ûMaš
( )

68 
	}
}

70 
T¿ûMaš
::~
	$T¿ûMaš
( )

73 
	}
}

75 
T¿ûMaš
::
	$RunT¿û
Ğ
¬gc
, *
¬gv
[] )

77 
Sts
 *
¡©s
 = 
Ãw
 
	`Sts
( );

78 
CÚfig
 *
cÚfig
 = 
Ãw
 
	`CÚfig
( );

79 
G’”icT¿ûR—d”
 *
Œaû
 = 
NULL
;

80 
T¿ûLše
 *

 = 
Ãw
 
	`T¿ûLše
( );

81 
SimIÁ”çû
 *
simIÁ”çû
 = 
Ãw
 
	`NuÎIÁ”çû
( );

82 
NVMaš
 *
nvmaš
 = 
Ãw
 
	`NVMaš
( );

83 
Ev’tQueue
 *
mašEv’tQueue
 = 
Ãw
 
	`Ev’tQueue
( );

84 
Glob®Ev’tQueue
 *
glob®Ev’tQueue
 = 
Ãw
 
	`Glob®Ev’tQueue
( );

85 
TagG’”©Ü
 *
gG’”©Ü
 = 
Ãw
 
	`TagG’”©Ü
( 1000 );

86 
boŞ
 
IgnÜeD©a
 = 
çl£
;

87 
boŞ
 
Ev’tDriv’
 = 
çl£
;

89 
ušt64_t
 
simuÏ‹Cyşes
;

90 
ušt64_t
 
cu¼’tCyşe
;

92 ifĞ
¬gc
 < 4 )

94 
¡d
::
cout
 << "Usage:‚vmain CONFIG_FILE TRACE_FILE CYCLES [PARAM=value ...]"

95 << 
¡d
::
’dl
;

100 
¡d
::
cout
 << "NVMaš commªd†šis:" << std::
’dl
;

101  
curArg
 = 0; curArg < 
¬gc
; ++curArg )

103 
¡d
::
cout
 << 
¬gv
[
curArg
] << " ";

105 
¡d
::
cout
 << std::
’dl
 << std::endl;

107 
cÚfig
->
	`R—d
Ğ
¬gv
[1] );

108 
cÚfig
->
	`S‘SimIÁ”çû
Ğ
simIÁ”çû
 );

109 
	`S‘Ev’tQueue
Ğ
mašEv’tQueue
 );

110 
	`S‘Glob®Ev’tQueue
Ğ
glob®Ev’tQueue
 );

111 
	`S‘Sts
Ğ
¡©s
 );

112 
	`S‘TagG’”©Ü
Ğ
gG’”©Ü
 );

113 
¡d
::
of¡»am
 
¡©SŒ—m
;

116 ifĞ
¬gc
 > 4 )

118  
curArg
 = 4; curArg < 
¬gc
; ++curArg )

120 
¡d
::
¡ršg
 
şP¬am
, 
şV®ue
, 
şPaœ
;

122 
şPaœ
 = 
¬gv
[
curArg
];

123 
şP¬am
 = 
şPaœ
.
	`sub¡r
Ğ0, clPaœ.
	`fšd_fœ¡_of
("="));

124 
şV®ue
 = 
şPaœ
.
	`sub¡r
ĞşPaœ.
	`fšd_fœ¡_of
("="è+ 1, 
¡d
::
¡ršg
::
Åos
 );

126 
¡d
::
cout
 << "Ov”ridšg " << 
şP¬am
 << " w™h '" << 
şV®ue
 << "'" << std::
’dl
;

128 
cÚfig
->
	`S‘V®ue
Ğ
şP¬am
, 
şV®ue
 );

132 ifĞ
cÚfig
->
	`KeyExi¡s
( "StatsFile" ) )

134 
¡©SŒ—m
.
	`İ’
Ğ
cÚfig
->
	`G‘SŒšg
Ğ"StsFe" ).
	`c_¡r
(),

135 
¡d
::
of¡»am
::
out
 | std::of¡»am::
­p
 );

138 ifĞ
cÚfig
->
	`KeyExi¡s
Ğ"IgnÜeD©a" ) && cÚfig->
	`G‘SŒšg
( "IgnoreData" ) == "true" )

140 
IgnÜeD©a
 = 
Œue
;

143 
cÚfig
->
	`G‘BoŞ
Ğ"Ev’tDriv’", 
Ev’tDriv’
 );

146 
¡d
::
veùÜ
<¡d::
¡ršg
>& 
hookLi¡
 = 
cÚfig
->
	`G‘Hooks
( );

147 
¡d
::
cout
<<"Debug: begš‡dd hook"<<¡d::
’dl
;

148  
size_t
 
i
 = 0; i < 
hookLi¡
.
	`size
( ); i++ )

150 
¡d
::
cout
 << "C»©šg hook " << 
hookLi¡
[
i
] << std::
’dl
;

152 
NVMObjeù
 *
hook
 = 
HookFaùÜy
::
	`C»©eHook
Ğ
hookLi¡
[
i
] );

154 ifĞ
hook
 !ğ
NULL
 )

156 
	`AddHook
Ğ
hook
 );

157 
hook
->
	`S‘P¬’t
Ğ
this
 );

158 
hook
->
	`In™
Ğ
cÚfig
 );

162 
¡d
::
cout
 << "Warning: Could‚ot create‡ hook‚amed `"

163 << 
hookLi¡
[
i
] << "'." << 
¡d
::
’dl
;

167 
	`AddChd
Ğ
nvmaš
 );

168 
nvmaš
->
	`S‘P¬’t
Ğ
this
 );

170 
glob®Ev’tQueue
->
	`S‘F»qu’cy
Ğ
cÚfig
->
	`G‘EÃrgy
( "CPUFreq" ) * 1000000.0 );

171 
glob®Ev’tQueue
->
	`AddSy¡em
Ğ
nvmaš
, 
cÚfig
 );

173 
simIÁ”çû
->
	`S‘CÚfig
Ğ
cÚfig
, 
Œue
 );

174 
nvmaš
->
	`S‘CÚfig
Ğ
cÚfig
, "deçuÉMemÜy", 
Œue
 );

175 
¡d
::
cout
<<"Debug::®»ady s‘ cÚfig oànvmaš,¿û maš"<<¡d::
’dl
;

176 
¡d
::
cout
 << "ŒaûMaš (" << (*)(
this
è<< ")" << std::
’dl
;

177 
nvmaš
->
	`PrštH›¿rchy
( );

179 ifĞ
cÚfig
->
	`KeyExi¡s
( "TraceReader" ) )

180 
Œaû
 = 
T¿ûR—d”FaùÜy
::
	`C»©eNewT¿ûR—d”
(

181 
cÚfig
->
	`G‘SŒšg
( "TraceReader" ) );

183 
Œaû
 = 
T¿ûR—d”FaùÜy
::
	`C»©eNewT¿ûR—d”
( "NVMainTrace" );

185 
Œaû
->
	`S‘T¿ûFe
Ğ
¬gv
[2] );

187 ifĞ
¬gc
 == 3 )

188 
simuÏ‹Cyşes
 = 0;

190 
simuÏ‹Cyşes
 = 
	`©oi
Ğ
¬gv
[3] );

192 
¡d
::
cout
 << "*** SimuÏtšg " << 
simuÏ‹Cyşes
 << " input cycles. (";

198 
simuÏ‹Cyşes
 = (
ušt64_t
)
	`û
Ğ(()(
cÚfig
->
	`G‘V®ue
( "CPUFreq" ))

199 / ()(
cÚfig
->
	`G‘V®ue
Ğ"CLK" ))è* 
simuÏ‹Cyşes
 );

201 
¡d
::
cout
 << 
simuÏ‹Cyşes
 << " memÜy cyşesè***" << std::
’dl
;

203 
cu¼’tCyşe
 = 0;

204  
cu¼’tCyşe
 <ğ
simuÏ‹Cyşes
 || simulateCycles == 0 )

206 ifĞ!
Œaû
->
	`G‘NextAcûss
Ğ

 ) )

208 
¡d
::
cout
 << "Could‚ot„ead‚ext†ine fromrace file!"

209 << 
¡d
::
’dl
;

227 
NVMašReque¡
 *
»que¡
 = 
Ãw
 
	`NVMašReque¡
( );

229 
»que¡
->
add»ss
 = 

->
	`G‘Add»ss
( );

230 
»que¡
->
ty³
 = 

->
	`G‘O³¿tiÚ
( );

231 
»que¡
->
bulkCmd
 = 
CMD_NOP
;

232 
»que¡
->
th»adId
 = 

->
	`G‘Th»adId
( );

233 ifĞ!
IgnÜeD©a
 ) 
»que¡
->
d©a
 = 

->
	`G‘D©a
( );

234 
»que¡
->
¡©us
 = 
MEM_REQUEST_INCOMPLETE
;

235 
»que¡
->
owÃr
 = (
NVMObjeù
 *)
this
;

241 ifĞ
cÚfig
->
	`KeyExi¡s
( "IgnoreTraceCycle" )

242 && 
cÚfig
->
	`G‘SŒšg
( "IgnoreTraceCycle" ) == "true" )

243 

->
	`S‘Lše
Ğ->
	`G‘Add»ss
Ğ),l->
	`G‘O³¿tiÚ
( ), 0,

244 

->
	`G‘D©a
Ğ),l->
	`G‘Th»adId
( ) );

246 ifĞ
»que¡
->
ty³
 !ğ
READ
 &&„eque¡->ty³ !ğ
WRITE
 )

247 
¡d
::
cout
 << "ŒaûMaš: UnknowÀO³¿tiÚ: " << 
»que¡
->
ty³


248 << 
¡d
::
’dl
;

254 ifĞ

->
	`G‘Cyşe
Ğè> 
simuÏ‹Cyşes
 && simulateCycles != 0 )

256 ifĞ
Ev’tDriv’
 )

258 
glob®Ev’tQueue
->
	`Cyşe
Ğ
simuÏ‹Cyşes
 - 
cu¼’tCyşe
 );

259 
cu¼’tCyşe
 +ğ
simuÏ‹Cyşes
 - currentCycle;

265  
cu¼’tCyşe
 < 
simuÏ‹Cyşes
 )

267 
	`G‘Chd
Ğ)->
	`Cyşe
( 1 );

269 
cu¼’tCyşe
++;

282 ifĞ

->
	`G‘Cyşe
Ğè> 
cu¼’tCyşe
 )

284 ifĞ
Ev’tDriv’
 )

286 
glob®Ev’tQueue
->
	`Cyşe
Ğ

->
	`G‘Cyşe
(è- 
cu¼’tCyşe
 );

287 
cu¼’tCyşe
 = 
glob®Ev’tQueue
->
	`G‘Cu¼’tCyşe
( );

292  
cu¼’tCyşe
 < 

->
	`G‘Cyşe
( ) )

294 ifĞ
cu¼’tCyşe
 >ğ
simuÏ‹Cyşes
 && simulateCycles != 0 )

297 
	`G‘Chd
Ğ)->
	`Cyşe
( 1 );

299 
cu¼’tCyşe
++;

303 ifĞ
cu¼’tCyşe
 >ğ
simuÏ‹Cyşes
 && simulateCycles != 0 )

311  !
	`G‘Chd
Ğ)->
	`IsIssuabË
Ğ
»que¡
 ) )

313 ifĞ
cu¼’tCyşe
 >ğ
simuÏ‹Cyşes
 && simulateCycles != 0 )

316 ifĞ
Ev’tDriv’
 )

318 
glob®Ev’tQueue
->
	`Cyşe
( 1 );

319 
cu¼’tCyşe
 = 
glob®Ev’tQueue
->
	`G‘Cu¼’tCyşe
( );

323 
	`G‘Chd
Ğ)->
	`Cyşe
( 1 );

324 
cu¼’tCyşe
++;

328 
	`G‘Chd
Ğ)->
	`IssueCommªd
Ğ
»que¡
 );

330 ifĞ
cu¼’tCyşe
 >ğ
simuÏ‹Cyşes
 && simulateCycles != 0 )

335 
	`G‘Chd
Ğ)->
	`C®cuÏ‹Sts
( );

336 
¡d
::
o¡»am
& 
»fSŒ—m
 = (
¡©SŒ—m
.
	`is_İ’
()è? stSŒ—m : std::
cout
;

337 
¡©s
->
	`PrštAÎ
Ğ
»fSŒ—m
 );

339 
¡d
::
cout
 << "Ex™šg‡ˆcyş" << 
cu¼’tCyşe
 << " because simCycles "

340 << 
simuÏ‹Cyşes
 << "„—ched." << 
¡d
::
’dl
;

342 
d–‘e
 
cÚfig
;

343 
d–‘e
 
¡©s
;

346 
	}
}

348 
	gT¿ûMaš
::
	$Cyşe
Ğ
ncyşe_t
 )

351 
	}
}

	@traceSim/traceMain.h

36 #iâdeà
__TRACESIM_TRACEMAIN_H__


37 
	#__TRACESIM_TRACEMAIN_H__


	)

40 
	~"¤c/NVMObjeù.h
"

43 
Çme¥aû
 
	gNVM
 {

46 şas 
	cT¿ûMaš
 : 
public
 
NVMObjeù


48 
public
:

49 
T¿ûMaš
( );

50 ~
T¿ûMaš
( );

52 
RunT¿û
Ğ
¬gc
, *
¬gv
[] );

54 
Cyşe
Ğ
ncyşe_t
 
¡•s
 );

	@traceWriter/DRAMPower2Trace/DRAMPower2TraceWriter.cpp

34 
	~"ŒaûWr™”/DRAMPow”2T¿û/DRAMPow”2T¿ûWr™”.h
"

35 
	~"¤c/P¬ams.h
"

36 
	~"šşude/NVMH–³rs.h
"

38 
usšg
 
Çme¥aû
 
	gNVM
;

40 
	gDRAMPow”2T¿ûWr™”
::
	$DRAMPow”2T¿ûWr™”
Ğè: 
	$Ï¡Commªd
(0)

43 
	}
}

45 
DRAMPow”2T¿ûWr™”
::~
	$DRAMPow”2T¿ûWr™”
( )

48 
	}
}

50 
DRAMPow”2T¿ûWr™”
::
	$In™
Ğ
CÚfig
 *
cÚf
 )

52 
P¬ams
 *
p
 = 
Ãw
 
	`P¬ams
( );

53 
p
->
	`S‘P¬ams
Ğ
cÚf
 );

55 ifĞ
cÚf
->
	`KeyExi¡s
( "DRAMPower2XML" ) )

57 
¡d
::
¡ršg
 
xmlFeName
 = 
cÚf
->
	`G‘SŒšg
( "DRAMPower2XML" );

59 ifĞ
xmlFeName
[0] != '/' )

61 
xmlFeName
 = 
NVM
::
	`G‘FeP©h
Ğ
cÚf
->
	`G‘FeName
() );

62 
xmlFeName
 +ğ
cÚf
->
	`G‘SŒšg
( "DRAMPower2XML" );

65 
xmlFe
.
	`İ’
Ğ
xmlFeName
.
	`c_¡r
(),

66 
¡d
::
of¡»am
::
out
 | std::of¡»am::
Œunc
 );

68 ifĞ!
xmlFe
.
	`is_İ’
( ) )

70 
¡d
::
û¼
 << "DRAMPow”2T¿ûWr™”: Could‚Ù o³Àf" << 
cÚf
->
	`G‘SŒšg
Ğ"DRAMPow”2XML" ) << std::
’dl
;

74 
xmlFe
 << "<!DOCTYPE memspec SYSTEM \"memspec.dtd\">\n"

79 << " <·¿m‘” id=\"nbrOfBªks\"y³=\"ušt\" v®ue=\"" << 
p
->
BANKS
 << "\" />\n"

80 << " <·¿m‘” id=\"d©aR©e\"y³=\"ušt\" v®ue=\"" << 
p
->
RATE
 << "\" />\n"

84 << " <·¿m‘” id=\"şkMhz\"y³=\"doubË\" v®ue=\"" << 
p
->
CLK
 << "\" />\n"

85 << " <·¿m‘” id=\"RC\"y³=\"ušt\" v®ue=\"" << 
p
->
tRP
 +…->
tRAS
 << "\" />\n"

86 << " <·¿m‘” id=\"RCD\"y³=\"ušt\" v®ue=\"" << 
p
->
tRCD
 << "\" />\n"

87 << " <·¿m‘” id=\"RL\"y³=\"ušt\" v®ue=\"" << 
p
->
tCAS
 << "\" />\n"

88 << " <·¿m‘” id=\"RP\"y³=\"ušt\" v®ue=\"" << 
p
->
tRP
 << "\" />\n"

89 << " <·¿m‘” id=\"RFC\"y³=\"ušt\" v®ue=\"" << 
p
->
tRFC
 << "\" />\n"

90 << " <·¿m‘” id=\"RAS\"y³=\"ušt\" v®ue=\"" << 
p
->
tRAS
 << "\" />\n"

91 << " <·¿m‘” id=\"WL\"y³=\"ušt\" v®ue=\"" << 
p
->
tCWD
 << "\" />\n"

92 << " <·¿m‘” id=\"AL\"y³=\"ušt\" v®ue=\"" << 
p
->
tAL
 << "\" />\n"

94 << " <·¿m‘” id=\"RTP\"y³=\"ušt\" v®ue=\"" << 
p
->
tRTP
 << "\" />\n"

95 << " <·¿m‘” id=\"WR\"y³=\"ušt\" v®ue=\"" << 
p
->
tWR
 << "\" />\n"

96 << " <·¿m‘” id=\"XP\"y³=\"ušt\" v®ue=\"" << 
p
->
tXP
 << "\" />\n"

97 << " <·¿m‘” id=\"XPDLL\"y³=\"ušt\" v®ue=\"" << 
p
->
tXPDLL
 << "\" />\n"

98 << " <·¿m‘” id=\"XS\"y³=\"ušt\" v®ue=\"" << 
p
->
tXS
 << "\" />\n"

99 << " <·¿m‘” id=\"XSDLL\"y³=\"ušt\" v®ue=\"" << 
p
->
tXSDLL
 << "\" />\n"

102 << " <·¿m‘” id=\"idd0\"y³=\"doubË\" v®ue=\"" << 
p
->
EIDD0
 << "\" />\n"

103 << " <·¿m‘” id=\"idd2p0\"y³=\"doubË\" v®ue=\"" << 
p
->
EIDD2P0
 << "\" />\n"

104 << " <·¿m‘” id=\"idd2p1\"y³=\"doubË\" v®ue=\"" << 
p
->
EIDD2P1
 << "\" />\n"

105 << " <·¿m‘” id=\"idd2n\"y³=\"doubË\" v®ue=\"" << 
p
->
EIDD2N
 << "\" />\n"

106 << " <·¿m‘” id=\"idd3p0\"y³=\"doubË\" v®ue=\"" << 
p
->
EIDD3P
 << "\" />\n"

107 << " <·¿m‘” id=\"idd3p1\"y³=\"doubË\" v®ue=\"" << 
p
->
EIDD3P
 << "\" />\n"

108 << " <·¿m‘” id=\"idd3n\"y³=\"doubË\" v®ue=\"" << 
p
->
EIDD3N
 << "\" />\n"

109 << " <·¿m‘” id=\"idd4w\"y³=\"doubË\" v®ue=\"" << 
p
->
EIDD4W
 << "\" />\n"

110 << " <·¿m‘” id=\"idd4r\"y³=\"doubË\" v®ue=\"" << 
p
->
EIDD4R
 << "\" />\n"

111 << " <·¿m‘” id=\"idd5\"y³=\"doubË\" v®ue=\"" << 
p
->
EIDD5B
 << "\" />\n"

112 << " <·¿m‘” id=\"idd6\"y³=\"doubË\" v®ue=\"" << 
p
->
EIDD6
 << "\" />\n"

113 << " <·¿m‘” id=\"vdd\"y³=\"doubË\" v®ue=\"" << 
p
->
VŞge
 << "\" />\n"

114 << " <·¿m‘” id=\"şk_³riod\"y³=\"doubË\" v®ue=\"" << 1000.0 / 
¡©ic_ÿ¡
<>(
p
->
CLK
) << "\" />\n"

118 
xmlFe
.
	`şo£
( );

121 
d–‘e
 
p
;

122 
	}
}

124 
	gDRAMPow”2T¿ûWr™”
::
S‘T¿ûFe
Ğ
¡d
::
¡ršg
 
fe
 )

129 
ŒaûFe
 = 
fe
;

131 
	gŒaû
.
İ’
Ğ
ŒaûFe
.
c_¡r
( ) );

133 ifĞ!
	gŒaû
.
is_İ’
( ) )

135 
	g¡d
::
cout
 << "W¬nšg: Could‚Ù o³ÀŒaû f" << 
fe


136 << ". OuuˆwÈbsuµ»s£d." << 
¡d
::
’dl
;

140 
	g¡d
::
¡ršg
 
DRAMPow”2T¿ûWr™”
::
	$G‘T¿ûFe
( )

142  
ŒaûFe
;

143 
	}
}

146 
boŞ
 
	gDRAMPow”2T¿ûWr™”
::
	$G‘P”ChªÃlT¿ûs
( )

148  
çl£
;

149 
	}
}

151 
boŞ
 
	gDRAMPow”2T¿ûWr™”
::
	$G‘P”RªkT¿ûs
( )

153  
Œue
;

154 
	}
}

156 
boŞ
 
	gDRAMPow”2T¿ûWr™”
::
	$S‘NextAcûss
Ğ
T¿ûLše
 *
ÃxtAcûss
 )

158 
boŞ
 
rv
 = 
çl£
;

160 ifĞ
Œaû
.
	`is_İ’
( ) )

162 
	`Wr™eT¿ûLše
Ğ
Œaû
, 
ÃxtAcûss
 );

163 
rv
 = 
Œaû
.
	`good
();

166 ifĞ
this
->
	`G‘Echo
() )

168 
	`Wr™eT¿ûLše
Ğ
¡d
::
cout
, 
ÃxtAcûss
 );

169 
rv
 = 
Œue
;

172  
rv
;

173 
	}
}

175 
	gDRAMPow”2T¿ûWr™”
::
Wr™eT¿ûLše
Ğ
¡d
::
o¡»am
& 
¡»am
, 
T¿ûLše
 *
lše
 )

177 
NVMAdd»ss
 
	gaddr
 = 
lše
->
G‘Add»ss
( );

179 
as£¹
Ğ
addr
.
IsT¿n¦©ed
() );

182 
	gÏ¡Commªd
 = 0;

184  
	glše
->
G‘O³¿tiÚ
() )

186 
	gACTIVATE
:

188 
¡»am
 << (
lše
->
G‘Cyşe
(è- 
Ï¡Commªd
è<< ",ACT," << 
addr
.
G‘Bªk
(è<< 
¡d
::
’dl
;

189 
	gÏ¡Commªd
 = 
lše
->
G‘Cyşe
();

192 
	gREAD
:

194 
¡»am
 << (
lše
->
G‘Cyşe
(è- 
Ï¡Commªd
è<< ",RD," << 
addr
.
G‘Bªk
(è<< 
¡d
::
’dl
;

195 
	gÏ¡Commªd
 = 
lše
->
G‘Cyşe
();

198 
	gREAD_PRECHARGE
:

200 
¡»am
 << (
lše
->
G‘Cyşe
(è- 
Ï¡Commªd
è<< ",RDA," << 
addr
.
G‘Bªk
(è<< 
¡d
::
’dl
;

201 
	gÏ¡Commªd
 = 
lše
->
G‘Cyşe
();

204 
	gWRITE
:

206 
¡»am
 << (
lše
->
G‘Cyşe
(è- 
Ï¡Commªd
è<< ",WR," << 
addr
.
G‘Bªk
(è<< 
¡d
::
’dl
;

207 
	gÏ¡Commªd
 = 
lše
->
G‘Cyşe
();

210 
	gWRITE_PRECHARGE
:

212 
¡»am
 << (
lše
->
G‘Cyşe
(è- 
Ï¡Commªd
è<< ",WRA," << 
addr
.
G‘Bªk
(è<< 
¡d
::
’dl
;

213 
	gÏ¡Commªd
 = 
lše
->
G‘Cyşe
();

216 
	gPRECHARGE
:

218 
¡»am
 << (
lše
->
G‘Cyşe
(è- 
Ï¡Commªd
è<< ",PRE," << 
addr
.
G‘Bªk
(è<< 
¡d
::
’dl
;

219 
	gÏ¡Commªd
 = 
lše
->
G‘Cyşe
();

222 
	gPRECHARGE_ALL
:

227 
¡»am
 << (
lše
->
G‘Cyşe
(è- 
Ï¡Commªd
è<< ",PRE," << 
addr
.
G‘Bªk
(è<< 
¡d
::
’dl
;

228 
	gÏ¡Commªd
 = 
lše
->
G‘Cyşe
();

231 
	gREFRESH
:

233 
¡»am
 << (
lše
->
G‘Cyşe
(è- 
Ï¡Commªd
è<< ",REF,0" << 
¡d
::
’dl
;

234 
	gÏ¡Commªd
 = 
lše
->
G‘Cyşe
();

237 
	gPOWERDOWN_PDA
:

239 
¡»am
 << (
lše
->
G‘Cyşe
(è- 
Ï¡Commªd
è<< ",PDN_F_ACT,0" << 
¡d
::
’dl
;

240 
	gÏ¡Commªd
 = 
lše
->
G‘Cyşe
();

241 
	gpdS‹
 = 
DRAMPow”2T¿ûWr™”
::
PDN_F_ACT
;

244 
	gPOWERDOWN_PDPF
:

246 
¡»am
 << (
lše
->
G‘Cyşe
(è- 
Ï¡Commªd
è<< ",PDN_F_PRE,0" << 
¡d
::
’dl
;

247 
	gÏ¡Commªd
 = 
lše
->
G‘Cyşe
();

248 
	gpdS‹
 = 
DRAMPow”2T¿ûWr™”
::
PDN_F_PRE
;

251 
	gPOWERDOWN_PDPS
:

253 
¡»am
 << (
lše
->
G‘Cyşe
(è- 
Ï¡Commªd
è<< ",PDN_S_PRE,0" << 
¡d
::
’dl
;

254 
	gÏ¡Commªd
 = 
lše
->
G‘Cyşe
();

255 
	gpdS‹
 = 
DRAMPow”2T¿ûWr™”
::
PDN_S_PRE
;

258 
	gPOWERUP
:

260 ifĞ
pdS‹
 =ğ
DRAMPow”2T¿ûWr™”
::
PDN_F_ACT
 )

262 
¡»am
 << (
lše
->
G‘Cyşe
(è- 
Ï¡Commªd
è<< ",PUP_ACT,0" << 
¡d
::
’dl
;

264 ifĞ
	gpdS‹
 =ğ
DRAMPow”2T¿ûWr™”
::
PDN_F_PRE
 ||

265 
pdS‹
 =ğ
DRAMPow”2T¿ûWr™”
::
PDN_S_PRE
 )

267 
¡»am
 << (
lše
->
G‘Cyşe
(è- 
Ï¡Commªd
è<< ",PDN_S_PRE,0" << 
¡d
::
’dl
;

271 
	g¡d
::
û¼
 << "DRAMPow”2T¿ûWr™”: UnknowÀpow”dowÀ¡©e" << 
¡d
::
’dl
;

273 
	gpdS‹
 = 
DRAMPow”2T¿ûWr™”
::
PUP
;

275 
	gÏ¡Commªd
 = 
lše
->
G‘Cyşe
();

	@traceWriter/DRAMPower2Trace/DRAMPower2TraceWriter.h

34 #iâdeà
__DRAMPOWER2TRACEWRITER_H__


35 
	#__DRAMPOWER2TRACEWRITER_H__


	)

37 
	~"ŒaûWr™”/G’”icT¿ûWr™”.h
"

38 
	~<¡ršg
>

39 
	~<io¡»am
>

40 
	~<f¡»am
>

42 
Çme¥aû
 
	gNVM
 {

44 şas 
	cDRAMPow”2T¿ûWr™”
 : 
public
 
G’”icT¿ûWr™”


46 
public
:

47 
DRAMPow”2T¿ûWr™”
( );

48 ~
DRAMPow”2T¿ûWr™”
( );

50 
In™
Ğ
CÚfig
 *
cÚf
 );

52 
S‘T¿ûFe
Ğ
¡d
::
¡ršg
 
fe
 );

53 
	g¡d
::
¡ršg
 
G‘T¿ûFe
( );

55 
boŞ
 
G‘P”ChªÃlT¿ûs
( );

56 
boŞ
 
G‘P”RªkT¿ûs
( );

58 
boŞ
 
S‘NextAcûss
Ğ
T¿ûLše
 *
ÃxtAcûss
 );

60 
	g´iv©e
:

61 
	epdS‹s
 { 
PUP
, 
	gPDN_F_ACT
, 
	gPDN_F_PRE
, 
	gPDN_S_PRE
 };

63 
pdS‹s
 
	gpdS‹
;

65 
	g¡d
::
¡ršg
 
ŒaûFe
;

66 
	g¡d
::
of¡»am
 
Œaû
, 
	gxmlFe
;

68 
ncyşe_t
 
	gÏ¡Commªd
;

69 
ncouÁ”_t
 
	gdeviûWidth
;

71 
Wr™eT¿ûLše
Ğ
¡d
::
o¡»am
& , 
T¿ûLše
 *
lše
 );

	@traceWriter/GenericTraceWriter.cpp

34 
	~"ŒaûWr™”/G’”icT¿ûWr™”.h
"

36 
	~<veùÜ
>

37 
	~<as£¹.h
>

39 
usšg
 
Çme¥aû
 
	gNVM
;

42 
	gG’”icT¿ûWr™”
::
	$G’”icT¿ûWr™”
Ğè: 
	`echo_Ú
(
çl£
), 
	`³rChªÃl
(çl£), 
	$³rRªk
(
çl£
)

45 
	}
}

47 
	gG’”icT¿ûWr™”
::~
	$G’”icT¿ûWr™”
( )

50 
	}
}

52 
G’”icT¿ûWr™”
::
	$In™
Ğ
CÚfig
 * )

55 
	}
}

57 
G’”icT¿ûWr™”
::
	$S‘Echo
Ğ
boŞ
 
echo
 )

59 
echo_Ú
 = 
echo
;

60 
	}
}

62 
boŞ
 
	gG’”icT¿ûWr™”
::
	$G‘Echo
( )

64  
echo_Ú
;

65 
	}
}

67 
	gG’”icT¿ûWr™”
::
	$S‘P”ChªÃlT¿ûs
Ğ
boŞ
 
³rChªÃl
 )

69 
this
->
³rChªÃl
 =…erChannel;

70 
	}
}

72 
	gG’”icT¿ûWr™”
::
	$S‘P”RªkT¿ûs
Ğ
boŞ
 
³rRªk
 )

74 
this
->
³rRªk
 =…erRank;

75 
	}
}

77 
boŞ
 
	gG’”icT¿ûWr™”
::
	$G‘P”ChªÃlT¿ûs
( )

79  
this
->
³rChªÃl
;

80 
	}
}

82 
boŞ
 
	gG’”icT¿ûWr™”
::
	$G‘P”RªkT¿ûs
( )

84  
this
->
³rRªk
;

85 
	}
}

87 
	gG’”icT¿ûWr™”
::
S‘NextNAcûs£s
Ğ
N
, 
¡d
::
veùÜ
<
T¿ûLše
 *> *
ÃxtAcûs£s
 )

89 
numWr™‹n
 = 0;

91  
	glšeIdx
 = 0;†šeIdx < 
	gN
;†ineIdx++ )

93 ifĞ
S‘NextAcûss
Ğ
ÃxtAcûs£s
->
©
(
lšeIdx
) ) )

94 
	gnumWr™‹n
++;

97  
	gnumWr™‹n
;

	@traceWriter/GenericTraceWriter.h

34 #iâdeà
__GENERICTRACEWRITER_H__


35 
	#__GENERICTRACEWRITER_H__


	)

37 
	~"ŒaûR—d”/T¿ûLše.h
"

38 
	~"¤c/CÚfig.h
"

40 
	~<¡ršg
>

41 
	~<veùÜ
>

42 
	~<c¡dlib
>

43 
	~<ÿs£¹
>

45 
Çme¥aû
 
	gNVM
 {

47 şas 
	cG’”icT¿ûWr™”


49 
	gpublic
:

50 
G’”icT¿ûWr™”
( );

51 
	gvœtu®
 ~
G’”icT¿ûWr™”
( );

53 
vœtu®
 
In™
Ğ
CÚfig
 *
cÚf
 );

55 
vœtu®
 
S‘T¿ûFe
Ğ
¡d
::
¡ršg
 
fe
 ) = 0;

56 
vœtu®
 
	g¡d
::
¡ršg
 
G‘T¿ûFe
( ) = 0;

58 
vœtu®
 
S‘Echo
Ğ
boŞ
 
echo
 );

59 
vœtu®
 
boŞ
 
G‘Echo
( );

61 
vœtu®
 
S‘P”ChªÃlT¿ûs
Ğ
boŞ
 
³rChªÃl
 );

62 
vœtu®
 
S‘P”RªkT¿ûs
Ğ
boŞ
 
³rRªk
 );

64 
vœtu®
 
boŞ
 
G‘P”ChªÃlT¿ûs
( );

65 
vœtu®
 
boŞ
 
G‘P”RªkT¿ûs
( );

67 
vœtu®
 
boŞ
 
S‘NextAcûss
Ğ
T¿ûLše
 *
ÃxtAcûss
 ) = 0;

68 
vœtu®
 
S‘NextNAcûs£s
Ğ
N
,

69 
¡d
::
veùÜ
<
T¿ûLše
 *> *
ÃxtAcûs£s
 );

71 
	g´iv©e
:

72 
boŞ
 
echo_Ú
;

73 
boŞ
 
	g³rChªÃl
;

74 
boŞ
 
	g³rRªk
;

	@traceWriter/NVMainTrace/NVMainTraceWriter.cpp

34 
	~"ŒaûWr™”/NVMašT¿û/NVMašT¿ûWr™”.h
"

36 
usšg
 
Çme¥aû
 
	gNVM
;

38 
	gNVMašT¿ûWr™”
::
	$NVMašT¿ûWr™”
( )

41 
	}
}

43 
NVMašT¿ûWr™”
::~
	$NVMašT¿ûWr™”
( )

46 
	}
}

48 
NVMašT¿ûWr™”
::
S‘T¿ûFe
Ğ
¡d
::
¡ršg
 
fe
 )

53 
ŒaûFe
 = 
fe
;

55 
	gŒaû
.
İ’
Ğ
ŒaûFe
.
c_¡r
( ) );

57 ifĞ!
	gŒaû
.
is_İ’
( ) )

59 
	g¡d
::
cout
 << "W¬nšg: Could‚Ù o³ÀŒaû f" << 
fe


60 << ". OuuˆwÈbsuµ»s£d." << 
¡d
::
’dl
;

64 
	g¡d
::
¡ršg
 
NVMašT¿ûWr™”
::
	$G‘T¿ûFe
( )

66  
ŒaûFe
;

67 
	}
}

69 
boŞ
 
	gNVMašT¿ûWr™”
::
	$S‘NextAcûss
Ğ
T¿ûLše
 *
ÃxtAcûss
 )

71 
boŞ
 
rv
 = 
çl£
;

73 ifĞ
Œaû
.
	`is_İ’
( ) )

75 
	`Wr™eT¿ûLše
Ğ
Œaû
, 
ÃxtAcûss
 );

76 
rv
 = 
Œaû
.
	`good
();

79 ifĞ
this
->
	`G‘Echo
() )

81 
	`Wr™eT¿ûLše
Ğ
¡d
::
cout
, 
ÃxtAcûss
 );

82 
rv
 = 
Œue
;

85  
rv
;

86 
	}
}

88 
	gNVMašT¿ûWr™”
::
Wr™eT¿ûLše
Ğ
¡d
::
o¡»am
& 
¡»am
, 
T¿ûLše
 *
lše
 )

90 
	gNVMD©aBlock
& 
	gd©a
 = 
lše
->
G‘D©a
( );

93 ifĞ
	glše
->
G‘O³¿tiÚ
(è!ğ
READ
 && 
lše
->G‘O³¿tiÚ(è!ğ
WRITE
 )

97 
	g¡»am
 << 
	glše
->
G‘Cyşe
( ) << " ";

100 ifĞ
	glše
->
G‘O³¿tiÚ
Ğè=ğ
READ
 )

101 
¡»am
 << "R ";

102 ifĞ
	glše
->
G‘O³¿tiÚ
Ğè=ğ
WRITE
 )

103 
¡»am
 << "W ";

106 
	g¡»am
 << 
	g¡d
::
hex
 << "0x" << 
lše
->
G‘Add»ss
Ğ).
G‘PhysiÿlAdd»ss
( )

107 << 
¡d
::
dec
 << " ";

110 
	g¡»am
 << 
	gd©a
 << " ";

113 
	g¡»am
 << 
	glše
->
G‘Th»adId
Ğè<< 
	g¡d
::
’dl
;

	@traceWriter/NVMainTrace/NVMainTraceWriter.h

34 #iâdeà
__NVMAINTRACEWRITER_H__


35 
	#__NVMAINTRACEWRITER_H__


	)

37 
	~"ŒaûWr™”/G’”icT¿ûWr™”.h
"

38 
	~<¡ršg
>

39 
	~<io¡»am
>

40 
	~<f¡»am
>

42 
Çme¥aû
 
	gNVM
 {

44 şas 
	cNVMašT¿ûWr™”
 : 
public
 
G’”icT¿ûWr™”


46 
public
:

47 
NVMašT¿ûWr™”
( );

48 ~
NVMašT¿ûWr™”
( );

50 
S‘T¿ûFe
Ğ
¡d
::
¡ršg
 
fe
 );

51 
	g¡d
::
¡ršg
 
G‘T¿ûFe
( );

53 
boŞ
 
S‘NextAcûss
Ğ
T¿ûLše
 *
ÃxtAcûss
 );

55 
	g´iv©e
:

56 
¡d
::
¡ršg
 
ŒaûFe
;

57 
	g¡d
::
of¡»am
 
Œaû
;

59 
Wr™eT¿ûLše
Ğ
¡d
::
o¡»am
& , 
T¿ûLše
 *
lše
 );

	@traceWriter/TraceWriterFactory.cpp

34 
	~"ŒaûWr™”/T¿ûWr™”FaùÜy.h
"

35 
	~<io¡»am
>

38 
	~"ŒaûWr™”/NVMašT¿û/NVMašT¿ûWr™”.h
"

39 
	~"ŒaûWr™”/V”ogT¿û/V”ogT¿ûWr™”.h
"

40 
	~"ŒaûWr™”/DRAMPow”2T¿û/DRAMPow”2T¿ûWr™”.h
"

42 
usšg
 
Çme¥aû
 
	gNVM
;

44 
G’”icT¿ûWr™”
 *
	gT¿ûWr™”FaùÜy
::
C»©eNewT¿ûWr™”
Ğ
¡d
::
¡ršg
 
wr™”
 )

46 
G’”icT¿ûWr™”
 *
Œaûr
 = 
NULL
;

48 ifĞ
	gwr™”
 == "" )

49 
¡d
::
cout
 << "NVMain: TraceWriter is‚ot set in configuration file!"

50 << 
¡d
::
’dl
;

52 ifĞ
	gwr™”
 == "NVMainTrace" )

53 
Œaûr
 = 
Ãw
 
NVMašT¿ûWr™”
( );

54 ifĞ
	gwr™”
 == "VerilogTrace" )

55 
Œaûr
 = 
Ãw
 
V”ogT¿ûWr™”
( );

56 ifĞ
	gwr™”
 == "DRAMPower2Trace" )

57 
Œaûr
 = 
Ãw
 
DRAMPow”2T¿ûWr™”
( );

59 ifĞ
	gŒaûr
 =ğ
NULL
 )

60 
¡d
::
cout
 << "NVMaš: UnknowÀŒaû wr™” `" << 
wr™”
 << "'."

61 << 
¡d
::
’dl
;

63  
	gŒaûr
;

	@traceWriter/TraceWriterFactory.h

34 #iâdeà
__TRACEWRITER_TRACEWRITERFACTORY_H__


35 
	#__TRACEWRITER_TRACEWRITERFACTORY_H__


	)

37 
	~"ŒaûWr™”/G’”icT¿ûWr™”.h
"

38 
	~<¡ršg
>

40 
Çme¥aû
 
	gNVM
 {

42 şas 
	cT¿ûWr™”FaùÜy


44 
	gpublic
:

45 
T¿ûWr™”FaùÜy
( ) { }

46 ~
T¿ûWr™”FaùÜy
( ) { }

48 
G’”icT¿ûWr™”
 *
C»©eNewT¿ûWr™”
Ğ
¡d
::
¡ršg
 
wr™”
 );

	@traceWriter/VerilogTrace/VerilogTraceWriter.cpp

34 
	~"ŒaûWr™”/V”ogT¿û/V”ogT¿ûWr™”.h
"

36 
usšg
 
Çme¥aû
 
	gNVM
;

38 
	gV”ogT¿ûWr™”
::
	$V”ogT¿ûWr™”
Ğè: 
	$Ï¡Commªd
(0)

41 
	}
}

43 
V”ogT¿ûWr™”
::~
	$V”ogT¿ûWr™”
( )

46 
	}
}

48 
V”ogT¿ûWr™”
::
	$In™
Ğ
CÚfig
 *
cÚf
 )

50 
deviûWidth
 = 
cÚf
->
	`G‘V®ue
( "DeviceWidth" );

52 ifĞ
deviûWidth
 != 4 && deviceWidth % 8 != 0 )

54 
¡d
::
cout
 << "VerilogTraceWriter: Don't know howo write‡ device "

55 << " w™h width " << 
deviûWidth
 << 
¡d
::
’dl
;

56 
	`ex™
(0);

58 
	}
}

60 
	gV”ogT¿ûWr™”
::
S‘T¿ûFe
Ğ
¡d
::
¡ršg
 
fe
 )

65 
ŒaûFe
 = 
fe
;

67 
	gŒaû
.
İ’
Ğ
ŒaûFe
.
c_¡r
( ) );

69 ifĞ!
	gŒaû
.
is_İ’
( ) )

71 
	g¡d
::
cout
 << "W¬nšg: Could‚Ù o³ÀŒaû f" << 
fe


72 << ". OuuˆwÈbsuµ»s£d." << 
¡d
::
’dl
;

76 
	g¡d
::
¡ršg
 
V”ogT¿ûWr™”
::
	$G‘T¿ûFe
( )

78  
ŒaûFe
;

79 
	}
}

82 
boŞ
 
	gV”ogT¿ûWr™”
::
	$G‘P”ChªÃlT¿ûs
( )

84  
çl£
;

85 
	}
}

87 
boŞ
 
	gV”ogT¿ûWr™”
::
	$G‘P”RªkT¿ûs
( )

89  
Œue
;

90 
	}
}

92 
boŞ
 
	gV”ogT¿ûWr™”
::
	$S‘NextAcûss
Ğ
T¿ûLše
 *
ÃxtAcûss
 )

94 
boŞ
 
rv
 = 
çl£
;

96 ifĞ
Œaû
.
	`is_İ’
( ) )

98 
	`Wr™eT¿ûLše
Ğ
Œaû
, 
ÃxtAcûss
 );

99 
rv
 = 
Œaû
.
	`good
();

102 ifĞ
this
->
	`G‘Echo
() )

104 
	`Wr™eT¿ûLše
Ğ
¡d
::
cout
, 
ÃxtAcûss
 );

105 
rv
 = 
Œue
;

108  
rv
;

109 
	}
}

111 
	gV”ogT¿ûWr™”
::
Wr™eT¿ûLše
Ğ
¡d
::
o¡»am
& 
¡»am
, 
T¿ûLše
 *
lše
 )

113 
	gNVMD©aBlock
& 
	gd©a
 = 
lše
->
G‘D©a
( );

114 
NVMAdd»ss
 
	gaddr
 = 
lše
->
G‘Add»ss
( );

116 
as£¹
Ğ
addr
.
IsT¿n¦©ed
() );

118  
	glše
->
G‘O³¿tiÚ
() )

120 
	gACTIVATE
:

122 
¡»am
 << "‚İ(" << (
lše
->
G‘Cyşe
(è- 
Ï¡Commªd
è<< ");" << 
¡d
::
’dl
;

123 
	gÏ¡Commªd
 = 
lše
->
G‘Cyşe
();

125 
	g¡»am
 << "‡ùiv©e(" << 
	gaddr
.
G‘Bªk
(è<< ", " <<‡ddr.
G‘Row
()

126 << ");" << 
	g¡d
::
’dl
;

129 
	gREAD
:

130 
READ_PRECHARGE
:

132 
¡»am
 << "‚İ(" << (
lše
->
G‘Cyşe
(è- 
Ï¡Commªd
è<< ");" << 
¡d
::
’dl
;

133 
	gÏ¡Commªd
 = 
lše
->
G‘Cyşe
();

135 
	g¡»am
 << "„—d(" << 
	gaddr
.
G‘Bªk
(è<< ", " <<‡ddr.
G‘CŞ
()

136 << ", " << ((
	glše
->
G‘O³¿tiÚ
(è=ğ
READ_PRECHARGE
) ? "1" : "0")

137 << ", 0);" << 
¡d
::
’dl
;

140 
	gWRITE
:

141 
WRITE_PRECHARGE
:

143 
¡»am
 << "‚İ(" << (
lše
->
G‘Cyşe
(è- 
Ï¡Commªd
è<< ");" << 
¡d
::
’dl
;

144 
	gÏ¡Commªd
 = 
lše
->
G‘Cyşe
();

146 
	g¡»am
 << " wr™e(" << 
	gaddr
.
G‘Bªk
(è<< ", " <<‡ddr.
G‘CŞ
()

147 << ", " << ((
	glše
->
G‘O³¿tiÚ
(è=ğ
WRITE_PRECHARGE
) ? "1" : "0")

151  
ncouÁ”_t
 
	gbur¡Idx
 = 0; burstIdx < 8; burstIdx++ )

153 ifĞ
	gdeviûWidth
 =ğ8 || 
deviûWidth
 == 16 )

155  
ncouÁ”_t
 
by‹Idx
 = 0; 
	gby‹Idx
 < (
	gdeviûWidth
 / 8); byteIdx++ )

157 
ušt8_t
 
	gÃxtBy‹
 = 
d©a
.
G‘By‹
(
bur¡Idx
 * (
deviûWidth
 / 8è+ 
by‹Idx
);

159 ifĞ
	gby‹Idx
 !ğ0 || 
bur¡Idx
 !ğ0 ) 
¡»am
 << ", ";

161 
	g¡»am
 << "{8'h" << 
	g¡d
::
hex
 << (
ušt32_t
)
ÃxtBy‹
 << 
¡d
::
dec
 << "}";

164 ifĞ
	gdeviûWidth
 == 4 )

166 ifĞ
bur¡Idx
 % 2 == 0 )

168 
ušt8_t
 
ÃxtBy‹
 = 
d©a
.
G‘By‹
(
bur¡Idx
 / 2);

170 ifĞ
	gbur¡Idx
 !ğ0 ) 
¡»am
 << ", ";

172 
	g¡»am
 << "{8'h" << 
	g¡d
::
hex
 << (
ušt32_t
)
ÃxtBy‹
 << 
¡d
::
dec
 << "}";

177 
	g¡»am
 << "});" << 
	g¡d
::
’dl
;

180 
	gPRECHARGE
:

181 
PRECHARGE_ALL
:

183 
¡»am
 << "‚İ(" << (
lše
->
G‘Cyşe
(è- 
Ï¡Commªd
è<< ");" << 
¡d
::
’dl
;

184 
	gÏ¡Commªd
 = 
lše
->
G‘Cyşe
();

186 
	g¡»am
 << "…»ch¬ge(" << 
	gaddr
.
G‘Bªk
() << ", "

187 << ((
	glše
->
G‘O³¿tiÚ
(è=ğ
PRECHARGE_ALL
) ? "1" : "0")

188 << ");" << 
¡d
::
’dl
;

191 
	gREFRESH
:

193 
¡»am
 << "‚İ(" << (
lše
->
G‘Cyşe
(è- 
Ï¡Commªd
è<< ");" << 
¡d
::
’dl
;

194 
	gÏ¡Commªd
 = 
lše
->
G‘Cyşe
();

196 
	g¡»am
 << "„eäesh;" << 
	g¡d
::
’dl
;

199 
	gPOWERDOWN_PDA
:

200 
POWERDOWN_PDPF
:

201 
POWERDOWN_PDPS
:

203 
¡»am
 << "…ow”_down(" << (
lše
->
G‘Cyşe
(è- 
Ï¡Commªd
)

204 << ");" << 
¡d
::
’dl
;

205 
	gÏ¡Commªd
 = 
lše
->
G‘Cyşe
();

208 
	gPOWERUP
:

	@traceWriter/VerilogTrace/VerilogTraceWriter.h

34 #iâdeà
__VERILOGTRACEWRITER_H__


35 
	#__VERILOGTRACEWRITER_H__


	)

37 
	~"ŒaûWr™”/G’”icT¿ûWr™”.h
"

38 
	~<¡ršg
>

39 
	~<io¡»am
>

40 
	~<f¡»am
>

42 
Çme¥aû
 
	gNVM
 {

44 şas 
	cV”ogT¿ûWr™”
 : 
public
 
G’”icT¿ûWr™”


46 
public
:

47 
V”ogT¿ûWr™”
( );

48 ~
V”ogT¿ûWr™”
( );

50 
In™
Ğ
CÚfig
 *
cÚf
 );

52 
S‘T¿ûFe
Ğ
¡d
::
¡ršg
 
fe
 );

53 
	g¡d
::
¡ršg
 
G‘T¿ûFe
( );

55 
boŞ
 
G‘P”ChªÃlT¿ûs
( );

56 
boŞ
 
G‘P”RªkT¿ûs
( );

58 
boŞ
 
S‘NextAcûss
Ğ
T¿ûLše
 *
ÃxtAcûss
 );

60 
	g´iv©e
:

61 
¡d
::
¡ršg
 
ŒaûFe
;

62 
	g¡d
::
of¡»am
 
Œaû
;

64 
ncyşe_t
 
	gÏ¡Commªd
;

65 
ncouÁ”_t
 
	gdeviûWidth
;

67 
Wr™eT¿ûLše
Ğ
¡d
::
o¡»am
& , 
T¿ûLše
 *
lše
 );

	@/usr/include/assert.h

24 #ifdef 
_ASSERT_H


26 #undeà
_ASSERT_H


27 #undeà
as£¹


28 #undeà
__ASSERT_VOID_CAST


30 #ifdef 
__USE_GNU


31 #undeà
as£¹_³¼Ü


36 
	#_ASSERT_H
 1

	)

37 
	~<ã©u»s.h
>

39 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (2,95)

40 
	#__ASSERT_VOID_CAST
 
¡©ic_ÿ¡
<>

	)

42 
	#__ASSERT_VOID_CAST
 ()

	)

50 #ifdef 
NDEBUG


52 
	#as£¹
(
ex´
è(
	`__ASSERT_VOID_CAST
 (0))

	)

60 #ifdef 
__USE_GNU


61 
	#as£¹_³¼Ü
(
”ºum
è(
	`__ASSERT_VOID_CAST
 (0))

	)

66 
__BEGIN_DECLS


69 
	$__as£¹_ç
 (
__cÚ¡
 *
__as£¹iÚ
, __cÚ¡ *
__fe
,

70 
__lše
, 
__cÚ¡
 *
__funùiÚ
)

71 
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

74 
	$__as£¹_³¼Ü_ç
 (
__”ºum
, 
__cÚ¡
 *
__fe
,

75 
__lše
,

76 
__cÚ¡
 *
__funùiÚ
)

77 
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

82 
	$__as£¹
 (cÚ¡ *
__as£¹iÚ
, cÚ¡ *
__fe
, 
__lše
)

83 
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

86 
__END_DECLS


88 
	#as£¹
(
ex´
) \

89 ((
ex´
) \

90 ? 
	`__ASSERT_VOID_CAST
 (0) \

91 : 
	`__as£¹_ç
 (
	`__STRING
(
ex´
), 
__FILE__
, 
__LINE__
, 
__ASSERT_FUNCTION
))

	)

93 #ifdef 
__USE_GNU


94 
	#as£¹_³¼Ü
(
”ºum
) \

95 (!(
”ºum
) \

96 ? 
	`__ASSERT_VOID_CAST
 (0) \

97 : 
	`__as£¹_³¼Ü_ç
 ((
”ºum
), 
__FILE__
, 
__LINE__
, 
__ASSERT_FUNCTION
))

	)

105 #ià
defšed
 
__ılu¥lus
 ? 
	`__GNUC_PREREQ
 (2, 6) : __GNUC_PREREQ (2, 4)

106 
	#__ASSERT_FUNCTION
 
__PRETTY_FUNCTION__


	)

108 #ià
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L

109 
	#__ASSERT_FUNCTION
 
__func__


	)

111 
	#__ASSERT_FUNCTION
 ((
__cÚ¡
 *è0)

	)

	@/usr/include/fcntl.h

24 #iâdef 
_FCNTL_H


25 
	#_FCNTL_H
 1

	)

27 
	~<ã©u»s.h
>

30 
	g__BEGIN_DECLS


34 
	~<b™s/fú.h
>

37 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8


38 
	~<b™s/ty³s.h
>

39 
	#__Ãed_time¥ec


	)

40 
	~<time.h
>

41 
	~<b™s/¡©.h
>

43 
	#S_IFMT
 
__S_IFMT


	)

44 
	#S_IFDIR
 
__S_IFDIR


	)

45 
	#S_IFCHR
 
__S_IFCHR


	)

46 
	#S_IFBLK
 
__S_IFBLK


	)

47 
	#S_IFREG
 
__S_IFREG


	)

48 #ifdeà
__S_IFIFO


49 
	#S_IFIFO
 
__S_IFIFO


	)

51 #ifdeà
__S_IFLNK


52 
	#S_IFLNK
 
__S_IFLNK


	)

54 #ià(
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K8
è&& defšed 
__S_IFSOCK


55 
	#S_IFSOCK
 
__S_IFSOCK


	)

60 
	#S_ISUID
 
__S_ISUID


	)

61 
	#S_ISGID
 
__S_ISGID


	)

63 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_MISC
 || defšed 
__USE_XOPEN


65 
	#S_ISVTX
 
__S_ISVTX


	)

68 
	#S_IRUSR
 
__S_IREAD


	)

69 
	#S_IWUSR
 
__S_IWRITE


	)

70 
	#S_IXUSR
 
__S_IEXEC


	)

72 
	#S_IRWXU
 (
__S_IREAD
|
__S_IWRITE
|
__S_IEXEC
)

	)

74 
	#S_IRGRP
 (
S_IRUSR
 >> 3è

	)

75 
	#S_IWGRP
 (
S_IWUSR
 >> 3è

	)

76 
	#S_IXGRP
 (
S_IXUSR
 >> 3è

	)

78 
	#S_IRWXG
 (
S_IRWXU
 >> 3)

	)

80 
	#S_IROTH
 (
S_IRGRP
 >> 3è

	)

81 
	#S_IWOTH
 (
S_IWGRP
 >> 3è

	)

82 
	#S_IXOTH
 (
S_IXGRP
 >> 3è

	)

84 
	#S_IRWXO
 (
S_IRWXG
 >> 3)

	)

87 #ifdef 
__USE_MISC


88 #iâdeà
R_OK


91 
	#R_OK
 4

	)

92 
	#W_OK
 2

	)

93 
	#X_OK
 1

	)

94 
	#F_OK
 0

	)

99 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8


100 
	#SEEK_SET
 0

	)

101 
	#SEEK_CUR
 1

	)

102 
	#SEEK_END
 2

	)

105 #ifdeà
__USE_ATFILE


106 
	#AT_FDCWD
 -100

	)

109 
	#AT_SYMLINK_NOFOLLOW
 0x100

	)

110 
	#AT_REMOVEDIR
 0x200

	)

112 
	#AT_SYMLINK_FOLLOW
 0x400

	)

113 
	#AT_EACCESS
 0x200

	)

122 
fú
 (
__fd
, 
__cmd
, ...);

130 #iâdeà
__USE_FILE_OFFSET64


131 
	$İ’
 (
__cÚ¡
 *
__fe
, 
__oæag
, ...è
	`__nÚnuÎ
 ((1));

133 #ifdeà
__REDIRECT


134 
	`__REDIRECT
 (
İ’
, (
__cÚ¡
 *
__fe
, 
__oæag
, ...), 
İ’64
)

135 
	`__nÚnuÎ
 ((1));

137 
	#İ’
 
İ’64


	)

140 #ifdeà
__USE_LARGEFILE64


141 
	$İ’64
 (
__cÚ¡
 *
__fe
, 
__oæag
, ...è
	`__nÚnuÎ
 ((1));

144 #ifdeà
__USE_ATFILE


154 #iâdeà
__USE_FILE_OFFSET64


155 
	$İ’©
 (
__fd
, 
__cÚ¡
 *
__fe
, 
__oæag
, ...)

156 
	`__nÚnuÎ
 ((2));

158 #ifdeà
__REDIRECT


159 
	`__REDIRECT
 (
İ’©
, (
__fd
, 
__cÚ¡
 *
__fe
, 
__oæag
,

160 ...), 
İ’©64
è
	`__nÚnuÎ
 ((2));

162 
	#İ’©
 
İ’©64


	)

165 #ifdeà
__USE_LARGEFILE64


166 
	$İ’©64
 (
__fd
, 
__cÚ¡
 *
__fe
, 
__oæag
, ...)

167 
	`__nÚnuÎ
 ((2));

176 #iâdeà
__USE_FILE_OFFSET64


177 
	$ü—t
 (
__cÚ¡
 *
__fe
, 
__mode_t
 
__mode
è
	`__nÚnuÎ
 ((1));

179 #ifdeà
__REDIRECT


180 
	`__REDIRECT
 (
ü—t
, (
__cÚ¡
 *
__fe
, 
__mode_t
 
__mode
),

181 
ü—t64
è
	`__nÚnuÎ
 ((1));

183 
	#ü—t
 
ü—t64


	)

186 #ifdeà
__USE_LARGEFILE64


187 
	$ü—t64
 (
__cÚ¡
 *
__fe
, 
__mode_t
 
__mode
è
	`__nÚnuÎ
 ((1));

190 #ià!
defšed
 
F_LOCK
 && (defšed 
__USE_MISC
 || (defšed 
__USE_XOPEN_EXTENDED
 \

191 && !
defšed
 
__USE_POSIX
))

200 
	#F_ULOCK
 0

	)

201 
	#F_LOCK
 1

	)

202 
	#F_TLOCK
 2

	)

203 
	#F_TEST
 3

	)

205 #iâdeà
__USE_FILE_OFFSET64


206 
	`lockf
 (
__fd
, 
__cmd
, 
__off_t
 
__Ën
);

208 #ifdeà
__REDIRECT


209 
	`__REDIRECT
 (
lockf
, (
__fd
, 
__cmd
, 
__off64_t
 
__Ën
), 
lockf64
);

211 
	#lockf
 
lockf64


	)

214 #ifdeà
__USE_LARGEFILE64


215 
	`lockf64
 (
__fd
, 
__cmd
, 
__off64_t
 
__Ën
);

219 #ifdeà
__USE_XOPEN2K


222 #iâdeà
__USE_FILE_OFFSET64


223 
	$posix_çdvi£
 (
__fd
, 
__off_t
 
__off£t
, __off_ˆ
__Ën
,

224 
__advi£
è
__THROW
;

226 #ifdeà
__REDIRECT_NTH


227 
	`__REDIRECT_NTH
 (
posix_çdvi£
, (
__fd
, 
__off64_t
 
__off£t
,

228 
__off64_t
 
__Ën
, 
__advi£
),

229 
posix_çdvi£64
);

231 
	#posix_çdvi£
 
posix_çdvi£64


	)

234 #ifdeà
__USE_LARGEFILE64


235 
	$posix_çdvi£64
 (
__fd
, 
__off64_t
 
__off£t
, __off64_ˆ
__Ën
,

236 
__advi£
è
__THROW
;

244 #iâdeà
__USE_FILE_OFFSET64


245 
	`posix_çÎoÿ‹
 (
__fd
, 
__off_t
 
__off£t
, __off_ˆ
__Ën
);

247 #ifdeà
__REDIRECT


248 
	`__REDIRECT
 (
posix_çÎoÿ‹
, (
__fd
, 
__off64_t
 
__off£t
,

249 
__off64_t
 
__Ën
),

250 
posix_çÎoÿ‹64
);

252 
	#posix_çÎoÿ‹
 
posix_çÎoÿ‹64


	)

255 #ifdeà
__USE_LARGEFILE64


256 
	`posix_çÎoÿ‹64
 (
__fd
, 
__off64_t
 
__off£t
, __off64_ˆ
__Ën
);

262 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__ex‹º_®ways_šlše
 \

263 && 
defšed
 
__va_¬g_·ck_Ën


264 
	~<b™s/fú2.h
>

267 
__END_DECLS


	@/usr/include/math.h

25 #iâdef 
_MATH_H


26 
	#_MATH_H
 1

	)

28 
	~<ã©u»s.h
>

30 
	g__BEGIN_DECLS


34 
	~<b™s/huge_v®.h
>

35 #ifdeà
__USE_ISOC99


36 
	~<b™s/huge_v®f.h
>

37 
	~<b™s/huge_v®l.h
>

40 
	~<b™s/šf.h
>

43 
	~<b™s/Çn.h
>

47 
	~<b™s/m©hdef.h
>

54 
	#__MATHCALL
(
funùiÚ
,
suffix
, 
¬gs
) \

55 
	`__MATHDECL
 (
_MdoubË_
,
funùiÚ
,
suffix
, 
¬gs
)

	)

56 
	#__MATHDECL
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
) \

57 
	`__MATHDECL_1
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
); \

58 
	`__MATHDECL_1
(
ty³
, 
	`__CONCAT
(
__
,
funùiÚ
),
suffix
, 
¬gs
)

	)

59 
	#__MATHCALLX
(
funùiÚ
,
suffix
, 
¬gs
, 
©Œib
) \

60 
	`__MATHDECLX
 (
_MdoubË_
,
funùiÚ
,
suffix
, 
¬gs
, 
©Œib
)

	)

61 
	#__MATHDECLX
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
, 
©Œib
) \

62 
	`__MATHDECL_1
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
è
	`__©Œibu‹__
 (
©Œib
); \

63 
	`__MATHDECL_1
(
ty³
, 
	`__CONCAT
(
__
,
funùiÚ
),
suffix
, 
¬gs
è
	`__©Œibu‹__
 (
©Œib
)

	)

64 
	#__MATHDECL_1
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
) \

65 
ty³
 
	`__MATH_PRECNAME
(
funùiÚ
,
suffix
è
¬gs
 
__THROW


	)

67 
	#_MdoubË_
 

	)

68 
	#__MATH_PRECNAME
(
Çme
,
r
è
	`__CONCAT
Òame,r)

	)

69 
	#_MdoubË_BEGIN_NAMESPACE
 
__BEGIN_NAMESPACE_STD


	)

70 
	#_MdoubË_END_NAMESPACE
 
__END_NAMESPACE_STD


	)

71 
	~<b™s/m©hÿÎs.h
>

72 #undeà
_MdoubË_


73 #undeà
_MdoubË_BEGIN_NAMESPACE


74 #undeà
_MdoubË_END_NAMESPACE


75 #undeà
__MATH_PRECNAME


77 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_ISOC99


83 #iâdeà
_Mæßt_


84 
	#_Mæßt_
 

	)

86 
	#_MdoubË_
 
_Mæßt_


	)

87 #ifdeà
__STDC__


88 
	#__MATH_PRECNAME
(
Çme
,
r
èÇme##
f
##
	)
r

90 
	#__MATH_PRECNAME
(
Çme
,
r
èÇm
f
 
	)
r

92 
	#_MdoubË_BEGIN_NAMESPACE
 
__BEGIN_NAMESPACE_C99


	)

93 
	#_MdoubË_END_NAMESPACE
 
__END_NAMESPACE_C99


	)

94 
	~<b™s/m©hÿÎs.h
>

95 #undeà
_MdoubË_


96 #undeà
_MdoubË_BEGIN_NAMESPACE


97 #undeà
_MdoubË_END_NAMESPACE


98 #undeà
__MATH_PRECNAME


100 #ià(
__STDC__
 - 0 || 
__GNUC__
 - 0) \

101 && (!
defšed
 
__NO_LONG_DOUBLE_MATH
 || defšed 
__LDBL_COMPAT
)

102 #ifdeà
__LDBL_COMPAT


104 #ifdeà
__USE_ISOC99


105 
	$__Ædbl_Ãx‰ow¬df
 (
__x
, 
__y
)

106 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

107 #ifdeà
__REDIRECT_NTH


108 
	`__REDIRECT_NTH
 (
Ãx‰ow¬df
, (
__x
, 
__y
),

109 
__Ædbl_Ãx‰ow¬df
)

110 
	`__©Œibu‹__
 ((
__cÚ¡__
));

111 
	`__REDIRECT_NTH
 (
Ãx‰ow¬d
, (
__x
, 
__y
),

112 
Ãxá”
è
	`__©Œibu‹__
 ((
__cÚ¡__
));

113 
	`__REDIRECT_NTH
 (
Ãx‰ow¬dl
,

114 (
__x
, 
__y
),

115 
Ãxá”
è
	`__©Œibu‹__
 ((
__cÚ¡__
));

122 #undeà
__MATHDECL_1


123 
	#__MATHDECL_2
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
, 
®Ÿs
) \

124 
ty³
 
	`__REDIRECT_NTH
(
	`__MATH_PRECNAME
(
funùiÚ
,
suffix
), \

125 
¬gs
, 
®Ÿs
)

	)

126 
	#__MATHDECL_1
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
) \

127 
	`__MATHDECL_2
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
, 
	`__CONCAT
(funùiÚ,suffix))

	)

130 #iâdeà
_MlÚg_doubË_


131 
	#_MlÚg_doubË_
 

	)

133 
	#_MdoubË_
 
_MlÚg_doubË_


	)

134 #ifdeà
__STDC__


135 
	#__MATH_PRECNAME
(
Çme
,
r
èÇme##
l
##
	)
r

137 
	#__MATH_PRECNAME
(
Çme
,
r
èÇm
l
 
	)
r

139 
	#_MdoubË_BEGIN_NAMESPACE
 
__BEGIN_NAMESPACE_C99


	)

140 
	#_MdoubË_END_NAMESPACE
 
__END_NAMESPACE_C99


	)

141 
	~<b™s/m©hÿÎs.h
>

142 #undeà
_MdoubË_


143 #undeà
_MdoubË_BEGIN_NAMESPACE


144 #undeà
_MdoubË_END_NAMESPACE


145 #undeà
__MATH_PRECNAME


150 #undeà
__MATHDECL_1


151 #undeà
__MATHDECL


152 #undeà
__MATHCALL


155 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


157 
signgam
;

162 #ifdeà
__USE_ISOC99


200 
FP_NAN
,

201 
	#FP_NAN
 
FP_NAN


	)

202 
FP_INFINITE
,

203 
	#FP_INFINITE
 
FP_INFINITE


	)

204 
FP_ZERO
,

205 
	#FP_ZERO
 
FP_ZERO


	)

206 
FP_SUBNORMAL
,

207 
	#FP_SUBNORMAL
 
FP_SUBNORMAL


	)

208 
FP_NORMAL


209 
	#FP_NORMAL
 
FP_NORMAL


	)

213 #ifdeà
__NO_LONG_DOUBLE_MATH


214 
	#åşassify
(
x
) \

215 ( (
x
è=ğ (è? 
	`__åşassifyf
 (xè: 
	`__åşassify
 (x))

	)

217 
	#åşassify
(
x
) \

218 ( (
x
) ==  () \

219 ? 
	`__åşassifyf
 (
x
) \

220 :  (
x
) ==  () \

221 ? 
	`__åşassify
 (
x
è: 
	`__åşassifyl
 (x))

	)

225 #ifdeà
__NO_LONG_DOUBLE_MATH


226 
	#signb™
(
x
) \

227 ( (
x
è=ğ (è? 
	`__signb™f
 (xè: 
	`__signb™
 (x))

	)

229 
	#signb™
(
x
) \

230 ( (
x
) ==  () \

231 ? 
	`__signb™f
 (
x
) \

232 :  (
x
) ==  () \

233 ? 
	`__signb™
 (
x
è: 
	`__signb™l
 (x))

	)

237 #ifdeà
__NO_LONG_DOUBLE_MATH


238 
	#isfš™e
(
x
) \

239 ( (
x
è=ğ (è? 
	`__fš™ef
 (xè: 
	`__fš™e
 (x))

	)

241 
	#isfš™e
(
x
) \

242 ( (
x
) ==  () \

243 ? 
	`__fš™ef
 (
x
) \

244 :  (
x
) ==  () \

245 ? 
	`__fš™e
 (
x
è: 
	`__fš™–
 (x))

	)

249 
	#i¢Üm®
(
x
è(
	`åşassify
 (xè=ğ
FP_NORMAL
)

	)

253 #ifdeà
__NO_LONG_DOUBLE_MATH


254 
	#i¢ª
(
x
) \

255 ( (
x
è=ğ (è? 
	`__i¢ªf
 (xè: 
	`__i¢ª
 (x))

	)

257 
	#i¢ª
(
x
) \

258 ( (
x
) ==  () \

259 ? 
	`__i¢ªf
 (
x
) \

260 :  (
x
) ==  () \

261 ? 
	`__i¢ª
 (
x
è: 
	`__i¢ªl
 (x))

	)

265 #ifdeà
__NO_LONG_DOUBLE_MATH


266 
	#isšf
(
x
) \

267 ( (
x
è=ğ (è? 
	`__isšff
 (xè: 
	`__isšf
 (x))

	)

269 
	#isšf
(
x
) \

270 ( (
x
) ==  () \

271 ? 
	`__isšff
 (
x
) \

272 :  (
x
) ==  () \

273 ? 
	`__isšf
 (
x
è: 
	`__isšæ
 (x))

	)

277 
	#MATH_ERRNO
 1

	)

278 
	#MATH_ERREXCEPT
 2

	)

283 #iâdeà
__FAST_MATH__


284 
	#m©h_”rhªdlšg
 (
MATH_ERRNO
 | 
MATH_ERREXCEPT
)

	)

289 #ifdef 
__USE_MISC


293 
_IEEE_
 = -1,

294 
_SVID_
,

295 
_XOPEN_
,

296 
_POSIX_
,

297 
_ISOC_


298 } 
	t_LIB_VERSION_TYPE
;

303 
_LIB_VERSION_TYPE
 
_LIB_VERSION
;

307 #ifdeà
__USE_SVID


313 #ifdeà
__ılu¥lus


314 
__exû±iÚ


316 
exû±iÚ


319 
ty³
;

320 *
Çme
;

321 
¬g1
;

322 
¬g2
;

323 
»tv®
;

324 
	}
};

326 #ifdeà
__ılu¥lus


327 
	$m©h”r
 (
__exû±iÚ
 *
__exc
è
	`throw
 ();

329 
	`m©h”r
 (
exû±iÚ
 *
__exc
);

332 
	#X_TLOSS
 1.41484755040568800000e+16

	)

335 
	#DOMAIN
 1

	)

336 
	#SING
 2

	)

337 
	#OVERFLOW
 3

	)

338 
	#UNDERFLOW
 4

	)

339 
	#TLOSS
 5

	)

340 
	#PLOSS
 6

	)

343 
	#HUGE
 3.40282347e+38F

	)

347 #ifdeà
__USE_XOPEN


349 
	#MAXFLOAT
 3.40282347e+38F

	)

356 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN


357 
	#M_E
 2.7182818284590452354

	)

358 
	#M_LOG2E
 1.4426950408889634074

	)

359 
	#M_LOG10E
 0.43429448190325182765

	)

360 
	#M_LN2
 0.69314718055994530942

	)

361 
	#M_LN10
 2.30258509299404568402

	)

362 
	#M_PI
 3.14159265358979323846

	)

363 
	#M_PI_2
 1.57079632679489661923

	)

364 
	#M_PI_4
 0.78539816339744830962

	)

365 
	#M_1_PI
 0.31830988618379067154

	)

366 
	#M_2_PI
 0.63661977236758134308

	)

367 
	#M_2_SQRTPI
 1.12837916709551257390

	)

368 
	#M_SQRT2
 1.41421356237309504880

	)

369 
	#M_SQRT1_2
 0.70710678118654752440

	)

375 #ifdeà
__USE_GNU


376 
	#M_El
 2.7182818284590452353602874713526625L

	)

377 
	#M_LOG2El
 1.4426950408889634073599246810018921L

	)

378 
	#M_LOG10El
 0.4342944819032518276511289189166051L

	)

379 
	#M_LN2l
 0.6931471805599453094172321214581766L

	)

380 
	#M_LN10l
 2.3025850929940456840179914546843642L

	)

381 
	#M_PIl
 3.1415926535897932384626433832795029L

	)

382 
	#M_PI_2l
 1.5707963267948966192313216916397514L

	)

383 
	#M_PI_4l
 0.7853981633974483096156608458198757L

	)

384 
	#M_1_PIl
 0.3183098861837906715377675267450287L

	)

385 
	#M_2_PIl
 0.6366197723675813430755350534900574L

	)

386 
	#M_2_SQRTPIl
 1.1283791670955125738961589031215452L

	)

387 
	#M_SQRT2l
 1.4142135623730950488016887242096981L

	)

388 
	#M_SQRT1_2l
 0.7071067811865475244008443621048490L

	)

395 #ià
defšed
 
__STRICT_ANSI__
 && !defšed 
__NO_MATH_INLINES


396 
	#__NO_MATH_INLINES
 1

	)

399 #ià
defšed
 
__USE_ISOC99
 && 
	`__GNUC_PREREQ
(2,97)

406 
	#isg»©”
(
x
, 
y
è
	`__butš_isg»©”
(x, y)

	)

407 
	#isg»©”equ®
(
x
, 
y
è
	`__butš_isg»©”equ®
(x, y)

	)

408 
	#i¦ess
(
x
, 
y
è
	`__butš_i¦ess
(x, y)

	)

409 
	#i¦es£qu®
(
x
, 
y
è
	`__butš_i¦es£qu®
(x, y)

	)

410 
	#i¦essg»©”
(
x
, 
y
è
	`__butš_i¦essg»©”
(x, y)

	)

411 
	#isunÜd”ed
(
u
, 
v
è
	`__butš_isunÜd”ed
(u, v)

	)

415 #ifdeà
__USE_EXTERN_INLINES


416 
	~<b™s/m©hšlše.h
>

419 #ifdeà
__USE_ISOC99


423 #iâdeà
isg»©”


424 
	#isg»©”
(
x
, 
y
) \

425 (
__ex‹nsiÚ__
 \

426 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

427 !
	`isunÜd”ed
 (
__x
, 
__y
è&& __x > __y; 
	}
}))

	)

431 #iâdeà
isg»©”equ®


432 
	#isg»©”equ®
(
x
, 
y
) \

433 (
__ex‹nsiÚ__
 \

434 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

435 !
	`isunÜd”ed
 (
__x
, 
__y
è&& __x >ğ__y; }))

	)

439 #iâdeà
i¦ess


440 
	#i¦ess
(
x
, 
y
) \

441 (
__ex‹nsiÚ__
 \

442 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

443 !
	`isunÜd”ed
 (
__x
, 
__y
è&& __x < __y; }))

	)

447 #iâdeà
i¦es£qu®


448 
	#i¦es£qu®
(
x
, 
y
) \

449 (
__ex‹nsiÚ__
 \

450 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

451 !
	`isunÜd”ed
 (
__x
, 
__y
è&& __x <ğ__y; }))

	)

455 #iâdeà
i¦essg»©”


456 
	#i¦essg»©”
(
x
, 
y
) \

457 (
__ex‹nsiÚ__
 \

458 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

459 !
	`isunÜd”ed
 (
__x
, 
__y
è&& (__x < __y || __y < __x); }))

	)

463 #iâdeà
isunÜd”ed


464 
	#isunÜd”ed
(
u
, 
v
) \

465 (
__ex‹nsiÚ__
 \

466 ({ 
	`__ty³of__
(
u
è
__u
 = (u); __ty³of__(
v
è
__v
 = (v); \

467 
	`åşassify
 (
__u
è=ğ
FP_NAN
 || fpşassify (
__v
è=ğFP_NAN; }))

	)

472 
	g__END_DECLS


	@/usr/include/signal.h

23 #iâdef 
_SIGNAL_H


25 #ià!
defšed
 
__Ãed_sig_©omic_t
 && !defšed 
__Ãed_sig£t_t


26 
	#_SIGNAL_H


	)

29 
	~<ã©u»s.h
>

31 
	g__BEGIN_DECLS


33 
	~<b™s/sig£t.h
>

37 #ià
defšed
 
__Ãed_sig_©omic_t
 || defšed 
_SIGNAL_H


38 #iâdeà
__sig_©omic_t_defšed


39 
	#__sig_©omic_t_defšed


	)

40 
__BEGIN_NAMESPACE_STD


41 
__sig_©omic_t
 
	tsig_©omic_t
;

42 
	g__END_NAMESPACE_STD


44 #undeà
__Ãed_sig_©omic_t


47 #ià
defšed
 
__Ãed_sig£t_t
 || (defšed 
_SIGNAL_H
 && defšed 
__USE_POSIX
)

48 #iâdeà
__sig£t_t_defšed


49 
	#__sig£t_t_defšed


	)

50 
__sig£t_t
 
	tsig£t_t
;

52 #undeà
__Ãed_sig£t_t


55 #ifdeà
_SIGNAL_H


57 
	~<b™s/ty³s.h
>

58 
	~<b™s/signum.h
>

60 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K


61 #iâdeà
__pid_t_defšed


62 
__pid_t
 
	tpid_t
;

63 
	#__pid_t_defšed


	)

65 #ifdeà
__USE_XOPEN


67 #iâdeà
__uid_t_defšed


68 
__uid_t
 
	tuid_t
;

69 
	#__uid_t_defšed


	)

73 #ifdeà
__USE_POSIX199309


75 
	#__Ãed_time¥ec


	)

76 
	~<time.h
>

79 
	~<b™s/sigšfo.h
>

84 (*
	t__sighªdËr_t
) ();

89 
__sighªdËr_t
 
	$__sysv_sigÇl
 (
__sig
, 
__sighªdËr_t
 
__hªdËr
)

90 
__THROW
;

91 #ifdeà
__USE_GNU


92 
__sighªdËr_t
 
	$sysv_sigÇl
 (
__sig
, 
__sighªdËr_t
 
__hªdËr
)

93 
__THROW
;

99 
__BEGIN_NAMESPACE_STD


100 #ifdeà
__USE_BSD


101 
__sighªdËr_t
 
	$sigÇl
 (
__sig
, 
__sighªdËr_t
 
__hªdËr
)

102 
__THROW
;

105 #ifdeà
__REDIRECT_NTH


106 
__sighªdËr_t
 
	`__REDIRECT_NTH
 (
sigÇl
,

107 (
__sig
, 
__sighªdËr_t
 
__hªdËr
),

108 
__sysv_sigÇl
);

110 
	#sigÇl
 
__sysv_sigÇl


	)

113 
__END_NAMESPACE_STD


115 #ifdeà
__USE_XOPEN


118 
__sighªdËr_t
 
	$bsd_sigÇl
 (
__sig
, 
__sighªdËr_t
 
__hªdËr
)

119 
__THROW
;

125 #ifdeà
__USE_POSIX


126 
	$kl
 (
__pid_t
 
__pid
, 
__sig
è
__THROW
;

129 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


133 
	$kÍg
 (
__pid_t
 
__pg½
, 
__sig
è
__THROW
;

136 
__BEGIN_NAMESPACE_STD


138 
	$¿i£
 (
__sig
è
__THROW
;

139 
__END_NAMESPACE_STD


141 #ifdeà
__USE_SVID


143 
__sighªdËr_t
 
	$ssigÇl
 (
__sig
, 
__sighªdËr_t
 
__hªdËr
)

144 
__THROW
;

145 
	$gsigÇl
 (
__sig
è
__THROW
;

148 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN2K


150 
	`psigÇl
 (
__sig
, 
__cÚ¡
 *
__s
);

153 #ifdeà
__USE_XOPEN2K


155 
	`psigšfo
 (
__cÚ¡
 
sigšfo_t
 *
__pšfo
, __cÚ¡ *
__s
);

168 
	`__sig·u£
 (
__sig_Ü_mask
, 
__is_sig
);

170 #ifdeà
__FAVOR_BSD


173 
	$sig·u£
 (
__mask
è
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

175 #ifdeà
__USE_XOPEN


176 #ifdeà
__GNUC__


177 
	$sig·u£
 (
__sig
è
	`__asm__
 ("__xpg_sigpause");

180 
	#sig·u£
(
sig
è
	`__sig·u£
 ((sig), 1)

	)

186 #ifdeà
__USE_BSD


193 
	#sigmask
(
sig
è
	`__sigmask
(sig)

	)

196 
	$sigblock
 (
__mask
è
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

199 
	$sig£tmask
 (
__mask
è
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

202 
	$sigg‘mask
 (è
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

206 #ifdeà
__USE_MISC


207 
	#NSIG
 
_NSIG


	)

210 #ifdeà
__USE_GNU


211 
__sighªdËr_t
 
	tsighªdËr_t
;

215 #ifdeà
__USE_BSD


216 
__sighªdËr_t
 
	tsig_t
;

219 #ifdeà
__USE_POSIX


222 
	$sigem±y£t
 (
sig£t_t
 *
__£t
è
__THROW
 
	`__nÚnuÎ
 ((1));

225 
	$sigfl£t
 (
sig£t_t
 *
__£t
è
__THROW
 
	`__nÚnuÎ
 ((1));

228 
	$sigadd£t
 (
sig£t_t
 *
__£t
, 
__signo
è
__THROW
 
	`__nÚnuÎ
 ((1));

231 
	$sigd–£t
 (
sig£t_t
 *
__£t
, 
__signo
è
__THROW
 
	`__nÚnuÎ
 ((1));

234 
	$sigismemb”
 (
__cÚ¡
 
sig£t_t
 *
__£t
, 
__signo
)

235 
__THROW
 
	`__nÚnuÎ
 ((1));

237 #ifdeà
__USE_GNU


239 
	$sigi£m±y£t
 (
__cÚ¡
 
sig£t_t
 *
__£t
è
__THROW
 
	`__nÚnuÎ
 ((1));

242 
	$sigªd£t
 (
sig£t_t
 *
__£t
, 
__cÚ¡
 sig£t_ˆ*
__Ëá
,

243 
__cÚ¡
 
sig£t_t
 *
__right
è
__THROW
 
	`__nÚnuÎ
 ((1, 2, 3));

246 
	$sigÜ£t
 (
sig£t_t
 *
__£t
, 
__cÚ¡
 sig£t_ˆ*
__Ëá
,

247 
__cÚ¡
 
sig£t_t
 *
__right
è
__THROW
 
	`__nÚnuÎ
 ((1, 2, 3));

252 
	~<b™s/sigaùiÚ.h
>

255 
	$sig´ocmask
 (
__how
, 
__cÚ¡
 
sig£t_t
 *
__»¡riù
 
__£t
,

256 
sig£t_t
 *
__»¡riù
 
__o£t
è
__THROW
;

263 
	$sigsu¥’d
 (
__cÚ¡
 
sig£t_t
 *
__£t
è
	`__nÚnuÎ
 ((1));

266 
	$sigaùiÚ
 (
__sig
, 
__cÚ¡
 
sigaùiÚ
 *
__»¡riù
 
__aù
,

267 
sigaùiÚ
 *
__»¡riù
 
__ßù
è
__THROW
;

270 
	$sig³ndšg
 (
sig£t_t
 *
__£t
è
__THROW
 
	`__nÚnuÎ
 ((1));

277 
	$sigwa™
 (
__cÚ¡
 
sig£t_t
 *
__»¡riù
 
__£t
, *__»¡riù 
__sig
)

278 
	`__nÚnuÎ
 ((1, 2));

280 #ifdeà
__USE_POSIX199309


285 
	$sigwa™šfo
 (
__cÚ¡
 
sig£t_t
 *
__»¡riù
 
__£t
,

286 
sigšfo_t
 *
__»¡riù
 
__šfo
è
	`__nÚnuÎ
 ((1));

293 
	$sigtimedwa™
 (
__cÚ¡
 
sig£t_t
 *
__»¡riù
 
__£t
,

294 
sigšfo_t
 *
__»¡riù
 
__šfo
,

295 
__cÚ¡
 
time¥ec
 *
__»¡riù
 
__timeout
)

296 
	`__nÚnuÎ
 ((1));

300 
	$sigqueue
 (
__pid_t
 
__pid
, 
__sig
, 
__cÚ¡
 
sigv®
 
__v®
)

301 
__THROW
;

306 #ifdeà
__USE_BSD


310 
__cÚ¡
 *__cÚ¡ 
_sys_sigli¡
[
_NSIG
];

311 
__cÚ¡
 *__cÚ¡ 
sys_sigli¡
[
_NSIG
];

314 
	ssigvec


316 
__sighªdËr_t
 
sv_hªdËr
;

317 
sv_mask
;

319 
sv_æags
;

320 
	#sv_Ú¡ack
 
sv_æags


	)

324 
	#SV_ONSTACK
 (1 << 0)

	)

325 
	#SV_INTERRUPT
 (1 << 1)

	)

326 
	#SV_RESETHAND
 (1 << 2)

	)

334 
	$sigvec
 (
__sig
, 
__cÚ¡
 
sigvec
 *
__vec
,

335 
sigvec
 *
__ovec
è
__THROW
;

339 
	~<b™s/sigcÚ‹xt.h
>

342 
	$sig»tuº
 (
sigcÚ‹xt
 *
__sı
è
__THROW
;

347 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


348 
	#__Ãed_size_t


	)

349 
	~<¡ddef.h
>

354 
	$sigš‹¼u±
 (
__sig
, 
__š‹¼u±
è
__THROW
;

356 
	~<b™s/sig¡ack.h
>

357 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8


359 
	~<sys/ucÚ‹xt.h
>

365 
	$sig¡ack
 (
sig¡ack
 *
__ss
, sig¡ack *
__oss
)

366 
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

370 
	$sig®t¡ack
 (
__cÚ¡
 
sig®t¡ack
 *
__»¡riù
 
__ss
,

371 
sig®t¡ack
 *
__»¡riù
 
__oss
è
__THROW
;

375 #ifdeà
__USE_XOPEN_EXTENDED


379 
	$sighŞd
 (
__sig
è
__THROW
;

382 
	$sig»l£
 (
__sig
è
__THROW
;

385 
	$sigignÜe
 (
__sig
è
__THROW
;

388 
__sighªdËr_t
 
	$sig£t
 (
__sig
, 
__sighªdËr_t
 
__di¥
è
__THROW
;

391 #ià
defšed
 
__USE_POSIX199506
 || defšed 
__USE_UNIX98


394 
	~<b™s/±h»adty³s.h
>

395 
	~<b™s/sigth»ad.h
>

402 
	$__libc_cu¼’t_sig¹mš
 (è
__THROW
;

404 
	$__libc_cu¼’t_sig¹max
 (è
__THROW
;

408 
__END_DECLS


	@/usr/include/stdint.h

23 #iâdeà
_STDINT_H


24 
	#_STDINT_H
 1

	)

26 
	~<ã©u»s.h
>

27 
	~<b™s/wch¬.h
>

28 
	~<b™s/wÜdsize.h
>

35 #iâdeà
__št8_t_defšed


36 
	#__št8_t_defšed


	)

37 sigÃd 
	tšt8_t
;

38 
	tšt16_t
;

39 
	tšt32_t
;

40 #ià
__WORDSIZE
 == 64

41 
	tšt64_t
;

43 
__ex‹nsiÚ__


44 
	tšt64_t
;

49 
	tušt8_t
;

50 
	tušt16_t
;

51 #iâdeà
__ušt32_t_defšed


52 
	tušt32_t
;

53 
	#__ušt32_t_defšed


	)

55 #ià
__WORDSIZE
 == 64

56 
	tušt64_t
;

58 
__ex‹nsiÚ__


59 
	tušt64_t
;

66 sigÃd 
	tšt_Ëa¡8_t
;

67 
	tšt_Ëa¡16_t
;

68 
	tšt_Ëa¡32_t
;

69 #ià
__WORDSIZE
 == 64

70 
	tšt_Ëa¡64_t
;

72 
__ex‹nsiÚ__


73 
	tšt_Ëa¡64_t
;

77 
	tušt_Ëa¡8_t
;

78 
	tušt_Ëa¡16_t
;

79 
	tušt_Ëa¡32_t
;

80 #ià
__WORDSIZE
 == 64

81 
	tušt_Ëa¡64_t
;

83 
__ex‹nsiÚ__


84 
	tušt_Ëa¡64_t
;

91 sigÃd 
	tšt_ç¡8_t
;

92 #ià
__WORDSIZE
 == 64

93 
	tšt_ç¡16_t
;

94 
	tšt_ç¡32_t
;

95 
	tšt_ç¡64_t
;

97 
	tšt_ç¡16_t
;

98 
	tšt_ç¡32_t
;

99 
__ex‹nsiÚ__


100 
	tšt_ç¡64_t
;

104 
	tušt_ç¡8_t
;

105 #ià
__WORDSIZE
 == 64

106 
	tušt_ç¡16_t
;

107 
	tušt_ç¡32_t
;

108 
	tušt_ç¡64_t
;

110 
	tušt_ç¡16_t
;

111 
	tušt_ç¡32_t
;

112 
__ex‹nsiÚ__


113 
	tušt_ç¡64_t
;

118 #ià
__WORDSIZE
 == 64

119 #iâdeà
__šŒ_t_defšed


120 
	tšŒ_t
;

121 
	#__šŒ_t_defšed


	)

123 
	tušŒ_t
;

125 #iâdeà
__šŒ_t_defšed


126 
	tšŒ_t
;

127 
	#__šŒ_t_defšed


	)

129 
	tušŒ_t
;

134 #ià
__WORDSIZE
 == 64

135 
	tštmax_t
;

136 
	tuštmax_t
;

138 
__ex‹nsiÚ__


139 
	tštmax_t
;

140 
__ex‹nsiÚ__


141 
	tuštmax_t
;

147 #ià!
defšed
 
__ılu¥lus
 || defšed 
__STDC_LIMIT_MACROS


149 #ià
__WORDSIZE
 == 64

150 
	#__INT64_C
(
c
èø## 
L


	)

151 
	#__UINT64_C
(
c
èø## 
UL


	)

153 
	#__INT64_C
(
c
èø## 
LL


	)

154 
	#__UINT64_C
(
c
èø## 
ULL


	)

160 
	#INT8_MIN
 (-128)

	)

161 
	#INT16_MIN
 (-32767-1)

	)

162 
	#INT32_MIN
 (-2147483647-1)

	)

163 
	#INT64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

165 
	#INT8_MAX
 (127)

	)

166 
	#INT16_MAX
 (32767)

	)

167 
	#INT32_MAX
 (2147483647)

	)

168 
	#INT64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

171 
	#UINT8_MAX
 (255)

	)

172 
	#UINT16_MAX
 (65535)

	)

173 
	#UINT32_MAX
 (4294967295U)

	)

174 
	#UINT64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

178 
	#INT_LEAST8_MIN
 (-128)

	)

179 
	#INT_LEAST16_MIN
 (-32767-1)

	)

180 
	#INT_LEAST32_MIN
 (-2147483647-1)

	)

181 
	#INT_LEAST64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

183 
	#INT_LEAST8_MAX
 (127)

	)

184 
	#INT_LEAST16_MAX
 (32767)

	)

185 
	#INT_LEAST32_MAX
 (2147483647)

	)

186 
	#INT_LEAST64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

189 
	#UINT_LEAST8_MAX
 (255)

	)

190 
	#UINT_LEAST16_MAX
 (65535)

	)

191 
	#UINT_LEAST32_MAX
 (4294967295U)

	)

192 
	#UINT_LEAST64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

196 
	#INT_FAST8_MIN
 (-128)

	)

197 #ià
__WORDSIZE
 == 64

198 
	#INT_FAST16_MIN
 (-9223372036854775807L-1)

	)

199 
	#INT_FAST32_MIN
 (-9223372036854775807L-1)

	)

201 
	#INT_FAST16_MIN
 (-2147483647-1)

	)

202 
	#INT_FAST32_MIN
 (-2147483647-1)

	)

204 
	#INT_FAST64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

206 
	#INT_FAST8_MAX
 (127)

	)

207 #ià
__WORDSIZE
 == 64

208 
	#INT_FAST16_MAX
 (9223372036854775807L)

	)

209 
	#INT_FAST32_MAX
 (9223372036854775807L)

	)

211 
	#INT_FAST16_MAX
 (2147483647)

	)

212 
	#INT_FAST32_MAX
 (2147483647)

	)

214 
	#INT_FAST64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

217 
	#UINT_FAST8_MAX
 (255)

	)

218 #ià
__WORDSIZE
 == 64

219 
	#UINT_FAST16_MAX
 (18446744073709551615UL)

	)

220 
	#UINT_FAST32_MAX
 (18446744073709551615UL)

	)

222 
	#UINT_FAST16_MAX
 (4294967295U)

	)

223 
	#UINT_FAST32_MAX
 (4294967295U)

	)

225 
	#UINT_FAST64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

229 #ià
__WORDSIZE
 == 64

230 
	#INTPTR_MIN
 (-9223372036854775807L-1)

	)

231 
	#INTPTR_MAX
 (9223372036854775807L)

	)

232 
	#UINTPTR_MAX
 (18446744073709551615UL)

	)

234 
	#INTPTR_MIN
 (-2147483647-1)

	)

235 
	#INTPTR_MAX
 (2147483647)

	)

236 
	#UINTPTR_MAX
 (4294967295U)

	)

241 
	#INTMAX_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

243 
	#INTMAX_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

246 
	#UINTMAX_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

252 #ià
__WORDSIZE
 == 64

253 
	#PTRDIFF_MIN
 (-9223372036854775807L-1)

	)

254 
	#PTRDIFF_MAX
 (9223372036854775807L)

	)

256 
	#PTRDIFF_MIN
 (-2147483647-1)

	)

257 
	#PTRDIFF_MAX
 (2147483647)

	)

261 
	#SIG_ATOMIC_MIN
 (-2147483647-1)

	)

262 
	#SIG_ATOMIC_MAX
 (2147483647)

	)

265 #ià
__WORDSIZE
 == 64

266 
	#SIZE_MAX
 (18446744073709551615UL)

	)

268 
	#SIZE_MAX
 (4294967295U)

	)

272 #iâdeà
WCHAR_MIN


274 
	#WCHAR_MIN
 
__WCHAR_MIN


	)

275 
	#WCHAR_MAX
 
__WCHAR_MAX


	)

279 
	#WINT_MIN
 (0u)

	)

280 
	#WINT_MAX
 (4294967295u)

	)

287 #ià!
defšed
 
__ılu¥lus
 || defšed 
__STDC_CONSTANT_MACROS


290 
	#INT8_C
(
c
è
	)
c

291 
	#INT16_C
(
c
è
	)
c

292 
	#INT32_C
(
c
è
	)
c

293 #ià
__WORDSIZE
 == 64

294 
	#INT64_C
(
c
èø## 
L


	)

296 
	#INT64_C
(
c
èø## 
LL


	)

300 
	#UINT8_C
(
c
è
	)
c

301 
	#UINT16_C
(
c
è
	)
c

302 
	#UINT32_C
(
c
èø## 
U


	)

303 #ià
__WORDSIZE
 == 64

304 
	#UINT64_C
(
c
èø## 
UL


	)

306 
	#UINT64_C
(
c
èø## 
ULL


	)

310 #ià
__WORDSIZE
 == 64

311 
	#INTMAX_C
(
c
èø## 
L


	)

312 
	#UINTMAX_C
(
c
èø## 
UL


	)

314 
	#INTMAX_C
(
c
èø## 
LL


	)

315 
	#UINTMAX_C
(
c
èø## 
ULL


	)

	@/usr/include/stdio.h

24 #iâdeà
_STDIO_H


26 #ià!
defšed
 
__Ãed_FILE
 && !defšed 
__Ãed___FILE


27 
	#_STDIO_H
 1

	)

28 
	~<ã©u»s.h
>

30 
	g__BEGIN_DECLS


32 
	#__Ãed_size_t


	)

33 
	#__Ãed_NULL


	)

34 
	~<¡ddef.h
>

36 
	~<b™s/ty³s.h
>

37 
	#__Ãed_FILE


	)

38 
	#__Ãed___FILE


	)

42 #ià!
defšed
 
__FILE_defšed
 && defšed 
__Ãed_FILE


45 
	g_IO_FILE
;

47 
__BEGIN_NAMESPACE_STD


49 
_IO_FILE
 
	tFILE
;

50 
	g__END_NAMESPACE_STD


51 #ià
defšed
 
__USE_LARGEFILE64
 || defšed 
__USE_SVID
 || defšed 
__USE_POSIX
 \

52 || 
defšed
 
	g__USE_BSD
 || defšed 
	g__USE_ISOC99
 || defšed 
	g__USE_XOPEN
 \

53 || 
defšed
 
__USE_POSIX2


54 
	$__USING_NAMESPACE_STD
(
FILE
)

57 
	#__FILE_defšed
 1

	)

59 #undeà
__Ãed_FILE


62 #ià!
defšed
 
____FILE_defšed
 && defšed 
__Ãed___FILE


65 
_IO_FILE
 
	t__FILE
;

67 
	#____FILE_defšed
 1

	)

69 #undeà
__Ãed___FILE


72 #ifdef 
_STDIO_H


73 
	#_STDIO_USES_IOSTREAM


	)

75 
	~<libio.h
>

77 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8


78 #ifdeà
__GNUC__


79 #iâdeà
_VA_LIST_DEFINED


80 
_G_va_li¡
 
	tva_li¡
;

81 
	#_VA_LIST_DEFINED


	)

84 
	~<¡d¬g.h
>

88 #ifdeà
__USE_XOPEN2K8


89 #iâdeà
__off_t_defšed


90 #iâdeà
__USE_FILE_OFFSET64


91 
__off_t
 
	toff_t
;

93 
__off64_t
 
	toff_t
;

95 
	#__off_t_defšed


	)

97 #ià
defšed
 
__USE_LARGEFILE64
 && !defšed 
__off64_t_defšed


98 
__off64_t
 
	toff64_t
;

99 
	#__off64_t_defšed


	)

102 #iâdeà
__ssize_t_defšed


103 
__ssize_t
 
	tssize_t
;

104 
	#__ssize_t_defšed


	)

109 
__BEGIN_NAMESPACE_STD


110 #iâdeà
__USE_FILE_OFFSET64


111 
_G_åos_t
 
	tåos_t
;

113 
_G_åos64_t
 
	tåos_t
;

115 
__END_NAMESPACE_STD


116 #ifdeà
__USE_LARGEFILE64


117 
_G_åos64_t
 
	tåos64_t
;

121 
	#_IOFBF
 0

	)

122 
	#_IOLBF
 1

	)

123 
	#_IONBF
 2

	)

127 #iâdeà
BUFSIZ


128 
	#BUFSIZ
 
_IO_BUFSIZ


	)

134 #iâdeà
EOF


135 
	#EOF
 (-1)

	)

141 
	#SEEK_SET
 0

	)

142 
	#SEEK_CUR
 1

	)

143 
	#SEEK_END
 2

	)

146 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


148 
	#P_tmpdœ
 "/tmp"

	)

161 
	~<b™s/¡dio_lim.h
>

165 
_IO_FILE
 *
¡dš
;

166 
_IO_FILE
 *
¡dout
;

167 
_IO_FILE
 *
¡d”r
;

168 #ifdeà
__STDC__


170 
	#¡dš
 
¡dš


	)

171 
	#¡dout
 
¡dout


	)

172 
	#¡d”r
 
¡d”r


	)

175 
__BEGIN_NAMESPACE_STD


177 
	$»move
 (
__cÚ¡
 *
__f’ame
è
__THROW
;

179 
	$»Çme
 (
__cÚ¡
 *
__Şd
, __cÚ¡ *
__Ãw
è
__THROW
;

180 
__END_NAMESPACE_STD


182 #ifdeà
__USE_ATFILE


184 
	$»Çm—t
 (
__Şdfd
, 
__cÚ¡
 *
__Şd
, 
__Ãwfd
,

185 
__cÚ¡
 *
__Ãw
è
__THROW
;

188 
__BEGIN_NAMESPACE_STD


193 #iâdeà
__USE_FILE_OFFSET64


194 
FILE
 *
	$tmpfe
 (è
__wur
;

196 #ifdeà
__REDIRECT


197 
FILE
 *
	`__REDIRECT
 (
tmpfe
, (), 
tmpfe64
è
__wur
;

199 
	#tmpfe
 
tmpfe64


	)

203 #ifdeà
__USE_LARGEFILE64


204 
FILE
 *
	$tmpfe64
 (è
__wur
;

208 *
	$tm²am
 (*
__s
è
__THROW
 
__wur
;

209 
__END_NAMESPACE_STD


211 #ifdeà
__USE_MISC


214 *
	$tm²am_r
 (*
__s
è
__THROW
 
__wur
;

218 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


226 *
	$‹m²am
 (
__cÚ¡
 *
__dœ
, __cÚ¡ *
__pfx
)

227 
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

231 
__BEGIN_NAMESPACE_STD


236 
	`fşo£
 (
FILE
 *
__¡»am
);

241 
	`fæush
 (
FILE
 *
__¡»am
);

242 
__END_NAMESPACE_STD


244 #ifdeà
__USE_MISC


251 
	`fæush_uÆocked
 (
FILE
 *
__¡»am
);

254 #ifdeà
__USE_GNU


261 
	`fşo£®l
 ();

265 
__BEGIN_NAMESPACE_STD


266 #iâdeà
__USE_FILE_OFFSET64


271 
FILE
 *
	$fİ’
 (
__cÚ¡
 *
__»¡riù
 
__f’ame
,

272 
__cÚ¡
 *
__»¡riù
 
__modes
è
__wur
;

277 
FILE
 *
	$äeİ’
 (
__cÚ¡
 *
__»¡riù
 
__f’ame
,

278 
__cÚ¡
 *
__»¡riù
 
__modes
,

279 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

281 #ifdeà
__REDIRECT


282 
FILE
 *
	`__REDIRECT
 (
fİ’
, (
__cÚ¡
 *
__»¡riù
 
__f’ame
,

283 
__cÚ¡
 *
__»¡riù
 
__modes
), 
fİ’64
)

284 
__wur
;

285 
FILE
 *
	`__REDIRECT
 (
äeİ’
, (
__cÚ¡
 *
__»¡riù
 
__f’ame
,

286 
__cÚ¡
 *
__»¡riù
 
__modes
,

287 
FILE
 *
__»¡riù
 
__¡»am
), 
äeİ’64
)

288 
__wur
;

290 
	#fİ’
 
fİ’64


	)

291 
	#äeİ’
 
äeİ’64


	)

294 
__END_NAMESPACE_STD


295 #ifdeà
__USE_LARGEFILE64


296 
FILE
 *
	$fİ’64
 (
__cÚ¡
 *
__»¡riù
 
__f’ame
,

297 
__cÚ¡
 *
__»¡riù
 
__modes
è
__wur
;

298 
FILE
 *
	$äeİ’64
 (
__cÚ¡
 *
__»¡riù
 
__f’ame
,

299 
__cÚ¡
 *
__»¡riù
 
__modes
,

300 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

303 #ifdef 
__USE_POSIX


305 
FILE
 *
	$fdİ’
 (
__fd
, 
__cÚ¡
 *
__modes
è
__THROW
 
__wur
;

308 #ifdef 
__USE_GNU


311 
FILE
 *
	$fİ’cook›
 (*
__»¡riù
 
__magic_cook›
,

312 
__cÚ¡
 *
__»¡riù
 
__modes
,

313 
_IO_cook›_io_funùiÚs_t
 
__io_funcs
è
__THROW
 
__wur
;

316 #ifdeà
__USE_XOPEN2K8


318 
FILE
 *
	$fmemİ’
 (*
__s
, 
size_t
 
__Ën
, 
__cÚ¡
 *
__modes
)

319 
__THROW
 
__wur
;

324 
FILE
 *
	$İ’_mem¡»am
 (**
__buæoc
, 
size_t
 *
__siz–oc
è
__THROW
 
__wur
;

328 
__BEGIN_NAMESPACE_STD


331 
	$£tbuf
 (
FILE
 *
__»¡riù
 
__¡»am
, *__»¡riù 
__buf
è
__THROW
;

335 
	$£tvbuf
 (
FILE
 *
__»¡riù
 
__¡»am
, *__»¡riù 
__buf
,

336 
__modes
, 
size_t
 
__n
è
__THROW
;

337 
__END_NAMESPACE_STD


339 #ifdef 
__USE_BSD


342 
	$£tbufãr
 (
FILE
 *
__»¡riù
 
__¡»am
, *__»¡riù 
__buf
,

343 
size_t
 
__size
è
__THROW
;

346 
	$£šebuf
 (
FILE
 *
__¡»am
è
__THROW
;

350 
__BEGIN_NAMESPACE_STD


355 
	`årštf
 (
FILE
 *
__»¡riù
 
__¡»am
,

356 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...);

361 
	`´štf
 (
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...);

363 
	$¥rštf
 (*
__»¡riù
 
__s
,

364 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...è
__THROW
;

370 
	`vårštf
 (
FILE
 *
__»¡riù
 
__s
, 
__cÚ¡
 *__»¡riù 
__fÜm©
,

371 
_G_va_li¡
 
__¬g
);

376 
	`v´štf
 (
__cÚ¡
 *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
);

378 
	$v¥rštf
 (*
__»¡riù
 
__s
, 
__cÚ¡
 *__»¡riù 
__fÜm©
,

379 
_G_va_li¡
 
__¬g
è
__THROW
;

380 
__END_NAMESPACE_STD


382 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_ISOC99
 || defšed 
__USE_UNIX98


383 
__BEGIN_NAMESPACE_C99


385 
	$¢´štf
 (*
__»¡riù
 
__s
, 
size_t
 
__maxËn
,

386 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...)

387 
__THROW
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 3, 4)));

389 
	$v¢´štf
 (*
__»¡riù
 
__s
, 
size_t
 
__maxËn
,

390 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
)

391 
__THROW
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 3, 0)));

392 
__END_NAMESPACE_C99


395 #ifdeà
__USE_GNU


398 
	$va¥rštf
 (**
__»¡riù
 
__±r
, 
__cÚ¡
 *__»¡riù 
__f
,

399 
_G_va_li¡
 
__¬g
)

400 
__THROW
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 2, 0))è
__wur
;

401 
	$__a¥rštf
 (**
__»¡riù
 
__±r
,

402 
__cÚ¡
 *
__»¡riù
 
__fmt
, ...)

403 
__THROW
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 2, 3))è
__wur
;

404 
	$a¥rštf
 (**
__»¡riù
 
__±r
,

405 
__cÚ¡
 *
__»¡riù
 
__fmt
, ...)

406 
__THROW
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 2, 3))è
__wur
;

409 #ifdeà
__USE_XOPEN2K8


416 
	$vd´štf
 (
__fd
, 
__cÚ¡
 *
__»¡riù
 
__fmt
,

417 
_G_va_li¡
 
__¬g
)

418 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 0)));

419 
	$d´štf
 (
__fd
, 
__cÚ¡
 *
__»¡riù
 
__fmt
, ...)

420 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 3)));

424 
__BEGIN_NAMESPACE_STD


429 
	$fsÿnf
 (
FILE
 *
__»¡riù
 
__¡»am
,

430 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...è
__wur
;

435 
	$sÿnf
 (
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...è
__wur
;

437 
	$ssÿnf
 (
__cÚ¡
 *
__»¡riù
 
__s
,

438 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...è
__THROW
;

440 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__USE_GNU
 \

441 && (!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT
) \

442 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

443 #ifdeà
__REDIRECT


447 
	`__REDIRECT
 (
fsÿnf
, (
FILE
 *
__»¡riù
 
__¡»am
,

448 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...),

449 
__isoc99_fsÿnf
è
__wur
;

450 
	`__REDIRECT
 (
sÿnf
, (
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...),

451 
__isoc99_sÿnf
è
__wur
;

452 
	`__REDIRECT
 (
ssÿnf
, (
__cÚ¡
 *
__»¡riù
 
__s
,

453 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...),

454 
__isoc99_ssÿnf
è
__THROW
;

456 
	$__isoc99_fsÿnf
 (
FILE
 *
__»¡riù
 
__¡»am
,

457 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...è
__wur
;

458 
	$__isoc99_sÿnf
 (
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...è
__wur
;

459 
	$__isoc99_ssÿnf
 (
__cÚ¡
 *
__»¡riù
 
__s
,

460 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...è
__THROW
;

461 
	#fsÿnf
 
__isoc99_fsÿnf


	)

462 
	#sÿnf
 
__isoc99_sÿnf


	)

463 
	#ssÿnf
 
__isoc99_ssÿnf


	)

467 
__END_NAMESPACE_STD


469 #ifdef 
__USE_ISOC99


470 
__BEGIN_NAMESPACE_C99


475 
	$vfsÿnf
 (
FILE
 *
__»¡riù
 
__s
, 
__cÚ¡
 *__»¡riù 
__fÜm©
,

476 
_G_va_li¡
 
__¬g
)

477 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 2, 0))è
__wur
;

483 
	$vsÿnf
 (
__cÚ¡
 *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
)

484 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 1, 0))è
__wur
;

487 
	$vssÿnf
 (
__cÚ¡
 *
__»¡riù
 
__s
,

488 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
)

489 
__THROW
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__sÿnf__
, 2, 0)));

491 #ià!
defšed
 
__USE_GNU
 \

492 && (!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT
) \

493 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

494 #ifdeà
__REDIRECT


498 
	`__REDIRECT
 (
vfsÿnf
,

499 (
FILE
 *
__»¡riù
 
__s
,

500 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
),

501 
__isoc99_vfsÿnf
)

502 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 2, 0))è
__wur
;

503 
	`__REDIRECT
 (
vsÿnf
, (
__cÚ¡
 *
__»¡riù
 
__fÜm©
,

504 
_G_va_li¡
 
__¬g
), 
__isoc99_vsÿnf
)

505 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 1, 0))è
__wur
;

506 
	`__REDIRECT
 (
vssÿnf
,

507 (
__cÚ¡
 *
__»¡riù
 
__s
,

508 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
),

509 
__isoc99_vssÿnf
)

510 
__THROW
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__sÿnf__
, 2, 0)));

512 
	$__isoc99_vfsÿnf
 (
FILE
 *
__»¡riù
 
__s
,

513 
__cÚ¡
 *
__»¡riù
 
__fÜm©
,

514 
_G_va_li¡
 
__¬g
è
__wur
;

515 
	$__isoc99_vsÿnf
 (
__cÚ¡
 *
__»¡riù
 
__fÜm©
,

516 
_G_va_li¡
 
__¬g
è
__wur
;

517 
	$__isoc99_vssÿnf
 (
__cÚ¡
 *
__»¡riù
 
__s
,

518 
__cÚ¡
 *
__»¡riù
 
__fÜm©
,

519 
_G_va_li¡
 
__¬g
è
__THROW
;

520 
	#vfsÿnf
 
__isoc99_vfsÿnf


	)

521 
	#vsÿnf
 
__isoc99_vsÿnf


	)

522 
	#vssÿnf
 
__isoc99_vssÿnf


	)

526 
__END_NAMESPACE_C99


530 
__BEGIN_NAMESPACE_STD


535 
	`fg‘c
 (
FILE
 *
__¡»am
);

536 
	`g‘c
 (
FILE
 *
__¡»am
);

542 
	`g‘ch¬
 ();

543 
__END_NAMESPACE_STD


547 
	#g‘c
(
_å
è
	`_IO_g‘c
 (_å)

	)

549 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


554 
	`g‘c_uÆocked
 (
FILE
 *
__¡»am
);

555 
	`g‘ch¬_uÆocked
 ();

558 #ifdeà
__USE_MISC


565 
	`fg‘c_uÆocked
 (
FILE
 *
__¡»am
);

569 
__BEGIN_NAMESPACE_STD


577 
	`åutc
 (
__c
, 
FILE
 *
__¡»am
);

578 
	`putc
 (
__c
, 
FILE
 *
__¡»am
);

584 
	`putch¬
 (
__c
);

585 
__END_NAMESPACE_STD


589 
	#putc
(
_ch
, 
_å
è
	`_IO_putc
 (_ch, _å)

	)

591 #ifdeà
__USE_MISC


598 
	`åutc_uÆocked
 (
__c
, 
FILE
 *
__¡»am
);

601 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


606 
	`putc_uÆocked
 (
__c
, 
FILE
 *
__¡»am
);

607 
	`putch¬_uÆocked
 (
__c
);

611 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC
 \

612 || (
defšed
 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K
)

614 
	`g‘w
 (
FILE
 *
__¡»am
);

617 
	`putw
 (
__w
, 
FILE
 *
__¡»am
);

621 
__BEGIN_NAMESPACE_STD


626 *
	$fg‘s
 (*
__»¡riù
 
__s
, 
__n
, 
FILE
 *__»¡riù 
__¡»am
)

627 
__wur
;

634 *
	$g‘s
 (*
__s
è
__wur
;

635 
__END_NAMESPACE_STD


637 #ifdeà
__USE_GNU


644 *
	$fg‘s_uÆocked
 (*
__»¡riù
 
__s
, 
__n
,

645 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

649 #ifdef 
__USE_XOPEN2K8


660 
_IO_ssize_t
 
	$__g‘d–im
 (**
__»¡riù
 
__lš•Œ
,

661 
size_t
 *
__»¡riù
 
__n
, 
__d–im™”
,

662 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

663 
_IO_ssize_t
 
	$g‘d–im
 (**
__»¡riù
 
__lš•Œ
,

664 
size_t
 *
__»¡riù
 
__n
, 
__d–im™”
,

665 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

673 
_IO_ssize_t
 
	$g‘lše
 (**
__»¡riù
 
__lš•Œ
,

674 
size_t
 *
__»¡riù
 
__n
,

675 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

679 
__BEGIN_NAMESPACE_STD


684 
	`åuts
 (
__cÚ¡
 *
__»¡riù
 
__s
, 
FILE
 *__»¡riù 
__¡»am
);

690 
	`puts
 (
__cÚ¡
 *
__s
);

697 
	`ung‘c
 (
__c
, 
FILE
 *
__¡»am
);

704 
size_t
 
	$ä—d
 (*
__»¡riù
 
__±r
, 
size_t
 
__size
,

705 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

710 
size_t
 
	$fwr™e
 (
__cÚ¡
 *
__»¡riù
 
__±r
, 
size_t
 
__size
,

711 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__s
è
__wur
;

712 
__END_NAMESPACE_STD


714 #ifdeà
__USE_GNU


721 
	`åuts_uÆocked
 (
__cÚ¡
 *
__»¡riù
 
__s
,

722 
FILE
 *
__»¡riù
 
__¡»am
);

725 #ifdeà
__USE_MISC


732 
size_t
 
	$ä—d_uÆocked
 (*
__»¡riù
 
__±r
, 
size_t
 
__size
,

733 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

734 
size_t
 
	$fwr™e_uÆocked
 (
__cÚ¡
 *
__»¡riù
 
__±r
, 
size_t
 
__size
,

735 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

739 
__BEGIN_NAMESPACE_STD


744 
	`f£ek
 (
FILE
 *
__¡»am
, 
__off
, 
__wh’û
);

749 
	$á–l
 (
FILE
 *
__¡»am
è
__wur
;

754 
	`»wšd
 (
FILE
 *
__¡»am
);

755 
__END_NAMESPACE_STD


762 #ià
defšed
 
__USE_LARGEFILE
 || defšed 
__USE_XOPEN2K


763 #iâdeà
__USE_FILE_OFFSET64


768 
	`f£eko
 (
FILE
 *
__¡»am
, 
__off_t
 
__off
, 
__wh’û
);

773 
__off_t
 
	$á–lo
 (
FILE
 *
__¡»am
è
__wur
;

775 #ifdeà
__REDIRECT


776 
	`__REDIRECT
 (
f£eko
,

777 (
FILE
 *
__¡»am
, 
__off64_t
 
__off
, 
__wh’û
),

778 
f£eko64
);

779 
__off64_t
 
	`__REDIRECT
 (
á–lo
, (
FILE
 *
__¡»am
), 
á–lo64
);

781 
	#f£eko
 
f£eko64


	)

782 
	#á–lo
 
á–lo64


	)

787 
__BEGIN_NAMESPACE_STD


788 #iâdeà
__USE_FILE_OFFSET64


793 
	`fg‘pos
 (
FILE
 *
__»¡riù
 
__¡»am
, 
åos_t
 *__»¡riù 
__pos
);

798 
	`f£os
 (
FILE
 *
__¡»am
, 
__cÚ¡
 
åos_t
 *
__pos
);

800 #ifdeà
__REDIRECT


801 
	`__REDIRECT
 (
fg‘pos
, (
FILE
 *
__»¡riù
 
__¡»am
,

802 
åos_t
 *
__»¡riù
 
__pos
), 
fg‘pos64
);

803 
	`__REDIRECT
 (
f£os
,

804 (
FILE
 *
__¡»am
, 
__cÚ¡
 
åos_t
 *
__pos
), 
f£os64
);

806 
	#fg‘pos
 
fg‘pos64


	)

807 
	#f£os
 
f£os64


	)

810 
__END_NAMESPACE_STD


812 #ifdeà
__USE_LARGEFILE64


813 
	`f£eko64
 (
FILE
 *
__¡»am
, 
__off64_t
 
__off
, 
__wh’û
);

814 
__off64_t
 
	$á–lo64
 (
FILE
 *
__¡»am
è
__wur
;

815 
	`fg‘pos64
 (
FILE
 *
__»¡riù
 
__¡»am
, 
åos64_t
 *__»¡riù 
__pos
);

816 
	`f£os64
 (
FILE
 *
__¡»am
, 
__cÚ¡
 
åos64_t
 *
__pos
);

819 
__BEGIN_NAMESPACE_STD


821 
	$ş—»¼
 (
FILE
 *
__¡»am
è
__THROW
;

823 
	$ãof
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

825 
	$ã¼Ü
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

826 
__END_NAMESPACE_STD


828 #ifdeà
__USE_MISC


830 
	$ş—»¼_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
;

831 
	$ãof_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

832 
	$ã¼Ü_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

836 
__BEGIN_NAMESPACE_STD


841 
	`³¼Ü
 (
__cÚ¡
 *
__s
);

842 
__END_NAMESPACE_STD


848 
	~<b™s/sys_”¾i¡.h
>

851 #ifdef 
__USE_POSIX


853 
	$f’o
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

856 #ifdeà
__USE_MISC


858 
	$f’o_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

862 #ià(
defšed
 
__USE_POSIX2
 || defšed 
__USE_SVID
 || defšed 
__USE_BSD
 || \

863 
defšed
 
__USE_MISC
)

868 
FILE
 *
	$pİ’
 (
__cÚ¡
 *
__commªd
, __cÚ¡ *
__modes
è
__wur
;

874 
	`pşo£
 (
FILE
 *
__¡»am
);

878 #ifdef 
__USE_POSIX


880 *
	$ù”mid
 (*
__s
è
__THROW
;

884 #ifdeà
__USE_XOPEN


886 *
	`cu£rid
 (*
__s
);

890 #ifdef 
__USE_GNU


891 
ob¡ack
;

894 
	$ob¡ack_´štf
 (
ob¡ack
 *
__»¡riù
 
__ob¡ack
,

895 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...)

896 
__THROW
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 3)));

897 
	$ob¡ack_v´štf
 (
ob¡ack
 *
__»¡riù
 
__ob¡ack
,

898 
__cÚ¡
 *
__»¡riù
 
__fÜm©
,

899 
_G_va_li¡
 
__¬gs
)

900 
__THROW
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 0)));

904 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


908 
	$æockfe
 (
FILE
 *
__¡»am
è
__THROW
;

912 
	$árylockfe
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

915 
	$fuÆockfe
 (
FILE
 *
__¡»am
è
__THROW
;

918 #ià
defšed
 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K
 && !defšed 
__USE_GNU


922 
	#__Ãed_g‘İt


	)

923 
	~<g‘İt.h
>

928 #ifdeà
__USE_EXTERN_INLINES


929 
	~<b™s/¡dio.h
>

931 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__ex‹º_®ways_šlše


932 
	~<b™s/¡dio2.h
>

934 #ifdeà
__LDBL_COMPAT


935 
	~<b™s/¡dio-ldbl.h
>

938 
__END_DECLS


	@/usr/include/stdlib.h

23 #iâdef 
_STDLIB_H


25 
	~<ã©u»s.h
>

28 
	#__Ãed_size_t


	)

29 #iâdeà
__Ãed_m®loc_ªd_ÿÎoc


30 
	#__Ãed_wch¬_t


	)

31 
	#__Ãed_NULL


	)

33 
	~<¡ddef.h
>

35 
	g__BEGIN_DECLS


37 #iâdeà
__Ãed_m®loc_ªd_ÿÎoc


38 
	#_STDLIB_H
 1

	)

40 #ià(
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8
è&& !defšed 
_SYS_WAIT_H


42 
	~<b™s/wa™æags.h
>

43 
	~<b™s/wa™¡©us.h
>

45 #ifdeà
__USE_BSD


50 #ià
defšed
 
__GNUC__
 && !defšed 
__ılu¥lus


51 
	#__WAIT_INT
(
¡©us
) \

52 (
	`__ex‹nsiÚ__
 (((uniÚ { 
	`__ty³of
(
¡©us
è
__š
; 
__i
; }) \

53 { .
__š
 = (
¡©us
è}).
__i
))

	)

55 
	#__WAIT_INT
(
¡©us
è(*(*è&(¡©us))

	)

63 #ià!
defšed
 
__GNUC__
 || __GNUC__ < 2 || defšed 
__ılu¥lus


64 
	#__WAIT_STATUS
 *

	)

65 
	#__WAIT_STATUS_DEFN
 *

	)

70 
wa™
 *
	m__u±r
;

71 *
	m__Œ
;

72 } 
	t__WAIT_STATUS
 
	t__©Œibu‹__
 ((
	t__Œª¥¬’t_uniÚ__
));

73 
	#__WAIT_STATUS_DEFN
 *

	)

78 
	#__WAIT_INT
(
¡©us
è(¡©us)

	)

79 
	#__WAIT_STATUS
 *

	)

80 
	#__WAIT_STATUS_DEFN
 *

	)

85 
	#WEXITSTATUS
(
¡©us
è
	`__WEXITSTATUS
 (
	`__WAIT_INT
 (¡©us))

	)

86 
	#WTERMSIG
(
¡©us
è
	`__WTERMSIG
 (
	`__WAIT_INT
 (¡©us))

	)

87 
	#WSTOPSIG
(
¡©us
è
	`__WSTOPSIG
 (
	`__WAIT_INT
 (¡©us))

	)

88 
	#WIFEXITED
(
¡©us
è
	`__WIFEXITED
 (
	`__WAIT_INT
 (¡©us))

	)

89 
	#WIFSIGNALED
(
¡©us
è
	`__WIFSIGNALED
 (
	`__WAIT_INT
 (¡©us))

	)

90 
	#WIFSTOPPED
(
¡©us
è
	`__WIFSTOPPED
 (
	`__WAIT_INT
 (¡©us))

	)

91 #ifdeà
__WIFCONTINUED


92 
	#WIFCONTINUED
(
¡©us
è
	`__WIFCONTINUED
 (
	`__WAIT_INT
 (¡©us))

	)

96 
__BEGIN_NAMESPACE_STD


100 
	mquÙ
;

101 
	m»m
;

102 } 
	tdiv_t
;

105 #iâdeà
__ldiv_t_defšed


108 
	mquÙ
;

109 
	m»m
;

110 } 
	tldiv_t
;

111 
	#__ldiv_t_defšed
 1

	)

113 
	g__END_NAMESPACE_STD


115 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__Îdiv_t_defšed


116 
__BEGIN_NAMESPACE_C99


118 
__ex‹nsiÚ__
 struct

120 
	mquÙ
;

121 
	m»m
;

122 } 
	tÎdiv_t
;

123 
	#__Îdiv_t_defšed
 1

	)

124 
	g__END_NAMESPACE_C99


129 
	#RAND_MAX
 2147483647

	)

134 
	#EXIT_FAILURE
 1

	)

135 
	#EXIT_SUCCESS
 0

	)

139 
	#MB_CUR_MAX
 (
	`__ùy³_g‘_mb_cur_max
 ())

	)

140 
size_t
 
	$__ùy³_g‘_mb_cur_max
 (è
__THROW
 
__wur
;

143 
__BEGIN_NAMESPACE_STD


145 
	$©of
 (
__cÚ¡
 *
__ÅŒ
)

146 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

148 
	$©oi
 (
__cÚ¡
 *
__ÅŒ
)

149 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

151 
	$©Ş
 (
__cÚ¡
 *
__ÅŒ
)

152 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

153 
__END_NAMESPACE_STD


155 #ià
defšed
 
__USE_ISOC99
 || (defšed 
__GLIBC_HAVE_LONG_LONG
 && defšed 
__USE_MISC
)

156 
__BEGIN_NAMESPACE_C99


158 
__ex‹nsiÚ__
 
	$©Şl
 (
__cÚ¡
 *
__ÅŒ
)

159 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

160 
__END_NAMESPACE_C99


163 
__BEGIN_NAMESPACE_STD


165 
	$¡¹od
 (
__cÚ¡
 *
__»¡riù
 
__ÅŒ
,

166 **
__»¡riù
 
__’d±r
)

167 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

168 
__END_NAMESPACE_STD


170 #ifdef 
__USE_ISOC99


171 
__BEGIN_NAMESPACE_C99


173 
	$¡¹of
 (
__cÚ¡
 *
__»¡riù
 
__ÅŒ
,

174 **
__»¡riù
 
__’d±r
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

176 
	$¡¹Şd
 (
__cÚ¡
 *
__»¡riù
 
__ÅŒ
,

177 **
__»¡riù
 
__’d±r
)

178 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

179 
__END_NAMESPACE_C99


182 
__BEGIN_NAMESPACE_STD


184 
	$¡¹Ş
 (
__cÚ¡
 *
__»¡riù
 
__ÅŒ
,

185 **
__»¡riù
 
__’d±r
, 
__ba£
)

186 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

188 
	$¡¹oul
 (
__cÚ¡
 *
__»¡riù
 
__ÅŒ
,

189 **
__»¡riù
 
__’d±r
, 
__ba£
)

190 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

191 
__END_NAMESPACE_STD


193 #ià
defšed
 
__GLIBC_HAVE_LONG_LONG
 && defšed 
__USE_BSD


195 
__ex‹nsiÚ__


196 
	$¡¹oq
 (
__cÚ¡
 *
__»¡riù
 
__ÅŒ
,

197 **
__»¡riù
 
__’d±r
, 
__ba£
)

198 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

200 
__ex‹nsiÚ__


201 
	$¡¹ouq
 (
__cÚ¡
 *
__»¡riù
 
__ÅŒ
,

202 **
__»¡riù
 
__’d±r
, 
__ba£
)

203 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

206 #ià
defšed
 
__USE_ISOC99
 || (defšed 
__GLIBC_HAVE_LONG_LONG
 && defšed 
__USE_MISC
)

207 
__BEGIN_NAMESPACE_C99


209 
__ex‹nsiÚ__


210 
	$¡¹Şl
 (
__cÚ¡
 *
__»¡riù
 
__ÅŒ
,

211 **
__»¡riù
 
__’d±r
, 
__ba£
)

212 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

214 
__ex‹nsiÚ__


215 
	$¡¹ouÎ
 (
__cÚ¡
 *
__»¡riù
 
__ÅŒ
,

216 **
__»¡riù
 
__’d±r
, 
__ba£
)

217 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

218 
__END_NAMESPACE_C99


222 #ifdeà
__USE_GNU


236 
	~<xloÿË.h
>

240 
	$¡¹Ş_l
 (
__cÚ¡
 *
__»¡riù
 
__ÅŒ
,

241 **
__»¡riù
 
__’d±r
, 
__ba£
,

242 
__loÿË_t
 
__loc
è
__THROW
 
	`__nÚnuÎ
 ((1, 4)è
__wur
;

244 
	$¡¹oul_l
 (
__cÚ¡
 *
__»¡riù
 
__ÅŒ
,

245 **
__»¡riù
 
__’d±r
,

246 
__ba£
, 
__loÿË_t
 
__loc
)

247 
__THROW
 
	`__nÚnuÎ
 ((1, 4)è
__wur
;

249 
__ex‹nsiÚ__


250 
	$¡¹Şl_l
 (
__cÚ¡
 *
__»¡riù
 
__ÅŒ
,

251 **
__»¡riù
 
__’d±r
, 
__ba£
,

252 
__loÿË_t
 
__loc
)

253 
__THROW
 
	`__nÚnuÎ
 ((1, 4)è
__wur
;

255 
__ex‹nsiÚ__


256 
	$¡¹ouÎ_l
 (
__cÚ¡
 *
__»¡riù
 
__ÅŒ
,

257 **
__»¡riù
 
__’d±r
,

258 
__ba£
, 
__loÿË_t
 
__loc
)

259 
__THROW
 
	`__nÚnuÎ
 ((1, 4)è
__wur
;

261 
	$¡¹od_l
 (
__cÚ¡
 *
__»¡riù
 
__ÅŒ
,

262 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

263 
__THROW
 
	`__nÚnuÎ
 ((1, 3)è
__wur
;

265 
	$¡¹of_l
 (
__cÚ¡
 *
__»¡riù
 
__ÅŒ
,

266 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

267 
__THROW
 
	`__nÚnuÎ
 ((1, 3)è
__wur
;

269 
	$¡¹Şd_l
 (
__cÚ¡
 *
__»¡riù
 
__ÅŒ
,

270 **
__»¡riù
 
__’d±r
,

271 
__loÿË_t
 
__loc
)

272 
__THROW
 
	`__nÚnuÎ
 ((1, 3)è
__wur
;

276 #ifdeà
__USE_EXTERN_INLINES


277 
__BEGIN_NAMESPACE_STD


278 
__ex‹º_šlše
 

279 
	`__NTH
 (
	$©of
 (
__cÚ¡
 *
__ÅŒ
))

281  
	`¡¹od
 (
__ÅŒ
, (**è
NULL
);

282 
	}
}

283 
__ex‹º_šlše
 

284 
__NTH
 (
	$©oi
 (
__cÚ¡
 *
__ÅŒ
))

286  (è
	`¡¹Ş
 (
__ÅŒ
, (**è
NULL
, 10);

287 
	}
}

288 
__ex‹º_šlše
 

289 
__NTH
 (
	$©Ş
 (
__cÚ¡
 *
__ÅŒ
))

291  
	`¡¹Ş
 (
__ÅŒ
, (**è
NULL
, 10);

292 
	}
}

293 
	g__END_NAMESPACE_STD


295 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_ISOC99


296 
__BEGIN_NAMESPACE_C99


297 
__ex‹nsiÚ__
 
__ex‹º_šlše
 

298 
__NTH
 (
	$©Şl
 (
__cÚ¡
 *
__ÅŒ
))

300  
	`¡¹Şl
 (
__ÅŒ
, (**è
NULL
, 10);

301 
	}
}

302 
	g__END_NAMESPACE_C99


307 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN_EXTENDED


311 *
	$l64a
 (
__n
è
__THROW
 
__wur
;

314 
	$a64l
 (
__cÚ¡
 *
__s
)

315 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

319 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_BSD


320 
	~<sys/ty³s.h
>

327 
	$¿ndom
 (è
__THROW
;

330 
	$¤ªdom
 (
__£ed
è
__THROW
;

336 *
	$š™¡©e
 (
__£ed
, *
__¡©ebuf
,

337 
size_t
 
__¡©–’
è
__THROW
 
	`__nÚnuÎ
 ((2));

341 *
	$£t¡©e
 (*
__¡©ebuf
è
__THROW
 
	`__nÚnuÎ
 ((1));

344 #ifdeà
__USE_MISC


349 
	s¿ndom_d©a


351 
št32_t
 *
åŒ
;

352 
št32_t
 *
½Œ
;

353 
št32_t
 *
¡©e
;

354 
¿nd_ty³
;

355 
¿nd_deg
;

356 
¿nd_£p
;

357 
št32_t
 *
’d_±r
;

360 
	$¿ndom_r
 (
¿ndom_d©a
 *
__»¡riù
 
__buf
,

361 
št32_t
 *
__»¡riù
 
__»suÉ
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

363 
	$¤ªdom_r
 (
__£ed
, 
¿ndom_d©a
 *
__buf
)

364 
__THROW
 
	`__nÚnuÎ
 ((2));

366 
	$š™¡©e_r
 (
__£ed
, *
__»¡riù
 
__¡©ebuf
,

367 
size_t
 
__¡©–’
,

368 
¿ndom_d©a
 *
__»¡riù
 
__buf
)

369 
__THROW
 
	`__nÚnuÎ
 ((2, 4));

371 
	$£t¡©e_r
 (*
__»¡riù
 
__¡©ebuf
,

372 
¿ndom_d©a
 *
__»¡riù
 
__buf
)

373 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

378 
__BEGIN_NAMESPACE_STD


380 
	$¿nd
 (è
__THROW
;

382 
	$¤ªd
 (
__£ed
è
__THROW
;

383 
__END_NAMESPACE_STD


385 #ifdeà
__USE_POSIX


387 
	$¿nd_r
 (*
__£ed
è
__THROW
;

391 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


395 
	$d¿nd48
 (è
__THROW
;

396 
	$”ªd48
 (
__xsubi
[3]è
__THROW
 
	`__nÚnuÎ
 ((1));

399 
	$Ìªd48
 (è
__THROW
;

400 
	$Äªd48
 (
__xsubi
[3])

401 
__THROW
 
	`__nÚnuÎ
 ((1));

404 
	$m¿nd48
 (è
__THROW
;

405 
	$j¿nd48
 (
__xsubi
[3])

406 
__THROW
 
	`__nÚnuÎ
 ((1));

409 
	$¤ªd48
 (
__£edv®
è
__THROW
;

410 *
	$£ed48
 (
__£ed16v
[3])

411 
__THROW
 
	`__nÚnuÎ
 ((1));

412 
	$lcÚg48
 (
__·¿m
[7]è
__THROW
 
	`__nÚnuÎ
 ((1));

414 #ifdeà
__USE_MISC


418 
	sd¿nd48_d©a


420 
__x
[3];

421 
__Şd_x
[3];

422 
__c
;

423 
__š™
;

424 
__a
;

428 
	$d¿nd48_r
 (
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

429 *
__»¡riù
 
__»suÉ
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

430 
	$”ªd48_r
 (
__xsubi
[3],

431 
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

432 *
__»¡riù
 
__»suÉ
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

435 
	$Ìªd48_r
 (
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

436 *
__»¡riù
 
__»suÉ
)

437 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

438 
	$Äªd48_r
 (
__xsubi
[3],

439 
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

440 *
__»¡riù
 
__»suÉ
)

441 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

444 
	$m¿nd48_r
 (
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

445 *
__»¡riù
 
__»suÉ
)

446 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

447 
	$j¿nd48_r
 (
__xsubi
[3],

448 
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

449 *
__»¡riù
 
__»suÉ
)

450 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

453 
	$¤ªd48_r
 (
__£edv®
, 
d¿nd48_d©a
 *
__bufãr
)

454 
__THROW
 
	`__nÚnuÎ
 ((2));

456 
	$£ed48_r
 (
__£ed16v
[3],

457 
d¿nd48_d©a
 *
__bufãr
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

459 
	$lcÚg48_r
 (
__·¿m
[7],

460 
d¿nd48_d©a
 *
__bufãr
)

461 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

467 #iâdeà
__m®loc_ªd_ÿÎoc_defšed


468 
	#__m®loc_ªd_ÿÎoc_defšed


	)

469 
__BEGIN_NAMESPACE_STD


471 *
	$m®loc
 (
size_t
 
__size
è
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

473 *
	$ÿÎoc
 (
size_t
 
__nmemb
, size_ˆ
__size
)

474 
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

475 
__END_NAMESPACE_STD


478 #iâdeà
__Ãed_m®loc_ªd_ÿÎoc


479 
__BEGIN_NAMESPACE_STD


485 *
	$»®loc
 (*
__±r
, 
size_t
 
__size
)

486 
__THROW
 
__©Œibu‹_w¬n_unu£d_»suÉ__
;

488 
	$ä“
 (*
__±r
è
__THROW
;

489 
__END_NAMESPACE_STD


491 #ifdef 
__USE_MISC


493 
	$cä“
 (*
__±r
è
__THROW
;

496 #ià
defšed
 
__USE_GNU
 || defšed 
__USE_BSD
 || defšed 
__USE_MISC


497 
	~<®loÿ.h
>

500 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K
) \

501 || 
defšed
 
__USE_BSD


503 *
	$v®loc
 (
size_t
 
__size
è
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

506 #ifdeà
__USE_XOPEN2K


508 
	$posix_mem®ign
 (**
__mem±r
, 
size_t
 
__®ignm’t
, size_ˆ
__size
)

509 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

512 
__BEGIN_NAMESPACE_STD


514 
	$abÜt
 (è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

518 
	`©ex™
 ((*
__func
è()è
__THROW
 
	`__nÚnuÎ
 ((1));

520 #ifdeà
__USE_GNU


524 #ifdeà
__ılu¥lus


525 "C++" 
	`©_quick_ex™
 ((*
__func
) ())

526 
__THROW
 
	`__asm
 ("©_quick_ex™"è
	`__nÚnuÎ
 ((1));

528 
	`©_quick_ex™
 ((*
__func
è()è
__THROW
 
	`__nÚnuÎ
 ((1));

531 
__END_NAMESPACE_STD


533 #ifdef 
__USE_MISC


536 
	`Ú_ex™
 ((*
__func
è(
__¡©us
, *
__¬g
), *__arg)

537 
__THROW
 
	`__nÚnuÎ
 ((1));

540 
__BEGIN_NAMESPACE_STD


544 
	$ex™
 (
__¡©us
è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

546 #ifdeà
__USE_GNU


552 
	$quick_ex™
 (
__¡©us
è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

554 
__END_NAMESPACE_STD


556 #ifdeà
__USE_ISOC99


557 
__BEGIN_NAMESPACE_C99


560 
	$_Ex™
 (
__¡©us
è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

561 
__END_NAMESPACE_C99


565 
__BEGIN_NAMESPACE_STD


567 *
	$g‘’v
 (
__cÚ¡
 *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

568 
__END_NAMESPACE_STD


572 *
	$__£cu»_g‘’v
 (
__cÚ¡
 *
__Çme
)

573 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

575 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


579 
	$pu‹nv
 (*
__¡ršg
è
__THROW
 
	`__nÚnuÎ
 ((1));

582 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN2K


585 
	$£‹nv
 (
__cÚ¡
 *
__Çme
, __cÚ¡ *
__v®ue
, 
__»¶aû
)

586 
__THROW
 
	`__nÚnuÎ
 ((2));

589 
	$un£‹nv
 (
__cÚ¡
 *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1));

592 #ifdef 
__USE_MISC


596 
	$ş—»nv
 (è
__THROW
;

600 #ià
defšed
 
__USE_MISC
 \

601 || (
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K
)

606 *
	$mk‹mp
 (*
__‹m¶©e
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

609 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
 \

610 || 
defšed
 
__USE_XOPEN2K8


619 #iâdeà
__USE_FILE_OFFSET64


620 
	$mk¡emp
 (*
__‹m¶©e
è
	`__nÚnuÎ
 ((1)è
__wur
;

622 #ifdeà
__REDIRECT


623 
	`__REDIRECT
 (
mk¡emp
, (*
__‹m¶©e
), 
mk¡emp64
)

624 
	`__nÚnuÎ
 ((1)è
__wur
;

626 
	#mk¡emp
 
mk¡emp64


	)

629 #ifdeà
__USE_LARGEFILE64


630 
	$mk¡emp64
 (*
__‹m¶©e
è
	`__nÚnuÎ
 ((1)è
__wur
;

634 #ifdeà
__USE_MISC


641 #iâdeà
__USE_FILE_OFFSET64


642 
	$mk¡emps
 (*
__‹m¶©e
, 
__suffixËn
è
	`__nÚnuÎ
 ((1)è
__wur
;

644 #ifdeà
__REDIRECT


645 
	`__REDIRECT
 (
mk¡emps
, (*
__‹m¶©e
, 
__suffixËn
),

646 
mk¡emps64
è
	`__nÚnuÎ
 ((1)è
__wur
;

648 
	#mk¡emps
 
mk¡emps64


	)

651 #ifdeà
__USE_LARGEFILE64


652 
	$mk¡emps64
 (*
__‹m¶©e
, 
__suffixËn
)

653 
	`__nÚnuÎ
 ((1)è
__wur
;

657 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN2K8


663 *
	$mkd‹mp
 (*
__‹m¶©e
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

666 #ifdeà
__USE_GNU


673 #iâdeà
__USE_FILE_OFFSET64


674 
	$mko¡emp
 (*
__‹m¶©e
, 
__æags
è
	`__nÚnuÎ
 ((1)è
__wur
;

676 #ifdeà
__REDIRECT


677 
	`__REDIRECT
 (
mko¡emp
, (*
__‹m¶©e
, 
__æags
), 
mko¡emp64
)

678 
	`__nÚnuÎ
 ((1)è
__wur
;

680 
	#mko¡emp
 
mko¡emp64


	)

683 #ifdeà
__USE_LARGEFILE64


684 
	$mko¡emp64
 (*
__‹m¶©e
, 
__æags
è
	`__nÚnuÎ
 ((1)è
__wur
;

693 #iâdeà
__USE_FILE_OFFSET64


694 
	$mko¡emps
 (*
__‹m¶©e
, 
__suffixËn
, 
__æags
)

695 
	`__nÚnuÎ
 ((1)è
__wur
;

697 #ifdeà
__REDIRECT


698 
	`__REDIRECT
 (
mko¡emps
, (*
__‹m¶©e
, 
__suffixËn
,

699 
__æags
), 
mko¡emps64
)

700 
	`__nÚnuÎ
 ((1)è
__wur
;

702 
	#mko¡emps
 
mko¡emps64


	)

705 #ifdeà
__USE_LARGEFILE64


706 
	$mko¡emps64
 (*
__‹m¶©e
, 
__suffixËn
, 
__æags
)

707 
	`__nÚnuÎ
 ((1)è
__wur
;

712 
__BEGIN_NAMESPACE_STD


717 
	$sy¡em
 (
__cÚ¡
 *
__commªd
è
__wur
;

718 
__END_NAMESPACE_STD


721 #ifdef 
__USE_GNU


724 *
	$ÿnÚiÿlize_fe_Çme
 (
__cÚ¡
 *
__Çme
)

725 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

728 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


734 *
	$»®·th
 (
__cÚ¡
 *
__»¡riù
 
__Çme
,

735 *
__»¡riù
 
__»sŞved
è
__THROW
 
__wur
;

740 #iâdeà
__COMPAR_FN_T


741 
	#__COMPAR_FN_T


	)

742 (*
	t__com·r_â_t
è(
	t__cÚ¡
 *, __const *);

744 #ifdef 
__USE_GNU


745 
__com·r_â_t
 
	tcom·risÚ_â_t
;

748 #ifdeà
__USE_GNU


749 (*
	t__com·r_d_â_t
è(
	t__cÚ¡
 *, __const *, *);

752 
__BEGIN_NAMESPACE_STD


755 *
	$b£¬ch
 (
__cÚ¡
 *
__key
, __cÚ¡ *
__ba£
,

756 
size_t
 
__nmemb
, size_ˆ
__size
, 
__com·r_â_t
 
__com·r
)

757 
	`__nÚnuÎ
 ((1, 2, 5)è
__wur
;

761 
	$qsÜt
 (*
__ba£
, 
size_t
 
__nmemb
, size_ˆ
__size
,

762 
__com·r_â_t
 
__com·r
è
	`__nÚnuÎ
 ((1, 4));

763 #ifdeà
__USE_GNU


764 
	$qsÜt_r
 (*
__ba£
, 
size_t
 
__nmemb
, size_ˆ
__size
,

765 
__com·r_d_â_t
 
__com·r
, *
__¬g
)

766 
	`__nÚnuÎ
 ((1, 4));

771 
	$abs
 (
__x
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

772 
	$Ïbs
 (
__x
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

773 
__END_NAMESPACE_STD


775 #ifdeà
__USE_ISOC99


776 
__ex‹nsiÚ__
 
	$Îabs
 (
__x
)

777 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

781 
__BEGIN_NAMESPACE_STD


785 
div_t
 
	$div
 (
__num”
, 
__d’om
)

786 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

787 
ldiv_t
 
	$ldiv
 (
__num”
, 
__d’om
)

788 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

789 
__END_NAMESPACE_STD


791 #ifdeà
__USE_ISOC99


792 
__BEGIN_NAMESPACE_C99


793 
__ex‹nsiÚ__
 
Îdiv_t
 
	$Îdiv
 (
__num”
,

794 
__d’om
)

795 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

796 
__END_NAMESPACE_C99


800 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K
) \

801 || 
defšed
 
__USE_SVID


808 *
	$ecvt
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

809 *
__»¡riù
 
__sign
è
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

814 *
	$fcvt
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

815 *
__»¡riù
 
__sign
è
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

820 *
	$gcvt
 (
__v®ue
, 
__ndig™
, *
__buf
)

821 
__THROW
 
	`__nÚnuÎ
 ((3)è
__wur
;

824 #ifdeà
__USE_MISC


826 *
	$qecvt
 (
__v®ue
, 
__ndig™
,

827 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
)

828 
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

829 *
	$qfcvt
 (
__v®ue
, 
__ndig™
,

830 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
)

831 
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

832 *
	$qgcvt
 (
__v®ue
, 
__ndig™
, *
__buf
)

833 
__THROW
 
	`__nÚnuÎ
 ((3)è
__wur
;

838 
	$ecvt_r
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

839 *
__»¡riù
 
__sign
, *__»¡riù 
__buf
,

840 
size_t
 
__Ën
è
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

841 
	$fcvt_r
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

842 *
__»¡riù
 
__sign
, *__»¡riù 
__buf
,

843 
size_t
 
__Ën
è
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

845 
	$qecvt_r
 (
__v®ue
, 
__ndig™
,

846 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
,

847 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

848 
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

849 
	$qfcvt_r
 (
__v®ue
, 
__ndig™
,

850 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
,

851 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

852 
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

857 
__BEGIN_NAMESPACE_STD


860 
	$mbËn
 (
__cÚ¡
 *
__s
, 
size_t
 
__n
è
__THROW
 
__wur
;

863 
	$mbtowc
 (
wch¬_t
 *
__»¡riù
 
__pwc
,

864 
__cÚ¡
 *
__»¡riù
 
__s
, 
size_t
 
__n
è
__THROW
 
__wur
;

867 
	$wùomb
 (*
__s
, 
wch¬_t
 
__wch¬
è
__THROW
 
__wur
;

871 
size_t
 
	$mb¡owcs
 (
wch¬_t
 *
__»¡riù
 
__pwcs
,

872 
__cÚ¡
 *
__»¡riù
 
__s
, 
size_t
 
__n
è
__THROW
;

874 
size_t
 
	$wc¡ombs
 (*
__»¡riù
 
__s
,

875 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__pwcs
, 
size_t
 
__n
)

876 
__THROW
;

877 
__END_NAMESPACE_STD


880 #ifdeà
__USE_SVID


885 
	$½m©ch
 (
__cÚ¡
 *
__»¥Ú£
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

889 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


896 
	$g‘subİt
 (**
__»¡riù
 
__İtiÚp
,

897 *
__cÚ¡
 *
__»¡riù
 
__tok’s
,

898 **
__»¡riù
 
__v®u•
)

899 
__THROW
 
	`__nÚnuÎ
 ((1, 2, 3)è
__wur
;

903 #ifdeà
__USE_XOPEN


905 
	$£tkey
 (
__cÚ¡
 *
__key
è
__THROW
 
	`__nÚnuÎ
 ((1));

911 #ifdeà
__USE_XOPEN2KXSI


913 
	$posix_İ’±
 (
__oæag
è
__wur
;

916 #ifdeà
__USE_XOPEN


921 
	$g¿Á±
 (
__fd
è
__THROW
;

925 
	$uÆock±
 (
__fd
è
__THROW
;

930 *
	$±¢ame
 (
__fd
è
__THROW
 
__wur
;

933 #ifdeà
__USE_GNU


937 
	$±¢ame_r
 (
__fd
, *
__buf
, 
size_t
 
__buæ’
)

938 
__THROW
 
	`__nÚnuÎ
 ((2));

941 
	`g‘±
 ();

944 #ifdeà
__USE_BSD


948 
	$g‘lßdavg
 (
__lßdavg
[], 
__ÃËm
)

949 
__THROW
 
	`__nÚnuÎ
 ((1));

954 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__ex‹º_®ways_šlše


955 
	~<b™s/¡dlib.h
>

957 #ifdeà
__LDBL_COMPAT


958 
	~<b™s/¡dlib-ldbl.h
>

962 #undeà
__Ãed_m®loc_ªd_ÿÎoc


964 
__END_DECLS


	@/usr/include/string.h

24 #iâdef 
_STRING_H


25 
	#_STRING_H
 1

	)

27 
	~<ã©u»s.h
>

29 
	g__BEGIN_DECLS


32 
	#__Ãed_size_t


	)

33 
	#__Ãed_NULL


	)

34 
	~<¡ddef.h
>

37 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (4, 4)

38 
	#__CORRECT_ISO_CPP_STRING_H_PROTO


	)

42 
__BEGIN_NAMESPACE_STD


44 *
	$memıy
 (*
__»¡riù
 
__de¡
,

45 
__cÚ¡
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

46 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

49 *
	$memmove
 (*
__de¡
, 
__cÚ¡
 *
__¤c
, 
size_t
 
__n
)

50 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

51 
__END_NAMESPACE_STD


56 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_BSD
 || defšed 
__USE_XOPEN


57 *
	$memcıy
 (*
__»¡riù
 
__de¡
, 
__cÚ¡
 *__»¡riù 
__¤c
,

58 
__c
, 
size_t
 
__n
)

59 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

63 
__BEGIN_NAMESPACE_STD


65 *
	$mem£t
 (*
__s
, 
__c
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

68 
	$memcmp
 (
__cÚ¡
 *
__s1
, __cÚ¡ *
__s2
, 
size_t
 
__n
)

69 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

72 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


75 *
	`memchr
 (*
__s
, 
__c
, 
size_t
 
__n
)

76 
__THROW
 
	`__asm
 ("memchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

77 
__cÚ¡
 *
	`memchr
 (__cÚ¡ *
__s
, 
__c
, 
size_t
 
__n
)

78 
__THROW
 
	`__asm
 ("memchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

80 #ifdeà
__OPTIMIZE__


81 
__ex‹º_®ways_šlše
 *

82 
	`memchr
 (*
__s
, 
__c
, 
size_t
 
__n
è
__THROW


84  
	`__butš_memchr
 (
__s
, 
__c
, 
__n
);

87 
__ex‹º_®ways_šlše
 
__cÚ¡
 *

88 
	`memchr
 (
__cÚ¡
 *
__s
, 
__c
, 
size_t
 
__n
è
__THROW


90  
	`__butš_memchr
 (
__s
, 
__c
, 
__n
);

93 
	}
}

95 *
	$memchr
 (
__cÚ¡
 *
__s
, 
__c
, 
size_t
 
__n
)

96 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

98 
__END_NAMESPACE_STD


100 #ifdeà
__USE_GNU


103 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


104 "C++" *
	$¿wmemchr
 (*
__s
, 
__c
)

105 
__THROW
 
	`__asm
 ("¿wmemchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

106 "C++" 
__cÚ¡
 *
	$¿wmemchr
 (
__cÚ¡
 *
__s
, 
__c
)

107 
__THROW
 
	`__asm
 ("¿wmemchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

109 *
	$¿wmemchr
 (
__cÚ¡
 *
__s
, 
__c
)

110 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

114 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


115 "C++" *
	$memrchr
 (*
__s
, 
__c
, 
size_t
 
__n
)

116 
__THROW
 
	`__asm
 ("memrchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

117 "C++" 
__cÚ¡
 *
	$memrchr
 (
__cÚ¡
 *
__s
, 
__c
, 
size_t
 
__n
)

118 
__THROW
 
	`__asm
 ("memrchr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

120 *
	$memrchr
 (
__cÚ¡
 *
__s
, 
__c
, 
size_t
 
__n
)

121 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

126 
__BEGIN_NAMESPACE_STD


128 *
	$¡rıy
 (*
__»¡riù
 
__de¡
, 
__cÚ¡
 *__»¡riù 
__¤c
)

129 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

131 *
	$¡ºıy
 (*
__»¡riù
 
__de¡
,

132 
__cÚ¡
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

133 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

136 *
	$¡rÿt
 (*
__»¡riù
 
__de¡
, 
__cÚ¡
 *__»¡riù 
__¤c
)

137 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

139 *
	$¡ºÿt
 (*
__»¡riù
 
__de¡
, 
__cÚ¡
 *__»¡riù 
__¤c
,

140 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

143 
	$¡rcmp
 (
__cÚ¡
 *
__s1
, __cÚ¡ *
__s2
)

144 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

146 
	$¡ºcmp
 (
__cÚ¡
 *
__s1
, __cÚ¡ *
__s2
, 
size_t
 
__n
)

147 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

150 
	$¡rcŞl
 (
__cÚ¡
 *
__s1
, __cÚ¡ *
__s2
)

151 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

153 
size_t
 
	$¡rxäm
 (*
__»¡riù
 
__de¡
,

154 
__cÚ¡
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

155 
__THROW
 
	`__nÚnuÎ
 ((2));

156 
__END_NAMESPACE_STD


158 #ifdeà
__USE_XOPEN2K8


162 
	~<xloÿË.h
>

165 
	$¡rcŞl_l
 (
__cÚ¡
 *
__s1
, __cÚ¡ *
__s2
, 
__loÿË_t
 
__l
)

166 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2, 3));

168 
size_t
 
	$¡rxäm_l
 (*
__de¡
, 
__cÚ¡
 *
__¤c
, 
size_t
 
__n
,

169 
__loÿË_t
 
__l
è
__THROW
 
	`__nÚnuÎ
 ((2, 4));

172 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED
 \

173 || 
defšed
 
__USE_XOPEN2K8


175 *
	$¡rdup
 (
__cÚ¡
 *
__s
)

176 
__THROW
 
__©Œibu‹_m®loc__
 
	`__nÚnuÎ
 ((1));

182 #ià
defšed
 
__USE_XOPEN2K8


183 *
	$¡ºdup
 (
__cÚ¡
 *
__¡ršg
, 
size_t
 
__n
)

184 
__THROW
 
__©Œibu‹_m®loc__
 
	`__nÚnuÎ
 ((1));

187 #ià
defšed
 
__USE_GNU
 && defšed 
__GNUC__


189 
	#¡rdu·
(
s
) \

190 (
__ex‹nsiÚ__
 \

192 
__cÚ¡
 *
__Şd
 = (
s
); \

193 
size_t
 
__Ën
 = 
	`¡¾’
 (
__Şd
) + 1; \

194 *
__Ãw
 = (*è
	`__butš_®loÿ
 (
__Ën
); \

195 (*è
	`memıy
 (
__Ãw
, 
__Şd
, 
__Ën
); \

196 
	}
}))

	)

199 
	#¡ºdu·
(
s
, 
n
) \

200 (
__ex‹nsiÚ__
 \

202 
__cÚ¡
 *
__Şd
 = (
s
); \

203 
size_t
 
__Ën
 = 
	`¡ºËn
 (
__Şd
, (
n
)); \

204 *
__Ãw
 = (*è
	`__butš_®loÿ
 (
__Ën
 + 1); \

205 
__Ãw
[
__Ën
] = '\0'; \

206 (*è
	`memıy
 (
__Ãw
, 
__Şd
, 
__Ën
); \

207 }))

	)

210 
	g__BEGIN_NAMESPACE_STD


212 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


215 *
¡rchr
 (*
__s
, 
__c
)

216 
__THROW
 
__asm
 ("¡rchr"è
__©Œibu‹_pu»__
 
__nÚnuÎ
 ((1));

217 
__cÚ¡
 *
¡rchr
 (__cÚ¡ *
__s
, 
__c
)

218 
__THROW
 
__asm
 ("¡rchr"è
__©Œibu‹_pu»__
 
__nÚnuÎ
 ((1));

220 #ifdeà
__OPTIMIZE__


221 
__ex‹º_®ways_šlše
 *

222 
¡rchr
 (*
__s
, 
__c
è
	g__THROW


224  
__butš_¡rchr
 (
__s
, 
__c
);

227 
__ex‹º_®ways_šlše
 
__cÚ¡
 *

228 
¡rchr
 (
__cÚ¡
 *
__s
, 
__c
è
	g__THROW


230  
__butš_¡rchr
 (
__s
, 
__c
);

235 *
	$¡rchr
 (
__cÚ¡
 *
__s
, 
__c
)

236 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

239 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


242 *
	`¡¼chr
 (*
__s
, 
__c
)

243 
__THROW
 
	`__asm
 ("¡¼chr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

244 
__cÚ¡
 *
	`¡¼chr
 (__cÚ¡ *
__s
, 
__c
)

245 
__THROW
 
	`__asm
 ("¡¼chr"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

247 #ifdeà
__OPTIMIZE__


248 
__ex‹º_®ways_šlše
 *

249 
	`¡¼chr
 (*
__s
, 
__c
è
__THROW


251  
	`__butš_¡¼chr
 (
__s
, 
__c
);

254 
__ex‹º_®ways_šlše
 
__cÚ¡
 *

255 
	`¡¼chr
 (
__cÚ¡
 *
__s
, 
__c
è
__THROW


257  
	`__butš_¡¼chr
 (
__s
, 
__c
);

260 
	}
}

262 *
	$¡¼chr
 (
__cÚ¡
 *
__s
, 
__c
)

263 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

265 
__END_NAMESPACE_STD


267 #ifdeà
__USE_GNU


270 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


271 "C++" *
	$¡rchºul
 (*
__s
, 
__c
)

272 
__THROW
 
	`__asm
 ("¡rchºul"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

273 "C++" 
__cÚ¡
 *
	$¡rchºul
 (
__cÚ¡
 *
__s
, 
__c
)

274 
__THROW
 
	`__asm
 ("¡rchºul"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

276 *
	$¡rchºul
 (
__cÚ¡
 *
__s
, 
__c
)

277 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

281 
__BEGIN_NAMESPACE_STD


284 
size_t
 
	$¡rc¥n
 (
__cÚ¡
 *
__s
, __cÚ¡ *
__»jeù
)

285 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

288 
size_t
 
	$¡r¥n
 (
__cÚ¡
 *
__s
, __cÚ¡ *
__acû±
)

289 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

291 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


294 *
	`¡½brk
 (*
__s
, 
__cÚ¡
 *
__acû±
)

295 
__THROW
 
	`__asm
 ("¡½brk"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

296 
__cÚ¡
 *
	`¡½brk
 (__cÚ¡ *
__s
, __cÚ¡ *
__acû±
)

297 
__THROW
 
	`__asm
 ("¡½brk"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

299 #ifdeà
__OPTIMIZE__


300 
__ex‹º_®ways_šlše
 *

301 
	`¡½brk
 (*
__s
, 
__cÚ¡
 *
__acû±
è
__THROW


303  
	`__butš_¡½brk
 (
__s
, 
__acû±
);

306 
__ex‹º_®ways_šlše
 
__cÚ¡
 *

307 
	`¡½brk
 (
__cÚ¡
 *
__s
, __cÚ¡ *
__acû±
è
__THROW


309  
	`__butš_¡½brk
 (
__s
, 
__acû±
);

312 
	}
}

314 *
	$¡½brk
 (
__cÚ¡
 *
__s
, __cÚ¡ *
__acû±
)

315 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

318 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


321 *
	`¡r¡r
 (*
__hay¡ack
, 
__cÚ¡
 *
__ÃedË
)

322 
__THROW
 
	`__asm
 ("¡r¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

323 
__cÚ¡
 *
	`¡r¡r
 (__cÚ¡ *
__hay¡ack
,

324 
__cÚ¡
 *
__ÃedË
)

325 
__THROW
 
	`__asm
 ("¡r¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

327 #ifdeà
__OPTIMIZE__


328 
__ex‹º_®ways_šlše
 *

329 
	`¡r¡r
 (*
__hay¡ack
, 
__cÚ¡
 *
__ÃedË
è
__THROW


331  
	`__butš_¡r¡r
 (
__hay¡ack
, 
__ÃedË
);

334 
__ex‹º_®ways_šlše
 
__cÚ¡
 *

335 
	`¡r¡r
 (
__cÚ¡
 *
__hay¡ack
, __cÚ¡ *
__ÃedË
è
__THROW


337  
	`__butš_¡r¡r
 (
__hay¡ack
, 
__ÃedË
);

340 
	}
}

342 *
	$¡r¡r
 (
__cÚ¡
 *
__hay¡ack
, __cÚ¡ *
__ÃedË
)

343 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

348 *
	$¡¹ok
 (*
__»¡riù
 
__s
, 
__cÚ¡
 *__»¡riù 
__d–im
)

349 
__THROW
 
	`__nÚnuÎ
 ((2));

350 
__END_NAMESPACE_STD


354 *
	$__¡¹ok_r
 (*
__»¡riù
 
__s
,

355 
__cÚ¡
 *
__»¡riù
 
__d–im
,

356 **
__»¡riù
 
__§ve_±r
)

357 
__THROW
 
	`__nÚnuÎ
 ((2, 3));

358 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


359 *
	$¡¹ok_r
 (*
__»¡riù
 
__s
, 
__cÚ¡
 *__»¡riù 
__d–im
,

360 **
__»¡riù
 
__§ve_±r
)

361 
__THROW
 
	`__nÚnuÎ
 ((2, 3));

364 #ifdeà
__USE_GNU


366 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


367 "C++" *
	$¡rÿ£¡r
 (*
__hay¡ack
, 
__cÚ¡
 *
__ÃedË
)

368 
__THROW
 
	`__asm
 ("¡rÿ£¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

369 "C++" 
__cÚ¡
 *
	$¡rÿ£¡r
 (
__cÚ¡
 *
__hay¡ack
,

370 
__cÚ¡
 *
__ÃedË
)

371 
__THROW
 
	`__asm
 ("¡rÿ£¡r"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

373 *
	$¡rÿ£¡r
 (
__cÚ¡
 *
__hay¡ack
, __cÚ¡ *
__ÃedË
)

374 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

378 #ifdeà
__USE_GNU


382 *
	$memmem
 (
__cÚ¡
 *
__hay¡ack
, 
size_t
 
__hay¡ackËn
,

383 
__cÚ¡
 *
__ÃedË
, 
size_t
 
__ÃedËËn
)

384 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 3));

388 *
	$__mempıy
 (*
__»¡riù
 
__de¡
,

389 
__cÚ¡
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

390 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

391 *
	$mempıy
 (*
__»¡riù
 
__de¡
,

392 
__cÚ¡
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

393 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

397 
__BEGIN_NAMESPACE_STD


399 
size_t
 
	$¡¾’
 (
__cÚ¡
 *
__s
)

400 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

401 
__END_NAMESPACE_STD


403 #ifdef 
__USE_XOPEN2K8


406 
size_t
 
	$¡ºËn
 (
__cÚ¡
 *
__¡ršg
, 
size_t
 
__maxËn
)

407 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

411 
__BEGIN_NAMESPACE_STD


413 *
	$¡»¼Ü
 (
__”ºum
è
__THROW
;

414 
__END_NAMESPACE_STD


415 #ià
defšed
 
__USE_XOPEN2K
 || defšed 
__USE_MISC


423 #ià
defšed
 
__USE_XOPEN2K
 && !defšed 
__USE_GNU


426 #ifdeà
__REDIRECT_NTH


427 
	`__REDIRECT_NTH
 (
¡»¼Ü_r
,

428 (
__”ºum
, *
__buf
, 
size_t
 
__buæ’
),

429 
__xpg_¡»¼Ü_r
è
	`__nÚnuÎ
 ((2));

431 
	$__xpg_¡»¼Ü_r
 (
__”ºum
, *
__buf
, 
size_t
 
__buæ’
)

432 
__THROW
 
	`__nÚnuÎ
 ((2));

433 
	#¡»¼Ü_r
 
__xpg_¡»¼Ü_r


	)

438 *
	$¡»¼Ü_r
 (
__”ºum
, *
__buf
, 
size_t
 
__buæ’
)

439 
__THROW
 
	`__nÚnuÎ
 ((2));

443 #ifdeà
__USE_XOPEN2K8


445 *
	$¡»¼Ü_l
 (
__”ºum
, 
__loÿË_t
 
__l
è
__THROW
;

451 
	$__bz”o
 (*
__s
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

453 #ifdeà
__USE_BSD


455 
	$bcİy
 (
__cÚ¡
 *
__¤c
, *
__de¡
, 
size_t
 
__n
)

456 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

459 
	$bz”o
 (*
__s
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

462 
	$bcmp
 (
__cÚ¡
 *
__s1
, __cÚ¡ *
__s2
, 
size_t
 
__n
)

463 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

466 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


469 *
	`šdex
 (*
__s
, 
__c
)

470 
__THROW
 
	`__asm
 ("šdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

471 
__cÚ¡
 *
	`šdex
 (__cÚ¡ *
__s
, 
__c
)

472 
__THROW
 
	`__asm
 ("šdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

474 #ià
defšed
 
__OPTIMIZE__
 && !defšed 
__CORRECT_ISO_CPP_STRINGS_H_PROTO


475 
__ex‹º_®ways_šlše
 *

476 
	`šdex
 (*
__s
, 
__c
è
__THROW


478  
	`__butš_šdex
 (
__s
, 
__c
);

481 
__ex‹º_®ways_šlše
 
__cÚ¡
 *

482 
	`šdex
 (
__cÚ¡
 *
__s
, 
__c
è
__THROW


484  
	`__butš_šdex
 (
__s
, 
__c
);

487 
	}
}

489 *
	$šdex
 (
__cÚ¡
 *
__s
, 
__c
)

490 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

494 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


497 *
	`ršdex
 (*
__s
, 
__c
)

498 
__THROW
 
	`__asm
 ("ršdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

499 
__cÚ¡
 *
	`ršdex
 (__cÚ¡ *
__s
, 
__c
)

500 
__THROW
 
	`__asm
 ("ršdex"è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

502 #ià
defšed
 
__OPTIMIZE__
 && !defšed 
__CORRECT_ISO_CPP_STRINGS_H_PROTO


503 
__ex‹º_®ways_šlše
 *

504 
	`ršdex
 (*
__s
, 
__c
è
__THROW


506  
	`__butš_ršdex
 (
__s
, 
__c
);

509 
__ex‹º_®ways_šlše
 
__cÚ¡
 *

510 
	`ršdex
 (
__cÚ¡
 *
__s
, 
__c
è
__THROW


512  
	`__butš_ršdex
 (
__s
, 
__c
);

515 
	}
}

517 *
	$ršdex
 (
__cÚ¡
 *
__s
, 
__c
)

518 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1));

523 
	$ffs
 (
__i
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

527 #ifdef 
__USE_GNU


528 
	$ff¦
 (
__l
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

529 #ifdeà
__GNUC__


530 
__ex‹nsiÚ__
 
	$ff¦l
 (
__Î
)

531 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

536 
	$¡rÿ£cmp
 (
__cÚ¡
 *
__s1
, __cÚ¡ *
__s2
)

537 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

540 
	$¡ºÿ£cmp
 (
__cÚ¡
 *
__s1
, __cÚ¡ *
__s2
, 
size_t
 
__n
)

541 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

544 #ifdef 
__USE_GNU


547 
	$¡rÿ£cmp_l
 (
__cÚ¡
 *
__s1
, __cÚ¡ *
__s2
,

548 
__loÿË_t
 
__loc
)

549 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2, 3));

551 
	$¡ºÿ£cmp_l
 (
__cÚ¡
 *
__s1
, __cÚ¡ *
__s2
,

552 
size_t
 
__n
, 
__loÿË_t
 
__loc
)

553 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2, 4));

556 #ifdef 
__USE_BSD


559 *
	$¡r£p
 (**
__»¡riù
 
__¡ršgp
,

560 
__cÚ¡
 *
__»¡riù
 
__d–im
)

561 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

564 #ifdef 
__USE_XOPEN2K8


566 *
	$¡rsigÇl
 (
__sig
è
__THROW
;

569 *
	$__¡pıy
 (*
__»¡riù
 
__de¡
, 
__cÚ¡
 *__»¡riù 
__¤c
)

570 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

571 *
	$¡pıy
 (*
__»¡riù
 
__de¡
, 
__cÚ¡
 *__»¡riù 
__¤c
)

572 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

576 *
	$__¡²ıy
 (*
__»¡riù
 
__de¡
,

577 
__cÚ¡
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

578 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

579 *
	$¡²ıy
 (*
__»¡riù
 
__de¡
,

580 
__cÚ¡
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

581 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

584 #ifdef 
__USE_GNU


586 
	$¡rv”scmp
 (
__cÚ¡
 *
__s1
, __cÚ¡ *
__s2
)

587 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

590 *
	$¡räy
 (*
__¡ršg
è
__THROW
 
	`__nÚnuÎ
 ((1));

593 *
	$memäob
 (*
__s
, 
size_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1));

595 #iâdeà
ba£Çme


600 #ifdeà
__CORRECT_ISO_CPP_STRING_H_PROTO


601 "C++" *
	$ba£Çme
 (*
__f’ame
)

602 
__THROW
 
	`__asm
 ("ba£Çme"è
	`__nÚnuÎ
 ((1));

603 "C++" 
__cÚ¡
 *
	$ba£Çme
 (
__cÚ¡
 *
__f’ame
)

604 
__THROW
 
	`__asm
 ("ba£Çme"è
	`__nÚnuÎ
 ((1));

606 *
	$ba£Çme
 (
__cÚ¡
 *
__f’ame
è
__THROW
 
	`__nÚnuÎ
 ((1));

612 #ià
defšed
 
__GNUC__
 && __GNUC__ >= 2

613 #ià
defšed
 
__OPTIMIZE__
 && !defšed 
__OPTIMIZE_SIZE__
 \

614 && !
defšed
 
__NO_INLINE__
 && !defšed 
__ılu¥lus


634 
	~<b™s/¡ršg.h
>

637 
	~<b™s/¡ršg2.h
>

640 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__ex‹º_®ways_šlše


642 
	~<b™s/¡ršg3.h
>

646 
__END_DECLS


	@/usr/include/sys/ipc.h

19 #iâdeà
_SYS_IPC_H


20 
	#_SYS_IPC_H
 1

	)

22 
	~<ã©u»s.h
>

24 #ià!
defšed
 
__USE_SVID
 && !defšed 
__USE_XOPEN
 && 
__GNUC__
 >= 2

29 
	~<b™s/ùy³s.h
>

30 
	~<b™s/c.h
>

32 #iâdeà
__uid_t_defšed


33 
__uid_t
 
	tuid_t
;

34 
	#__uid_t_defšed


	)

37 #iâdeà
__gid_t_defšed


38 
__gid_t
 
	tgid_t
;

39 
	#__gid_t_defšed


	)

42 #iâdeà
__mode_t_defšed


43 
__mode_t
 
	tmode_t
;

44 
	#__mode_t_defšed


	)

47 #iâdeà
__key_t_defšed


48 
__key_t
 
	tkey_t
;

49 
	#__key_t_defšed


	)

52 
__BEGIN_DECLS


55 
key_t
 
	$áok
 (
__cÚ¡
 *
__·thÇme
, 
__´oj_id
è
__THROW
;

57 
__END_DECLS


	@/usr/include/sys/mman.h

20 #iâdef 
_SYS_MMAN_H


21 
	#_SYS_MMAN_H
 1

	)

23 
	~<ã©u»s.h
>

24 
	~<b™s/ty³s.h
>

25 
	#__Ãed_size_t


	)

26 
	~<¡ddef.h
>

28 #iâdeà
__off_t_defšed


29 #iâdeà
__USE_FILE_OFFSET64


30 
__off_t
 
	toff_t
;

32 
__off64_t
 
	toff_t
;

34 
	#__off_t_defšed


	)

37 #iâdeà
__mode_t_defšed


38 
__mode_t
 
	tmode_t
;

39 
	#__mode_t_defšed


	)

42 
	~<b™s/mmª.h
>

45 
	#MAP_FAILED
 ((*è-1)

	)

47 
	g__BEGIN_DECLS


57 #iâdeà
__USE_FILE_OFFSET64


58 *
	$mm­
 (*
__addr
, 
size_t
 
__Ën
, 
__´Ù
,

59 
__æags
, 
__fd
, 
__off_t
 
__off£t
è
__THROW
;

61 #ifdeà
__REDIRECT_NTH


62 * 
	`__REDIRECT_NTH
 (
mm­
,

63 (*
__addr
, 
size_t
 
__Ën
, 
__´Ù
,

64 
__æags
, 
__fd
, 
__off64_t
 
__off£t
),

65 
mm­64
);

67 
	#mm­
 
mm­64


	)

70 #ifdeà
__USE_LARGEFILE64


71 *
	$mm­64
 (*
__addr
, 
size_t
 
__Ën
, 
__´Ù
,

72 
__æags
, 
__fd
, 
__off64_t
 
__off£t
è
__THROW
;

77 
	$munm­
 (*
__addr
, 
size_t
 
__Ën
è
__THROW
;

82 
	$m´Ùeù
 (*
__addr
, 
size_t
 
__Ën
, 
__´Ù
è
__THROW
;

90 
	`msync
 (*
__addr
, 
size_t
 
__Ën
, 
__æags
);

92 #ifdeà
__USE_BSD


95 
	$madvi£
 (*
__addr
, 
size_t
 
__Ën
, 
__adviû
è
__THROW
;

97 #ifdeà
__USE_XOPEN2K


99 
	$posix_madvi£
 (*
__addr
, 
size_t
 
__Ën
, 
__adviû
è
__THROW
;

104 
	$mlock
 (
__cÚ¡
 *
__addr
, 
size_t
 
__Ën
è
__THROW
;

107 
	$muÆock
 (
__cÚ¡
 *
__addr
, 
size_t
 
__Ën
è
__THROW
;

112 
	$mlock®l
 (
__æags
è
__THROW
;

116 
	$muÆock®l
 (è
__THROW
;

118 #ifdeà
__USE_MISC


124 
	$mšcÜe
 (*
__¡¬t
, 
size_t
 
__Ën
, *
__vec
)

125 
__THROW
;

128 #ifdeà
__USE_GNU


134 *
	$m»m­
 (*
__addr
, 
size_t
 
__Şd_Ën
, size_ˆ
__Ãw_Ën
,

135 
__æags
, ...è
__THROW
;

139 
	$»m­_fe_·ges
 (*
__¡¬t
, 
size_t
 
__size
, 
__´Ù
,

140 
size_t
 
__pgoff
, 
__æags
è
__THROW
;

145 
	`shm_İ’
 (
__cÚ¡
 *
__Çme
, 
__oæag
, 
mode_t
 
__mode
);

148 
	`shm_uÆšk
 (
__cÚ¡
 *
__Çme
);

150 
__END_DECLS


	@/usr/include/sys/shm.h

19 #iâdeà
_SYS_SHM_H


20 
	#_SYS_SHM_H
 1

	)

22 
	~<ã©u»s.h
>

24 
	#__Ãed_size_t


	)

25 
	~<¡ddef.h
>

28 
	~<sys/c.h
>

31 
	~<b™s/shm.h
>

34 
	#__Ãed_time_t


	)

35 
	~<time.h
>

37 #ifdeà
__USE_XOPEN


38 #iâdeà
__pid_t_defšed


39 
__pid_t
 
	tpid_t
;

40 
	#__pid_t_defšed


	)

45 
__BEGIN_DECLS


51 
	$shmùl
 (
__shmid
, 
__cmd
, 
shmid_ds
 *
__buf
è
__THROW
;

54 
	$shmg‘
 (
key_t
 
__key
, 
size_t
 
__size
, 
__shmæg
è
__THROW
;

57 *
	$shm©
 (
__shmid
, 
__cÚ¡
 *
__shmaddr
, 
__shmæg
)

58 
__THROW
;

61 
	$shmdt
 (
__cÚ¡
 *
__shmaddr
è
__THROW
;

63 
__END_DECLS


	@/usr/include/unistd.h

23 #iâdef 
_UNISTD_H


24 
	#_UNISTD_H
 1

	)

26 
	~<ã©u»s.h
>

28 
	g__BEGIN_DECLS


33 #ifdeà
__USE_XOPEN2K8


35 
	#_POSIX_VERSION
 200809L

	)

36 #–ià
defšed
 
__USE_XOPEN2K


38 
	#_POSIX_VERSION
 200112L

	)

39 #–ià
defšed
 
__USE_POSIX199506


41 
	#_POSIX_VERSION
 199506L

	)

42 #–ià
defšed
 
__USE_POSIX199309


44 
	#_POSIX_VERSION
 199309L

	)

47 
	#_POSIX_VERSION
 199009L

	)

53 #ifdeà
__USE_XOPEN2K8


54 
	#__POSIX2_THIS_VERSION
 200809L

	)

56 #–ià
defšed
 
__USE_XOPEN2K


58 
	#__POSIX2_THIS_VERSION
 200112L

	)

59 #–ià
defšed
 
__USE_POSIX199506


61 
	#__POSIX2_THIS_VERSION
 199506L

	)

64 
	#__POSIX2_THIS_VERSION
 199209L

	)

68 
	#_POSIX2_VERSION
 
__POSIX2_THIS_VERSION


	)

72 
	#_POSIX2_C_BIND
 
__POSIX2_THIS_VERSION


	)

76 
	#_POSIX2_C_DEV
 
__POSIX2_THIS_VERSION


	)

80 
	#_POSIX2_SW_DEV
 
__POSIX2_THIS_VERSION


	)

84 
	#_POSIX2_LOCALEDEF
 
__POSIX2_THIS_VERSION


	)

87 #ifdeà
__USE_XOPEN2K8


88 
	#_XOPEN_VERSION
 700

	)

89 #–ià
defšed
 
__USE_XOPEN2K


90 
	#_XOPEN_VERSION
 600

	)

91 #–ià
defšed
 
__USE_UNIX98


92 
	#_XOPEN_VERSION
 500

	)

94 
	#_XOPEN_VERSION
 4

	)

98 
	#_XOPEN_XCU_VERSION
 4

	)

101 
	#_XOPEN_XPG2
 1

	)

102 
	#_XOPEN_XPG3
 1

	)

103 
	#_XOPEN_XPG4
 1

	)

106 
	#_XOPEN_UNIX
 1

	)

109 
	#_XOPEN_CRYPT
 1

	)

113 
	#_XOPEN_ENH_I18N
 1

	)

116 
	#_XOPEN_LEGACY
 1

	)

203 
	~<b™s/posix_İt.h
>

206 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


207 
	~<b™s/’vœÚm’ts.h
>

211 
	#STDIN_FILENO
 0

	)

212 
	#STDOUT_FILENO
 1

	)

213 
	#STDERR_FILENO
 2

	)

218 
	~<b™s/ty³s.h
>

220 #iâdef 
__ssize_t_defšed


221 
__ssize_t
 
	tssize_t
;

222 
	#__ssize_t_defšed


	)

225 
	#__Ãed_size_t


	)

226 
	#__Ãed_NULL


	)

227 
	~<¡ddef.h
>

229 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K


232 #iâdeà
__gid_t_defšed


233 
__gid_t
 
	tgid_t
;

234 
	#__gid_t_defšed


	)

237 #iâdeà
__uid_t_defšed


238 
__uid_t
 
	tuid_t
;

239 
	#__uid_t_defšed


	)

242 #iâdeà
__off_t_defšed


243 #iâdeà
__USE_FILE_OFFSET64


244 
__off_t
 
	toff_t
;

246 
__off64_t
 
	toff_t
;

248 
	#__off_t_defšed


	)

250 #ià
defšed
 
__USE_LARGEFILE64
 && !defšed 
__off64_t_defšed


251 
__off64_t
 
	toff64_t
;

252 
	#__off64_t_defšed


	)

255 #iâdeà
__u£cÚds_t_defšed


256 
__u£cÚds_t
 
	tu£cÚds_t
;

257 
	#__u£cÚds_t_defšed


	)

260 #iâdeà
__pid_t_defšed


261 
__pid_t
 
	tpid_t
;

262 
	#__pid_t_defšed


	)

266 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K


267 #iâdeà
__šŒ_t_defšed


268 
__šŒ_t
 
	tšŒ_t
;

269 
	#__šŒ_t_defšed


	)

273 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN


274 #iâdeà
__sockËn_t_defšed


275 
__sockËn_t
 
	tsockËn_t
;

276 
	#__sockËn_t_defšed


	)

282 
	#R_OK
 4

	)

283 
	#W_OK
 2

	)

284 
	#X_OK
 1

	)

285 
	#F_OK
 0

	)

288 
	$acûss
 (
__cÚ¡
 *
__Çme
, 
__ty³
è
__THROW
 
	`__nÚnuÎ
 ((1));

290 #ifdeà
__USE_GNU


293 
	$euidacûss
 (
__cÚ¡
 *
__Çme
, 
__ty³
)

294 
__THROW
 
	`__nÚnuÎ
 ((1));

297 
	$—cûss
 (
__cÚ¡
 *
__Çme
, 
__ty³
)

298 
__THROW
 
	`__nÚnuÎ
 ((1));

301 #ifdeà
__USE_ATFILE


305 
	$çcûs§t
 (
__fd
, 
__cÚ¡
 *
__fe
, 
__ty³
, 
__æag
)

306 
__THROW
 
	`__nÚnuÎ
 ((2)è
__wur
;

311 #iâdef 
_STDIO_H


312 
	#SEEK_SET
 0

	)

313 
	#SEEK_CUR
 1

	)

314 
	#SEEK_END
 2

	)

317 #ià
defšed
 
__USE_BSD
 && !defšed 
L_SET


319 
	#L_SET
 
SEEK_SET


	)

320 
	#L_INCR
 
SEEK_CUR


	)

321 
	#L_XTND
 
SEEK_END


	)

330 #iâdeà
__USE_FILE_OFFSET64


331 
__off_t
 
	$l£ek
 (
__fd
, 
__off_t
 
__off£t
, 
__wh’û
è
__THROW
;

333 #ifdeà
__REDIRECT_NTH


334 
__off64_t
 
	`__REDIRECT_NTH
 (
l£ek
,

335 (
__fd
, 
__off64_t
 
__off£t
, 
__wh’û
),

336 
l£ek64
);

338 
	#l£ek
 
l£ek64


	)

341 #ifdeà
__USE_LARGEFILE64


342 
__off64_t
 
	$l£ek64
 (
__fd
, 
__off64_t
 
__off£t
, 
__wh’û
)

343 
__THROW
;

350 
	`şo£
 (
__fd
);

357 
ssize_t
 
	$»ad
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
è
__wur
;

363 
ssize_t
 
	$wr™e
 (
__fd
, 
__cÚ¡
 *
__buf
, 
size_t
 
__n
è
__wur
;

365 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K8


366 #iâdeà
__USE_FILE_OFFSET64


373 
ssize_t
 
	$´—d
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

374 
__off_t
 
__off£t
è
__wur
;

381 
ssize_t
 
	$pwr™e
 (
__fd
, 
__cÚ¡
 *
__buf
, 
size_t
 
__n
,

382 
__off_t
 
__off£t
è
__wur
;

384 #ifdeà
__REDIRECT


385 
ssize_t
 
	`__REDIRECT
 (
´—d
, (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

386 
__off64_t
 
__off£t
),

387 
´—d64
è
__wur
;

388 
ssize_t
 
	`__REDIRECT
 (
pwr™e
, (
__fd
, 
__cÚ¡
 *
__buf
,

389 
size_t
 
__nby‹s
, 
__off64_t
 
__off£t
),

390 
pwr™e64
è
__wur
;

392 
	#´—d
 
´—d64


	)

393 
	#pwr™e
 
pwr™e64


	)

397 #ifdeà
__USE_LARGEFILE64


401 
ssize_t
 
	$´—d64
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

402 
__off64_t
 
__off£t
è
__wur
;

405 
ssize_t
 
	$pwr™e64
 (
__fd
, 
__cÚ¡
 *
__buf
, 
size_t
 
__n
,

406 
__off64_t
 
__off£t
è
__wur
;

414 
	$pe
 (
__pedes
[2]è
__THROW
 
__wur
;

416 #ifdeà
__USE_GNU


419 
	$pe2
 (
__pedes
[2], 
__æags
è
__THROW
 
__wur
;

429 
	$®¬m
 (
__£cÚds
è
__THROW
;

441 
	`¦“p
 (
__£cÚds
);

443 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
) \

444 || 
defšed
 
__USE_BSD


449 
__u£cÚds_t
 
	$u®¬m
 (
__u£cÚds_t
 
__v®ue
, __u£cÚds_ˆ
__š‹rv®
)

450 
__THROW
;

457 
	`u¦“p
 (
__u£cÚds_t
 
__u£cÚds
);

466 
	`·u£
 ();

470 
	$chown
 (
__cÚ¡
 *
__fe
, 
__uid_t
 
__owÃr
, 
__gid_t
 
__group
)

471 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

473 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


475 
	$fchown
 (
__fd
, 
__uid_t
 
__owÃr
, 
__gid_t
 
__group
è
__THROW
 
__wur
;

480 
	$lchown
 (
__cÚ¡
 *
__fe
, 
__uid_t
 
__owÃr
, 
__gid_t
 
__group
)

481 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

485 #ifdeà
__USE_ATFILE


488 
	$fchowÇt
 (
__fd
, 
__cÚ¡
 *
__fe
, 
__uid_t
 
__owÃr
,

489 
__gid_t
 
__group
, 
__æag
)

490 
__THROW
 
	`__nÚnuÎ
 ((2)è
__wur
;

494 
	$chdœ
 (
__cÚ¡
 *
__·th
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

496 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


498 
	$fchdœ
 (
__fd
è
__THROW
 
__wur
;

508 *
	$g‘cwd
 (*
__buf
, 
size_t
 
__size
è
__THROW
 
__wur
;

510 #ifdef 
__USE_GNU


514 *
	$g‘_cu¼’t_dœ_Çme
 (è
__THROW
;

517 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
) \

518 || 
defšed
 
__USE_BSD


522 *
	$g‘wd
 (*
__buf
)

523 
__THROW
 
	`__nÚnuÎ
 ((1)è
__©Œibu‹_d•»ÿ‹d__
 
__wur
;

528 
	$dup
 (
__fd
è
__THROW
 
__wur
;

531 
	$dup2
 (
__fd
, 
__fd2
è
__THROW
;

533 #ifdeà
__USE_GNU


536 
	$dup3
 (
__fd
, 
__fd2
, 
__æags
è
__THROW
;

540 **
__’vœÚ
;

541 #ifdeà
__USE_GNU


542 **
’vœÚ
;

548 
	$execve
 (
__cÚ¡
 *
__·th
, *__cÚ¡ 
__¬gv
[],

549 *
__cÚ¡
 
__’vp
[]è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

551 #ifdeà
__USE_XOPEN2K8


554 
	$ãxecve
 (
__fd
, *
__cÚ¡
 
__¬gv
[], *__cÚ¡ 
__’vp
[])

555 
__THROW
 
	`__nÚnuÎ
 ((2));

560 
	$execv
 (
__cÚ¡
 *
__·th
, *__cÚ¡ 
__¬gv
[])

561 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

565 
	$exeşe
 (
__cÚ¡
 *
__·th
, __cÚ¡ *
__¬g
, ...)

566 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

570 
	$exeş
 (
__cÚ¡
 *
__·th
, __cÚ¡ *
__¬g
, ...)

571 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

575 
	$execvp
 (
__cÚ¡
 *
__fe
, *__cÚ¡ 
__¬gv
[])

576 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

581 
	$exeşp
 (
__cÚ¡
 *
__fe
, __cÚ¡ *
__¬g
, ...)

582 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

584 #ifdeà
__USE_GNU


587 
	$execv³
 (
__cÚ¡
 *
__fe
, *__cÚ¡ 
__¬gv
[],

588 *
__cÚ¡
 
__’vp
[])

589 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

593 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


595 
	$niû
 (
__šc
è
__THROW
 
__wur
;

600 
	$_ex™
 (
__¡©us
è
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

606 
	~<b™s/cÚâame.h
>

609 
	$·thcÚf
 (
__cÚ¡
 *
__·th
, 
__Çme
)

610 
__THROW
 
	`__nÚnuÎ
 ((1));

613 
	$å©hcÚf
 (
__fd
, 
__Çme
è
__THROW
;

616 
	$syscÚf
 (
__Çme
è
__THROW
;

618 #ifdef 
__USE_POSIX2


620 
size_t
 
	$cÚf¡r
 (
__Çme
, *
__buf
, 
size_t
 
__Ën
è
__THROW
;

625 
__pid_t
 
	$g‘pid
 (è
__THROW
;

628 
__pid_t
 
	$g‘µid
 (è
__THROW
;

632 #iâdeà
__FAVOR_BSD


633 
__pid_t
 
	$g‘pg½
 (è
__THROW
;

635 #ifdeà
__REDIRECT_NTH


636 
__pid_t
 
	`__REDIRECT_NTH
 (
g‘pg½
, (__pid_ˆ
__pid
), 
__g‘pgid
);

638 
	#g‘pg½
 
__g‘pgid


	)

643 
__pid_t
 
	$__g‘pgid
 (
__pid_t
 
__pid
è
__THROW
;

644 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


645 
__pid_t
 
	$g‘pgid
 (
__pid_t
 
__pid
è
__THROW
;

652 
	$£gid
 (
__pid_t
 
__pid
, __pid_ˆ
__pgid
è
__THROW
;

654 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


665 #iâdeà
__FAVOR_BSD


669 
	$£g½
 (è
__THROW
;

674 #ifdeà
__REDIRECT_NTH


675 
	`__REDIRECT_NTH
 (
£g½
, (
__pid_t
 
__pid
, __pid_ˆ
__pg½
), 
£gid
);

677 
	#£g½
 
£gid


	)

686 
__pid_t
 
	$£tsid
 (è
__THROW
;

688 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


690 
__pid_t
 
	$g‘sid
 (
__pid_t
 
__pid
è
__THROW
;

694 
__uid_t
 
	$g‘uid
 (è
__THROW
;

697 
__uid_t
 
	$g‘euid
 (è
__THROW
;

700 
__gid_t
 
	$g‘gid
 (è
__THROW
;

703 
__gid_t
 
	$g‘egid
 (è
__THROW
;

708 
	$g‘groups
 (
__size
, 
__gid_t
 
__li¡
[]è
__THROW
 
__wur
;

710 #ifdef 
__USE_GNU


712 
	$group_memb”
 (
__gid_t
 
__gid
è
__THROW
;

719 
	$£tuid
 (
__uid_t
 
__uid
è
__THROW
;

721 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


724 
	$£Œeuid
 (
__uid_t
 
__ruid
, __uid_ˆ
__euid
è
__THROW
;

727 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN2K


729 
	$£‹uid
 (
__uid_t
 
__uid
è
__THROW
;

736 
	$£tgid
 (
__gid_t
 
__gid
è
__THROW
;

738 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


741 
	$£Œegid
 (
__gid_t
 
__rgid
, __gid_ˆ
__egid
è
__THROW
;

744 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN2K


746 
	$£‹gid
 (
__gid_t
 
__gid
è
__THROW
;

749 #ifdeà
__USE_GNU


752 
	$g‘»suid
 (
__uid_t
 *
__ruid
, __uid_ˆ*
__euid
, __uid_ˆ*
__suid
)

753 
__THROW
;

757 
	$g‘»sgid
 (
__gid_t
 *
__rgid
, __gid_ˆ*
__egid
, __gid_ˆ*
__sgid
)

758 
__THROW
;

762 
	$£Œesuid
 (
__uid_t
 
__ruid
, __uid_ˆ
__euid
, __uid_ˆ
__suid
)

763 
__THROW
;

767 
	$£Œesgid
 (
__gid_t
 
__rgid
, __gid_ˆ
__egid
, __gid_ˆ
__sgid
)

768 
__THROW
;

775 
__pid_t
 
	$fÜk
 (è
__THROW
;

777 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
) \

778 || 
defšed
 
__USE_BSD


783 
__pid_t
 
	$vfÜk
 (è
__THROW
;

789 *
	$‰yÇme
 (
__fd
è
__THROW
;

793 
	$‰yÇme_r
 (
__fd
, *
__buf
, 
size_t
 
__buæ’
)

794 
__THROW
 
	`__nÚnuÎ
 ((2)è
__wur
;

798 
	$i§‰y
 (
__fd
è
__THROW
;

800 #ià
defšed
 
__USE_BSD
 \

801 || (
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_UNIX98
)

804 
	$‰y¦Ù
 (è
__THROW
;

809 
	$lšk
 (
__cÚ¡
 *
__äom
, __cÚ¡ *
__to
)

810 
__THROW
 
	`__nÚnuÎ
 ((1, 2)è
__wur
;

812 #ifdeà
__USE_ATFILE


815 
	$lšk©
 (
__äomfd
, 
__cÚ¡
 *
__äom
, 
__tofd
,

816 
__cÚ¡
 *
__to
, 
__æags
)

817 
__THROW
 
	`__nÚnuÎ
 ((2, 4)è
__wur
;

820 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K


822 
	$symlšk
 (
__cÚ¡
 *
__äom
, __cÚ¡ *
__to
)

823 
__THROW
 
	`__nÚnuÎ
 ((1, 2)è
__wur
;

828 
ssize_t
 
	$»adlšk
 (
__cÚ¡
 *
__»¡riù
 
__·th
,

829 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

830 
__THROW
 
	`__nÚnuÎ
 ((1, 2)è
__wur
;

833 #ifdeà
__USE_ATFILE


835 
	$symlšk©
 (
__cÚ¡
 *
__äom
, 
__tofd
,

836 
__cÚ¡
 *
__to
è
__THROW
 
	`__nÚnuÎ
 ((1, 3)è
__wur
;

839 
ssize_t
 
	$»adlšk©
 (
__fd
, 
__cÚ¡
 *
__»¡riù
 
__·th
,

840 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

841 
__THROW
 
	`__nÚnuÎ
 ((2, 3)è
__wur
;

845 
	$uÆšk
 (
__cÚ¡
 *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1));

847 #ifdeà
__USE_ATFILE


849 
	$uÆšk©
 (
__fd
, 
__cÚ¡
 *
__Çme
, 
__æag
)

850 
__THROW
 
	`__nÚnuÎ
 ((2));

854 
	$rmdœ
 (
__cÚ¡
 *
__·th
è
__THROW
 
	`__nÚnuÎ
 ((1));

858 
__pid_t
 
	$tcg‘pg½
 (
__fd
è
__THROW
;

861 
	$tc£g½
 (
__fd
, 
__pid_t
 
__pg½_id
è
__THROW
;

868 *
	`g‘logš
 ();

869 #ià
defšed
 
__USE_REENTRANT
 || defšed 
__USE_POSIX199506


876 
	$g‘logš_r
 (*
__Çme
, 
size_t
 
__Çme_Ën
è
	`__nÚnuÎ
 ((1));

879 #ifdef 
__USE_BSD


881 
	$£ogš
 (
__cÚ¡
 *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1));

885 #ifdef 
__USE_POSIX2


889 
	#__Ãed_g‘İt


	)

890 
	~<g‘İt.h
>

894 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


898 
	$g‘ho¡Çme
 (*
__Çme
, 
size_t
 
__Ën
è
__THROW
 
	`__nÚnuÎ
 ((1));

902 #ià
defšed
 
__USE_BSD
 || (defšed 
__USE_XOPEN
 && !defšed 
__USE_UNIX98
)

905 
	$£tho¡Çme
 (
__cÚ¡
 *
__Çme
, 
size_t
 
__Ën
)

906 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

910 
	$£tho¡id
 (
__id
è
__THROW
 
__wur
;

916 
	$g‘domašÇme
 (*
__Çme
, 
size_t
 
__Ën
)

917 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

918 
	$£tdomašÇme
 (
__cÚ¡
 *
__Çme
, 
size_t
 
__Ën
)

919 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

925 
	$vhªgup
 (è
__THROW
;

928 
	$»voke
 (
__cÚ¡
 *
__fe
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

936 
	$´of
 (*
__§m¶e_bufãr
, 
size_t
 
__size
,

937 
size_t
 
__off£t
, 
__sÿË
)

938 
__THROW
 
	`__nÚnuÎ
 ((1));

944 
	$acù
 (
__cÚ¡
 *
__Çme
è
__THROW
;

948 *
	$g‘u£rsh–l
 (è
__THROW
;

949 
	$’du£rsh–l
 (è
__THROW
;

950 
	$£tu£rsh–l
 (è
__THROW
;

956 
	$d«mÚ
 (
__nochdœ
, 
__noşo£
è
__THROW
 
__wur
;

960 #ià
defšed
 
__USE_BSD
 || (defšed 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K
)

963 
	$chroÙ
 (
__cÚ¡
 *
__·th
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

967 *
	$g‘·ss
 (
__cÚ¡
 *
__´om±
è
	`__nÚnuÎ
 ((1));

971 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K


976 
	`fsync
 (
__fd
);

980 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


983 
	`g‘ho¡id
 ();

986 
	$sync
 (è
__THROW
;

989 #ià
defšed
 
__USE_BSD
 || !defšed 
__USE_XOPEN2K


992 
	$g‘·gesize
 (è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

997 
	$g‘dbËsize
 (è
__THROW
;

1003 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


1006 #iâdeà
__USE_FILE_OFFSET64


1007 
	$Œunÿ‹
 (
__cÚ¡
 *
__fe
, 
__off_t
 
__Ëngth
)

1008 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

1010 #ifdeà
__REDIRECT_NTH


1011 
	`__REDIRECT_NTH
 (
Œunÿ‹
,

1012 (
__cÚ¡
 *
__fe
, 
__off64_t
 
__Ëngth
),

1013 
Œunÿ‹64
è
	`__nÚnuÎ
 ((1)è
__wur
;

1015 
	#Œunÿ‹
 
Œunÿ‹64


	)

1018 #ifdeà
__USE_LARGEFILE64


1019 
	$Œunÿ‹64
 (
__cÚ¡
 *
__fe
, 
__off64_t
 
__Ëngth
)

1020 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

1025 #iâdeà
__USE_FILE_OFFSET64


1026 
	$árunÿ‹
 (
__fd
, 
__off_t
 
__Ëngth
è
__THROW
 
__wur
;

1028 #ifdeà
__REDIRECT_NTH


1029 
	`__REDIRECT_NTH
 (
árunÿ‹
, (
__fd
, 
__off64_t
 
__Ëngth
),

1030 
árunÿ‹64
è
__wur
;

1032 
	#árunÿ‹
 
árunÿ‹64


	)

1035 #ifdeà
__USE_LARGEFILE64


1036 
	$árunÿ‹64
 (
__fd
, 
__off64_t
 
__Ëngth
è
__THROW
 
__wur
;

1042 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K
) \

1043 || 
defšed
 
__USE_MISC


1047 
	$brk
 (*
__addr
è
__THROW
 
__wur
;

1053 *
	$sbrk
 (
šŒ_t
 
__d–
è
__THROW
;

1057 #ifdeà
__USE_MISC


1068 
	$sysÿÎ
 (
__sy¢o
, ...è
__THROW
;

1073 #ià(
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
è&& !defšed 
F_LOCK


1085 
	#F_ULOCK
 0

	)

1086 
	#F_LOCK
 1

	)

1087 
	#F_TLOCK
 2

	)

1088 
	#F_TEST
 3

	)

1090 #iâdeà
__USE_FILE_OFFSET64


1091 
	$lockf
 (
__fd
, 
__cmd
, 
__off_t
 
__Ën
è
__wur
;

1093 #ifdeà
__REDIRECT


1094 
	`__REDIRECT
 (
lockf
, (
__fd
, 
__cmd
, 
__off64_t
 
__Ën
),

1095 
lockf64
è
__wur
;

1097 
	#lockf
 
lockf64


	)

1100 #ifdeà
__USE_LARGEFILE64


1101 
	$lockf64
 (
__fd
, 
__cmd
, 
__off64_t
 
__Ën
è
__wur
;

1106 #ifdeà
__USE_GNU


1111 
	#TEMP_FAILURE_RETRY
(
ex´essiÚ
) \

1112 (
__ex‹nsiÚ__
 \

1113 ({ 
__»suÉ
; \

1114 dØ
__»suÉ
 = (è(
ex´essiÚ
); \

1115 
__»suÉ
 =ğ-1L && 
”ºo
 =ğ
EINTR
); \

1116 
__»suÉ
; 
	}
}))

	)

1119 #ià
defšed
 
__USE_POSIX199309
 || defšed 
__USE_UNIX98


1122 
fd©async
 (
__fdes
);

1128 #ifdef 
__USE_XOPEN


1130 *
	$üy±
 (
__cÚ¡
 *
__key
, __cÚ¡ *
__§É
)

1131 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

1135 
	$’üy±
 (*
__block
, 
__edæag
è
__THROW
 
	`__nÚnuÎ
 ((1));

1142 
	$swab
 (
__cÚ¡
 *
__»¡riù
 
__äom
, *__»¡riù 
__to
,

1143 
ssize_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

1149 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8


1151 *
	$ù”mid
 (*
__s
è
__THROW
;

1156 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__ex‹º_®ways_šlše


1157 
	~<b™s/uni¡d.h
>

1160 
__END_DECLS


	@/usr/include/alloca.h

19 #iâdef 
_ALLOCA_H


20 
	#_ALLOCA_H
 1

	)

22 
	~<ã©u»s.h
>

24 
	#__Ãed_size_t


	)

25 
	~<¡ddef.h
>

27 
	g__BEGIN_DECLS


30 #undeà
®loÿ


33 *
	$®loÿ
 (
size_t
 
__size
è
__THROW
;

35 #ifdef 
__GNUC__


36 
	#®loÿ
(
size
è
	`__butš_®loÿ
 (size)

	)

39 
__END_DECLS


	@/usr/include/bits/confname.h

21 #iâdeà
_UNISTD_H


28 
	m_PC_LINK_MAX
,

29 
	#_PC_LINK_MAX
 
_PC_LINK_MAX


	)

30 
	m_PC_MAX_CANON
,

31 
	#_PC_MAX_CANON
 
_PC_MAX_CANON


	)

32 
	m_PC_MAX_INPUT
,

33 
	#_PC_MAX_INPUT
 
_PC_MAX_INPUT


	)

34 
	m_PC_NAME_MAX
,

35 
	#_PC_NAME_MAX
 
_PC_NAME_MAX


	)

36 
	m_PC_PATH_MAX
,

37 
	#_PC_PATH_MAX
 
_PC_PATH_MAX


	)

38 
	m_PC_PIPE_BUF
,

39 
	#_PC_PIPE_BUF
 
_PC_PIPE_BUF


	)

40 
	m_PC_CHOWN_RESTRICTED
,

41 
	#_PC_CHOWN_RESTRICTED
 
_PC_CHOWN_RESTRICTED


	)

42 
	m_PC_NO_TRUNC
,

43 
	#_PC_NO_TRUNC
 
_PC_NO_TRUNC


	)

44 
	m_PC_VDISABLE
,

45 
	#_PC_VDISABLE
 
_PC_VDISABLE


	)

46 
	m_PC_SYNC_IO
,

47 
	#_PC_SYNC_IO
 
_PC_SYNC_IO


	)

48 
	m_PC_ASYNC_IO
,

49 
	#_PC_ASYNC_IO
 
_PC_ASYNC_IO


	)

50 
	m_PC_PRIO_IO
,

51 
	#_PC_PRIO_IO
 
_PC_PRIO_IO


	)

52 
	m_PC_SOCK_MAXBUF
,

53 
	#_PC_SOCK_MAXBUF
 
_PC_SOCK_MAXBUF


	)

54 
	m_PC_FILESIZEBITS
,

55 
	#_PC_FILESIZEBITS
 
_PC_FILESIZEBITS


	)

56 
	m_PC_REC_INCR_XFER_SIZE
,

57 
	#_PC_REC_INCR_XFER_SIZE
 
_PC_REC_INCR_XFER_SIZE


	)

58 
	m_PC_REC_MAX_XFER_SIZE
,

59 
	#_PC_REC_MAX_XFER_SIZE
 
_PC_REC_MAX_XFER_SIZE


	)

60 
	m_PC_REC_MIN_XFER_SIZE
,

61 
	#_PC_REC_MIN_XFER_SIZE
 
_PC_REC_MIN_XFER_SIZE


	)

62 
	m_PC_REC_XFER_ALIGN
,

63 
	#_PC_REC_XFER_ALIGN
 
_PC_REC_XFER_ALIGN


	)

64 
	m_PC_ALLOC_SIZE_MIN
,

65 
	#_PC_ALLOC_SIZE_MIN
 
_PC_ALLOC_SIZE_MIN


	)

66 
	m_PC_SYMLINK_MAX
,

67 
	#_PC_SYMLINK_MAX
 
_PC_SYMLINK_MAX


	)

68 
	m_PC_2_SYMLINKS


69 
	#_PC_2_SYMLINKS
 
_PC_2_SYMLINKS


	)

75 
	m_SC_ARG_MAX
,

76 
	#_SC_ARG_MAX
 
_SC_ARG_MAX


	)

77 
	m_SC_CHILD_MAX
,

78 
	#_SC_CHILD_MAX
 
_SC_CHILD_MAX


	)

79 
	m_SC_CLK_TCK
,

80 
	#_SC_CLK_TCK
 
_SC_CLK_TCK


	)

81 
	m_SC_NGROUPS_MAX
,

82 
	#_SC_NGROUPS_MAX
 
_SC_NGROUPS_MAX


	)

83 
	m_SC_OPEN_MAX
,

84 
	#_SC_OPEN_MAX
 
_SC_OPEN_MAX


	)

85 
	m_SC_STREAM_MAX
,

86 
	#_SC_STREAM_MAX
 
_SC_STREAM_MAX


	)

87 
	m_SC_TZNAME_MAX
,

88 
	#_SC_TZNAME_MAX
 
_SC_TZNAME_MAX


	)

89 
	m_SC_JOB_CONTROL
,

90 
	#_SC_JOB_CONTROL
 
_SC_JOB_CONTROL


	)

91 
	m_SC_SAVED_IDS
,

92 
	#_SC_SAVED_IDS
 
_SC_SAVED_IDS


	)

93 
	m_SC_REALTIME_SIGNALS
,

94 
	#_SC_REALTIME_SIGNALS
 
_SC_REALTIME_SIGNALS


	)

95 
	m_SC_PRIORITY_SCHEDULING
,

96 
	#_SC_PRIORITY_SCHEDULING
 
_SC_PRIORITY_SCHEDULING


	)

97 
	m_SC_TIMERS
,

98 
	#_SC_TIMERS
 
_SC_TIMERS


	)

99 
	m_SC_ASYNCHRONOUS_IO
,

100 
	#_SC_ASYNCHRONOUS_IO
 
_SC_ASYNCHRONOUS_IO


	)

101 
	m_SC_PRIORITIZED_IO
,

102 
	#_SC_PRIORITIZED_IO
 
_SC_PRIORITIZED_IO


	)

103 
	m_SC_SYNCHRONIZED_IO
,

104 
	#_SC_SYNCHRONIZED_IO
 
_SC_SYNCHRONIZED_IO


	)

105 
	m_SC_FSYNC
,

106 
	#_SC_FSYNC
 
_SC_FSYNC


	)

107 
	m_SC_MAPPED_FILES
,

108 
	#_SC_MAPPED_FILES
 
_SC_MAPPED_FILES


	)

109 
	m_SC_MEMLOCK
,

110 
	#_SC_MEMLOCK
 
_SC_MEMLOCK


	)

111 
	m_SC_MEMLOCK_RANGE
,

112 
	#_SC_MEMLOCK_RANGE
 
_SC_MEMLOCK_RANGE


	)

113 
	m_SC_MEMORY_PROTECTION
,

114 
	#_SC_MEMORY_PROTECTION
 
_SC_MEMORY_PROTECTION


	)

115 
	m_SC_MESSAGE_PASSING
,

116 
	#_SC_MESSAGE_PASSING
 
_SC_MESSAGE_PASSING


	)

117 
	m_SC_SEMAPHORES
,

118 
	#_SC_SEMAPHORES
 
_SC_SEMAPHORES


	)

119 
	m_SC_SHARED_MEMORY_OBJECTS
,

120 
	#_SC_SHARED_MEMORY_OBJECTS
 
_SC_SHARED_MEMORY_OBJECTS


	)

121 
	m_SC_AIO_LISTIO_MAX
,

122 
	#_SC_AIO_LISTIO_MAX
 
_SC_AIO_LISTIO_MAX


	)

123 
	m_SC_AIO_MAX
,

124 
	#_SC_AIO_MAX
 
_SC_AIO_MAX


	)

125 
	m_SC_AIO_PRIO_DELTA_MAX
,

126 
	#_SC_AIO_PRIO_DELTA_MAX
 
_SC_AIO_PRIO_DELTA_MAX


	)

127 
	m_SC_DELAYTIMER_MAX
,

128 
	#_SC_DELAYTIMER_MAX
 
_SC_DELAYTIMER_MAX


	)

129 
	m_SC_MQ_OPEN_MAX
,

130 
	#_SC_MQ_OPEN_MAX
 
_SC_MQ_OPEN_MAX


	)

131 
	m_SC_MQ_PRIO_MAX
,

132 
	#_SC_MQ_PRIO_MAX
 
_SC_MQ_PRIO_MAX


	)

133 
	m_SC_VERSION
,

134 
	#_SC_VERSION
 
_SC_VERSION


	)

135 
	m_SC_PAGESIZE
,

136 
	#_SC_PAGESIZE
 
_SC_PAGESIZE


	)

137 
	#_SC_PAGE_SIZE
 
_SC_PAGESIZE


	)

138 
	m_SC_RTSIG_MAX
,

139 
	#_SC_RTSIG_MAX
 
_SC_RTSIG_MAX


	)

140 
	m_SC_SEM_NSEMS_MAX
,

141 
	#_SC_SEM_NSEMS_MAX
 
_SC_SEM_NSEMS_MAX


	)

142 
	m_SC_SEM_VALUE_MAX
,

143 
	#_SC_SEM_VALUE_MAX
 
_SC_SEM_VALUE_MAX


	)

144 
	m_SC_SIGQUEUE_MAX
,

145 
	#_SC_SIGQUEUE_MAX
 
_SC_SIGQUEUE_MAX


	)

146 
	m_SC_TIMER_MAX
,

147 
	#_SC_TIMER_MAX
 
_SC_TIMER_MAX


	)

151 
	m_SC_BC_BASE_MAX
,

152 
	#_SC_BC_BASE_MAX
 
_SC_BC_BASE_MAX


	)

153 
	m_SC_BC_DIM_MAX
,

154 
	#_SC_BC_DIM_MAX
 
_SC_BC_DIM_MAX


	)

155 
	m_SC_BC_SCALE_MAX
,

156 
	#_SC_BC_SCALE_MAX
 
_SC_BC_SCALE_MAX


	)

157 
	m_SC_BC_STRING_MAX
,

158 
	#_SC_BC_STRING_MAX
 
_SC_BC_STRING_MAX


	)

159 
	m_SC_COLL_WEIGHTS_MAX
,

160 
	#_SC_COLL_WEIGHTS_MAX
 
_SC_COLL_WEIGHTS_MAX


	)

161 
	m_SC_EQUIV_CLASS_MAX
,

162 
	#_SC_EQUIV_CLASS_MAX
 
_SC_EQUIV_CLASS_MAX


	)

163 
	m_SC_EXPR_NEST_MAX
,

164 
	#_SC_EXPR_NEST_MAX
 
_SC_EXPR_NEST_MAX


	)

165 
	m_SC_LINE_MAX
,

166 
	#_SC_LINE_MAX
 
_SC_LINE_MAX


	)

167 
	m_SC_RE_DUP_MAX
,

168 
	#_SC_RE_DUP_MAX
 
_SC_RE_DUP_MAX


	)

169 
	m_SC_CHARCLASS_NAME_MAX
,

170 
	#_SC_CHARCLASS_NAME_MAX
 
_SC_CHARCLASS_NAME_MAX


	)

172 
	m_SC_2_VERSION
,

173 
	#_SC_2_VERSION
 
_SC_2_VERSION


	)

174 
	m_SC_2_C_BIND
,

175 
	#_SC_2_C_BIND
 
_SC_2_C_BIND


	)

176 
	m_SC_2_C_DEV
,

177 
	#_SC_2_C_DEV
 
_SC_2_C_DEV


	)

178 
	m_SC_2_FORT_DEV
,

179 
	#_SC_2_FORT_DEV
 
_SC_2_FORT_DEV


	)

180 
	m_SC_2_FORT_RUN
,

181 
	#_SC_2_FORT_RUN
 
_SC_2_FORT_RUN


	)

182 
	m_SC_2_SW_DEV
,

183 
	#_SC_2_SW_DEV
 
_SC_2_SW_DEV


	)

184 
	m_SC_2_LOCALEDEF
,

185 
	#_SC_2_LOCALEDEF
 
_SC_2_LOCALEDEF


	)

187 
	m_SC_PII
,

188 
	#_SC_PII
 
_SC_PII


	)

189 
	m_SC_PII_XTI
,

190 
	#_SC_PII_XTI
 
_SC_PII_XTI


	)

191 
	m_SC_PII_SOCKET
,

192 
	#_SC_PII_SOCKET
 
_SC_PII_SOCKET


	)

193 
	m_SC_PII_INTERNET
,

194 
	#_SC_PII_INTERNET
 
_SC_PII_INTERNET


	)

195 
	m_SC_PII_OSI
,

196 
	#_SC_PII_OSI
 
_SC_PII_OSI


	)

197 
	m_SC_POLL
,

198 
	#_SC_POLL
 
_SC_POLL


	)

199 
	m_SC_SELECT
,

200 
	#_SC_SELECT
 
_SC_SELECT


	)

201 
	m_SC_UIO_MAXIOV
,

202 
	#_SC_UIO_MAXIOV
 
_SC_UIO_MAXIOV


	)

203 
	m_SC_IOV_MAX
 = 
_SC_UIO_MAXIOV
,

204 
	#_SC_IOV_MAX
 
_SC_IOV_MAX


	)

205 
	m_SC_PII_INTERNET_STREAM
,

206 
	#_SC_PII_INTERNET_STREAM
 
_SC_PII_INTERNET_STREAM


	)

207 
	m_SC_PII_INTERNET_DGRAM
,

208 
	#_SC_PII_INTERNET_DGRAM
 
_SC_PII_INTERNET_DGRAM


	)

209 
	m_SC_PII_OSI_COTS
,

210 
	#_SC_PII_OSI_COTS
 
_SC_PII_OSI_COTS


	)

211 
	m_SC_PII_OSI_CLTS
,

212 
	#_SC_PII_OSI_CLTS
 
_SC_PII_OSI_CLTS


	)

213 
	m_SC_PII_OSI_M
,

214 
	#_SC_PII_OSI_M
 
_SC_PII_OSI_M


	)

215 
	m_SC_T_IOV_MAX
,

216 
	#_SC_T_IOV_MAX
 
_SC_T_IOV_MAX


	)

219 
	m_SC_THREADS
,

220 
	#_SC_THREADS
 
_SC_THREADS


	)

221 
	m_SC_THREAD_SAFE_FUNCTIONS
,

222 
	#_SC_THREAD_SAFE_FUNCTIONS
 
_SC_THREAD_SAFE_FUNCTIONS


	)

223 
	m_SC_GETGR_R_SIZE_MAX
,

224 
	#_SC_GETGR_R_SIZE_MAX
 
_SC_GETGR_R_SIZE_MAX


	)

225 
	m_SC_GETPW_R_SIZE_MAX
,

226 
	#_SC_GETPW_R_SIZE_MAX
 
_SC_GETPW_R_SIZE_MAX


	)

227 
	m_SC_LOGIN_NAME_MAX
,

228 
	#_SC_LOGIN_NAME_MAX
 
_SC_LOGIN_NAME_MAX


	)

229 
	m_SC_TTY_NAME_MAX
,

230 
	#_SC_TTY_NAME_MAX
 
_SC_TTY_NAME_MAX


	)

231 
	m_SC_THREAD_DESTRUCTOR_ITERATIONS
,

232 
	#_SC_THREAD_DESTRUCTOR_ITERATIONS
 
_SC_THREAD_DESTRUCTOR_ITERATIONS


	)

233 
	m_SC_THREAD_KEYS_MAX
,

234 
	#_SC_THREAD_KEYS_MAX
 
_SC_THREAD_KEYS_MAX


	)

235 
	m_SC_THREAD_STACK_MIN
,

236 
	#_SC_THREAD_STACK_MIN
 
_SC_THREAD_STACK_MIN


	)

237 
	m_SC_THREAD_THREADS_MAX
,

238 
	#_SC_THREAD_THREADS_MAX
 
_SC_THREAD_THREADS_MAX


	)

239 
	m_SC_THREAD_ATTR_STACKADDR
,

240 
	#_SC_THREAD_ATTR_STACKADDR
 
_SC_THREAD_ATTR_STACKADDR


	)

241 
	m_SC_THREAD_ATTR_STACKSIZE
,

242 
	#_SC_THREAD_ATTR_STACKSIZE
 
_SC_THREAD_ATTR_STACKSIZE


	)

243 
	m_SC_THREAD_PRIORITY_SCHEDULING
,

244 
	#_SC_THREAD_PRIORITY_SCHEDULING
 
_SC_THREAD_PRIORITY_SCHEDULING


	)

245 
	m_SC_THREAD_PRIO_INHERIT
,

246 
	#_SC_THREAD_PRIO_INHERIT
 
_SC_THREAD_PRIO_INHERIT


	)

247 
	m_SC_THREAD_PRIO_PROTECT
,

248 
	#_SC_THREAD_PRIO_PROTECT
 
_SC_THREAD_PRIO_PROTECT


	)

249 
	m_SC_THREAD_PROCESS_SHARED
,

250 
	#_SC_THREAD_PROCESS_SHARED
 
_SC_THREAD_PROCESS_SHARED


	)

252 
	m_SC_NPROCESSORS_CONF
,

253 
	#_SC_NPROCESSORS_CONF
 
_SC_NPROCESSORS_CONF


	)

254 
	m_SC_NPROCESSORS_ONLN
,

255 
	#_SC_NPROCESSORS_ONLN
 
_SC_NPROCESSORS_ONLN


	)

256 
	m_SC_PHYS_PAGES
,

257 
	#_SC_PHYS_PAGES
 
_SC_PHYS_PAGES


	)

258 
	m_SC_AVPHYS_PAGES
,

259 
	#_SC_AVPHYS_PAGES
 
_SC_AVPHYS_PAGES


	)

260 
	m_SC_ATEXIT_MAX
,

261 
	#_SC_ATEXIT_MAX
 
_SC_ATEXIT_MAX


	)

262 
	m_SC_PASS_MAX
,

263 
	#_SC_PASS_MAX
 
_SC_PASS_MAX


	)

265 
	m_SC_XOPEN_VERSION
,

266 
	#_SC_XOPEN_VERSION
 
_SC_XOPEN_VERSION


	)

267 
	m_SC_XOPEN_XCU_VERSION
,

268 
	#_SC_XOPEN_XCU_VERSION
 
_SC_XOPEN_XCU_VERSION


	)

269 
	m_SC_XOPEN_UNIX
,

270 
	#_SC_XOPEN_UNIX
 
_SC_XOPEN_UNIX


	)

271 
	m_SC_XOPEN_CRYPT
,

272 
	#_SC_XOPEN_CRYPT
 
_SC_XOPEN_CRYPT


	)

273 
	m_SC_XOPEN_ENH_I18N
,

274 
	#_SC_XOPEN_ENH_I18N
 
_SC_XOPEN_ENH_I18N


	)

275 
	m_SC_XOPEN_SHM
,

276 
	#_SC_XOPEN_SHM
 
_SC_XOPEN_SHM


	)

278 
	m_SC_2_CHAR_TERM
,

279 
	#_SC_2_CHAR_TERM
 
_SC_2_CHAR_TERM


	)

280 
	m_SC_2_C_VERSION
,

281 
	#_SC_2_C_VERSION
 
_SC_2_C_VERSION


	)

282 
	m_SC_2_UPE
,

283 
	#_SC_2_UPE
 
_SC_2_UPE


	)

285 
	m_SC_XOPEN_XPG2
,

286 
	#_SC_XOPEN_XPG2
 
_SC_XOPEN_XPG2


	)

287 
	m_SC_XOPEN_XPG3
,

288 
	#_SC_XOPEN_XPG3
 
_SC_XOPEN_XPG3


	)

289 
	m_SC_XOPEN_XPG4
,

290 
	#_SC_XOPEN_XPG4
 
_SC_XOPEN_XPG4


	)

292 
	m_SC_CHAR_BIT
,

293 
	#_SC_CHAR_BIT
 
_SC_CHAR_BIT


	)

294 
	m_SC_CHAR_MAX
,

295 
	#_SC_CHAR_MAX
 
_SC_CHAR_MAX


	)

296 
	m_SC_CHAR_MIN
,

297 
	#_SC_CHAR_MIN
 
_SC_CHAR_MIN


	)

298 
	m_SC_INT_MAX
,

299 
	#_SC_INT_MAX
 
_SC_INT_MAX


	)

300 
	m_SC_INT_MIN
,

301 
	#_SC_INT_MIN
 
_SC_INT_MIN


	)

302 
	m_SC_LONG_BIT
,

303 
	#_SC_LONG_BIT
 
_SC_LONG_BIT


	)

304 
	m_SC_WORD_BIT
,

305 
	#_SC_WORD_BIT
 
_SC_WORD_BIT


	)

306 
	m_SC_MB_LEN_MAX
,

307 
	#_SC_MB_LEN_MAX
 
_SC_MB_LEN_MAX


	)

308 
	m_SC_NZERO
,

309 
	#_SC_NZERO
 
_SC_NZERO


	)

310 
	m_SC_SSIZE_MAX
,

311 
	#_SC_SSIZE_MAX
 
_SC_SSIZE_MAX


	)

312 
	m_SC_SCHAR_MAX
,

313 
	#_SC_SCHAR_MAX
 
_SC_SCHAR_MAX


	)

314 
	m_SC_SCHAR_MIN
,

315 
	#_SC_SCHAR_MIN
 
_SC_SCHAR_MIN


	)

316 
	m_SC_SHRT_MAX
,

317 
	#_SC_SHRT_MAX
 
_SC_SHRT_MAX


	)

318 
	m_SC_SHRT_MIN
,

319 
	#_SC_SHRT_MIN
 
_SC_SHRT_MIN


	)

320 
	m_SC_UCHAR_MAX
,

321 
	#_SC_UCHAR_MAX
 
_SC_UCHAR_MAX


	)

322 
	m_SC_UINT_MAX
,

323 
	#_SC_UINT_MAX
 
_SC_UINT_MAX


	)

324 
	m_SC_ULONG_MAX
,

325 
	#_SC_ULONG_MAX
 
_SC_ULONG_MAX


	)

326 
	m_SC_USHRT_MAX
,

327 
	#_SC_USHRT_MAX
 
_SC_USHRT_MAX


	)

329 
	m_SC_NL_ARGMAX
,

330 
	#_SC_NL_ARGMAX
 
_SC_NL_ARGMAX


	)

331 
	m_SC_NL_LANGMAX
,

332 
	#_SC_NL_LANGMAX
 
_SC_NL_LANGMAX


	)

333 
	m_SC_NL_MSGMAX
,

334 
	#_SC_NL_MSGMAX
 
_SC_NL_MSGMAX


	)

335 
	m_SC_NL_NMAX
,

336 
	#_SC_NL_NMAX
 
_SC_NL_NMAX


	)

337 
	m_SC_NL_SETMAX
,

338 
	#_SC_NL_SETMAX
 
_SC_NL_SETMAX


	)

339 
	m_SC_NL_TEXTMAX
,

340 
	#_SC_NL_TEXTMAX
 
_SC_NL_TEXTMAX


	)

342 
	m_SC_XBS5_ILP32_OFF32
,

343 
	#_SC_XBS5_ILP32_OFF32
 
_SC_XBS5_ILP32_OFF32


	)

344 
	m_SC_XBS5_ILP32_OFFBIG
,

345 
	#_SC_XBS5_ILP32_OFFBIG
 
_SC_XBS5_ILP32_OFFBIG


	)

346 
	m_SC_XBS5_LP64_OFF64
,

347 
	#_SC_XBS5_LP64_OFF64
 
_SC_XBS5_LP64_OFF64


	)

348 
	m_SC_XBS5_LPBIG_OFFBIG
,

349 
	#_SC_XBS5_LPBIG_OFFBIG
 
_SC_XBS5_LPBIG_OFFBIG


	)

351 
	m_SC_XOPEN_LEGACY
,

352 
	#_SC_XOPEN_LEGACY
 
_SC_XOPEN_LEGACY


	)

353 
	m_SC_XOPEN_REALTIME
,

354 
	#_SC_XOPEN_REALTIME
 
_SC_XOPEN_REALTIME


	)

355 
	m_SC_XOPEN_REALTIME_THREADS
,

356 
	#_SC_XOPEN_REALTIME_THREADS
 
_SC_XOPEN_REALTIME_THREADS


	)

358 
	m_SC_ADVISORY_INFO
,

359 
	#_SC_ADVISORY_INFO
 
_SC_ADVISORY_INFO


	)

360 
	m_SC_BARRIERS
,

361 
	#_SC_BARRIERS
 
_SC_BARRIERS


	)

362 
	m_SC_BASE
,

363 
	#_SC_BASE
 
_SC_BASE


	)

364 
	m_SC_C_LANG_SUPPORT
,

365 
	#_SC_C_LANG_SUPPORT
 
_SC_C_LANG_SUPPORT


	)

366 
	m_SC_C_LANG_SUPPORT_R
,

367 
	#_SC_C_LANG_SUPPORT_R
 
_SC_C_LANG_SUPPORT_R


	)

368 
	m_SC_CLOCK_SELECTION
,

369 
	#_SC_CLOCK_SELECTION
 
_SC_CLOCK_SELECTION


	)

370 
	m_SC_CPUTIME
,

371 
	#_SC_CPUTIME
 
_SC_CPUTIME


	)

372 
	m_SC_THREAD_CPUTIME
,

373 
	#_SC_THREAD_CPUTIME
 
_SC_THREAD_CPUTIME


	)

374 
	m_SC_DEVICE_IO
,

375 
	#_SC_DEVICE_IO
 
_SC_DEVICE_IO


	)

376 
	m_SC_DEVICE_SPECIFIC
,

377 
	#_SC_DEVICE_SPECIFIC
 
_SC_DEVICE_SPECIFIC


	)

378 
	m_SC_DEVICE_SPECIFIC_R
,

379 
	#_SC_DEVICE_SPECIFIC_R
 
_SC_DEVICE_SPECIFIC_R


	)

380 
	m_SC_FD_MGMT
,

381 
	#_SC_FD_MGMT
 
_SC_FD_MGMT


	)

382 
	m_SC_FIFO
,

383 
	#_SC_FIFO
 
_SC_FIFO


	)

384 
	m_SC_PIPE
,

385 
	#_SC_PIPE
 
_SC_PIPE


	)

386 
	m_SC_FILE_ATTRIBUTES
,

387 
	#_SC_FILE_ATTRIBUTES
 
_SC_FILE_ATTRIBUTES


	)

388 
	m_SC_FILE_LOCKING
,

389 
	#_SC_FILE_LOCKING
 
_SC_FILE_LOCKING


	)

390 
	m_SC_FILE_SYSTEM
,

391 
	#_SC_FILE_SYSTEM
 
_SC_FILE_SYSTEM


	)

392 
	m_SC_MONOTONIC_CLOCK
,

393 
	#_SC_MONOTONIC_CLOCK
 
_SC_MONOTONIC_CLOCK


	)

394 
	m_SC_MULTI_PROCESS
,

395 
	#_SC_MULTI_PROCESS
 
_SC_MULTI_PROCESS


	)

396 
	m_SC_SINGLE_PROCESS
,

397 
	#_SC_SINGLE_PROCESS
 
_SC_SINGLE_PROCESS


	)

398 
	m_SC_NETWORKING
,

399 
	#_SC_NETWORKING
 
_SC_NETWORKING


	)

400 
	m_SC_READER_WRITER_LOCKS
,

401 
	#_SC_READER_WRITER_LOCKS
 
_SC_READER_WRITER_LOCKS


	)

402 
	m_SC_SPIN_LOCKS
,

403 
	#_SC_SPIN_LOCKS
 
_SC_SPIN_LOCKS


	)

404 
	m_SC_REGEXP
,

405 
	#_SC_REGEXP
 
_SC_REGEXP


	)

406 
	m_SC_REGEX_VERSION
,

407 
	#_SC_REGEX_VERSION
 
_SC_REGEX_VERSION


	)

408 
	m_SC_SHELL
,

409 
	#_SC_SHELL
 
_SC_SHELL


	)

410 
	m_SC_SIGNALS
,

411 
	#_SC_SIGNALS
 
_SC_SIGNALS


	)

412 
	m_SC_SPAWN
,

413 
	#_SC_SPAWN
 
_SC_SPAWN


	)

414 
	m_SC_SPORADIC_SERVER
,

415 
	#_SC_SPORADIC_SERVER
 
_SC_SPORADIC_SERVER


	)

416 
	m_SC_THREAD_SPORADIC_SERVER
,

417 
	#_SC_THREAD_SPORADIC_SERVER
 
_SC_THREAD_SPORADIC_SERVER


	)

418 
	m_SC_SYSTEM_DATABASE
,

419 
	#_SC_SYSTEM_DATABASE
 
_SC_SYSTEM_DATABASE


	)

420 
	m_SC_SYSTEM_DATABASE_R
,

421 
	#_SC_SYSTEM_DATABASE_R
 
_SC_SYSTEM_DATABASE_R


	)

422 
	m_SC_TIMEOUTS
,

423 
	#_SC_TIMEOUTS
 
_SC_TIMEOUTS


	)

424 
	m_SC_TYPED_MEMORY_OBJECTS
,

425 
	#_SC_TYPED_MEMORY_OBJECTS
 
_SC_TYPED_MEMORY_OBJECTS


	)

426 
	m_SC_USER_GROUPS
,

427 
	#_SC_USER_GROUPS
 
_SC_USER_GROUPS


	)

428 
	m_SC_USER_GROUPS_R
,

429 
	#_SC_USER_GROUPS_R
 
_SC_USER_GROUPS_R


	)

430 
	m_SC_2_PBS
,

431 
	#_SC_2_PBS
 
_SC_2_PBS


	)

432 
	m_SC_2_PBS_ACCOUNTING
,

433 
	#_SC_2_PBS_ACCOUNTING
 
_SC_2_PBS_ACCOUNTING


	)

434 
	m_SC_2_PBS_LOCATE
,

435 
	#_SC_2_PBS_LOCATE
 
_SC_2_PBS_LOCATE


	)

436 
	m_SC_2_PBS_MESSAGE
,

437 
	#_SC_2_PBS_MESSAGE
 
_SC_2_PBS_MESSAGE


	)

438 
	m_SC_2_PBS_TRACK
,

439 
	#_SC_2_PBS_TRACK
 
_SC_2_PBS_TRACK


	)

440 
	m_SC_SYMLOOP_MAX
,

441 
	#_SC_SYMLOOP_MAX
 
_SC_SYMLOOP_MAX


	)

442 
	m_SC_STREAMS
,

443 
	#_SC_STREAMS
 
_SC_STREAMS


	)

444 
	m_SC_2_PBS_CHECKPOINT
,

445 
	#_SC_2_PBS_CHECKPOINT
 
_SC_2_PBS_CHECKPOINT


	)

447 
	m_SC_V6_ILP32_OFF32
,

448 
	#_SC_V6_ILP32_OFF32
 
_SC_V6_ILP32_OFF32


	)

449 
	m_SC_V6_ILP32_OFFBIG
,

450 
	#_SC_V6_ILP32_OFFBIG
 
_SC_V6_ILP32_OFFBIG


	)

451 
	m_SC_V6_LP64_OFF64
,

452 
	#_SC_V6_LP64_OFF64
 
_SC_V6_LP64_OFF64


	)

453 
	m_SC_V6_LPBIG_OFFBIG
,

454 
	#_SC_V6_LPBIG_OFFBIG
 
_SC_V6_LPBIG_OFFBIG


	)

456 
	m_SC_HOST_NAME_MAX
,

457 
	#_SC_HOST_NAME_MAX
 
_SC_HOST_NAME_MAX


	)

458 
	m_SC_TRACE
,

459 
	#_SC_TRACE
 
_SC_TRACE


	)

460 
	m_SC_TRACE_EVENT_FILTER
,

461 
	#_SC_TRACE_EVENT_FILTER
 
_SC_TRACE_EVENT_FILTER


	)

462 
	m_SC_TRACE_INHERIT
,

463 
	#_SC_TRACE_INHERIT
 
_SC_TRACE_INHERIT


	)

464 
	m_SC_TRACE_LOG
,

465 
	#_SC_TRACE_LOG
 
_SC_TRACE_LOG


	)

467 
	m_SC_LEVEL1_ICACHE_SIZE
,

468 
	#_SC_LEVEL1_ICACHE_SIZE
 
_SC_LEVEL1_ICACHE_SIZE


	)

469 
	m_SC_LEVEL1_ICACHE_ASSOC
,

470 
	#_SC_LEVEL1_ICACHE_ASSOC
 
_SC_LEVEL1_ICACHE_ASSOC


	)

471 
	m_SC_LEVEL1_ICACHE_LINESIZE
,

472 
	#_SC_LEVEL1_ICACHE_LINESIZE
 
_SC_LEVEL1_ICACHE_LINESIZE


	)

473 
	m_SC_LEVEL1_DCACHE_SIZE
,

474 
	#_SC_LEVEL1_DCACHE_SIZE
 
_SC_LEVEL1_DCACHE_SIZE


	)

475 
	m_SC_LEVEL1_DCACHE_ASSOC
,

476 
	#_SC_LEVEL1_DCACHE_ASSOC
 
_SC_LEVEL1_DCACHE_ASSOC


	)

477 
	m_SC_LEVEL1_DCACHE_LINESIZE
,

478 
	#_SC_LEVEL1_DCACHE_LINESIZE
 
_SC_LEVEL1_DCACHE_LINESIZE


	)

479 
	m_SC_LEVEL2_CACHE_SIZE
,

480 
	#_SC_LEVEL2_CACHE_SIZE
 
_SC_LEVEL2_CACHE_SIZE


	)

481 
	m_SC_LEVEL2_CACHE_ASSOC
,

482 
	#_SC_LEVEL2_CACHE_ASSOC
 
_SC_LEVEL2_CACHE_ASSOC


	)

483 
	m_SC_LEVEL2_CACHE_LINESIZE
,

484 
	#_SC_LEVEL2_CACHE_LINESIZE
 
_SC_LEVEL2_CACHE_LINESIZE


	)

485 
	m_SC_LEVEL3_CACHE_SIZE
,

486 
	#_SC_LEVEL3_CACHE_SIZE
 
_SC_LEVEL3_CACHE_SIZE


	)

487 
	m_SC_LEVEL3_CACHE_ASSOC
,

488 
	#_SC_LEVEL3_CACHE_ASSOC
 
_SC_LEVEL3_CACHE_ASSOC


	)

489 
	m_SC_LEVEL3_CACHE_LINESIZE
,

490 
	#_SC_LEVEL3_CACHE_LINESIZE
 
_SC_LEVEL3_CACHE_LINESIZE


	)

491 
	m_SC_LEVEL4_CACHE_SIZE
,

492 
	#_SC_LEVEL4_CACHE_SIZE
 
_SC_LEVEL4_CACHE_SIZE


	)

493 
	m_SC_LEVEL4_CACHE_ASSOC
,

494 
	#_SC_LEVEL4_CACHE_ASSOC
 
_SC_LEVEL4_CACHE_ASSOC


	)

495 
	m_SC_LEVEL4_CACHE_LINESIZE
,

496 
	#_SC_LEVEL4_CACHE_LINESIZE
 
_SC_LEVEL4_CACHE_LINESIZE


	)

499 
	m_SC_IPV6
 = 
_SC_LEVEL1_ICACHE_SIZE
 + 50,

500 
	#_SC_IPV6
 
_SC_IPV6


	)

501 
	m_SC_RAW_SOCKETS
,

502 
	#_SC_RAW_SOCKETS
 
_SC_RAW_SOCKETS


	)

504 
	m_SC_V7_ILP32_OFF32
,

505 
	#_SC_V7_ILP32_OFF32
 
_SC_V7_ILP32_OFF32


	)

506 
	m_SC_V7_ILP32_OFFBIG
,

507 
	#_SC_V7_ILP32_OFFBIG
 
_SC_V7_ILP32_OFFBIG


	)

508 
	m_SC_V7_LP64_OFF64
,

509 
	#_SC_V7_LP64_OFF64
 
_SC_V7_LP64_OFF64


	)

510 
	m_SC_V7_LPBIG_OFFBIG
,

511 
	#_SC_V7_LPBIG_OFFBIG
 
_SC_V7_LPBIG_OFFBIG


	)

513 
	m_SC_SS_REPL_MAX
,

514 
	#_SC_SS_REPL_MAX
 
_SC_SS_REPL_MAX


	)

516 
	m_SC_TRACE_EVENT_NAME_MAX
,

517 
	#_SC_TRACE_EVENT_NAME_MAX
 
_SC_TRACE_EVENT_NAME_MAX


	)

518 
	m_SC_TRACE_NAME_MAX
,

519 
	#_SC_TRACE_NAME_MAX
 
_SC_TRACE_NAME_MAX


	)

520 
	m_SC_TRACE_SYS_MAX
,

521 
	#_SC_TRACE_SYS_MAX
 
_SC_TRACE_SYS_MAX


	)

522 
	m_SC_TRACE_USER_EVENT_MAX
,

523 
	#_SC_TRACE_USER_EVENT_MAX
 
_SC_TRACE_USER_EVENT_MAX


	)

525 
	m_SC_XOPEN_STREAMS
,

526 
	#_SC_XOPEN_STREAMS
 
_SC_XOPEN_STREAMS


	)

528 
	m_SC_THREAD_ROBUST_PRIO_INHERIT
,

529 
	#_SC_THREAD_ROBUST_PRIO_INHERIT
 
_SC_THREAD_ROBUST_PRIO_INHERIT


	)

530 
	m_SC_THREAD_ROBUST_PRIO_PROTECT


531 
	#_SC_THREAD_ROBUST_PRIO_PROTECT
 
_SC_THREAD_ROBUST_PRIO_PROTECT


	)

537 
	m_CS_PATH
,

538 
	#_CS_PATH
 
_CS_PATH


	)

540 
	m_CS_V6_WIDTH_RESTRICTED_ENVS
,

541 
	#_CS_V6_WIDTH_RESTRICTED_ENVS
 
_CS_V6_WIDTH_RESTRICTED_ENVS


	)

542 
	#_CS_POSIX_V6_WIDTH_RESTRICTED_ENVS
 
_CS_V6_WIDTH_RESTRICTED_ENVS


	)

544 
	m_CS_GNU_LIBC_VERSION
,

545 
	#_CS_GNU_LIBC_VERSION
 
_CS_GNU_LIBC_VERSION


	)

546 
	m_CS_GNU_LIBPTHREAD_VERSION
,

547 
	#_CS_GNU_LIBPTHREAD_VERSION
 
_CS_GNU_LIBPTHREAD_VERSION


	)

549 
	m_CS_V5_WIDTH_RESTRICTED_ENVS
,

550 
	#_CS_V5_WIDTH_RESTRICTED_ENVS
 
_CS_V5_WIDTH_RESTRICTED_ENVS


	)

551 
	#_CS_POSIX_V5_WIDTH_RESTRICTED_ENVS
 
_CS_V5_WIDTH_RESTRICTED_ENVS


	)

553 
	m_CS_V7_WIDTH_RESTRICTED_ENVS
,

554 
	#_CS_V7_WIDTH_RESTRICTED_ENVS
 
_CS_V7_WIDTH_RESTRICTED_ENVS


	)

555 
	#_CS_POSIX_V7_WIDTH_RESTRICTED_ENVS
 
_CS_V7_WIDTH_RESTRICTED_ENVS


	)

557 
	m_CS_LFS_CFLAGS
 = 1000,

558 
	#_CS_LFS_CFLAGS
 
_CS_LFS_CFLAGS


	)

559 
	m_CS_LFS_LDFLAGS
,

560 
	#_CS_LFS_LDFLAGS
 
_CS_LFS_LDFLAGS


	)

561 
	m_CS_LFS_LIBS
,

562 
	#_CS_LFS_LIBS
 
_CS_LFS_LIBS


	)

563 
	m_CS_LFS_LINTFLAGS
,

564 
	#_CS_LFS_LINTFLAGS
 
_CS_LFS_LINTFLAGS


	)

565 
	m_CS_LFS64_CFLAGS
,

566 
	#_CS_LFS64_CFLAGS
 
_CS_LFS64_CFLAGS


	)

567 
	m_CS_LFS64_LDFLAGS
,

568 
	#_CS_LFS64_LDFLAGS
 
_CS_LFS64_LDFLAGS


	)

569 
	m_CS_LFS64_LIBS
,

570 
	#_CS_LFS64_LIBS
 
_CS_LFS64_LIBS


	)

571 
	m_CS_LFS64_LINTFLAGS
,

572 
	#_CS_LFS64_LINTFLAGS
 
_CS_LFS64_LINTFLAGS


	)

574 
	m_CS_XBS5_ILP32_OFF32_CFLAGS
 = 1100,

575 
	#_CS_XBS5_ILP32_OFF32_CFLAGS
 
_CS_XBS5_ILP32_OFF32_CFLAGS


	)

576 
	m_CS_XBS5_ILP32_OFF32_LDFLAGS
,

577 
	#_CS_XBS5_ILP32_OFF32_LDFLAGS
 
_CS_XBS5_ILP32_OFF32_LDFLAGS


	)

578 
	m_CS_XBS5_ILP32_OFF32_LIBS
,

579 
	#_CS_XBS5_ILP32_OFF32_LIBS
 
_CS_XBS5_ILP32_OFF32_LIBS


	)

580 
	m_CS_XBS5_ILP32_OFF32_LINTFLAGS
,

581 
	#_CS_XBS5_ILP32_OFF32_LINTFLAGS
 
_CS_XBS5_ILP32_OFF32_LINTFLAGS


	)

582 
	m_CS_XBS5_ILP32_OFFBIG_CFLAGS
,

583 
	#_CS_XBS5_ILP32_OFFBIG_CFLAGS
 
_CS_XBS5_ILP32_OFFBIG_CFLAGS


	)

584 
	m_CS_XBS5_ILP32_OFFBIG_LDFLAGS
,

585 
	#_CS_XBS5_ILP32_OFFBIG_LDFLAGS
 
_CS_XBS5_ILP32_OFFBIG_LDFLAGS


	)

586 
	m_CS_XBS5_ILP32_OFFBIG_LIBS
,

587 
	#_CS_XBS5_ILP32_OFFBIG_LIBS
 
_CS_XBS5_ILP32_OFFBIG_LIBS


	)

588 
	m_CS_XBS5_ILP32_OFFBIG_LINTFLAGS
,

589 
	#_CS_XBS5_ILP32_OFFBIG_LINTFLAGS
 
_CS_XBS5_ILP32_OFFBIG_LINTFLAGS


	)

590 
	m_CS_XBS5_LP64_OFF64_CFLAGS
,

591 
	#_CS_XBS5_LP64_OFF64_CFLAGS
 
_CS_XBS5_LP64_OFF64_CFLAGS


	)

592 
	m_CS_XBS5_LP64_OFF64_LDFLAGS
,

593 
	#_CS_XBS5_LP64_OFF64_LDFLAGS
 
_CS_XBS5_LP64_OFF64_LDFLAGS


	)

594 
	m_CS_XBS5_LP64_OFF64_LIBS
,

595 
	#_CS_XBS5_LP64_OFF64_LIBS
 
_CS_XBS5_LP64_OFF64_LIBS


	)

596 
	m_CS_XBS5_LP64_OFF64_LINTFLAGS
,

597 
	#_CS_XBS5_LP64_OFF64_LINTFLAGS
 
_CS_XBS5_LP64_OFF64_LINTFLAGS


	)

598 
	m_CS_XBS5_LPBIG_OFFBIG_CFLAGS
,

599 
	#_CS_XBS5_LPBIG_OFFBIG_CFLAGS
 
_CS_XBS5_LPBIG_OFFBIG_CFLAGS


	)

600 
	m_CS_XBS5_LPBIG_OFFBIG_LDFLAGS
,

601 
	#_CS_XBS5_LPBIG_OFFBIG_LDFLAGS
 
_CS_XBS5_LPBIG_OFFBIG_LDFLAGS


	)

602 
	m_CS_XBS5_LPBIG_OFFBIG_LIBS
,

603 
	#_CS_XBS5_LPBIG_OFFBIG_LIBS
 
_CS_XBS5_LPBIG_OFFBIG_LIBS


	)

604 
	m_CS_XBS5_LPBIG_OFFBIG_LINTFLAGS
,

605 
	#_CS_XBS5_LPBIG_OFFBIG_LINTFLAGS
 
_CS_XBS5_LPBIG_OFFBIG_LINTFLAGS


	)

607 
	m_CS_POSIX_V6_ILP32_OFF32_CFLAGS
,

608 
	#_CS_POSIX_V6_ILP32_OFF32_CFLAGS
 
_CS_POSIX_V6_ILP32_OFF32_CFLAGS


	)

609 
	m_CS_POSIX_V6_ILP32_OFF32_LDFLAGS
,

610 
	#_CS_POSIX_V6_ILP32_OFF32_LDFLAGS
 
_CS_POSIX_V6_ILP32_OFF32_LDFLAGS


	)

611 
	m_CS_POSIX_V6_ILP32_OFF32_LIBS
,

612 
	#_CS_POSIX_V6_ILP32_OFF32_LIBS
 
_CS_POSIX_V6_ILP32_OFF32_LIBS


	)

613 
	m_CS_POSIX_V6_ILP32_OFF32_LINTFLAGS
,

614 
	#_CS_POSIX_V6_ILP32_OFF32_LINTFLAGS
 
_CS_POSIX_V6_ILP32_OFF32_LINTFLAGS


	)

615 
	m_CS_POSIX_V6_ILP32_OFFBIG_CFLAGS
,

616 
	#_CS_POSIX_V6_ILP32_OFFBIG_CFLAGS
 
_CS_POSIX_V6_ILP32_OFFBIG_CFLAGS


	)

617 
	m_CS_POSIX_V6_ILP32_OFFBIG_LDFLAGS
,

618 
	#_CS_POSIX_V6_ILP32_OFFBIG_LDFLAGS
 
_CS_POSIX_V6_ILP32_OFFBIG_LDFLAGS


	)

619 
	m_CS_POSIX_V6_ILP32_OFFBIG_LIBS
,

620 
	#_CS_POSIX_V6_ILP32_OFFBIG_LIBS
 
_CS_POSIX_V6_ILP32_OFFBIG_LIBS


	)

621 
	m_CS_POSIX_V6_ILP32_OFFBIG_LINTFLAGS
,

622 
	#_CS_POSIX_V6_ILP32_OFFBIG_LINTFLAGS
 
_CS_POSIX_V6_ILP32_OFFBIG_LINTFLAGS


	)

623 
	m_CS_POSIX_V6_LP64_OFF64_CFLAGS
,

624 
	#_CS_POSIX_V6_LP64_OFF64_CFLAGS
 
_CS_POSIX_V6_LP64_OFF64_CFLAGS


	)

625 
	m_CS_POSIX_V6_LP64_OFF64_LDFLAGS
,

626 
	#_CS_POSIX_V6_LP64_OFF64_LDFLAGS
 
_CS_POSIX_V6_LP64_OFF64_LDFLAGS


	)

627 
	m_CS_POSIX_V6_LP64_OFF64_LIBS
,

628 
	#_CS_POSIX_V6_LP64_OFF64_LIBS
 
_CS_POSIX_V6_LP64_OFF64_LIBS


	)

629 
	m_CS_POSIX_V6_LP64_OFF64_LINTFLAGS
,

630 
	#_CS_POSIX_V6_LP64_OFF64_LINTFLAGS
 
_CS_POSIX_V6_LP64_OFF64_LINTFLAGS


	)

631 
	m_CS_POSIX_V6_LPBIG_OFFBIG_CFLAGS
,

632 
	#_CS_POSIX_V6_LPBIG_OFFBIG_CFLAGS
 
_CS_POSIX_V6_LPBIG_OFFBIG_CFLAGS


	)

633 
	m_CS_POSIX_V6_LPBIG_OFFBIG_LDFLAGS
,

634 
	#_CS_POSIX_V6_LPBIG_OFFBIG_LDFLAGS
 
_CS_POSIX_V6_LPBIG_OFFBIG_LDFLAGS


	)

635 
	m_CS_POSIX_V6_LPBIG_OFFBIG_LIBS
,

636 
	#_CS_POSIX_V6_LPBIG_OFFBIG_LIBS
 
_CS_POSIX_V6_LPBIG_OFFBIG_LIBS


	)

637 
	m_CS_POSIX_V6_LPBIG_OFFBIG_LINTFLAGS
,

638 
	#_CS_POSIX_V6_LPBIG_OFFBIG_LINTFLAGS
 
_CS_POSIX_V6_LPBIG_OFFBIG_LINTFLAGS


	)

640 
	m_CS_POSIX_V7_ILP32_OFF32_CFLAGS
,

641 
	#_CS_POSIX_V7_ILP32_OFF32_CFLAGS
 
_CS_POSIX_V7_ILP32_OFF32_CFLAGS


	)

642 
	m_CS_POSIX_V7_ILP32_OFF32_LDFLAGS
,

643 
	#_CS_POSIX_V7_ILP32_OFF32_LDFLAGS
 
_CS_POSIX_V7_ILP32_OFF32_LDFLAGS


	)

644 
	m_CS_POSIX_V7_ILP32_OFF32_LIBS
,

645 
	#_CS_POSIX_V7_ILP32_OFF32_LIBS
 
_CS_POSIX_V7_ILP32_OFF32_LIBS


	)

646 
	m_CS_POSIX_V7_ILP32_OFF32_LINTFLAGS
,

647 
	#_CS_POSIX_V7_ILP32_OFF32_LINTFLAGS
 
_CS_POSIX_V7_ILP32_OFF32_LINTFLAGS


	)

648 
	m_CS_POSIX_V7_ILP32_OFFBIG_CFLAGS
,

649 
	#_CS_POSIX_V7_ILP32_OFFBIG_CFLAGS
 
_CS_POSIX_V7_ILP32_OFFBIG_CFLAGS


	)

650 
	m_CS_POSIX_V7_ILP32_OFFBIG_LDFLAGS
,

651 
	#_CS_POSIX_V7_ILP32_OFFBIG_LDFLAGS
 
_CS_POSIX_V7_ILP32_OFFBIG_LDFLAGS


	)

652 
	m_CS_POSIX_V7_ILP32_OFFBIG_LIBS
,

653 
	#_CS_POSIX_V7_ILP32_OFFBIG_LIBS
 
_CS_POSIX_V7_ILP32_OFFBIG_LIBS


	)

654 
	m_CS_POSIX_V7_ILP32_OFFBIG_LINTFLAGS
,

655 
	#_CS_POSIX_V7_ILP32_OFFBIG_LINTFLAGS
 
_CS_POSIX_V7_ILP32_OFFBIG_LINTFLAGS


	)

656 
	m_CS_POSIX_V7_LP64_OFF64_CFLAGS
,

657 
	#_CS_POSIX_V7_LP64_OFF64_CFLAGS
 
_CS_POSIX_V7_LP64_OFF64_CFLAGS


	)

658 
	m_CS_POSIX_V7_LP64_OFF64_LDFLAGS
,

659 
	#_CS_POSIX_V7_LP64_OFF64_LDFLAGS
 
_CS_POSIX_V7_LP64_OFF64_LDFLAGS


	)

660 
	m_CS_POSIX_V7_LP64_OFF64_LIBS
,

661 
	#_CS_POSIX_V7_LP64_OFF64_LIBS
 
_CS_POSIX_V7_LP64_OFF64_LIBS


	)

662 
	m_CS_POSIX_V7_LP64_OFF64_LINTFLAGS
,

663 
	#_CS_POSIX_V7_LP64_OFF64_LINTFLAGS
 
_CS_POSIX_V7_LP64_OFF64_LINTFLAGS


	)

664 
	m_CS_POSIX_V7_LPBIG_OFFBIG_CFLAGS
,

665 
	#_CS_POSIX_V7_LPBIG_OFFBIG_CFLAGS
 
_CS_POSIX_V7_LPBIG_OFFBIG_CFLAGS


	)

666 
	m_CS_POSIX_V7_LPBIG_OFFBIG_LDFLAGS
,

667 
	#_CS_POSIX_V7_LPBIG_OFFBIG_LDFLAGS
 
_CS_POSIX_V7_LPBIG_OFFBIG_LDFLAGS


	)

668 
	m_CS_POSIX_V7_LPBIG_OFFBIG_LIBS
,

669 
	#_CS_POSIX_V7_LPBIG_OFFBIG_LIBS
 
_CS_POSIX_V7_LPBIG_OFFBIG_LIBS


	)

670 
	m_CS_POSIX_V7_LPBIG_OFFBIG_LINTFLAGS
,

671 
	#_CS_POSIX_V7_LPBIG_OFFBIG_LINTFLAGS
 
_CS_POSIX_V7_LPBIG_OFFBIG_LINTFLAGS


	)

673 
	m_CS_V6_ENV
,

674 
	#_CS_V6_ENV
 
_CS_V6_ENV


	)

675 
	m_CS_V7_ENV


676 
	#_CS_V7_ENV
 
_CS_V7_ENV


	)

	@/usr/include/bits/environments.h

19 #iâdeà
_UNISTD_H


23 
	~<b™s/wÜdsize.h
>

43 #ià
__WORDSIZE
 == 64

57 
	#_POSIX_V7_LPBIG_OFFBIG
 -1

	)

58 
	#_POSIX_V6_LPBIG_OFFBIG
 -1

	)

59 
	#_XBS5_LPBIG_OFFBIG
 -1

	)

62 
	#_POSIX_V7_LP64_OFF64
 1

	)

63 
	#_POSIX_V6_LP64_OFF64
 1

	)

64 
	#_XBS5_LP64_OFF64
 1

	)

70 
	#_POSIX_V7_ILP32_OFF32
 1

	)

71 
	#_POSIX_V7_ILP32_OFFBIG
 1

	)

72 
	#_POSIX_V6_ILP32_OFF32
 1

	)

73 
	#_POSIX_V6_ILP32_OFFBIG
 1

	)

74 
	#_XBS5_ILP32_OFF32
 1

	)

75 
	#_XBS5_ILP32_OFFBIG
 1

	)

92 
	#__ILP32_OFF32_CFLAGS
 "-m32"

	)

93 
	#__ILP32_OFFBIG_CFLAGS
 "-m32 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64"

	)

94 
	#__ILP32_OFF32_LDFLAGS
 "-m32"

	)

95 
	#__ILP32_OFFBIG_LDFLAGS
 "-m32"

	)

96 
	#__LP64_OFF64_CFLAGS
 "-m64"

	)

97 
	#__LP64_OFF64_LDFLAGS
 "-m64"

	)

	@/usr/include/bits/fcntl.h

21 #iâdef 
_FCNTL_H


25 
	~<sys/ty³s.h
>

26 
	~<b™s/wÜdsize.h
>

27 #ifdeà
__USE_GNU


28 
	~<b™s/uio.h
>

34 
	#O_ACCMODE
 0003

	)

35 
	#O_RDONLY
 00

	)

36 
	#O_WRONLY
 01

	)

37 
	#O_RDWR
 02

	)

38 
	#O_CREAT
 0100

	)

39 
	#O_EXCL
 0200

	)

40 
	#O_NOCTTY
 0400

	)

41 
	#O_TRUNC
 01000

	)

42 
	#O_APPEND
 02000

	)

43 
	#O_NONBLOCK
 04000

	)

44 
	#O_NDELAY
 
O_NONBLOCK


	)

45 
	#O_SYNC
 04010000

	)

46 
	#O_FSYNC
 
O_SYNC


	)

47 
	#O_ASYNC
 020000

	)

49 #ifdeà
__USE_XOPEN2K8


50 
	#O_DIRECTORY
 0200000

	)

51 
	#O_NOFOLLOW
 0400000

	)

52 
	#O_CLOEXEC
 02000000

	)

54 #ifdeà
__USE_GNU


55 
	#O_DIRECT
 040000

	)

56 
	#O_NOATIME
 01000000

	)

62 #ià
defšed
 
__USE_POSIX199309
 || defšed 
__USE_UNIX98


63 
	#O_DSYNC
 010000

	)

64 
	#O_RSYNC
 
O_SYNC


	)

67 #ifdeà
__USE_LARGEFILE64


68 #ià
__WORDSIZE
 == 64

69 
	#O_LARGEFILE
 0

	)

71 
	#O_LARGEFILE
 0100000

	)

76 
	#F_DUPFD
 0

	)

77 
	#F_GETFD
 1

	)

78 
	#F_SETFD
 2

	)

79 
	#F_GETFL
 3

	)

80 
	#F_SETFL
 4

	)

81 #ià
__WORDSIZE
 == 64

82 
	#F_GETLK
 5

	)

83 
	#F_SETLK
 6

	)

84 
	#F_SETLKW
 7

	)

86 
	#F_GETLK64
 5

	)

87 
	#F_SETLK64
 6

	)

88 
	#F_SETLKW64
 7

	)

90 #iâdeà
__USE_FILE_OFFSET64


91 
	#F_GETLK
 5

	)

92 
	#F_SETLK
 6

	)

93 
	#F_SETLKW
 7

	)

95 
	#F_GETLK
 
F_GETLK64


	)

96 
	#F_SETLK
 
F_SETLK64


	)

97 
	#F_SETLKW
 
F_SETLKW64


	)

99 
	#F_GETLK64
 12

	)

100 
	#F_SETLK64
 13

	)

101 
	#F_SETLKW64
 14

	)

104 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K8


105 
	#F_SETOWN
 8

	)

106 
	#F_GETOWN
 9

	)

109 #ifdeà
__USE_GNU


110 
	#F_SETSIG
 10

	)

111 
	#F_GETSIG
 11

	)

112 
	#F_SETOWN_EX
 15

	)

113 
	#F_GETOWN_EX
 16

	)

116 #ifdeà
__USE_GNU


117 
	#F_SETLEASE
 1024

	)

118 
	#F_GETLEASE
 1025

	)

119 
	#F_NOTIFY
 1026

	)

121 #ifdeà
__USE_XOPEN2K8


122 
	#F_DUPFD_CLOEXEC
 1030

	)

127 
	#FD_CLOEXEC
 1

	)

130 
	#F_RDLCK
 0

	)

131 
	#F_WRLCK
 1

	)

132 
	#F_UNLCK
 2

	)

135 
	#F_EXLCK
 4

	)

136 
	#F_SHLCK
 8

	)

138 #ifdeà
__USE_BSD


140 
	#LOCK_SH
 1

	)

141 
	#LOCK_EX
 2

	)

142 
	#LOCK_NB
 4

	)

144 
	#LOCK_UN
 8

	)

147 #ifdeà
__USE_GNU


148 
	#LOCK_MAND
 32

	)

149 
	#LOCK_READ
 64

	)

150 
	#LOCK_WRITE
 128

	)

151 
	#LOCK_RW
 192

	)

154 #ifdeà
__USE_GNU


156 
	#DN_ACCESS
 0x00000001

	)

157 
	#DN_MODIFY
 0x00000002

	)

158 
	#DN_CREATE
 0x00000004

	)

159 
	#DN_DELETE
 0x00000008

	)

160 
	#DN_RENAME
 0x00000010

	)

161 
	#DN_ATTRIB
 0x00000020

	)

162 
	#DN_MULTISHOT
 0x80000000

	)

165 
	sæock


167 
	ml_ty³
;

168 
	ml_wh’û
;

169 #iâdeà
__USE_FILE_OFFSET64


170 
__off_t
 
	ml_¡¬t
;

171 
__off_t
 
	ml_Ën
;

173 
__off64_t
 
	ml_¡¬t
;

174 
__off64_t
 
	ml_Ën
;

176 
__pid_t
 
	ml_pid
;

179 #ifdeà
__USE_LARGEFILE64


180 
	sæock64


182 
	ml_ty³
;

183 
	ml_wh’û
;

184 
__off64_t
 
	ml_¡¬t
;

185 
__off64_t
 
	ml_Ën
;

186 
__pid_t
 
	ml_pid
;

190 #ifdeà
__USE_GNU


192 
	e__pid_ty³


194 
	mF_OWNER_TID
 = 0,

195 
	mF_OWNER_PID
,

196 
	mF_OWNER_PGRP
,

197 
	mF_OWNER_GID
 = 
F_OWNER_PGRP


201 
	sf_owÃr_ex


203 
__pid_ty³
 
	mty³
;

204 
__pid_t
 
	mpid
;

210 #ifdef 
__USE_BSD


211 
	#FAPPEND
 
O_APPEND


	)

212 
	#FFSYNC
 
O_FSYNC


	)

213 
	#FASYNC
 
O_ASYNC


	)

214 
	#FNONBLOCK
 
O_NONBLOCK


	)

215 
	#FNDELAY
 
O_NDELAY


	)

219 #ifdeà
__USE_XOPEN2K


220 
	#POSIX_FADV_NORMAL
 0

	)

221 
	#POSIX_FADV_RANDOM
 1

	)

222 
	#POSIX_FADV_SEQUENTIAL
 2

	)

223 
	#POSIX_FADV_WILLNEED
 3

	)

224 
	#POSIX_FADV_DONTNEED
 4

	)

225 
	#POSIX_FADV_NOREUSE
 5

	)

229 #ifdeà
__USE_GNU


231 
	#SYNC_FILE_RANGE_WAIT_BEFORE
 1

	)

234 
	#SYNC_FILE_RANGE_WRITE
 2

	)

237 
	#SYNC_FILE_RANGE_WAIT_AFTER
 4

	)

242 
	#SPLICE_F_MOVE
 1

	)

243 
	#SPLICE_F_NONBLOCK
 2

	)

246 
	#SPLICE_F_MORE
 4

	)

247 
	#SPLICE_F_GIFT
 8

	)

250 
	g__BEGIN_DECLS


252 #ifdeà
__USE_GNU


255 
ssize_t
 
	$»adah—d
 (
__fd
, 
__off64_t
 
__off£t
, 
size_t
 
__couÁ
)

256 
__THROW
;

260 
	`sync_fe_¿nge
 (
__fd
, 
__off64_t
 
__off£t
, __off64_ˆ
__couÁ
,

261 
__æags
);

265 
ssize_t
 
	`vm¥liû
 (
__fdout
, cÚ¡ 
iovec
 *
__iov
,

266 
size_t
 
__couÁ
, 
__æags
);

269 
ssize_t
 
	`¥liû
 (
__fdš
, 
__off64_t
 *
__offš
, 
__fdout
,

270 
__off64_t
 *
__offout
, 
size_t
 
__Ën
,

271 
__æags
);

274 
ssize_t
 
	`‹e
 (
__fdš
, 
__fdout
, 
size_t
 
__Ën
,

275 
__æags
);

278 #iâdeà
__USE_FILE_OFFSET64


279 
	`çÎoÿ‹
 (
__fd
, 
__mode
, 
__off_t
 
__off£t
, __off_ˆ
__Ën
);

281 #ifdeà
__REDIRECT


282 
	`__REDIRECT
 (
çÎoÿ‹
, (
__fd
, 
__mode
, 
__off64_t
 
__off£t
,

283 
__off64_t
 
__Ën
),

284 
çÎoÿ‹64
);

286 
	#çÎoÿ‹
 
çÎoÿ‹64


	)

289 #ifdeà
__USE_LARGEFILE64


290 
	`çÎoÿ‹64
 (
__fd
, 
__mode
, 
__off64_t
 
__off£t
,

291 
__off64_t
 
__Ën
);

295 
__END_DECLS


	@/usr/include/bits/fcntl2.h

20 #iâdef 
_FCNTL_H


26 #iâdeà
__USE_FILE_OFFSET64


27 
	$__İ’_2
 (
__cÚ¡
 *
__·th
, 
__oæag
è
	`__nÚnuÎ
 ((1));

28 
	`__REDIRECT
 (
__İ’_®Ÿs
, (
__cÚ¡
 *
__·th
, 
__oæag
, ...),

29 
İ’
è
	`__nÚnuÎ
 ((1));

31 
	`__REDIRECT
 (
__İ’_2
, (
__cÚ¡
 *
__·th
, 
__oæag
),

32 
__İ’64_2
è
	`__nÚnuÎ
 ((1));

33 
	`__REDIRECT
 (
__İ’_®Ÿs
, (
__cÚ¡
 *
__·th
, 
__oæag
, ...),

34 
İ’64
è
	`__nÚnuÎ
 ((1));

36 
	`__”rÜdeş
 (
__İ’_too_mªy_¬gs
,

38 
	`__”rÜdeş
 (
__İ’_missšg_mode
,

41 
__ex‹º_®ways_šlše
 

42 
	$İ’
 (
__cÚ¡
 *
__·th
, 
__oæag
, ...)

44 ià(
	`__va_¬g_·ck_Ën
 () > 1)

45 
	`__İ’_too_mªy_¬gs
 ();

47 ià(
	`__butš_cÚ¡ªt_p
 (
__oæag
))

49 ià((
__oæag
 & 
O_CREAT
è!ğ0 && 
	`__va_¬g_·ck_Ën
 () < 1)

51 
	`__İ’_missšg_mode
 ();

52  
	`__İ’_2
 (
__·th
, 
__oæag
);

54  
	`__İ’_®Ÿs
 (
__·th
, 
__oæag
, 
	`__va_¬g_·ck
 ());

57 ià(
	`__va_¬g_·ck_Ën
 () < 1)

58  
	`__İ’_2
 (
__·th
, 
__oæag
);

60  
	`__İ’_®Ÿs
 (
__·th
, 
__oæag
, 
	`__va_¬g_·ck
 ());

61 
	}
}

64 #ifdeà
__USE_LARGEFILE64


65 
	$__İ’64_2
 (
__cÚ¡
 *
__·th
, 
__oæag
è
	`__nÚnuÎ
 ((1));

66 
	`__REDIRECT
 (
__İ’64_®Ÿs
, (
__cÚ¡
 *
__·th
, 
__oæag
,

67 ...), 
İ’64
è
	`__nÚnuÎ
 ((1));

68 
	`__”rÜdeş
 (
__İ’64_too_mªy_¬gs
,

70 
	`__”rÜdeş
 (
__İ’64_missšg_mode
,

73 
__ex‹º_®ways_šlše
 

74 
	$İ’64
 (
__cÚ¡
 *
__·th
, 
__oæag
, ...)

76 ià(
	`__va_¬g_·ck_Ën
 () > 1)

77 
	`__İ’64_too_mªy_¬gs
 ();

79 ià(
	`__butš_cÚ¡ªt_p
 (
__oæag
))

81 ià((
__oæag
 & 
O_CREAT
è!ğ0 && 
	`__va_¬g_·ck_Ën
 () < 1)

83 
	`__İ’64_missšg_mode
 ();

84  
	`__İ’64_2
 (
__·th
, 
__oæag
);

86  
	`__İ’64_®Ÿs
 (
__·th
, 
__oæag
, 
	`__va_¬g_·ck
 ());

89 ià(
	`__va_¬g_·ck_Ën
 () < 1)

90  
	`__İ’64_2
 (
__·th
, 
__oæag
);

92  
	`__İ’64_®Ÿs
 (
__·th
, 
__oæag
, 
	`__va_¬g_·ck
 ());

93 
	}
}

97 #ifdeà
__USE_ATFILE


98 #iâdeà
__USE_FILE_OFFSET64


99 
	$__İ’©_2
 (
__fd
, 
__cÚ¡
 *
__·th
, 
__oæag
)

100 
	`__nÚnuÎ
 ((2));

101 
	`__REDIRECT
 (
__İ’©_®Ÿs
, (
__fd
, 
__cÚ¡
 *
__·th
,

102 
__oæag
, ...), 
İ’©
)

103 
	`__nÚnuÎ
 ((2));

105 
	`__REDIRECT
 (
__İ’©_2
, (
__fd
, 
__cÚ¡
 *
__·th
,

106 
__oæag
), 
__İ’©64_2
)

107 
	`__nÚnuÎ
 ((2));

108 
	`__REDIRECT
 (
__İ’©_®Ÿs
, (
__fd
, 
__cÚ¡
 *
__·th
,

109 
__oæag
, ...), 
İ’©64
)

110 
	`__nÚnuÎ
 ((2));

112 
	`__”rÜdeş
 (
__İ’©_too_mªy_¬gs
,

114 
	`__”rÜdeş
 (
__İ’©_missšg_mode
,

117 
__ex‹º_®ways_šlše
 

118 
	$İ’©
 (
__fd
, 
__cÚ¡
 *
__·th
, 
__oæag
, ...)

120 ià(
	`__va_¬g_·ck_Ën
 () > 1)

121 
	`__İ’©_too_mªy_¬gs
 ();

123 ià(
	`__butš_cÚ¡ªt_p
 (
__oæag
))

125 ià((
__oæag
 & 
O_CREAT
è!ğ0 && 
	`__va_¬g_·ck_Ën
 () < 1)

127 
	`__İ’©_missšg_mode
 ();

128  
	`__İ’©_2
 (
__fd
, 
__·th
, 
__oæag
);

130  
	`__İ’©_®Ÿs
 (
__fd
, 
__·th
, 
__oæag
, 
	`__va_¬g_·ck
 ());

133 ià(
	`__va_¬g_·ck_Ën
 () < 1)

134  
	`__İ’©_2
 (
__fd
, 
__·th
, 
__oæag
);

136  
	`__İ’©_®Ÿs
 (
__fd
, 
__·th
, 
__oæag
, 
	`__va_¬g_·ck
 ());

137 
	}
}

140 #ifdeà
__USE_LARGEFILE64


141 
	$__İ’©64_2
 (
__fd
, 
__cÚ¡
 *
__·th
, 
__oæag
)

142 
	`__nÚnuÎ
 ((2));

143 
	`__REDIRECT
 (
__İ’©64_®Ÿs
, (
__fd
, 
__cÚ¡
 *
__·th
,

144 
__oæag
, ...), 
İ’©64
)

145 
	`__nÚnuÎ
 ((2));

146 
	`__”rÜdeş
 (
__İ’©64_too_mªy_¬gs
,

148 
	`__”rÜdeş
 (
__İ’©64_missšg_mode
,

151 
__ex‹º_®ways_šlše
 

152 
	$İ’©64
 (
__fd
, 
__cÚ¡
 *
__·th
, 
__oæag
, ...)

154 ià(
	`__va_¬g_·ck_Ën
 () > 1)

155 
	`__İ’©64_too_mªy_¬gs
 ();

157 ià(
	`__butš_cÚ¡ªt_p
 (
__oæag
))

159 ià((
__oæag
 & 
O_CREAT
è!ğ0 && 
	`__va_¬g_·ck_Ën
 () < 1)

161 
	`__İ’©64_missšg_mode
 ();

162  
	`__İ’©64_2
 (
__fd
, 
__·th
, 
__oæag
);

164  
	`__İ’©64_®Ÿs
 (
__fd
, 
__·th
, 
__oæag
, 
	`__va_¬g_·ck
 ());

167 ià(
	`__va_¬g_·ck_Ën
 () < 1)

168  
	`__İ’©64_2
 (
__fd
, 
__·th
, 
__oæag
);

170  
	`__İ’©64_®Ÿs
 (
__fd
, 
__·th
, 
__oæag
, 
	`__va_¬g_·ck
 ());

171 
	}
}

	@/usr/include/bits/huge_val.h

22 #iâdeà
_MATH_H


28 #ià
__GNUC_PREREQ
(3,3)

29 
	#HUGE_VAL
 (
	`__butš_huge_v®
())

	)

30 #–ià
__GNUC_PREREQ
(2,96)

31 
	#HUGE_VAL
 (
__ex‹nsiÚ__
 0x1.0
p2047
)

	)

32 #–ià
defšed
 
__GNUC__


34 
	#HUGE_VAL
 \

35 (
__ex‹nsiÚ__
 \

36 ((uniÚ { 
__l
 
	`__©Œibu‹__
((
	`__mode__
(
__DI__
))); 
__d
; }) \

37 { 
__l
: 0x7ff0000000000000ULL }).
__d
)

	)

41 
	~<’dŸn.h
>

43 uniÚ { 
	m__c
[8]; 
	m__d
; } 
	t__huge_v®_t
;

45 #ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


46 
	#__HUGE_VAL_by‹s
 { 0x7f, 0xf0, 0, 0, 0, 0, 0, 0 }

	)

48 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


49 
	#__HUGE_VAL_by‹s
 { 0, 0, 0, 0, 0, 0, 0xf0, 0x7à}

	)

52 
__huge_v®_t
 
	g__huge_v®
 = { 
__HUGE_VAL_by‹s
 };

53 
	#HUGE_VAL
 (
__huge_v®
.
__d
)

	)

	@/usr/include/bits/huge_valf.h

22 #iâdeà
_MATH_H


28 #ià
__GNUC_PREREQ
(3,3)

29 
	#HUGE_VALF
 (
	`__butš_huge_v®f
())

	)

30 #–ià
__GNUC_PREREQ
(2,96)

31 
	#HUGE_VALF
 (
__ex‹nsiÚ__
 0x1.0
p255f
)

	)

32 #–ià
defšed
 
__GNUC__


34 
	#HUGE_VALF
 \

35 (
__ex‹nsiÚ__
 \

36 ((uniÚ { 
__l
 
	`__©Œibu‹__
((
	`__mode__
(
__SI__
))); 
__d
; }) \

37 { 
__l
: 0x7f800000UL }).
__d
)

	)

41 uniÚ { 
	m__c
[4]; 
	m__f
; } 
	t__huge_v®f_t
;

43 #ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


44 
	#__HUGE_VALF_by‹s
 { 0x7f, 0x80, 0, 0 }

	)

46 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


47 
	#__HUGE_VALF_by‹s
 { 0, 0, 0x80, 0x7à}

	)

50 
__huge_v®f_t
 
	g__huge_v®f
 = { 
__HUGE_VALF_by‹s
 };

51 
	#HUGE_VALF
 (
__huge_v®f
.
__f
)

	)

	@/usr/include/bits/huge_vall.h

21 #iâdeà
_MATH_H


25 #ià
__GNUC_PREREQ
(3,3)

26 
	#HUGE_VALL
 (
	`__butš_huge_v®l
())

	)

28 
	#HUGE_VALL
 ((è
HUGE_VAL
)

	)

	@/usr/include/bits/inf.h

20 #iâdeà
_MATH_H


26 #ià
__GNUC_PREREQ
(3,3)

27 
	#INFINITY
 (
	`__butš_šff
())

	)

29 
	#INFINITY
 
HUGE_VALF


	)

	@/usr/include/bits/ipc.h

19 #iâdeà
_SYS_IPC_H


23 
	~<b™s/ty³s.h
>

26 
	#IPC_CREAT
 01000

	)

27 
	#IPC_EXCL
 02000

	)

28 
	#IPC_NOWAIT
 04000

	)

31 
	#IPC_RMID
 0

	)

32 
	#IPC_SET
 1

	)

33 
	#IPC_STAT
 2

	)

34 #ifdeà
__USE_GNU


35 
	#IPC_INFO
 3

	)

39 
	#IPC_PRIVATE
 ((
__key_t
è0è

	)

43 
	sc_³rm


45 
__key_t
 
	m__key
;

46 
__uid_t
 
	muid
;

47 
__gid_t
 
	mgid
;

48 
__uid_t
 
	mcuid
;

49 
__gid_t
 
	mcgid
;

50 
	mmode
;

51 
	m__·d1
;

52 
	m__£q
;

53 
	m__·d2
;

54 
	m__unu£d1
;

55 
	m__unu£d2
;

	@/usr/include/bits/ipctypes.h

24 #iâdeà
_BITS_IPCTYPES_H


25 
	#_BITS_IPCTYPES_H
 1

	)

27 
	~<b™s/ty³s.h
>

30 #ià
__WORDSIZE
 == 32

31 
	t__c_pid_t
;

33 
	t__c_pid_t
;

	@/usr/include/bits/mathcalls.h

46 #iâdeà
_MATH_H


53 
_MdoubË_BEGIN_NAMESPACE


55 
__MATHCALL
 (
acos
,, (
_MdoubË_
 
__x
));

57 
__MATHCALL
 (
asš
,, (
_MdoubË_
 
__x
));

59 
__MATHCALL
 (
©ª
,, (
_MdoubË_
 
__x
));

61 
__MATHCALL
 (
©ª2
,, (
_MdoubË_
 
__y
, _MdoubË_ 
__x
));

64 
__MATHCALL
 (
cos
,, (
_MdoubË_
 
__x
));

66 
__MATHCALL
 (
sš
,, (
_MdoubË_
 
__x
));

68 
__MATHCALL
 (
n
,, (
_MdoubË_
 
__x
));

73 
__MATHCALL
 (
cosh
,, (
_MdoubË_
 
__x
));

75 
__MATHCALL
 (
sšh
,, (
_MdoubË_
 
__x
));

77 
__MATHCALL
 (
nh
,, (
_MdoubË_
 
__x
));

78 
	g_MdoubË_END_NAMESPACE


80 #ifdeà
__USE_GNU


82 
__MATHDECL
 (,
sšcos
,,

83 (
_MdoubË_
 
__x
, _MdoubË_ *
__sšx
, _MdoubË_ *
__cosx
));

86 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_ISOC99


87 
__BEGIN_NAMESPACE_C99


89 
__MATHCALL
 (
acosh
,, (
_MdoubË_
 
__x
));

91 
__MATHCALL
 (
asšh
,, (
_MdoubË_
 
__x
));

93 
__MATHCALL
 (
©ªh
,, (
_MdoubË_
 
__x
));

94 
	g__END_NAMESPACE_C99


99 
_MdoubË_BEGIN_NAMESPACE


101 
__MATHCALL
 (
exp
,, (
_MdoubË_
 
__x
));

104 
__MATHCALL
 (
äexp
,, (
_MdoubË_
 
__x
, *
__expÚ’t
));

107 
__MATHCALL
 (
ldexp
,, (
_MdoubË_
 
__x
, 
__expÚ’t
));

110 
__MATHCALL
 (
log
,, (
_MdoubË_
 
__x
));

113 
__MATHCALL
 (
log10
,, (
_MdoubË_
 
__x
));

116 
__MATHCALL
 (
modf
,, (
_MdoubË_
 
__x
, _MdoubË_ *
__Œ
));

117 
	g_MdoubË_END_NAMESPACE


119 #ifdeà
__USE_GNU


121 
__MATHCALL
 (
exp10
,, (
_MdoubË_
 
__x
));

123 
__MATHCALL
 (
pow10
,, (
_MdoubË_
 
__x
));

126 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_ISOC99


127 
__BEGIN_NAMESPACE_C99


129 
__MATHCALL
 (
expm1
,, (
_MdoubË_
 
__x
));

132 
__MATHCALL
 (
log1p
,, (
_MdoubË_
 
__x
));

135 
__MATHCALL
 (
logb
,, (
_MdoubË_
 
__x
));

136 
	g__END_NAMESPACE_C99


139 #ifdeà
__USE_ISOC99


140 
__BEGIN_NAMESPACE_C99


142 
__MATHCALL
 (
exp2
,, (
_MdoubË_
 
__x
));

145 
__MATHCALL
 (
log2
,, (
_MdoubË_
 
__x
));

146 
	g__END_NAMESPACE_C99


152 
_MdoubË_BEGIN_NAMESPACE


154 
__MATHCALL
 (
pow
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
));

157 
__MATHCALL
 (
sq¹
,, (
_MdoubË_
 
__x
));

158 
	g_MdoubË_END_NAMESPACE


160 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN
 || defšed 
__USE_ISOC99


161 
__BEGIN_NAMESPACE_C99


163 
__MATHCALL
 (
hypÙ
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
));

164 
	g__END_NAMESPACE_C99


167 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_ISOC99


168 
__BEGIN_NAMESPACE_C99


170 
__MATHCALL
 (
cb¹
,, (
_MdoubË_
 
__x
));

171 
	g__END_NAMESPACE_C99


177 
_MdoubË_BEGIN_NAMESPACE


179 
__MATHCALLX
 (
û
,, (
_MdoubË_
 
__x
), (
__cÚ¡__
));

182 
__MATHCALLX
 (
çbs
,, (
_MdoubË_
 
__x
), (
__cÚ¡__
));

185 
__MATHCALLX
 (
æoÜ
,, (
_MdoubË_
 
__x
), (
__cÚ¡__
));

188 
__MATHCALL
 (
fmod
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
));

193 
__MATHDECL_1
 (,
__isšf
,, (
_MdoubË_
 
__v®ue
)è
__©Œibu‹__
 ((
__cÚ¡__
));

196 
__MATHDECL_1
 (,
__fš™e
,, (
_MdoubË_
 
__v®ue
)è
__©Œibu‹__
 ((
__cÚ¡__
));

197 
	g_MdoubË_END_NAMESPACE


199 #ifdeà
__USE_MISC


202 
__MATHDECL_1
 (,
isšf
,, (
_MdoubË_
 
__v®ue
)è
__©Œibu‹__
 ((
__cÚ¡__
));

205 
__MATHDECL_1
 (,
fš™e
,, (
_MdoubË_
 
__v®ue
)è
__©Œibu‹__
 ((
__cÚ¡__
));

208 
__MATHCALL
 (
d»m
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
));

212 
__MATHCALL
 (
signifiÿnd
,, (
_MdoubË_
 
__x
));

215 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_ISOC99


216 
__BEGIN_NAMESPACE_C99


218 
__MATHCALLX
 (
cİysign
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
), (
__cÚ¡__
));

219 
	g__END_NAMESPACE_C99


222 #ifdeà
__USE_ISOC99


223 
__BEGIN_NAMESPACE_C99


225 
__MATHCALLX
 (
Çn
,, (
__cÚ¡
 *
__gb
), (
__cÚ¡__
));

226 
	g__END_NAMESPACE_C99


231 
__MATHDECL_1
 (,
__i¢ª
,, (
_MdoubË_
 
__v®ue
)è
__©Œibu‹__
 ((
__cÚ¡__
));

233 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


235 
__MATHDECL_1
 (,
i¢ª
,, (
_MdoubË_
 
__v®ue
)è
__©Œibu‹__
 ((
__cÚ¡__
));

238 
__MATHCALL
 (
j0
,, (
_MdoubË_
));

239 
__MATHCALL
 (
j1
,, (
_MdoubË_
));

240 
__MATHCALL
 (
jn
,, (, 
_MdoubË_
));

241 
__MATHCALL
 (
y0
,, (
_MdoubË_
));

242 
__MATHCALL
 (
y1
,, (
_MdoubË_
));

243 
__MATHCALL
 (
yn
,, (, 
_MdoubË_
));

247 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN
 || defšed 
__USE_ISOC99


248 
__BEGIN_NAMESPACE_C99


250 
__MATHCALL
 (
”f
,, (
_MdoubË_
));

251 
__MATHCALL
 (
”fc
,, (
_MdoubË_
));

252 
__MATHCALL
 (
lgamma
,, (
_MdoubË_
));

253 
	g__END_NAMESPACE_C99


256 #ifdeà
__USE_ISOC99


257 
__BEGIN_NAMESPACE_C99


259 
__MATHCALL
 (
tgamma
,, (
_MdoubË_
));

260 
	g__END_NAMESPACE_C99


263 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


265 
__MATHCALL
 (
gamma
,, (
_MdoubË_
));

268 #ifdeà
__USE_MISC


272 
__MATHCALL
 (
lgamma
,
_r
, (
_MdoubË_
, *
__signgamp
));

276 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_ISOC99


277 
__BEGIN_NAMESPACE_C99


280 
__MATHCALL
 (
ršt
,, (
_MdoubË_
 
__x
));

283 
__MATHCALLX
 (
Ãxá”
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
), (
__cÚ¡__
));

284 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__LDBL_COMPAT


285 
__MATHCALLX
 (
Ãx‰ow¬d
,, (
_MdoubË_
 
__x
, 
__y
), (
__cÚ¡__
));

289 
__MATHCALL
 (
»mašd”
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
));

291 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_ISOC99


293 
__MATHCALL
 (
sÿlbn
,, (
_MdoubË_
 
__x
, 
__n
));

297 
__MATHDECL
 (,
ogb
,, (
_MdoubË_
 
__x
));

300 #ifdeà
__USE_ISOC99


302 
__MATHCALL
 (
sÿlbÊ
,, (
_MdoubË_
 
__x
, 
__n
));

306 
__MATHCALL
 (
Ã¬byšt
,, (
_MdoubË_
 
__x
));

310 
__MATHCALLX
 (
round
,, (
_MdoubË_
 
__x
), (
__cÚ¡__
));

314 
__MATHCALLX
 (
Œunc
,, (
_MdoubË_
 
__x
), (
__cÚ¡__
));

319 
__MATHCALL
 (
»mquo
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
, *
__quo
));

326 
__MATHDECL
 (,
Ìšt
,, (
_MdoubË_
 
__x
));

327 
__MATHDECL
 (,
Îršt
,, (
_MdoubË_
 
__x
));

331 
__MATHDECL
 (,
Ìound
,, (
_MdoubË_
 
__x
));

332 
__MATHDECL
 (,
Îround
,, (
_MdoubË_
 
__x
));

336 
__MATHCALL
 (
fdim
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
));

339 
__MATHCALL
 (
fmax
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
));

342 
__MATHCALL
 (
fmš
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
));

346 
__MATHDECL_1
 (, 
__åşassify
,, (
_MdoubË_
 
__v®ue
))

347 
__©Œibu‹__
 ((
__cÚ¡__
));

350 
__MATHDECL_1
 (, 
__signb™
,, (
_MdoubË_
 
__v®ue
))

351 
__©Œibu‹__
 ((
__cÚ¡__
));

355 
__MATHCALL
 (
fma
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
, _MdoubË_ 
__z
));

358 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_ISOC99


359 
	g__END_NAMESPACE_C99


362 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED


364 
__MATHCALL
 (
sÿlb
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__n
));

	@/usr/include/bits/mathdef.h

19 #ià!
defšed
 
_MATH_H
 && !defšed 
_COMPLEX_H


23 #ià
defšed
 
__USE_ISOC99
 && defšed 
_MATH_H
 && !defšed 
_MATH_H_MATHDEF


24 
	#_MATH_H_MATHDEF
 1

	)

26 
	~<b™s/wÜdsize.h
>

28 #ià
__WORDSIZE
 =ğ64 || (
defšed
 
__FLT_EVAL_METHOD__
 && __FLT_EVAL_METHOD__ == 0)

31 
	tæßt_t
;

32 
	tdoubË_t
;

38 
	tæßt_t
;

40 
	tdoubË_t
;

45 
	#FP_ILOGB0
 (-2147483647 - 1)

	)

46 
	#FP_ILOGBNAN
 (-2147483647 - 1)

	)

	@/usr/include/bits/mathinline.h

21 #iâdeà
_MATH_H


25 
	~<b™s/wÜdsize.h
>

27 #iâdeà
__ex‹º_šlše


28 
	#__MATH_INLINE
 
__šlše


	)

30 
	#__MATH_INLINE
 
__ex‹º_šlše


	)

34 #ià
defšed
 
__USE_ISOC99
 && defšed 
__GNUC__
 && __GNUC__ >= 2

37 
__MATH_INLINE
 

38 
__NTH
 (
	$__signb™f
 (
__x
))

40 #ià
__WORDSIZE
 == 32

41 
__ex‹nsiÚ__
 uniÚ { 
__f
; 
__i
; } 
__u
 = { __f: 
__x
 };

42  
__u
.
__i
 < 0;

44 
__m
;

45 
	`__asm
 ("pmovmskb %1, %0" : "ô" (
__m
è: "x" (
__x
));

46  
__m
 & 0x8;

48 
	}
}

49 
__MATH_INLINE
 

50 
__NTH
 (
	$__signb™
 (
__x
))

52 #ià
__WORDSIZE
 == 32

53 
__ex‹nsiÚ__
 uniÚ { 
__d
; 
__i
[2]; } 
__u
 = { __d: 
__x
 };

54  
__u
.
__i
[1] < 0;

56 
__m
;

57 
	`__asm
 ("pmovmskb %1, %0" : "ô" (
__m
è: "x" (
__x
));

58  
__m
 & 0x80;

60 
	}
}

61 
__MATH_INLINE
 

62 
__NTH
 (
	$__signb™l
 (
__x
))

64 
__ex‹nsiÚ__
 uniÚ { 
__l
; 
__i
[3]; } 
__u
 = { __l: 
__x
 };

65  (
__u
.
__i
[2] & 0x8000) != 0;

66 
	}
}

	@/usr/include/bits/mman.h

20 #iâdeà
_SYS_MMAN_H


33 
	#PROT_READ
 0x1

	)

34 
	#PROT_WRITE
 0x2

	)

35 
	#PROT_EXEC
 0x4

	)

36 
	#PROT_NONE
 0x0

	)

37 
	#PROT_GROWSDOWN
 0x01000000

	)

39 
	#PROT_GROWSUP
 0x02000000

	)

43 
	#MAP_SHARED
 0x01

	)

44 
	#MAP_PRIVATE
 0x02

	)

45 #ifdeà
__USE_MISC


46 
	#MAP_TYPE
 0x0à

	)

50 
	#MAP_FIXED
 0x10

	)

51 #ifdeà
__USE_MISC


52 
	#MAP_FILE
 0

	)

53 
	#MAP_ANONYMOUS
 0x20

	)

54 
	#MAP_ANON
 
MAP_ANONYMOUS


	)

55 
	#MAP_32BIT
 0x40

	)

59 #ifdeà
__USE_MISC


60 
	#MAP_GROWSDOWN
 0x00100

	)

61 
	#MAP_DENYWRITE
 0x00800

	)

62 
	#MAP_EXECUTABLE
 0x01000

	)

63 
	#MAP_LOCKED
 0x02000

	)

64 
	#MAP_NORESERVE
 0x04000

	)

65 
	#MAP_POPULATE
 0x08000

	)

66 
	#MAP_NONBLOCK
 0x10000

	)

67 
	#MAP_STACK
 0x20000

	)

68 
	#MAP_HUGETLB
 0x40000

	)

72 
	#MS_ASYNC
 1

	)

73 
	#MS_SYNC
 4

	)

74 
	#MS_INVALIDATE
 2

	)

77 
	#MCL_CURRENT
 1

	)

78 
	#MCL_FUTURE
 2

	)

82 #ifdeà
__USE_GNU


83 
	#MREMAP_MAYMOVE
 1

	)

84 
	#MREMAP_FIXED
 2

	)

88 #ifdeà
__USE_BSD


89 
	#MADV_NORMAL
 0

	)

90 
	#MADV_RANDOM
 1

	)

91 
	#MADV_SEQUENTIAL
 2

	)

92 
	#MADV_WILLNEED
 3

	)

93 
	#MADV_DONTNEED
 4

	)

94 
	#MADV_REMOVE
 9

	)

95 
	#MADV_DONTFORK
 10

	)

96 
	#MADV_DOFORK
 11

	)

97 
	#MADV_MERGEABLE
 12

	)

98 
	#MADV_UNMERGEABLE
 13

	)

99 
	#MADV_DONTDUMP
 16

	)

101 
	#MADV_DODUMP
 17

	)

102 
	#MADV_HWPOISON
 100

	)

106 #ifdeà
__USE_XOPEN2K


107 
	#POSIX_MADV_NORMAL
 0

	)

108 
	#POSIX_MADV_RANDOM
 1

	)

109 
	#POSIX_MADV_SEQUENTIAL
 2

	)

110 
	#POSIX_MADV_WILLNEED
 3

	)

111 
	#POSIX_MADV_DONTNEED
 4

	)

	@/usr/include/bits/nan.h

20 #iâdeà
_MATH_H


27 #ià
__GNUC_PREREQ
(3,3)

29 
	#NAN
 (
	`__butš_Çnf
 (""))

	)

31 #–ià
defšed
 
__GNUC__


33 
	#NAN
 \

34 (
__ex‹nsiÚ__
 \

35 ((uniÚ { 
__l
 
	`__©Œibu‹__
 ((
	`__mode__
 (
__SI__
))); 
__d
; }) \

36 { 
__l
: 0x7fc00000UL }).
__d
)

	)

40 
	~<’dŸn.h
>

42 #ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


43 
	#__Çn_by‹s
 { 0x7f, 0xc0, 0, 0 }

	)

45 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


46 
	#__Çn_by‹s
 { 0, 0, 0xc0, 0x7à}

	)

49 uniÚ { 
	m__c
[4]; 
	m__d
; } 
__Çn_uniÚ


50 
	g__©Œibu‹_u£d__
 = { 
__Çn_by‹s
 };

51 
	#NAN
 (
__Çn_uniÚ
.
__d
)

	)

	@/usr/include/bits/posix_opt.h

20 #iâdef 
_BITS_POSIX_OPT_H


21 
	#_BITS_POSIX_OPT_H
 1

	)

24 
	#_POSIX_JOB_CONTROL
 1

	)

27 
	#_POSIX_SAVED_IDS
 1

	)

30 
	#_POSIX_PRIORITY_SCHEDULING
 200809L

	)

33 
	#_POSIX_SYNCHRONIZED_IO
 200809L

	)

36 
	#_POSIX_FSYNC
 200809L

	)

39 
	#_POSIX_MAPPED_FILES
 200809L

	)

42 
	#_POSIX_MEMLOCK
 200809L

	)

45 
	#_POSIX_MEMLOCK_RANGE
 200809L

	)

48 
	#_POSIX_MEMORY_PROTECTION
 200809L

	)

51 
	#_POSIX_CHOWN_RESTRICTED
 0

	)

55 
	#_POSIX_VDISABLE
 '\0'

	)

58 
	#_POSIX_NO_TRUNC
 1

	)

61 
	#_XOPEN_REALTIME
 1

	)

64 
	#_XOPEN_REALTIME_THREADS
 1

	)

67 
	#_XOPEN_SHM
 1

	)

70 
	#_POSIX_THREADS
 200809L

	)

73 
	#_POSIX_REENTRANT_FUNCTIONS
 1

	)

74 
	#_POSIX_THREAD_SAFE_FUNCTIONS
 200809L

	)

77 
	#_POSIX_THREAD_PRIORITY_SCHEDULING
 200809L

	)

80 
	#_POSIX_THREAD_ATTR_STACKSIZE
 200809L

	)

83 
	#_POSIX_THREAD_ATTR_STACKADDR
 200809L

	)

86 
	#_POSIX_THREAD_PRIO_INHERIT
 200809L

	)

90 
	#_POSIX_THREAD_PRIO_PROTECT
 200809L

	)

92 #ifdeà
__USE_XOPEN2K8


94 
	#_POSIX_THREAD_ROBUST_PRIO_INHERIT
 200809L

	)

97 
	#_POSIX_THREAD_ROBUST_PRIO_PROTECT
 -1

	)

101 
	#_POSIX_SEMAPHORES
 200809L

	)

104 
	#_POSIX_REALTIME_SIGNALS
 200809L

	)

107 
	#_POSIX_ASYNCHRONOUS_IO
 200809L

	)

108 
	#_POSIX_ASYNC_IO
 1

	)

110 
	#_LFS_ASYNCHRONOUS_IO
 1

	)

112 
	#_POSIX_PRIORITIZED_IO
 200809L

	)

115 
	#_LFS64_ASYNCHRONOUS_IO
 1

	)

118 
	#_LFS_LARGEFILE
 1

	)

119 
	#_LFS64_LARGEFILE
 1

	)

120 
	#_LFS64_STDIO
 1

	)

123 
	#_POSIX_SHARED_MEMORY_OBJECTS
 200809L

	)

126 
	#_POSIX_CPUTIME
 0

	)

129 
	#_POSIX_THREAD_CPUTIME
 0

	)

132 
	#_POSIX_REGEXP
 1

	)

135 
	#_POSIX_READER_WRITER_LOCKS
 200809L

	)

138 
	#_POSIX_SHELL
 1

	)

141 
	#_POSIX_TIMEOUTS
 200809L

	)

144 
	#_POSIX_SPIN_LOCKS
 200809L

	)

147 
	#_POSIX_SPAWN
 200809L

	)

150 
	#_POSIX_TIMERS
 200809L

	)

153 
	#_POSIX_BARRIERS
 200809L

	)

156 
	#_POSIX_MESSAGE_PASSING
 200809L

	)

159 
	#_POSIX_THREAD_PROCESS_SHARED
 200809L

	)

162 
	#_POSIX_MONOTONIC_CLOCK
 0

	)

165 
	#_POSIX_CLOCK_SELECTION
 200809L

	)

168 
	#_POSIX_ADVISORY_INFO
 200809L

	)

171 
	#_POSIX_IPV6
 200809L

	)

174 
	#_POSIX_RAW_SOCKETS
 200809L

	)

177 
	#_POSIX2_CHAR_TERM
 200809L

	)

180 
	#_POSIX_SPORADIC_SERVER
 -1

	)

181 
	#_POSIX_THREAD_SPORADIC_SERVER
 -1

	)

184 
	#_POSIX_TRACE
 -1

	)

185 
	#_POSIX_TRACE_EVENT_FILTER
 -1

	)

186 
	#_POSIX_TRACE_INHERIT
 -1

	)

187 
	#_POSIX_TRACE_LOG
 -1

	)

190 
	#_POSIX_TYPED_MEMORY_OBJECTS
 -1

	)

193 
	#_XOPEN_STREAMS
 -1

	)

	@/usr/include/bits/pthreadtypes.h

20 #iâdeà
_BITS_PTHREADTYPES_H


21 
	#_BITS_PTHREADTYPES_H
 1

	)

23 
	~<b™s/wÜdsize.h
>

25 #ià
__WORDSIZE
 == 64

26 
	#__SIZEOF_PTHREAD_ATTR_T
 56

	)

27 
	#__SIZEOF_PTHREAD_MUTEX_T
 40

	)

28 
	#__SIZEOF_PTHREAD_MUTEXATTR_T
 4

	)

29 
	#__SIZEOF_PTHREAD_COND_T
 48

	)

30 
	#__SIZEOF_PTHREAD_CONDATTR_T
 4

	)

31 
	#__SIZEOF_PTHREAD_RWLOCK_T
 56

	)

32 
	#__SIZEOF_PTHREAD_RWLOCKATTR_T
 8

	)

33 
	#__SIZEOF_PTHREAD_BARRIER_T
 32

	)

34 
	#__SIZEOF_PTHREAD_BARRIERATTR_T
 4

	)

36 
	#__SIZEOF_PTHREAD_ATTR_T
 36

	)

37 
	#__SIZEOF_PTHREAD_MUTEX_T
 24

	)

38 
	#__SIZEOF_PTHREAD_MUTEXATTR_T
 4

	)

39 
	#__SIZEOF_PTHREAD_COND_T
 48

	)

40 
	#__SIZEOF_PTHREAD_CONDATTR_T
 4

	)

41 
	#__SIZEOF_PTHREAD_RWLOCK_T
 32

	)

42 
	#__SIZEOF_PTHREAD_RWLOCKATTR_T
 8

	)

43 
	#__SIZEOF_PTHREAD_BARRIER_T
 20

	)

44 
	#__SIZEOF_PTHREAD_BARRIERATTR_T
 4

	)

50 
	t±h»ad_t
;

55 
	m__size
[
__SIZEOF_PTHREAD_ATTR_T
];

56 
	m__®ign
;

57 } 
	t±h»ad_©Œ_t
;

60 #ià
__WORDSIZE
 == 64

61 
	s__±h»ad_š‹º®_li¡


63 
__±h»ad_š‹º®_li¡
 *
	m__´ev
;

64 
__±h»ad_š‹º®_li¡
 *
	m__Ãxt
;

65 } 
	t__±h»ad_li¡_t
;

67 
	s__±h»ad_š‹º®_¦i¡


69 
__±h»ad_š‹º®_¦i¡
 *
	m__Ãxt
;

70 } 
	t__±h»ad_¦i¡_t
;

78 
	s__±h»ad_mu‹x_s


80 
	m__lock
;

81 
	m__couÁ
;

82 
	m__owÃr
;

83 #ià
__WORDSIZE
 == 64

84 
	m__nu£rs
;

88 
	m__kšd
;

89 #ià
__WORDSIZE
 == 64

90 
	m__¥šs
;

91 
__±h»ad_li¡_t
 
	m__li¡
;

92 
	#__PTHREAD_MUTEX_HAVE_PREV
 1

	)

94 
	m__nu£rs
;

95 
__ex‹nsiÚ__
 union

97 
	m__¥šs
;

98 
__±h»ad_¦i¡_t
 
	m__li¡
;

101 } 
	m__d©a
;

102 
	m__size
[
__SIZEOF_PTHREAD_MUTEX_T
];

103 
	m__®ign
;

104 } 
	t±h»ad_mu‹x_t
;

108 
	m__size
[
__SIZEOF_PTHREAD_MUTEXATTR_T
];

109 
	m__®ign
;

110 } 
	t±h»ad_mu‹x©Œ_t
;

119 
	m__lock
;

120 
	m__fu‹x
;

121 
__ex‹nsiÚ__
 
	m__tÙ®_£q
;

122 
__ex‹nsiÚ__
 
	m__wakeup_£q
;

123 
__ex‹nsiÚ__
 
	m__wok’_£q
;

124 *
	m__mu‹x
;

125 
	m__nwa™”s
;

126 
	m__brßdÿ¡_£q
;

127 } 
	m__d©a
;

128 
	m__size
[
__SIZEOF_PTHREAD_COND_T
];

129 
__ex‹nsiÚ__
 
	m__®ign
;

130 } 
	t±h»ad_cÚd_t
;

134 
	m__size
[
__SIZEOF_PTHREAD_CONDATTR_T
];

135 
	m__®ign
;

136 } 
	t±h»ad_cÚd©Œ_t
;

140 
	t±h»ad_key_t
;

144 
	t±h»ad_Úû_t
;

147 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


152 #ià
__WORDSIZE
 == 64

155 
	m__lock
;

156 
	m__Ä_»ad”s
;

157 
	m__»ad”s_wakeup
;

158 
	m__wr™”_wakeup
;

159 
	m__Ä_»ad”s_queued
;

160 
	m__Ä_wr™”s_queued
;

161 
	m__wr™”
;

162 
	m__sh¬ed
;

163 
	m__·d1
;

164 
	m__·d2
;

167 
	m__æags
;

168 } 
	m__d©a
;

172 
	m__lock
;

173 
	m__Ä_»ad”s
;

174 
	m__»ad”s_wakeup
;

175 
	m__wr™”_wakeup
;

176 
	m__Ä_»ad”s_queued
;

177 
	m__Ä_wr™”s_queued
;

180 
	m__æags
;

181 
	m__sh¬ed
;

182 
	m__·d1
;

183 
	m__·d2
;

184 
	m__wr™”
;

185 } 
	m__d©a
;

187 
	m__size
[
__SIZEOF_PTHREAD_RWLOCK_T
];

188 
	m__®ign
;

189 } 
	t±h»ad_rwlock_t
;

193 
	m__size
[
__SIZEOF_PTHREAD_RWLOCKATTR_T
];

194 
	m__®ign
;

195 } 
	t±h»ad_rwlock©Œ_t
;

199 #ifdeà
__USE_XOPEN2K


201 vŞ©
	t±h»ad_¥šlock_t
;

208 
	m__size
[
__SIZEOF_PTHREAD_BARRIER_T
];

209 
	m__®ign
;

210 } 
	t±h»ad_b¬r›r_t
;

214 
	m__size
[
__SIZEOF_PTHREAD_BARRIERATTR_T
];

215 
	m__®ign
;

216 } 
	t±h»ad_b¬r›¿‰r_t
;

220 #ià
__WORDSIZE
 == 32

222 
	#__ş—nup_fù_©Œibu‹
 
	`__©Œibu‹__
 ((
	`__»g·rm__
 (1)))

	)

	@/usr/include/bits/shm.h

20 #iâdeà
_SYS_SHM_H


24 
	~<b™s/ty³s.h
>

27 
	#SHM_R
 0400

	)

28 
	#SHM_W
 0200

	)

31 
	#SHM_RDONLY
 010000

	)

32 
	#SHM_RND
 020000

	)

33 
	#SHM_REMAP
 040000

	)

34 
	#SHM_EXEC
 0100000

	)

37 
	#SHM_LOCK
 11

	)

38 
	#SHM_UNLOCK
 12

	)

40 
	g__BEGIN_DECLS


43 
	#SHMLBA
 (
	`__g‘·gesize
 ())

	)

44 
	$__g‘·gesize
 (è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

48 
	tshm©t_t
;

51 
	sshmid_ds


53 
c_³rm
 
shm_³rm
;

54 
size_t
 
shm_£gsz
;

55 
__time_t
 
shm_©ime
;

56 #ià
__WORDSIZE
 == 32

57 
__unu£d1
;

59 
__time_t
 
shm_dtime
;

60 #ià
__WORDSIZE
 == 32

61 
__unu£d2
;

63 
__time_t
 
shm_ùime
;

64 #ià
__WORDSIZE
 == 32

65 
__unu£d3
;

67 
__pid_t
 
shm_ıid
;

68 
__pid_t
 
shm_Íid
;

69 
shm©t_t
 
shm_Ç‰ch
;

70 
__unu£d4
;

71 
__unu£d5
;

74 #ifdeà
__USE_MISC


77 
	#SHM_STAT
 13

	)

78 
	#SHM_INFO
 14

	)

81 
	#SHM_DEST
 01000

	)

82 
	#SHM_LOCKED
 02000

	)

83 
	#SHM_HUGETLB
 04000

	)

84 
	#SHM_NORESERVE
 010000

	)

86 
	sshmšfo


88 
shmmax
;

89 
shmmš
;

90 
shmmni
;

91 
shm£g
;

92 
shm®l
;

93 
__unu£d1
;

94 
__unu£d2
;

95 
__unu£d3
;

96 
__unu£d4
;

99 
	sshm_šfo


101 
u£d_ids
;

102 
shm_tÙ
;

103 
shm_rss
;

104 
shm_swp
;

105 
sw­_©‹m±s
;

106 
sw­_sucûs£s
;

111 
__END_DECLS


	@/usr/include/bits/sigaction.h

20 #iâdeà
_SIGNAL_H


25 
	ssigaùiÚ


28 #ifdeà
__USE_POSIX199309


32 
__sighªdËr_t
 
	m§_hªdËr
;

34 (*
	m§_sigaùiÚ
è(, 
	msigšfo_t
 *, *);

36 
	m__sigaùiÚ_hªdËr
;

37 
	#§_hªdËr
 
__sigaùiÚ_hªdËr
.
§_hªdËr


	)

38 
	#§_sigaùiÚ
 
__sigaùiÚ_hªdËr
.
§_sigaùiÚ


	)

40 
__sighªdËr_t
 
	m§_hªdËr
;

44 
__sig£t_t
 
	m§_mask
;

47 
	m§_æags
;

50 (*
	m§_»¡Ü”
) ();

54 
	#SA_NOCLDSTOP
 1

	)

55 
	#SA_NOCLDWAIT
 2

	)

56 
	#SA_SIGINFO
 4

	)

58 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_MISC


59 
	#SA_ONSTACK
 0x08000000

	)

61 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_MISC
 || defšed 
__USE_XOPEN2K8


62 
	#SA_RESTART
 0x10000000

	)

63 
	#SA_NODEFER
 0x40000000

	)

65 
	#SA_RESETHAND
 0x80000000

	)

67 #ifdeà
__USE_MISC


68 
	#SA_INTERRUPT
 0x20000000

	)

71 
	#SA_NOMASK
 
SA_NODEFER


	)

72 
	#SA_ONESHOT
 
SA_RESETHAND


	)

73 
	#SA_STACK
 
SA_ONSTACK


	)

77 
	#SIG_BLOCK
 0

	)

78 
	#SIG_UNBLOCK
 1

	)

79 
	#SIG_SETMASK
 2

	)

	@/usr/include/bits/sigcontext.h

19 #iâdeà
_BITS_SIGCONTEXT_H


20 
	#_BITS_SIGCONTEXT_H
 1

	)

22 #ià!
defšed
 
_SIGNAL_H
 && !defšed 
_SYS_UCONTEXT_H


26 
	~<b™s/wÜdsize.h
>

28 
	s_å»g


30 
	msignifiÿnd
[4];

31 
	mexpÚ’t
;

34 
	s_åx»g


36 
	msignifiÿnd
[4];

37 
	mexpÚ’t
;

38 
	m·ddšg
[3];

41 
	s_xmm»g


43 
__ušt32_t
 
	m–em’t
[4];

48 #ià
__WORDSIZE
 == 32

50 
	s_å¡©e


53 
__ušt32_t
 
	mcw
;

54 
__ušt32_t
 
	msw
;

55 
__ušt32_t
 
	mg
;

56 
__ušt32_t
 
	moff
;

57 
__ušt32_t
 
	mcs£l
;

58 
__ušt32_t
 
	md©aoff
;

59 
__ušt32_t
 
	md©a£l
;

60 
_å»g
 
	m_¡
[8];

61 
	m¡©us
;

62 
	mmagic
;

65 
__ušt32_t
 
	m_fx¤_’v
[6];

66 
__ušt32_t
 
	mmxc¤
;

67 
__ušt32_t
 
	m»£rved
;

68 
_åx»g
 
	m_fx¤_¡
[8];

69 
_xmm»g
 
	m_xmm
[8];

70 
__ušt32_t
 
	m·ddšg
[56];

73 #iâdeà
sigcÚ‹xt_¡ruù


78 
	#sigcÚ‹xt_¡ruù
 
sigcÚ‹xt


	)

81 
	ssigcÚ‹xt


83 
	mgs
, 
	m__gsh
;

84 
	mfs
, 
	m__fsh
;

85 
	mes
, 
	m__esh
;

86 
	mds
, 
	m__dsh
;

87 
	medi
;

88 
	mesi
;

89 
	mebp
;

90 
	me¥
;

91 
	mebx
;

92 
	medx
;

93 
	mecx
;

94 
	m—x
;

95 
	mŒ­no
;

96 
	m”r
;

97 
	me
;

98 
	mcs
, 
	m__csh
;

99 
	meæags
;

100 
	me¥_©_sigÇl
;

101 
	mss
, 
	m__ssh
;

102 
_å¡©e
 * 
	må¡©e
;

103 
	mŞdmask
;

104 
	mü2
;

109 
	s_å¡©e


112 
__ušt16_t
 
	mcwd
;

113 
__ušt16_t
 
	mswd
;

114 
__ušt16_t
 
	máw
;

115 
__ušt16_t
 
	mfİ
;

116 
__ušt64_t
 
	mr
;

117 
__ušt64_t
 
	mrdp
;

118 
__ušt32_t
 
	mmxc¤
;

119 
__ušt32_t
 
	mmxü_mask
;

120 
_åx»g
 
	m_¡
[8];

121 
_xmm»g
 
	m_xmm
[16];

122 
__ušt32_t
 
	m·ddšg
[24];

125 
	ssigcÚ‹xt


127 
	mr8
;

128 
	mr9
;

129 
	mr10
;

130 
	mr11
;

131 
	mr12
;

132 
	mr13
;

133 
	mr14
;

134 
	mr15
;

135 
	mrdi
;

136 
	mrsi
;

137 
	mrbp
;

138 
	mrbx
;

139 
	mrdx
;

140 
	m¿x
;

141 
	mrcx
;

142 
	mr¥
;

143 
	mr
;

144 
	meæags
;

145 
	mcs
;

146 
	mgs
;

147 
	mfs
;

148 
	m__·d0
;

149 
	m”r
;

150 
	mŒ­no
;

151 
	mŞdmask
;

152 
	mü2
;

153 
_å¡©e
 * 
	må¡©e
;

154 
	m__»£rved1
 [8];

	@/usr/include/bits/siginfo.h

20 #ià!
defšed
 
_SIGNAL_H
 && !defšed 
__Ãed_sigšfo_t
 \

21 && !
defšed
 
	g__Ãed_sigev’t_t


25 
	~<b™s/wÜdsize.h
>

27 #ià(!
defšed
 
__have_sigv®_t
 \

28 && (
defšed
 
	g_SIGNAL_H
 || defšed 
	g__Ãed_sigšfo_t
 \

29 || 
defšed
 
	g__Ãed_sigev’t_t
))

30 
	#__have_sigv®_t
 1

	)

33 
	usigv®


35 
	msiv®_št
;

36 *
	msiv®_±r
;

37 } 
	tsigv®_t
;

40 #ià(!
defšed
 
__have_sigšfo_t
 \

41 && (
defšed
 
	g_SIGNAL_H
 || defšed 
	g__Ãed_sigšfo_t
))

42 
	#__have_sigšfo_t
 1

	)

44 
	#__SI_MAX_SIZE
 128

	)

45 #ià
__WORDSIZE
 == 64

46 
	#__SI_PAD_SIZE
 ((
__SI_MAX_SIZE
 /  ()è- 4)

	)

48 
	#__SI_PAD_SIZE
 ((
__SI_MAX_SIZE
 /  ()è- 3)

	)

51 
	ssigšfo


53 
	msi_signo
;

54 
	msi_”ºo
;

56 
	msi_code
;

60 
	m_·d
[
__SI_PAD_SIZE
];

65 
__pid_t
 
	msi_pid
;

66 
__uid_t
 
	msi_uid
;

67 } 
	m_kl
;

72 
	msi_tid
;

73 
	msi_ov”run
;

74 
sigv®_t
 
	msi_sigv®
;

75 } 
	m_tim”
;

80 
__pid_t
 
	msi_pid
;

81 
__uid_t
 
	msi_uid
;

82 
sigv®_t
 
	msi_sigv®
;

83 } 
	m_¹
;

88 
__pid_t
 
	msi_pid
;

89 
__uid_t
 
	msi_uid
;

90 
	msi_¡©us
;

91 
__şock_t
 
	msi_utime
;

92 
__şock_t
 
	msi_¡ime
;

93 } 
	m_sigchld
;

98 *
	msi_addr
;

99 } 
	m_sigçuÉ
;

104 
	msi_bªd
;

105 
	msi_fd
;

106 } 
	m_sigpŞl
;

107 } 
	m_sif›lds
;

108 } 
	tsigšfo_t
;

112 
	#si_pid
 
_sif›lds
.
_kl
.
si_pid


	)

113 
	#si_uid
 
_sif›lds
.
_kl
.
si_uid


	)

114 
	#si_tim”id
 
_sif›lds
.
_tim”
.
si_tid


	)

115 
	#si_ov”run
 
_sif›lds
.
_tim”
.
si_ov”run


	)

116 
	#si_¡©us
 
_sif›lds
.
_sigchld
.
si_¡©us


	)

117 
	#si_utime
 
_sif›lds
.
_sigchld
.
si_utime


	)

118 
	#si_¡ime
 
_sif›lds
.
_sigchld
.
si_¡ime


	)

119 
	#si_v®ue
 
_sif›lds
.
_¹
.
si_sigv®


	)

120 
	#si_št
 
_sif›lds
.
_¹
.
si_sigv®
.
siv®_št


	)

121 
	#si_±r
 
_sif›lds
.
_¹
.
si_sigv®
.
siv®_±r


	)

122 
	#si_addr
 
_sif›lds
.
_sigçuÉ
.
si_addr


	)

123 
	#si_bªd
 
_sif›lds
.
_sigpŞl
.
si_bªd


	)

124 
	#si_fd
 
_sif›lds
.
_sigpŞl
.
si_fd


	)

131 
	mSI_ASYNCNL
 = -60,

132 
	#SI_ASYNCNL
 
SI_ASYNCNL


	)

133 
	mSI_TKILL
 = -6,

134 
	#SI_TKILL
 
SI_TKILL


	)

135 
	mSI_SIGIO
,

136 
	#SI_SIGIO
 
SI_SIGIO


	)

137 
	mSI_ASYNCIO
,

138 
	#SI_ASYNCIO
 
SI_ASYNCIO


	)

139 
	mSI_MESGQ
,

140 
	#SI_MESGQ
 
SI_MESGQ


	)

141 
	mSI_TIMER
,

142 
	#SI_TIMER
 
SI_TIMER


	)

143 
	mSI_QUEUE
,

144 
	#SI_QUEUE
 
SI_QUEUE


	)

145 
	mSI_USER
,

146 
	#SI_USER
 
SI_USER


	)

147 
	mSI_KERNEL
 = 0x80

148 
	#SI_KERNEL
 
SI_KERNEL


	)

155 
	mILL_ILLOPC
 = 1,

156 
	#ILL_ILLOPC
 
ILL_ILLOPC


	)

157 
	mILL_ILLOPN
,

158 
	#ILL_ILLOPN
 
ILL_ILLOPN


	)

159 
	mILL_ILLADR
,

160 
	#ILL_ILLADR
 
ILL_ILLADR


	)

161 
	mILL_ILLTRP
,

162 
	#ILL_ILLTRP
 
ILL_ILLTRP


	)

163 
	mILL_PRVOPC
,

164 
	#ILL_PRVOPC
 
ILL_PRVOPC


	)

165 
	mILL_PRVREG
,

166 
	#ILL_PRVREG
 
ILL_PRVREG


	)

167 
	mILL_COPROC
,

168 
	#ILL_COPROC
 
ILL_COPROC


	)

169 
	mILL_BADSTK


170 
	#ILL_BADSTK
 
ILL_BADSTK


	)

176 
	mFPE_INTDIV
 = 1,

177 
	#FPE_INTDIV
 
FPE_INTDIV


	)

178 
	mFPE_INTOVF
,

179 
	#FPE_INTOVF
 
FPE_INTOVF


	)

180 
	mFPE_FLTDIV
,

181 
	#FPE_FLTDIV
 
FPE_FLTDIV


	)

182 
	mFPE_FLTOVF
,

183 
	#FPE_FLTOVF
 
FPE_FLTOVF


	)

184 
	mFPE_FLTUND
,

185 
	#FPE_FLTUND
 
FPE_FLTUND


	)

186 
	mFPE_FLTRES
,

187 
	#FPE_FLTRES
 
FPE_FLTRES


	)

188 
	mFPE_FLTINV
,

189 
	#FPE_FLTINV
 
FPE_FLTINV


	)

190 
	mFPE_FLTSUB


191 
	#FPE_FLTSUB
 
FPE_FLTSUB


	)

197 
	mSEGV_MAPERR
 = 1,

198 
	#SEGV_MAPERR
 
SEGV_MAPERR


	)

199 
	mSEGV_ACCERR


200 
	#SEGV_ACCERR
 
SEGV_ACCERR


	)

206 
	mBUS_ADRALN
 = 1,

207 
	#BUS_ADRALN
 
BUS_ADRALN


	)

208 
	mBUS_ADRERR
,

209 
	#BUS_ADRERR
 
BUS_ADRERR


	)

210 
	mBUS_OBJERR


211 
	#BUS_OBJERR
 
BUS_OBJERR


	)

217 
	mTRAP_BRKPT
 = 1,

218 
	#TRAP_BRKPT
 
TRAP_BRKPT


	)

219 
	mTRAP_TRACE


220 
	#TRAP_TRACE
 
TRAP_TRACE


	)

226 
	mCLD_EXITED
 = 1,

227 
	#CLD_EXITED
 
CLD_EXITED


	)

228 
	mCLD_KILLED
,

229 
	#CLD_KILLED
 
CLD_KILLED


	)

230 
	mCLD_DUMPED
,

231 
	#CLD_DUMPED
 
CLD_DUMPED


	)

232 
	mCLD_TRAPPED
,

233 
	#CLD_TRAPPED
 
CLD_TRAPPED


	)

234 
	mCLD_STOPPED
,

235 
	#CLD_STOPPED
 
CLD_STOPPED


	)

236 
	mCLD_CONTINUED


237 
	#CLD_CONTINUED
 
CLD_CONTINUED


	)

243 
	mPOLL_IN
 = 1,

244 
	#POLL_IN
 
POLL_IN


	)

245 
	mPOLL_OUT
,

246 
	#POLL_OUT
 
POLL_OUT


	)

247 
	mPOLL_MSG
,

248 
	#POLL_MSG
 
POLL_MSG


	)

249 
	mPOLL_ERR
,

250 
	#POLL_ERR
 
POLL_ERR


	)

251 
	mPOLL_PRI
,

252 
	#POLL_PRI
 
POLL_PRI


	)

253 
	mPOLL_HUP


254 
	#POLL_HUP
 
POLL_HUP


	)

257 #undeà
__Ãed_sigšfo_t


261 #ià(
defšed
 
_SIGNAL_H
 || defšed 
__Ãed_sigev’t_t
) \

262 && !
defšed
 
	g__have_sigev’t_t


263 
	#__have_sigev’t_t
 1

	)

266 
	#__SIGEV_MAX_SIZE
 64

	)

267 #ià
__WORDSIZE
 == 64

268 
	#__SIGEV_PAD_SIZE
 ((
__SIGEV_MAX_SIZE
 /  ()è- 4)

	)

270 
	#__SIGEV_PAD_SIZE
 ((
__SIGEV_MAX_SIZE
 /  ()è- 3)

	)

273 
	ssigev’t


275 
sigv®_t
 
	msigev_v®ue
;

276 
	msigev_signo
;

277 
	msigev_nÙify
;

281 
	m_·d
[
__SIGEV_PAD_SIZE
];

285 
__pid_t
 
	m_tid
;

289 (*
	m_funùiÚ
è(
	msigv®_t
);

290 *
	m_©Œibu‹
;

291 } 
	m_sigev_th»ad
;

292 } 
	m_sigev_un
;

293 } 
	tsigev’t_t
;

296 
	#sigev_nÙify_funùiÚ
 
_sigev_un
.
_sigev_th»ad
.
_funùiÚ


	)

297 
	#sigev_nÙify_©Œibu‹s
 
_sigev_un
.
_sigev_th»ad
.
_©Œibu‹


	)

302 
	mSIGEV_SIGNAL
 = 0,

303 
	#SIGEV_SIGNAL
 
SIGEV_SIGNAL


	)

304 
	mSIGEV_NONE
,

305 
	#SIGEV_NONE
 
SIGEV_NONE


	)

306 
	mSIGEV_THREAD
,

307 
	#SIGEV_THREAD
 
SIGEV_THREAD


	)

309 
	mSIGEV_THREAD_ID
 = 4

310 
	#SIGEV_THREAD_ID
 
SIGEV_THREAD_ID


	)

	@/usr/include/bits/signum.h

20 #ifdef 
_SIGNAL_H


23 
	#SIG_ERR
 ((
__sighªdËr_t
è-1è

	)

24 
	#SIG_DFL
 ((
__sighªdËr_t
è0è

	)

25 
	#SIG_IGN
 ((
__sighªdËr_t
è1è

	)

27 #ifdeà
__USE_UNIX98


28 
	#SIG_HOLD
 ((
__sighªdËr_t
è2è

	)

33 
	#SIGHUP
 1

	)

34 
	#SIGINT
 2

	)

35 
	#SIGQUIT
 3

	)

36 
	#SIGILL
 4

	)

37 
	#SIGTRAP
 5

	)

38 
	#SIGABRT
 6

	)

39 
	#SIGIOT
 6

	)

40 
	#SIGBUS
 7

	)

41 
	#SIGFPE
 8

	)

42 
	#SIGKILL
 9

	)

43 
	#SIGUSR1
 10

	)

44 
	#SIGSEGV
 11

	)

45 
	#SIGUSR2
 12

	)

46 
	#SIGPIPE
 13

	)

47 
	#SIGALRM
 14

	)

48 
	#SIGTERM
 15

	)

49 
	#SIGSTKFLT
 16

	)

50 
	#SIGCLD
 
SIGCHLD


	)

51 
	#SIGCHLD
 17

	)

52 
	#SIGCONT
 18

	)

53 
	#SIGSTOP
 19

	)

54 
	#SIGTSTP
 20

	)

55 
	#SIGTTIN
 21

	)

56 
	#SIGTTOU
 22

	)

57 
	#SIGURG
 23

	)

58 
	#SIGXCPU
 24

	)

59 
	#SIGXFSZ
 25

	)

60 
	#SIGVTALRM
 26

	)

61 
	#SIGPROF
 27

	)

62 
	#SIGWINCH
 28

	)

63 
	#SIGPOLL
 
SIGIO


	)

64 
	#SIGIO
 29

	)

65 
	#SIGPWR
 30

	)

66 
	#SIGSYS
 31

	)

67 
	#SIGUNUSED
 31

	)

69 
	#_NSIG
 65

	)

72 
	#SIGRTMIN
 (
	`__libc_cu¼’t_sig¹mš
 ())

	)

73 
	#SIGRTMAX
 (
	`__libc_cu¼’t_sig¹max
 ())

	)

77 
	#__SIGRTMIN
 32

	)

78 
	#__SIGRTMAX
 (
_NSIG
 - 1)

	)

	@/usr/include/bits/sigset.h

21 #iâdef 
_SIGSET_H_ty³s


22 
	#_SIGSET_H_ty³s
 1

	)

24 
	t__sig_©omic_t
;

28 
	#_SIGSET_NWORDS
 (1024 / (8 *  ()))

	)

31 
	m__v®
[
_SIGSET_NWORDS
];

32 } 
	t__sig£t_t
;

43 #ià!
defšed
 
_SIGSET_H_âs
 && defšed 
_SIGNAL_H


44 
	#_SIGSET_H_âs
 1

	)

46 #iâdeà
_EXTERN_INLINE


47 
	#_EXTERN_INLINE
 
__ex‹º_šlše


	)

51 
	#__sigmask
(
sig
) \

52 (((è1è<< (((
sig
è- 1è% (8 *  ())))

	)

55 
	#__sigwÜd
(
sig
è(((sigè- 1è/ (8 *  ()))

	)

57 #ià
defšed
 
__GNUC__
 && __GNUC__ >= 2

58 
	#__sigem±y£t
(
£t
) \

59 (
	`__ex‹nsiÚ__
 ({ 
__út
 = 
_SIGSET_NWORDS
; \

60 
sig£t_t
 *
__£t
 = (
£t
); \

61 --
__út
 >ğ0è
__£t
->
__v®
[__cnt] = 0; \

62 0; }))

	)

63 
	#__sigfl£t
(
£t
) \

64 (
	`__ex‹nsiÚ__
 ({ 
__út
 = 
_SIGSET_NWORDS
; \

65 
sig£t_t
 *
__£t
 = (
£t
); \

66 --
__út
 >ğ0è
__£t
->
__v®
[__cnt] = ~0UL; \

67 0; }))

	)

69 #ifdeà
__USE_GNU


73 
	#__sigi£m±y£t
(
£t
) \

74 (
	`__ex‹nsiÚ__
 ({ 
__út
 = 
_SIGSET_NWORDS
; \

75 cÚ¡ 
sig£t_t
 *
__£t
 = (
£t
); \

76 
__»t
 = 
__£t
->
__v®
[--
__út
]; \

77 !
__»t
 && --
__út
 >= 0) \

78 
__»t
 = 
__£t
->
__v®
[
__út
]; \

79 
__»t
 =ğ0; }))

	)

80 
	#__sigªd£t
(
de¡
, 
Ëá
, 
right
) \

81 (
	`__ex‹nsiÚ__
 ({ 
__út
 = 
_SIGSET_NWORDS
; \

82 
sig£t_t
 *
__de¡
 = (
de¡
); \

83 cÚ¡ 
sig£t_t
 *
__Ëá
 = (
Ëá
); \

84 cÚ¡ 
sig£t_t
 *
__right
 = (
right
); \

85 --
__út
 >= 0) \

86 
__de¡
->
__v®
[
__út
] = (
__Ëá
->__val[__cnt] \

87 & 
__right
->
__v®
[
__út
]); \

88 0; }))

	)

89 
	#__sigÜ£t
(
de¡
, 
Ëá
, 
right
) \

90 (
	`__ex‹nsiÚ__
 ({ 
__út
 = 
_SIGSET_NWORDS
; \

91 
sig£t_t
 *
__de¡
 = (
de¡
); \

92 cÚ¡ 
sig£t_t
 *
__Ëá
 = (
Ëá
); \

93 cÚ¡ 
sig£t_t
 *
__right
 = (
right
); \

94 --
__út
 >= 0) \

95 
__de¡
->
__v®
[
__út
] = (
__Ëá
->__val[__cnt] \

96 | 
__right
->
__v®
[
__út
]); \

97 0; }))

	)

104 
__sigismemb”
 (
__cÚ¡
 
__sig£t_t
 *, );

105 
__sigadd£t
 (
__sig£t_t
 *, );

106 
__sigd–£t
 (
__sig£t_t
 *, );

108 #ifdeà
__USE_EXTERN_INLINES


109 
	#__SIGSETFN
(
NAME
, 
BODY
, 
CONST
) \

110 
_EXTERN_INLINE
 \

111 
	`NAME
 (
CONST
 
__sig£t_t
 *
__£t
, 
__sig
) \

113 
__mask
 = 
	`__sigmask
 (
__sig
); \

114 
__wÜd
 = 
	`__sigwÜd
 (
__sig
); \

115  
BODY
; \

116 }

	)

118 
__SIGSETFN
 (
__sigismemb”
, (
__£t
->
__v®
[
__wÜd
] & 
__mask
è? 1 : 0, 
__cÚ¡
)

119 
__SIGSETFN
 (
__sigadd£t
, ((
__£t
->
__v®
[
__wÜd
] |ğ
__mask
), 0), )

120 
__SIGSETFN
 (
__sigd–£t
, ((
__£t
->
__v®
[
__wÜd
] &ğ~
__mask
), 0), )

122 #undeà
__SIGSETFN


	@/usr/include/bits/sigstack.h

20 #iâdeà
_SIGNAL_H


26 
	ssig¡ack


28 *
	mss_¥
;

29 
	mss_Ú¡ack
;

36 
	mSS_ONSTACK
 = 1,

37 
	#SS_ONSTACK
 
SS_ONSTACK


	)

38 
	mSS_DISABLE


39 
	#SS_DISABLE
 
SS_DISABLE


	)

43 
	#MINSIGSTKSZ
 2048

	)

46 
	#SIGSTKSZ
 8192

	)

50 
	ssig®t¡ack


52 *
	mss_¥
;

53 
	mss_æags
;

54 
size_t
 
	mss_size
;

55 } 
	t¡ack_t
;

	@/usr/include/bits/sigthread.h

20 #iâdeà
_BITS_SIGTHREAD_H


21 
	#_BITS_SIGTHREAD_H
 1

	)

23 #ià!
defšed
 
_SIGNAL_H
 && !defšed 
_PTHREAD_H


31 
	$±h»ad_sigmask
 (
__how
,

32 
__cÚ¡
 
__sig£t_t
 *
__»¡riù
 
__Ãwmask
,

33 
__sig£t_t
 *
__»¡riù
 
__Şdmask
)
__THROW
;

36 
	$±h»ad_kl
 (
±h»ad_t
 
__th»adid
, 
__signo
è
__THROW
;

38 #ifdeà
__USE_GNU


40 
	$±h»ad_sigqueue
 (
±h»ad_t
 
__th»adid
, 
__signo
,

41 cÚ¡ 
sigv®
 
__v®ue
è
__THROW
;

	@/usr/include/bits/stat.h

19 #ià!
defšed
 
_SYS_STAT_H
 && !defšed 
_FCNTL_H


23 #iâdeà
_BITS_STAT_H


24 
	#_BITS_STAT_H
 1

	)

27 
	#_STAT_VER_KERNEL
 0

	)

29 #ià
__WORDSIZE
 == 32

30 
	#_STAT_VER_SVR4
 2

	)

31 
	#_STAT_VER_LINUX
 3

	)

34 
	#_MKNOD_VER_LINUX
 1

	)

35 
	#_MKNOD_VER_SVR4
 2

	)

36 
	#_MKNOD_VER
 
_MKNOD_VER_LINUX


	)

38 
	#_STAT_VER_LINUX
 1

	)

41 
	#_MKNOD_VER_LINUX
 0

	)

44 
	#_STAT_VER
 
_STAT_VER_LINUX


	)

46 
	s¡©


48 
__dev_t
 
	m¡_dev
;

49 #ià
__WORDSIZE
 == 32

50 
	m__·d1
;

52 #ià
__WORDSIZE
 =ğ64 || !
defšed
 
__USE_FILE_OFFSET64


53 
__šo_t
 
	m¡_šo
;

55 
__šo_t
 
	m__¡_šo
;

57 #ià
__WORDSIZE
 == 32

58 
__mode_t
 
	m¡_mode
;

59 
__Æšk_t
 
	m¡_Æšk
;

61 
__Æšk_t
 
	m¡_Æšk
;

62 
__mode_t
 
	m¡_mode
;

64 
__uid_t
 
	m¡_uid
;

65 
__gid_t
 
	m¡_gid
;

66 #ià
__WORDSIZE
 == 64

67 
	m__·d0
;

69 
__dev_t
 
	m¡_rdev
;

70 #ià
__WORDSIZE
 == 32

71 
	m__·d2
;

73 #ià
__WORDSIZE
 =ğ64 || !
defšed
 
__USE_FILE_OFFSET64


74 
__off_t
 
	m¡_size
;

76 
__off64_t
 
	m¡_size
;

78 
__blksize_t
 
	m¡_blksize
;

79 #ià
__WORDSIZE
 =ğ64 || !
defšed
 
__USE_FILE_OFFSET64


80 
__blkút_t
 
	m¡_blocks
;

82 
__blkút64_t
 
	m¡_blocks
;

84 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN2K8


91 
time¥ec
 
	m¡_©im
;

92 
time¥ec
 
	m¡_mtim
;

93 
time¥ec
 
	m¡_ùim
;

94 
	#¡_©ime
 
¡_©im
.
tv_£c


	)

95 
	#¡_mtime
 
¡_mtim
.
tv_£c


	)

96 
	#¡_ùime
 
¡_ùim
.
tv_£c


	)

98 
__time_t
 
	m¡_©ime
;

99 
	m¡_©im’£c
;

100 
__time_t
 
	m¡_mtime
;

101 
	m¡_mtim’£c
;

102 
__time_t
 
	m¡_ùime
;

103 
	m¡_ùim’£c
;

105 #ià
__WORDSIZE
 == 64

106 
	m__unu£d
[3];

108 #iâdeà
__USE_FILE_OFFSET64


109 
	m__unu£d4
;

110 
	m__unu£d5
;

112 
__šo64_t
 
	m¡_šo
;

117 #ifdeà
__USE_LARGEFILE64


119 
	s¡©64


121 
__dev_t
 
	m¡_dev
;

122 #ià
__WORDSIZE
 == 64

123 
__šo64_t
 
	m¡_šo
;

124 
__Æšk_t
 
	m¡_Æšk
;

125 
__mode_t
 
	m¡_mode
;

127 
	m__·d1
;

128 
__šo_t
 
	m__¡_šo
;

129 
__mode_t
 
	m¡_mode
;

130 
__Æšk_t
 
	m¡_Æšk
;

132 
__uid_t
 
	m¡_uid
;

133 
__gid_t
 
	m¡_gid
;

134 #ià
__WORDSIZE
 == 64

135 
	m__·d0
;

136 
__dev_t
 
	m¡_rdev
;

137 
__off_t
 
	m¡_size
;

139 
__dev_t
 
	m¡_rdev
;

140 
	m__·d2
;

141 
__off64_t
 
	m¡_size
;

143 
__blksize_t
 
	m¡_blksize
;

144 
__blkút64_t
 
	m¡_blocks
;

145 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN2K8


152 
time¥ec
 
	m¡_©im
;

153 
time¥ec
 
	m¡_mtim
;

154 
time¥ec
 
	m¡_ùim
;

155 
	#¡_©ime
 
¡_©im
.
tv_£c


	)

156 
	#¡_mtime
 
¡_mtim
.
tv_£c


	)

157 
	#¡_ùime
 
¡_ùim
.
tv_£c


	)

159 
__time_t
 
	m¡_©ime
;

160 
	m¡_©im’£c
;

161 
__time_t
 
	m¡_mtime
;

162 
	m¡_mtim’£c
;

163 
__time_t
 
	m¡_ùime
;

164 
	m¡_ùim’£c
;

166 #ià
__WORDSIZE
 == 64

167 
	m__unu£d
[3];

169 
__šo64_t
 
	m¡_šo
;

175 
	#_STATBUF_ST_BLKSIZE


	)

176 
	#_STATBUF_ST_RDEV


	)

178 
	#_STATBUF_ST_NSEC


	)

182 
	#__S_IFMT
 0170000

	)

185 
	#__S_IFDIR
 0040000

	)

186 
	#__S_IFCHR
 0020000

	)

187 
	#__S_IFBLK
 0060000

	)

188 
	#__S_IFREG
 0100000

	)

189 
	#__S_IFIFO
 0010000

	)

190 
	#__S_IFLNK
 0120000

	)

191 
	#__S_IFSOCK
 0140000

	)

195 
	#__S_TYPEISMQ
(
buf
è((buf)->
¡_mode
 - (buf)->¡_mode)

	)

196 
	#__S_TYPEISSEM
(
buf
è((buf)->
¡_mode
 - (buf)->¡_mode)

	)

197 
	#__S_TYPEISSHM
(
buf
è((buf)->
¡_mode
 - (buf)->¡_mode)

	)

201 
	#__S_ISUID
 04000

	)

202 
	#__S_ISGID
 02000

	)

203 
	#__S_ISVTX
 01000

	)

204 
	#__S_IREAD
 0400

	)

205 
	#__S_IWRITE
 0200

	)

206 
	#__S_IEXEC
 0100

	)

208 #ifdeà
__USE_ATFILE


209 
	#UTIME_NOW
 ((1È<< 30è- 1l)

	)

210 
	#UTIME_OMIT
 ((1È<< 30è- 2l)

	)

	@/usr/include/bits/stdio-ldbl.h

20 #iâdeà
_STDIO_H


24 
__BEGIN_NAMESPACE_STD


25 
	$__LDBL_REDIR_DECL
 (
årštf
)

26 
	$__LDBL_REDIR_DECL
 (
´štf
)

27 
	$__LDBL_REDIR_DECL
 (
¥rštf
)

28 
	$__LDBL_REDIR_DECL
 (
vårštf
)

29 
	$__LDBL_REDIR_DECL
 (
v´štf
)

30 
	$__LDBL_REDIR_DECL
 (
v¥rštf
)

31 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__USE_GNU
 \

32 && !
defšed
 
__REDIRECT
 \

33 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

34 
	$__LDBL_REDIR1_DECL
 (
fsÿnf
, 
__Ædbl___isoc99_fsÿnf
)

35 
	$__LDBL_REDIR1_DECL
 (
sÿnf
, 
__Ædbl___isoc99_sÿnf
)

36 
	$__LDBL_REDIR1_DECL
 (
ssÿnf
, 
__Ædbl___isoc99_ssÿnf
)

38 
	$__LDBL_REDIR_DECL
 (
fsÿnf
)

39 
	$__LDBL_REDIR_DECL
 (
sÿnf
)

40 
	$__LDBL_REDIR_DECL
 (
ssÿnf
)

42 
__END_NAMESPACE_STD


44 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_ISOC99
 || defšed 
__USE_UNIX98


45 
__BEGIN_NAMESPACE_C99


46 
	$__LDBL_REDIR_DECL
 (
¢´štf
)

47 
	$__LDBL_REDIR_DECL
 (
v¢´štf
)

48 
__END_NAMESPACE_C99


51 #ifdef 
__USE_ISOC99


52 
__BEGIN_NAMESPACE_C99


53 #ià!
defšed
 
__USE_GNU
 && !defšed 
__REDIRECT
 \

54 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

55 
	$__LDBL_REDIR1_DECL
 (
vfsÿnf
, 
__Ædbl___isoc99_vfsÿnf
)

56 
	$__LDBL_REDIR1_DECL
 (
vsÿnf
, 
__Ædbl___isoc99_vsÿnf
)

57 
	$__LDBL_REDIR1_DECL
 (
vssÿnf
, 
__Ædbl___isoc99_vssÿnf
)

59 
	$__LDBL_REDIR_DECL
 (
vfsÿnf
)

60 
	$__LDBL_REDIR_DECL
 (
vssÿnf
)

61 
	$__LDBL_REDIR_DECL
 (
vsÿnf
)

63 
__END_NAMESPACE_C99


66 #ifdeà
__USE_GNU


67 
	$__LDBL_REDIR_DECL
 (
vd´štf
)

68 
	$__LDBL_REDIR_DECL
 (
d´štf
)

69 
	$__LDBL_REDIR_DECL
 (
va¥rštf
)

70 
	$__LDBL_REDIR_DECL
 (
__a¥rštf
)

71 
	$__LDBL_REDIR_DECL
 (
a¥rštf
)

72 
	$__LDBL_REDIR_DECL
 (
ob¡ack_´štf
)

73 
	$__LDBL_REDIR_DECL
 (
ob¡ack_v´štf
)

76 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__ex‹º_®ways_šlše


77 
	$__LDBL_REDIR_DECL
 (
__¥rštf_chk
)

78 
	$__LDBL_REDIR_DECL
 (
__v¥rštf_chk
)

79 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_ISOC99
 || defšed 
__USE_UNIX98


80 
	$__LDBL_REDIR_DECL
 (
__¢´štf_chk
)

81 
	$__LDBL_REDIR_DECL
 (
__v¢´štf_chk
)

83 #ià
__USE_FORTIFY_LEVEL
 > 1

84 
	$__LDBL_REDIR_DECL
 (
__årštf_chk
)

85 
	$__LDBL_REDIR_DECL
 (
__´štf_chk
)

86 
	$__LDBL_REDIR_DECL
 (
__vårštf_chk
)

87 
	$__LDBL_REDIR_DECL
 (
__v´štf_chk
)

88 #ifdeà
__USE_GNU


89 
	$__LDBL_REDIR_DECL
 (
__a¥rštf_chk
)

90 
	$__LDBL_REDIR_DECL
 (
__va¥rštf_chk
)

91 
	$__LDBL_REDIR_DECL
 (
__d´štf_chk
)

92 
	$__LDBL_REDIR_DECL
 (
__vd´štf_chk
)

93 
	$__LDBL_REDIR_DECL
 (
__ob¡ack_´štf_chk
)

94 
	$__LDBL_REDIR_DECL
 (
__ob¡ack_v´štf_chk
)

	@/usr/include/bits/stdio.h

20 #iâdeà
_STDIO_H


24 #iâdeà
__ex‹º_šlše


25 
	#__STDIO_INLINE
 
šlše


	)

27 
	#__STDIO_INLINE
 
__ex‹º_šlše


	)

31 #ifdeà
__USE_EXTERN_INLINES


34 #ià!(
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__ex‹º_®ways_šlše
)

36 
__STDIO_INLINE
 

37 
	$v´štf
 (
__cÚ¡
 *
__»¡riù
 
__fmt
, 
_G_va_li¡
 
__¬g
)

39  
	`vårštf
 (
¡dout
, 
__fmt
, 
__¬g
);

40 
	}
}

44 
__STDIO_INLINE
 

45 
	$g‘ch¬
 ()

47  
	`_IO_g‘c
 (
¡dš
);

48 
	}
}

51 #ifdeà
__USE_MISC


53 
__STDIO_INLINE
 

54 
	$fg‘c_uÆocked
 (
FILE
 *
__å
)

56  
	`_IO_g‘c_uÆocked
 (
__å
);

57 
	}
}

61 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


63 
__STDIO_INLINE
 

64 
	$g‘c_uÆocked
 (
FILE
 *
__å
)

66  
	`_IO_g‘c_uÆocked
 (
__å
);

67 
	}
}

70 
__STDIO_INLINE
 

71 
	$g‘ch¬_uÆocked
 ()

73  
	`_IO_g‘c_uÆocked
 (
¡dš
);

74 
	}
}

79 
__STDIO_INLINE
 

80 
	$putch¬
 (
__c
)

82  
	`_IO_putc
 (
__c
, 
¡dout
);

83 
	}
}

86 #ifdeà
__USE_MISC


88 
__STDIO_INLINE
 

89 
	$åutc_uÆocked
 (
__c
, 
FILE
 *
__¡»am
)

91  
	`_IO_putc_uÆocked
 (
__c
, 
__¡»am
);

92 
	}
}

96 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


98 
__STDIO_INLINE
 

99 
	$putc_uÆocked
 (
__c
, 
FILE
 *
__¡»am
)

101  
	`_IO_putc_uÆocked
 (
__c
, 
__¡»am
);

102 
	}
}

105 
__STDIO_INLINE
 

106 
	$putch¬_uÆocked
 (
__c
)

108  
	`_IO_putc_uÆocked
 (
__c
, 
¡dout
);

109 
	}
}

113 #ifdef 
__USE_GNU


115 
__STDIO_INLINE
 
_IO_ssize_t


116 
	$g‘lše
 (**
__lš•Œ
, 
size_t
 *
__n
, 
FILE
 *
__¡»am
)

118  
	`__g‘d–im
 (
__lš•Œ
, 
__n
, '\n', 
__¡»am
);

119 
	}
}

123 #ifdeà
__USE_MISC


125 
__STDIO_INLINE
 

126 
__NTH
 (
	$ãof_uÆocked
 (
FILE
 *
__¡»am
))

128  
	`_IO_ãof_uÆocked
 (
__¡»am
);

129 
	}
}

132 
__STDIO_INLINE
 

133 
__NTH
 (
	$ã¼Ü_uÆocked
 (
FILE
 *
__¡»am
))

135  
	`_IO_ã¼Ü_uÆocked
 (
__¡»am
);

136 
	}
}

142 #ià
defšed
 
__USE_MISC
 && defšed 
__GNUC__
 && defšed 
__OPTIMIZE__
 \

143 && !
defšed
 
	g__ılu¥lus


145 
	#ä—d_uÆocked
(
±r
, 
size
, 
n
, 
¡»am
) \

146 (
	`__ex‹nsiÚ__
 ((
	`__butš_cÚ¡ªt_p
 (
size
è&& __butš_cÚ¡ªt_°(
n
) \

147 && (
size_t
è(
size
è* (size_tè(
n
) <= 8 \

148 && (
size_t
è(
size
) != 0) \

149 ? ({ *
__±r
 = (*è(
±r
); \

150 
FILE
 *
__¡»am
 = (
¡»am
); \

151 
size_t
 
__út
; \

152 
__út
 = (
size_t
è(
size
è* (size_tè(
n
); \

153 
__út
 > 0; --__cnt) \

155 
__c
 = 
	`_IO_g‘c_uÆocked
 (
__¡»am
); \

156 ià(
__c
 =ğ
EOF
) \

158 *
__±r
++ = 
__c
; \

160 ((
size_t
è(
size
è* (size_tè(
n
è- 
__út
) \

161 / (
size_t
è(
size
); }) \

162 : (((
	`__butš_cÚ¡ªt_p
 (
size
è&& (
size_t
) (size) == 0) \

163 || (
	`__butš_cÚ¡ªt_p
 (
n
è&& (
size_t
) (n) == 0)) \

165 ? ((è(
±r
), (è(
¡»am
), (è(
size
), \

166 (è(
n
), (
size_t
) 0) \

167 : 
	`ä—d_uÆocked
 (
±r
, 
size
, 
n
, 
¡»am
))))

	)

169 
	#fwr™e_uÆocked
(
±r
, 
size
, 
n
, 
¡»am
) \

170 (
	`__ex‹nsiÚ__
 ((
	`__butš_cÚ¡ªt_p
 (
size
è&& __butš_cÚ¡ªt_°(
n
) \

171 && (
size_t
è(
size
è* (size_tè(
n
) <= 8 \

172 && (
size_t
è(
size
) != 0) \

173 ? ({ cÚ¡ *
__±r
 = (cÚ¡ *è(
±r
); \

174 
FILE
 *
__¡»am
 = (
¡»am
); \

175 
size_t
 
__út
; \

176 
__út
 = (
size_t
è(
size
è* (size_tè(
n
); \

177 
__út
 > 0; --__cnt) \

178 ià(
	`_IO_putc_uÆocked
 (*
__±r
++, 
__¡»am
è=ğ
EOF
) \

180 ((
size_t
è(
size
è* (size_tè(
n
è- 
__út
) \

181 / (
size_t
è(
size
); }) \

182 : (((
	`__butš_cÚ¡ªt_p
 (
size
è&& (
size_t
) (size) == 0) \

183 || (
	`__butš_cÚ¡ªt_p
 (
n
è&& (
size_t
) (n) == 0)) \

185 ? ((è(
±r
), (è(
¡»am
), (è(
size
), \

186 (è(
n
), (
size_t
) 0) \

187 : 
	`fwr™e_uÆocked
 (
±r
, 
size
, 
n
, 
¡»am
))))

	)

191 #undeà
__STDIO_INLINE


	@/usr/include/bits/stdio2.h

20 #iâdeà
_STDIO_H


24 
	$__¥rštf_chk
 (*
__»¡riù
 
__s
, 
__æag
, 
size_t
 
__¦’
,

25 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...è
__THROW
;

26 
	$__v¥rštf_chk
 (*
__»¡riù
 
__s
, 
__æag
, 
size_t
 
__¦’
,

27 
__cÚ¡
 *
__»¡riù
 
__fÜm©
,

28 
_G_va_li¡
 
__­
è
__THROW
;

30 #ifdeà
__va_¬g_·ck


31 
__ex‹º_®ways_šlše
 

32 
	`__NTH
 (
	$¥rštf
 (*
__»¡riù
 
__s
, 
__cÚ¡
 *__»¡riù 
__fmt
, ...))

34  
	`__butš___¥rštf_chk
 (
__s
, 
__USE_FORTIFY_LEVEL
 - 1,

35 
	`__bos
 (
__s
), 
__fmt
, 
	`__va_¬g_·ck
 ());

36 
	}
}

37 #–ià!
defšed
 
__ılu¥lus


38 
	#¥rštf
(
¡r
, ...) \

39 
	`__butš___¥rštf_chk
 (
¡r
, 
__USE_FORTIFY_LEVEL
 - 1, 
	`__bos
 (str), \

40 
__VA_ARGS__
)

	)

43 
__ex‹º_®ways_šlše
 

44 
__NTH
 (
	$v¥rštf
 (*
__»¡riù
 
__s
, 
__cÚ¡
 *__»¡riù 
__fmt
,

45 
_G_va_li¡
 
__­
))

47  
	`__butš___v¥rštf_chk
 (
__s
, 
__USE_FORTIFY_LEVEL
 - 1,

48 
	`__bos
 (
__s
), 
__fmt
, 
__­
);

49 
	}
}

51 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_ISOC99
 || defšed 
__USE_UNIX98


53 
	$__¢´štf_chk
 (*
__»¡riù
 
__s
, 
size_t
 
__n
, 
__æag
,

54 
size_t
 
__¦’
, 
__cÚ¡
 *
__»¡riù
 
__fÜm©
,

55 ...è
__THROW
;

56 
	$__v¢´štf_chk
 (*
__»¡riù
 
__s
, 
size_t
 
__n
, 
__æag
,

57 
size_t
 
__¦’
, 
__cÚ¡
 *
__»¡riù
 
__fÜm©
,

58 
_G_va_li¡
 
__­
è
__THROW
;

60 #ifdeà
__va_¬g_·ck


61 
__ex‹º_®ways_šlše
 

62 
	`__NTH
 (
	$¢´štf
 (*
__»¡riù
 
__s
, 
size_t
 
__n
,

63 
__cÚ¡
 *
__»¡riù
 
__fmt
, ...))

65  
	`__butš___¢´štf_chk
 (
__s
, 
__n
, 
__USE_FORTIFY_LEVEL
 - 1,

66 
	`__bos
 (
__s
), 
__fmt
, 
	`__va_¬g_·ck
 ());

67 
	}
}

68 #–ià!
defšed
 
__ılu¥lus


69 
	#¢´štf
(
¡r
, 
Ën
, ...) \

70 
	`__butš___¢´štf_chk
 (
¡r
, 
Ën
, 
__USE_FORTIFY_LEVEL
 - 1, 
	`__bos
 (str), \

71 
__VA_ARGS__
)

	)

74 
__ex‹º_®ways_šlše
 

75 
__NTH
 (
	$v¢´štf
 (*
__»¡riù
 
__s
, 
size_t
 
__n
,

76 
__cÚ¡
 *
__»¡riù
 
__fmt
, 
_G_va_li¡
 
__­
))

78  
	`__butš___v¢´štf_chk
 (
__s
, 
__n
, 
__USE_FORTIFY_LEVEL
 - 1,

79 
	`__bos
 (
__s
), 
__fmt
, 
__­
);

80 
	}
}

84 #ià
__USE_FORTIFY_LEVEL
 > 1

86 
__årštf_chk
 (
FILE
 *
__»¡riù
 
__¡»am
, 
__æag
,

87 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...);

88 
__´štf_chk
 (
__æag
, 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...);

89 
__vårštf_chk
 (
FILE
 *
__»¡riù
 
__¡»am
, 
__æag
,

90 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__­
);

91 
__v´štf_chk
 (
__æag
, 
__cÚ¡
 *
__»¡riù
 
__fÜm©
,

92 
_G_va_li¡
 
__­
);

94 #ifdeà
__va_¬g_·ck


95 
__ex‹º_®ways_šlše
 

96 
	$årštf
 (
FILE
 *
__»¡riù
 
__¡»am
, 
__cÚ¡
 *__»¡riù 
__fmt
, ...)

98  
	`__årštf_chk
 (
__¡»am
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

99 
	`__va_¬g_·ck
 ());

100 
	}
}

102 
__ex‹º_®ways_šlše
 

103 
	$´štf
 (
__cÚ¡
 *
__»¡riù
 
__fmt
, ...)

105  
	`__´štf_chk
 (
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
	`__va_¬g_·ck
 ());

106 
	}
}

107 #–ià!
defšed
 
__ılu¥lus


108 
	#´štf
(...) \

109 
	`__´štf_chk
 (
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

110 
	#årštf
(
¡»am
, ...) \

111 
	`__årštf_chk
 (
¡»am
, 
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

114 
__ex‹º_®ways_šlše
 

115 
	$v´štf
 (
__cÚ¡
 *
__»¡riù
 
__fmt
, 
_G_va_li¡
 
__­
)

117 #ifdeà
__USE_EXTERN_INLINES


118  
	`__vårštf_chk
 (
¡dout
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__­
);

120  
	`__v´štf_chk
 (
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__­
);

122 
	}
}

124 
__ex‹º_®ways_šlše
 

125 
	$vårštf
 (
FILE
 *
__»¡riù
 
__¡»am
,

126 
__cÚ¡
 *
__»¡riù
 
__fmt
, 
_G_va_li¡
 
__­
)

128  
	`__vårštf_chk
 (
__¡»am
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__­
);

129 
	}
}

131 #ifdeà
__USE_GNU


133 
	$__a¥rštf_chk
 (**
__»¡riù
 
__±r
, 
__æag
,

134 
__cÚ¡
 *
__»¡riù
 
__fmt
, ...)

135 
__THROW
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 3, 4))è
__wur
;

136 
	$__va¥rštf_chk
 (**
__»¡riù
 
__±r
, 
__æag
,

137 
__cÚ¡
 *
__»¡riù
 
__fmt
, 
_G_va_li¡
 
__¬g
)

138 
__THROW
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 3, 0))è
__wur
;

139 
	$__d´štf_chk
 (
__fd
, 
__æag
, 
__cÚ¡
 *
__»¡riù
 
__fmt
,

140 ...è
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 3, 4)));

141 
	$__vd´štf_chk
 (
__fd
, 
__æag
,

142 
__cÚ¡
 *
__»¡riù
 
__fmt
, 
_G_va_li¡
 
__¬g
)

143 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 3, 0)));

144 
	$__ob¡ack_´štf_chk
 (
ob¡ack
 *
__»¡riù
 
__ob¡ack
,

145 
__æag
, 
__cÚ¡
 *
__»¡riù
 
__fÜm©
,

147 
__THROW
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 3, 4)));

148 
	$__ob¡ack_v´štf_chk
 (
ob¡ack
 *
__»¡riù
 
__ob¡ack
,

149 
__æag
,

150 
__cÚ¡
 *
__»¡riù
 
__fÜm©
,

151 
_G_va_li¡
 
__¬gs
)

152 
__THROW
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 3, 0)));

154 #ifdeà
__va_¬g_·ck


155 
__ex‹º_®ways_šlše
 

156 
	`__NTH
 (
	$a¥rštf
 (**
__»¡riù
 
__±r
, 
__cÚ¡
 *__»¡riù 
__fmt
, ...))

158  
	`__a¥rštf_chk
 (
__±r
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

159 
	`__va_¬g_·ck
 ());

160 
	}
}

162 
__ex‹º_®ways_šlše
 

163 
__NTH
 (
	$__a¥rštf
 (**
__»¡riù
 
__±r
, 
__cÚ¡
 *__»¡riù 
__fmt
,

166  
	`__a¥rštf_chk
 (
__±r
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

167 
	`__va_¬g_·ck
 ());

168 
	}
}

170 
__ex‹º_®ways_šlše
 

171 
	$d´štf
 (
__fd
, 
__cÚ¡
 *
__»¡riù
 
__fmt
, ...)

173  
	`__d´štf_chk
 (
__fd
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

174 
	`__va_¬g_·ck
 ());

175 
	}
}

177 
__ex‹º_®ways_šlše
 

178 
__NTH
 (
	$ob¡ack_´štf
 (
ob¡ack
 *
__»¡riù
 
__ob¡ack
,

179 
__cÚ¡
 *
__»¡riù
 
__fmt
, ...))

181  
	`__ob¡ack_´štf_chk
 (
__ob¡ack
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

182 
	`__va_¬g_·ck
 ());

183 
	}
}

184 #–ià!
defšed
 
__ılu¥lus


185 
	#a¥rštf
(
±r
, ...) \

186 
	`__a¥rštf_chk
 (
±r
, 
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

187 
	#__a¥rštf
(
±r
, ...) \

188 
	`__a¥rštf_chk
 (
±r
, 
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

189 
	#d´štf
(
fd
, ...) \

190 
	`__d´štf_chk
 (
fd
, 
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

191 
	#ob¡ack_´štf
(
ob¡ack
, ...) \

192 
	`__ob¡ack_´štf_chk
 (
ob¡ack
, 
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

195 
__ex‹º_®ways_šlše
 

196 
__NTH
 (
	$va¥rštf
 (**
__»¡riù
 
__±r
, 
__cÚ¡
 *__»¡riù 
__fmt
,

197 
_G_va_li¡
 
__­
))

199  
	`__va¥rštf_chk
 (
__±r
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__­
);

200 
	}
}

202 
__ex‹º_®ways_šlše
 

203 
	$vd´štf
 (
__fd
, 
__cÚ¡
 *
__»¡riù
 
__fmt
, 
_G_va_li¡
 
__­
)

205  
	`__vd´štf_chk
 (
__fd
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__­
);

206 
	}
}

208 
__ex‹º_®ways_šlše
 

209 
__NTH
 (
	$ob¡ack_v´štf
 (
ob¡ack
 *
__»¡riù
 
__ob¡ack
,

210 
__cÚ¡
 *
__»¡riù
 
__fmt
, 
_G_va_li¡
 
__­
))

212  
	`__ob¡ack_v´štf_chk
 (
__ob¡ack
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

213 
__­
);

214 
	}
}

220 *
	$__g‘s_chk
 (*
__¡r
, 
size_t
è
__wur
;

221 *
	`__REDIRECT
 (
__g‘s_w¬n
, (*
__¡r
), 
g‘s
)

222 
__wur
 
	`__w¬Ç‰r
 ("please use fgets or getline instead, gets can't "

225 
__ex‹º_®ways_šlše
 
__wur
 *

226 
	$g‘s
 (*
__¡r
)

228 ià(
	`__bos
 (
__¡r
è!ğ(
size_t
) -1)

229  
	`__g‘s_chk
 (
__¡r
, 
	`__bos
 (__str));

230  
	`__g‘s_w¬n
 (
__¡r
);

231 
	}
}

233 *
	$__fg‘s_chk
 (*
__»¡riù
 
__s
, 
size_t
 
__size
, 
__n
,

234 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

235 *
	`__REDIRECT
 (
__fg‘s_®Ÿs
,

236 (*
__»¡riù
 
__s
, 
__n
,

237 
FILE
 *
__»¡riù
 
__¡»am
), 
fg‘s
è
__wur
;

238 *
	`__REDIRECT
 (
__fg‘s_chk_w¬n
,

239 (*
__»¡riù
 
__s
, 
size_t
 
__size
, 
__n
,

240 
FILE
 *
__»¡riù
 
__¡»am
), 
__fg‘s_chk
)

241 
__wur
 
	`__w¬Ç‰r
 ("fgets called with bigger sizehan†ength "

244 
__ex‹º_®ways_šlše
 
__wur
 *

245 
	$fg‘s
 (*
__»¡riù
 
__s
, 
__n
, 
FILE
 *__»¡riù 
__¡»am
)

247 ià(
	`__bos
 (
__s
è!ğ(
size_t
) -1)

249 ià(!
	`__butš_cÚ¡ªt_p
 (
__n
) || __n <= 0)

250  
	`__fg‘s_chk
 (
__s
, 
	`__bos
 (__s), 
__n
, 
__¡»am
);

252 ià((
size_t
è
__n
 > 
	`__bos
 (
__s
))

253  
	`__fg‘s_chk_w¬n
 (
__s
, 
	`__bos
 (__s), 
__n
, 
__¡»am
);

255  
	`__fg‘s_®Ÿs
 (
__s
, 
__n
, 
__¡»am
);

256 
	}
}

258 
size_t
 
	$__ä—d_chk
 (*
__»¡riù
 
__±r
, 
size_t
 
__±¾’
,

259 
size_t
 
__size
, size_ˆ
__n
,

260 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

261 
size_t
 
	`__REDIRECT
 (
__ä—d_®Ÿs
,

262 (*
__»¡riù
 
__±r
, 
size_t
 
__size
,

263 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
),

264 
ä—d
è
__wur
;

265 
size_t
 
	`__REDIRECT
 (
__ä—d_chk_w¬n
,

266 (*
__»¡riù
 
__±r
, 
size_t
 
__±¾’
,

267 
size_t
 
__size
, size_ˆ
__n
,

268 
FILE
 *
__»¡riù
 
__¡»am
),

269 
__ä—d_chk
)

270 
__wur
 
	`__w¬Ç‰r
 ("fread called with bigger size *‚membhan†ength "

273 
__ex‹º_®ways_šlše
 
__wur
 
size_t


274 
	$ä—d
 (*
__»¡riù
 
__±r
, 
size_t
 
__size
, size_ˆ
__n
,

275 
FILE
 *
__»¡riù
 
__¡»am
)

277 ià(
	`__bos0
 (
__±r
è!ğ(
size_t
) -1)

279 ià(!
	`__butš_cÚ¡ªt_p
 (
__size
)

280 || !
	`__butš_cÚ¡ªt_p
 (
__n
)

281 || (
__size
 | 
__n
è>ğ(((
size_t
) 1) << (8 *  (size_t) / 2)))

282  
	`__ä—d_chk
 (
__±r
, 
	`__bos0
 (__±r), 
__size
, 
__n
, 
__¡»am
);

284 ià(
__size
 * 
__n
 > 
	`__bos0
 (
__±r
))

285  
	`__ä—d_chk_w¬n
 (
__±r
, 
	`__bos0
 (__±r), 
__size
, 
__n
, 
__¡»am
);

287  
	`__ä—d_®Ÿs
 (
__±r
, 
__size
, 
__n
, 
__¡»am
);

288 
	}
}

290 #ifdeà
__USE_GNU


291 *
	$__fg‘s_uÆocked_chk
 (*
__»¡riù
 
__s
, 
size_t
 
__size
,

292 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

293 *
	`__REDIRECT
 (
__fg‘s_uÆocked_®Ÿs
,

294 (*
__»¡riù
 
__s
, 
__n
,

295 
FILE
 *
__»¡riù
 
__¡»am
), 
fg‘s_uÆocked
è
__wur
;

296 *
	`__REDIRECT
 (
__fg‘s_uÆocked_chk_w¬n
,

297 (*
__»¡riù
 
__s
, 
size_t
 
__size
, 
__n
,

298 
FILE
 *
__»¡riù
 
__¡»am
), 
__fg‘s_uÆocked_chk
)

299 
__wur
 
	`__w¬Ç‰r
 ("fgets_unlocked called with bigger sizehan†ength "

302 
__ex‹º_®ways_šlše
 
__wur
 *

303 
	$fg‘s_uÆocked
 (*
__»¡riù
 
__s
, 
__n
, 
FILE
 *__»¡riù 
__¡»am
)

305 ià(
	`__bos
 (
__s
è!ğ(
size_t
) -1)

307 ià(!
	`__butš_cÚ¡ªt_p
 (
__n
) || __n <= 0)

308  
	`__fg‘s_uÆocked_chk
 (
__s
, 
	`__bos
 (__s), 
__n
, 
__¡»am
);

310 ià((
size_t
è
__n
 > 
	`__bos
 (
__s
))

311  
	`__fg‘s_uÆocked_chk_w¬n
 (
__s
, 
	`__bos
 (__s), 
__n
, 
__¡»am
);

313  
	`__fg‘s_uÆocked_®Ÿs
 (
__s
, 
__n
, 
__¡»am
);

314 
	}
}

317 #ifdeà
__USE_MISC


318 #undeà
ä—d_uÆocked


319 
size_t
 
	$__ä—d_uÆocked_chk
 (*
__»¡riù
 
__±r
, 
size_t
 
__±¾’
,

320 
size_t
 
__size
, size_ˆ
__n
,

321 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

322 
size_t
 
	`__REDIRECT
 (
__ä—d_uÆocked_®Ÿs
,

323 (*
__»¡riù
 
__±r
, 
size_t
 
__size
,

324 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
),

325 
ä—d_uÆocked
è
__wur
;

326 
size_t
 
	`__REDIRECT
 (
__ä—d_uÆocked_chk_w¬n
,

327 (*
__»¡riù
 
__±r
, 
size_t
 
__±¾’
,

328 
size_t
 
__size
, size_ˆ
__n
,

329 
FILE
 *
__»¡riù
 
__¡»am
),

330 
__ä—d_uÆocked_chk
)

331 
__wur
 
	`__w¬Ç‰r
 ("fread_unlocked called with bigger size *‚membhan "

334 
__ex‹º_®ways_šlše
 
__wur
 
size_t


335 
	$ä—d_uÆocked
 (*
__»¡riù
 
__±r
, 
size_t
 
__size
, size_ˆ
__n
,

336 
FILE
 *
__»¡riù
 
__¡»am
)

338 ià(
	`__bos0
 (
__±r
è!ğ(
size_t
) -1)

340 ià(!
	`__butš_cÚ¡ªt_p
 (
__size
)

341 || !
	`__butš_cÚ¡ªt_p
 (
__n
)

342 || (
__size
 | 
__n
è>ğ(((
size_t
) 1) << (8 *  (size_t) / 2)))

343  
	`__ä—d_uÆocked_chk
 (
__±r
, 
	`__bos0
 (__±r), 
__size
, 
__n
,

344 
__¡»am
);

346 ià(
__size
 * 
__n
 > 
	`__bos0
 (
__±r
))

347  
	`__ä—d_uÆocked_chk_w¬n
 (
__±r
, 
	`__bos0
 (__±r), 
__size
, 
__n
,

348 
__¡»am
);

351 #ifdeà
__USE_EXTERN_INLINES


352 ià(
	`__butš_cÚ¡ªt_p
 (
__size
)

353 && 
	`__butš_cÚ¡ªt_p
 (
__n
)

354 && (
__size
 | 
__n
è< (((
size_t
) 1) << (8 *  (size_t) / 2))

355 && 
__size
 * 
__n
 <= 8)

357 
size_t
 
__út
 = 
__size
 * 
__n
;

358 *
__ıŒ
 = (*è
__±r
;

359 ià(
__út
 == 0)

362 ; 
__út
 > 0; --__cnt)

364 
__c
 = 
	`_IO_g‘c_uÆocked
 (
__¡»am
);

365 ià(
__c
 =ğ
EOF
)

367 *
__ıŒ
++ = 
__c
;

369  (
__ıŒ
 - (*è
__±r
è/ 
__size
;

372  
	`__ä—d_uÆocked_®Ÿs
 (
__±r
, 
__size
, 
__n
, 
__¡»am
);

373 
	}
}

	@/usr/include/bits/stdio_lim.h

19 #ià!
defšed
 
_STDIO_H
 && !defšed 
__Ãed_FOPEN_MAX
 && !defšed 
__Ãed_IOV_MAX


23 #ifdeà
_STDIO_H


24 
	#L_tm²am
 20

	)

25 
	#TMP_MAX
 238328

	)

26 
	#FILENAME_MAX
 4096

	)

28 #ifdeà
__USE_POSIX


29 
	#L_ù”mid
 9

	)

30 #ià!
defšed
 
__USE_XOPEN2K
 || defšed 
__USE_GNU


31 
	#L_cu£rid
 9

	)

36 #ià
defšed
 
__Ãed_FOPEN_MAX
 || defšed 
_STDIO_H


37 #undeà
FOPEN_MAX


38 
	#FOPEN_MAX
 16

	)

41 #ià
defšed
 
__Ãed_IOV_MAX
 && !defšed 
IOV_MAX


42 
	#IOV_MAX
 1024

	)

	@/usr/include/bits/stdlib-ldbl.h

20 #iâdeà
_STDLIB_H


24 #ifdef 
__USE_ISOC99


25 
__BEGIN_NAMESPACE_C99


26 
	$__LDBL_REDIR1_DECL
 (
¡¹Şd
, 
¡¹od
)

27 
__END_NAMESPACE_C99


30 #ifdeà
__USE_GNU


31 
	$__LDBL_REDIR1_DECL
 (
¡¹Şd_l
, 
¡¹od_l
)

34 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN_EXTENDED


35 #ifdeà
__USE_MISC


36 
	$__LDBL_REDIR1_DECL
 (
qecvt
, 
ecvt
)

37 
	$__LDBL_REDIR1_DECL
 (
qfcvt
, 
fcvt
)

38 
	$__LDBL_REDIR1_DECL
 (
qgcvt
, 
gcvt
)

39 
	$__LDBL_REDIR1_DECL
 (
qecvt_r
, 
ecvt_r
)

40 
	$__LDBL_REDIR1_DECL
 (
qfcvt_r
, 
fcvt_r
)

	@/usr/include/bits/stdlib.h

20 #iâdeà
_STDLIB_H


24 *
	$__»®·th_chk
 (
__cÚ¡
 *
__»¡riù
 
__Çme
,

25 *
__»¡riù
 
__»sŞved
,

26 
size_t
 
__»sŞvedËn
è
__THROW
 
__wur
;

27 *
	`__REDIRECT_NTH
 (
__»®·th_®Ÿs
,

28 (
__cÚ¡
 *
__»¡riù
 
__Çme
,

29 *
__»¡riù
 
__»sŞved
), 
»®·th
è
__wur
;

30 *
	`__REDIRECT_NTH
 (
__»®·th_chk_w¬n
,

31 (
__cÚ¡
 *
__»¡riù
 
__Çme
,

32 *
__»¡riù
 
__»sŞved
,

33 
size_t
 
__»sŞvedËn
), 
__»®·th_chk
è
__wur


34 
	`__w¬Ç‰r
 ("second‡rgument of„ealpath must beƒither NULL or‡t "

37 
__ex‹º_®ways_šlše
 
__wur
 *

38 
	`__NTH
 (
	$»®·th
 (
__cÚ¡
 *
__»¡riù
 
__Çme
, *__»¡riù 
__»sŞved
))

40 ià(
	`__bos
 (
__»sŞved
è!ğ(
size_t
) -1)

42 #ià
defšed
 
_LIBC_LIMITS_H_
 && defšed 
PATH_MAX


43 ià(
	`__bos
 (
__»sŞved
è< 
PATH_MAX
)

44  
	`__»®·th_chk_w¬n
 (
__Çme
, 
__»sŞved
, 
	`__bos
 (__resolved));

46  
	`__»®·th_chk
 (
__Çme
, 
__»sŞved
, 
	`__bos
 (__resolved));

49  
	`__»®·th_®Ÿs
 (
__Çme
, 
__»sŞved
);

50 
	}
}

53 
	$__±¢ame_r_chk
 (
__fd
, *
__buf
, 
size_t
 
__buæ’
,

54 
size_t
 
__Ä—l
è
__THROW
 
	`__nÚnuÎ
 ((2));

55 
	`__REDIRECT_NTH
 (
__±¢ame_r_®Ÿs
, (
__fd
, *
__buf
,

56 
size_t
 
__buæ’
), 
±¢ame_r
)

57 
	`__nÚnuÎ
 ((2));

58 
	`__REDIRECT_NTH
 (
__±¢ame_r_chk_w¬n
,

59 (
__fd
, *
__buf
, 
size_t
 
__buæ’
,

60 
size_t
 
__Ä—l
), 
__±¢ame_r_chk
)

61 
	`__nÚnuÎ
 ((2)è
	`__w¬Ç‰r
 ("ptsname_r called with buflen biggerhan "

64 
__ex‹º_®ways_šlše
 

65 
	`__NTH
 (
	$±¢ame_r
 (
__fd
, *
__buf
, 
size_t
 
__buæ’
))

67 ià(
	`__bos
 (
__buf
è!ğ(
size_t
) -1)

69 ià(!
	`__butš_cÚ¡ªt_p
 (
__buæ’
))

70  
	`__±¢ame_r_chk
 (
__fd
, 
__buf
, 
__buæ’
, 
	`__bos
 (__buf));

71 ià(
__buæ’
 > 
	`__bos
 (
__buf
))

72  
	`__±¢ame_r_chk_w¬n
 (
__fd
, 
__buf
, 
__buæ’
, 
	`__bos
 (__buf));

74  
	`__±¢ame_r_®Ÿs
 (
__fd
, 
__buf
, 
__buæ’
);

75 
	}
}

78 
	$__wùomb_chk
 (*
__s
, 
wch¬_t
 
__wch¬
, 
size_t
 
__buæ’
)

79 
__THROW
 
__wur
;

80 
	`__REDIRECT_NTH
 (
__wùomb_®Ÿs
, (*
__s
, 
wch¬_t
 
__wch¬
),

81 
wùomb
è
__wur
;

83 
__ex‹º_®ways_šlše
 
__wur
 

84 
	`__NTH
 (
	$wùomb
 (*
__s
, 
wch¬_t
 
__wch¬
))

89 
	#__STDLIB_MB_LEN_MAX
 16

	)

90 #ià
defšed
 
MB_LEN_MAX
 && MB_LEN_MAX !ğ
__STDLIB_MB_LEN_MAX


93 ià(
	`__bos
 (
__s
è!ğ(
size_t
è-1 && 
__STDLIB_MB_LEN_MAX
 > __bos (__s))

94  
	`__wùomb_chk
 (
__s
, 
__wch¬
, 
	`__bos
 (__s));

95  
	`__wùomb_®Ÿs
 (
__s
, 
__wch¬
);

96 
	}
}

99 
size_t
 
	$__mb¡owcs_chk
 (
wch¬_t
 *
__»¡riù
 
__d¡
,

100 
__cÚ¡
 *
__»¡riù
 
__¤c
,

101 
size_t
 
__Ën
, size_ˆ
__d¡Ën
è
__THROW
;

102 
size_t
 
	`__REDIRECT_NTH
 (
__mb¡owcs_®Ÿs
,

103 (
wch¬_t
 *
__»¡riù
 
__d¡
,

104 
__cÚ¡
 *
__»¡riù
 
__¤c
,

105 
size_t
 
__Ën
), 
mb¡owcs
);

106 
size_t
 
	`__REDIRECT_NTH
 (
__mb¡owcs_chk_w¬n
,

107 (
wch¬_t
 *
__»¡riù
 
__d¡
,

108 
__cÚ¡
 *
__»¡riù
 
__¤c
,

109 
size_t
 
__Ën
, size_ˆ
__d¡Ën
), 
__mb¡owcs_chk
)

110 
	`__w¬Ç‰r
 ("mbstowcs called with dst buffer smallerhan†en "

113 
__ex‹º_®ways_šlše
 
size_t


114 
	`__NTH
 (
	$mb¡owcs
 (
wch¬_t
 *
__»¡riù
 
__d¡
, 
__cÚ¡
 *__»¡riù 
__¤c
,

115 
size_t
 
__Ën
))

117 ià(
	`__bos
 (
__d¡
è!ğ(
size_t
) -1)

119 ià(!
	`__butš_cÚ¡ªt_p
 (
__Ën
))

120  
	`__mb¡owcs_chk
 (
__d¡
, 
__¤c
, 
__Ën
,

121 
	`__bos
 (
__d¡
è/  (
wch¬_t
));

123 ià(
__Ën
 > 
	`__bos
 (
__d¡
è/  (
wch¬_t
))

124  
	`__mb¡owcs_chk_w¬n
 (
__d¡
, 
__¤c
, 
__Ën
,

125 
	`__bos
 (
__d¡
è/  (
wch¬_t
));

127  
	`__mb¡owcs_®Ÿs
 (
__d¡
, 
__¤c
, 
__Ën
);

128 
	}
}

131 
size_t
 
	$__wc¡ombs_chk
 (*
__»¡riù
 
__d¡
,

132 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
,

133 
size_t
 
__Ën
, size_ˆ
__d¡Ën
è
__THROW
;

134 
size_t
 
	`__REDIRECT_NTH
 (
__wc¡ombs_®Ÿs
,

135 (*
__»¡riù
 
__d¡
,

136 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
,

137 
size_t
 
__Ën
), 
wc¡ombs
);

138 
size_t
 
	`__REDIRECT_NTH
 (
__wc¡ombs_chk_w¬n
,

139 (*
__»¡riù
 
__d¡
,

140 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
,

141 
size_t
 
__Ën
, size_ˆ
__d¡Ën
), 
__wc¡ombs_chk
)

142 
	`__w¬Ç‰r
 ("wcstombs called with dst buffer smallerhan†en");

144 
__ex‹º_®ways_šlše
 
size_t


145 
	`__NTH
 (
	$wc¡ombs
 (*
__»¡riù
 
__d¡
, 
__cÚ¡
 
wch¬_t
 *__»¡riù 
__¤c
,

146 
size_t
 
__Ën
))

148 ià(
	`__bos
 (
__d¡
è!ğ(
size_t
) -1)

150 ià(!
	`__butš_cÚ¡ªt_p
 (
__Ën
))

151  
	`__wc¡ombs_chk
 (
__d¡
, 
__¤c
, 
__Ën
, 
	`__bos
 (__dst));

152 ià(
__Ën
 > 
	`__bos
 (
__d¡
))

153  
	`__wc¡ombs_chk_w¬n
 (
__d¡
, 
__¤c
, 
__Ën
, 
	`__bos
 (__dst));

155  
	`__wc¡ombs_®Ÿs
 (
__d¡
, 
__¤c
, 
__Ën
);

156 
	}
}

	@/usr/include/bits/string.h

20 #iâdeà
_STRING_H


26 
	#_STRING_ARCH_uÇligÃd
 1

	)

	@/usr/include/bits/string2.h

21 #iâdeà
_STRING_H


25 #ià!
defšed
 
__NO_STRING_INLINES
 && !defšed 
__BOUNDED_POINTERS__


42 #iâdeà
__STRING_INLINE


43 #ifdeà
__ılu¥lus


44 
	#__STRING_INLINE
 
šlše


	)

46 
	#__STRING_INLINE
 
__ex‹º_šlše


	)

50 #ià
_STRING_ARCH_uÇligÃd


52 
	~<’dŸn.h
>

53 
	~<b™s/ty³s.h
>

55 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


56 
	#__STRING2_SMALL_GET16
(
¤c
, 
idx
) \

57 (((
__cÚ¡
 *è(__cÚ¡ *è(
¤c
))[
idx
 + 1] << 8 \

58 | ((
__cÚ¡
 *è(__cÚ¡ *è(
¤c
))[
idx
])

	)

59 
	#__STRING2_SMALL_GET32
(
¤c
, 
idx
) \

60 (((((
__cÚ¡
 *è(__cÚ¡ *è(
¤c
))[
idx
 + 3] << 8 \

61 | ((
__cÚ¡
 *è(__cÚ¡ *è(
¤c
))[
idx
 + 2]) << 8 \

62 | ((
__cÚ¡
 *è(__cÚ¡ *è(
¤c
))[
idx
 + 1]) << 8 \

63 | ((
__cÚ¡
 *è(__cÚ¡ *è(
¤c
))[
idx
])

	)

65 
	#__STRING2_SMALL_GET16
(
¤c
, 
idx
) \

66 (((
__cÚ¡
 *è(__cÚ¡ *è(
¤c
))[
idx
] << 8 \

67 | ((
__cÚ¡
 *è(__cÚ¡ *è(
¤c
))[
idx
 + 1])

	)

68 
	#__STRING2_SMALL_GET32
(
¤c
, 
idx
) \

69 (((((
__cÚ¡
 *è(__cÚ¡ *è(
¤c
))[
idx
] << 8 \

70 | ((
__cÚ¡
 *è(__cÚ¡ *è(
¤c
))[
idx
 + 1]) << 8 \

71 | ((
__cÚ¡
 *è(__cÚ¡ *è(
¤c
))[
idx
 + 2]) << 8 \

72 | ((
__cÚ¡
 *è(__cÚ¡ *è(
¤c
))[
idx
 + 3])

	)

77 
	#__STRING2_COPY_TYPE
(
N
) \

78 ¡ruù { 
__¬r
[
N
]; } \

79 
	t__©Œibu‹__
 ((
	t__·cked__
)è
	t__STRING2_COPY_ARR
##
	tN


	)

80 
	t__STRING2_COPY_TYPE
 (2);

81 
__STRING2_COPY_TYPE
 (3);

82 
__STRING2_COPY_TYPE
 (4);

83 
__STRING2_COPY_TYPE
 (5);

84 
__STRING2_COPY_TYPE
 (6);

85 
__STRING2_COPY_TYPE
 (7);

86 
__STRING2_COPY_TYPE
 (8);

87 #undeà
__STRING2_COPY_TYPE


93 
	#__¡ršg2_1b±r_p
(
__x
) \

94 ((
size_t
)(cÚ¡ *)((
__x
è+ 1è- (size_t)(cÚ¡ *)(__xè=ğ1)

	)

97 #ià!
defšed
 
_HAVE_STRING_ARCH_mem£t


98 #ià!
__GNUC_PREREQ
 (3, 0)

99 #ià
_STRING_ARCH_uÇligÃd


100 
	#mem£t
(
s
, 
c
, 
n
) \

101 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
n
) && (n) <= 16 \

102 ? ((
n
) == 1 \

103 ? 
	`__mem£t_1
 (
s
, 
c
) \

104 : 
	`__mem£t_gc
 (
s
, 
c
, 
n
)) \

105 : (
	`__butš_cÚ¡ªt_p
 (
c
) && (c) == '\0' \

106 ? ({ *
__s
 = (
s
); 
	`__bz”o
 (__s, 
n
); __s; }) \

107 : 
	`mem£t
 (
s
, 
c
, 
n
))))

	)

109 
	#__mem£t_1
(
s
, 
c
è({ *
__s
 = (s); \

110 *((
__ušt8_t
 *è
__s
èğ(__ušt8_tè
c
; __s; })

	)

112 
	#__mem£t_gc
(
s
, 
c
, 
n
) \

113 ({ *
__s
 = (
s
); \

115 
__ui
; \

116 
__usi
; \

117 
__uc
; \

118 } *
__u
 = 
__s
; \

119 
__ušt8_t
 
__c
 = (__ušt8_tè(
c
); \

122 (è(
n
)) \

125 
__u
->
__ui
 = 
__c
 * 0x01010101; \

126 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

128 
__u
->
__ui
 = 
__c
 * 0x01010101; \

129 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

131 
__u
->
__ui
 = 
__c
 * 0x01010101; \

132 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

134 
__u
->
__usi
 = (è
__c
 * 0x0101; \

135 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 2); \

136 
__u
->
__uc
 = (è
__c
; \

140 
__u
->
__ui
 = 
__c
 * 0x01010101; \

141 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

143 
__u
->
__ui
 = 
__c
 * 0x01010101; \

144 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

146 
__u
->
__ui
 = 
__c
 * 0x01010101; \

147 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

149 
__u
->
__usi
 = (è
__c
 * 0x0101; \

153 
__u
->
__ui
 = 
__c
 * 0x01010101; \

154 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

156 
__u
->
__ui
 = 
__c
 * 0x01010101; \

157 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

159 
__u
->
__ui
 = 
__c
 * 0x01010101; \

160 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

162 
__u
->
__uc
 = (è
__c
; \

166 
__u
->
__ui
 = 
__c
 * 0x01010101; \

167 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

169 
__u
->
__ui
 = 
__c
 * 0x01010101; \

170 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

172 
__u
->
__ui
 = 
__c
 * 0x01010101; \

173 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4); \

175 
__u
->
__ui
 = 
__c
 * 0x01010101; \

180 
__s
; })

	)

182 
	#mem£t
(
s
, 
c
, 
n
) \

183 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
c
) && (c) == '\0' \

184 ? ({ *
__s
 = (
s
); 
	`__bz”o
 (__s, 
n
); __s; }) \

185 : 
	`mem£t
 (
s
, 
c
, 
n
)))

	)

194 #ià
__GNUC_PREREQ
 (2, 91)

195 
	#__bz”o
(
s
, 
n
è
	`__butš_mem£t
 (s, '\0',‚)

	)

203 #ifdeà
__USE_GNU


204 #ià!
defšed
 
_HAVE_STRING_ARCH_mempıy
 || defšed 
_FORCE_INLINES


205 #iâdeà
_HAVE_STRING_ARCH_mempıy


206 #ià
__GNUC_PREREQ
 (3, 4)

207 
	#__mempıy
(
de¡
, 
¤c
, 
n
è
	`__butš_mempıy
 (de¡, src,‚)

	)

208 #–ià
__GNUC_PREREQ
 (3, 0)

209 
	#__mempıy
(
de¡
, 
¤c
, 
n
) \

210 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
¤c
è&& __butš_cÚ¡ªt_°(
n
) \

211 && 
	`__¡ršg2_1b±r_p
 (
¤c
è&& 
n
 <= 8 \

212 ? 
	`__butš_memıy
 (
de¡
, 
¤c
, 
n
) + (n) \

213 : 
	`__mempıy
 (
de¡
, 
¤c
, 
n
)))

	)

215 
	#__mempıy
(
de¡
, 
¤c
, 
n
) \

216 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
¤c
è&& __butš_cÚ¡ªt_°(
n
) \

217 && 
	`__¡ršg2_1b±r_p
 (
¤c
è&& 
n
 <= 8 \

218 ? 
	`__mempıy_sm®l
 (
de¡
, 
	`__mempıy_¬gs
 (
¤c
), 
n
) \

219 : 
	`__mempıy
 (
de¡
, 
¤c
, 
n
)))

	)

223 
	#mempıy
(
de¡
, 
¤c
, 
n
è
	`__mempıy
 (de¡, src,‚)

	)

226 #ià!
__GNUC_PREREQ
 (3, 0è|| 
defšed
 
_FORCE_INLINES


227 #ià
_STRING_ARCH_uÇligÃd


228 #iâdeà
_FORCE_INLINES


229 
	#__mempıy_¬gs
(
¤c
) \

230 ((
__cÚ¡
 *è(
¤c
))[0], ((__const *) (src))[2], \

231 ((
__cÚ¡
 *è(
¤c
))[4], ((__const *) (src))[6], \

232 
__ex‹nsiÚ__
 
	`__STRING2_SMALL_GET16
 (
¤c
, 0), \

233 
__ex‹nsiÚ__
 
	`__STRING2_SMALL_GET16
 (
¤c
, 4), \

234 
__ex‹nsiÚ__
 
	`__STRING2_SMALL_GET32
 (
¤c
, 0), \

235 
__ex‹nsiÚ__
 
	`__STRING2_SMALL_GET32
 (
¤c
, 4)

	)

237 
__STRING_INLINE
 *
__mempıy_sm®l
 (*, , , , ,

238 
__ušt16_t
, __ušt16_t, 
__ušt32_t
,

239 
__ušt32_t
, 
size_t
);

240 
__STRING_INLINE
 *

241 
	$__mempıy_sm®l
 (*
__de¡1
,

242 
__¤c0_1
, 
__¤c2_1
, 
__¤c4_1
, 
__¤c6_1
,

243 
__ušt16_t
 
__¤c0_2
, __ušt16_ˆ
__¤c4_2
,

244 
__ušt32_t
 
__¤c0_4
, __ušt32_ˆ
__¤c4_4
,

245 
size_t
 
__¤ş’
)

248 
__ušt32_t
 
__ui
;

249 
__ušt16_t
 
__usi
;

250 
__uc
;

251 
__c
;

252 } *
__u
 = 
__de¡1
;

253 (è
__¤ş’
)

256 
__u
->
__c
 = 
__¤c0_1
;

257 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 1);

260 
__u
->
__usi
 = 
__¤c0_2
;

261 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 2);

264 
__u
->
__usi
 = 
__¤c0_2
;

265 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 2);

266 
__u
->
__c
 = 
__¤c2_1
;

267 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 1);

270 
__u
->
__ui
 = 
__¤c0_4
;

271 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

274 
__u
->
__ui
 = 
__¤c0_4
;

275 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

276 
__u
->
__c
 = 
__¤c4_1
;

277 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 1);

280 
__u
->
__ui
 = 
__¤c0_4
;

281 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

282 
__u
->
__usi
 = 
__¤c4_2
;

283 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 2);

286 
__u
->
__ui
 = 
__¤c0_4
;

287 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

288 
__u
->
__usi
 = 
__¤c4_2
;

289 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 2);

290 
__u
->
__c
 = 
__¤c6_1
;

291 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 1);

294 
__u
->
__ui
 = 
__¤c0_4
;

295 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

296 
__u
->
__ui
 = 
__¤c4_4
;

297 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

300  (*è
__u
;

301 
	}
}

303 #iâdeà
_FORCE_INLINES


304 
	#__mempıy_¬gs
(
¤c
) \

305 ((
__cÚ¡
 *è(
¤c
))[0], \

306 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR2
) \

307 { { ((
__cÚ¡
 *è(
¤c
))[0], ((__const *) (src))[1] } }), \

308 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR3
) \

309 { { ((
__cÚ¡
 *è(
¤c
))[0], ((__const *) (src))[1], \

310 ((
__cÚ¡
 *è(
¤c
))[2] } }), \

311 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR4
) \

312 { { ((
__cÚ¡
 *è(
¤c
))[0], ((__const *) (src))[1], \

313 ((
__cÚ¡
 *è(
¤c
))[2], ((__const *) (src))[3] } }), \

314 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR5
) \

315 { { ((
__cÚ¡
 *è(
¤c
))[0], ((__const *) (src))[1], \

316 ((
__cÚ¡
 *è(
¤c
))[2], ((__const *) (src))[3], \

317 ((
__cÚ¡
 *è(
¤c
))[4] } }), \

318 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR6
) \

319 { { ((
__cÚ¡
 *è(
¤c
))[0], ((__const *) (src))[1], \

320 ((
__cÚ¡
 *è(
¤c
))[2], ((__const *) (src))[3], \

321 ((
__cÚ¡
 *è(
¤c
))[4], ((__const *) (src))[5] } }), \

322 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR7
) \

323 { { ((
__cÚ¡
 *è(
¤c
))[0], ((__const *) (src))[1], \

324 ((
__cÚ¡
 *è(
¤c
))[2], ((__const *) (src))[3], \

325 ((
__cÚ¡
 *è(
¤c
))[4], ((__const *) (src))[5], \

326 ((
__cÚ¡
 *è(
¤c
))[6] } }), \

327 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR8
) \

328 { { ((
__cÚ¡
 *è(
¤c
))[0], ((__const *) (src))[1], \

329 ((
__cÚ¡
 *è(
¤c
))[2], ((__const *) (src))[3], \

330 ((
__cÚ¡
 *è(
¤c
))[4], ((__const *) (src))[5], \

331 ((
__cÚ¡
 *è(
¤c
))[6], ((__cÚ¡ *è(¤c))[7] } })

	)

333 
__STRING_INLINE
 *
__mempıy_sm®l
 (*, , 
__STRING2_COPY_ARR2
,

334 
__STRING2_COPY_ARR3
,

335 
__STRING2_COPY_ARR4
,

336 
__STRING2_COPY_ARR5
,

337 
__STRING2_COPY_ARR6
,

338 
__STRING2_COPY_ARR7
,

339 
__STRING2_COPY_ARR8
, 
size_t
);

340 
__STRING_INLINE
 *

341 
	$__mempıy_sm®l
 (*
__de¡
, 
__¤c1
,

342 
__STRING2_COPY_ARR2
 
__¤c2
, 
__STRING2_COPY_ARR3
 
__¤c3
,

343 
__STRING2_COPY_ARR4
 
__¤c4
, 
__STRING2_COPY_ARR5
 
__¤c5
,

344 
__STRING2_COPY_ARR6
 
__¤c6
, 
__STRING2_COPY_ARR7
 
__¤c7
,

345 
__STRING2_COPY_ARR8
 
__¤c8
, 
size_t
 
__¤ş’
)

348 
__c
;

349 
__STRING2_COPY_ARR2
 
__sÿ2
;

350 
__STRING2_COPY_ARR3
 
__sÿ3
;

351 
__STRING2_COPY_ARR4
 
__sÿ4
;

352 
__STRING2_COPY_ARR5
 
__sÿ5
;

353 
__STRING2_COPY_ARR6
 
__sÿ6
;

354 
__STRING2_COPY_ARR7
 
__sÿ7
;

355 
__STRING2_COPY_ARR8
 
__sÿ8
;

356 } *
__u
 = 
__de¡
;

357 (è
__¤ş’
)

360 
__u
->
__c
 = 
__¤c1
;

363 
__ex‹nsiÚ__
 
__u
->
__sÿ2
 = 
__¤c2
;

366 
__ex‹nsiÚ__
 
__u
->
__sÿ3
 = 
__¤c3
;

369 
__ex‹nsiÚ__
 
__u
->
__sÿ4
 = 
__¤c4
;

372 
__ex‹nsiÚ__
 
__u
->
__sÿ5
 = 
__¤c5
;

375 
__ex‹nsiÚ__
 
__u
->
__sÿ6
 = 
__¤c6
;

378 
__ex‹nsiÚ__
 
__u
->
__sÿ7
 = 
__¤c7
;

381 
__ex‹nsiÚ__
 
__u
->
__sÿ8
 = 
__¤c8
;

384  
	`__ex‹nsiÚ__
 ((*è
__u
 + 
__¤ş’
);

385 
	}
}

393 #iâdeà
_HAVE_STRING_ARCH_¡rchr


394 *
__¿wmemchr
 (cÚ¡ *
__s
, 
__c
);

395 #ià
__GNUC_PREREQ
 (3, 2)

396 
	#¡rchr
(
s
, 
c
) \

397 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
c
è&& !__butš_cÚ¡ªt_°(
s
) \

398 && (
c
) == '\0' \

399 ? (*è
	`__¿wmemchr
 (
s
, 
c
) \

400 : 
	`__butš_¡rchr
 (
s
, 
c
)))

	)

402 
	#¡rchr
(
s
, 
c
) \

403 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
c
) && (c) == '\0' \

404 ? (*è
	`__¿wmemchr
 (
s
, 
c
) \

405 : 
	`¡rchr
 (
s
, 
c
)))

	)

411 #ià(!
defšed
 
_HAVE_STRING_ARCH_¡rıy
 && !
__GNUC_PREREQ
 (3, 0)) \

412 || 
defšed
 
	g_FORCE_INLINES


413 #ià!
defšed
 
_HAVE_STRING_ARCH_¡rıy
 && !
__GNUC_PREREQ
 (3, 0)

414 
	#¡rıy
(
de¡
, 
¤c
) \

415 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
¤c
) \

416 ? (
	`__¡ršg2_1b±r_p
 (
¤c
è&& 
	`¡¾’
 (src) + 1 <= 8 \

417 ? 
	`__¡rıy_sm®l
 (
de¡
, 
	`__¡rıy_¬gs
 (
¤c
), \

418 
	`¡¾’
 (
¤c
) + 1) \

419 : (*è
	`memıy
 (
de¡
, 
¤c
, 
	`¡¾’
 (src) + 1)) \

420 : 
	`¡rıy
 (
de¡
, 
¤c
)))

	)

423 #ià
_STRING_ARCH_uÇligÃd


424 #iâdeà
_FORCE_INLINES


425 
	#__¡rıy_¬gs
(
¤c
) \

426 
__ex‹nsiÚ__
 
	`__STRING2_SMALL_GET16
 (
¤c
, 0), \

427 
__ex‹nsiÚ__
 
	`__STRING2_SMALL_GET16
 (
¤c
, 4), \

428 
__ex‹nsiÚ__
 
	`__STRING2_SMALL_GET32
 (
¤c
, 0), \

429 
__ex‹nsiÚ__
 
	`__STRING2_SMALL_GET32
 (
¤c
, 4)

	)

431 
__STRING_INLINE
 *
__¡rıy_sm®l
 (*, 
__ušt16_t
, __uint16_t,

432 
__ušt32_t
, __ušt32_t, 
size_t
);

433 
__STRING_INLINE
 *

434 
	$__¡rıy_sm®l
 (*
__de¡
,

435 
__ušt16_t
 
__¤c0_2
, __ušt16_ˆ
__¤c4_2
,

436 
__ušt32_t
 
__¤c0_4
, __ušt32_ˆ
__¤c4_4
,

437 
size_t
 
__¤ş’
)

440 
__ušt32_t
 
__ui
;

441 
__ušt16_t
 
__usi
;

442 
__uc
;

443 } *
__u
 = (*è
__de¡
;

444 (è
__¤ş’
)

447 
__u
->
__uc
 = '\0';

450 
__u
->
__usi
 = 
__¤c0_2
;

453 
__u
->
__usi
 = 
__¤c0_2
;

454 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 2);

455 
__u
->
__uc
 = '\0';

458 
__u
->
__ui
 = 
__¤c0_4
;

461 
__u
->
__ui
 = 
__¤c0_4
;

462 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

463 
__u
->
__uc
 = '\0';

466 
__u
->
__ui
 = 
__¤c0_4
;

467 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

468 
__u
->
__usi
 = 
__¤c4_2
;

471 
__u
->
__ui
 = 
__¤c0_4
;

472 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

473 
__u
->
__usi
 = 
__¤c4_2
;

474 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 2);

475 
__u
->
__uc
 = '\0';

478 
__u
->
__ui
 = 
__¤c0_4
;

479 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

480 
__u
->
__ui
 = 
__¤c4_4
;

483  
__de¡
;

484 
	}
}

486 #iâdeà
_FORCE_INLINES


487 
	#__¡rıy_¬gs
(
¤c
) \

488 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR2
) \

489 { { ((
__cÚ¡
 *è(
¤c
))[0], '\0' } }), \

490 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR3
) \

491 { { ((
__cÚ¡
 *è(
¤c
))[0], ((__const *) (src))[1], \

493 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR4
) \

494 { { ((
__cÚ¡
 *è(
¤c
))[0], ((__const *) (src))[1], \

495 ((
__cÚ¡
 *è(
¤c
))[2], '\0' } }), \

496 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR5
) \

497 { { ((
__cÚ¡
 *è(
¤c
))[0], ((__const *) (src))[1], \

498 ((
__cÚ¡
 *è(
¤c
))[2], ((__const *) (src))[3], \

500 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR6
) \

501 { { ((
__cÚ¡
 *è(
¤c
))[0], ((__const *) (src))[1], \

502 ((
__cÚ¡
 *è(
¤c
))[2], ((__const *) (src))[3], \

503 ((
__cÚ¡
 *è(
¤c
))[4], '\0' } }), \

504 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR7
) \

505 { { ((
__cÚ¡
 *è(
¤c
))[0], ((__const *) (src))[1], \

506 ((
__cÚ¡
 *è(
¤c
))[2], ((__const *) (src))[3], \

507 ((
__cÚ¡
 *è(
¤c
))[4], ((__const *) (src))[5], \

509 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR8
) \

510 { { ((
__cÚ¡
 *è(
¤c
))[0], ((__const *) (src))[1], \

511 ((
__cÚ¡
 *è(
¤c
))[2], ((__const *) (src))[3], \

512 ((
__cÚ¡
 *è(
¤c
))[4], ((__const *) (src))[5], \

513 ((
__cÚ¡
 *è(
¤c
))[6], '\0' } })

	)

515 
__STRING_INLINE
 *
__¡rıy_sm®l
 (*, 
__STRING2_COPY_ARR2
,

516 
__STRING2_COPY_ARR3
,

517 
__STRING2_COPY_ARR4
,

518 
__STRING2_COPY_ARR5
,

519 
__STRING2_COPY_ARR6
,

520 
__STRING2_COPY_ARR7
,

521 
__STRING2_COPY_ARR8
, 
size_t
);

522 
__STRING_INLINE
 *

523 
	$__¡rıy_sm®l
 (*
__de¡
,

524 
__STRING2_COPY_ARR2
 
__¤c2
, 
__STRING2_COPY_ARR3
 
__¤c3
,

525 
__STRING2_COPY_ARR4
 
__¤c4
, 
__STRING2_COPY_ARR5
 
__¤c5
,

526 
__STRING2_COPY_ARR6
 
__¤c6
, 
__STRING2_COPY_ARR7
 
__¤c7
,

527 
__STRING2_COPY_ARR8
 
__¤c8
, 
size_t
 
__¤ş’
)

530 
__c
;

531 
__STRING2_COPY_ARR2
 
__sÿ2
;

532 
__STRING2_COPY_ARR3
 
__sÿ3
;

533 
__STRING2_COPY_ARR4
 
__sÿ4
;

534 
__STRING2_COPY_ARR5
 
__sÿ5
;

535 
__STRING2_COPY_ARR6
 
__sÿ6
;

536 
__STRING2_COPY_ARR7
 
__sÿ7
;

537 
__STRING2_COPY_ARR8
 
__sÿ8
;

538 } *
__u
 = (*è
__de¡
;

539 (è
__¤ş’
)

542 
__u
->
__c
 = '\0';

545 
__ex‹nsiÚ__
 
__u
->
__sÿ2
 = 
__¤c2
;

548 
__ex‹nsiÚ__
 
__u
->
__sÿ3
 = 
__¤c3
;

551 
__ex‹nsiÚ__
 
__u
->
__sÿ4
 = 
__¤c4
;

554 
__ex‹nsiÚ__
 
__u
->
__sÿ5
 = 
__¤c5
;

557 
__ex‹nsiÚ__
 
__u
->
__sÿ6
 = 
__¤c6
;

560 
__ex‹nsiÚ__
 
__u
->
__sÿ7
 = 
__¤c7
;

563 
__ex‹nsiÚ__
 
__u
->
__sÿ8
 = 
__¤c8
;

566  
__de¡
;

567 
	}
}

573 #ifdeà
__USE_GNU


574 #ià!
defšed
 
_HAVE_STRING_ARCH_¡pıy
 || defšed 
_FORCE_INLINES


575 #iâdeà
_HAVE_STRING_ARCH_¡pıy


576 #ià
__GNUC_PREREQ
 (3, 4)

577 
	#__¡pıy
(
de¡
, 
¤c
è
	`__butš_¡pıy
 (de¡, src)

	)

578 #–ià
__GNUC_PREREQ
 (3, 0)

579 
	#__¡pıy
(
de¡
, 
¤c
) \

580 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
¤c
) \

581 ? (
	`__¡ršg2_1b±r_p
 (
¤c
è&& 
	`¡¾’
 (src) + 1 <= 8 \

582 ? 
	`__butš_¡rıy
 (
de¡
, 
¤c
è+ 
	`¡¾’
 (src) \

583 : ((*è(
__mempıy
è(
de¡
, 
¤c
, 
	`¡¾’
 (src) + 1) \

585 : 
	`__¡pıy
 (
de¡
, 
¤c
)))

	)

587 
	#__¡pıy
(
de¡
, 
¤c
) \

588 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
¤c
) \

589 ? (
	`__¡ršg2_1b±r_p
 (
¤c
è&& 
	`¡¾’
 (src) + 1 <= 8 \

590 ? 
	`__¡pıy_sm®l
 (
de¡
, 
	`__¡pıy_¬gs
 (
¤c
), \

591 
	`¡¾’
 (
¤c
) + 1) \

592 : ((*è(
__mempıy
è(
de¡
, 
¤c
, 
	`¡¾’
 (src) + 1) \

594 : 
	`__¡pıy
 (
de¡
, 
¤c
)))

	)

598 
	#¡pıy
(
de¡
, 
¤c
è
	`__¡pıy
 (de¡, src)

	)

601 #ià!
__GNUC_PREREQ
 (3, 0è|| 
defšed
 
_FORCE_INLINES


602 #ià
_STRING_ARCH_uÇligÃd


603 #iâdeà
_FORCE_INLINES


604 
	#__¡pıy_¬gs
(
¤c
) \

605 
__ex‹nsiÚ__
 
	`__STRING2_SMALL_GET16
 (
¤c
, 0), \

606 
__ex‹nsiÚ__
 
	`__STRING2_SMALL_GET16
 (
¤c
, 4), \

607 
__ex‹nsiÚ__
 
	`__STRING2_SMALL_GET32
 (
¤c
, 0), \

608 
__ex‹nsiÚ__
 
	`__STRING2_SMALL_GET32
 (
¤c
, 4)

	)

610 
__STRING_INLINE
 *
__¡pıy_sm®l
 (*, 
__ušt16_t
, __uint16_t,

611 
__ušt32_t
, __ušt32_t, 
size_t
);

612 
__STRING_INLINE
 *

613 
	$__¡pıy_sm®l
 (*
__de¡
,

614 
__ušt16_t
 
__¤c0_2
, __ušt16_ˆ
__¤c4_2
,

615 
__ušt32_t
 
__¤c0_4
, __ušt32_ˆ
__¤c4_4
,

616 
size_t
 
__¤ş’
)

619 
__ui
;

620 
__usi
;

621 
__uc
;

622 
__c
;

623 } *
__u
 = (*è
__de¡
;

624 (è
__¤ş’
)

627 
__u
->
__uc
 = '\0';

630 
__u
->
__usi
 = 
__¤c0_2
;

631 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 1);

634 
__u
->
__usi
 = 
__¤c0_2
;

635 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 2);

636 
__u
->
__uc
 = '\0';

639 
__u
->
__ui
 = 
__¤c0_4
;

640 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 3);

643 
__u
->
__ui
 = 
__¤c0_4
;

644 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

645 
__u
->
__uc
 = '\0';

648 
__u
->
__ui
 = 
__¤c0_4
;

649 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

650 
__u
->
__usi
 = 
__¤c4_2
;

651 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 1);

654 
__u
->
__ui
 = 
__¤c0_4
;

655 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

656 
__u
->
__usi
 = 
__¤c4_2
;

657 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 2);

658 
__u
->
__uc
 = '\0';

661 
__u
->
__ui
 = 
__¤c0_4
;

662 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 4);

663 
__u
->
__ui
 = 
__¤c4_4
;

664 
__u
 = 
	`__ex‹nsiÚ__
 ((*) __u + 3);

667  &
__u
->
__c
;

668 
	}
}

670 #iâdeà
_FORCE_INLINES


671 
	#__¡pıy_¬gs
(
¤c
) \

672 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR2
) \

673 { { ((
__cÚ¡
 *è(
¤c
))[0], '\0' } }), \

674 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR3
) \

675 { { ((
__cÚ¡
 *è(
¤c
))[0], ((__const *) (src))[1], \

677 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR4
) \

678 { { ((
__cÚ¡
 *è(
¤c
))[0], ((__const *) (src))[1], \

679 ((
__cÚ¡
 *è(
¤c
))[2], '\0' } }), \

680 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR5
) \

681 { { ((
__cÚ¡
 *è(
¤c
))[0], ((__const *) (src))[1], \

682 ((
__cÚ¡
 *è(
¤c
))[2], ((__const *) (src))[3], \

684 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR6
) \

685 { { ((
__cÚ¡
 *è(
¤c
))[0], ((__const *) (src))[1], \

686 ((
__cÚ¡
 *è(
¤c
))[2], ((__const *) (src))[3], \

687 ((
__cÚ¡
 *è(
¤c
))[4], '\0' } }), \

688 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR7
) \

689 { { ((
__cÚ¡
 *è(
¤c
))[0], ((__const *) (src))[1], \

690 ((
__cÚ¡
 *è(
¤c
))[2], ((__const *) (src))[3], \

691 ((
__cÚ¡
 *è(
¤c
))[4], ((__const *) (src))[5], \

693 
	`__ex‹nsiÚ__
 ((
__STRING2_COPY_ARR8
) \

694 { { ((
__cÚ¡
 *è(
¤c
))[0], ((__const *) (src))[1], \

695 ((
__cÚ¡
 *è(
¤c
))[2], ((__const *) (src))[3], \

696 ((
__cÚ¡
 *è(
¤c
))[4], ((__const *) (src))[5], \

697 ((
__cÚ¡
 *è(
¤c
))[6], '\0' } })

	)

699 
__STRING_INLINE
 *
__¡pıy_sm®l
 (*, 
__STRING2_COPY_ARR2
,

700 
__STRING2_COPY_ARR3
,

701 
__STRING2_COPY_ARR4
,

702 
__STRING2_COPY_ARR5
,

703 
__STRING2_COPY_ARR6
,

704 
__STRING2_COPY_ARR7
,

705 
__STRING2_COPY_ARR8
, 
size_t
);

706 
__STRING_INLINE
 *

707 
	$__¡pıy_sm®l
 (*
__de¡
,

708 
__STRING2_COPY_ARR2
 
__¤c2
, 
__STRING2_COPY_ARR3
 
__¤c3
,

709 
__STRING2_COPY_ARR4
 
__¤c4
, 
__STRING2_COPY_ARR5
 
__¤c5
,

710 
__STRING2_COPY_ARR6
 
__¤c6
, 
__STRING2_COPY_ARR7
 
__¤c7
,

711 
__STRING2_COPY_ARR8
 
__¤c8
, 
size_t
 
__¤ş’
)

714 
__c
;

715 
__STRING2_COPY_ARR2
 
__sÿ2
;

716 
__STRING2_COPY_ARR3
 
__sÿ3
;

717 
__STRING2_COPY_ARR4
 
__sÿ4
;

718 
__STRING2_COPY_ARR5
 
__sÿ5
;

719 
__STRING2_COPY_ARR6
 
__sÿ6
;

720 
__STRING2_COPY_ARR7
 
__sÿ7
;

721 
__STRING2_COPY_ARR8
 
__sÿ8
;

722 } *
__u
 = (*è
__de¡
;

723 (è
__¤ş’
)

726 
__u
->
__c
 = '\0';

729 
__ex‹nsiÚ__
 
__u
->
__sÿ2
 = 
__¤c2
;

732 
__ex‹nsiÚ__
 
__u
->
__sÿ3
 = 
__¤c3
;

735 
__ex‹nsiÚ__
 
__u
->
__sÿ4
 = 
__¤c4
;

738 
__ex‹nsiÚ__
 
__u
->
__sÿ5
 = 
__¤c5
;

741 
__ex‹nsiÚ__
 
__u
->
__sÿ6
 = 
__¤c6
;

744 
__ex‹nsiÚ__
 
__u
->
__sÿ7
 = 
__¤c7
;

747 
__ex‹nsiÚ__
 
__u
->
__sÿ8
 = 
__¤c8
;

750  
__de¡
 + 
__¤ş’
 - 1;

751 
	}
}

759 #iâdeà
_HAVE_STRING_ARCH_¡ºıy


760 #ià
__GNUC_PREREQ
 (3, 2)

761 
	#¡ºıy
(
de¡
, 
¤c
, 
n
è
	`__butš_¡ºıy
 (de¡, src,‚)

	)

763 
	#¡ºıy
(
de¡
, 
¤c
, 
n
) \

764 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
¤c
è&& __butš_cÚ¡ªt_°(
n
) \

765 ? (
	`¡¾’
 (
¤c
è+ 1 >ğ((
size_t
è(
n
)) \

766 ? (*è
	`memıy
 (
de¡
, 
¤c
, 
n
) \

767 : 
	`¡ºıy
 (
de¡
, 
¤c
, 
n
)) \

768 : 
	`¡ºıy
 (
de¡
, 
¤c
, 
n
)))

	)

774 #iâdeà
_HAVE_STRING_ARCH_¡ºÿt


775 #ifdeà
_USE_STRING_ARCH_¡rchr


776 
	#¡ºÿt
(
de¡
, 
¤c
, 
n
) \

777 (
	`__ex‹nsiÚ__
 ({ *
__de¡
 = (
de¡
); \

778 
	`__butš_cÚ¡ªt_p
 (
¤c
è&& __butš_cÚ¡ªt_°(
n
) \

779 ? (
	`¡¾’
 (
¤c
è< ((
size_t
è(
n
)) \

780 ? 
	`¡rÿt
 (
__de¡
, 
¤c
) \

781 : (*((*è
	`__mempıy
 (
	`¡rchr
 (
__de¡
, '\0'), \

782 
¤c
, 
n
)èğ'\0', 
__de¡
)) \

783 : 
	`¡ºÿt
 (
de¡
, 
¤c
, 
n
); }))

	)

784 #–ià
__GNUC_PREREQ
 (3, 2)

785 
	#¡ºÿt
(
de¡
, 
¤c
, 
n
è
	`__butš_¡ºÿt
 (de¡, src,‚)

	)

787 
	#¡ºÿt
(
de¡
, 
¤c
, 
n
) \

788 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
¤c
è&& __butš_cÚ¡ªt_°(
n
) \

789 ? (
	`¡¾’
 (
¤c
è< ((
size_t
è(
n
)) \

790 ? 
	`¡rÿt
 (
de¡
, 
¤c
) \

791 : 
	`¡ºÿt
 (
de¡
, 
¤c
, 
n
)) \

792 : 
	`¡ºÿt
 (
de¡
, 
¤c
, 
n
)))

	)

798 #iâdeà
_HAVE_STRING_ARCH_¡rcmp


799 #ià
__GNUC_PREREQ
 (3, 2)

800 
	#¡rcmp
(
s1
, 
s2
) \

801 
__ex‹nsiÚ__
 \

802 ({ 
size_t
 
__s1_Ën
, 
__s2_Ën
; \

803 (
	`__butš_cÚ¡ªt_p
 (
s1
è&& __butš_cÚ¡ªt_°(
s2
) \

804 && (
__s1_Ën
 = 
	`¡¾’
 (
s1
), 
__s2_Ën
 = sŒËÀ(
s2
), \

805 (!
	`__¡ršg2_1b±r_p
 (
s1
è|| 
__s1_Ën
 >= 4) \

806 && (!
	`__¡ršg2_1b±r_p
 (
s2
è|| 
__s2_Ën
 >= 4)) \

807 ? 
	`__butš_¡rcmp
 (
s1
, 
s2
) \

808 : (
	`__butš_cÚ¡ªt_p
 (
s1
è&& 
	`__¡ršg2_1b±r_p
 (s1) \

809 && (
__s1_Ën
 = 
	`¡¾’
 (
s1
), __s1_len < 4) \

810 ? (
	`__butš_cÚ¡ªt_p
 (
s2
è&& 
	`__¡ršg2_1b±r_p
 (s2) \

811 ? 
	`__butš_¡rcmp
 (
s1
, 
s2
) \

812 : 
	`__¡rcmp_cg
 (
s1
, 
s2
, 
__s1_Ën
)) \

813 : (
	`__butš_cÚ¡ªt_p
 (
s2
è&& 
	`__¡ršg2_1b±r_p
 (s2) \

814 && (
__s2_Ën
 = 
	`¡¾’
 (
s2
), __s2_len < 4) \

815 ? (
	`__butš_cÚ¡ªt_p
 (
s1
è&& 
	`__¡ršg2_1b±r_p
 (s1) \

816 ? 
	`__butš_¡rcmp
 (
s1
, 
s2
) \

817 : 
	`__¡rcmp_gc
 (
s1
, 
s2
, 
__s2_Ën
)) \

818 : 
	`__butš_¡rcmp
 (
s1
, 
s2
)))); })

	)

820 
	#¡rcmp
(
s1
, 
s2
) \

821 
__ex‹nsiÚ__
 \

822 ({ 
size_t
 
__s1_Ën
, 
__s2_Ën
; \

823 (
	`__butš_cÚ¡ªt_p
 (
s1
è&& __butš_cÚ¡ªt_°(
s2
) \

824 && (
__s1_Ën
 = 
	`¡¾’
 (
s1
), 
__s2_Ën
 = sŒËÀ(
s2
), \

825 (!
	`__¡ršg2_1b±r_p
 (
s1
è|| 
__s1_Ën
 >= 4) \

826 && (!
	`__¡ršg2_1b±r_p
 (
s2
è|| 
__s2_Ën
 >= 4)) \

827 ? 
	`memcmp
 ((
__cÚ¡
 *è(
s1
), (__cÚ¡ *è(
s2
), \

828 (
__s1_Ën
 < 
__s2_Ën
 ? __s1_len : __s2_len) + 1) \

829 : (
	`__butš_cÚ¡ªt_p
 (
s1
è&& 
	`__¡ršg2_1b±r_p
 (s1) \

830 && (
__s1_Ën
 = 
	`¡¾’
 (
s1
), __s1_len < 4) \

831 ? (
	`__butš_cÚ¡ªt_p
 (
s2
è&& 
	`__¡ršg2_1b±r_p
 (s2) \

832 ? 
	`__¡rcmp_cc
 (
s1
, 
s2
, 
__s1_Ën
) \

833 : 
	`__¡rcmp_cg
 (
s1
, 
s2
, 
__s1_Ën
)) \

834 : (
	`__butš_cÚ¡ªt_p
 (
s2
è&& 
	`__¡ršg2_1b±r_p
 (s2) \

835 && (
__s2_Ën
 = 
	`¡¾’
 (
s2
), __s2_len < 4) \

836 ? (
	`__butš_cÚ¡ªt_p
 (
s1
è&& 
	`__¡ršg2_1b±r_p
 (s1) \

837 ? 
	`__¡rcmp_cc
 (
s1
, 
s2
, 
__s2_Ën
) \

838 : 
	`__¡rcmp_gc
 (
s1
, 
s2
, 
__s2_Ën
)) \

839 : 
	`¡rcmp
 (
s1
, 
s2
)))); })

	)

842 
	#__¡rcmp_cc
(
s1
, 
s2
, 
l
) \

843 (
	`__ex‹nsiÚ__
 ({ 
__»suÉ
 = \

844 (((
__cÚ¡
 *è(__cÚ¡ *è(
s1
))[0] \

845 - ((
__cÚ¡
 *è(__cÚ¡ *)(
s2
))[0]);\

846 ià(
l
 > 0 && 
__»suÉ
 == 0) \

848 
__»suÉ
 = (((
__cÚ¡
 *) \

849 (
__cÚ¡
 *è(
s1
))[1] \

850 - ((
__cÚ¡
 *) \

851 (
__cÚ¡
 *è(
s2
))[1]); \

852 ià(
l
 > 1 && 
__»suÉ
 == 0) \

854 
__»suÉ
 = \

855 (((
__cÚ¡
 *) \

856 (
__cÚ¡
 *è(
s1
))[2] \

857 - ((
__cÚ¡
 *) \

858 (
__cÚ¡
 *è(
s2
))[2]); \

859 ià(
l
 > 2 && 
__»suÉ
 == 0) \

860 
__»suÉ
 = \

861 (((
__cÚ¡
 *) \

862 (
__cÚ¡
 *è(
s1
))[3] \

863 - ((
__cÚ¡
 *) \

864 (
__cÚ¡
 *è(
s2
))[3]); \

867 
__»suÉ
; }))

	)

869 
	#__¡rcmp_cg
(
s1
, 
s2
, 
l1
) \

870 (
	`__ex‹nsiÚ__
 ({ 
__cÚ¡
 *
__s2
 = \

871 (
__cÚ¡
 *è(__cÚ¡ *è(
s2
); \

872 
__»suÉ
 = \

873 (((
__cÚ¡
 *è(__cÚ¡ *è(
s1
))[0] \

874 - 
__s2
[0]); \

875 ià(
l1
 > 0 && 
__»suÉ
 == 0) \

877 
__»suÉ
 = (((
__cÚ¡
 *) \

878 (
__cÚ¡
 *è(
s1
))[1] - 
__s2
[1]); \

879 ià(
l1
 > 1 && 
__»suÉ
 == 0) \

881 
__»suÉ
 = (((
__cÚ¡
 *) \

882 (
__cÚ¡
 *è(
s1
))[2] - 
__s2
[2]);\

883 ià(
l1
 > 2 && 
__»suÉ
 == 0) \

884 
__»suÉ
 = (((
__cÚ¡
 *) \

885 (
__cÚ¡
 *è(
s1
))[3] \

886 - 
__s2
[3]); \

889 
__»suÉ
; }))

	)

891 
	#__¡rcmp_gc
(
s1
, 
s2
, 
l2
) \

892 (
	`__ex‹nsiÚ__
 ({ 
__cÚ¡
 *
__s1
 = \

893 (
__cÚ¡
 *è(__cÚ¡ *è(
s1
); \

894 
__»suÉ
 = \

895 
__s1
[0] - ((
__cÚ¡
 *) \

896 (
__cÚ¡
 *è(
s2
))[0]; \

897 ià(
l2
 > 0 && 
__»suÉ
 == 0) \

899 
__»suÉ
 = (
__s1
[1] \

900 - ((
__cÚ¡
 *) \

901 (
__cÚ¡
 *è(
s2
))[1]); \

902 ià(
l2
 > 1 && 
__»suÉ
 == 0) \

904 
__»suÉ
 = \

905 (
__s1
[2] - ((
__cÚ¡
 *) \

906 (
__cÚ¡
 *è(
s2
))[2]); \

907 ià(
l2
 > 2 && 
__»suÉ
 == 0) \

908 
__»suÉ
 = \

909 (
__s1
[3] \

910 - ((
__cÚ¡
 *) \

911 (
__cÚ¡
 *è(
s2
))[3]); \

914 
__»suÉ
; }))

	)

919 #iâdeà
_HAVE_STRING_ARCH_¡ºcmp


920 
	#¡ºcmp
(
s1
, 
s2
, 
n
) \

921 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
n
) \

922 && ((
	`__butš_cÚ¡ªt_p
 (
s1
) \

923 && 
	`¡¾’
 (
s1
è< ((
size_t
è(
n
))) \

924 || (
	`__butš_cÚ¡ªt_p
 (
s2
) \

925 && 
	`¡¾’
 (
s2
è< ((
size_t
è(
n
)))) \

926 ? 
	`¡rcmp
 (
s1
, 
s2
è: 
	`¡ºcmp
 (s1, s2, 
n
)))

	)

932 #ià!
defšed
 
_HAVE_STRING_ARCH_¡rc¥n
 || defšed 
_FORCE_INLINES


933 #iâdeà
_HAVE_STRING_ARCH_¡rc¥n


934 #ià
__GNUC_PREREQ
 (3, 2)

935 
	#¡rc¥n
(
s
, 
»jeù
) \

936 
__ex‹nsiÚ__
 \

937 ({ 
__r0
, 
__r1
, 
__r2
; \

938 (
	`__butš_cÚ¡ªt_p
 (
»jeù
è&& 
	`__¡ršg2_1b±r_p
 (reject) \

939 ? ((
	`__butš_cÚ¡ªt_p
 (
s
è&& 
	`__¡ršg2_1b±r_p
 (s)) \

940 ? 
	`__butš_¡rc¥n
 (
s
, 
»jeù
) \

941 : ((
__r0
 = ((
__cÚ¡
 *è(
»jeù
))[0], __r0 == '\0') \

942 ? 
	`¡¾’
 (
s
) \

943 : ((
__r1
 = ((
__cÚ¡
 *è(
»jeù
))[1], __r1 == '\0') \

944 ? 
	`__¡rc¥n_c1
 (
s
, 
__r0
) \

945 : ((
__r2
 = ((
__cÚ¡
 *è(
»jeù
))[2], __r2 == '\0') \

946 ? 
	`__¡rc¥n_c2
 (
s
, 
__r0
, 
__r1
) \

947 : (((
__cÚ¡
 *è(
»jeù
))[3] == '\0' \

948 ? 
	`__¡rc¥n_c3
 (
s
, 
__r0
, 
__r1
, 
__r2
) \

949 : 
	`__butš_¡rc¥n
 (
s
, 
»jeù
)))))) \

950 : 
	`__butš_¡rc¥n
 (
s
, 
»jeù
)); })

	)

952 
	#¡rc¥n
(
s
, 
»jeù
) \

953 
__ex‹nsiÚ__
 \

954 ({ 
__r0
, 
__r1
, 
__r2
; \

955 (
	`__butš_cÚ¡ªt_p
 (
»jeù
è&& 
	`__¡ršg2_1b±r_p
 (reject) \

956 ? ((
__r0
 = ((
__cÚ¡
 *è(
»jeù
))[0], __r0 == '\0') \

957 ? 
	`¡¾’
 (
s
) \

958 : ((
__r1
 = ((
__cÚ¡
 *è(
»jeù
))[1], __r1 == '\0') \

959 ? 
	`__¡rc¥n_c1
 (
s
, 
__r0
) \

960 : ((
__r2
 = ((
__cÚ¡
 *è(
»jeù
))[2], __r2 == '\0') \

961 ? 
	`__¡rc¥n_c2
 (
s
, 
__r0
, 
__r1
) \

962 : (((
__cÚ¡
 *è(
»jeù
))[3] == '\0' \

963 ? 
	`__¡rc¥n_c3
 (
s
, 
__r0
, 
__r1
, 
__r2
) \

964 : 
	`¡rc¥n
 (
s
, 
»jeù
))))) \

965 : 
	`¡rc¥n
 (
s
, 
»jeù
)); })

	)

969 
__STRING_INLINE
 
size_t
 
__¡rc¥n_c1
 (
__cÚ¡
 *
__s
, 
__»jeù
);

970 
__STRING_INLINE
 
size_t


971 
	$__¡rc¥n_c1
 (
__cÚ¡
 *
__s
, 
__»jeù
)

973 
size_t
 
__»suÉ
 = 0;

974 
__s
[
__»suÉ
] !ğ'\0' && __s[__»suÉ] !ğ
__»jeù
)

975 ++
__»suÉ
;

976  
__»suÉ
;

977 
	}
}

979 
__STRING_INLINE
 
size_t
 
__¡rc¥n_c2
 (
__cÚ¡
 *
__s
, 
__»jeù1
,

980 
__»jeù2
);

981 
__STRING_INLINE
 
size_t


982 
	$__¡rc¥n_c2
 (
__cÚ¡
 *
__s
, 
__»jeù1
, 
__»jeù2
)

984 
size_t
 
__»suÉ
 = 0;

985 
__s
[
__»suÉ
] !ğ'\0' && __s[__»suÉ] !ğ
__»jeù1


986 && 
__s
[
__»suÉ
] !ğ
__»jeù2
)

987 ++
__»suÉ
;

988  
__»suÉ
;

989 
	}
}

991 
__STRING_INLINE
 
size_t
 
__¡rc¥n_c3
 (
__cÚ¡
 *
__s
, 
__»jeù1
,

992 
__»jeù2
, 
__»jeù3
);

993 
__STRING_INLINE
 
size_t


994 
	$__¡rc¥n_c3
 (
__cÚ¡
 *
__s
, 
__»jeù1
, 
__»jeù2
,

995 
__»jeù3
)

997 
size_t
 
__»suÉ
 = 0;

998 
__s
[
__»suÉ
] !ğ'\0' && __s[__»suÉ] !ğ
__»jeù1


999 && 
__s
[
__»suÉ
] !ğ
__»jeù2
 && __s[__»suÉ] !ğ
__»jeù3
)

1000 ++
__»suÉ
;

1001  
__»suÉ
;

1002 
	}
}

1008 #ià!
defšed
 
_HAVE_STRING_ARCH_¡r¥n
 || defšed 
_FORCE_INLINES


1009 #iâdeà
_HAVE_STRING_ARCH_¡r¥n


1010 #ià
__GNUC_PREREQ
 (3, 2)

1011 
	#¡r¥n
(
s
, 
acû±
) \

1012 
__ex‹nsiÚ__
 \

1013 ({ 
__a0
, 
__a1
, 
__a2
; \

1014 (
	`__butš_cÚ¡ªt_p
 (
acû±
è&& 
	`__¡ršg2_1b±r_p
 (accept) \

1015 ? ((
	`__butš_cÚ¡ªt_p
 (
s
è&& 
	`__¡ršg2_1b±r_p
 (s)) \

1016 ? 
	`__butš_¡r¥n
 (
s
, 
acû±
) \

1017 : ((
__a0
 = ((
__cÚ¡
 *è(
acû±
))[0], __a0 == '\0') \

1018 ? ((è(
s
), 0) \

1019 : ((
__a1
 = ((
__cÚ¡
 *è(
acû±
))[1], __a1 == '\0') \

1020 ? 
	`__¡r¥n_c1
 (
s
, 
__a0
) \

1021 : ((
__a2
 = ((
__cÚ¡
 *è(
acû±
))[2], __a2 == '\0') \

1022 ? 
	`__¡r¥n_c2
 (
s
, 
__a0
, 
__a1
) \

1023 : (((
__cÚ¡
 *è(
acû±
))[3] == '\0' \

1024 ? 
	`__¡r¥n_c3
 (
s
, 
__a0
, 
__a1
, 
__a2
) \

1025 : 
	`__butš_¡r¥n
 (
s
, 
acû±
)))))) \

1026 : 
	`__butš_¡r¥n
 (
s
, 
acû±
)); })

	)

1028 
	#¡r¥n
(
s
, 
acû±
) \

1029 
__ex‹nsiÚ__
 \

1030 ({ 
__a0
, 
__a1
, 
__a2
; \

1031 (
	`__butš_cÚ¡ªt_p
 (
acû±
è&& 
	`__¡ršg2_1b±r_p
 (accept) \

1032 ? ((
__a0
 = ((
__cÚ¡
 *è(
acû±
))[0], __a0 == '\0') \

1033 ? ((è(
s
), 0) \

1034 : ((
__a1
 = ((
__cÚ¡
 *è(
acû±
))[1], __a1 == '\0') \

1035 ? 
	`__¡r¥n_c1
 (
s
, 
__a0
) \

1036 : ((
__a2
 = ((
__cÚ¡
 *è(
acû±
))[2], __a2 == '\0') \

1037 ? 
	`__¡r¥n_c2
 (
s
, 
__a0
, 
__a1
) \

1038 : (((
__cÚ¡
 *è(
acû±
))[3] == '\0' \

1039 ? 
	`__¡r¥n_c3
 (
s
, 
__a0
, 
__a1
, 
__a2
) \

1040 : 
	`¡r¥n
 (
s
, 
acû±
))))) \

1041 : 
	`¡r¥n
 (
s
, 
acû±
)); })

	)

1045 
__STRING_INLINE
 
size_t
 
__¡r¥n_c1
 (
__cÚ¡
 *
__s
, 
__acû±
);

1046 
__STRING_INLINE
 
size_t


1047 
	$__¡r¥n_c1
 (
__cÚ¡
 *
__s
, 
__acû±
)

1049 
size_t
 
__»suÉ
 = 0;

1051 
__s
[
__»suÉ
] =ğ
__acû±
)

1052 ++
__»suÉ
;

1053  
__»suÉ
;

1054 
	}
}

1056 
__STRING_INLINE
 
size_t
 
__¡r¥n_c2
 (
__cÚ¡
 *
__s
, 
__acû±1
,

1057 
__acû±2
);

1058 
__STRING_INLINE
 
size_t


1059 
	$__¡r¥n_c2
 (
__cÚ¡
 *
__s
, 
__acû±1
, 
__acû±2
)

1061 
size_t
 
__»suÉ
 = 0;

1063 
__s
[
__»suÉ
] =ğ
__acû±1
 || __s[__»suÉ] =ğ
__acû±2
)

1064 ++
__»suÉ
;

1065  
__»suÉ
;

1066 
	}
}

1068 
__STRING_INLINE
 
size_t
 
__¡r¥n_c3
 (
__cÚ¡
 *
__s
, 
__acû±1
,

1069 
__acû±2
, 
__acû±3
);

1070 
__STRING_INLINE
 
size_t


1071 
	$__¡r¥n_c3
 (
__cÚ¡
 *
__s
, 
__acû±1
, 
__acû±2
, 
__acû±3
)

1073 
size_t
 
__»suÉ
 = 0;

1075 
__s
[
__»suÉ
] =ğ
__acû±1
 || __s[__»suÉ] =ğ
__acû±2


1076 || 
__s
[
__»suÉ
] =ğ
__acû±3
)

1077 ++
__»suÉ
;

1078  
__»suÉ
;

1079 
	}
}

1084 #ià!
defšed
 
_HAVE_STRING_ARCH_¡½brk
 || defšed 
_FORCE_INLINES


1085 #iâdeà
_HAVE_STRING_ARCH_¡½brk


1086 #ià
__GNUC_PREREQ
 (3, 2)

1087 
	#¡½brk
(
s
, 
acû±
) \

1088 
__ex‹nsiÚ__
 \

1089 ({ 
__a0
, 
__a1
, 
__a2
; \

1090 (
	`__butš_cÚ¡ªt_p
 (
acû±
è&& 
	`__¡ršg2_1b±r_p
 (accept) \

1091 ? ((
	`__butš_cÚ¡ªt_p
 (
s
è&& 
	`__¡ršg2_1b±r_p
 (s)) \

1092 ? 
	`__butš_¡½brk
 (
s
, 
acû±
) \

1093 : ((
__a0
 = ((
__cÚ¡
 *è(
acû±
))[0], __a0 == '\0') \

1094 ? ((è(
s
), (*è
NULL
) \

1095 : ((
__a1
 = ((
__cÚ¡
 *è(
acû±
))[1], __a1 == '\0') \

1096 ? 
	`__butš_¡rchr
 (
s
, 
__a0
) \

1097 : ((
__a2
 = ((
__cÚ¡
 *è(
acû±
))[2], __a2 == '\0') \

1098 ? 
	`__¡½brk_c2
 (
s
, 
__a0
, 
__a1
) \

1099 : (((
__cÚ¡
 *è(
acû±
))[3] == '\0' \

1100 ? 
	`__¡½brk_c3
 (
s
, 
__a0
, 
__a1
, 
__a2
) \

1101 : 
	`__butš_¡½brk
 (
s
, 
acû±
)))))) \

1102 : 
	`__butš_¡½brk
 (
s
, 
acû±
)); })

	)

1104 
	#¡½brk
(
s
, 
acû±
) \

1105 
__ex‹nsiÚ__
 \

1106 ({ 
__a0
, 
__a1
, 
__a2
; \

1107 (
	`__butš_cÚ¡ªt_p
 (
acû±
è&& 
	`__¡ršg2_1b±r_p
 (accept) \

1108 ? ((
__a0
 = ((
__cÚ¡
 *è(
acû±
))[0], __a0 == '\0') \

1109 ? ((è(
s
), (*è
NULL
) \

1110 : ((
__a1
 = ((
__cÚ¡
 *è(
acû±
))[1], __a1 == '\0') \

1111 ? 
	`¡rchr
 (
s
, 
__a0
) \

1112 : ((
__a2
 = ((
__cÚ¡
 *è(
acû±
))[2], __a2 == '\0') \

1113 ? 
	`__¡½brk_c2
 (
s
, 
__a0
, 
__a1
) \

1114 : (((
__cÚ¡
 *è(
acû±
))[3] == '\0' \

1115 ? 
	`__¡½brk_c3
 (
s
, 
__a0
, 
__a1
, 
__a2
) \

1116 : 
	`¡½brk
 (
s
, 
acû±
))))) \

1117 : 
	`¡½brk
 (
s
, 
acû±
)); })

	)

1121 
__STRING_INLINE
 *
__¡½brk_c2
 (
__cÚ¡
 *
__s
, 
__acû±1
,

1122 
__acû±2
);

1123 
__STRING_INLINE
 *

1124 
	$__¡½brk_c2
 (
__cÚ¡
 *
__s
, 
__acû±1
, 
__acû±2
)

1127 *
__s
 !ğ'\0' && *__ !ğ
__acû±1
 && *__ !ğ
__acû±2
)

1128 ++
__s
;

1129  *
__s
 =ğ'\0' ? 
NULL
 : (*è(
size_t
) __s;

1130 
	}
}

1132 
__STRING_INLINE
 *
__¡½brk_c3
 (
__cÚ¡
 *
__s
, 
__acû±1
,

1133 
__acû±2
, 
__acû±3
);

1134 
__STRING_INLINE
 *

1135 
	$__¡½brk_c3
 (
__cÚ¡
 *
__s
, 
__acû±1
, 
__acû±2
,

1136 
__acû±3
)

1139 *
__s
 !ğ'\0' && *__ !ğ
__acû±1
 && *__ !ğ
__acû±2


1140 && *
__s
 !ğ
__acû±3
)

1141 ++
__s
;

1142  *
__s
 =ğ'\0' ? 
NULL
 : (*è(
size_t
) __s;

1143 
	}
}

1149 #ià!
defšed
 
_HAVE_STRING_ARCH_¡r¡r
 && !
__GNUC_PREREQ
 (2, 97)

1150 
	#¡r¡r
(
hay¡ack
, 
ÃedË
) \

1151 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
ÃedË
è&& 
	`__¡ršg2_1b±r_p
 (needle) \

1152 ? (((
__cÚ¡
 *è(
ÃedË
))[0] == '\0' \

1153 ? (*è(
size_t
è(
hay¡ack
) \

1154 : (((
__cÚ¡
 *è(
ÃedË
))[1] == '\0' \

1155 ? 
	`¡rchr
 (
hay¡ack
, \

1156 ((
__cÚ¡
 *è(
ÃedË
))[0]) \

1157 : 
	`¡r¡r
 (
hay¡ack
, 
ÃedË
))) \

1158 : 
	`¡r¡r
 (
hay¡ack
, 
ÃedË
)))

	)

1162 #ià!
defšed
 
_HAVE_STRING_ARCH_¡¹ok_r
 || defšed 
_FORCE_INLINES


1163 #iâdeà
_HAVE_STRING_ARCH_¡¹ok_r


1164 
	#__¡¹ok_r
(
s
, 
£p
, 
Ãx
) \

1165 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
£p
è&& 
	`__¡ršg2_1b±r_p
 (sep) \

1166 && ((
__cÚ¡
 *è(
£p
))[0] != '\0' \

1167 && ((
__cÚ¡
 *è(
£p
))[1] == '\0' \

1168 ? 
	`__¡¹ok_r_1c
 (
s
, ((
__cÚ¡
 *è(
£p
))[0], 
Ãx
) \

1169 : 
	`__¡¹ok_r
 (
s
, 
£p
, 
Ãx
)))

	)

1172 
__STRING_INLINE
 *
__¡¹ok_r_1c
 (*
__s
, 
__£p
, **
__Ãx
);

1173 
__STRING_INLINE
 *

1174 
	$__¡¹ok_r_1c
 (*
__s
, 
__£p
, **
__Ãx
)

1176 *
__»suÉ
;

1177 ià(
__s
 =ğ
NULL
)

1178 
__s
 = *
__Ãx
;

1179 *
__s
 =ğ
__£p
)

1180 ++
__s
;

1181 
__»suÉ
 = 
NULL
;

1182 ià(*
__s
 != '\0')

1184 
__»suÉ
 = 
__s
++;

1185 *
__s
 != '\0')

1186 ià(*
__s
++ =ğ
__£p
)

1188 
__s
[-1] = '\0';

1192 *
__Ãx
 = 
__s
;

1193  
__»suÉ
;

1194 
	}
}

1195 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


1196 
	#¡¹ok_r
(
s
, 
£p
, 
Ãx
è
	`__¡¹ok_r
 (s, s•,‚ex)

	)

1201 #ià!
defšed
 
_HAVE_STRING_ARCH_¡r£p
 || defšed 
_FORCE_INLINES


1202 #iâdeà
_HAVE_STRING_ARCH_¡r£p


1204 *
__¡r£p_g
 (**
__¡ršgp
, 
__cÚ¡
 *
__d–im
);

1205 
	#__¡r£p
(
s
, 
»jeù
) \

1206 
__ex‹nsiÚ__
 \

1207 ({ 
__r0
, 
__r1
, 
__r2
; \

1208 (
	`__butš_cÚ¡ªt_p
 (
»jeù
è&& 
	`__¡ršg2_1b±r_p
 (reject) \

1209 && (
__r0
 = ((
__cÚ¡
 *è(
»jeù
))[0], \

1210 ((
__cÚ¡
 *è(
»jeù
))[0] != '\0') \

1211 ? ((
__r1
 = ((
__cÚ¡
 *è(
»jeù
))[1], \

1212 ((
__cÚ¡
 *è(
»jeù
))[1] == '\0') \

1213 ? 
	`__¡r£p_1c
 (
s
, 
__r0
) \

1214 : ((
__r2
 = ((
__cÚ¡
 *è(
»jeù
))[2], __r2 == '\0') \

1215 ? 
	`__¡r£p_2c
 (
s
, 
__r0
, 
__r1
) \

1216 : (((
__cÚ¡
 *è(
»jeù
))[3] == '\0' \

1217 ? 
	`__¡r£p_3c
 (
s
, 
__r0
, 
__r1
, 
__r2
) \

1218 : 
	`__¡r£p_g
 (
s
, 
»jeù
)))) \

1219 : 
	`__¡r£p_g
 (
s
, 
»jeù
)); })

	)

1222 
__STRING_INLINE
 *
__¡r£p_1c
 (**
__s
, 
__»jeù
);

1223 
__STRING_INLINE
 *

1224 
	$__¡r£p_1c
 (**
__s
, 
__»jeù
)

1226 *
__»tv®
 = *
__s
;

1227 ià(
__»tv®
 !ğ
NULL
 && (*
__s
 = 
	`¡rchr
 (__»tv®, 
__»jeù
)) != NULL)

1228 *(*
__s
)++ = '\0';

1229  
__»tv®
;

1230 
	}
}

1232 
__STRING_INLINE
 *
__¡r£p_2c
 (**
__s
, 
__»jeù1
, 
__»jeù2
);

1233 
__STRING_INLINE
 *

1234 
	$__¡r£p_2c
 (**
__s
, 
__»jeù1
, 
__»jeù2
)

1236 *
__»tv®
 = *
__s
;

1237 ià(
__»tv®
 !ğ
NULL
)

1239 *
__ı
 = 
__»tv®
;

1242 ià(*
__ı
 == '\0')

1244 
__ı
 = 
NULL
;

1247 ià(*
__ı
 =ğ
__»jeù1
 || *__ı =ğ
__»jeù2
)

1249 *
__ı
++ = '\0';

1252 ++
__ı
;

1254 *
__s
 = 
__ı
;

1256  
__»tv®
;

1257 
	}
}

1259 
__STRING_INLINE
 *
__¡r£p_3c
 (**
__s
, 
__»jeù1
, 
__»jeù2
,

1260 
__»jeù3
);

1261 
__STRING_INLINE
 *

1262 
	$__¡r£p_3c
 (**
__s
, 
__»jeù1
, 
__»jeù2
, 
__»jeù3
)

1264 *
__»tv®
 = *
__s
;

1265 ià(
__»tv®
 !ğ
NULL
)

1267 *
__ı
 = 
__»tv®
;

1270 ià(*
__ı
 == '\0')

1272 
__ı
 = 
NULL
;

1275 ià(*
__ı
 =ğ
__»jeù1
 || *__ı =ğ
__»jeù2
 || *__ı =ğ
__»jeù3
)

1277 *
__ı
++ = '\0';

1280 ++
__ı
;

1282 *
__s
 = 
__ı
;

1284  
__»tv®
;

1285 
	}
}

1286 #ifdeà
__USE_BSD


1287 
	#¡r£p
(
s
, 
»jeù
è
	`__¡r£p
 (s,„ejeù)

	)

1294 #ifdeà
__USE_MISC


1296 #ià!
defšed
 
_HAVE_STRING_ARCH_¡rdup
 || !defšed 
_HAVE_STRING_ARCH_¡ºdup


1297 
	#__Ãed_m®loc_ªd_ÿÎoc


	)

1298 
	~<¡dlib.h
>

1301 #iâdeà
_HAVE_STRING_ARCH_¡rdup


1303 *
	$__¡rdup
 (
__cÚ¡
 *
__¡ršg
è
__THROW
 
__©Œibu‹_m®loc__
;

1304 
	#__¡rdup
(
s
) \

1305 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
s
è&& 
	`__¡ršg2_1b±r_p
 (s) \

1306 ? (((
__cÚ¡
 *è(
s
))[0] == '\0' \

1307 ? (*è
	`ÿÎoc
 ((
size_t
) 1, (size_t) 1) \

1308 : ({ 
size_t
 
__Ën
 = 
	`¡¾’
 (
s
) + 1; \

1309 *
__»tv®
 = (*è
	`m®loc
 (
__Ën
); \

1310 ià(
__»tv®
 !ğ
NULL
) \

1311 
__»tv®
 = (*è
	`memıy
 (__»tv®, 
s
, 
__Ën
); \

1312 
__»tv®
; 
	}
})) \

1313 : 
	`__¡rdup
 (
s
)))

	)

1315 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


1316 
	#¡rdup
(
s
è
	`__¡rdup
 (s)

	)

1320 #iâdeà
_HAVE_STRING_ARCH_¡ºdup


1322 *
	$__¡ºdup
 (
__cÚ¡
 *
__¡ršg
, 
size_t
 
__n
)

1323 
__THROW
 
__©Œibu‹_m®loc__
;

1324 
	#__¡ºdup
(
s
, 
n
) \

1325 (
	`__ex‹nsiÚ__
 (
	`__butš_cÚ¡ªt_p
 (
s
è&& 
	`__¡ršg2_1b±r_p
 (s) \

1326 ? (((
__cÚ¡
 *è(
s
))[0] == '\0' \

1327 ? (*è
	`ÿÎoc
 ((
size_t
) 1, (size_t) 1) \

1328 : ({ 
size_t
 
__Ën
 = 
	`¡¾’
 (
s
) + 1; \

1329 
size_t
 
__n
 = (
n
); \

1330 *
__»tv®
; \

1331 ià(
__n
 < 
__Ën
) \

1332 
__Ën
 = 
__n
 + 1; \

1333 
__»tv®
 = (*è
	`m®loc
 (
__Ën
); \

1334 ià(
__»tv®
 !ğ
NULL
) \

1336 
__»tv®
[
__Ën
 - 1] = '\0'; \

1337 
__»tv®
 = (*è
	`memıy
 (__»tv®, 
s
, \

1338 
__Ën
 - 1); \

1340 
__»tv®
; 
	}
})) \

1341 : 
	`__¡ºdup
 (
s
, 
n
)))

	)

1343 #ifdeà
__USE_GNU


1344 
	#¡ºdup
(
s
, 
n
è
	`__¡ºdup
 (s,‚)

	)

1350 #iâdeà
_FORCE_INLINES


1351 #undeà
__STRING_INLINE


	@/usr/include/bits/string3.h

19 #iâdeà
_STRING_H


23 
__w¬ndeş
 (
__w¬n_mem£t_z”o_Ën
,

26 #iâdeà
__ılu¥lus


30 #undeà
memıy


31 #undeà
memmove


32 #undeà
mem£t


33 #undeà
¡rÿt


34 #undeà
¡rıy


35 #undeà
¡ºÿt


36 #undeà
¡ºıy


37 #ifdeà
__USE_GNU


38 #undeà
mempıy


39 #undeà
¡pıy


41 #ifdeà
__USE_BSD


42 #undeà
bcİy


43 #undeà
bz”o


48 
__ex‹º_®ways_šlše
 *

49 
__NTH
 (
	$memıy
 (*
__»¡riù
 
__de¡
, 
__cÚ¡
 *__»¡riù 
__¤c
,

50 
size_t
 
__Ën
))

52  
	`__butš___memıy_chk
 (
__de¡
, 
__¤c
, 
__Ën
, 
	`__bos0
 (__dest));

53 
	}
}

55 
__ex‹º_®ways_šlše
 *

56 
__NTH
 (
	$memmove
 (*
__de¡
, 
__cÚ¡
 *
__¤c
, 
size_t
 
__Ën
))

58  
	`__butš___memmove_chk
 (
__de¡
, 
__¤c
, 
__Ën
, 
	`__bos0
 (__dest));

59 
	}
}

61 #ifdeà
__USE_GNU


62 
__ex‹º_®ways_šlše
 *

63 
__NTH
 (
	$mempıy
 (*
__»¡riù
 
__de¡
, 
__cÚ¡
 *__»¡riù 
__¤c
,

64 
size_t
 
__Ën
))

66  
	`__butš___mempıy_chk
 (
__de¡
, 
__¤c
, 
__Ën
, 
	`__bos0
 (__dest));

67 
	}
}

76 
__ex‹º_®ways_šlše
 *

77 
__NTH
 (
	$mem£t
 (*
__de¡
, 
__ch
, 
size_t
 
__Ën
))

79 ià(
	`__butš_cÚ¡ªt_p
 (
__Ën
) && __len == 0

80 && (!
	`__butš_cÚ¡ªt_p
 (
__ch
) || __ch != 0))

82 
	`__w¬n_mem£t_z”o_Ën
 ();

83  
__de¡
;

85  
	`__butš___mem£t_chk
 (
__de¡
, 
__ch
, 
__Ën
, 
	`__bos0
 (__dest));

86 
	}
}

88 #ifdeà
__USE_BSD


89 
__ex‹º_®ways_šlše
 

90 
__NTH
 (
	$bcİy
 (
__cÚ¡
 *
__¤c
, *
__de¡
, 
size_t
 
__Ën
))

92 (è
	`__butš___memmove_chk
 (
__de¡
, 
__¤c
, 
__Ën
, 
	`__bos0
 (__dest));

93 
	}
}

95 
__ex‹º_®ways_šlše
 

96 
__NTH
 (
	$bz”o
 (*
__de¡
, 
size_t
 
__Ën
))

98 (è
	`__butš___mem£t_chk
 (
__de¡
, '\0', 
__Ën
, 
	`__bos0
 (__dest));

99 
	}
}

102 
__ex‹º_®ways_šlše
 *

103 
__NTH
 (
	$¡rıy
 (*
__»¡riù
 
__de¡
, 
__cÚ¡
 *__»¡riù 
__¤c
))

105  
	`__butš___¡rıy_chk
 (
__de¡
, 
__¤c
, 
	`__bos
 (__dest));

106 
	}
}

108 #ifdeà
__USE_GNU


109 
__ex‹º_®ways_šlše
 *

110 
__NTH
 (
	$¡pıy
 (*
__»¡riù
 
__de¡
, 
__cÚ¡
 *__»¡riù 
__¤c
))

112  
	`__butš___¡pıy_chk
 (
__de¡
, 
__¤c
, 
	`__bos
 (__dest));

113 
	}
}

117 
__ex‹º_®ways_šlše
 *

118 
__NTH
 (
	$¡ºıy
 (*
__»¡riù
 
__de¡
, 
__cÚ¡
 *__»¡riù 
__¤c
,

119 
size_t
 
__Ën
))

121  
	`__butš___¡ºıy_chk
 (
__de¡
, 
__¤c
, 
__Ën
, 
	`__bos
 (__dest));

122 
	}
}

125 *
	$__¡²ıy_chk
 (*
__de¡
, 
__cÚ¡
 *
__¤c
, 
size_t
 
__n
,

126 
size_t
 
__de¡Ën
è
__THROW
;

127 *
	`__REDIRECT_NTH
 (
__¡²ıy_®Ÿs
, (*
__de¡
,

128 
__cÚ¡
 *
__¤c
,

129 
size_t
 
__n
), 
¡²ıy
);

131 
__ex‹º_®ways_šlše
 *

132 
	`__NTH
 (
	$¡²ıy
 (*
__de¡
, 
__cÚ¡
 *
__¤c
, 
size_t
 
__n
))

134 ià(
	`__bos
 (
__de¡
è!ğ(
size_t
) -1

135 && (!
	`__butš_cÚ¡ªt_p
 (
__n
è|| __À<ğ
	`__bos
 (
__de¡
)))

136  
	`__¡²ıy_chk
 (
__de¡
, 
__¤c
, 
__n
, 
	`__bos
 (__dest));

137  
	`__¡²ıy_®Ÿs
 (
__de¡
, 
__¤c
, 
__n
);

138 
	}
}

141 
__ex‹º_®ways_šlše
 *

142 
__NTH
 (
	$¡rÿt
 (*
__»¡riù
 
__de¡
, 
__cÚ¡
 *__»¡riù 
__¤c
))

144  
	`__butš___¡rÿt_chk
 (
__de¡
, 
__¤c
, 
	`__bos
 (__dest));

145 
	}
}

148 
__ex‹º_®ways_šlše
 *

149 
__NTH
 (
	$¡ºÿt
 (*
__»¡riù
 
__de¡
, 
__cÚ¡
 *__»¡riù 
__¤c
,

150 
size_t
 
__Ën
))

152  
	`__butš___¡ºÿt_chk
 (
__de¡
, 
__¤c
, 
__Ën
, 
	`__bos
 (__dest));

153 
	}
}

	@/usr/include/bits/sys_errlist.h

20 #iâdeà
_STDIO_H


26 #ifdeà 
__USE_BSD


27 
sys_Ã¼
;

28 
__cÚ¡
 *__cÚ¡ 
sys_”¾i¡
[];

30 #ifdeà 
__USE_GNU


31 
_sys_Ã¼
;

32 
__cÚ¡
 *__cÚ¡ 
_sys_”¾i¡
[];

	@/usr/include/bits/types.h

24 #iâdef 
_BITS_TYPES_H


25 
	#_BITS_TYPES_H
 1

	)

27 
	~<ã©u»s.h
>

28 
	~<b™s/wÜdsize.h
>

31 
	t__u_ch¬
;

32 
	t__u_shÜt
;

33 
	t__u_št
;

34 
	t__u_lÚg
;

37 sigÃd 
	t__št8_t
;

38 
	t__ušt8_t
;

39 sigÃd 
	t__št16_t
;

40 
	t__ušt16_t
;

41 sigÃd 
	t__št32_t
;

42 
	t__ušt32_t
;

43 #ià
__WORDSIZE
 == 64

44 sigÃd 
	t__št64_t
;

45 
	t__ušt64_t
;

46 #–ià
defšed
 
__GLIBC_HAVE_LONG_LONG


47 
__ex‹nsiÚ__
 sigÃd 
	t__št64_t
;

48 
__ex‹nsiÚ__
 
	t__ušt64_t
;

52 #ià
__WORDSIZE
 == 64

53 
	t__quad_t
;

54 
	t__u_quad_t
;

55 #–ià
defšed
 
__GLIBC_HAVE_LONG_LONG


56 
__ex‹nsiÚ__
 
	t__quad_t
;

57 
__ex‹nsiÚ__
 
	t__u_quad_t
;

61 
	m__v®
[2];

62 } 
	t__quad_t
;

65 
__u_lÚg
 
	m__v®
[2];

66 } 
	t__u_quad_t
;

99 
	#__S16_TYPE
 

	)

100 
	#__U16_TYPE
 

	)

101 
	#__S32_TYPE
 

	)

102 
	#__U32_TYPE
 

	)

103 
	#__SLONGWORD_TYPE
 

	)

104 
	#__ULONGWORD_TYPE
 

	)

105 #ià
__WORDSIZE
 == 32

106 
	#__SQUAD_TYPE
 
__quad_t


	)

107 
	#__UQUAD_TYPE
 
__u_quad_t


	)

108 
	#__SWORD_TYPE
 

	)

109 
	#__UWORD_TYPE
 

	)

110 
	#__SLONG32_TYPE
 

	)

111 
	#__ULONG32_TYPE
 

	)

112 
	#__S64_TYPE
 
__quad_t


	)

113 
	#__U64_TYPE
 
__u_quad_t


	)

116 
	#__STD_TYPE
 
__ex‹nsiÚ__
 

	)

117 #–ià
__WORDSIZE
 == 64

118 
	t__SQUAD_TYPE
 

	)

119 
	t__UQUAD_TYPE
 

	)

120 
	t__SWORD_TYPE
 

	)

121 
	t__UWORD_TYPE
 

	)

122 
	t__SLONG32_TYPE
 

	)

123 
	t__ULONG32_TYPE
 

	)

124 
	t__S64_TYPE
 

	)

125 
	t__U64_TYPE
 

	)

127 
	t__STD_TYPE
 

	)

131 
	~<b™s/ty³sizes.h
>

134 
__STD_TYPE
 
	t__DEV_T_TYPE
 
	t__dev_t
;

135 
__STD_TYPE
 
__UID_T_TYPE
 
	g__uid_t
;

136 
__STD_TYPE
 
__GID_T_TYPE
 
	g__gid_t
;

137 
__STD_TYPE
 
__INO_T_TYPE
 
	g__šo_t
;

138 
__STD_TYPE
 
__INO64_T_TYPE
 
	g__šo64_t
;

139 
__STD_TYPE
 
__MODE_T_TYPE
 
	g__mode_t
;

140 
__STD_TYPE
 
__NLINK_T_TYPE
 
	g__Æšk_t
;

141 
__STD_TYPE
 
__OFF_T_TYPE
 
	g__off_t
;

142 
__STD_TYPE
 
__OFF64_T_TYPE
 
	g__off64_t
;

143 
__STD_TYPE
 
__PID_T_TYPE
 
	g__pid_t
;

144 
__STD_TYPE
 
__FSID_T_TYPE
 
	g__fsid_t
;

145 
__STD_TYPE
 
__CLOCK_T_TYPE
 
	g__şock_t
;

146 
__STD_TYPE
 
__RLIM_T_TYPE
 
	g__¾im_t
;

147 
__STD_TYPE
 
__RLIM64_T_TYPE
 
	g__¾im64_t
;

148 
__STD_TYPE
 
__ID_T_TYPE
 
	g__id_t
;

149 
__STD_TYPE
 
__TIME_T_TYPE
 
	g__time_t
;

150 
__STD_TYPE
 
__USECONDS_T_TYPE
 
	g__u£cÚds_t
;

151 
__STD_TYPE
 
__SUSECONDS_T_TYPE
 
	g__su£cÚds_t
;

153 
__STD_TYPE
 
__DADDR_T_TYPE
 
	g__daddr_t
;

154 
__STD_TYPE
 
__SWBLK_T_TYPE
 
	g__swblk_t
;

155 
__STD_TYPE
 
__KEY_T_TYPE
 
	g__key_t
;

158 
__STD_TYPE
 
__CLOCKID_T_TYPE
 
	g__şockid_t
;

161 
__STD_TYPE
 
__TIMER_T_TYPE
 
	g__tim”_t
;

164 
__STD_TYPE
 
__BLKSIZE_T_TYPE
 
	g__blksize_t
;

169 
__STD_TYPE
 
__BLKCNT_T_TYPE
 
	g__blkút_t
;

170 
__STD_TYPE
 
__BLKCNT64_T_TYPE
 
	g__blkút64_t
;

173 
__STD_TYPE
 
__FSBLKCNT_T_TYPE
 
	g__fsblkút_t
;

174 
__STD_TYPE
 
__FSBLKCNT64_T_TYPE
 
	g__fsblkút64_t
;

177 
__STD_TYPE
 
__FSFILCNT_T_TYPE
 
	g__fsfút_t
;

178 
__STD_TYPE
 
__FSFILCNT64_T_TYPE
 
	g__fsfút64_t
;

180 
__STD_TYPE
 
__SSIZE_T_TYPE
 
	g__ssize_t
;

184 
__off64_t
 
	t__loff_t
;

185 
__quad_t
 *
	t__qaddr_t
;

186 *
	t__ÿddr_t
;

189 
__STD_TYPE
 
__SWORD_TYPE
 
	g__šŒ_t
;

192 
__STD_TYPE
 
__U32_TYPE
 
	g__sockËn_t
;

195 #undeà
__STD_TYPE


	@/usr/include/bits/unistd.h

20 #iâdeà
_UNISTD_H


24 
ssize_t
 
	$__»ad_chk
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

25 
size_t
 
__buæ’
è
__wur
;

26 
ssize_t
 
	`__REDIRECT
 (
__»ad_®Ÿs
, (
__fd
, *
__buf
,

27 
size_t
 
__nby‹s
), 
»ad
è
__wur
;

28 
ssize_t
 
	`__REDIRECT
 (
__»ad_chk_w¬n
,

29 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

30 
size_t
 
__buæ’
), 
__»ad_chk
)

31 
__wur
 
	`__w¬Ç‰r
 ("read called with bigger†engthhan size of "

34 
__ex‹º_®ways_šlše
 
__wur
 
ssize_t


35 
	$»ad
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
)

37 ià(
	`__bos0
 (
__buf
è!ğ(
size_t
) -1)

39 ià(!
	`__butš_cÚ¡ªt_p
 (
__nby‹s
))

40  
	`__»ad_chk
 (
__fd
, 
__buf
, 
__nby‹s
, 
	`__bos0
 (__buf));

42 ià(
__nby‹s
 > 
	`__bos0
 (
__buf
))

43  
	`__»ad_chk_w¬n
 (
__fd
, 
__buf
, 
__nby‹s
, 
	`__bos0
 (__buf));

45  
	`__»ad_®Ÿs
 (
__fd
, 
__buf
, 
__nby‹s
);

46 
	}
}

48 #ifdeà
__USE_UNIX98


49 
ssize_t
 
	$__´—d_chk
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

50 
__off_t
 
__off£t
, 
size_t
 
__bufsize
è
__wur
;

51 
ssize_t
 
	$__´—d64_chk
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

52 
__off64_t
 
__off£t
, 
size_t
 
__bufsize
è
__wur
;

53 
ssize_t
 
	`__REDIRECT
 (
__´—d_®Ÿs
,

54 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

55 
__off_t
 
__off£t
), 
´—d
è
__wur
;

56 
ssize_t
 
	`__REDIRECT
 (
__´—d64_®Ÿs
,

57 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

58 
__off64_t
 
__off£t
), 
´—d64
è
__wur
;

59 
ssize_t
 
	`__REDIRECT
 (
__´—d_chk_w¬n
,

60 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

61 
__off_t
 
__off£t
, 
size_t
 
__bufsize
), 
__´—d_chk
)

62 
__wur
 
	`__w¬Ç‰r
 ("pread called with bigger†engthhan size of "

64 
ssize_t
 
	`__REDIRECT
 (
__´—d64_chk_w¬n
,

65 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

66 
__off64_t
 
__off£t
, 
size_t
 
__bufsize
),

67 
__´—d64_chk
)

68 
__wur
 
	`__w¬Ç‰r
 ("pread64 called with bigger†engthhan size of "

71 #iâdeà
__USE_FILE_OFFSET64


72 
__ex‹º_®ways_šlše
 
__wur
 
ssize_t


73 
	$´—d
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
, 
__off_t
 
__off£t
)

75 ià(
	`__bos0
 (
__buf
è!ğ(
size_t
) -1)

77 ià(!
	`__butš_cÚ¡ªt_p
 (
__nby‹s
))

78  
	`__´—d_chk
 (
__fd
, 
__buf
, 
__nby‹s
, 
__off£t
, 
	`__bos0
 (__buf));

80 iàĞ
__nby‹s
 > 
	`__bos0
 (
__buf
))

81  
	`__´—d_chk_w¬n
 (
__fd
, 
__buf
, 
__nby‹s
, 
__off£t
,

82 
	`__bos0
 (
__buf
));

84  
	`__´—d_®Ÿs
 (
__fd
, 
__buf
, 
__nby‹s
, 
__off£t
);

85 
	}
}

87 
__ex‹º_®ways_šlše
 
__wur
 
ssize_t


88 
	$´—d
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
, 
__off64_t
 
__off£t
)

90 ià(
	`__bos0
 (
__buf
è!ğ(
size_t
) -1)

92 ià(!
	`__butš_cÚ¡ªt_p
 (
__nby‹s
))

93  
	`__´—d64_chk
 (
__fd
, 
__buf
, 
__nby‹s
, 
__off£t
, 
	`__bos0
 (__buf));

95 iàĞ
__nby‹s
 > 
	`__bos0
 (
__buf
))

96  
	`__´—d64_chk_w¬n
 (
__fd
, 
__buf
, 
__nby‹s
, 
__off£t
,

97 
	`__bos0
 (
__buf
));

100  
	`__´—d64_®Ÿs
 (
__fd
, 
__buf
, 
__nby‹s
, 
__off£t
);

101 
	}
}

104 #ifdeà
__USE_LARGEFILE64


105 
__ex‹º_®ways_šlše
 
__wur
 
ssize_t


106 
	$´—d64
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
, 
__off64_t
 
__off£t
)

108 ià(
	`__bos0
 (
__buf
è!ğ(
size_t
) -1)

110 ià(!
	`__butš_cÚ¡ªt_p
 (
__nby‹s
))

111  
	`__´—d64_chk
 (
__fd
, 
__buf
, 
__nby‹s
, 
__off£t
, 
	`__bos0
 (__buf));

113 iàĞ
__nby‹s
 > 
	`__bos0
 (
__buf
))

114  
	`__´—d64_chk_w¬n
 (
__fd
, 
__buf
, 
__nby‹s
, 
__off£t
,

115 
	`__bos0
 (
__buf
));

118  
	`__´—d64_®Ÿs
 (
__fd
, 
__buf
, 
__nby‹s
, 
__off£t
);

119 
	}
}

123 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K


124 
ssize_t
 
	$__»adlšk_chk
 (
__cÚ¡
 *
__»¡riù
 
__·th
,

125 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
,

126 
size_t
 
__buæ’
)

127 
__THROW
 
	`__nÚnuÎ
 ((1, 2)è
__wur
;

128 
ssize_t
 
	`__REDIRECT_NTH
 (
__»adlšk_®Ÿs
,

129 (
__cÚ¡
 *
__»¡riù
 
__·th
,

130 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
), 
»adlšk
)

131 
	`__nÚnuÎ
 ((1, 2)è
__wur
;

132 
ssize_t
 
	`__REDIRECT_NTH
 (
__»adlšk_chk_w¬n
,

133 (
__cÚ¡
 *
__»¡riù
 
__·th
,

134 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
,

135 
size_t
 
__buæ’
), 
__»adlšk_chk
)

136 
	`__nÚnuÎ
 ((1, 2)è
__wur
 
	`__w¬Ç‰r
 ("readlink called with bigger†ength "

139 
__ex‹º_®ways_šlše
 
	`__nÚnuÎ
 ((1, 2)è
__wur
 
ssize_t


140 
	`__NTH
 (
	$»adlšk
 (
__cÚ¡
 *
__»¡riù
 
__·th
, *__»¡riù 
__buf
,

141 
size_t
 
__Ën
))

143 ià(
	`__bos
 (
__buf
è!ğ(
size_t
) -1)

145 ià(!
	`__butš_cÚ¡ªt_p
 (
__Ën
))

146  
	`__»adlšk_chk
 (
__·th
, 
__buf
, 
__Ën
, 
	`__bos
 (__buf));

148 iàĞ
__Ën
 > 
	`__bos
 (
__buf
))

149  
	`__»adlšk_chk_w¬n
 (
__·th
, 
__buf
, 
__Ën
, 
	`__bos
 (__buf));

151  
	`__»adlšk_®Ÿs
 (
__·th
, 
__buf
, 
__Ën
);

152 
	}
}

155 #ifdeà
__USE_ATFILE


156 
ssize_t
 
	$__»adlšk©_chk
 (
__fd
, 
__cÚ¡
 *
__»¡riù
 
__·th
,

157 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
,

158 
size_t
 
__buæ’
)

159 
__THROW
 
	`__nÚnuÎ
 ((2, 3)è
__wur
;

160 
ssize_t
 
	`__REDIRECT_NTH
 (
__»adlšk©_®Ÿs
,

161 (
__fd
, 
__cÚ¡
 *
__»¡riù
 
__·th
,

162 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
),

163 
»adlšk©
)

164 
	`__nÚnuÎ
 ((2, 3)è
__wur
;

165 
ssize_t
 
	`__REDIRECT_NTH
 (
__»adlšk©_chk_w¬n
,

166 (
__fd
, 
__cÚ¡
 *
__»¡riù
 
__·th
,

167 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
,

168 
size_t
 
__buæ’
), 
__»adlšk©_chk
)

169 
	`__nÚnuÎ
 ((2, 3)è
__wur
 
	`__w¬Ç‰r
 ("readlinkat called with bigger "

173 
__ex‹º_®ways_šlše
 
	`__nÚnuÎ
 ((2, 3)è
__wur
 
ssize_t


174 
	`__NTH
 (
	$»adlšk©
 (
__fd
, 
__cÚ¡
 *
__»¡riù
 
__·th
,

175 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
))

177 ià(
	`__bos
 (
__buf
è!ğ(
size_t
) -1)

179 ià(!
	`__butš_cÚ¡ªt_p
 (
__Ën
))

180  
	`__»adlšk©_chk
 (
__fd
, 
__·th
, 
__buf
, 
__Ën
, 
	`__bos
 (__buf));

182 ià(
__Ën
 > 
	`__bos
 (
__buf
))

183  
	`__»adlšk©_chk_w¬n
 (
__fd
, 
__·th
, 
__buf
, 
__Ën
,

184 
	`__bos
 (
__buf
));

186  
	`__»adlšk©_®Ÿs
 (
__fd
, 
__·th
, 
__buf
, 
__Ën
);

187 
	}
}

190 *
	$__g‘cwd_chk
 (*
__buf
, 
size_t
 
__size
, size_ˆ
__buæ’
)

191 
__THROW
 
__wur
;

192 *
	`__REDIRECT_NTH
 (
__g‘cwd_®Ÿs
,

193 (*
__buf
, 
size_t
 
__size
), 
g‘cwd
è
__wur
;

194 *
	`__REDIRECT_NTH
 (
__g‘cwd_chk_w¬n
,

195 (*
__buf
, 
size_t
 
__size
, size_ˆ
__buæ’
),

196 
__g‘cwd_chk
)

197 
__wur
 
	`__w¬Ç‰r
 ("getcwd caller with bigger†engthhan size of "

200 
__ex‹º_®ways_šlše
 
__wur
 *

201 
	`__NTH
 (
	$g‘cwd
 (*
__buf
, 
size_t
 
__size
))

203 ià(
	`__bos
 (
__buf
è!ğ(
size_t
) -1)

205 ià(!
	`__butš_cÚ¡ªt_p
 (
__size
))

206  
	`__g‘cwd_chk
 (
__buf
, 
__size
, 
	`__bos
 (__buf));

208 ià(
__size
 > 
	`__bos
 (
__buf
))

209  
	`__g‘cwd_chk_w¬n
 (
__buf
, 
__size
, 
	`__bos
 (__buf));

211  
	`__g‘cwd_®Ÿs
 (
__buf
, 
__size
);

212 
	}
}

214 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


215 *
	$__g‘wd_chk
 (*
__buf
, 
size_t
 
buæ’
)

216 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

217 *
	`__REDIRECT_NTH
 (
__g‘wd_w¬n
, (*
__buf
), 
g‘wd
)

218 
	`__nÚnuÎ
 ((1)è
__wur
 
	`__w¬Ç‰r
 ("please use getcwd instead,‡s getwd "

221 
__ex‹º_®ways_šlše
 
	`__nÚnuÎ
 ((1)è
__©Œibu‹_d•»ÿ‹d__
 
__wur
 *

222 
	`__NTH
 (
	$g‘wd
 (*
__buf
))

224 ià(
	`__bos
 (
__buf
è!ğ(
size_t
) -1)

225  
	`__g‘wd_chk
 (
__buf
, 
	`__bos
 (__buf));

226  
	`__g‘wd_w¬n
 (
__buf
);

227 
	}
}

230 
size_t
 
	$__cÚf¡r_chk
 (
__Çme
, *
__buf
, 
size_t
 
__Ën
,

231 
size_t
 
__buæ’
è
__THROW
;

232 
size_t
 
	`__REDIRECT_NTH
 (
__cÚf¡r_®Ÿs
, (
__Çme
, *
__buf
,

233 
size_t
 
__Ën
), 
cÚf¡r
);

234 
size_t
 
	`__REDIRECT_NTH
 (
__cÚf¡r_chk_w¬n
,

235 (
__Çme
, *
__buf
, 
size_t
 
__Ën
,

236 
size_t
 
__buæ’
), 
__cÚf¡r_chk
)

237 
	`__w¬Ç‰r
 ("confstr called with bigger†engthhan size of destination "

240 
__ex‹º_®ways_šlše
 
size_t


241 
	`__NTH
 (
	$cÚf¡r
 (
__Çme
, *
__buf
, 
size_t
 
__Ën
))

243 ià(
	`__bos
 (
__buf
è!ğ(
size_t
) -1)

245 ià(!
	`__butš_cÚ¡ªt_p
 (
__Ën
))

246  
	`__cÚf¡r_chk
 (
__Çme
, 
__buf
, 
__Ën
, 
	`__bos
 (__buf));

248 ià(
	`__bos
 (
__buf
è< 
__Ën
)

249  
	`__cÚf¡r_chk_w¬n
 (
__Çme
, 
__buf
, 
__Ën
, 
	`__bos
 (__buf));

251  
	`__cÚf¡r_®Ÿs
 (
__Çme
, 
__buf
, 
__Ën
);

252 
	}
}

255 
	$__g‘groups_chk
 (
__size
, 
__gid_t
 
__li¡
[], 
size_t
 
__li¡Ën
)

256 
__THROW
 
__wur
;

257 
	`__REDIRECT_NTH
 (
__g‘groups_®Ÿs
, (
__size
, 
__gid_t
 
__li¡
[]),

258 
g‘groups
è
__wur
;

259 
	`__REDIRECT_NTH
 (
__g‘groups_chk_w¬n
,

260 (
__size
, 
__gid_t
 
__li¡
[], 
size_t
 
__li¡Ën
),

261 
__g‘groups_chk
)

262 
__wur
 
	`__w¬Ç‰r
 ("getgroups called with bigger group counthan what "

265 
__ex‹º_®ways_šlše
 

266 
	`__NTH
 (
	$g‘groups
 (
__size
, 
__gid_t
 
__li¡
[]))

268 ià(
	`__bos
 (
__li¡
è!ğ(
size_t
) -1)

270 ià(!
	`__butš_cÚ¡ªt_p
 (
__size
) || __size < 0)

271  
	`__g‘groups_chk
 (
__size
, 
__li¡
, 
	`__bos
 (__list));

273 ià(
__size
 *  (
__gid_t
è> 
	`__bos
 (
__li¡
))

274  
	`__g‘groups_chk_w¬n
 (
__size
, 
__li¡
, 
	`__bos
 (__list));

276  
	`__g‘groups_®Ÿs
 (
__size
, 
__li¡
);

277 
	}
}

280 
	$__‰yÇme_r_chk
 (
__fd
, *
__buf
, 
size_t
 
__buæ’
,

281 
size_t
 
__Ä—l
è
__THROW
 
	`__nÚnuÎ
 ((2));

282 
	`__REDIRECT_NTH
 (
__‰yÇme_r_®Ÿs
, (
__fd
, *
__buf
,

283 
size_t
 
__buæ’
), 
‰yÇme_r
)

284 
	`__nÚnuÎ
 ((2));

285 
	`__REDIRECT_NTH
 (
__‰yÇme_r_chk_w¬n
,

286 (
__fd
, *
__buf
, 
size_t
 
__buæ’
,

287 
size_t
 
__Ä—l
), 
__‰yÇme_r_chk
)

288 
	`__nÚnuÎ
 ((2)è
	`__w¬Ç‰r
 ("ttyname_r called with bigger buflenhan "

291 
__ex‹º_®ways_šlše
 

292 
	`__NTH
 (
	$‰yÇme_r
 (
__fd
, *
__buf
, 
size_t
 
__buæ’
))

294 ià(
	`__bos
 (
__buf
è!ğ(
size_t
) -1)

296 ià(!
	`__butš_cÚ¡ªt_p
 (
__buæ’
))

297  
	`__‰yÇme_r_chk
 (
__fd
, 
__buf
, 
__buæ’
, 
	`__bos
 (__buf));

299 ià(
__buæ’
 > 
	`__bos
 (
__buf
))

300  
	`__‰yÇme_r_chk_w¬n
 (
__fd
, 
__buf
, 
__buæ’
, 
	`__bos
 (__buf));

302  
	`__‰yÇme_r_®Ÿs
 (
__fd
, 
__buf
, 
__buæ’
);

303 
	}
}

306 #ià
defšed
 
__USE_REENTRANT
 || defšed 
__USE_POSIX199506


307 
	$__g‘logš_r_chk
 (*
__buf
, 
size_t
 
__buæ’
, size_ˆ
__Ä—l
)

308 
	`__nÚnuÎ
 ((1));

309 
	`__REDIRECT
 (
__g‘logš_r_®Ÿs
, (*
__buf
, 
size_t
 
__buæ’
),

310 
g‘logš_r
è
	`__nÚnuÎ
 ((1));

311 
	`__REDIRECT
 (
__g‘logš_r_chk_w¬n
,

312 (*
__buf
, 
size_t
 
__buæ’
, size_ˆ
__Ä—l
),

313 
__g‘logš_r_chk
)

314 
	`__nÚnuÎ
 ((1)è
	`__w¬Ç‰r
 ("getlogin_r called with bigger buflenhan "

317 
__ex‹º_®ways_šlše
 

318 
	$g‘logš_r
 (*
__buf
, 
size_t
 
__buæ’
)

320 ià(
	`__bos
 (
__buf
è!ğ(
size_t
) -1)

322 ià(!
	`__butš_cÚ¡ªt_p
 (
__buæ’
))

323  
	`__g‘logš_r_chk
 (
__buf
, 
__buæ’
, 
	`__bos
 (__buf));

325 ià(
__buæ’
 > 
	`__bos
 (
__buf
))

326  
	`__g‘logš_r_chk_w¬n
 (
__buf
, 
__buæ’
, 
	`__bos
 (__buf));

328  
	`__g‘logš_r_®Ÿs
 (
__buf
, 
__buæ’
);

329 
	}
}

333 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_UNIX98


334 
	$__g‘ho¡Çme_chk
 (*
__buf
, 
size_t
 
__buæ’
, size_ˆ
__Ä—l
)

335 
__THROW
 
	`__nÚnuÎ
 ((1));

336 
	`__REDIRECT_NTH
 (
__g‘ho¡Çme_®Ÿs
, (*
__buf
, 
size_t
 
__buæ’
),

337 
g‘ho¡Çme
è
	`__nÚnuÎ
 ((1));

338 
	`__REDIRECT_NTH
 (
__g‘ho¡Çme_chk_w¬n
,

339 (*
__buf
, 
size_t
 
__buæ’
, size_ˆ
__Ä—l
),

340 
__g‘ho¡Çme_chk
)

341 
	`__nÚnuÎ
 ((1)è
	`__w¬Ç‰r
 ("gethostname called with bigger buflenhan "

344 
__ex‹º_®ways_šlše
 

345 
	`__NTH
 (
	$g‘ho¡Çme
 (*
__buf
, 
size_t
 
__buæ’
))

347 ià(
	`__bos
 (
__buf
è!ğ(
size_t
) -1)

349 ià(!
	`__butš_cÚ¡ªt_p
 (
__buæ’
))

350  
	`__g‘ho¡Çme_chk
 (
__buf
, 
__buæ’
, 
	`__bos
 (__buf));

352 ià(
__buæ’
 > 
	`__bos
 (
__buf
))

353  
	`__g‘ho¡Çme_chk_w¬n
 (
__buf
, 
__buæ’
, 
	`__bos
 (__buf));

355  
	`__g‘ho¡Çme_®Ÿs
 (
__buf
, 
__buæ’
);

356 
	}
}

360 #ià
defšed
 
__USE_BSD
 || (defšed 
__USE_XOPEN
 && !defšed 
__USE_UNIX98
)

361 
	$__g‘domašÇme_chk
 (*
__buf
, 
size_t
 
__buæ’
, size_ˆ
__Ä—l
)

362 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

363 
	`__REDIRECT_NTH
 (
__g‘domašÇme_®Ÿs
, (*
__buf
,

364 
size_t
 
__buæ’
),

365 
g‘domašÇme
è
	`__nÚnuÎ
 ((1)è
__wur
;

366 
	`__REDIRECT_NTH
 (
__g‘domašÇme_chk_w¬n
,

367 (*
__buf
, 
size_t
 
__buæ’
, size_ˆ
__Ä—l
),

368 
__g‘domašÇme_chk
)

369 
	`__nÚnuÎ
 ((1)è
__wur
 
	`__w¬Ç‰r
 ("getdomainname called with bigger "

373 
__ex‹º_®ways_šlše
 

374 
	`__NTH
 (
	$g‘domašÇme
 (*
__buf
, 
size_t
 
__buæ’
))

376 ià(
	`__bos
 (
__buf
è!ğ(
size_t
) -1)

378 ià(!
	`__butš_cÚ¡ªt_p
 (
__buæ’
))

379  
	`__g‘domašÇme_chk
 (
__buf
, 
__buæ’
, 
	`__bos
 (__buf));

381 ià(
__buæ’
 > 
	`__bos
 (
__buf
))

382  
	`__g‘domašÇme_chk_w¬n
 (
__buf
, 
__buæ’
, 
	`__bos
 (__buf));

384  
	`__g‘domašÇme_®Ÿs
 (
__buf
, 
__buæ’
);

385 
	}
}

	@/usr/include/bits/waitflags.h

20 #ià!
defšed
 
_SYS_WAIT_H
 && !defšed 
_STDLIB_H


26 
	#WNOHANG
 1

	)

27 
	#WUNTRACED
 2

	)

30 
	#WSTOPPED
 2

	)

31 
	#WEXITED
 4

	)

32 
	#WCONTINUED
 8

	)

33 
	#WNOWAIT
 0x01000000

	)

35 
	#__WNOTHREAD
 0x20000000

	)

37 
	#__WALL
 0x40000000

	)

38 
	#__WCLONE
 0x80000000

	)

	@/usr/include/bits/waitstatus.h

20 #ià!
defšed
 
_SYS_WAIT_H
 && !defšed 
_STDLIB_H


29 
	#__WEXITSTATUS
(
¡©us
è(((¡©usè& 0xff00è>> 8)

	)

32 
	#__WTERMSIG
(
¡©us
è((¡©usè& 0x7f)

	)

35 
	#__WSTOPSIG
(
¡©us
è
	`__WEXITSTATUS
(¡©us)

	)

38 
	#__WIFEXITED
(
¡©us
è(
	`__WTERMSIG
(¡©usè=ğ0)

	)

41 
	#__WIFSIGNALED
(
¡©us
) \

42 (((sigÃd è(((
¡©us
è& 0x7fè+ 1è>> 1è> 0)

	)

45 
	#__WIFSTOPPED
(
¡©us
è(((¡©usè& 0xffè=ğ0x7f)

	)

49 #ifdeà
WCONTINUED


50 
	#__WIFCONTINUED
(
¡©us
è((¡©usè=ğ
__W_CONTINUED
)

	)

54 
	#__WCOREDUMP
(
¡©us
è((¡©usè& 
__WCOREFLAG
)

	)

57 
	#__W_EXITCODE
(
»t
, 
sig
è(Ô‘è<< 8 | (sig))

	)

58 
	#__W_STOPCODE
(
sig
è((sigè<< 8 | 0x7f)

	)

59 
	#__W_CONTINUED
 0xffff

	)

60 
	#__WCOREFLAG
 0x80

	)

63 #ifdef 
__USE_BSD


65 
	~<’dŸn.h
>

67 
	uwa™


69 
	mw_¡©us
;

72 #if 
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


73 
	m__w_‹rmsig
:7;

74 
	m__w_cÜedump
:1;

75 
	m__w_»tcode
:8;

78 #if 
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


80 
	m__w_»tcode
:8;

81 
	m__w_cÜedump
:1;

82 
	m__w_‹rmsig
:7;

84 } 
	m__wa™_‹rmš©ed
;

87 #if 
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


88 
	m__w_¡İv®
:8;

89 
	m__w_¡İsig
:8;

92 #if 
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


94 
	m__w_¡İsig
:8;

95 
	m__w_¡İv®
:8;

97 } 
	m__wa™_¡İ³d
;

100 
	#w_‹rmsig
 
__wa™_‹rmš©ed
.
__w_‹rmsig


	)

101 
	#w_cÜedump
 
__wa™_‹rmš©ed
.
__w_cÜedump


	)

102 
	#w_»tcode
 
__wa™_‹rmš©ed
.
__w_»tcode


	)

103 
	#w_¡İsig
 
__wa™_¡İ³d
.
__w_¡İsig


	)

104 
	#w_¡İv®
 
__wa™_¡İ³d
.
__w_¡İv®


	)

	@/usr/include/bits/wchar.h

20 #iâdeà
_BITS_WCHAR_H


21 
	#_BITS_WCHAR_H
 1

	)

23 
	#__WCHAR_MIN
 (-2147483647 - 1)

	)

24 
	#__WCHAR_MAX
 (2147483647)

	)

	@/usr/include/bits/wordsize.h

3 #ià
defšed
 
__x86_64__


4 
	#__WORDSIZE
 64

	)

5 
	#__WORDSIZE_COMPAT32
 1

	)

7 
	#__WORDSIZE
 32

	)

	@/usr/include/features.h

19 #iâdef 
_FEATURES_H


20 
	#_FEATURES_H
 1

	)

96 #undeà
__USE_ISOC99


97 #undeà
__USE_ISOC95


98 #undeà
__USE_POSIX


99 #undeà
__USE_POSIX2


100 #undeà
__USE_POSIX199309


101 #undeà
__USE_POSIX199506


102 #undeà
__USE_XOPEN


103 #undeà
__USE_XOPEN_EXTENDED


104 #undeà
__USE_UNIX98


105 #undeà
__USE_XOPEN2K


106 #undeà
__USE_XOPEN2KXSI


107 #undeà
__USE_XOPEN2K8


108 #undeà
__USE_XOPEN2K8XSI


109 #undeà
__USE_LARGEFILE


110 #undeà
__USE_LARGEFILE64


111 #undeà
__USE_FILE_OFFSET64


112 #undeà
__USE_BSD


113 #undeà
__USE_SVID


114 #undeà
__USE_MISC


115 #undeà
__USE_ATFILE


116 #undeà
__USE_GNU


117 #undeà
__USE_REENTRANT


118 #undeà
__USE_FORTIFY_LEVEL


119 #undeà
__FAVOR_BSD


120 #undeà
__KERNEL_STRICT_NAMES


124 #iâdeà
_LOOSE_KERNEL_NAMES


125 
	#__KERNEL_STRICT_NAMES


	)

129 
	#__USE_ANSI
 1

	)

138 #ià
defšed
 
__GNUC__
 && defšed 
__GNUC_MINOR__


139 
	#__GNUC_PREREQ
(
maj
, 
mš
) \

140 ((
__GNUC__
 << 16è+ 
__GNUC_MINOR__
 >ğ((
maj
è<< 16è+ (
mš
))

	)

142 
	#__GNUC_PREREQ
(
maj
, 
mš
è0

	)

147 #ià
defšed
 
_BSD_SOURCE
 && \

148 !(
defšed
 
	g_POSIX_SOURCE
 || defšed 
	g_POSIX_C_SOURCE
 || \

149 
defšed
 
	g_XOPEN_SOURCE
 || defšed 
	g_GNU_SOURCE
 || defšed 
	g_SVID_SOURCE
)

150 
	#__FAVOR_BSD
 1

	)

154 #ifdeà
_GNU_SOURCE


155 #undeà
_ISOC95_SOURCE


156 
	#_ISOC95_SOURCE
 1

	)

157 #undeà
_ISOC99_SOURCE


158 
	#_ISOC99_SOURCE
 1

	)

159 #undeà
_POSIX_SOURCE


160 
	#_POSIX_SOURCE
 1

	)

161 #undeà
_POSIX_C_SOURCE


162 
	#_POSIX_C_SOURCE
 200809L

	)

163 #undeà
_XOPEN_SOURCE


164 
	#_XOPEN_SOURCE
 700

	)

165 #undeà
_XOPEN_SOURCE_EXTENDED


166 
	#_XOPEN_SOURCE_EXTENDED
 1

	)

167 #undeà
_LARGEFILE64_SOURCE


168 
	#_LARGEFILE64_SOURCE
 1

	)

169 #undeà
_BSD_SOURCE


170 
	#_BSD_SOURCE
 1

	)

171 #undeà
_SVID_SOURCE


172 
	#_SVID_SOURCE
 1

	)

173 #undeà
_ATFILE_SOURCE


174 
	#_ATFILE_SOURCE
 1

	)

179 #ià(!
defšed
 
__STRICT_ANSI__
 && !defšed 
_ISOC99_SOURCE
 && \

180 !
defšed
 
	g_POSIX_SOURCE
 && !defšed 
	g_POSIX_C_SOURCE
 && \

181 !
defšed
 
	g_XOPEN_SOURCE
 && !defšed 
	g_BSD_SOURCE
 && !defšed 
	g_SVID_SOURCE
)

182 
	#_BSD_SOURCE
 1

	)

183 
	#_SVID_SOURCE
 1

	)

190 #ià(
defšed
 
_ISOC99_SOURCE
 || defšed 
_ISOC9X_SOURCE
 \

191 || (
defšed
 
	g__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L))

192 
	#__USE_ISOC99
 1

	)

196 #ià(
defšed
 
_ISOC99_SOURCE
 || defšed 
_ISOC9X_SOURCE
 \

197 || (
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199409L))

198 
	#__USE_ISOC95
 1

	)

203 #ià((!
defšed
 
__STRICT_ANSI__
 || (
_XOPEN_SOURCE
 - 0) >= 500) && \

204 !
defšed
 
_POSIX_SOURCE
 && !defšed 
_POSIX_C_SOURCE
)

205 
	#_POSIX_SOURCE
 1

	)

206 #ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 500

207 
	#_POSIX_C_SOURCE
 2

	)

208 #–ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 600

209 
	#_POSIX_C_SOURCE
 199506L

	)

210 #–ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 700

211 
	#_POSIX_C_SOURCE
 200112L

	)

213 
	#_POSIX_C_SOURCE
 200809L

	)

215 
	#__USE_POSIX_IMPLICITLY
 1

	)

218 #ià
defšed
 
_POSIX_SOURCE
 || 
_POSIX_C_SOURCE
 >ğ1 || defšed 
_XOPEN_SOURCE


219 
	#__USE_POSIX
 1

	)

222 #ià
defšed
 
_POSIX_C_SOURCE
 && _POSIX_C_SOURCE >ğ2 || defšed 
_XOPEN_SOURCE


223 
	#__USE_POSIX2
 1

	)

226 #ià(
_POSIX_C_SOURCE
 - 0) >= 199309L

227 
	#__USE_POSIX199309
 1

	)

230 #ià(
_POSIX_C_SOURCE
 - 0) >= 199506L

231 
	#__USE_POSIX199506
 1

	)

234 #ià(
_POSIX_C_SOURCE
 - 0) >= 200112L

235 
	#__USE_XOPEN2K
 1

	)

236 #undeà
__USE_ISOC95


237 
	#__USE_ISOC95
 1

	)

238 #undeà
__USE_ISOC99


239 
	#__USE_ISOC99
 1

	)

242 #ià(
_POSIX_C_SOURCE
 - 0) >= 200809L

243 
	#__USE_XOPEN2K8
 1

	)

244 #undeà
_ATFILE_SOURCE


245 
	#_ATFILE_SOURCE
 1

	)

248 #ifdef 
_XOPEN_SOURCE


249 
	#__USE_XOPEN
 1

	)

250 #ià(
_XOPEN_SOURCE
 - 0) >= 500

251 
	#__USE_XOPEN_EXTENDED
 1

	)

252 
	#__USE_UNIX98
 1

	)

253 #undeà
_LARGEFILE_SOURCE


254 
	#_LARGEFILE_SOURCE
 1

	)

255 #ià(
_XOPEN_SOURCE
 - 0) >= 600

256 #ià(
_XOPEN_SOURCE
 - 0) >= 700

257 
	#__USE_XOPEN2K8
 1

	)

258 
	#__USE_XOPEN2K8XSI
 1

	)

260 
	#__USE_XOPEN2K
 1

	)

261 
	#__USE_XOPEN2KXSI
 1

	)

262 #undeà
__USE_ISOC95


263 
	#__USE_ISOC95
 1

	)

264 #undeà
__USE_ISOC99


265 
	#__USE_ISOC99
 1

	)

268 #ifdeà
_XOPEN_SOURCE_EXTENDED


269 
	#__USE_XOPEN_EXTENDED
 1

	)

274 #ifdeà
_LARGEFILE_SOURCE


275 
	#__USE_LARGEFILE
 1

	)

278 #ifdeà
_LARGEFILE64_SOURCE


279 
	#__USE_LARGEFILE64
 1

	)

282 #ià
defšed
 
_FILE_OFFSET_BITS
 && _FILE_OFFSET_BITS == 64

283 
	#__USE_FILE_OFFSET64
 1

	)

286 #ià
defšed
 
_BSD_SOURCE
 || defšed 
_SVID_SOURCE


287 
	#__USE_MISC
 1

	)

290 #ifdef 
_BSD_SOURCE


291 
	#__USE_BSD
 1

	)

294 #ifdef 
_SVID_SOURCE


295 
	#__USE_SVID
 1

	)

298 #ifdef 
_ATFILE_SOURCE


299 
	#__USE_ATFILE
 1

	)

302 #ifdef 
_GNU_SOURCE


303 
	#__USE_GNU
 1

	)

306 #ià
defšed
 
_REENTRANT
 || defšed 
_THREAD_SAFE


307 
	#__USE_REENTRANT
 1

	)

310 #ià
defšed
 
_FORTIFY_SOURCE
 && _FORTIFY_SOURCE > 0 \

311 && 
defšed
 
__OPTIMIZE__
 && __OPTIMIZE__ > 0

312 #ià!
__GNUC_PREREQ
 (4, 1)

313 #ifdeà
__GNUC_RH_RELEASE__


314 #w¬nšg 
_FORTIFY_SOURCE
 
suµÜ‹d
 
Úly
 
w™h
 
GCC
 4.1 
ªd
 
Ï‹r


316 
	#__USE_FORTIFY_LEVEL
 0

	)

317 #–ià
_FORTIFY_SOURCE
 > 1

318 
	#__USE_FORTIFY_LEVEL
 2

	)

320 
	#__USE_FORTIFY_LEVEL
 1

	)

323 
	#__USE_FORTIFY_LEVEL
 0

	)

327 
	#__STDC_IEC_559__
 1

	)

328 
	#__STDC_IEC_559_COMPLEX__
 1

	)

331 
	#__STDC_ISO_10646__
 200009L

	)

339 #undeà
__GNU_LIBRARY__


340 
	#__GNU_LIBRARY__
 6

	)

344 
	#__GLIBC__
 2

	)

345 
	#__GLIBC_MINOR__
 12

	)

347 
	#__GLIBC_PREREQ
(
maj
, 
mš
) \

348 ((
__GLIBC__
 << 16è+ 
__GLIBC_MINOR__
 >ğ((
maj
è<< 16è+ (
mš
))

	)

351 #ià
defšed
 
__GNUC__
 \

352 || (
defšed
 
	g__PGI
 && defšed 
	g__i386__
 ) \

353 || (
defšed
 
	g__INTEL_COMPILER
 && (defšed 
	g__i386__
 || defšed 
	g__Ÿ64__
)) \

354 || (
defšed
 
	g__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L)

355 
	#__GLIBC_HAVE_LONG_LONG
 1

	)

359 #iâdeà
__ASSEMBLER__


360 #iâdeà
_SYS_CDEFS_H


361 
	~<sys/cdefs.h
>

366 #ià
defšed
 
__USE_FILE_OFFSET64
 && !defšed 
__REDIRECT


367 
	#__USE_LARGEFILE
 1

	)

368 
	#__USE_LARGEFILE64
 1

	)

374 #ià
__GNUC_PREREQ
 (2, 7è&& 
defšed
 
__OPTIMIZE__
 \

375 && !
defšed
 
	g__OPTIMIZE_SIZE__
 && !defšed 
	g__NO_INLINE__
 \

376 && 
defšed
 
	g__ex‹º_šlše


377 
	#__USE_EXTERN_INLINES
 1

	)

385 
	~<gnu/¡ubs.h
>

	@/usr/include/getopt.h

21 #iâdeà
_GETOPT_H


23 #iâdeà
__Ãed_g‘İt


24 
	#_GETOPT_H
 1

	)

34 #ià!
defšed
 
__GNU_LIBRARY__


35 
	~<ùy³.h
>

38 #iâdeà
__THROW


39 #iâdeà
__GNUC_PREREQ


40 
	#__GNUC_PREREQ
(
maj
, 
mš
è(0)

	)

42 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (2,8)

43 
	#__THROW
 
	`throw
 ()

	)

45 
	#__THROW


	)

49 #ifdef 
__ılu¥lus


59 *
İrg
;

73 
İtšd
;

78 
İ‹¼
;

82 
İtİt
;

84 #iâdeà
__Ãed_g‘İt


106 
	sİtiÚ


108 cÚ¡ *
	gÇme
;

111 
	ghas_¬g
;

112 *
	gæag
;

113 
	gv®
;

118 
	#no_¬gum’t
 0

	)

119 
	#»quœed_¬gum’t
 1

	)

120 
	#İtiÚ®_¬gum’t
 2

	)

148 #ifdeà
__GNU_LIBRARY__


152 
g‘İt
 (
___¬gc
, *cÚ¡ *
___¬gv
, cÚ¡ *
__shÜtİts
)

153 
__THROW
;

155 #ià
defšed
 
__Ãed_g‘İt
 && defšed 
__USE_POSIX2
 \

156 && !
defšed
 
	g__USE_POSIX_IMPLICITLY
 && !defšed 
	g__USE_GNU


160 #ifdeà
__REDIRECT


161 
__REDIRECT
 (
g‘İt
, (
___¬gc
, *cÚ¡ *
___¬gv
,

162 cÚ¡ *
__shÜtİts
),

163 
__posix_g‘İt
è
__THROW
;

165 
__posix_g‘İt
 (
___¬gc
, *cÚ¡ *
___¬gv
,

166 cÚ¡ *
__shÜtİts
è
__THROW
;

167 
	#g‘İt
 
__posix_g‘İt


	)

171 
g‘İt
 ();

174 #iâdeà
__Ãed_g‘İt


175 
g‘İt_lÚg
 (
___¬gc
, *cÚ¡ *
___¬gv
,

176 cÚ¡ *
__shÜtİts
,

177 cÚ¡ 
İtiÚ
 *
__lÚgİts
, *
__lÚgšd
)

178 
__THROW
;

179 
g‘İt_lÚg_Úly
 (
___¬gc
, *cÚ¡ *
___¬gv
,

180 cÚ¡ *
__shÜtİts
,

181 cÚ¡ 
İtiÚ
 *
__lÚgİts
, *
__lÚgšd
)

182 
__THROW
;

186 #ifdef 
__ılu¥lus


191 #undeà
__Ãed_g‘İt


	@/usr/include/libio.h

29 #iâdeà
_IO_STDIO_H


30 
	#_IO_STDIO_H


	)

32 
	~<_G_cÚfig.h
>

34 
	#_IO_pos_t
 
_G_åos_t


	)

35 
	#_IO_åos_t
 
_G_åos_t


	)

36 
	#_IO_åos64_t
 
_G_åos64_t


	)

37 
	#_IO_size_t
 
_G_size_t


	)

38 
	#_IO_ssize_t
 
_G_ssize_t


	)

39 
	#_IO_off_t
 
_G_off_t


	)

40 
	#_IO_off64_t
 
_G_off64_t


	)

41 
	#_IO_pid_t
 
_G_pid_t


	)

42 
	#_IO_uid_t
 
_G_uid_t


	)

43 
	#_IO_icÚv_t
 
_G_icÚv_t


	)

44 
	#_IO_HAVE_SYS_WAIT
 
_G_HAVE_SYS_WAIT


	)

45 
	#_IO_HAVE_ST_BLKSIZE
 
_G_HAVE_ST_BLKSIZE


	)

46 
	#_IO_BUFSIZ
 
_G_BUFSIZ


	)

47 
	#_IO_va_li¡
 
_G_va_li¡


	)

48 
	#_IO_wšt_t
 
_G_wšt_t


	)

50 #ifdeà
_G_NEED_STDARG_H


52 
	#__Ãed___va_li¡


	)

53 
	~<¡d¬g.h
>

54 #ifdeà
__GNUC_VA_LIST


55 #undeà
_IO_va_li¡


56 
	#_IO_va_li¡
 
__gnuc_va_li¡


	)

60 #iâdeà
__P


61 #ià
_G_HAVE_SYS_CDEFS


62 
	~<sys/cdefs.h
>

64 #ifdeà
__STDC__


65 
	#__P
(
p
è
	)
p

66 
	#__PMT
(
p
è
	)
p

68 
	#__P
(
p
è()

	)

69 
	#__PMT
(
p
è()

	)

75 #iâdeà
_PARAMS


76 
	#_PARAMS
(
´Ùos
è
	`__P
ÕrÙos)

	)

79 #iâdeà
__STDC__


81 cÚ¡

	)

84 
	#_IO_UNIFIED_JUMPTABLES
 1

	)

85 #iâdeà
_G_HAVE_PRINTF_FP


86 
	#_IO_USE_DTOA
 1

	)

89 #iâdeà
EOF


90 
	#EOF
 (-1)

	)

92 #iâdeà
NULL


93 #ià
defšed
 
__GNUG__
 && \

94 (
	g__GNUC__
 > 2 || (__GNUC__ =ğ2 && 
__GNUC_MINOR__
 >= 8))

95 
	#NULL
 (
__nuÎ
)

	)

97 #ià!
defšed
(
__ılu¥lus
)

98 
	#NULL
 ((*)0)

	)

100 
	#NULL
 (0)

	)

105 
	#_IOS_INPUT
 1

	)

106 
	#_IOS_OUTPUT
 2

	)

107 
	#_IOS_ATEND
 4

	)

108 
	#_IOS_APPEND
 8

	)

109 
	#_IOS_TRUNC
 16

	)

110 
	#_IOS_NOCREATE
 32

	)

111 
	#_IOS_NOREPLACE
 64

	)

112 
	#_IOS_BIN
 128

	)

120 
	#_IO_MAGIC
 0xFBAD0000

	)

121 
	#_OLD_STDIO_MAGIC
 0xFABC0000

	)

122 
	#_IO_MAGIC_MASK
 0xFFFF0000

	)

123 
	#_IO_USER_BUF
 1

	)

124 
	#_IO_UNBUFFERED
 2

	)

125 
	#_IO_NO_READS
 4

	)

126 
	#_IO_NO_WRITES
 8

	)

127 
	#_IO_EOF_SEEN
 0x10

	)

128 
	#_IO_ERR_SEEN
 0x20

	)

129 
	#_IO_DELETE_DONT_CLOSE
 0x40

	)

130 
	#_IO_LINKED
 0x80

	)

131 
	#_IO_IN_BACKUP
 0x100

	)

132 
	#_IO_LINE_BUF
 0x200

	)

133 
	#_IO_TIED_PUT_GET
 0x400

	)

134 
	#_IO_CURRENTLY_PUTTING
 0x800

	)

135 
	#_IO_IS_APPENDING
 0x1000

	)

136 
	#_IO_IS_FILEBUF
 0x2000

	)

137 
	#_IO_BAD_SEEN
 0x4000

	)

138 
	#_IO_USER_LOCK
 0x8000

	)

140 
	#_IO_FLAGS2_MMAP
 1

	)

141 
	#_IO_FLAGS2_NOTCANCEL
 2

	)

142 #ifdeà
_LIBC


143 
	#_IO_FLAGS2_FORTIFY
 4

	)

145 
	#_IO_FLAGS2_USER_WBUF
 8

	)

146 #ifdeà
_LIBC


147 
	#_IO_FLAGS2_SCANF_STD
 16

	)

151 
	#_IO_SKIPWS
 01

	)

152 
	#_IO_LEFT
 02

	)

153 
	#_IO_RIGHT
 04

	)

154 
	#_IO_INTERNAL
 010

	)

155 
	#_IO_DEC
 020

	)

156 
	#_IO_OCT
 040

	)

157 
	#_IO_HEX
 0100

	)

158 
	#_IO_SHOWBASE
 0200

	)

159 
	#_IO_SHOWPOINT
 0400

	)

160 
	#_IO_UPPERCASE
 01000

	)

161 
	#_IO_SHOWPOS
 02000

	)

162 
	#_IO_SCIENTIFIC
 04000

	)

163 
	#_IO_FIXED
 010000

	)

164 
	#_IO_UNITBUF
 020000

	)

165 
	#_IO_STDIO
 040000

	)

166 
	#_IO_DONT_CLOSE
 0100000

	)

167 
	#_IO_BOOLALPHA
 0200000

	)

170 
_IO_jump_t
; 
	g_IO_FILE
;

173 #ifdeà
_IO_MTSAFE_IO


174 #ià
defšed
 
__GLIBC__
 && __GLIBC__ >= 2

175 
	~<b™s/¡dio-lock.h
>

180 
	t_IO_lock_t
;

186 
	s_IO_m¬k”
 {

187 
_IO_m¬k”
 *
	m_Ãxt
;

188 
_IO_FILE
 *
	m_sbuf
;

192 
	m_pos
;

194 
£t_¡»ampos
(
¡»ampos
 
¥
è{ 
	m_¥os
 = sp; }

195 
£t_off£t
(
off£t
è{ 
	m_pos
 = off£t; 
	m_¥os
 = (
¡»ampos
)(-2); }

196 
	mpublic
:

197 
¡»amm¬k”
(
¡»ambuf
 *
sb
);

198 ~
¡»amm¬k”
();

199 
§všg
(è{  
	m_¥os
 == -2; }

200 
d–
(
¡»amm¬k”
&);

201 
d–
();

206 
	e__codecvt_»suÉ


208 
	m__codecvt_ok
,

209 
	m__codecvt_·¹Ÿl
,

210 
	m__codecvt_”rÜ
,

211 
	m__codecvt_nocÚv


214 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


217 
	s_IO_codecvt


219 (*
	m__codecvt_de¡r
è(
	m_IO_codecvt
 *);

220 
__codecvt_»suÉ
 (*
__codecvt_do_out
è(
	m_IO_codecvt
 *,

221 
	m__mb¡©e_t
 *,

222 cÚ¡ 
	mwch¬_t
 *,

223 cÚ¡ 
	mwch¬_t
 *,

224 cÚ¡ 
	mwch¬_t
 **, *,

226 
__codecvt_»suÉ
 (*
__codecvt_do_unshiá
è(
	m_IO_codecvt
 *,

227 
	m__mb¡©e_t
 *, *,

229 
__codecvt_»suÉ
 (*
__codecvt_do_š
è(
	m_IO_codecvt
 *,

230 
	m__mb¡©e_t
 *,

232 cÚ¡ **, 
	mwch¬_t
 *,

233 
	mwch¬_t
 *, wchar_t **);

234 (*
	m__codecvt_do_’codšg
è(
	m_IO_codecvt
 *);

235 (*
	m__codecvt_do_®ways_nocÚv
è(
	m_IO_codecvt
 *);

236 (*
	m__codecvt_do_Ëngth
è(
	m_IO_codecvt
 *, 
	m__mb¡©e_t
 *,

237 cÚ¡ *, cÚ¡ *, 
	m_IO_size_t
);

238 (*
	m__codecvt_do_max_Ëngth
è(
	m_IO_codecvt
 *);

240 
_IO_icÚv_t
 
	m__cd_š
;

241 
_IO_icÚv_t
 
	m__cd_out
;

245 
	s_IO_wide_d©a


247 
wch¬_t
 *
	m_IO_»ad_±r
;

248 
wch¬_t
 *
	m_IO_»ad_’d
;

249 
wch¬_t
 *
	m_IO_»ad_ba£
;

250 
wch¬_t
 *
	m_IO_wr™e_ba£
;

251 
wch¬_t
 *
	m_IO_wr™e_±r
;

252 
wch¬_t
 *
	m_IO_wr™e_’d
;

253 
wch¬_t
 *
	m_IO_buf_ba£
;

254 
wch¬_t
 *
	m_IO_buf_’d
;

256 
wch¬_t
 *
	m_IO_§ve_ba£
;

257 
wch¬_t
 *
	m_IO_backup_ba£
;

259 
wch¬_t
 *
	m_IO_§ve_’d
;

261 
__mb¡©e_t
 
	m_IO_¡©e
;

262 
__mb¡©e_t
 
	m_IO_Ï¡_¡©e
;

263 
_IO_codecvt
 
	m_codecvt
;

265 
wch¬_t
 
	m_shÜtbuf
[1];

267 cÚ¡ 
_IO_jump_t
 *
	m_wide_vbË
;

271 
	s_IO_FILE
 {

272 
	m_æags
;

273 
	#_IO_fe_æags
 
_æags


	)

277 * 
	m_IO_»ad_±r
;

278 * 
	m_IO_»ad_’d
;

279 * 
	m_IO_»ad_ba£
;

280 * 
	m_IO_wr™e_ba£
;

281 * 
	m_IO_wr™e_±r
;

282 * 
	m_IO_wr™e_’d
;

283 * 
	m_IO_buf_ba£
;

284 * 
	m_IO_buf_’d
;

286 *
	m_IO_§ve_ba£
;

287 *
	m_IO_backup_ba£
;

288 *
	m_IO_§ve_’d
;

290 
_IO_m¬k”
 *
	m_m¬k”s
;

292 
_IO_FILE
 *
	m_chaš
;

294 
	m_f’o
;

296 
	m_blksize
;

298 
	m_æags2
;

300 
_IO_off_t
 
	m_Şd_off£t
;

302 
	#__HAVE_COLUMN


	)

304 
	m_cur_cŞumn
;

305 sigÃd 
	m_vbË_off£t
;

306 
	m_shÜtbuf
[1];

310 
_IO_lock_t
 *
	m_lock
;

311 #ifdeà
_IO_USE_OLD_IO_FILE


314 
	s_IO_FILE_com¶‘e


316 
_IO_FILE
 
	m_fe
;

318 #ià
defšed
 
_G_IO_IO_FILE_VERSION
 && _G_IO_IO_FILE_VERSION == 0x20001

319 
_IO_off64_t
 
	m_off£t
;

320 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


322 
_IO_codecvt
 *
	m_codecvt
;

323 
_IO_wide_d©a
 *
	m_wide_d©a
;

324 
_IO_FILE
 *
	m_ä“»s_li¡
;

325 *
	m_ä“»s_buf
;

326 
size_t
 
	m_ä“»s_size
;

328 *
	m__·d1
;

329 *
	m__·d2
;

330 *
	m__·d3
;

331 *
	m__·d4
;

332 
size_t
 
	m__·d5
;

334 
	m_mode
;

336 
	m_unu£d2
[15 *  (è- 4 *  (*è-  (
size_t
)];

340 #iâdeà
__ılu¥lus


341 
_IO_FILE
 
	t_IO_FILE
;

344 
	g_IO_FILE_¶us
;

346 
_IO_FILE_¶us
 
_IO_2_1_¡dš_
;

347 
_IO_FILE_¶us
 
_IO_2_1_¡dout_
;

348 
_IO_FILE_¶us
 
_IO_2_1_¡d”r_
;

349 #iâdeà
_LIBC


350 
	#_IO_¡dš
 ((
_IO_FILE
*)(&
_IO_2_1_¡dš_
))

	)

351 
	#_IO_¡dout
 ((
_IO_FILE
*)(&
_IO_2_1_¡dout_
))

	)

352 
	#_IO_¡d”r
 ((
_IO_FILE
*)(&
_IO_2_1_¡d”r_
))

	)

354 
_IO_FILE
 *
_IO_¡dš
 
©Œibu‹_hidd’
;

355 
_IO_FILE
 *
_IO_¡dout
 
©Œibu‹_hidd’
;

356 
_IO_FILE
 *
_IO_¡d”r
 
©Œibu‹_hidd’
;

364 
__ssize_t
 
	t__io_»ad_â
 (*
	t__cook›
, *
	t__buf
, 
	tsize_t
 
	t__nby‹s
);

372 
__ssize_t
 
	t__io_wr™e_â
 (*
	t__cook›
, 
	t__cÚ¡
 *
	t__buf
,

373 
	tsize_t
 
	t__n
);

381 
	t__io_£ek_â
 (*
	t__cook›
, 
	t_IO_off64_t
 *
	t__pos
, 
	t__w
);

384 
	t__io_şo£_â
 (*
	t__cook›
);

387 #ifdeà
_GNU_SOURCE


389 
__io_»ad_â
 
	tcook›_»ad_funùiÚ_t
;

390 
__io_wr™e_â
 
	tcook›_wr™e_funùiÚ_t
;

391 
__io_£ek_â
 
	tcook›_£ek_funùiÚ_t
;

392 
__io_şo£_â
 
	tcook›_şo£_funùiÚ_t
;

397 
__io_»ad_â
 *
	m»ad
;

398 
__io_wr™e_â
 *
	mwr™e
;

399 
__io_£ek_â
 *
	m£ek
;

400 
__io_şo£_â
 *
	mşo£
;

401 } 
	t_IO_cook›_io_funùiÚs_t
;

402 
_IO_cook›_io_funùiÚs_t
 
	tcook›_io_funùiÚs_t
;

404 
	g_IO_cook›_fe
;

407 
_IO_cook›_š™
 (
_IO_cook›_fe
 *
__cfe
, 
__»ad_wr™e
,

408 *
__cook›
, 
_IO_cook›_io_funùiÚs_t
 
__âs
);

412 #ifdeà
__ılu¥lus


416 
__und”æow
 (
_IO_FILE
 *);

417 
__uæow
 (
_IO_FILE
 *);

418 
__ov”æow
 (
_IO_FILE
 *, );

419 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


420 
_IO_wšt_t
 
__wund”æow
 (
_IO_FILE
 *);

421 
_IO_wšt_t
 
__wuæow
 (
_IO_FILE
 *);

422 
_IO_wšt_t
 
__wov”æow
 (
_IO_FILE
 *, _IO_wint_t);

425 #ià 
__GNUC__
 >= 3

426 
	#_IO_BE
(
ex´
, 
»s
è
	`__butš_ex³ù
 (Óx´),„es)

	)

428 
	#_IO_BE
(
ex´
, 
»s
èÓx´)

	)

431 
	#_IO_g‘c_uÆocked
(
_å
) \

432 (
	`_IO_BE
 ((
_å
)->
_IO_»ad_±r
 >ğ(_å)->
_IO_»ad_’d
, 0) \

433 ? 
	`__uæow
 (
_å
è: *(*è(_å)->
_IO_»ad_±r
++)

	)

434 
	#_IO_³ekc_uÆocked
(
_å
) \

435 (
	`_IO_BE
 ((
_å
)->
_IO_»ad_±r
 >ğ(_å)->
_IO_»ad_’d
, 0) \

436 && 
	`__und”æow
 (
_å
è=ğ
EOF
 ? EOF \

437 : *(*è(
_å
)->
_IO_»ad_±r
)

	)

438 
	#_IO_putc_uÆocked
(
_ch
, 
_å
) \

439 (
	`_IO_BE
 ((
_å
)->
_IO_wr™e_±r
 >ğ(_å)->
_IO_wr™e_’d
, 0) \

440 ? 
	`__ov”æow
 (
_å
, (è(
_ch
)) \

441 : (è(*(
_å
)->
_IO_wr™e_±r
++ = (
_ch
)))

	)

443 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


444 
	#_IO_g‘wc_uÆocked
(
_å
) \

445 (
	`_IO_BE
 ((
_å
)->
_wide_d©a
 =ğ
NULL
 \

446 || ((
_å
)->
_wide_d©a
->
_IO_»ad_±r
 \

447 >ğ(
_å
)->
_wide_d©a
->
_IO_»ad_’d
), 0) \

448 ? 
	`__wuæow
 (
_å
è: (
_IO_wšt_t
è*(_å)->
_wide_d©a
->
_IO_»ad_±r
++)

	)

449 
	#_IO_putwc_uÆocked
(
_wch
, 
_å
) \

450 (
	`_IO_BE
 ((
_å
)->
_wide_d©a
 =ğ
NULL
 \

451 || ((
_å
)->
_wide_d©a
->
_IO_wr™e_±r
 \

452 >ğ(
_å
)->
_wide_d©a
->
_IO_wr™e_’d
), 0) \

453 ? 
	`__wov”æow
 (
_å
, 
_wch
) \

454 : (
_IO_wšt_t
è(*(
_å
)->
_wide_d©a
->
_IO_wr™e_±r
++ = (
_wch
)))

	)

457 
	#_IO_ãof_uÆocked
(
__å
è(((__å)->
_æags
 & 
_IO_EOF_SEEN
è!ğ0)

	)

458 
	#_IO_ã¼Ü_uÆocked
(
__å
è(((__å)->
_æags
 & 
_IO_ERR_SEEN
è!ğ0)

	)

460 
_IO_g‘c
 (
_IO_FILE
 *
__å
);

461 
_IO_putc
 (
__c
, 
_IO_FILE
 *
__å
);

462 
_IO_ãof
 (
_IO_FILE
 *
__å
è
__THROW
;

463 
_IO_ã¼Ü
 (
_IO_FILE
 *
__å
è
__THROW
;

465 
_IO_³ekc_locked
 (
_IO_FILE
 *
__å
);

468 
	#_IO_PENDING_OUTPUT_COUNT
(
_å
) \

469 ((
_å
)->
_IO_wr™e_±r
 - (_å)->
_IO_wr™e_ba£
)

	)

471 
_IO_æockfe
 (
_IO_FILE
 *è
__THROW
;

472 
_IO_fuÆockfe
 (
_IO_FILE
 *è
__THROW
;

473 
_IO_árylockfe
 (
_IO_FILE
 *è
__THROW
;

475 #ifdeà
_IO_MTSAFE_IO


476 
	#_IO_³ekc
(
_å
è
	`_IO_³ekc_locked
 (_å)

	)

477 
	#_IO_æockfe
(
_å
) \

478 ià(((
_å
)->
_æags
 & 
_IO_USER_LOCK
è=ğ0è
	`_IO_æockfe
 (_å)

	)

479 
	#_IO_fuÆockfe
(
_å
) \

480 ià(((
_å
)->
_æags
 & 
_IO_USER_LOCK
è=ğ0è
	`_IO_fuÆockfe
 (_å)

	)

482 
	#_IO_³ekc
(
_å
è
	`_IO_³ekc_uÆocked
 (_å)

	)

483 
	#_IO_æockfe
(
_å
è

	)

484 
	#_IO_fuÆockfe
(
_å
è

	)

485 
	#_IO_árylockfe
(
_å
è

	)

486 
	#_IO_ş—nup_»giÚ_¡¬t
(
_fù
, 
_å
è

	)

487 
	#_IO_ş—nup_»giÚ_’d
(
_Do™
è

	)

490 
_IO_vfsÿnf
 (
_IO_FILE
 * 
__»¡riù
, const * __restrict,

491 
_IO_va_li¡
, *
__»¡riù
);

492 
_IO_vårštf
 (
_IO_FILE
 *
__»¡riù
, const *__restrict,

493 
_IO_va_li¡
);

494 
_IO_ssize_t
 
_IO_·dn
 (
_IO_FILE
 *, , _IO_ssize_t);

495 
_IO_size_t
 
_IO_sg‘n
 (
_IO_FILE
 *, *, _IO_size_t);

497 
_IO_off64_t
 
_IO_£ekoff
 (
_IO_FILE
 *, _IO_off64_t, , );

498 
_IO_off64_t
 
_IO_£ekpos
 (
_IO_FILE
 *, _IO_off64_t, );

500 
_IO_ä“_backup_¬—
 (
_IO_FILE
 *è
__THROW
;

502 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


503 
_IO_wšt_t
 
_IO_g‘wc
 (
_IO_FILE
 *
__å
);

504 
_IO_wšt_t
 
_IO_putwc
 (
wch¬_t
 
__wc
, 
_IO_FILE
 *
__å
);

505 
_IO_fwide
 (
_IO_FILE
 *
__å
, 
__mode
è
__THROW
;

506 #ià
__GNUC__
 >= 2

509 #ià
defšed
 
_LIBC
 && defšed 
SHARED


510 
	~<shlib-com·t.h
>

511 #ià
SHLIB_COMPAT
 (
libc
, 
GLIBC_2_0
, 
GLIBC_2_1
)

512 
	#_IO_fwide_maybe_šcom·tibË
 \

513 (
	`__butš_ex³ù
 (&
_IO_¡dš_u£d
 =ğ
NULL
, 0))

	)

514 cÚ¡ 
_IO_¡dš_u£d
;

515 
w—k_ex‹º
 (
_IO_¡dš_u£d
);

518 #iâdeà
_IO_fwide_maybe_šcom·tibË


519 
	#_IO_fwide_maybe_šcom·tibË
 (0)

	)

523 
	#_IO_fwide
(
__å
, 
__mode
) \

524 ({ 
__»suÉ
 = (
__mode
); \

525 ià(
__»suÉ
 < 0 && ! 
_IO_fwide_maybe_šcom·tibË
) \

527 ià((
__å
)->
_mode
 == 0) \

529 (
__å
)->
_mode
 = -1; \

530 
__»suÉ
 = (
__å
)->
_mode
; \

532 ià(
	`__butš_cÚ¡ªt_p
 (
__mode
) && (__mode) == 0) \

533 
__»suÉ
 = 
_IO_fwide_maybe_šcom·tibË
 ? -1 : (
__å
)->
_mode
; \

535 
__»suÉ
 = 
	`_IO_fwide
 (
__å
, __result); \

536 
__»suÉ
; })

	)

539 
_IO_vfwsÿnf
 (
_IO_FILE
 * 
__»¡riù
, cÚ¡ 
wch¬_t
 * __restrict,

540 
_IO_va_li¡
, *
__»¡riù
);

541 
_IO_vfw´štf
 (
_IO_FILE
 *
__»¡riù
, cÚ¡ 
wch¬_t
 *__restrict,

542 
_IO_va_li¡
);

543 
_IO_ssize_t
 
_IO_w·dn
 (
_IO_FILE
 *, 
wšt_t
, _IO_ssize_t);

544 
_IO_ä“_wbackup_¬—
 (
_IO_FILE
 *è
__THROW
;

547 #ifdeà
__LDBL_COMPAT


548 
	~<b™s/libio-ldbl.h
>

551 #ifdeà
__ılu¥lus


	@/usr/include/sys/types.h

23 #iâdef 
_SYS_TYPES_H


24 
	#_SYS_TYPES_H
 1

	)

26 
	~<ã©u»s.h
>

28 
	g__BEGIN_DECLS


30 
	~<b™s/ty³s.h
>

32 #ifdef 
__USE_BSD


33 #iâdeà
__u_ch¬_defšed


34 
__u_ch¬
 
	tu_ch¬
;

35 
__u_shÜt
 
	tu_shÜt
;

36 
__u_št
 
	tu_št
;

37 
__u_lÚg
 
	tu_lÚg
;

38 
__quad_t
 
	tquad_t
;

39 
__u_quad_t
 
	tu_quad_t
;

40 
__fsid_t
 
	tfsid_t
;

41 
	#__u_ch¬_defšed


	)

45 
__loff_t
 
	tloff_t
;

47 #iâdeà
__šo_t_defšed


48 #iâdeà
__USE_FILE_OFFSET64


49 
__šo_t
 
	tšo_t
;

51 
__šo64_t
 
	tšo_t
;

53 
	#__šo_t_defšed


	)

55 #ià
defšed
 
__USE_LARGEFILE64
 && !defšed 
__šo64_t_defšed


56 
__šo64_t
 
	tšo64_t
;

57 
	#__šo64_t_defšed


	)

60 #iâdeà
__dev_t_defšed


61 
__dev_t
 
	tdev_t
;

62 
	#__dev_t_defšed


	)

65 #iâdeà
__gid_t_defšed


66 
__gid_t
 
	tgid_t
;

67 
	#__gid_t_defšed


	)

70 #iâdeà
__mode_t_defšed


71 
__mode_t
 
	tmode_t
;

72 
	#__mode_t_defšed


	)

75 #iâdeà
__Æšk_t_defšed


76 
__Æšk_t
 
	tÆšk_t
;

77 
	#__Æšk_t_defšed


	)

80 #iâdeà
__uid_t_defšed


81 
__uid_t
 
	tuid_t
;

82 
	#__uid_t_defšed


	)

85 #iâdeà
__off_t_defšed


86 #iâdeà
__USE_FILE_OFFSET64


87 
__off_t
 
	toff_t
;

89 
__off64_t
 
	toff_t
;

91 
	#__off_t_defšed


	)

93 #ià
defšed
 
__USE_LARGEFILE64
 && !defšed 
__off64_t_defšed


94 
__off64_t
 
	toff64_t
;

95 
	#__off64_t_defšed


	)

98 #iâdeà
__pid_t_defšed


99 
__pid_t
 
	tpid_t
;

100 
	#__pid_t_defšed


	)

103 #ià(
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8
) \

104 && !
defšed
 
__id_t_defšed


105 
__id_t
 
	tid_t
;

106 
	#__id_t_defšed


	)

109 #iâdeà
__ssize_t_defšed


110 
__ssize_t
 
	tssize_t
;

111 
	#__ssize_t_defšed


	)

114 #ifdef 
__USE_BSD


115 #iâdeà
__daddr_t_defšed


116 
__daddr_t
 
	tdaddr_t
;

117 
__ÿddr_t
 
	tÿddr_t
;

118 
	#__daddr_t_defšed


	)

122 #ià(
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN
è&& !defšed 
__key_t_defšed


123 
__key_t
 
	tkey_t
;

124 
	#__key_t_defšed


	)

127 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8


128 
	#__Ãed_şock_t


	)

130 
	#__Ãed_time_t


	)

131 
	#__Ãed_tim”_t


	)

132 
	#__Ãed_şockid_t


	)

133 
	~<time.h
>

135 #ifdeà
__USE_XOPEN


136 #iâdeà
__u£cÚds_t_defšed


137 
__u£cÚds_t
 
	tu£cÚds_t
;

138 
	#__u£cÚds_t_defšed


	)

140 #iâdeà
__su£cÚds_t_defšed


141 
__su£cÚds_t
 
	tsu£cÚds_t
;

142 
	#__su£cÚds_t_defšed


	)

146 
	#__Ãed_size_t


	)

147 
	~<¡ddef.h
>

149 #ifdeà
__USE_MISC


151 
	tulÚg
;

152 
	tushÜt
;

153 
	tušt
;

158 #ià!
__GNUC_PREREQ
 (2, 7)

161 #iâdeà
__št8_t_defšed


162 
	#__št8_t_defšed


	)

163 
	tšt8_t
;

164 
	tšt16_t
;

165 
	tšt32_t
;

166 #ià
__WORDSIZE
 == 64

167 
	tšt64_t
;

168 #–ià
__GLIBC_HAVE_LONG_LONG


169 
__ex‹nsiÚ__
 
	tšt64_t
;

174 
	tu_št8_t
;

175 
	tu_št16_t
;

176 
	tu_št32_t
;

177 #ià
__WORDSIZE
 == 64

178 
	tu_št64_t
;

179 #–ià
__GLIBC_HAVE_LONG_LONG


180 
__ex‹nsiÚ__
 
	tu_št64_t
;

183 
	t»gi¡”_t
;

188 
	#__štN_t
(
N
, 
MODE
) \

189 ##
	tN
##
	t_t
 
	t__©Œibu‹__
 ((
	t__mode__
 (
	tMODE
)))

	)

190 
	t__u_štN_t
(
	tN
, 
	tMODE
) \

191 
	tu_št
##
	tN
##
	t_t
 
	t__©Œibu‹__
 ((
	t__mode__
 (
	tMODE
)))

	)

193 #iâdeà
	t__št8_t_defšed


194 
	t__št8_t_defšed


	)

195 
	t__štN_t
 (8, 
	t__QI__
);

196 
__štN_t
 (16, 
__HI__
);

197 
__štN_t
 (32, 
__SI__
);

198 
__štN_t
 (64, 
__DI__
);

201 
__u_štN_t
 (8, 
__QI__
);

202 
__u_štN_t
 (16, 
__HI__
);

203 
__u_štN_t
 (32, 
__SI__
);

204 
__u_štN_t
 (64, 
__DI__
);

206 
	t»gi¡”_t
 
	t__©Œibu‹__
 ((
	t__mode__
 (
	t__wÜd__
)));

212 
	#__BIT_TYPES_DEFINED__
 1

	)

215 #ifdef 
__USE_BSD


217 
	~<’dŸn.h
>

220 
	~<sys/£Ëù.h
>

223 
	~<sys/sysmaüos.h
>

227 #ià(
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K8
) \

228 && !
defšed
 
__blksize_t_defšed


229 
__blksize_t
 
	tblksize_t
;

230 
	#__blksize_t_defšed


	)

234 #iâdeà
__USE_FILE_OFFSET64


235 #iâdeà
__blkút_t_defšed


236 
__blkút_t
 
	tblkút_t
;

237 
	#__blkút_t_defšed


	)

239 #iâdeà
__fsblkút_t_defšed


240 
__fsblkút_t
 
	tfsblkút_t
;

241 
	#__fsblkút_t_defšed


	)

243 #iâdeà
__fsfút_t_defšed


244 
__fsfút_t
 
	tfsfút_t
;

245 
	#__fsfút_t_defšed


	)

248 #iâdeà
__blkút_t_defšed


249 
__blkút64_t
 
	tblkút_t
;

250 
	#__blkút_t_defšed


	)

252 #iâdeà
__fsblkút_t_defšed


253 
__fsblkút64_t
 
	tfsblkút_t
;

254 
	#__fsblkút_t_defšed


	)

256 #iâdeà
__fsfút_t_defšed


257 
__fsfút64_t
 
	tfsfút_t
;

258 
	#__fsfút_t_defšed


	)

262 #ifdeà
__USE_LARGEFILE64


263 
__blkút64_t
 
	tblkút64_t
;

264 
__fsblkút64_t
 
	tfsblkút64_t
;

265 
__fsfút64_t
 
	tfsfút64_t
;

270 #ià
defšed
 
__USE_POSIX199506
 || defšed 
__USE_UNIX98


271 
	~<b™s/±h»adty³s.h
>

274 
	g__END_DECLS


	@/usr/include/sys/ucontext.h

19 #iâdeà
_SYS_UCONTEXT_H


20 
	#_SYS_UCONTEXT_H
 1

	)

22 
	~<ã©u»s.h
>

23 
	~<sigÇl.h
>

24 
	~<b™s/wÜdsize.h
>

28 
	~<b™s/sigcÚ‹xt.h
>

30 #ià
__WORDSIZE
 == 64

33 
	tg»g_t
;

36 
	#NGREG
 23

	)

39 
g»g_t
 
	tg»g£t_t
[
NGREG
];

41 #ifdeà
__USE_GNU


45 
	mREG_R8
 = 0,

46 
	#REG_R8
 
REG_R8


	)

47 
	mREG_R9
,

48 
	#REG_R9
 
REG_R9


	)

49 
	mREG_R10
,

50 
	#REG_R10
 
REG_R10


	)

51 
	mREG_R11
,

52 
	#REG_R11
 
REG_R11


	)

53 
	mREG_R12
,

54 
	#REG_R12
 
REG_R12


	)

55 
	mREG_R13
,

56 
	#REG_R13
 
REG_R13


	)

57 
	mREG_R14
,

58 
	#REG_R14
 
REG_R14


	)

59 
	mREG_R15
,

60 
	#REG_R15
 
REG_R15


	)

61 
	mREG_RDI
,

62 
	#REG_RDI
 
REG_RDI


	)

63 
	mREG_RSI
,

64 
	#REG_RSI
 
REG_RSI


	)

65 
	mREG_RBP
,

66 
	#REG_RBP
 
REG_RBP


	)

67 
	mREG_RBX
,

68 
	#REG_RBX
 
REG_RBX


	)

69 
	mREG_RDX
,

70 
	#REG_RDX
 
REG_RDX


	)

71 
	mREG_RAX
,

72 
	#REG_RAX
 
REG_RAX


	)

73 
	mREG_RCX
,

74 
	#REG_RCX
 
REG_RCX


	)

75 
	mREG_RSP
,

76 
	#REG_RSP
 
REG_RSP


	)

77 
	mREG_RIP
,

78 
	#REG_RIP
 
REG_RIP


	)

79 
	mREG_EFL
,

80 
	#REG_EFL
 
REG_EFL


	)

81 
	mREG_CSGSFS
,

82 
	#REG_CSGSFS
 
REG_CSGSFS


	)

83 
	mREG_ERR
,

84 
	#REG_ERR
 
REG_ERR


	)

85 
	mREG_TRAPNO
,

86 
	#REG_TRAPNO
 
REG_TRAPNO


	)

87 
	mREG_OLDMASK
,

88 
	#REG_OLDMASK
 
REG_OLDMASK


	)

89 
	mREG_CR2


90 
	#REG_CR2
 
REG_CR2


	)

94 
	s_libc_åx»g


96 
	msignifiÿnd
[4];

97 
	mexpÚ’t
;

98 
	m·ddšg
[3];

101 
	s_libc_xmm»g


103 
__ušt32_t
 
	m–em’t
[4];

106 
	s_libc_å¡©e


109 
__ušt16_t
 
	mcwd
;

110 
__ušt16_t
 
	mswd
;

111 
__ušt16_t
 
	máw
;

112 
__ušt16_t
 
	mfİ
;

113 
__ušt64_t
 
	mr
;

114 
__ušt64_t
 
	mrdp
;

115 
__ušt32_t
 
	mmxc¤
;

116 
__ušt32_t
 
	mmxü_mask
;

117 
_libc_åx»g
 
	m_¡
[8];

118 
_libc_xmm»g
 
	m_xmm
[16];

119 
__ušt32_t
 
	m·ddšg
[24];

123 
_libc_å¡©e
 *
	tå»g£t_t
;

128 
g»g£t_t
 
	mg»gs
;

130 
å»g£t_t
 
	må»gs
;

131 
	m__»£rved1
 [8];

132 } 
	tmcÚ‹xt_t
;

135 
	sucÚ‹xt


137 
	muc_æags
;

138 
ucÚ‹xt
 *
	muc_lšk
;

139 
¡ack_t
 
	muc_¡ack
;

140 
mcÚ‹xt_t
 
	muc_mcÚ‹xt
;

141 
__sig£t_t
 
	muc_sigmask
;

142 
_libc_å¡©e
 
	m__å»gs_mem
;

143 } 
	tucÚ‹xt_t
;

148 
	tg»g_t
;

151 
	#NGREG
 19

	)

154 
g»g_t
 
	tg»g£t_t
[
NGREG
];

156 #ifdeà
__USE_GNU


160 
	mREG_GS
 = 0,

161 
	#REG_GS
 
REG_GS


	)

162 
	mREG_FS
,

163 
	#REG_FS
 
REG_FS


	)

164 
	mREG_ES
,

165 
	#REG_ES
 
REG_ES


	)

166 
	mREG_DS
,

167 
	#REG_DS
 
REG_DS


	)

168 
	mREG_EDI
,

169 
	#REG_EDI
 
REG_EDI


	)

170 
	mREG_ESI
,

171 
	#REG_ESI
 
REG_ESI


	)

172 
	mREG_EBP
,

173 
	#REG_EBP
 
REG_EBP


	)

174 
	mREG_ESP
,

175 
	#REG_ESP
 
REG_ESP


	)

176 
	mREG_EBX
,

177 
	#REG_EBX
 
REG_EBX


	)

178 
	mREG_EDX
,

179 
	#REG_EDX
 
REG_EDX


	)

180 
	mREG_ECX
,

181 
	#REG_ECX
 
REG_ECX


	)

182 
	mREG_EAX
,

183 
	#REG_EAX
 
REG_EAX


	)

184 
	mREG_TRAPNO
,

185 
	#REG_TRAPNO
 
REG_TRAPNO


	)

186 
	mREG_ERR
,

187 
	#REG_ERR
 
REG_ERR


	)

188 
	mREG_EIP
,

189 
	#REG_EIP
 
REG_EIP


	)

190 
	mREG_CS
,

191 
	#REG_CS
 
REG_CS


	)

192 
	mREG_EFL
,

193 
	#REG_EFL
 
REG_EFL


	)

194 
	mREG_UESP
,

195 
	#REG_UESP
 
REG_UESP


	)

196 
	mREG_SS


197 
	#REG_SS
 
REG_SS


	)

202 
	s_libc_å»g


204 
	msignifiÿnd
[4];

205 
	mexpÚ’t
;

208 
	s_libc_å¡©e


210 
	mcw
;

211 
	msw
;

212 
	mg
;

213 
	moff
;

214 
	mcs£l
;

215 
	md©aoff
;

216 
	md©a£l
;

217 
_libc_å»g
 
	m_¡
[8];

218 
	m¡©us
;

222 
_libc_å¡©e
 *
	tå»g£t_t
;

227 
g»g£t_t
 
	mg»gs
;

230 
å»g£t_t
 
	må»gs
;

231 
	mŞdmask
;

232 
	mü2
;

233 } 
	tmcÚ‹xt_t
;

236 
	sucÚ‹xt


238 
	muc_æags
;

239 
ucÚ‹xt
 *
	muc_lšk
;

240 
¡ack_t
 
	muc_¡ack
;

241 
mcÚ‹xt_t
 
	muc_mcÚ‹xt
;

242 
__sig£t_t
 
	muc_sigmask
;

243 
_libc_å¡©e
 
	m__å»gs_mem
;

244 } 
	tucÚ‹xt_t
;

	@/usr/include/time.h

23 #iâdef 
_TIME_H


25 #ià(! 
defšed
 
__Ãed_time_t
 && !defšed 
__Ãed_şock_t
 && \

26 ! 
defšed
 
	g__Ãed_time¥ec
)

27 
	#_TIME_H
 1

	)

28 
	~<ã©u»s.h
>

30 
	g__BEGIN_DECLS


34 #ifdef 
_TIME_H


36 
	#__Ãed_size_t


	)

37 
	#__Ãed_NULL


	)

38 
	~<¡ddef.h
>

42 
	~<b™s/time.h
>

45 #ià!
defšed
 
__STRICT_ANSI__
 && !defšed 
__USE_XOPEN2K


46 #iâdeà
CLK_TCK


47 
	#CLK_TCK
 
CLOCKS_PER_SEC


	)

53 #ià!
defšed
 
__şock_t_defšed
 && (defšed 
_TIME_H
 || defšed 
__Ãed_şock_t
)

54 
	#__şock_t_defšed
 1

	)

56 
	~<b™s/ty³s.h
>

58 
__BEGIN_NAMESPACE_STD


60 
__şock_t
 
	tşock_t
;

61 
	g__END_NAMESPACE_STD


62 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_POSIX
 || defšed 
__USE_MISC


63 
	$__USING_NAMESPACE_STD
(
şock_t
)

67 #undeà
__Ãed_şock_t


69 #ià!
defšed
 
__time_t_defšed
 && (defšed 
_TIME_H
 || defšed 
__Ãed_time_t
)

70 
	#__time_t_defšed
 1

	)

72 
	~<b™s/ty³s.h
>

74 
__BEGIN_NAMESPACE_STD


76 
__time_t
 
	ttime_t
;

77 
__END_NAMESPACE_STD


78 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC
 || defšed 
__USE_SVID


79 
	$__USING_NAMESPACE_STD
(
time_t
)

83 #undeà
__Ãed_time_t


85 #ià!
defšed
 
__şockid_t_defšed
 && \

86 ((
defšed
 
_TIME_H
 && defšed 
__USE_POSIX199309
è|| defšed 
__Ãed_şockid_t
)

87 
	#__şockid_t_defšed
 1

	)

89 
	~<b™s/ty³s.h
>

92 
__şockid_t
 
	tşockid_t
;

95 #undeà
__şockid_time_t


97 #ià!
defšed
 
__tim”_t_defšed
 && \

98 ((
defšed
 
_TIME_H
 && defšed 
__USE_POSIX199309
è|| defšed 
__Ãed_tim”_t
)

99 
	#__tim”_t_defšed
 1

	)

101 
	~<b™s/ty³s.h
>

104 
__tim”_t
 
	ttim”_t
;

107 #undeà
__Ãed_tim”_t


110 #ià!
defšed
 
__time¥ec_defšed
 && \

111 ((
defšed
 
_TIME_H
 && \

112 (
defšed
 
__USE_POSIX199309
 || defšed 
__USE_MISC
)) || \

113 
defšed
 
__Ãed_time¥ec
)

114 
	#__time¥ec_defšed
 1

	)

116 
	~<b™s/ty³s.h
>

120 
	stime¥ec


122 
__time_t
 
tv_£c
;

123 
tv_n£c
;

127 #undeà
__Ãed_time¥ec


130 #ifdef 
_TIME_H


131 
__BEGIN_NAMESPACE_STD


133 
	stm


135 
tm_£c
;

136 
tm_mš
;

137 
tm_hour
;

138 
tm_mday
;

139 
tm_mÚ
;

140 
tm_y—r
;

141 
tm_wday
;

142 
tm_yday
;

143 
tm_isd¡
;

145 #ifdef 
__USE_BSD


146 
tm_gmtoff
;

147 
__cÚ¡
 *
tm_zÚe
;

149 
__tm_gmtoff
;

150 
__cÚ¡
 *
__tm_zÚe
;

153 
__END_NAMESPACE_STD


154 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_POSIX
 || defšed 
__USE_MISC


155 
	$__USING_NAMESPACE_STD
(
tm
)

159 #ifdeà
__USE_POSIX199309


161 
	s™im”¥ec


163 
time¥ec
 
™_š‹rv®
;

164 
time¥ec
 
™_v®ue
;

168 
sigev’t
;

172 #ifdeà
__USE_XOPEN2K


173 #iâdeà
__pid_t_defšed


174 
__pid_t
 
	tpid_t
;

175 
	#__pid_t_defšed


	)

180 
__BEGIN_NAMESPACE_STD


183 
şock_t
 
	$şock
 (è
__THROW
;

186 
time_t
 
	$time
 (
time_t
 *
__tim”
è
__THROW
;

189 
	$difáime
 (
time_t
 
__time1
,ime_ˆ
__time0
)

190 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

193 
time_t
 
	$mktime
 (
tm
 *
__
è
__THROW
;

199 
size_t
 
	$¡ráime
 (*
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

200 
__cÚ¡
 *
__»¡riù
 
__fÜm©
,

201 
__cÚ¡
 
tm
 *
__»¡riù
 
__
è
__THROW
;

202 
__END_NAMESPACE_STD


204 #ifdeà
__USE_XOPEN


207 *
	$¡½time
 (
__cÚ¡
 *
__»¡riù
 
__s
,

208 
__cÚ¡
 *
__»¡riù
 
__fmt
, 
tm
 *
__
)

209 
__THROW
;

212 #ifdeà
__USE_XOPEN2K8


215 
	~<xloÿË.h
>

217 
size_t
 
	$¡ráime_l
 (*
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

218 
__cÚ¡
 *
__»¡riù
 
__fÜm©
,

219 
__cÚ¡
 
tm
 *
__»¡riù
 
__
,

220 
__loÿË_t
 
__loc
è
__THROW
;

223 #ifdeà
__USE_GNU


224 *
	$¡½time_l
 (
__cÚ¡
 *
__»¡riù
 
__s
,

225 
__cÚ¡
 *
__»¡riù
 
__fmt
, 
tm
 *
__
,

226 
__loÿË_t
 
__loc
è
__THROW
;

230 
__BEGIN_NAMESPACE_STD


233 
tm
 *
	$gmtime
 (
__cÚ¡
 
time_t
 *
__tim”
è
__THROW
;

237 
tm
 *
	$loÿÉime
 (
__cÚ¡
 
time_t
 *
__tim”
è
__THROW
;

238 
__END_NAMESPACE_STD


240 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


243 
tm
 *
	$gmtime_r
 (
__cÚ¡
 
time_t
 *
__»¡riù
 
__tim”
,

244 
tm
 *
__»¡riù
 
__
è
__THROW
;

248 
tm
 *
	$loÿÉime_r
 (
__cÚ¡
 
time_t
 *
__»¡riù
 
__tim”
,

249 
tm
 *
__»¡riù
 
__
è
__THROW
;

252 
__BEGIN_NAMESPACE_STD


255 *
	$asùime
 (
__cÚ¡
 
tm
 *
__
è
__THROW
;

258 *
	$ùime
 (
__cÚ¡
 
time_t
 *
__tim”
è
__THROW
;

259 
__END_NAMESPACE_STD


261 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


266 *
	$asùime_r
 (
__cÚ¡
 
tm
 *
__»¡riù
 
__
,

267 *
__»¡riù
 
__buf
è
__THROW
;

270 *
	$ùime_r
 (
__cÚ¡
 
time_t
 *
__»¡riù
 
__tim”
,

271 *
__»¡riù
 
__buf
è
__THROW
;

276 *
__tzÇme
[2];

277 
__daylight
;

278 
__timezÚe
;

281 #ifdef 
__USE_POSIX


283 *
tzÇme
[2];

287 
	$tz£t
 (è
__THROW
;

290 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


291 
daylight
;

292 
timezÚe
;

295 #ifdeà
__USE_SVID


298 
	$¡ime
 (
__cÚ¡
 
time_t
 *
__wh’
è
__THROW
;

304 
	#__i¦—p
(
y—r
) \

305 ((
y—r
è% 4 =ğ0 && ((y—rè% 100 !ğ0 || (y—rè% 400 =ğ0))

	)

308 #ifdeà
__USE_MISC


313 
time_t
 
	$timegm
 (
tm
 *
__
è
__THROW
;

316 
time_t
 
	$tim–oÿl
 (
tm
 *
__
è
__THROW
;

319 
	$dysize
 (
__y—r
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

323 #ifdeà
__USE_POSIX199309


328 
	`Çno¦“p
 (
__cÚ¡
 
time¥ec
 *
__»que¡ed_time
,

329 
time¥ec
 *
__»maššg
);

333 
	$şock_g‘»s
 (
şockid_t
 
__şock_id
, 
time¥ec
 *
__»s
è
__THROW
;

336 
	$şock_g‘time
 (
şockid_t
 
__şock_id
, 
time¥ec
 *
__
è
__THROW
;

339 
	$şock_£‰ime
 (
şockid_t
 
__şock_id
, 
__cÚ¡
 
time¥ec
 *
__
)

340 
__THROW
;

342 #ifdeà
__USE_XOPEN2K


347 
	`şock_Çno¦“p
 (
şockid_t
 
__şock_id
, 
__æags
,

348 
__cÚ¡
 
time¥ec
 *
__»q
,

349 
time¥ec
 *
__»m
);

352 
	$şock_g‘ıuşockid
 (
pid_t
 
__pid
, 
şockid_t
 *
__şock_id
è
__THROW
;

357 
	$tim”_ü—‹
 (
şockid_t
 
__şock_id
,

358 
sigev’t
 *
__»¡riù
 
__evp
,

359 
tim”_t
 *
__»¡riù
 
__tim”id
è
__THROW
;

362 
	$tim”_d–‘e
 (
tim”_t
 
__tim”id
è
__THROW
;

365 
	$tim”_£‰ime
 (
tim”_t
 
__tim”id
, 
__æags
,

366 
__cÚ¡
 
™im”¥ec
 *
__»¡riù
 
__v®ue
,

367 
™im”¥ec
 *
__»¡riù
 
__ov®ue
è
__THROW
;

370 
	$tim”_g‘time
 (
tim”_t
 
__tim”id
, 
™im”¥ec
 *
__v®ue
)

371 
__THROW
;

374 
	$tim”_g‘ov”run
 (
tim”_t
 
__tim”id
è
__THROW
;

378 #ifdeà
__USE_XOPEN_EXTENDED


390 
g‘d©e_”r
;

399 
tm
 *
	`g‘d©e
 (
__cÚ¡
 *
__¡ršg
);

402 #ifdeà
__USE_GNU


413 
	`g‘d©e_r
 (
__cÚ¡
 *
__»¡riù
 
__¡ršg
,

414 
tm
 *
__»¡riù
 
__»sbuå
);

417 
__END_DECLS


	@/usr/include/xlocale.h

21 #iâdeà
_XLOCALE_H


22 
	#_XLOCALE_H
 1

	)

28 
	s__loÿË_¡ruù


31 
__loÿË_d©a
 *
	m__loÿËs
[13];

34 cÚ¡ *
	m__ùy³_b
;

35 cÚ¡ *
	m__ùy³_tŞow”
;

36 cÚ¡ *
	m__ùy³_touµ”
;

39 cÚ¡ *
	m__Çmes
[13];

40 } *
	t__loÿË_t
;

43 
__loÿË_t
 
	tloÿË_t
;

	@/usr/include/_G_config.h

4 #iâdeà
_G_cÚfig_h


5 
	#_G_cÚfig_h
 1

	)

9 
	~<b™s/ty³s.h
>

10 
	#__Ãed_size_t


	)

11 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


12 
	#__Ãed_wch¬_t


	)

14 
	#__Ãed_NULL


	)

15 
	~<¡ddef.h
>

16 
	#__Ãed_mb¡©e_t


	)

17 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


18 
	#__Ãed_wšt_t


	)

20 
	~<wch¬.h
>

21 
	#_G_size_t
 
size_t


	)

24 
__off_t
 
	m__pos
;

25 
__mb¡©e_t
 
	m__¡©e
;

26 } 
	t_G_åos_t
;

29 
__off64_t
 
	m__pos
;

30 
__mb¡©e_t
 
	m__¡©e
;

31 } 
	t_G_åos64_t
;

32 
	#_G_ssize_t
 
__ssize_t


	)

33 
	#_G_off_t
 
__off_t


	)

34 
	#_G_off64_t
 
__off64_t


	)

35 
	#_G_pid_t
 
__pid_t


	)

36 
	#_G_uid_t
 
__uid_t


	)

37 
	#_G_wch¬_t
 
wch¬_t


	)

38 
	#_G_wšt_t
 
wšt_t


	)

39 
	#_G_¡©64
 
¡©64


	)

40 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


41 
	~<gcÚv.h
>

44 
__gcÚv_šfo
 
	m__cd
;

47 
__gcÚv_šfo
 
	m__cd
;

48 
__gcÚv_¡•_d©a
 
	m__d©a
;

49 } 
	m__combšed
;

50 } 
	t_G_icÚv_t
;

53 
	t_G_št16_t
 
	t__©Œibu‹__
 ((
	t__mode__
 (
	t__HI__
)));

54 
	t_G_št32_t
 
	t__©Œibu‹__
 ((
	t__mode__
 (
	t__SI__
)));

55 
	t_G_ušt16_t
 
	t__©Œibu‹__
 ((
	t__mode__
 (
	t__HI__
)));

56 
	t_G_ušt32_t
 
	t__©Œibu‹__
 ((
	t__mode__
 (
	t__SI__
)));

58 
	#_G_HAVE_BOOL
 1

	)

62 
	#_G_HAVE_ATEXIT
 1

	)

63 
	#_G_HAVE_SYS_CDEFS
 1

	)

64 
	#_G_HAVE_SYS_WAIT
 1

	)

65 
	#_G_NEED_STDARG_H
 1

	)

66 
	#_G_va_li¡
 
__gnuc_va_li¡


	)

68 
	#_G_HAVE_PRINTF_FP
 1

	)

69 
	#_G_HAVE_MMAP
 1

	)

70 
	#_G_HAVE_MREMAP
 1

	)

71 
	#_G_HAVE_LONG_DOUBLE_IO
 1

	)

72 
	#_G_HAVE_IO_FILE_OPEN
 1

	)

73 
	#_G_HAVE_IO_GETLINE_INFO
 1

	)

75 
	#_G_IO_IO_FILE_VERSION
 0x20001

	)

77 
	#_G_OPEN64
 
__İ’64


	)

78 
	#_G_LSEEK64
 
__l£ek64


	)

79 
	#_G_MMAP64
 
__mm­64


	)

80 
	#_G_FSTAT64
(
fd
,
buf
è
	`__fx¡©64
 (
_STAT_VER
, fd, buf)

	)

83 
	#_G_HAVE_ST_BLKSIZE
 
	`defšed
 (
_STATBUF_ST_BLKSIZE
)

	)

85 
	#_G_BUFSIZ
 8192

	)

88 
	#_G_NAMES_HAVE_UNDERSCORE
 0

	)

89 
	#_G_VTABLE_LABEL_HAS_LENGTH
 1

	)

90 
	#_G_USING_THUNKS
 1

	)

91 
	#_G_VTABLE_LABEL_PREFIX
 "__vt_"

	)

92 
	#_G_VTABLE_LABEL_PREFIX_ID
 
__vt_


	)

95 #ià
defšed
 
__ılu¥lus
 || defšed 
__STDC__


96 
	#_G_ARGS
(
ARGLIST
è
	)
ARGLIST

98 
	#_G_ARGS
(
ARGLIST
è()

	)

	@/usr/include/bits/libio-ldbl.h

20 #iâdeà
_IO_STDIO_H


24 
	$__LDBL_REDIR_DECL
 (
_IO_vfsÿnf
)

25 
	`__LDBL_REDIR_DECL
 (
_IO_vårštf
)

	@/usr/include/bits/stdio-lock.h

20 #iâdeà
_BITS_STDIO_LOCK_H


21 
	#_BITS_STDIO_LOCK_H
 1

	)

23 
	~<b™s/libc-lock.h
>

25 
	$__libc_lock_defše_»cursive
 (, 
_IO_lock_t
)

28 #ifdeà
	t_LIBC_LOCK_RECURSIVE_INITIALIZER


29 
	t_IO_lock_š™Ÿliz”
 
	t_LIBC_LOCK_RECURSIVE_INITIALIZER


	)

30 #–ià
	t_IO_MTSAFE_IO


31 #”rÜ 
	tlibio
 
	tÃeds
 
	t»cursive
 
	tmu‹xes
 
	t_IO_MTSAFE_IO


34 
	t_IO_lock_š™
(
	t_Çme
è
	t__libc_lock_š™_»cursive
 (_Çme)

	)

35 
	t_IO_lock_fši
(
	t_Çme
è
	t__libc_lock_fši_»cursive
 (_Çme)

	)

36 
	t_IO_lock_lock
(
	t_Çme
è
	t__libc_lock_lock_»cursive
 (_Çme)

	)

37 
	t_IO_lock_Œylock
(
	t_Çme
è
	t__libc_lock_Œylock_»cursive
 (_Çme)

	)

38 
	t_IO_lock_uÆock
(
	t_Çme
è
	t__libc_lock_uÆock_»cursive
 (_Çme)

	)

41 
	t_IO_ş—nup_»giÚ_¡¬t
(
	t_fù
, 
	t_å
) \

42 
	t__libc_ş—nup_»giÚ_¡¬t
 (((
	t_å
)->
	t_æags
 & 
	t_IO_USER_LOCK
è=ğ0, 
	t_fù
, _å)

	)

43 
	t_IO_ş—nup_»giÚ_¡¬t_nßrg
(
	t_fù
) \

44 
	t__libc_ş—nup_»giÚ_¡¬t
 (1, 
	t_fù
, 
	tNULL
)

	)

45 
	t_IO_ş—nup_»giÚ_’d
(
	t_do™
) \

46 
	t__libc_ş—nup_»giÚ_’d
 (
	t_do™
)

	)

48 #ià
	tdefšed
 
	t_LIBC
 && !defšed 
	tNOT_IN_libc


49 
	t_IO_acquœe_lock
(
	t_å
) \

50 
	t_IO_ş—nup_»giÚ_¡¬t
 (((*è(*)è
	t_IO_fuÆockfe
, (
	t_å
)); \

51 
	`_IO_æockfe
 (
_å
)

	)

53 
	#_IO_»Ëa£_lock
(
_å
) \

54 
	`_IO_fuÆockfe
 (
_å
); \

55 
	`_IO_ş—nup_»giÚ_’d
 (0)

	)

	@/usr/include/bits/time.h

24 #iâdeà
__Ãed_timev®


25 #iâdeà
_BITS_TIME_H


26 
	#_BITS_TIME_H
 1

	)

34 
	#CLOCKS_PER_SEC
 1000000l

	)

36 #ià!
defšed
 
__STRICT_ANSI__
 && !defšed 
__USE_XOPEN2K


39 
	~<b™s/ty³s.h
>

40 
__syscÚf
 ();

41 
	#CLK_TCK
 ((
__şock_t
è
	`__syscÚf
 (2)è

	)

44 #ifdeà
__USE_POSIX199309


46 
	#CLOCK_REALTIME
 0

	)

48 
	#CLOCK_MONOTONIC
 1

	)

50 
	#CLOCK_PROCESS_CPUTIME_ID
 2

	)

52 
	#CLOCK_THREAD_CPUTIME_ID
 3

	)

54 
	#CLOCK_MONOTONIC_RAW
 4

	)

56 
	#CLOCK_REALTIME_COARSE
 5

	)

58 
	#CLOCK_MONOTONIC_COARSE
 6

	)

61 
	#TIMER_ABSTIME
 1

	)

67 #ifdeà
__Ãed_timev®


68 #undeà
__Ãed_timev®


69 #iâdeà
_STRUCT_TIMEVAL


70 
	#_STRUCT_TIMEVAL
 1

	)

71 
	~<b™s/ty³s.h
>

75 
	stimev®


77 
__time_t
 
	mtv_£c
;

78 
__su£cÚds_t
 
	mtv_u£c
;

	@/usr/include/bits/typesizes.h

20 #iâdeà
_BITS_TYPES_H


24 #iâdef 
_BITS_TYPESIZES_H


25 
	#_BITS_TYPESIZES_H
 1

	)

30 
	#__DEV_T_TYPE
 
__UQUAD_TYPE


	)

31 
	#__UID_T_TYPE
 
__U32_TYPE


	)

32 
	#__GID_T_TYPE
 
__U32_TYPE


	)

33 
	#__INO_T_TYPE
 
__ULONGWORD_TYPE


	)

34 
	#__INO64_T_TYPE
 
__UQUAD_TYPE


	)

35 
	#__MODE_T_TYPE
 
__U32_TYPE


	)

36 
	#__NLINK_T_TYPE
 
__UWORD_TYPE


	)

37 
	#__OFF_T_TYPE
 
__SLONGWORD_TYPE


	)

38 
	#__OFF64_T_TYPE
 
__SQUAD_TYPE


	)

39 
	#__PID_T_TYPE
 
__S32_TYPE


	)

40 
	#__RLIM_T_TYPE
 
__ULONGWORD_TYPE


	)

41 
	#__RLIM64_T_TYPE
 
__UQUAD_TYPE


	)

42 
	#__BLKCNT_T_TYPE
 
__SLONGWORD_TYPE


	)

43 
	#__BLKCNT64_T_TYPE
 
__SQUAD_TYPE


	)

44 
	#__FSBLKCNT_T_TYPE
 
__ULONGWORD_TYPE


	)

45 
	#__FSBLKCNT64_T_TYPE
 
__UQUAD_TYPE


	)

46 
	#__FSFILCNT_T_TYPE
 
__ULONGWORD_TYPE


	)

47 
	#__FSFILCNT64_T_TYPE
 
__UQUAD_TYPE


	)

48 
	#__ID_T_TYPE
 
__U32_TYPE


	)

49 
	#__CLOCK_T_TYPE
 
__SLONGWORD_TYPE


	)

50 
	#__TIME_T_TYPE
 
__SLONGWORD_TYPE


	)

51 
	#__USECONDS_T_TYPE
 
__U32_TYPE


	)

52 
	#__SUSECONDS_T_TYPE
 
__SLONGWORD_TYPE


	)

53 
	#__DADDR_T_TYPE
 
__S32_TYPE


	)

54 
	#__SWBLK_T_TYPE
 
__SLONGWORD_TYPE


	)

55 
	#__KEY_T_TYPE
 
__S32_TYPE


	)

56 
	#__CLOCKID_T_TYPE
 
__S32_TYPE


	)

57 
	#__TIMER_T_TYPE
 *

	)

58 
	#__BLKSIZE_T_TYPE
 
__SLONGWORD_TYPE


	)

59 
	#__FSID_T_TYPE
 sŒuù { 
__v®
[2]; }

	)

60 
	#__SSIZE_T_TYPE
 
__SWORD_TYPE


	)

63 
	#__FD_SETSIZE
 1024

	)

	@/usr/include/bits/uio.h

19 #ià!
defšed
 
_SYS_UIO_H
 && !defšed 
_FCNTL_H


23 #iâdeà
_BITS_UIO_H


24 
	#_BITS_UIO_H
 1

	)

26 
	~<sys/ty³s.h
>

40 
	#UIO_MAXIOV
 1024

	)

44 
	siovec


46 *
	miov_ba£
;

47 
size_t
 
	miov_Ën
;

	@/usr/include/ctype.h

24 #iâdef 
_CTYPE_H


25 
	#_CTYPE_H
 1

	)

27 
	~<ã©u»s.h
>

28 
	~<b™s/ty³s.h
>

30 
	g__BEGIN_DECLS


32 #iâdeà
_ISb™


41 
	~<’dŸn.h
>

42 #ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


43 
	#_ISb™
(
b™
è(1 << (b™))

	)

45 
	#_ISb™
(
b™
è((b™è< 8 ? ((1 << (b™)è<< 8è: ((1 << (b™)è>> 8))

	)

50 
	m_ISuµ”
 = 
_ISb™
 (0),

51 
	m_ISlow”
 = 
_ISb™
 (1),

52 
	m_IS®pha
 = 
_ISb™
 (2),

53 
	m_ISdig™
 = 
_ISb™
 (3),

54 
	m_ISxdig™
 = 
_ISb™
 (4),

55 
	m_IS¥aû
 = 
_ISb™
 (5),

56 
	m_IS´št
 = 
_ISb™
 (6),

57 
	m_ISg¿ph
 = 
_ISb™
 (7),

58 
	m_ISbÏnk
 = 
_ISb™
 (8),

59 
	m_ISúŒl
 = 
_ISb™
 (9),

60 
	m_ISpunù
 = 
_ISb™
 (10),

61 
	m_IS®num
 = 
_ISb™
 (11)

81 
__cÚ¡
 **
	$__ùy³_b_loc
 ()

82 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡
));

83 
__cÚ¡
 
__št32_t
 **
	$__ùy³_tŞow”_loc
 ()

84 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡
));

85 
__cÚ¡
 
__št32_t
 **
	$__ùy³_touµ”_loc
 ()

86 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡
));

88 
	#__isùy³
(
c
, 
ty³
) \

89 ((*
	`__ùy³_b_loc
 ())[(è(
c
)] & (è
ty³
)

	)

91 
	#__i§scii
(
c
è(((cè& ~0x7fè=ğ0è

	)

92 
	#__tßscii
(
c
è((cè& 0x7fè

	)

94 
	#__exùy³
(
Çme
è
	`Çme
 (è
__THROW


	)

96 
__BEGIN_NAMESPACE_STD


102 
	`__exùy³
 (
i§Êum
);

103 
	`__exùy³
 (
i§Íha
);

104 
	`__exùy³
 (
isúŒl
);

105 
	`__exùy³
 (
isdig™
);

106 
	`__exùy³
 (
i¦ow”
);

107 
	`__exùy³
 (
isg¿ph
);

108 
	`__exùy³
 (
i¥ršt
);

109 
	`__exùy³
 (
i¥unù
);

110 
	`__exùy³
 (
is¥aû
);

111 
	`__exùy³
 (
isuµ”
);

112 
	`__exùy³
 (
isxdig™
);

116 
	$tŞow”
 (
__c
è
__THROW
;

119 
	$touµ”
 (
__c
è
__THROW
;

121 
__END_NAMESPACE_STD


125 #ifdef 
__USE_ISOC99


126 
__BEGIN_NAMESPACE_C99


128 
	`__exùy³
 (
isbÏnk
);

130 
__END_NAMESPACE_C99


133 #ifdeà
__USE_GNU


135 
	$isùy³
 (
__c
, 
__mask
è
__THROW
;

138 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC
 || defšed 
__USE_XOPEN


142 
	$i§scii
 (
__c
è
__THROW
;

146 
	$tßscii
 (
__c
è
__THROW
;

150 
	`__exùy³
 (
_touµ”
);

151 
	`__exùy³
 (
_tŞow”
);

155 
	#__tobody
(
c
, 
f
, 
a
, 
¬gs
) \

156 (
__ex‹nsiÚ__
 \

157 ({ 
__»s
; \

158 ià( (
c
) > 1) \

160 ià(
	`__butš_cÚ¡ªt_p
 (
c
)) \

162 
__c
 = (
c
); \

163 
__»s
 = 
__c
 < -128 || __ø> 255 ? __ø: (
a
)[__c]; \

166 
__»s
 = 
f
 
¬gs
; \

169 
__»s
 = (
a
)[(è(
c
)]; \

170 
__»s
; 
	}
}))

	)

172 #ià!
defšed
 
__NO_CTYPE
 && !defšed 
__ılu¥lus


173 
	#i§Êum
(
c
è
	`__isùy³
((c), 
_IS®num
)

	)

174 
	#i§Íha
(
c
è
	`__isùy³
((c), 
_IS®pha
)

	)

175 
	#isúŒl
(
c
è
	`__isùy³
((c), 
_ISúŒl
)

	)

176 
	#isdig™
(
c
è
	`__isùy³
((c), 
_ISdig™
)

	)

177 
	#i¦ow”
(
c
è
	`__isùy³
((c), 
_ISlow”
)

	)

178 
	#isg¿ph
(
c
è
	`__isùy³
((c), 
_ISg¿ph
)

	)

179 
	#i¥ršt
(
c
è
	`__isùy³
((c), 
_IS´št
)

	)

180 
	#i¥unù
(
c
è
	`__isùy³
((c), 
_ISpunù
)

	)

181 
	#is¥aû
(
c
è
	`__isùy³
((c), 
_IS¥aû
)

	)

182 
	#isuµ”
(
c
è
	`__isùy³
((c), 
_ISuµ”
)

	)

183 
	#isxdig™
(
c
è
	`__isùy³
((c), 
_ISxdig™
)

	)

185 #ifdeà
__USE_ISOC99


186 
	#isbÏnk
(
c
è
	`__isùy³
((c), 
_ISbÏnk
)

	)

189 #ifdeà
__USE_EXTERN_INLINES


190 
__ex‹º_šlše
 

191 
__NTH
 (
	$tŞow”
 (
__c
))

193  
__c
 >ğ-128 && __ø< 256 ? (*
	`__ùy³_tŞow”_loc
 ())[__c] : __c;

194 
	}
}

196 
__ex‹º_šlše
 

197 
__NTH
 (
	$touµ”
 (
__c
))

199  
__c
 >ğ-128 && __ø< 256 ? (*
	`__ùy³_touµ”_loc
 ())[__c] : __c;

200 
	}
}

203 #ià
__GNUC__
 >ğ2 && 
defšed
 
__OPTIMIZE__
 && !defšed 
__ılu¥lus


204 
	#tŞow”
(
c
è
	`__tobody
 (c, 
tŞow”
, *
	`__ùy³_tŞow”_loc
 (), (c))

	)

205 
	#touµ”
(
c
è
	`__tobody
 (c, 
touµ”
, *
	`__ùy³_touµ”_loc
 (), (c))

	)

208 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC
 || defšed 
__USE_XOPEN


209 
	#i§scii
(
c
è
	`__i§scii
 (c)

	)

210 
	#tßscii
(
c
è
	`__tßscii
 (c)

	)

212 
	#_tŞow”
(
c
è((è(*
	`__ùy³_tŞow”_loc
 ())[(è(c)])

	)

213 
	#_touµ”
(
c
è((è(*
	`__ùy³_touµ”_loc
 ())[(è(c)])

	)

219 #ifdeà
__USE_XOPEN2K8


233 
	~<xloÿË.h
>

237 
	#__isùy³_l
(
c
, 
ty³
, 
loÿË
) \

238 ((
loÿË
)->
__ùy³_b
[(è(
c
)] & (è
ty³
)

	)

240 
	#__exùy³_l
(
Çme
) \

241 
	`Çme
 (, 
__loÿË_t
è
__THROW


	)

247 
__exùy³_l
 (
i§Êum_l
);

248 
__exùy³_l
 (
i§Íha_l
);

249 
__exùy³_l
 (
isúŒl_l
);

250 
__exùy³_l
 (
isdig™_l
);

251 
__exùy³_l
 (
i¦ow”_l
);

252 
__exùy³_l
 (
isg¿ph_l
);

253 
__exùy³_l
 (
i¥ršt_l
);

254 
__exùy³_l
 (
i¥unù_l
);

255 
__exùy³_l
 (
is¥aû_l
);

256 
__exùy³_l
 (
isuµ”_l
);

257 
__exùy³_l
 (
isxdig™_l
);

259 
__exùy³_l
 (
isbÏnk_l
);

263 
	$__tŞow”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

264 
	$tŞow”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

267 
	$__touµ”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

268 
	$touµ”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

270 #ià
__GNUC__
 >ğ2 && 
defšed
 
__OPTIMIZE__
 && !defšed 
__ılu¥lus


271 
	#__tŞow”_l
(
c
, 
loÿË
) \

272 
	`__tobody
 (
c
, 
__tŞow”_l
, (
loÿË
)->
__ùy³_tŞow”
, (c,†oÿË))

	)

273 
	#__touµ”_l
(
c
, 
loÿË
) \

274 
	`__tobody
 (
c
, 
__touµ”_l
, (
loÿË
)->
__ùy³_touµ”
, (c,†oÿË))

	)

275 
	#tŞow”_l
(
c
, 
loÿË
è
	`__tŞow”_l
 ((c), (loÿË))

	)

276 
	#touµ”_l
(
c
, 
loÿË
è
	`__touµ”_l
 ((c), (loÿË))

	)

280 #iâdeà
__NO_CTYPE


281 
	#__i§Êum_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS®num
, (l))

	)

282 
	#__i§Íha_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS®pha
, (l))

	)

283 
	#__isúŒl_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISúŒl
, (l))

	)

284 
	#__isdig™_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISdig™
, (l))

	)

285 
	#__i¦ow”_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISlow”
, (l))

	)

286 
	#__isg¿ph_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISg¿ph
, (l))

	)

287 
	#__i¥ršt_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS´št
, (l))

	)

288 
	#__i¥unù_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISpunù
, (l))

	)

289 
	#__is¥aû_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS¥aû
, (l))

	)

290 
	#__isuµ”_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISuµ”
, (l))

	)

291 
	#__isxdig™_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISxdig™
, (l))

	)

293 
	#__isbÏnk_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISbÏnk
, (l))

	)

295 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC


296 
	#__i§scii_l
(
c
,
l
è(Ö), 
	`__i§scii
 (c))

	)

297 
	#__tßscii_l
(
c
,
l
è(Ö), 
	`__tßscii
 (c))

	)

300 
	#i§Êum_l
(
c
,
l
è
	`__i§Êum_l
 ((c), (l))

	)

301 
	#i§Íha_l
(
c
,
l
è
	`__i§Íha_l
 ((c), (l))

	)

302 
	#isúŒl_l
(
c
,
l
è
	`__isúŒl_l
 ((c), (l))

	)

303 
	#isdig™_l
(
c
,
l
è
	`__isdig™_l
 ((c), (l))

	)

304 
	#i¦ow”_l
(
c
,
l
è
	`__i¦ow”_l
 ((c), (l))

	)

305 
	#isg¿ph_l
(
c
,
l
è
	`__isg¿ph_l
 ((c), (l))

	)

306 
	#i¥ršt_l
(
c
,
l
è
	`__i¥ršt_l
 ((c), (l))

	)

307 
	#i¥unù_l
(
c
,
l
è
	`__i¥unù_l
 ((c), (l))

	)

308 
	#is¥aû_l
(
c
,
l
è
	`__is¥aû_l
 ((c), (l))

	)

309 
	#isuµ”_l
(
c
,
l
è
	`__isuµ”_l
 ((c), (l))

	)

310 
	#isxdig™_l
(
c
,
l
è
	`__isxdig™_l
 ((c), (l))

	)

312 
	#isbÏnk_l
(
c
,
l
è
	`__isbÏnk_l
 ((c), (l))

	)

314 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC


315 
	#i§scii_l
(
c
,
l
è
	`__i§scii_l
 ((c), (l))

	)

316 
	#tßscii_l
(
c
,
l
è
	`__tßscii_l
 ((c), (l))

	)

323 
__END_DECLS


	@/usr/include/endian.h

19 #iâdef 
_ENDIAN_H


20 
	#_ENDIAN_H
 1

	)

22 
	~<ã©u»s.h
>

32 
	#__LITTLE_ENDIAN
 1234

	)

33 
	#__BIG_ENDIAN
 4321

	)

34 
	#__PDP_ENDIAN
 3412

	)

37 
	~<b™s/’dŸn.h
>

41 #iâdeà
__FLOAT_WORD_ORDER


42 
	#__FLOAT_WORD_ORDER
 
__BYTE_ORDER


	)

45 #ifdef 
__USE_BSD


46 
	#LITTLE_ENDIAN
 
__LITTLE_ENDIAN


	)

47 
	#BIG_ENDIAN
 
__BIG_ENDIAN


	)

48 
	#PDP_ENDIAN
 
__PDP_ENDIAN


	)

49 
	#BYTE_ORDER
 
__BYTE_ORDER


	)

52 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


53 
	#__LONG_LONG_PAIR
(
HI
, 
LO
èLO, 
	)
HI

54 #–ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


55 
	#__LONG_LONG_PAIR
(
HI
, 
LO
èHI, 
	)
LO

59 #ifdeà
__USE_BSD


61 
	~<b™s/by‹sw­.h
>

63 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


64 
	#htobe16
(
x
è
	`__bsw­_16
 (x)

	)

65 
	#htŞe16
(
x
è(x)

	)

66 
	#be16toh
(
x
è
	`__bsw­_16
 (x)

	)

67 
	#Ë16toh
(
x
è(x)

	)

69 
	#htobe32
(
x
è
	`__bsw­_32
 (x)

	)

70 
	#htŞe32
(
x
è(x)

	)

71 
	#be32toh
(
x
è
	`__bsw­_32
 (x)

	)

72 
	#Ë32toh
(
x
è(x)

	)

74 
	#htobe64
(
x
è
	`__bsw­_64
 (x)

	)

75 
	#htŞe64
(
x
è(x)

	)

76 
	#be64toh
(
x
è
	`__bsw­_64
 (x)

	)

77 
	#Ë64toh
(
x
è(x)

	)

79 
	#htobe16
(
x
è(x)

	)

80 
	#htŞe16
(
x
è
	`__bsw­_16
 (x)

	)

81 
	#be16toh
(
x
è(x)

	)

82 
	#Ë16toh
(
x
è
	`__bsw­_16
 (x)

	)

84 
	#htobe32
(
x
è(x)

	)

85 
	#htŞe32
(
x
è
	`__bsw­_32
 (x)

	)

86 
	#be32toh
(
x
è(x)

	)

87 
	#Ë32toh
(
x
è
	`__bsw­_32
 (x)

	)

89 
	#htobe64
(
x
è(x)

	)

90 
	#htŞe64
(
x
è
	`__bsw­_64
 (x)

	)

91 
	#be64toh
(
x
è(x)

	)

92 
	#Ë64toh
(
x
è
	`__bsw­_64
 (x)

	)

	@/usr/include/gnu/stubs.h

4 
	~<b™s/wÜdsize.h
>

6 #ià
__WORDSIZE
 == 32

7 
	~<gnu/¡ubs-32.h
>

8 #–ià
__WORDSIZE
 == 64

9 
	~<gnu/¡ubs-64.h
>

	@/usr/include/sys/cdefs.h

20 #iâdef 
_SYS_CDEFS_H


21 
	#_SYS_CDEFS_H
 1

	)

24 #iâdeà
_FEATURES_H


25 
	~<ã©u»s.h
>

31 #ià
defšed
 
__GNUC__
 && !defšed 
__STDC__


36 #undeà
__P


37 #undeà
__PMT


39 #ifdeà
__GNUC__


46 #ià!
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (3, 3)

47 
	#__THROW
 
	`__©Œibu‹__
 ((
__nÙhrow__
))

	)

48 
	#__NTH
(
fù
è
	`__©Œibu‹__
 ((
__nÙhrow__
)è
	)
fct

50 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (2,8)

51 
	#__THROW
 
	`throw
 ()

	)

52 
	#__NTH
(
fù
èfù 
	`throw
 ()

	)

54 
	#__THROW


	)

55 
	#__NTH
(
fù
è
	)
fct

61 
	#__šlše


	)

63 
	#__THROW


	)

64 
	#__NTH
(
fù
è
	)
fct

66 
	#__cÚ¡
 cÚ¡

	)

67 
	#__sigÃd
 sigÃd

	)

68 
	#__vŞ©e
 vŞ©e

	)

74 
	#__P
(
¬gs
è
	)
args

75 
	#__PMT
(
¬gs
è
	)
args

80 
	#__CONCAT
(
x
,
y
èx ## 
	)
y

81 
	#__STRING
(
x
è#x

	)

84 
	#__±r_t
 *

	)

85 
	#__lÚg_doubË_t
 

	)

89 #ifdef 
__ılu¥lus


90 
	#__BEGIN_DECLS
 "C" {

	)

91 
	#__END_DECLS
 }

	)

93 
	#__BEGIN_DECLS


	)

94 
	#__END_DECLS


	)

103 #ià
defšed
 
__ılu¥lus
 && defšed 
_GLIBCPP_USE_NAMESPACES


104 
	#__BEGIN_NAMESPACE_STD
 
Çme¥aû
 
¡d
 {

	)

105 
	#__END_NAMESPACE_STD
 }

	)

106 
	#__USING_NAMESPACE_STD
(
Çme
è
usšg
 
¡d
::Çme;

	)

107 
	#__BEGIN_NAMESPACE_C99
 
Çme¥aû
 
__c99
 {

	)

108 
	#__END_NAMESPACE_C99
 }

	)

109 
	#__USING_NAMESPACE_C99
(
Çme
è
usšg
 
__c99
::Çme;

	)

114 
	#__BEGIN_NAMESPACE_STD


	)

115 
	#__END_NAMESPACE_STD


	)

116 
	#__USING_NAMESPACE_STD
(
Çme
)

	)

117 
	#__BEGIN_NAMESPACE_C99


	)

118 
	#__END_NAMESPACE_C99


	)

119 
	#__USING_NAMESPACE_C99
(
Çme
)

	)

124 #iâdeà
__BOUNDED_POINTERS__


125 
	#__bounded


	)

126 
	#__unbounded


	)

127 
	#__±rv®ue


	)

132 
	#__bos
(
±r
è
	`__butš_objeù_size
 (±r, 
__USE_FORTIFY_LEVEL
 > 1)

	)

133 
	#__bos0
(
±r
è
	`__butš_objeù_size
 (±r, 0)

	)

135 #ià
__GNUC_PREREQ
 (4,3) \

136 || (
defšed
 
	g__GNUC_RH_RELEASE__
 && 
	g__GNUC__
 == 4 \

137 && 
__GNUC_MINOR__
 =ğ1 && 
__GNUC_PATCHLEVEL__
 == 2 \

138 && 
__GNUC_RH_RELEASE__
 >= 31)

139 
	#__w¬ndeş
(
Çme
, 
msg
) \

140 
	`Çme
 (è
	`__©Œibu‹__
((
	`__w¬nšg__
 (
msg
)))

	)

141 
	#__w¬Ç‰r
(
msg
è
	`__©Œibu‹__
((
	`__w¬nšg__
 (msg)))

	)

142 
	#__”rÜdeş
(
Çme
, 
msg
) \

143 
	`Çme
 (è
	`__©Œibu‹__
((
	`__”rÜ__
 (
msg
)))

	)

145 
	#__w¬ndeş
(
Çme
, 
msg
è
	`Çme
 ()

	)

146 
	#__w¬Ç‰r
(
msg
)

	)

147 
	#__”rÜdeş
(
Çme
, 
msg
è
	`Çme
 ()

	)

151 #ià
__GNUC_PREREQ
 (2,97)

153 
	#__æex¬r
 []

	)

155 #ifdeà
__GNUC__


156 
	#__æex¬r
 [0]

	)

158 #ià
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L

159 
	#__æex¬r
 []

	)

162 
	#__æex¬r
 [1]

	)

178 #ià
defšed
 
__GNUC__
 && __GNUC__ >= 2

180 
	#__REDIRECT
(
Çme
, 
´Ùo
, 
®Ÿs
èÇm´ÙØ
	`__asm__
 (
	`__ASMNAME
 (#®Ÿs))

	)

181 #ifdeà
__ılu¥lus


182 
	#__REDIRECT_NTH
(
Çme
, 
´Ùo
, 
®Ÿs
) \

183 
Çme
 
´Ùo
 
__THROW
 
	`__asm__
 (
	`__ASMNAME
 (#®Ÿs))

	)

185 
	#__REDIRECT_NTH
(
Çme
, 
´Ùo
, 
®Ÿs
) \

186 
Çme
 
´Ùo
 
	`__asm__
 (
	`__ASMNAME
 (#®Ÿs)è
__THROW


	)

188 
	#__ASMNAME
(
úame
è
	`__ASMNAME2
 (
__USER_LABEL_PREFIX__
, cÇme)

	)

189 
	#__ASMNAME2
(
´efix
, 
úame
è
	`__STRING
 (´efixè
	)
cname

202 #ià!
defšed
 
__GNUC__
 || __GNUC__ < 2

203 
	#__©Œibu‹__
(
xyz
è

	)

209 #ià
__GNUC_PREREQ
 (2,96)

210 
	#__©Œibu‹_m®loc__
 
	`__©Œibu‹__
 ((
__m®loc__
))

	)

212 
	#__©Œibu‹_m®loc__


	)

218 #ià
__GNUC_PREREQ
 (2,96)

219 
	#__©Œibu‹_pu»__
 
	`__©Œibu‹__
 ((
__pu»__
))

	)

221 
	#__©Œibu‹_pu»__


	)

227 #ià
__GNUC_PREREQ
 (3,1)

228 
	#__©Œibu‹_u£d__
 
	`__©Œibu‹__
 ((
__u£d__
))

	)

229 
	#__©Œibu‹_nošlše__
 
	`__©Œibu‹__
 ((
__nošlše__
))

	)

231 
	#__©Œibu‹_u£d__
 
	`__©Œibu‹__
 ((
__unu£d__
))

	)

232 
	#__©Œibu‹_nošlše__


	)

236 #ià
__GNUC_PREREQ
 (3,2)

237 
	#__©Œibu‹_d•»ÿ‹d__
 
	`__©Œibu‹__
 ((
__d•»ÿ‹d__
))

	)

239 
	#__©Œibu‹_d•»ÿ‹d__


	)

248 #ià
__GNUC_PREREQ
 (2,8)

249 
	#__©Œibu‹_fÜm©_¬g__
(
x
è
	`__©Œibu‹__
 ((
	`__fÜm©_¬g__
 (x)))

	)

251 
	#__©Œibu‹_fÜm©_¬g__
(
x
è

	)

258 #ià
__GNUC_PREREQ
 (2,97)

259 
	#__©Œibu‹_fÜm©_¡rfmÚ__
(
a
,
b
) \

260 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__¡rfmÚ__
, 
a
, 
b
)))

	)

262 
	#__©Œibu‹_fÜm©_¡rfmÚ__
(
a
,
b
è

	)

267 #ià
__GNUC_PREREQ
 (3,3)

268 
	#__nÚnuÎ
(
·¿ms
è
	`__©Œibu‹__
 ((
__nÚnuÎ__
…¬ams))

	)

270 
	#__nÚnuÎ
(
·¿ms
)

	)

275 #ià
__GNUC_PREREQ
 (3,4)

276 
	#__©Œibu‹_w¬n_unu£d_»suÉ__
 \

277 
	`__©Œibu‹__
 ((
__w¬n_unu£d_»suÉ__
))

	)

278 #ià
__USE_FORTIFY_LEVEL
 > 0

279 
	#__wur
 
__©Œibu‹_w¬n_unu£d_»suÉ__


	)

282 
	#__©Œibu‹_w¬n_unu£d_»suÉ__


	)

284 #iâdeà
__wur


285 
	#__wur


	)

289 #ià
__GNUC_PREREQ
 (3,2)

290 
	#__®ways_šlše
 
__šlše
 
	`__©Œibu‹__
 ((
__®ways_šlše__
))

	)

292 
	#__®ways_šlše
 
__šlše


	)

297 #ià!
defšed
 
__ılu¥lus
 || 
__GNUC_PREREQ
 (4,3) \

298 || (
defšed
 
__GNUC_RH_RELEASE__
 && 
__GNUC__
 == 4 \

299 && 
__GNUC_MINOR__
 =ğ1 && 
__GNUC_PATCHLEVEL__
 == 2 \

300 && 
__GNUC_RH_RELEASE__
 >= 31)

301 #ià
defšed
 
__GNUC_STDC_INLINE__
 || defšed 
__ılu¥lus


302 
	#__ex‹º_šlše
 
__šlše
 
	`__©Œibu‹__
 ((
__gnu_šlše__
))

	)

303 #ià
__GNUC_PREREQ
 (4,3) \

304 || (
defšed
 
__GNUC_RH_RELEASE__
 && 
__GNUC__
 == 4 \

305 && 
__GNUC_MINOR__
 =ğ1 && 
__GNUC_PATCHLEVEL__
 == 2 \

306 && 
__GNUC_RH_RELEASE__
 >= 31)

307 
	#__ex‹º_®ways_šlše
 \

308 
__®ways_šlše
 
	`__©Œibu‹__
 ((
__gnu_šlše__
, 
__¬tificŸl__
))

	)

310 
	#__ex‹º_®ways_šlše
 \

311 
__®ways_šlše
 
	`__©Œibu‹__
 ((
__gnu_šlše__
))

	)

314 
	#__ex‹º_šlše
 
__šlše


	)

315 #ià
__GNUC_PREREQ
 (4,3)

316 
	#__ex‹º_®ways_šlše
 \

317 
__®ways_šlše
 
	`__©Œibu‹__
 ((
__¬tificŸl__
))

	)

319 
	#__ex‹º_®ways_šlše
 
__®ways_šlše


	)

326 #ià
__GNUC_PREREQ
 (4,3) \

327 || (
defšed
 
__GNUC_RH_RELEASE__
 && 
__GNUC__
 == 4 \

328 && 
__GNUC_MINOR__
 =ğ1 && 
__GNUC_PATCHLEVEL__
 == 2 \

329 && 
__GNUC_RH_RELEASE__
 >= 31)

330 
	#__va_¬g_·ck
(è
	`__butš_va_¬g_·ck
 ()

	)

331 
	#__va_¬g_·ck_Ën
(è
	`__butš_va_¬g_·ck_Ën
 ()

	)

338 #ià!
__GNUC_PREREQ
 (2,8)

339 
	#__ex‹nsiÚ__


	)

343 #ià!
__GNUC_PREREQ
 (2,92)

344 
	#__»¡riù


	)

350 #ià
__GNUC_PREREQ
 (3,1è&& !
defšed
 
__GNUG__


351 
	#__»¡riù_¬r
 
__»¡riù


	)

353 #ifdeà
__GNUC__


354 
	#__»¡riù_¬r


	)

356 #ià
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L

357 
	#__»¡riù_¬r
 
»¡riù


	)

360 
	#__»¡riù_¬r


	)

365 
	~<b™s/wÜdsize.h
>

367 #ià
defšed
 
__LONG_DOUBLE_MATH_OPTIONAL
 && defšed 
__NO_LONG_DOUBLE_MATH


368 
	#__LDBL_COMPAT
 1

	)

369 #ifdeà
__REDIRECT


370 
	#__LDBL_REDIR1
(
Çme
, 
´Ùo
, 
®Ÿs
è
	`__REDIRECT
 (Çme,…rÙo,‡lŸs)

	)

371 
	#__LDBL_REDIR
(
Çme
, 
´Ùo
) \

372 
	`__LDBL_REDIR1
 (
Çme
, 
´Ùo
, 
__Ædbl_
##Çme)

	)

373 
	#__LDBL_REDIR1_NTH
(
Çme
, 
´Ùo
, 
®Ÿs
è
	`__REDIRECT_NTH
 (Çme,…rÙo,‡lŸs)

	)

374 
	#__LDBL_REDIR_NTH
(
Çme
, 
´Ùo
) \

375 
	`__LDBL_REDIR1_NTH
 (
Çme
, 
´Ùo
, 
__Ædbl_
##Çme)

	)

376 
	#__LDBL_REDIR1_DECL
(
Çme
, 
®Ÿs
) \

377 
	`__ty³of
 (
Çme
èÇm
	`__asm
 (
	`__ASMNAME
 (#®Ÿs));

	)

378 
	#__LDBL_REDIR_DECL
(
Çme
) \

379 
	`__ty³of
 (
Çme
èÇm
	`__asm
 (
	`__ASMNAME
 ("__Ædbl_" #Çme));

	)

380 
	#__REDIRECT_LDBL
(
Çme
, 
´Ùo
, 
®Ÿs
) \

381 
	`__LDBL_REDIR1
 (
Çme
, 
´Ùo
, 
__Ædbl_
##
®Ÿs
)

	)

382 
	#__REDIRECT_NTH_LDBL
(
Çme
, 
´Ùo
, 
®Ÿs
) \

383 
	`__LDBL_REDIR1_NTH
 (
Çme
, 
´Ùo
, 
__Ædbl_
##
®Ÿs
)

	)

386 #ià!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT


387 
	#__LDBL_REDIR1
(
Çme
, 
´Ùo
, 
®Ÿs
èÇm
	)
proto

388 
	#__LDBL_REDIR
(
Çme
, 
´Ùo
èÇm
	)
proto

389 
	#__LDBL_REDIR1_NTH
(
Çme
, 
´Ùo
, 
®Ÿs
èÇm´ÙØ
__THROW


	)

390 
	#__LDBL_REDIR_NTH
(
Çme
, 
´Ùo
èÇm´ÙØ
__THROW


	)

391 
	#__LDBL_REDIR_DECL
(
Çme
)

	)

392 #ifdeà
__REDIRECT


393 
	#__REDIRECT_LDBL
(
Çme
, 
´Ùo
, 
®Ÿs
è
	`__REDIRECT
 (Çme,…rÙo,‡lŸs)

	)

394 
	#__REDIRECT_NTH_LDBL
(
Çme
, 
´Ùo
, 
®Ÿs
) \

395 
	`__REDIRECT_NTH
 (
Çme
, 
´Ùo
, 
®Ÿs
)

	)

	@/usr/include/sys/select.h

22 #iâdeà
_SYS_SELECT_H


23 
	#_SYS_SELECT_H
 1

	)

25 
	~<ã©u»s.h
>

28 
	~<b™s/ty³s.h
>

31 
	~<b™s/£Ëù.h
>

34 
	~<b™s/sig£t.h
>

36 #iâdeà
__sig£t_t_defšed


37 
	#__sig£t_t_defšed


	)

38 
__sig£t_t
 
	tsig£t_t
;

42 
	#__Ãed_time_t


	)

43 
	#__Ãed_time¥ec


	)

44 
	~<time.h
>

45 
	#__Ãed_timev®


	)

46 
	~<b™s/time.h
>

48 #iâdeà
__su£cÚds_t_defšed


49 
__su£cÚds_t
 
	tsu£cÚds_t
;

50 
	#__su£cÚds_t_defšed


	)

55 
	t__fd_mask
;

58 #undeà
__NFDBITS


59 #undeà
__FDELT


60 #undeà
__FDMASK


62 
	#__NFDBITS
 (8 * (è (
__fd_mask
))

	)

63 
	#__FDELT
(
d
è((dè/ 
__NFDBITS
)

	)

64 
	#__FDMASK
(
d
è((
__fd_mask
è1 << ((dè% 
__NFDBITS
))

	)

71 #ifdeà
__USE_XOPEN


72 
__fd_mask
 
	mfds_b™s
[
__FD_SETSIZE
 / 
__NFDBITS
];

73 
	#__FDS_BITS
(
£t
è((£t)->
fds_b™s
)

	)

75 
__fd_mask
 
	m__fds_b™s
[
__FD_SETSIZE
 / 
__NFDBITS
];

76 
	#__FDS_BITS
(
£t
è((£t)->
__fds_b™s
)

	)

78 } 
	tfd_£t
;

81 
	#FD_SETSIZE
 
__FD_SETSIZE


	)

83 #ifdeà
__USE_MISC


85 
__fd_mask
 
	tfd_mask
;

88 
	#NFDBITS
 
__NFDBITS


	)

93 
	#FD_SET
(
fd
, 
fd£
è
	`__FD_SET
 (fd, fd£)

	)

94 
	#FD_CLR
(
fd
, 
fd£
è
	`__FD_CLR
 (fd, fd£)

	)

95 
	#FD_ISSET
(
fd
, 
fd£
è
	`__FD_ISSET
 (fd, fd£)

	)

96 
	#FD_ZERO
(
fd£
è
	`__FD_ZERO
 (fd£)

	)

99 
__BEGIN_DECLS


109 
£Ëù
 (
__nfds
, 
fd_£t
 *
__»¡riù
 
__»adfds
,

110 
fd_£t
 *
__»¡riù
 
__wr™efds
,

111 
fd_£t
 *
__»¡riù
 
__exû±fds
,

112 
timev®
 *
__»¡riù
 
__timeout
);

114 #ifdeà
__USE_XOPEN2K


121 
p£Ëù
 (
__nfds
, 
fd_£t
 *
__»¡riù
 
__»adfds
,

122 
fd_£t
 *
__»¡riù
 
__wr™efds
,

123 
fd_£t
 *
__»¡riù
 
__exû±fds
,

124 cÚ¡ 
time¥ec
 *
__»¡riù
 
__timeout
,

125 cÚ¡ 
__sig£t_t
 *
__»¡riù
 
__sigmask
);

128 
	g__END_DECLS


	@/usr/include/sys/sysmacros.h

21 #iâdeà
_SYS_SYSMACROS_H


22 
	#_SYS_SYSMACROS_H
 1

	)

24 
	~<ã©u»s.h
>

29 #ifdeà
__GLIBC_HAVE_LONG_LONG


30 
__ex‹nsiÚ__


31 
	$gnu_dev_majÜ
 (
__dev
)

32 
__THROW
;

33 
__ex‹nsiÚ__


34 
	$gnu_dev_mšÜ
 (
__dev
)

35 
__THROW
;

36 
__ex‹nsiÚ__


37 
	$gnu_dev_makedev
 (
__majÜ
,

38 
__mšÜ
)

39 
__THROW
;

41 #ià
defšed
 
__GNUC__
 && __GNUC__ >ğ2 && defšed 
__USE_EXTERN_INLINES


42 
__ex‹nsiÚ__
 
__ex‹º_šlše
 

43 
	`__NTH
 (
	$gnu_dev_majÜ
 (
__dev
))

45  ((
__dev
 >> 8) & 0xfff) | (() (__dev >> 32) & ~0xfff);

46 
	}
}

48 
__ex‹nsiÚ__
 
__ex‹º_šlše
 

49 
__NTH
 (
	$gnu_dev_mšÜ
 (
__dev
))

51  (
__dev
 & 0xff) | (() (__dev >> 12) & ~0xff);

52 
	}
}

54 
__ex‹nsiÚ__
 
__ex‹º_šlše
 

55 
__NTH
 (
	$gnu_dev_makedev
 (
__majÜ
, 
__mšÜ
))

57  ((
__mšÜ
 & 0xffè| ((
__majÜ
 & 0xfff) << 8)

58 | (((è(
__mšÜ
 & ~0xff)) << 12)

59 | (((è(
__majÜ
 & ~0xfff)) << 32));

60 
	}
}

65 
	#majÜ
(
dev
è
	`gnu_dev_majÜ
 (dev)

	)

66 
	#mšÜ
(
dev
è
	`gnu_dev_mšÜ
 (dev)

	)

67 
	#makedev
(
maj
, 
mš
è
	`gnu_dev_makedev
 (maj, mš)

	)

	@/usr/include/bits/byteswap.h

21 #ià!
defšed
 
_BYTESWAP_H
 && !defšed 
_NETINET_IN_H
 && !defšed 
_ENDIAN_H


25 #iâdeà
_BITS_BYTESWAP_H


26 
	#_BITS_BYTESWAP_H
 1

	)

28 
	~<b™s/wÜdsize.h
>

31 
	#__bsw­_cÚ¡ªt_16
(
x
) \

32 ((è((((
x
è>> 8è& 0xffè| (((xè& 0xffè<< 8)))

	)

34 #ià
defšed
 
__GNUC__
 && __GNUC__ >= 2

35 
	#__bsw­_16
(
x
) \

36 (
__ex‹nsiÚ__
 \

37 ({ 
__v
, 
__x
 = (è(
x
); \

38 ià(
	`__butš_cÚ¡ªt_p
 (
__x
)) \

39 
__v
 = 
	`__bsw­_cÚ¡ªt_16
 (
__x
); \

41 
	`__asm__
 ("rorw $8, %w0" \

42 : "ô" (
__v
) \

43 : "0" (
__x
) \

45 
__v
; }))

	)

48 
	#__bsw­_16
(
x
) \

49 (
__ex‹nsiÚ__
 \

50 ({ 
__x
 = (è(
x
); \

51 
	`__bsw­_cÚ¡ªt_16
 (
__x
); }))

	)

56 
	#__bsw­_cÚ¡ªt_32
(
x
) \

57 ((((
x
) & 0xff000000) >> 24) | (((x) & 0x00ff0000) >> 8) | \

58 (((
x
è& 0x0000ff00è<< 8è| (((xè& 0x000000ffè<< 24))

	)

60 #ià
defšed
 
__GNUC__
 && __GNUC__ >= 2

61 #ià
__WORDSIZE
 =ğ64 || (
defšed
 
__i486__
 || defšed 
__³Áium__
 \

62 || 
defšed
 
	g__³Áium´o__
 || defšed 
	g__³Áium4__
 \

63 || 
defšed
 
	g__k8__
 || defšed 
	g__©hlÚ__
 \

64 || 
defšed
 
	g__k6__
 || defšed 
	g__nocÚa__
 \

65 || 
defšed
 
	g__cÜe2__
 || defšed 
	g__geode__
 \

66 || 
defšed
 
	g__amdçm10__
)

69 
	#__bsw­_32
(
x
) \

70 (
__ex‹nsiÚ__
 \

71 ({ 
__v
, 
__x
 = (
x
); \

72 ià(
	`__butš_cÚ¡ªt_p
 (
__x
)) \

73 
__v
 = 
	`__bsw­_cÚ¡ªt_32
 (
__x
); \

75 
	`__asm__
 ("bsw­ %0" : "ô" (
__v
è: "0" (
__x
)); \

76 
__v
; }))

	)

78 
	#__bsw­_32
(
x
) \

79 (
__ex‹nsiÚ__
 \

80 ({ 
__v
, 
__x
 = (
x
); \

81 ià(
	`__butš_cÚ¡ªt_p
 (
__x
)) \

82 
__v
 = 
	`__bsw­_cÚ¡ªt_32
 (
__x
); \

84 
	`__asm__
 ("rorw $8, %w0;" \

87 : "ô" (
__v
) \

88 : "0" (
__x
) \

90 
__v
; }))

	)

93 
	#__bsw­_32
(
x
) \

94 (
__ex‹nsiÚ__
 \

95 ({ 
__x
 = (
x
); 
	`__bsw­_cÚ¡ªt_32
 (__x); }))

	)

99 #ià
defšed
 
__GNUC__
 && __GNUC__ >= 2

101 
	#__bsw­_cÚ¡ªt_64
(
x
) \

102 ((((
x
) & 0xff00000000000000ull) >> 56) \

103 | (((
x
) & 0x00ff000000000000ull) >> 40) \

104 | (((
x
) & 0x0000ff0000000000ull) >> 24) \

105 | (((
x
) & 0x000000ff00000000ull) >> 8) \

106 | (((
x
) & 0x00000000ff000000ull) << 8) \

107 | (((
x
) & 0x0000000000ff0000ull) << 24) \

108 | (((
x
) & 0x000000000000ff00ull) << 40) \

109 | (((
x
è& 0x00000000000000ffuÎè<< 56))

	)

111 #ià
__WORDSIZE
 == 64

112 
	#__bsw­_64
(
x
) \

113 (
__ex‹nsiÚ__
 \

114 ({ 
__v
, 
__x
 = (
x
); \

115 ià(
	`__butš_cÚ¡ªt_p
 (
__x
)) \

116 
__v
 = 
	`__bsw­_cÚ¡ªt_64
 (
__x
); \

118 
	`__asm__
 ("bsw­ %q0" : "ô" (
__v
è: "0" (
__x
)); \

119 
__v
; }))

	)

121 
	#__bsw­_64
(
x
) \

122 (
__ex‹nsiÚ__
 \

123 ({ uniÚ { 
__ex‹nsiÚ__
 
__Î
; \

124 
__l
[2]; } 
__w
, 
__r
; \

125 ià(
	`__butš_cÚ¡ªt_p
 (
x
)) \

126 
__r
.
__Î
 = 
	`__bsw­_cÚ¡ªt_64
 (
x
); \

129 
__w
.
__Î
 = (
x
); \

130 
__r
.
__l
[0] = 
	`__bsw­_32
 (
__w
.__l[1]); \

131 
__r
.
__l
[1] = 
	`__bsw­_32
 (
__w
.__l[0]); \

133 
__r
.
__Î
; }))

	)

	@/usr/include/bits/endian.h

3 #iâdeà
_ENDIAN_H


7 
	#__BYTE_ORDER
 
__LITTLE_ENDIAN


	)

	@/usr/include/bits/libc-lock.h

21 #iâdeà
_BITS_LIBC_LOCK_H


22 
	#_BITS_LIBC_LOCK_H
 1

	)

24 
	~<±h»ad.h
>

27 #ifdeà
_IO_MTSAFE_IO


28 
±h»ad_mu‹x_t
 
	t__libc_lock_t
;

29 ¡ruù { 
±h»ad_mu‹x_t
 
	mmu‹x
; } 
	t__libc_lock_»cursive_t
;

30 #ifdeà
__USE_UNIX98


31 
±h»ad_rwlock_t
 
	t__libc_rwlock_t
;

33 
__libc_rwlock_İaque__
 
	t__libc_rwlock_t
;

35 
__libc_lock_»cursive_t
 
	t__¹ld_lock_»cursive_t
;

37 
__libc_lock_İaque__
 
	t__libc_lock_t
;

38 
__libc_lock_»cursive_İaque__
 
	t__libc_lock_»cursive_t
;

39 
__libc_rwlock_İaque__
 
	t__libc_rwlock_t
;

43 
±h»ad_key_t
 
	t__libc_key_t
;

52 
	#__libc_lock_defše
(
CLASS
,
NAME
) \

53 
CLASS
 
__libc_lock_t
 
NAME
;

	)

54 
	#__libc_rwlock_defše
(
CLASS
,
NAME
) \

55 
CLASS
 
__libc_rwlock_t
 
NAME
;

	)

56 
	#__libc_lock_defše_»cursive
(
CLASS
,
NAME
) \

57 
CLASS
 
__libc_lock_»cursive_t
 
NAME
;

	)

58 
	#__¹ld_lock_defše_»cursive
(
CLASS
,
NAME
) \

59 
CLASS
 
__¹ld_lock_»cursive_t
 
NAME
;

	)

70 #ià
__LT_SPINLOCK_INIT
 == 0

71 
	#__libc_lock_defše_š™Ÿlized
(
CLASS
,
NAME
) \

72 
CLASS
 
__libc_lock_t
 
NAME
;

	)

74 
	#__libc_lock_defše_š™Ÿlized
(
CLASS
,
NAME
) \

75 
CLASS
 
__libc_lock_t
 
NAME
 = 
PTHREAD_MUTEX_INITIALIZER
;

	)

78 
	#__libc_rwlock_defše_š™Ÿlized
(
CLASS
,
NAME
) \

79 
CLASS
 
__libc_rwlock_t
 
NAME
 = 
PTHREAD_RWLOCK_INITIALIZER
;

	)

83 
	#__libc_lock_defše_š™Ÿlized_»cursive
(
CLASS
,
NAME
) \

84 
CLASS
 
__libc_lock_»cursive_t
 
NAME
 = 
_LIBC_LOCK_RECURSIVE_INITIALIZER
;

	)

85 
	#_LIBC_LOCK_RECURSIVE_INITIALIZER
 \

86 {
PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP
}

	)

88 
	#__¹ld_lock_defše_š™Ÿlized_»cursive
(
CLASS
,
NAME
) \

89 
CLASS
 
__¹ld_lock_»cursive_t
 
NAME
 = 
_RTLD_LOCK_RECURSIVE_INITIALIZER
;

	)

90 
	#_RTLD_LOCK_RECURSIVE_INITIALIZER
 \

91 {
PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP
}

	)

93 #ià
defšed
 
__PIC__


94 
	#__libc_maybe_ÿÎ
(
FUNC
, 
ARGS
, 
ELSE
) \

95 (
	`__ex‹nsiÚ__
 ({ 
	`__ty³of
 (
FUNC
è*
_â
 = (FUNC); \

96 
_â
 !ğ
NULL
 ? (*_âè
ARGS
 : 
ELSE
; }))

	)

98 
	#__libc_maybe_ÿÎ
(
FUNC
, 
ARGS
, 
ELSE
) \

99 (
FUNC
 !ğ
NULL
 ? FUNC 
ARGS
 : 
ELSE
)

	)

101 
	#__libc_maybe_ÿÎ2
(
FUNC
, 
ARGS
, 
ELSE
è
	`__libc_maybe_ÿÎ
 (
__
##FUNC, ARGS, ELSE)

	)

105 
	#__libc_lock_š™
(
NAME
) \

106 (
	`__libc_maybe_ÿÎ2
 (
±h»ad_mu‹x_š™
, (&(
NAME
), 
NULL
), 0))

	)

107 
	#__libc_rwlock_š™
(
NAME
) \

108 (
	`__libc_maybe_ÿÎ
 (
__±h»ad_rwlock_š™
, (&(
NAME
), 
NULL
), 0));

	)

111 
	#__libc_lock_š™_»cursive
(
NAME
) \

113 ià(
__±h»ad_mu‹x_š™
 !ğ
NULL
) \

115 
±h»ad_mu‹x©Œ_t
 
__©Œ
; \

116 
	`__±h»ad_mu‹x©Œ_š™
 (&
__©Œ
); \

117 
	`__±h»ad_mu‹x©Œ_£‰y³
 (&
__©Œ
, 
PTHREAD_MUTEX_RECURSIVE_NP
); \

118 
	`__±h»ad_mu‹x_š™
 (&(
NAME
).
mu‹x
, &
__©Œ
); \

119 
	`__±h»ad_mu‹x©Œ_de¡roy
 (&
__©Œ
); \

121 } 0);

	)

122 
	#__¹ld_lock_š™_»cursive
(
NAME
) \

123 
	`__libc_lock_š™_»cursive
 (
NAME
)

	)

128 
	#__libc_lock_fši
(
NAME
) \

129 (
	`__libc_maybe_ÿÎ2
 (
±h»ad_mu‹x_de¡roy
, (&(
NAME
)), 0));

	)

130 
	#__libc_rwlock_fši
(
NAME
) \

131 (
	`__libc_maybe_ÿÎ
 (
__±h»ad_rwlock_de¡roy
, (&(
NAME
)), 0));

	)

134 
	#__libc_lock_fši_»cursive
(
NAME
è
	`__libc_lock_fši
 ((NAME).
mu‹x
)

	)

135 
	#__¹ld_lock_fši_»cursive
(
NAME
è
	`__libc_lock_fši_»cursive
 (NAME)

	)

138 
	#__libc_lock_lock
(
NAME
) \

139 (
	`__libc_maybe_ÿÎ2
 (
±h»ad_mu‹x_lock
, (&(
NAME
)), 0));

	)

140 
	#__libc_rwlock_rdlock
(
NAME
) \

141 (
	`__libc_maybe_ÿÎ
 (
__±h»ad_rwlock_rdlock
, (&(
NAME
)), 0));

	)

142 
	#__libc_rwlock_w¾ock
(
NAME
) \

143 (
	`__libc_maybe_ÿÎ
 (
__±h»ad_rwlock_w¾ock
, (&(
NAME
)), 0));

	)

146 
	#__libc_lock_lock_»cursive
(
NAME
è
	`__libc_lock_lock
 ((NAME).
mu‹x
)

	)

149 
	#__libc_lock_Œylock
(
NAME
) \

150 (
	`__libc_maybe_ÿÎ2
 (
±h»ad_mu‹x_Œylock
, (&(
NAME
)), 0))

	)

151 
	#__libc_rwlock_Œyrdlock
(
NAME
) \

152 (
	`__libc_maybe_ÿÎ
 (
__±h»ad_rwlock_Œyrdlock
, (&(
NAME
)), 0))

	)

153 
	#__libc_rwlock_Œyw¾ock
(
NAME
) \

154 (
	`__libc_maybe_ÿÎ
 (
__±h»ad_rwlock_Œyw¾ock
, (&(
NAME
)), 0))

	)

157 
	#__libc_lock_Œylock_»cursive
(
NAME
è
	`__libc_lock_Œylock
 ((NAME).
mu‹x
)

	)

158 
	#__¹ld_lock_Œylock_»cursive
(
NAME
) \

159 
	`__libc_lock_Œylock_»cursive
 (
NAME
)

	)

162 
	#__libc_lock_uÆock
(
NAME
) \

163 (
	`__libc_maybe_ÿÎ2
 (
±h»ad_mu‹x_uÆock
, (&(
NAME
)), 0));

	)

164 
	#__libc_rwlock_uÆock
(
NAME
) \

165 (
	`__libc_maybe_ÿÎ
 (
__±h»ad_rwlock_uÆock
, (&(
NAME
)), 0));

	)

168 
	#__libc_lock_uÆock_»cursive
(
NAME
è
	`__libc_lock_uÆock
 ((NAME).
mu‹x
)

	)

170 
	#__¹ld_lock_lock_»cursive
(
NAME
è
	`__libc_lock_lock_»cursive
 (NAME)

	)

171 
	#__¹ld_lock_uÆock_»cursive
(
NAME
è
	`__libc_lock_uÆock_»cursive
 (NAME)

	)

174 #ià
PTHREAD_ONCE_INIT
 == 0

177 
	#__libc_Úû_defše
(
CLASS
, 
NAME
) \

178 
CLASS
 
±h»ad_Úû_t
 
NAME


	)

180 
	#__libc_Úû_defše
(
CLASS
, 
NAME
) \

181 
CLASS
 
±h»ad_Úû_t
 
NAME
 = 
PTHREAD_ONCE_INIT


	)

185 
	#__libc_Úû
(
ONCE_CONTROL
, 
INIT_FUNCTION
) \

187 ià(
__±h»ad_Úû
 !ğ
NULL
) \

188 
	`__±h»ad_Úû
 (&(
ONCE_CONTROL
), (
INIT_FUNCTION
)); \

189 ià((
ONCE_CONTROL
è=ğ
PTHREAD_ONCE_INIT
) { \

190 
	`INIT_FUNCTION
 (); \

191 (
ONCE_CONTROL
) = 2; \

193 } 0)

	)

197 
	#__libc_ş—nup_»giÚ_¡¬t
(
DOIT
, 
FCT
, 
ARG
) \

198 { 
_±h»ad_ş—nup_bufãr
 
_bufãr
; \

199 
_ava
 = (
DOIT
è&& 
_±h»ad_ş—nup_push_deãr
 !ğ
NULL
; \

200 ià(
_ava
) { \

201 
	`_±h»ad_ş—nup_push_deãr
 (&
_bufãr
, (
FCT
), (
ARG
)); \

202 }

	)

205 
	#__libc_ş—nup_»giÚ_’d
(
DOIT
) \

206 ià(
_ava
) { \

207 
	`_±h»ad_ş—nup_pİ_»¡Üe
 (&
_bufãr
, (
DOIT
)); \

209 }

	)

212 
	#__libc_ş—nup_’d
(
DOIT
) \

213 ià(
_ava
) { \

214 
	`_±h»ad_ş—nup_pİ_»¡Üe
 (&
_bufãr
, (
DOIT
)); \

215 }

	)

217 
	#__libc_ş—nup_push
(
fù
, 
¬g
) \

218 { 
_±h»ad_ş—nup_bufãr
 
_bufãr
; \

219 
	`__libc_maybe_ÿÎ
 (
_±h»ad_ş—nup_push
, (&
_bufãr
, (
fù
), (
¬g
)), 0)

	)

221 
	#__libc_ş—nup_pİ
(
execu‹
) \

222 
	`__libc_maybe_ÿÎ
 (
_±h»ad_ş—nup_pİ
, (&
_bufãr
, 
execu‹
), 0); \

223 }

	)

226 
	#__libc_key_ü—‹
(
KEY
, 
DESTRUCTOR
) \

227 (
	`__libc_maybe_ÿÎ
 (
__±h»ad_key_ü—‹
, (
KEY
, 
DESTRUCTOR
), 1))

	)

230 
	#__libc_g‘¥ecific
(
KEY
) \

231 (
	`__libc_maybe_ÿÎ
 (
__±h»ad_g‘¥ecific
, (
KEY
), 
NULL
))

	)

234 
	#__libc_£t¥ecific
(
KEY
, 
VALUE
) \

235 (
	`__libc_maybe_ÿÎ
 (
__±h»ad_£t¥ecific
, (
KEY
, 
VALUE
), 0))

	)

239 
	#__libc_©fÜk
(
PREPARE
, 
PARENT
, 
CHILD
) \

240 (
	`__libc_maybe_ÿÎ
 (
__±h»ad_©fÜk
, (
PREPARE
, 
PARENT
, 
CHILD
), 0))

	)

242 
__BEGIN_DECLS


244 
_±h»ad_ş—nup_push_deãr
 (
_±h»ad_ş—nup_bufãr
 *
__bufãr
,

245 (*
__routše
) (*),

246 *
__¬g
è
__THROW
;

248 
	$_±h»ad_ş—nup_pİ_»¡Üe
 (
_±h»ad_ş—nup_bufãr
 *
__bufãr
,

249 
__execu‹
è
__THROW
;

255 
	`__±h»ad_mu‹x_š™
 (
±h»ad_mu‹x_t
 *
__mu‹x
,

256 
__cÚ¡
 
±h»ad_mu‹x©Œ_t
 *
__mu‹x_©Œ
);

258 
	`__±h»ad_mu‹x_de¡roy
 (
±h»ad_mu‹x_t
 *
__mu‹x
);

260 
	`__±h»ad_mu‹x_Œylock
 (
±h»ad_mu‹x_t
 *
__mu‹x
);

262 
	`__±h»ad_mu‹x_lock
 (
±h»ad_mu‹x_t
 *
__mu‹x
);

264 
	`__±h»ad_mu‹x_uÆock
 (
±h»ad_mu‹x_t
 *
__mu‹x
);

266 
	`__±h»ad_mu‹x©Œ_š™
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
);

268 
	`__±h»ad_mu‹x©Œ_de¡roy
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
);

270 
	`__±h»ad_mu‹x©Œ_£‰y³
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

271 
__kšd
);

273 #ifdeà
__USE_UNIX98


274 
	`__±h»ad_rwlock_š™
 (
±h»ad_rwlock_t
 *
__rwlock
,

275 
__cÚ¡
 
±h»ad_rwlock©Œ_t
 *
__©Œ
);

277 
	`__±h»ad_rwlock_de¡roy
 (
±h»ad_rwlock_t
 *
__rwlock
);

279 
	`__±h»ad_rwlock_rdlock
 (
±h»ad_rwlock_t
 *
__rwlock
);

281 
	`__±h»ad_rwlock_Œyrdlock
 (
±h»ad_rwlock_t
 *
__rwlock
);

283 
	`__±h»ad_rwlock_w¾ock
 (
±h»ad_rwlock_t
 *
__rwlock
);

285 
	`__±h»ad_rwlock_Œyw¾ock
 (
±h»ad_rwlock_t
 *
__rwlock
);

287 
	`__±h»ad_rwlock_uÆock
 (
±h»ad_rwlock_t
 *
__rwlock
);

290 
	`__±h»ad_key_ü—‹
 (
±h»ad_key_t
 *
__key
,

291 (*
__de¡r_funùiÚ
) (*));

293 
	`__±h»ad_£t¥ecific
 (
±h»ad_key_t
 
__key
,

294 
__cÚ¡
 *
__poš‹r
);

296 *
	`__±h»ad_g‘¥ecific
 (
±h»ad_key_t
 
__key
);

298 
	`__±h»ad_Úû
 (
±h»ad_Úû_t
 *
__Úû_cÚŒŞ
,

299 (*
__š™_routše
) ());

301 
	`__±h»ad_©fÜk
 ((*
__´•¬e
) (),

302 (*
__·»Á
) (),

303 (*
__chd
) ());

305 
__END_DECLS


309 #iâdeà
__NO_WEAK_PTHREAD_ALIASES


310 #´agm¨
w—k
 
__±h»ad_mu‹x_š™


311 #´agm¨
w—k
 
__±h»ad_mu‹x_de¡roy


312 #´agm¨
w—k
 
__±h»ad_mu‹x_lock


313 #´agm¨
w—k
 
__±h»ad_mu‹x_Œylock


314 #´agm¨
w—k
 
__±h»ad_mu‹x_uÆock


315 #´agm¨
w—k
 
__±h»ad_mu‹x©Œ_š™


316 #´agm¨
w—k
 
__±h»ad_mu‹x©Œ_de¡roy


317 #´agm¨
w—k
 
__±h»ad_mu‹x©Œ_£‰y³


318 #´agm¨
w—k
 
__±h»ad_rwlock_de¡roy


319 #´agm¨
w—k
 
__±h»ad_rwlock_rdlock


320 #´agm¨
w—k
 
__±h»ad_rwlock_Œyrdlock


321 #´agm¨
w—k
 
__±h»ad_rwlock_w¾ock


322 #´agm¨
w—k
 
__±h»ad_rwlock_Œyw¾ock


323 #´agm¨
w—k
 
__±h»ad_rwlock_uÆock


324 #´agm¨
w—k
 
__±h»ad_key_ü—‹


325 #´agm¨
w—k
 
__±h»ad_£t¥ecific


326 #´agm¨
w—k
 
__±h»ad_g‘¥ecific


327 #´agm¨
w—k
 
__±h»ad_Úû


328 #´agm¨
w—k
 
__±h»ad_š™Ÿlize


329 #´agm¨
w—k
 
__±h»ad_©fÜk


330 #´agm¨
w—k
 
_±h»ad_ş—nup_push_deãr


331 #´agm¨
w—k
 
_±h»ad_ş—nup_pİ_»¡Üe


332 #´agm¨
w—k
 
_±h»ad_ş—nup_push


333 #´agm¨
w—k
 
_±h»ad_ş—nup_pİ


338 
	#__libc_mu‹x_uÆock
 
__±h»ad_mu‹x_uÆock


	)

	@/usr/include/bits/select.h

19 #iâdeà
_SYS_SELECT_H


23 
	~<b™s/wÜdsize.h
>

26 #ià
defšed
 
__GNUC__
 && __GNUC__ >= 2

28 #ià
__WORDSIZE
 == 64

29 
	#__FD_ZERO_STOS
 "¡osq"

	)

31 
	#__FD_ZERO_STOS
 "¡o¦"

	)

34 
	#__FD_ZERO
(
fd¥
) \

36 
__d0
, 
__d1
; \

37 
__asm__
 
	`__vŞ©e__
 ("şd;„•; " 
__FD_ZERO_STOS
 \

38 : "=c" (
__d0
), "=D" (
__d1
) \

39 : "a" (0), "0" ( (
fd_£t
) \

40 /  (
__fd_mask
)), \

41 "1" (&
	`__FDS_BITS
 (
fd¥
)[0]) \

43 } 0)

	)

49 
	#__FD_ZERO
(
£t
) \

51 
__i
; \

52 
fd_£t
 *
__¬r
 = (
£t
); \

53 
__i
 = 0; __˜<  (
fd_£t
è/  (
__fd_mask
); ++__i) \

54 
	`__FDS_BITS
 (
__¬r
)[
__i
] = 0; \

55 } 0)

	)

59 
	#__FD_SET
(
d
, 
£t
è(
	`__FDS_BITS
 (£t)[
	`__FDELT
 (d)] |ğ
	`__FDMASK
 (d))

	)

60 
	#__FD_CLR
(
d
, 
£t
è(
	`__FDS_BITS
 (£t)[
	`__FDELT
 (d)] &ğ~
	`__FDMASK
 (d))

	)

61 
	#__FD_ISSET
(
d
, 
£t
) \

62 ((
	`__FDS_BITS
 (
£t
)[
	`__FDELT
 (
d
)] & 
	`__FDMASK
 (d)è!ğ0)

	)

	@/usr/include/gconv.h

23 #iâdeà
_GCONV_H


24 
	#_GCONV_H
 1

	)

26 
	~<ã©u»s.h
>

27 
	#__Ãed_mb¡©e_t


	)

28 
	#__Ãed_wšt_t


	)

29 
	~<wch¬.h
>

30 
	#__Ãed_size_t


	)

31 
	#__Ãed_wch¬_t


	)

32 
	~<¡ddef.h
>

35 
	#__UNKNOWN_10646_CHAR
 ((
wch¬_t
è0xfffd)

	)

40 
	m__GCONV_OK
 = 0,

41 
	m__GCONV_NOCONV
,

42 
	m__GCONV_NODB
,

43 
	m__GCONV_NOMEM
,

45 
	m__GCONV_EMPTY_INPUT
,

46 
	m__GCONV_FULL_OUTPUT
,

47 
	m__GCONV_ILLEGAL_INPUT
,

48 
	m__GCONV_INCOMPLETE_INPUT
,

50 
	m__GCONV_ILLEGAL_DESCRIPTOR
,

51 
	m__GCONV_INTERNAL_ERROR


58 
	m__GCONV_IS_LAST
 = 0x0001,

59 
	m__GCONV_IGNORE_ERRORS
 = 0x0002

64 
	g__gcÚv_¡•
;

65 
	g__gcÚv_¡•_d©a
;

66 
	g__gcÚv_lßded_objeù
;

67 
	g__gcÚv_Œªs_d©a
;

71 (*
	t__gcÚv_fù
è(
	t__gcÚv_¡•
 *, 
	t__gcÚv_¡•_d©a
 *,

72 
	t__cÚ¡
 **, __const *,

73 **, 
	tsize_t
 *, , );

76 
	$wšt_t
 (*
	t__gcÚv_btowc_fù
è(
	t__gcÚv_¡•
 *, );

79 (*
	t__gcÚv_š™_fù
è(
	t__gcÚv_¡•
 *);

80 (*
	t__gcÚv_’d_fù
è(
	t__gcÚv_¡•
 *);

84 (*
	t__gcÚv_Œªs_fù
è(
	t__gcÚv_¡•
 *,

85 
	t__gcÚv_¡•_d©a
 *, *,

86 
	t__cÚ¡
 *,

87 
	t__cÚ¡
 **,

88 
	t__cÚ¡
 *, **,

89 
	tsize_t
 *);

92 (*
	t__gcÚv_Œªs_cÚ‹xt_fù
è(*, 
	t__cÚ¡
 *,

93 
	t__cÚ¡
 *,

97 (*
	t__gcÚv_Œªs_qu”y_fù
è(
	t__cÚ¡
 *, __const ***,

98 
	tsize_t
 *);

101 (*
	t__gcÚv_Œªs_š™_fù
) (**, const *);

102 (*
	t__gcÚv_Œªs_’d_fù
) (*);

104 
	s__gcÚv_Œªs_d©a


107 
__gcÚv_Œªs_fù
 
__Œªs_fù
;

108 
__gcÚv_Œªs_cÚ‹xt_fù
 
__Œªs_cÚ‹xt_fù
;

109 
__gcÚv_Œªs_’d_fù
 
__Œªs_’d_fù
;

110 *
__d©a
;

111 
__gcÚv_Œªs_d©a
 *
__Ãxt
;

116 
	s__gcÚv_¡•


118 
__gcÚv_lßded_objeù
 *
__shlib_hªdË
;

119 
__cÚ¡
 *
__modÇme
;

121 
__couÁ”
;

123 *
__äom_Çme
;

124 *
__to_Çme
;

126 
__gcÚv_fù
 
__fù
;

127 
__gcÚv_btowc_fù
 
__btowc_fù
;

128 
__gcÚv_š™_fù
 
__š™_fù
;

129 
__gcÚv_’d_fù
 
__’d_fù
;

133 
__mš_Ãeded_äom
;

134 
__max_Ãeded_äom
;

135 
__mš_Ãeded_to
;

136 
__max_Ãeded_to
;

139 
__¡©eful
;

141 *
__d©a
;

146 
	s__gcÚv_¡•_d©a


148 *
__outbuf
;

149 *
__outbuãnd
;

153 
__æags
;

157 
__švoÿtiÚ_couÁ”
;

161 
__š‹º®_u£
;

163 
__mb¡©e_t
 *
__¡©•
;

164 
__mb¡©e_t
 
__¡©e
;

168 
__gcÚv_Œªs_d©a
 *
__Œªs
;

173 
	s__gcÚv_šfo


175 
size_t
 
__n¡•s
;

176 
__gcÚv_¡•
 *
__¡•s
;

177 
__ex‹nsiÚ__
 
__gcÚv_¡•_d©a
 
__d©a
 
__æex¬r
;

178 } *
	t__gcÚv_t
;

	@/usr/include/gnu/stubs-64.h

6 #ifdeà
_LIBC


7 #”rÜ 
AµliÿtiÚs
 
may
 
nÙ
 
defše
 
the
 
maüo
 
_LIBC


10 
	#__¡ub_bdæush


	)

11 
	#__¡ub_chæags


	)

12 
	#__¡ub_ç‰ach


	)

13 
	#__¡ub_fchæags


	)

14 
	#__¡ub_fd‘ach


	)

15 
	#__¡ub_g‘msg


	)

16 
	#__¡ub_g‰y


	)

17 
	#__¡ub_lchmod


	)

18 
	#__¡ub_putmsg


	)

19 
	#__¡ub_»voke


	)

20 
	#__¡ub_£ogš


	)

21 
	#__¡ub_sig»tuº


	)

22 
	#__¡ub_s¡k


	)

23 
	#__¡ub_¡ty


	)

	@/usr/include/wchar.h

24 #iâdeà
_WCHAR_H


26 #ià!
defšed
 
__Ãed_mb¡©e_t
 && !defšed 
__Ãed_wšt_t


27 
	#_WCHAR_H
 1

	)

28 
	~<ã©u»s.h
>

31 #ifdeà
_WCHAR_H


33 
	#__Ãed___FILE


	)

34 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


35 
	#__Ãed_FILE


	)

37 
	~<¡dio.h
>

39 
	#__Ãed___va_li¡


	)

40 
	~<¡d¬g.h
>

42 
	~<b™s/wch¬.h
>

45 
	#__Ãed_size_t


	)

46 
	#__Ãed_wch¬_t


	)

47 
	#__Ãed_NULL


	)

49 #ià
defšed
 
_WCHAR_H
 || defšed 
__Ãed_wšt_t
 || !defšed 
__WINT_TYPE__


50 #undeà
__Ãed_wšt_t


51 
	#__Ãed_wšt_t


	)

52 
	~<¡ddef.h
>

56 #iâdeà
_WINT_T


61 
	#_WINT_T


	)

62 
	twšt_t
;

66 #ià
defšed
 
__ılu¥lus
 && defšed 
_GLIBCPP_USE_NAMESPACES
 \

67 && 
defšed
 
__WINT_TYPE__


68 
__BEGIN_NAMESPACE_STD


69 
__WINT_TYPE__
 
	twšt_t
;

70 
	g__END_NAMESPACE_STD


75 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (4, 4)

76 
	#__CORRECT_ISO_CPP_WCHAR_H_PROTO


	)

80 #ià(
defšed
 
_WCHAR_H
 || defšed 
__Ãed_mb¡©e_t
è&& !defšed 
__mb¡©e_t_defšed


81 
	#__mb¡©e_t_defšed
 1

	)

85 
	m__couÁ
;

88 #ifdeà
__WINT_TYPE__


89 
__WINT_TYPE__
 
	m__wch
;

91 
wšt_t
 
	m__wch
;

93 
	m__wchb
[4];

94 } 
	m__v®ue
;

95 } 
	t__mb¡©e_t
;

97 #undeà
__Ãed_mb¡©e_t


102 #ifdeà
_WCHAR_H


104 
__BEGIN_NAMESPACE_C99


106 
__mb¡©e_t
 
	tmb¡©e_t
;

107 
	g__END_NAMESPACE_C99


108 #ifdeà
__USE_GNU


109 
	$__USING_NAMESPACE_C99
(
mb¡©e_t
)

112 #iâdeà
WCHAR_MIN


114 
	#WCHAR_MIN
 
__WCHAR_MIN


	)

115 
	#WCHAR_MAX
 
__WCHAR_MAX


	)

118 #iâdeà
WEOF


119 
	#WEOF
 (0xffffffffu)

	)

124 #ià
defšed
 
__USE_XOPEN
 && !defšed 
__USE_UNIX98


125 
	~<wùy³.h
>

129 
__BEGIN_DECLS


131 
__BEGIN_NAMESPACE_STD


134 
tm
;

135 
__END_NAMESPACE_STD


139 
	$__USING_NAMESPACE_STD
(
tm
)

142 
__BEGIN_NAMESPACE_STD


144 
wch¬_t
 *
	$wcsıy
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

145 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
è
__THROW
;

147 
wch¬_t
 *
	$wc¢ıy
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

148 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

149 
__THROW
;

152 
wch¬_t
 *
	$wcsÿt
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

153 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
è
__THROW
;

155 
wch¬_t
 *
	$wc¢ÿt
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

156 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

157 
__THROW
;

160 
	$wcscmp
 (
__cÚ¡
 
wch¬_t
 *
__s1
, __cÚ¡ wch¬_ˆ*
__s2
)

161 
__THROW
 
__©Œibu‹_pu»__
;

163 
	$wc¢cmp
 (
__cÚ¡
 
wch¬_t
 *
__s1
, __cÚ¡ wch¬_ˆ*
__s2
, 
size_t
 
__n
)

164 
__THROW
 
__©Œibu‹_pu»__
;

165 
__END_NAMESPACE_STD


167 #ifdeà
__USE_XOPEN2K8


169 
	$wcsÿ£cmp
 (
__cÚ¡
 
wch¬_t
 *
__s1
, __cÚ¡ wch¬_ˆ*
__s2
è
__THROW
;

172 
	$wc¢ÿ£cmp
 (
__cÚ¡
 
wch¬_t
 *
__s1
, __cÚ¡ wch¬_ˆ*
__s2
,

173 
size_t
 
__n
è
__THROW
;

177 
	~<xloÿË.h
>

179 
	$wcsÿ£cmp_l
 (
__cÚ¡
 
wch¬_t
 *
__s1
, __cÚ¡ wch¬_ˆ*
__s2
,

180 
__loÿË_t
 
__loc
è
__THROW
;

182 
	$wc¢ÿ£cmp_l
 (
__cÚ¡
 
wch¬_t
 *
__s1
, __cÚ¡ wch¬_ˆ*
__s2
,

183 
size_t
 
__n
, 
__loÿË_t
 
__loc
è
__THROW
;

186 
__BEGIN_NAMESPACE_STD


189 
	$wcscŞl
 (
__cÚ¡
 
wch¬_t
 *
__s1
, __cÚ¡ wch¬_ˆ*
__s2
è
__THROW
;

193 
size_t
 
	$wcsxäm
 (
wch¬_t
 *
__»¡riù
 
__s1
,

194 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
è
__THROW
;

195 
__END_NAMESPACE_STD


197 #ifdeà
__USE_XOPEN2K8


203 
	$wcscŞl_l
 (
__cÚ¡
 
wch¬_t
 *
__s1
, __cÚ¡ wch¬_ˆ*
__s2
,

204 
__loÿË_t
 
__loc
è
__THROW
;

209 
size_t
 
	$wcsxäm_l
 (
wch¬_t
 *
__s1
, 
__cÚ¡
 wch¬_ˆ*
__s2
,

210 
size_t
 
__n
, 
__loÿË_t
 
__loc
è
__THROW
;

213 
wch¬_t
 *
	$wcsdup
 (
__cÚ¡
 
wch¬_t
 *
__s
è
__THROW
 
__©Œibu‹_m®loc__
;

216 
__BEGIN_NAMESPACE_STD


218 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


219 "C++" 
wch¬_t
 *
	$wcschr
 (
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

220 
__THROW
 
	`__asm
 ("wcschr"è
__©Œibu‹_pu»__
;

221 "C++" 
__cÚ¡
 
wch¬_t
 *
	$wcschr
 (
__cÚ¡
 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

222 
__THROW
 
	`__asm
 ("wcschr"è
__©Œibu‹_pu»__
;

224 
wch¬_t
 *
	$wcschr
 (
__cÚ¡
 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

225 
__THROW
 
__©Œibu‹_pu»__
;

228 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


229 "C++" 
wch¬_t
 *
	$wc¤chr
 (
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

230 
__THROW
 
	`__asm
 ("wc¤chr"è
__©Œibu‹_pu»__
;

231 "C++" 
__cÚ¡
 
wch¬_t
 *
	$wc¤chr
 (
__cÚ¡
 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

232 
__THROW
 
	`__asm
 ("wc¤chr"è
__©Œibu‹_pu»__
;

234 
wch¬_t
 *
	$wc¤chr
 (
__cÚ¡
 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

235 
__THROW
 
__©Œibu‹_pu»__
;

237 
__END_NAMESPACE_STD


239 #ifdeà
__USE_GNU


242 
wch¬_t
 *
	$wcschºul
 (
__cÚ¡
 
wch¬_t
 *
__s
, wch¬_ˆ
__wc
)

243 
__THROW
 
__©Œibu‹_pu»__
;

246 
__BEGIN_NAMESPACE_STD


249 
size_t
 
	$wcsc¥n
 (
__cÚ¡
 
wch¬_t
 *
__wcs
, __cÚ¡ wch¬_ˆ*
__»jeù
)

250 
__THROW
 
__©Œibu‹_pu»__
;

253 
size_t
 
	$wcs¥n
 (
__cÚ¡
 
wch¬_t
 *
__wcs
, __cÚ¡ wch¬_ˆ*
__acû±
)

254 
__THROW
 
__©Œibu‹_pu»__
;

256 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


257 "C++" 
wch¬_t
 *
	$wc¥brk
 (
wch¬_t
 *
__wcs
, 
__cÚ¡
 wch¬_ˆ*
__acû±
)

258 
__THROW
 
	`__asm
 ("wc¥brk"è
__©Œibu‹_pu»__
;

259 "C++" 
__cÚ¡
 
wch¬_t
 *
	$wc¥brk
 (
__cÚ¡
 
wch¬_t
 *
__wcs
,

260 
__cÚ¡
 
wch¬_t
 *
__acû±
)

261 
__THROW
 
	`__asm
 ("wc¥brk"è
__©Œibu‹_pu»__
;

263 
wch¬_t
 *
	$wc¥brk
 (
__cÚ¡
 
wch¬_t
 *
__wcs
, __cÚ¡ wch¬_ˆ*
__acû±
)

264 
__THROW
 
__©Œibu‹_pu»__
;

267 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


268 "C++" 
wch¬_t
 *
	$wcs¡r
 (
wch¬_t
 *
__hay¡ack
, 
__cÚ¡
 wch¬_ˆ*
__ÃedË
)

269 
__THROW
 
	`__asm
 ("wcs¡r"è
__©Œibu‹_pu»__
;

270 "C++" 
__cÚ¡
 
wch¬_t
 *
	$wcs¡r
 (
__cÚ¡
 
wch¬_t
 *
__hay¡ack
,

271 
__cÚ¡
 
wch¬_t
 *
__ÃedË
)

272 
__THROW
 
	`__asm
 ("wcs¡r"è
__©Œibu‹_pu»__
;

274 
wch¬_t
 *
	$wcs¡r
 (
__cÚ¡
 
wch¬_t
 *
__hay¡ack
, __cÚ¡ wch¬_ˆ*
__ÃedË
)

275 
__THROW
 
__©Œibu‹_pu»__
;

279 
wch¬_t
 *
	$wc¡ok
 (
wch¬_t
 *
__»¡riù
 
__s
,

280 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__d–im
,

281 
wch¬_t
 **
__»¡riù
 
__±r
è
__THROW
;

284 
size_t
 
	$wc¦’
 (
__cÚ¡
 
wch¬_t
 *
__s
è
__THROW
 
__©Œibu‹_pu»__
;

285 
__END_NAMESPACE_STD


287 #ifdeà
__USE_XOPEN


289 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


290 "C++" 
wch¬_t
 *
	$wcswcs
 (
wch¬_t
 *
__hay¡ack
, 
__cÚ¡
 wch¬_ˆ*
__ÃedË
)

291 
__THROW
 
	`__asm
 ("wcswcs"è
__©Œibu‹_pu»__
;

292 "C++" 
__cÚ¡
 
wch¬_t
 *
	$wcswcs
 (
__cÚ¡
 
wch¬_t
 *
__hay¡ack
,

293 
__cÚ¡
 
wch¬_t
 *
__ÃedË
)

294 
__THROW
 
	`__asm
 ("wcswcs"è
__©Œibu‹_pu»__
;

296 
wch¬_t
 *
	$wcswcs
 (
__cÚ¡
 
wch¬_t
 *
__hay¡ack
, __cÚ¡ wch¬_ˆ*
__ÃedË
)

297 
__THROW
 
__©Œibu‹_pu»__
;

301 #ifdeà
__USE_XOPEN2K8


303 
size_t
 
	$wc¢Ën
 (
__cÚ¡
 
wch¬_t
 *
__s
, 
size_t
 
__maxËn
)

304 
__THROW
 
__©Œibu‹_pu»__
;

308 
__BEGIN_NAMESPACE_STD


310 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


311 "C++" 
wch¬_t
 *
	$wmemchr
 (
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
)

312 
__THROW
 
	`__asm
 ("wmemchr"è
__©Œibu‹_pu»__
;

313 "C++" 
__cÚ¡
 
wch¬_t
 *
	$wmemchr
 (
__cÚ¡
 
wch¬_t
 *
__s
, wch¬_ˆ
__c
,

314 
size_t
 
__n
)

315 
__THROW
 
	`__asm
 ("wmemchr"è
__©Œibu‹_pu»__
;

317 
wch¬_t
 *
	$wmemchr
 (
__cÚ¡
 
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
)

318 
__THROW
 
__©Œibu‹_pu»__
;

322 
	$wmemcmp
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s1
,

323 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
)

324 
__THROW
 
__©Œibu‹_pu»__
;

327 
wch¬_t
 *
	$wmemıy
 (
wch¬_t
 *
__»¡riù
 
__s1
,

328 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
è
__THROW
;

332 
wch¬_t
 *
	$wmemmove
 (
wch¬_t
 *
__s1
, 
__cÚ¡
 wch¬_ˆ*
__s2
, 
size_t
 
__n
)

333 
__THROW
;

336 
wch¬_t
 *
	$wmem£t
 (
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
è
__THROW
;

337 
__END_NAMESPACE_STD


339 #ifdeà
__USE_GNU


342 
wch¬_t
 *
	$wmempıy
 (
wch¬_t
 *
__»¡riù
 
__s1
,

343 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
)

344 
__THROW
;

348 
__BEGIN_NAMESPACE_STD


351 
wšt_t
 
	$btowc
 (
__c
è
__THROW
;

355 
	$wùob
 (
wšt_t
 
__c
è
__THROW
;

359 
	$mbsš™
 (
__cÚ¡
 
mb¡©e_t
 *
__ps
è
__THROW
 
__©Œibu‹_pu»__
;

363 
size_t
 
	$mb¹owc
 (
wch¬_t
 *
__»¡riù
 
__pwc
,

364 
__cÚ¡
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

365 
mb¡©e_t
 *
__p
è
__THROW
;

368 
size_t
 
	$wütomb
 (*
__»¡riù
 
__s
, 
wch¬_t
 
__wc
,

369 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

372 
size_t
 
	$__mb¾’
 (
__cÚ¡
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

373 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

374 
size_t
 
	$mb¾’
 (
__cÚ¡
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

375 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

376 
__END_NAMESPACE_STD


378 #ifdeà
__USE_EXTERN_INLINES


384 
wšt_t
 
	$__btowc_®Ÿs
 (
__c
è
	`__asm
 ("btowc");

385 
__ex‹º_šlše
 
wšt_t


386 
	`__NTH
 (
	$btowc
 (
__c
))

387 {  (
	`__butš_cÚ¡ªt_p
 (
__c
) && __c >= '\0' && __c <= '\x7f'

388 ? (
wšt_t
è
__c
 : 
	`__btowc_®Ÿs
 (__c)); 
	}
}

390 
	$__wùob_®Ÿs
 (
wšt_t
 
__c
è
	`__asm
 ("wctob");

391 
__ex‹º_šlše
 

392 
	`__NTH
 (
	$wùob
 (
wšt_t
 
__wc
))

393 {  (
	`__butš_cÚ¡ªt_p
 (
__wc
è&& __wø>ğ
L
'\0' && __wc <= L'\x7f'

394 ? (è
__wc
 : 
	`__wùob_®Ÿs
 (__wc)); 
	}
}

396 
__ex‹º_šlše
 
size_t


397 
__NTH
 (
	$mb¾’
 (
__cÚ¡
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

398 
mb¡©e_t
 *
__»¡riù
 
__ps
))

399 {  (
__ps
 !ğ
NULL


400 ? 
	`mb¹owc
 (
NULL
, 
__s
, 
__n
, 
__ps
è: 
	`__mb¾’
 (__s, __n, NULL)); 
	}
}

403 
__BEGIN_NAMESPACE_STD


406 
size_t
 
	$mb¤towcs
 (
wch¬_t
 *
__»¡riù
 
__d¡
,

407 
__cÚ¡
 **
__»¡riù
 
__¤c
, 
size_t
 
__Ën
,

408 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

412 
size_t
 
	$wc¤tombs
 (*
__»¡riù
 
__d¡
,

413 
__cÚ¡
 
wch¬_t
 **
__»¡riù
 
__¤c
, 
size_t
 
__Ën
,

414 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

415 
__END_NAMESPACE_STD


418 #ifdef 
__USE_XOPEN2K8


421 
size_t
 
	$mb¢¹owcs
 (
wch¬_t
 *
__»¡riù
 
__d¡
,

422 
__cÚ¡
 **
__»¡riù
 
__¤c
, 
size_t
 
__nmc
,

423 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

427 
size_t
 
	$wc¢¹ombs
 (*
__»¡riù
 
__d¡
,

428 
__cÚ¡
 
wch¬_t
 **
__»¡riù
 
__¤c
,

429 
size_t
 
__nwc
, size_ˆ
__Ën
,

430 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

435 #ifdeà
__USE_XOPEN


437 
	$wcwidth
 (
wch¬_t
 
__c
è
__THROW
;

441 
	$wcswidth
 (
__cÚ¡
 
wch¬_t
 *
__s
, 
size_t
 
__n
è
__THROW
;

445 
__BEGIN_NAMESPACE_STD


448 
	$wc¡od
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

449 
wch¬_t
 **
__»¡riù
 
__’d±r
è
__THROW
;

450 
__END_NAMESPACE_STD


452 #ifdeà
__USE_ISOC99


453 
__BEGIN_NAMESPACE_C99


455 
	$wc¡of
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

456 
wch¬_t
 **
__»¡riù
 
__’d±r
è
__THROW
;

457 
	$wc¡Şd
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

458 
wch¬_t
 **
__»¡riù
 
__’d±r
è
__THROW
;

459 
__END_NAMESPACE_C99


463 
__BEGIN_NAMESPACE_STD


466 
	$wc¡Ş
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

467 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
è
__THROW
;

471 
	$wc¡oul
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

472 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
)

473 
__THROW
;

474 
__END_NAMESPACE_STD


476 #ià
defšed
 
__USE_ISOC99
 || (defšed 
__GNUC__
 && defšed 
__USE_GNU
)

477 
__BEGIN_NAMESPACE_C99


480 
__ex‹nsiÚ__


481 
	$wc¡Şl
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

482 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
)

483 
__THROW
;

487 
__ex‹nsiÚ__


488 
	$wc¡ouÎ
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

489 
wch¬_t
 **
__»¡riù
 
__’d±r
,

490 
__ba£
è
__THROW
;

491 
__END_NAMESPACE_C99


494 #ià
defšed
 
__GNUC__
 && defšed 
__USE_GNU


497 
__ex‹nsiÚ__


498 
	$wc¡oq
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

499 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
)

500 
__THROW
;

504 
__ex‹nsiÚ__


505 
	$wc¡ouq
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

506 
wch¬_t
 **
__»¡riù
 
__’d±r
,

507 
__ba£
è
__THROW
;

510 #ifdeà
__USE_GNU


524 
	~<xloÿË.h
>

528 
	$wc¡Ş_l
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

529 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
,

530 
__loÿË_t
 
__loc
è
__THROW
;

532 
	$wc¡oul_l
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

533 
wch¬_t
 **
__»¡riù
 
__’d±r
,

534 
__ba£
, 
__loÿË_t
 
__loc
è
__THROW
;

536 
__ex‹nsiÚ__


537 
	$wc¡Şl_l
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

538 
wch¬_t
 **
__»¡riù
 
__’d±r
,

539 
__ba£
, 
__loÿË_t
 
__loc
è
__THROW
;

541 
__ex‹nsiÚ__


542 
	$wc¡ouÎ_l
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

543 
wch¬_t
 **
__»¡riù
 
__’d±r
,

544 
__ba£
, 
__loÿË_t
 
__loc
)

545 
__THROW
;

547 
	$wc¡od_l
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

548 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

549 
__THROW
;

551 
	$wc¡of_l
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

552 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

553 
__THROW
;

555 
	$wc¡Şd_l
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

556 
wch¬_t
 **
__»¡riù
 
__’d±r
,

557 
__loÿË_t
 
__loc
è
__THROW
;

562 
wch¬_t
 *
	$wııy
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

563 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
è
__THROW
;

567 
wch¬_t
 *
	$wınıy
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

568 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

569 
__THROW
;

575 #ifdef 
__USE_XOPEN2K8


578 
__FILE
 *
	$İ’_wmem¡»am
 (
wch¬_t
 **
__buæoc
, 
size_t
 *
__siz–oc
è
__THROW
;

581 #ià
defšed
 
__USE_ISOC95
 || defšed 
__USE_UNIX98


582 
__BEGIN_NAMESPACE_STD


585 
	$fwide
 (
__FILE
 *
__å
, 
__mode
è
__THROW
;

592 
	`fw´štf
 (
__FILE
 *
__»¡riù
 
__¡»am
,

593 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

599 
	`w´štf
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

602 
	$sw´štf
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

603 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

604 
__THROW
 ;

610 
	`vfw´štf
 (
__FILE
 *
__»¡riù
 
__s
,

611 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

612 
__gnuc_va_li¡
 
__¬g
)

618 
	`vw´štf
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

619 
__gnuc_va_li¡
 
__¬g
)

623 
	$vsw´štf
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

624 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

625 
__gnuc_va_li¡
 
__¬g
)

626 
__THROW
 ;

633 
	`fwsÿnf
 (
__FILE
 *
__»¡riù
 
__¡»am
,

634 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

640 
	`wsÿnf
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

643 
	$swsÿnf
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s
,

644 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

645 
__THROW
 ;

647 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__USE_GNU
 \

648 && (!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT
) \

649 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

650 #ifdeà
__REDIRECT


654 
	`__REDIRECT
 (
fwsÿnf
, (
__FILE
 *
__»¡riù
 
__¡»am
,

655 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...),

656 
__isoc99_fwsÿnf
)

658 
	`__REDIRECT
 (
wsÿnf
, (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...),

659 
__isoc99_wsÿnf
)

661 
	`__REDIRECT
 (
swsÿnf
, (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s
,

662 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...),

663 
__isoc99_swsÿnf
)

664 
__THROW
 ;

666 
	`__isoc99_fwsÿnf
 (
__FILE
 *
__»¡riù
 
__¡»am
,

667 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...);

668 
	`__isoc99_wsÿnf
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...);

669 
	$__isoc99_swsÿnf
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s
,

670 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

671 
__THROW
;

672 
	#fwsÿnf
 
__isoc99_fwsÿnf


	)

673 
	#wsÿnf
 
__isoc99_wsÿnf


	)

674 
	#swsÿnf
 
__isoc99_swsÿnf


	)

678 
__END_NAMESPACE_STD


681 #ifdeà
__USE_ISOC99


682 
__BEGIN_NAMESPACE_C99


687 
	`vfwsÿnf
 (
__FILE
 *
__»¡riù
 
__s
,

688 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

689 
__gnuc_va_li¡
 
__¬g
)

695 
	`vwsÿnf
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

696 
__gnuc_va_li¡
 
__¬g
)

699 
	$vswsÿnf
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s
,

700 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

701 
__gnuc_va_li¡
 
__¬g
)

702 
__THROW
 ;

704 #ià!
defšed
 
__USE_GNU
 \

705 && (!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT
) \

706 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

707 #ifdeà
__REDIRECT


708 
	`__REDIRECT
 (
vfwsÿnf
, (
__FILE
 *
__»¡riù
 
__s
,

709 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

710 
__gnuc_va_li¡
 
__¬g
), 
__isoc99_vfwsÿnf
)

712 
	`__REDIRECT
 (
vwsÿnf
, (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

713 
__gnuc_va_li¡
 
__¬g
), 
__isoc99_vwsÿnf
)

715 
	`__REDIRECT
 (
vswsÿnf
, (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s
,

716 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

717 
__gnuc_va_li¡
 
__¬g
), 
__isoc99_vswsÿnf
)

718 
__THROW
 ;

720 
	`__isoc99_vfwsÿnf
 (
__FILE
 *
__»¡riù
 
__s
,

721 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

722 
__gnuc_va_li¡
 
__¬g
);

723 
	`__isoc99_vwsÿnf
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

724 
__gnuc_va_li¡
 
__¬g
);

725 
	$__isoc99_vswsÿnf
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s
,

726 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

727 
__gnuc_va_li¡
 
__¬g
è
__THROW
;

728 
	#vfwsÿnf
 
__isoc99_vfwsÿnf


	)

729 
	#vwsÿnf
 
__isoc99_vwsÿnf


	)

730 
	#vswsÿnf
 
__isoc99_vswsÿnf


	)

734 
__END_NAMESPACE_C99


738 
__BEGIN_NAMESPACE_STD


743 
wšt_t
 
	`fg‘wc
 (
__FILE
 *
__¡»am
);

744 
wšt_t
 
	`g‘wc
 (
__FILE
 *
__¡»am
);

750 
wšt_t
 
	`g‘wch¬
 ();

757 
wšt_t
 
	`åutwc
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

758 
wšt_t
 
	`putwc
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

764 
wšt_t
 
	`putwch¬
 (
wch¬_t
 
__wc
);

772 
wch¬_t
 *
	`fg‘ws
 (wch¬_ˆ*
__»¡riù
 
__ws
, 
__n
,

773 
__FILE
 *
__»¡riù
 
__¡»am
);

779 
	`åutws
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ws
,

780 
__FILE
 *
__»¡riù
 
__¡»am
);

787 
wšt_t
 
	`ung‘wc
 (wšt_ˆ
__wc
, 
__FILE
 *
__¡»am
);

788 
__END_NAMESPACE_STD


791 #ifdeà
__USE_GNU


799 
wšt_t
 
	`g‘wc_uÆocked
 (
__FILE
 *
__¡»am
);

800 
wšt_t
 
	`g‘wch¬_uÆocked
 ();

808 
wšt_t
 
	`fg‘wc_uÆocked
 (
__FILE
 *
__¡»am
);

816 
wšt_t
 
	`åutwc_uÆocked
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

825 
wšt_t
 
	`putwc_uÆocked
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

826 
wšt_t
 
	`putwch¬_uÆocked
 (
wch¬_t
 
__wc
);

835 
wch¬_t
 *
	`fg‘ws_uÆocked
 (wch¬_ˆ*
__»¡riù
 
__ws
, 
__n
,

836 
__FILE
 *
__»¡riù
 
__¡»am
);

844 
	`åutws_uÆocked
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ws
,

845 
__FILE
 *
__»¡riù
 
__¡»am
);

849 
__BEGIN_NAMESPACE_C99


853 
size_t
 
	$wcsáime
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

854 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

855 
__cÚ¡
 
tm
 *
__»¡riù
 
__
è
__THROW
;

856 
__END_NAMESPACE_C99


858 #ifdeà
__USE_GNU


859 
	~<xloÿË.h
>

863 
size_t
 
	$wcsáime_l
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

864 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

865 
__cÚ¡
 
tm
 *
__»¡riù
 
__
,

866 
__loÿË_t
 
__loc
è
__THROW
;

875 #ià
defšed
 
__USE_UNIX98
 && !defšed 
__USE_GNU


876 
	#__Ãed_iswxxx


	)

877 
	~<wùy³.h
>

881 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__ex‹º_®ways_šlše


882 
	~<b™s/wch¬2.h
>

885 #ifdeà
__LDBL_COMPAT


886 
	~<b™s/wch¬-ldbl.h
>

889 
__END_DECLS


897 #undeà
__Ãed_mb¡©e_t


898 #undeà
__Ãed_wšt_t


	@/usr/include/bits/wchar-ldbl.h

20 #iâdeà
_WCHAR_H


24 #ià
defšed
 
__USE_ISOC95
 || defšed 
__USE_UNIX98


25 
__BEGIN_NAMESPACE_C99


26 
__LDBL_REDIR_DECL
 (
fw´štf
);

27 
__LDBL_REDIR_DECL
 (
w´štf
);

28 
__LDBL_REDIR_DECL
 (
sw´štf
);

29 
__LDBL_REDIR_DECL
 (
vfw´štf
);

30 
__LDBL_REDIR_DECL
 (
vw´štf
);

31 
__LDBL_REDIR_DECL
 (
vsw´štf
);

32 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__USE_GNU
 \

33 && !
defšed
 
	g__REDIRECT
 \

34 && (
defšed
 
	g__STRICT_ANSI__
 || defšed 
	g__USE_XOPEN2K
)

35 
	$__LDBL_REDIR1_DECL
 (
fwsÿnf
, 
__Ædbl___isoc99_fwsÿnf
)

36 
	$__LDBL_REDIR1_DECL
 (
wsÿnf
, 
__Ædbl___isoc99_wsÿnf
)

37 
	$__LDBL_REDIR1_DECL
 (
swsÿnf
, 
__Ædbl___isoc99_swsÿnf
)

39 
	`__LDBL_REDIR_DECL
 (
fwsÿnf
);

40 
	`__LDBL_REDIR_DECL
 (
wsÿnf
);

41 
	`__LDBL_REDIR_DECL
 (
swsÿnf
);

43 
__END_NAMESPACE_C99


46 #ifdeà
__USE_ISOC99


47 
__BEGIN_NAMESPACE_C99


48 
	`__LDBL_REDIR1_DECL
 (
wc¡Şd
, 
wc¡od
);

49 #ià!
defšed
 
__USE_GNU
 && !defšed 
__REDIRECT
 \

50 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

51 
	$__LDBL_REDIR1_DECL
 (
vfwsÿnf
, 
__Ædbl___isoc99_vfwsÿnf
)

52 
	$__LDBL_REDIR1_DECL
 (
vwsÿnf
, 
__Ædbl___isoc99_vwsÿnf
)

53 
	$__LDBL_REDIR1_DECL
 (
vswsÿnf
, 
__Ædbl___isoc99_vswsÿnf
)

55 
	`__LDBL_REDIR_DECL
 (
vfwsÿnf
);

56 
	`__LDBL_REDIR_DECL
 (
vwsÿnf
);

57 
	`__LDBL_REDIR_DECL
 (
vswsÿnf
);

59 
__END_NAMESPACE_C99


62 #ifdeà
__USE_GNU


63 
	`__LDBL_REDIR1_DECL
 (
wc¡Şd_l
, 
wc¡od_l
);

66 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__ex‹º_®ways_šlše


67 
	$__LDBL_REDIR_DECL
 (
__sw´štf_chk
)

68 
	$__LDBL_REDIR_DECL
 (
__vsw´štf_chk
)

69 #ià
__USE_FORTIFY_LEVEL
 > 1

70 
	$__LDBL_REDIR_DECL
 (
__fw´štf_chk
)

71 
	$__LDBL_REDIR_DECL
 (
__w´štf_chk
)

72 
	$__LDBL_REDIR_DECL
 (
__vfw´štf_chk
)

73 
	$__LDBL_REDIR_DECL
 (
__vw´štf_chk
)

	@/usr/include/bits/wchar2.h

20 #iâdeà
_WCHAR_H


25 
wch¬_t
 *
	$__wmemıy_chk
 (
wch¬_t
 *
__»¡riù
 
__s1
,

26 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
,

27 
size_t
 
__ns1
è
__THROW
;

28 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wmemıy_®Ÿs
,

29 (
wch¬_t
 *
__»¡riù
 
__s1
,

30 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
),

31 
wmemıy
);

32 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wmemıy_chk_w¬n
,

33 (
wch¬_t
 *
__»¡riù
 
__s1
,

34 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
,

35 
size_t
 
__ns1
), 
__wmemıy_chk
)

36 
	`__w¬Ç‰r
 ("wmemcpy called with†ength biggerhan size of destination "

39 
__ex‹º_®ways_šlše
 
wch¬_t
 *

40 
	`__NTH
 (
	$wmemıy
 (
wch¬_t
 *
__»¡riù
 
__s1
, 
__cÚ¡
 wch¬_ˆ*__»¡riù 
__s2
,

41 
size_t
 
__n
))

43 ià(
	`__bos0
 (
__s1
è!ğ(
size_t
) -1)

45 ià(!
	`__butš_cÚ¡ªt_p
 (
__n
))

46  
	`__wmemıy_chk
 (
__s1
, 
__s2
, 
__n
,

47 
	`__bos0
 (
__s1
è/  (
wch¬_t
));

49 ià(
__n
 > 
	`__bos0
 (
__s1
è/  (
wch¬_t
))

50  
	`__wmemıy_chk_w¬n
 (
__s1
, 
__s2
, 
__n
,

51 
	`__bos0
 (
__s1
è/  (
wch¬_t
));

53  
	`__wmemıy_®Ÿs
 (
__s1
, 
__s2
, 
__n
);

54 
	}
}

57 
wch¬_t
 *
	$__wmemmove_chk
 (
wch¬_t
 *
__s1
, 
__cÚ¡
 wch¬_ˆ*
__s2
,

58 
size_t
 
__n
, size_ˆ
__ns1
è
__THROW
;

59 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wmemmove_®Ÿs
, (wch¬_ˆ*
__s1
,

60 
__cÚ¡
 
wch¬_t
 *
__s2
,

61 
size_t
 
__n
), 
wmemmove
);

62 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wmemmove_chk_w¬n
,

63 (
wch¬_t
 *
__s1
, 
__cÚ¡
 wch¬_ˆ*
__s2
,

64 
size_t
 
__n
, size_ˆ
__ns1
), 
__wmemmove_chk
)

65 
	`__w¬Ç‰r
 ("wmemmove called with†ength biggerhan size of destination "

68 
__ex‹º_®ways_šlše
 
wch¬_t
 *

69 
	`__NTH
 (
	$wmemmove
 (
wch¬_t
 *
__s1
, 
__cÚ¡
 wch¬_ˆ*
__s2
, 
size_t
 
__n
))

71 ià(
	`__bos0
 (
__s1
è!ğ(
size_t
) -1)

73 ià(!
	`__butš_cÚ¡ªt_p
 (
__n
))

74  
	`__wmemmove_chk
 (
__s1
, 
__s2
, 
__n
,

75 
	`__bos0
 (
__s1
è/  (
wch¬_t
));

77 ià(
__n
 > 
	`__bos0
 (
__s1
è/  (
wch¬_t
))

78  
	`__wmemmove_chk_w¬n
 (
__s1
, 
__s2
, 
__n
,

79 
	`__bos0
 (
__s1
è/  (
wch¬_t
));

81  
	`__wmemmove_®Ÿs
 (
__s1
, 
__s2
, 
__n
);

82 
	}
}

85 #ifdeà
__USE_GNU


86 
wch¬_t
 *
	$__wmempıy_chk
 (
wch¬_t
 *
__»¡riù
 
__s1
,

87 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
,

88 
size_t
 
__ns1
è
__THROW
;

89 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wmempıy_®Ÿs
,

90 (
wch¬_t
 *
__»¡riù
 
__s1
,

91 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s2
,

92 
size_t
 
__n
), 
wmempıy
);

93 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wmempıy_chk_w¬n
,

94 (
wch¬_t
 *
__»¡riù
 
__s1
,

95 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
,

96 
size_t
 
__ns1
), 
__wmempıy_chk
)

97 
	`__w¬Ç‰r
 ("wmempcpy called with†ength biggerhan size of destination "

100 
__ex‹º_®ways_šlše
 
wch¬_t
 *

101 
	`__NTH
 (
	$wmempıy
 (
wch¬_t
 *
__»¡riù
 
__s1
, 
__cÚ¡
 wch¬_ˆ*__»¡riù 
__s2
,

102 
size_t
 
__n
))

104 ià(
	`__bos0
 (
__s1
è!ğ(
size_t
) -1)

106 ià(!
	`__butš_cÚ¡ªt_p
 (
__n
))

107  
	`__wmempıy_chk
 (
__s1
, 
__s2
, 
__n
,

108 
	`__bos0
 (
__s1
è/  (
wch¬_t
));

110 ià(
__n
 > 
	`__bos0
 (
__s1
è/  (
wch¬_t
))

111  
	`__wmempıy_chk_w¬n
 (
__s1
, 
__s2
, 
__n
,

112 
	`__bos0
 (
__s1
è/  (
wch¬_t
));

114  
	`__wmempıy_®Ÿs
 (
__s1
, 
__s2
, 
__n
);

115 
	}
}

119 
wch¬_t
 *
	$__wmem£t_chk
 (
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
,

120 
size_t
 
__ns
è
__THROW
;

121 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wmem£t_®Ÿs
, (wch¬_ˆ*
__s
, wch¬_ˆ
__c
,

122 
size_t
 
__n
), 
wmem£t
);

123 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wmem£t_chk_w¬n
,

124 (
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
,

125 
size_t
 
__ns
), 
__wmem£t_chk
)

126 
	`__w¬Ç‰r
 ("wmemset called with†ength biggerhan size of destination "

129 
__ex‹º_®ways_šlše
 
wch¬_t
 *

130 
	`__NTH
 (
	$wmem£t
 (
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
))

132 ià(
	`__bos0
 (
__s
è!ğ(
size_t
) -1)

134 ià(!
	`__butš_cÚ¡ªt_p
 (
__n
))

135  
	`__wmem£t_chk
 (
__s
, 
__c
, 
__n
, 
	`__bos0
 (__sè/  (
wch¬_t
));

137 ià(
__n
 > 
	`__bos0
 (
__s
è/  (
wch¬_t
))

138  
	`__wmem£t_chk_w¬n
 (
__s
, 
__c
, 
__n
,

139 
	`__bos0
 (
__s
è/  (
wch¬_t
));

141  
	`__wmem£t_®Ÿs
 (
__s
, 
__c
, 
__n
);

142 
	}
}

145 
wch¬_t
 *
	$__wcsıy_chk
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

146 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
,

147 
size_t
 
__n
è
__THROW
;

148 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wcsıy_®Ÿs
,

149 (
wch¬_t
 *
__»¡riù
 
__de¡
,

150 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
), 
wcsıy
);

152 
__ex‹º_®ways_šlše
 
wch¬_t
 *

153 
	`__NTH
 (
	$wcsıy
 (
wch¬_t
 *
__»¡riù
 
__de¡
, 
__cÚ¡
 wch¬_ˆ*__»¡riù 
__¤c
))

155 ià(
	`__bos
 (
__de¡
è!ğ(
size_t
) -1)

156  
	`__wcsıy_chk
 (
__de¡
, 
__¤c
, 
	`__bos
 (__de¡è/  (
wch¬_t
));

157  
	`__wcsıy_®Ÿs
 (
__de¡
, 
__¤c
);

158 
	}
}

161 
wch¬_t
 *
	$__wııy_chk
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

162 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
,

163 
size_t
 
__de¡Ën
è
__THROW
;

164 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wııy_®Ÿs
,

165 (
wch¬_t
 *
__»¡riù
 
__de¡
,

166 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
), 
wııy
);

168 
__ex‹º_®ways_šlše
 
wch¬_t
 *

169 
	`__NTH
 (
	$wııy
 (
wch¬_t
 *
__»¡riù
 
__de¡
, 
__cÚ¡
 wch¬_ˆ*__»¡riù 
__¤c
))

171 ià(
	`__bos
 (
__de¡
è!ğ(
size_t
) -1)

172  
	`__wııy_chk
 (
__de¡
, 
__¤c
, 
	`__bos
 (__de¡è/  (
wch¬_t
));

173  
	`__wııy_®Ÿs
 (
__de¡
, 
__¤c
);

174 
	}
}

177 
wch¬_t
 *
	$__wc¢ıy_chk
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

178 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
,

179 
size_t
 
__de¡Ën
è
__THROW
;

180 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wc¢ıy_®Ÿs
,

181 (
wch¬_t
 *
__»¡riù
 
__de¡
,

182 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
,

183 
size_t
 
__n
), 
wc¢ıy
);

184 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wc¢ıy_chk_w¬n
,

185 (
wch¬_t
 *
__»¡riù
 
__de¡
,

186 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
,

187 
size_t
 
__n
, size_ˆ
__de¡Ën
), 
__wc¢ıy_chk
)

188 
	`__w¬Ç‰r
 ("wcsncpy called with†ength biggerhan size of destination "

191 
__ex‹º_®ways_šlše
 
wch¬_t
 *

192 
	`__NTH
 (
	$wc¢ıy
 (
wch¬_t
 *
__»¡riù
 
__de¡
, 
__cÚ¡
 wch¬_ˆ*__»¡riù 
__¤c
,

193 
size_t
 
__n
))

195 ià(
	`__bos
 (
__de¡
è!ğ(
size_t
) -1)

197 ià(!
	`__butš_cÚ¡ªt_p
 (
__n
))

198  
	`__wc¢ıy_chk
 (
__de¡
, 
__¤c
, 
__n
,

199 
	`__bos
 (
__de¡
è/  (
wch¬_t
));

200 ià(
__n
 > 
	`__bos
 (
__de¡
è/  (
wch¬_t
))

201  
	`__wc¢ıy_chk_w¬n
 (
__de¡
, 
__¤c
, 
__n
,

202 
	`__bos
 (
__de¡
è/  (
wch¬_t
));

204  
	`__wc¢ıy_®Ÿs
 (
__de¡
, 
__¤c
, 
__n
);

205 
	}
}

208 
wch¬_t
 *
	$__wınıy_chk
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

209 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
,

210 
size_t
 
__de¡Ën
è
__THROW
;

211 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wınıy_®Ÿs
,

212 (
wch¬_t
 *
__»¡riù
 
__de¡
,

213 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
,

214 
size_t
 
__n
), 
wınıy
);

215 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wınıy_chk_w¬n
,

216 (
wch¬_t
 *
__»¡riù
 
__de¡
,

217 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
,

218 
size_t
 
__n
, size_ˆ
__de¡Ën
), 
__wınıy_chk
)

219 
	`__w¬Ç‰r
 ("wcpncpy called with†ength biggerhan size of destination "

222 
__ex‹º_®ways_šlše
 
wch¬_t
 *

223 
	`__NTH
 (
	$wınıy
 (
wch¬_t
 *
__»¡riù
 
__de¡
, 
__cÚ¡
 wch¬_ˆ*__»¡riù 
__¤c
,

224 
size_t
 
__n
))

226 ià(
	`__bos
 (
__de¡
è!ğ(
size_t
) -1)

228 ià(!
	`__butš_cÚ¡ªt_p
 (
__n
))

229  
	`__wınıy_chk
 (
__de¡
, 
__¤c
, 
__n
,

230 
	`__bos
 (
__de¡
è/  (
wch¬_t
));

231 ià(
__n
 > 
	`__bos
 (
__de¡
è/  (
wch¬_t
))

232  
	`__wınıy_chk_w¬n
 (
__de¡
, 
__¤c
, 
__n
,

233 
	`__bos
 (
__de¡
è/  (
wch¬_t
));

235  
	`__wınıy_®Ÿs
 (
__de¡
, 
__¤c
, 
__n
);

236 
	}
}

239 
wch¬_t
 *
	$__wcsÿt_chk
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

240 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
,

241 
size_t
 
__de¡Ën
è
__THROW
;

242 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wcsÿt_®Ÿs
,

243 (
wch¬_t
 *
__»¡riù
 
__de¡
,

244 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
), 
wcsÿt
);

246 
__ex‹º_®ways_šlše
 
wch¬_t
 *

247 
	`__NTH
 (
	$wcsÿt
 (
wch¬_t
 *
__»¡riù
 
__de¡
, 
__cÚ¡
 wch¬_ˆ*__»¡riù 
__¤c
))

249 ià(
	`__bos
 (
__de¡
è!ğ(
size_t
) -1)

250  
	`__wcsÿt_chk
 (
__de¡
, 
__¤c
, 
	`__bos
 (__de¡è/  (
wch¬_t
));

251  
	`__wcsÿt_®Ÿs
 (
__de¡
, 
__¤c
);

252 
	}
}

255 
wch¬_t
 *
	$__wc¢ÿt_chk
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

256 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
,

257 
size_t
 
__n
, size_ˆ
__de¡Ën
è
__THROW
;

258 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wc¢ÿt_®Ÿs
,

259 (
wch¬_t
 *
__»¡riù
 
__de¡
,

260 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
,

261 
size_t
 
__n
), 
wc¢ÿt
);

263 
__ex‹º_®ways_šlše
 
wch¬_t
 *

264 
	`__NTH
 (
	$wc¢ÿt
 (
wch¬_t
 *
__»¡riù
 
__de¡
, 
__cÚ¡
 wch¬_ˆ*__»¡riù 
__¤c
,

265 
size_t
 
__n
))

267 ià(
	`__bos
 (
__de¡
è!ğ(
size_t
) -1)

268  
	`__wc¢ÿt_chk
 (
__de¡
, 
__¤c
, 
__n
,

269 
	`__bos
 (
__de¡
è/  (
wch¬_t
));

270  
	`__wc¢ÿt_®Ÿs
 (
__de¡
, 
__¤c
, 
__n
);

271 
	}
}

274 
	$__sw´štf_chk
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

275 
__æag
, 
size_t
 
__s_Ën
,

276 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

277 
__THROW
 ;

279 
	`__REDIRECT_NTH_LDBL
 (
__sw´štf_®Ÿs
,

280 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

281 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fmt
, ...),

282 
sw´štf
);

284 #ifdeà
__va_¬g_·ck


285 
__ex‹º_®ways_šlše
 

286 
	`__NTH
 (
	$sw´štf
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

287 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fmt
, ...))

289 ià(
	`__bos
 (
__s
è!ğ(
size_t
è-1 || 
__USE_FORTIFY_LEVEL
 > 1)

290  
	`__sw´štf_chk
 (
__s
, 
__n
, 
__USE_FORTIFY_LEVEL
 - 1,

291 
	`__bos
 (
__s
è/  (
wch¬_t
),

292 
__fmt
, 
	`__va_¬g_·ck
 ());

293  
	`__sw´štf_®Ÿs
 (
__s
, 
__n
, 
__fmt
, 
	`__va_¬g_·ck
 ());

294 
	}
}

295 #–ià!
defšed
 
__ılu¥lus


297 
	#sw´štf
(
s
, 
n
, ...) \

298 (
	`__bos
 (
s
è!ğ(
size_t
è-1 || 
__USE_FORTIFY_LEVEL
 > 1 \

299 ? 
	`__sw´štf_chk
 (
s
, 
n
, 
__USE_FORTIFY_LEVEL
 - 1, \

300 
	`__bos
 (
s
è/  (
wch¬_t
), 
__VA_ARGS__
) \

301 : 
	`sw´štf
 (
s
, 
n
, 
__VA_ARGS__
))

	)

304 
	$__vsw´štf_chk
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

305 
__æag
, 
size_t
 
__s_Ën
,

306 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

307 
__gnuc_va_li¡
 
__¬g
)

308 
__THROW
 ;

310 
	`__REDIRECT_NTH_LDBL
 (
__vsw´štf_®Ÿs
,

311 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

312 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fmt
,

313 
__gnuc_va_li¡
 
__­
), 
vsw´štf
);

315 
__ex‹º_®ways_šlše
 

316 
	`__NTH
 (
	$vsw´štf
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

317 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fmt
, 
__gnuc_va_li¡
 
__­
))

319 ià(
	`__bos
 (
__s
è!ğ(
size_t
è-1 || 
__USE_FORTIFY_LEVEL
 > 1)

320  
	`__vsw´štf_chk
 (
__s
, 
__n
, 
__USE_FORTIFY_LEVEL
 - 1,

321 
	`__bos
 (
__s
è/  (
wch¬_t
), 
__fmt
, 
__­
);

322  
	`__vsw´štf_®Ÿs
 (
__s
, 
__n
, 
__fmt
, 
__­
);

323 
	}
}

326 #ià
__USE_FORTIFY_LEVEL
 > 1

328 
__fw´štf_chk
 (
__FILE
 *
__»¡riù
 
__¡»am
, 
__æag
,

329 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...);

330 
__w´štf_chk
 (
__æag
, 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

332 
__vfw´štf_chk
 (
__FILE
 *
__»¡riù
 
__¡»am
, 
__æag
,

333 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

334 
__gnuc_va_li¡
 
__­
);

335 
__vw´štf_chk
 (
__æag
, 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

336 
__gnuc_va_li¡
 
__­
);

338 #ifdeà
__va_¬g_·ck


339 
__ex‹º_®ways_šlše
 

340 
	$w´štf
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fmt
, ...)

342  
	`__w´štf_chk
 (
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
	`__va_¬g_·ck
 ());

343 
	}
}

345 
__ex‹º_®ways_šlše
 

346 
	$fw´štf
 (
__FILE
 *
__»¡riù
 
__¡»am
, 
__cÚ¡
 
wch¬_t
 *__»¡riù 
__fmt
, ...)

348  
	`__fw´štf_chk
 (
__¡»am
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

349 
	`__va_¬g_·ck
 ());

350 
	}
}

351 #–ià!
defšed
 
__ılu¥lus


352 
	#w´štf
(...) \

353 
	`__w´štf_chk
 (
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

354 
	#fw´štf
(
¡»am
, ...) \

355 
	`__fw´štf_chk
 (
¡»am
, 
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

358 
__ex‹º_®ways_šlše
 

359 
	$vw´štf
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fmt
, 
__gnuc_va_li¡
 
__­
)

361  
	`__vw´štf_chk
 (
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__­
);

362 
	}
}

364 
__ex‹º_®ways_šlše
 

365 
	$vfw´štf
 (
__FILE
 *
__»¡riù
 
__¡»am
,

366 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fmt
, 
__gnuc_va_li¡
 
__­
)

368  
	`__vfw´štf_chk
 (
__¡»am
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__­
);

369 
	}
}

373 
wch¬_t
 *
	$__fg‘ws_chk
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__size
, 
__n
,

374 
__FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

375 
wch¬_t
 *
	`__REDIRECT
 (
__fg‘ws_®Ÿs
,

376 (
wch¬_t
 *
__»¡riù
 
__s
, 
__n
,

377 
__FILE
 *
__»¡riù
 
__¡»am
), 
fg‘ws
è
__wur
;

378 
wch¬_t
 *
	`__REDIRECT
 (
__fg‘ws_chk_w¬n
,

379 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__size
, 
__n
,

380 
__FILE
 *
__»¡riù
 
__¡»am
), 
__fg‘ws_chk
)

381 
__wur
 
	`__w¬Ç‰r
 ("fgetws called with bigger sizehan†ength "

384 
__ex‹º_®ways_šlše
 
__wur
 
wch¬_t
 *

385 
	$fg‘ws
 (
wch¬_t
 *
__»¡riù
 
__s
, 
__n
, 
__FILE
 *__»¡riù 
__¡»am
)

387 ià(
	`__bos
 (
__s
è!ğ(
size_t
) -1)

389 ià(!
	`__butš_cÚ¡ªt_p
 (
__n
) || __n <= 0)

390  
	`__fg‘ws_chk
 (
__s
, 
	`__bos
 (__sè/  (
wch¬_t
),

391 
__n
, 
__¡»am
);

393 ià((
size_t
è
__n
 > 
	`__bos
 (
__s
è/  (
wch¬_t
))

394  
	`__fg‘ws_chk_w¬n
 (
__s
, 
	`__bos
 (__sè/  (
wch¬_t
),

395 
__n
, 
__¡»am
);

397  
	`__fg‘ws_®Ÿs
 (
__s
, 
__n
, 
__¡»am
);

398 
	}
}

400 #ifdeà
__USE_GNU


401 
wch¬_t
 *
	$__fg‘ws_uÆocked_chk
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__size
,

402 
__n
, 
__FILE
 *
__»¡riù
 
__¡»am
)

403 
__wur
;

404 
wch¬_t
 *
	`__REDIRECT
 (
__fg‘ws_uÆocked_®Ÿs
,

405 (
wch¬_t
 *
__»¡riù
 
__s
, 
__n
,

406 
__FILE
 *
__»¡riù
 
__¡»am
), 
fg‘ws_uÆocked
)

407 
__wur
;

408 
wch¬_t
 *
	`__REDIRECT
 (
__fg‘ws_uÆocked_chk_w¬n
,

409 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__size
, 
__n
,

410 
__FILE
 *
__»¡riù
 
__¡»am
),

411 
__fg‘ws_uÆocked_chk
)

412 
__wur
 
	`__w¬Ç‰r
 ("fgetws_unlocked called with bigger sizehan†ength "

415 
__ex‹º_®ways_šlše
 
__wur
 
wch¬_t
 *

416 
	$fg‘ws_uÆocked
 (
wch¬_t
 *
__»¡riù
 
__s
, 
__n
, 
__FILE
 *__»¡riù 
__¡»am
)

418 ià(
	`__bos
 (
__s
è!ğ(
size_t
) -1)

420 ià(!
	`__butš_cÚ¡ªt_p
 (
__n
) || __n <= 0)

421  
	`__fg‘ws_uÆocked_chk
 (
__s
, 
	`__bos
 (__sè/  (
wch¬_t
),

422 
__n
, 
__¡»am
);

424 ià((
size_t
è
__n
 > 
	`__bos
 (
__s
è/  (
wch¬_t
))

425  
	`__fg‘ws_uÆocked_chk_w¬n
 (
__s
, 
	`__bos
 (__sè/  (
wch¬_t
),

426 
__n
, 
__¡»am
);

428  
	`__fg‘ws_uÆocked_®Ÿs
 (
__s
, 
__n
, 
__¡»am
);

429 
	}
}

433 
size_t
 
	$__wütomb_chk
 (*
__»¡riù
 
__s
, 
wch¬_t
 
__wch¬
,

434 
mb¡©e_t
 *
__»¡riù
 
__p
,

435 
size_t
 
__buæ’
è
__THROW
 
__wur
;

436 
size_t
 
	`__REDIRECT_NTH
 (
__wütomb_®Ÿs
,

437 (*
__»¡riù
 
__s
, 
wch¬_t
 
__wch¬
,

438 
mb¡©e_t
 *
__»¡riù
 
__ps
), 
wütomb
è
__wur
;

440 
__ex‹º_®ways_šlše
 
__wur
 
size_t


441 
	`__NTH
 (
	$wütomb
 (*
__»¡riù
 
__s
, 
wch¬_t
 
__wch¬
,

442 
mb¡©e_t
 *
__»¡riù
 
__ps
))

447 
	#__WCHAR_MB_LEN_MAX
 16

	)

448 #ià
defšed
 
MB_LEN_MAX
 && MB_LEN_MAX !ğ
__WCHAR_MB_LEN_MAX


451 ià(
	`__bos
 (
__s
è!ğ(
size_t
è-1 && 
__WCHAR_MB_LEN_MAX
 > __bos (__s))

452  
	`__wütomb_chk
 (
__s
, 
__wch¬
, 
__ps
, 
	`__bos
 (__s));

453  
	`__wütomb_®Ÿs
 (
__s
, 
__wch¬
, 
__ps
);

454 
	}
}

457 
size_t
 
	$__mb¤towcs_chk
 (
wch¬_t
 *
__»¡riù
 
__d¡
,

458 
__cÚ¡
 **
__»¡riù
 
__¤c
,

459 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
,

460 
size_t
 
__d¡Ën
è
__THROW
;

461 
size_t
 
	`__REDIRECT_NTH
 (
__mb¤towcs_®Ÿs
,

462 (
wch¬_t
 *
__»¡riù
 
__d¡
,

463 
__cÚ¡
 **
__»¡riù
 
__¤c
,

464 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
),

465 
mb¤towcs
);

466 
size_t
 
	`__REDIRECT_NTH
 (
__mb¤towcs_chk_w¬n
,

467 (
wch¬_t
 *
__»¡riù
 
__d¡
,

468 
__cÚ¡
 **
__»¡riù
 
__¤c
,

469 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
,

470 
size_t
 
__d¡Ën
), 
__mb¤towcs_chk
)

471 
	`__w¬Ç‰r
 ("mbsrtowcs called with dst buffer smallerhan†en "

474 
__ex‹º_®ways_šlše
 
size_t


475 
	`__NTH
 (
	$mb¤towcs
 (
wch¬_t
 *
__»¡riù
 
__d¡
, 
__cÚ¡
 **__»¡riù 
__¤c
,

476 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
))

478 ià(
	`__bos
 (
__d¡
è!ğ(
size_t
) -1)

480 ià(!
	`__butš_cÚ¡ªt_p
 (
__Ën
))

481  
	`__mb¤towcs_chk
 (
__d¡
, 
__¤c
, 
__Ën
, 
__ps
,

482 
	`__bos
 (
__d¡
è/  (
wch¬_t
));

484 ià(
__Ën
 > 
	`__bos
 (
__d¡
è/  (
wch¬_t
))

485  
	`__mb¤towcs_chk_w¬n
 (
__d¡
, 
__¤c
, 
__Ën
, 
__ps
,

486 
	`__bos
 (
__d¡
è/  (
wch¬_t
));

488  
	`__mb¤towcs_®Ÿs
 (
__d¡
, 
__¤c
, 
__Ën
, 
__ps
);

489 
	}
}

492 
size_t
 
	$__wc¤tombs_chk
 (*
__»¡riù
 
__d¡
,

493 
__cÚ¡
 
wch¬_t
 **
__»¡riù
 
__¤c
,

494 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
,

495 
size_t
 
__d¡Ën
è
__THROW
;

496 
size_t
 
	`__REDIRECT_NTH
 (
__wc¤tombs_®Ÿs
,

497 (*
__»¡riù
 
__d¡
,

498 
__cÚ¡
 
wch¬_t
 **
__»¡riù
 
__¤c
,

499 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
),

500 
wc¤tombs
);

501 
size_t
 
	`__REDIRECT_NTH
 (
__wc¤tombs_chk_w¬n
,

502 (*
__»¡riù
 
__d¡
,

503 
__cÚ¡
 
wch¬_t
 **
__»¡riù
 
__¤c
,

504 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
,

505 
size_t
 
__d¡Ën
), 
__wc¤tombs_chk
)

506 
	`__w¬Ç‰r
 ("wcsrtombs called with dst buffer smallerhan†en");

508 
__ex‹º_®ways_šlše
 
size_t


509 
	`__NTH
 (
	$wc¤tombs
 (*
__»¡riù
 
__d¡
, 
__cÚ¡
 
wch¬_t
 **__»¡riù 
__¤c
,

510 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
))

512 ià(
	`__bos
 (
__d¡
è!ğ(
size_t
) -1)

514 ià(!
	`__butš_cÚ¡ªt_p
 (
__Ën
))

515  
	`__wc¤tombs_chk
 (
__d¡
, 
__¤c
, 
__Ën
, 
__ps
, 
	`__bos
 (__dst));

517 ià(
__Ën
 > 
	`__bos
 (
__d¡
))

518  
	`__wc¤tombs_chk_w¬n
 (
__d¡
, 
__¤c
, 
__Ën
, 
__ps
, 
	`__bos
 (__dst));

520  
	`__wc¤tombs_®Ÿs
 (
__d¡
, 
__¤c
, 
__Ën
, 
__ps
);

521 
	}
}

524 #ifdeà
__USE_GNU


525 
size_t
 
	$__mb¢¹owcs_chk
 (
wch¬_t
 *
__»¡riù
 
__d¡
,

526 
__cÚ¡
 **
__»¡riù
 
__¤c
, 
size_t
 
__nmc
,

527 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
,

528 
size_t
 
__d¡Ën
è
__THROW
;

529 
size_t
 
	`__REDIRECT_NTH
 (
__mb¢¹owcs_®Ÿs
,

530 (
wch¬_t
 *
__»¡riù
 
__d¡
,

531 
__cÚ¡
 **
__»¡riù
 
__¤c
, 
size_t
 
__nmc
,

532 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
),

533 
mb¢¹owcs
);

534 
size_t
 
	`__REDIRECT_NTH
 (
__mb¢¹owcs_chk_w¬n
,

535 (
wch¬_t
 *
__»¡riù
 
__d¡
,

536 
__cÚ¡
 **
__»¡riù
 
__¤c
, 
size_t
 
__nmc
,

537 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
,

538 
size_t
 
__d¡Ën
), 
__mb¢¹owcs_chk
)

539 
	`__w¬Ç‰r
 ("mbsnrtowcs called with dst buffer smallerhan†en "

542 
__ex‹º_®ways_šlše
 
size_t


543 
	`__NTH
 (
	$mb¢¹owcs
 (
wch¬_t
 *
__»¡riù
 
__d¡
, 
__cÚ¡
 **__»¡riù 
__¤c
,

544 
size_t
 
__nmc
, size_ˆ
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
))

546 ià(
	`__bos
 (
__d¡
è!ğ(
size_t
) -1)

548 ià(!
	`__butš_cÚ¡ªt_p
 (
__Ën
))

549  
	`__mb¢¹owcs_chk
 (
__d¡
, 
__¤c
, 
__nmc
, 
__Ën
, 
__ps
,

550 
	`__bos
 (
__d¡
è/  (
wch¬_t
));

552 ià(
__Ën
 > 
	`__bos
 (
__d¡
è/  (
wch¬_t
))

553  
	`__mb¢¹owcs_chk_w¬n
 (
__d¡
, 
__¤c
, 
__nmc
, 
__Ën
, 
__ps
,

554 
	`__bos
 (
__d¡
è/  (
wch¬_t
));

556  
	`__mb¢¹owcs_®Ÿs
 (
__d¡
, 
__¤c
, 
__nmc
, 
__Ën
, 
__ps
);

557 
	}
}

560 
size_t
 
	$__wc¢¹ombs_chk
 (*
__»¡riù
 
__d¡
,

561 
__cÚ¡
 
wch¬_t
 **
__»¡riù
 
__¤c
,

562 
size_t
 
__nwc
, size_ˆ
__Ën
,

563 
mb¡©e_t
 *
__»¡riù
 
__ps
, 
size_t
 
__d¡Ën
)

564 
__THROW
;

565 
size_t
 
	`__REDIRECT_NTH
 (
__wc¢¹ombs_®Ÿs
,

566 (*
__»¡riù
 
__d¡
,

567 
__cÚ¡
 
wch¬_t
 **
__»¡riù
 
__¤c
,

568 
size_t
 
__nwc
, size_ˆ
__Ën
,

569 
mb¡©e_t
 *
__»¡riù
 
__ps
), 
wc¢¹ombs
);

570 
size_t
 
	`__REDIRECT_NTH
 (
__wc¢¹ombs_chk_w¬n
,

571 (*
__»¡riù
 
__d¡
,

572 
__cÚ¡
 
wch¬_t
 **
__»¡riù
 
__¤c
,

573 
size_t
 
__nwc
, size_ˆ
__Ën
,

574 
mb¡©e_t
 *
__»¡riù
 
__ps
,

575 
size_t
 
__d¡Ën
), 
__wc¢¹ombs_chk
)

576 
	`__w¬Ç‰r
 ("wcsnrtombs called with dst buffer smallerhan†en");

578 
__ex‹º_®ways_šlše
 
size_t


579 
	`__NTH
 (
	$wc¢¹ombs
 (*
__»¡riù
 
__d¡
, 
__cÚ¡
 
wch¬_t
 **__»¡riù 
__¤c
,

580 
size_t
 
__nwc
, size_ˆ
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
))

582 ià(
	`__bos
 (
__d¡
è!ğ(
size_t
) -1)

584 ià(!
	`__butš_cÚ¡ªt_p
 (
__Ën
))

585  
	`__wc¢¹ombs_chk
 (
__d¡
, 
__¤c
, 
__nwc
, 
__Ën
, 
__ps
,

586 
	`__bos
 (
__d¡
));

588 ià(
__Ën
 > 
	`__bos
 (
__d¡
))

589  
	`__wc¢¹ombs_chk_w¬n
 (
__d¡
, 
__¤c
, 
__nwc
, 
__Ën
, 
__ps
,

590 
	`__bos
 (
__d¡
));

592  
	`__wc¢¹ombs_®Ÿs
 (
__d¡
, 
__¤c
, 
__nwc
, 
__Ën
, 
__ps
);

593 
	}
}

	@/usr/include/pthread.h

20 #iâdeà
_PTHREAD_H


21 
	#_PTHREAD_H
 1

	)

23 
	~<ã©u»s.h
>

24 
	~<’dŸn.h
>

25 
	~<sched.h
>

26 
	~<time.h
>

28 
	~<b™s/±h»adty³s.h
>

29 
	~<b™s/£tjmp.h
>

30 
	~<b™s/wÜdsize.h
>

36 
	mPTHREAD_CREATE_JOINABLE
,

37 
	#PTHREAD_CREATE_JOINABLE
 
PTHREAD_CREATE_JOINABLE


	)

38 
	mPTHREAD_CREATE_DETACHED


39 
	#PTHREAD_CREATE_DETACHED
 
PTHREAD_CREATE_DETACHED


	)

46 
	mPTHREAD_MUTEX_TIMED_NP
,

47 
	mPTHREAD_MUTEX_RECURSIVE_NP
,

48 
	mPTHREAD_MUTEX_ERRORCHECK_NP
,

49 
	mPTHREAD_MUTEX_ADAPTIVE_NP


50 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K8


52 
	mPTHREAD_MUTEX_NORMAL
 = 
PTHREAD_MUTEX_TIMED_NP
,

53 
	mPTHREAD_MUTEX_RECURSIVE
 = 
PTHREAD_MUTEX_RECURSIVE_NP
,

54 
	mPTHREAD_MUTEX_ERRORCHECK
 = 
PTHREAD_MUTEX_ERRORCHECK_NP
,

55 
	mPTHREAD_MUTEX_DEFAULT
 = 
PTHREAD_MUTEX_NORMAL


57 #ifdeà
__USE_GNU


59 , 
	mPTHREAD_MUTEX_FAST_NP
 = 
PTHREAD_MUTEX_TIMED_NP


64 #ifdeà
__USE_XOPEN2K


68 
	mPTHREAD_MUTEX_STALLED
,

69 
	mPTHREAD_MUTEX_STALLED_NP
 = 
PTHREAD_MUTEX_STALLED
,

70 
	mPTHREAD_MUTEX_ROBUST
,

71 
	mPTHREAD_MUTEX_ROBUST_NP
 = 
PTHREAD_MUTEX_ROBUST


76 #ifdeà
__USE_UNIX98


80 
	mPTHREAD_PRIO_NONE
,

81 
	mPTHREAD_PRIO_INHERIT
,

82 
	mPTHREAD_PRIO_PROTECT


88 #ià
__WORDSIZE
 == 64

89 
	#PTHREAD_MUTEX_INITIALIZER
 \

90 { { 0, 0, 0, 0, 0, 0, { 0, 0 } } }

	)

91 #ifdeà
__USE_GNU


92 
	#PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP
 \

93 { { 0, 0, 0, 0, 
PTHREAD_MUTEX_RECURSIVE_NP
, 0, { 0, 0 } } }

	)

94 
	#PTHREAD_ERRORCHECK_MUTEX_INITIALIZER_NP
 \

95 { { 0, 0, 0, 0, 
PTHREAD_MUTEX_ERRORCHECK_NP
, 0, { 0, 0 } } }

	)

96 
	#PTHREAD_ADAPTIVE_MUTEX_INITIALIZER_NP
 \

97 { { 0, 0, 0, 0, 
PTHREAD_MUTEX_ADAPTIVE_NP
, 0, { 0, 0 } } }

	)

100 
	#PTHREAD_MUTEX_INITIALIZER
 \

101 { { 0, 0, 0, 0, 0, { 0 } } }

	)

102 #ifdeà
__USE_GNU


103 
	#PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP
 \

104 { { 0, 0, 0, 
PTHREAD_MUTEX_RECURSIVE_NP
, 0, { 0 } } }

	)

105 
	#PTHREAD_ERRORCHECK_MUTEX_INITIALIZER_NP
 \

106 { { 0, 0, 0, 
PTHREAD_MUTEX_ERRORCHECK_NP
, 0, { 0 } } }

	)

107 
	#PTHREAD_ADAPTIVE_MUTEX_INITIALIZER_NP
 \

108 { { 0, 0, 0, 
PTHREAD_MUTEX_ADAPTIVE_NP
, 0, { 0 } } }

	)

114 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


117 
	mPTHREAD_RWLOCK_PREFER_READER_NP
,

118 
	mPTHREAD_RWLOCK_PREFER_WRITER_NP
,

119 
	mPTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP
,

120 
	mPTHREAD_RWLOCK_DEFAULT_NP
 = 
PTHREAD_RWLOCK_PREFER_READER_NP


124 
	#PTHREAD_RWLOCK_INITIALIZER
 \

125 { { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 } }

	)

126 #ifdeà
__USE_GNU


127 #ià
__WORDSIZE
 == 64

128 
	#PTHREAD_RWLOCK_WRITER_NONRECURSIVE_INITIALIZER_NP
 \

130 
PTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP
 } }

	)

132 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


133 
	#PTHREAD_RWLOCK_WRITER_NONRECURSIVE_INITIALIZER_NP
 \

134 { { 0, 0, 0, 0, 0, 0, 
PTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP
, \

135 0, 0, 0, 0 } }

	)

137 
	#PTHREAD_RWLOCK_WRITER_NONRECURSIVE_INITIALIZER_NP
 \

138 { { 0, 0, 0, 0, 0, 0, 0, 0, 0, 
PTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP
,\

139 0 } }

	)

149 
	mPTHREAD_INHERIT_SCHED
,

150 
	#PTHREAD_INHERIT_SCHED
 
PTHREAD_INHERIT_SCHED


	)

151 
	mPTHREAD_EXPLICIT_SCHED


152 
	#PTHREAD_EXPLICIT_SCHED
 
PTHREAD_EXPLICIT_SCHED


	)

159 
	mPTHREAD_SCOPE_SYSTEM
,

160 
	#PTHREAD_SCOPE_SYSTEM
 
PTHREAD_SCOPE_SYSTEM


	)

161 
	mPTHREAD_SCOPE_PROCESS


162 
	#PTHREAD_SCOPE_PROCESS
 
PTHREAD_SCOPE_PROCESS


	)

169 
	mPTHREAD_PROCESS_PRIVATE
,

170 
	#PTHREAD_PROCESS_PRIVATE
 
PTHREAD_PROCESS_PRIVATE


	)

171 
	mPTHREAD_PROCESS_SHARED


172 
	#PTHREAD_PROCESS_SHARED
 
PTHREAD_PROCESS_SHARED


	)

178 
	#PTHREAD_COND_INITIALIZER
 { { 0, 0, 0, 0, 0, (*è0, 0, 0 } }

	)

182 
	s_±h»ad_ş—nup_bufãr


184 (*
	m__routše
) (*);

185 *
	m__¬g
;

186 
	m__ÿnûÉy³
;

187 
_±h»ad_ş—nup_bufãr
 *
	m__´ev
;

193 
	mPTHREAD_CANCEL_ENABLE
,

194 
	#PTHREAD_CANCEL_ENABLE
 
PTHREAD_CANCEL_ENABLE


	)

195 
	mPTHREAD_CANCEL_DISABLE


196 
	#PTHREAD_CANCEL_DISABLE
 
PTHREAD_CANCEL_DISABLE


	)

200 
	mPTHREAD_CANCEL_DEFERRED
,

201 
	#PTHREAD_CANCEL_DEFERRED
 
PTHREAD_CANCEL_DEFERRED


	)

202 
	mPTHREAD_CANCEL_ASYNCHRONOUS


203 
	#PTHREAD_CANCEL_ASYNCHRONOUS
 
PTHREAD_CANCEL_ASYNCHRONOUS


	)

205 
	#PTHREAD_CANCELED
 ((*è-1)

	)

209 
	#PTHREAD_ONCE_INIT
 0

	)

212 #ifdeà
__USE_XOPEN2K


216 
	#PTHREAD_BARRIER_SERIAL_THREAD
 -1

	)

220 
__BEGIN_DECLS


225 
±h»ad_ü—‹
 (
±h»ad_t
 *
__»¡riù
 
__Ãwth»ad
,

226 
__cÚ¡
 
±h»ad_©Œ_t
 *
__»¡riù
 
__©Œ
,

227 *(*
__¡¬t_routše
) (*),

228 *
__»¡riù
 
__¬g
è
__THROW
 
__nÚnuÎ
 ((1, 3));

234 
	$±h»ad_ex™
 (*
__»tv®
è
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

242 
	`±h»ad_još
 (
±h»ad_t
 
__th
, **
__th»ad_»tuº
);

244 #ifdeà
__USE_GNU


247 
	$±h»ad_Œyjoš_Å
 (
±h»ad_t
 
__th
, **
__th»ad_»tuº
è
__THROW
;

255 
	`±h»ad_timedjoš_Å
 (
±h»ad_t
 
__th
, **
__th»ad_»tuº
,

256 
__cÚ¡
 
time¥ec
 *
__ab¡ime
);

263 
	$±h»ad_d‘ach
 (
±h»ad_t
 
__th
è
__THROW
;

267 
±h»ad_t
 
	$±h»ad_£lf
 (è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

270 
	$±h»ad_equ®
 (
±h»ad_t
 
__th»ad1
,…th»ad_ˆ
__th»ad2
è
__THROW
;

278 
	$±h»ad_©Œ_š™
 (
±h»ad_©Œ_t
 *
__©Œ
è
__THROW
 
	`__nÚnuÎ
 ((1));

281 
	$±h»ad_©Œ_de¡roy
 (
±h»ad_©Œ_t
 *
__©Œ
)

282 
__THROW
 
	`__nÚnuÎ
 ((1));

285 
	$±h»ad_©Œ_g‘d‘ach¡©e
 (
__cÚ¡
 
±h»ad_©Œ_t
 *
__©Œ
,

286 *
__d‘ach¡©e
)

287 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

290 
	$±h»ad_©Œ_£td‘ach¡©e
 (
±h»ad_©Œ_t
 *
__©Œ
,

291 
__d‘ach¡©e
)

292 
__THROW
 
	`__nÚnuÎ
 ((1));

296 
	$±h»ad_©Œ_g‘gu¬dsize
 (
__cÚ¡
 
±h»ad_©Œ_t
 *
__©Œ
,

297 
size_t
 *
__gu¬dsize
)

298 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

301 
	$±h»ad_©Œ_£tgu¬dsize
 (
±h»ad_©Œ_t
 *
__©Œ
,

302 
size_t
 
__gu¬dsize
)

303 
__THROW
 
	`__nÚnuÎ
 ((1));

307 
	$±h»ad_©Œ_g‘sched·¿m
 (
__cÚ¡
 
±h»ad_©Œ_t
 *
__»¡riù


308 
__©Œ
,

309 
sched_·¿m
 *
__»¡riù
 
__·¿m
)

310 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

313 
	$±h»ad_©Œ_£tsched·¿m
 (
±h»ad_©Œ_t
 *
__»¡riù
 
__©Œ
,

314 
__cÚ¡
 
sched_·¿m
 *
__»¡riù


315 
__·¿m
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

318 
	$±h»ad_©Œ_g‘schedpŞicy
 (
__cÚ¡
 
±h»ad_©Œ_t
 *
__»¡riù


319 
__©Œ
, *
__»¡riù
 
__pŞicy
)

320 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

323 
	$±h»ad_©Œ_£tschedpŞicy
 (
±h»ad_©Œ_t
 *
__©Œ
, 
__pŞicy
)

324 
__THROW
 
	`__nÚnuÎ
 ((1));

327 
	$±h»ad_©Œ_g‘šh”™sched
 (
__cÚ¡
 
±h»ad_©Œ_t
 *
__»¡riù


328 
__©Œ
, *
__»¡riù
 
__šh”™
)

329 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

332 
	$±h»ad_©Œ_£tšh”™sched
 (
±h»ad_©Œ_t
 *
__©Œ
,

333 
__šh”™
)

334 
__THROW
 
	`__nÚnuÎ
 ((1));

338 
	$±h»ad_©Œ_g‘scİe
 (
__cÚ¡
 
±h»ad_©Œ_t
 *
__»¡riù
 
__©Œ
,

339 *
__»¡riù
 
__scİe
)

340 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

343 
	$±h»ad_©Œ_£tscİe
 (
±h»ad_©Œ_t
 *
__©Œ
, 
__scİe
)

344 
__THROW
 
	`__nÚnuÎ
 ((1));

347 
	$±h»ad_©Œ_g‘¡ackaddr
 (
__cÚ¡
 
±h»ad_©Œ_t
 *
__»¡riù


348 
__©Œ
, **
__»¡riù
 
__¡ackaddr
)

349 
__THROW
 
	`__nÚnuÎ
 ((1, 2)è
__©Œibu‹_d•»ÿ‹d__
;

355 
	$±h»ad_©Œ_£t¡ackaddr
 (
±h»ad_©Œ_t
 *
__©Œ
,

356 *
__¡ackaddr
)

357 
__THROW
 
	`__nÚnuÎ
 ((1)è
__©Œibu‹_d•»ÿ‹d__
;

360 
	$±h»ad_©Œ_g‘¡acksize
 (
__cÚ¡
 
±h»ad_©Œ_t
 *
__»¡riù


361 
__©Œ
, 
size_t
 *
__»¡riù
 
__¡acksize
)

362 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

367 
	$±h»ad_©Œ_£t¡acksize
 (
±h»ad_©Œ_t
 *
__©Œ
,

368 
size_t
 
__¡acksize
)

369 
__THROW
 
	`__nÚnuÎ
 ((1));

371 #ifdeà
__USE_XOPEN2K


373 
	$±h»ad_©Œ_g‘¡ack
 (
__cÚ¡
 
±h»ad_©Œ_t
 *
__»¡riù
 
__©Œ
,

374 **
__»¡riù
 
__¡ackaddr
,

375 
size_t
 *
__»¡riù
 
__¡acksize
)

376 
__THROW
 
	`__nÚnuÎ
 ((1, 2, 3));

381 
	$±h»ad_©Œ_£t¡ack
 (
±h»ad_©Œ_t
 *
__©Œ
, *
__¡ackaddr
,

382 
size_t
 
__¡acksize
è
__THROW
 
	`__nÚnuÎ
 ((1));

385 #ifdeà
__USE_GNU


388 
	$±h»ad_©Œ_£ffš™y_Å
 (
±h»ad_©Œ_t
 *
__©Œ
,

389 
size_t
 
__ıu£tsize
,

390 
__cÚ¡
 
ıu_£t_t
 *
__ıu£t
)

391 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

395 
	$±h»ad_©Œ_g‘affš™y_Å
 (
__cÚ¡
 
±h»ad_©Œ_t
 *
__©Œ
,

396 
size_t
 
__ıu£tsize
,

397 
ıu_£t_t
 *
__ıu£t
)

398 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

404 
	$±h»ad_g‘©Œ_Å
 (
±h»ad_t
 
__th
, 
±h»ad_©Œ_t
 *
__©Œ
)

405 
__THROW
 
	`__nÚnuÎ
 ((2));

413 
	$±h»ad_£tsched·¿m
 (
±h»ad_t
 
__rg‘_th»ad
, 
__pŞicy
,

414 
__cÚ¡
 
sched_·¿m
 *
__·¿m
)

415 
__THROW
 
	`__nÚnuÎ
 ((3));

418 
	$±h»ad_g‘sched·¿m
 (
±h»ad_t
 
__rg‘_th»ad
,

419 *
__»¡riù
 
__pŞicy
,

420 
sched_·¿m
 *
__»¡riù
 
__·¿m
)

421 
__THROW
 
	`__nÚnuÎ
 ((2, 3));

424 
	$±h»ad_£tsched´io
 (
±h»ad_t
 
__rg‘_th»ad
, 
__´io
)

425 
__THROW
;

428 #ifdeà
__USE_GNU


430 
	$±h»ad_g‘Çme_Å
 (
±h»ad_t
 
__rg‘_th»ad
, *
__buf
,

431 
size_t
 
__buæ’
)

432 
__THROW
 
	`__nÚnuÎ
 ((2));

435 
	$±h»ad_£Šame_Å
 (
±h»ad_t
 
__rg‘_th»ad
, 
__cÚ¡
 *
__Çme
)

436 
__THROW
 
	`__nÚnuÎ
 ((2));

440 #ifdeà
__USE_UNIX98


442 
	$±h»ad_g‘cÚcu¼’cy
 (è
__THROW
;

445 
	$±h»ad_£tcÚcu¼’cy
 (
__Ëv–
è
__THROW
;

448 #ifdeà
__USE_GNU


453 
	$±h»ad_y›ld
 (è
__THROW
;

458 
	$±h»ad_£ffš™y_Å
 (
±h»ad_t
 
__th
, 
size_t
 
__ıu£tsize
,

459 
__cÚ¡
 
ıu_£t_t
 *
__ıu£t
)

460 
__THROW
 
	`__nÚnuÎ
 ((3));

463 
	$±h»ad_g‘affš™y_Å
 (
±h»ad_t
 
__th
, 
size_t
 
__ıu£tsize
,

464 
ıu_£t_t
 *
__ıu£t
)

465 
__THROW
 
	`__nÚnuÎ
 ((3));

478 
	`±h»ad_Úû
 (
±h»ad_Úû_t
 *
__Úû_cÚŒŞ
,

479 (*
__š™_routše
è()è
	`__nÚnuÎ
 ((1, 2));

490 
	`±h»ad_£tÿnûl¡©e
 (
__¡©e
, *
__Şd¡©e
);

494 
	`±h»ad_£tÿnûÉy³
 (
__ty³
, *
__Şdty³
);

497 
	`±h»ad_ÿnûl
 (
±h»ad_t
 
__th
);

502 
	`±h»ad_‹¡ÿnûl
 ();

511 
__jmp_buf
 
__ÿnûl_jmp_buf
;

512 
__mask_was_§ved
;

513 } 
__ÿnûl_jmp_buf
[1];

514 *
__·d
[4];

515 } 
	t__±h»ad_unwšd_buf_t
 
	t__©Œibu‹__
 ((
	t__®igÃd__
));

518 #iâdeà
__ş—nup_fù_©Œibu‹


519 
	#__ş—nup_fù_©Œibu‹


	)

524 
	s__±h»ad_ş—nup_äame


526 (*
__ÿnûl_routše
) (*);

527 *
__ÿnûl_¬g
;

528 
__do_™
;

529 
__ÿnûl_ty³
;

532 #ià
defšed
 
__GNUC__
 && defšed 
__EXCEPTIONS


533 #ifdeà
__ılu¥lus


535 şas 
	c__±h»ad_ş—nup_şass


537 (*
__ÿnûl_routše
) (*);

538 *
__ÿnûl_¬g
;

539 
__do_™
;

540 
__ÿnûl_ty³
;

542 
public
:

543 
	`__±h»ad_ş—nup_şass
 ((*
__fù
è(*), *
__¬g
)

544 : 
	`__ÿnûl_routše
 (
__fù
), 
	`__ÿnûl_¬g
 (
__¬g
), 
	$__do_™
 (1) { }

545 ~
	$__±h»ad_ş—nup_şass
 (è{ ià(
__do_™
è
	`__ÿnûl_routše
 (
__ÿnûl_¬g
); 
	}
}

546 
	$__£tdo™
 (
__Ãwv®
è{ 
__do_™
 = __Ãwv®; 
	}
}

547 
	$__deãr
 (è{ 
	`±h»ad_£tÿnûÉy³
 (
PTHREAD_CANCEL_DEFERRED
,

548 &
__ÿnûl_ty³
); 
	}
}

549 
	$__»¡Üe
 (ècÚ¡ { 
	`±h»ad_£tÿnûÉy³
 (
__ÿnûl_ty³
, 0); 
	}
}

559 
	#±h»ad_ş—nup_push
(
routše
, 
¬g
) \

561 
__±h»ad_ş—nup_şass
 
	`__şäame
 (
routše
, 
¬g
)

	)

565 
	#±h»ad_ş—nup_pİ
(
execu‹
) \

566 
__şäame
.
	`__£tdo™
 (
execu‹
); \

567 } 0)

	)

569 #ifdeà
__USE_GNU


573 
	#±h»ad_ş—nup_push_deãr_Å
(
routše
, 
¬g
) \

575 
__±h»ad_ş—nup_şass
 
	`__şäame
 (
routše
, 
¬g
); \

576 
__şäame
.
	`__deãr
 ()

	)

581 
	#±h»ad_ş—nup_pİ_»¡Üe_Å
(
execu‹
) \

582 
__şäame
.
	`__»¡Üe
 (); \

583 
__şäame
.
	`__£tdo™
 (
execu‹
); \

584 } 0)

	)

591 
__ex‹º_šlše
 

592 
	$__±h»ad_ş—nup_routše
 (
__±h»ad_ş—nup_äame
 *
__äame
)

594 ià(
__äame
->
__do_™
)

595 
__äame
->
	`__ÿnûl_routše
 (__äame->
__ÿnûl_¬g
);

596 
	}
}

605 
	#±h»ad_ş—nup_push
(
routše
, 
¬g
) \

607 
__±h»ad_ş—nup_äame
 
__şäame
 \

608 
	`__©Œibu‹__
 ((
	`__ş—nup__
 (
__±h»ad_ş—nup_routše
))) \

609 ğ{ .
__ÿnûl_routše
 = (
routše
), .
__ÿnûl_¬g
 = (
¬g
), \

610 .
__do_™
 = 1 };

	)

614 
	#±h»ad_ş—nup_pİ
(
execu‹
) \

615 
__şäame
.
__do_™
 = (
execu‹
); \

616 } 0)

	)

618 #ifdeà
__USE_GNU


622 
	#±h»ad_ş—nup_push_deãr_Å
(
routše
, 
¬g
) \

624 
__±h»ad_ş—nup_äame
 
__şäame
 \

625 
	`__©Œibu‹__
 ((
	`__ş—nup__
 (
__±h»ad_ş—nup_routše
))) \

626 ğ{ .
__ÿnûl_routše
 = (
routše
), .
__ÿnûl_¬g
 = (
¬g
), \

627 .
__do_™
 = 1 }; \

628 (è
	`±h»ad_£tÿnûÉy³
 (
PTHREAD_CANCEL_DEFERRED
, \

629 &
__şäame
.
__ÿnûl_ty³
)

	)

634 
	#±h»ad_ş—nup_pİ_»¡Üe_Å
(
execu‹
) \

635 (è
	`±h»ad_£tÿnûÉy³
 (
__şäame
.
__ÿnûl_ty³
, 
NULL
); \

636 
__şäame
.
__do_™
 = (
execu‹
); \

637 } 0)

	)

648 
	#±h»ad_ş—nup_push
(
routše
, 
¬g
) \

650 
__±h»ad_unwšd_buf_t
 
__ÿnûl_buf
; \

651 (*
__ÿnûl_routše
è(*èğ(
routše
); \

652 *
__ÿnûl_¬g
 = (
¬g
); \

653 
nÙ_fœ¡_ÿÎ
 = 
	`__sig£tjmp
 ((
__jmp_buf_g
 *) (*) \

654 
__ÿnûl_buf
.
__ÿnûl_jmp_buf
, 0); \

655 ià(
	`__butš_ex³ù
 (
nÙ_fœ¡_ÿÎ
, 0)) \

657 
	`__ÿnûl_routše
 (
__ÿnûl_¬g
); \

658 
	`__±h»ad_unwšd_Ãxt
 (&
__ÿnûl_buf
); \

662 
	`__±h»ad_»gi¡”_ÿnûl
 (&
__ÿnûl_buf
); \

663 dØ{

	)

664 
__±h»ad_»gi¡”_ÿnûl
 (
__±h»ad_unwšd_buf_t
 *
__buf
)

665 
__ş—nup_fù_©Œibu‹
;

669 
	#±h»ad_ş—nup_pİ
(
execu‹
) \

672 
	`__±h»ad_uÄegi¡”_ÿnûl
 (&
__ÿnûl_buf
); \

673 ià(
execu‹
) \

674 
	`__ÿnûl_routše
 (
__ÿnûl_¬g
); \

675 } 0)

	)

676 
	$__±h»ad_uÄegi¡”_ÿnûl
 (
__±h»ad_unwšd_buf_t
 *
__buf
)

677 
__ş—nup_fù_©Œibu‹
;

679 #ifdeà
__USE_GNU


683 
	#±h»ad_ş—nup_push_deãr_Å
(
routše
, 
¬g
) \

685 
__±h»ad_unwšd_buf_t
 
__ÿnûl_buf
; \

686 (*
__ÿnûl_routše
è(*èğ(
routše
); \

687 *
__ÿnûl_¬g
 = (
¬g
); \

688 
nÙ_fœ¡_ÿÎ
 = 
	`__sig£tjmp
 ((
__jmp_buf_g
 *) (*) \

689 
__ÿnûl_buf
.
__ÿnûl_jmp_buf
, 0); \

690 ià(
	`__butš_ex³ù
 (
nÙ_fœ¡_ÿÎ
, 0)) \

692 
	`__ÿnûl_routše
 (
__ÿnûl_¬g
); \

693 
	`__±h»ad_unwšd_Ãxt
 (&
__ÿnûl_buf
); \

697 
	`__±h»ad_»gi¡”_ÿnûl_deãr
 (&
__ÿnûl_buf
); \

698 dØ{

	)

699 
	`__±h»ad_»gi¡”_ÿnûl_deãr
 (
__±h»ad_unwšd_buf_t
 *
__buf
)

700 
__ş—nup_fù_©Œibu‹
;

705 
	#±h»ad_ş—nup_pİ_»¡Üe_Å
(
execu‹
) \

708 
	`__±h»ad_uÄegi¡”_ÿnûl_»¡Üe
 (&
__ÿnûl_buf
); \

709 ià(
execu‹
) \

710 
	`__ÿnûl_routše
 (
__ÿnûl_¬g
); \

711 
	}
} 0)

	)

712 
	$__±h»ad_uÄegi¡”_ÿnûl_»¡Üe
 (
__±h»ad_unwšd_buf_t
 *
__buf
)

713 
__ş—nup_fù_©Œibu‹
;

717 
	$__±h»ad_unwšd_Ãxt
 (
__±h»ad_unwšd_buf_t
 *
__buf
)

718 
__ş—nup_fù_©Œibu‹
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
))

719 #iâdeà
SHARED


720 
	`__©Œibu‹__
 ((
__w—k__
))

726 
__jmp_buf_g
;

727 
	$__sig£tjmp
 (
__jmp_buf_g
 *
__’v
, 
__§vemask
è
__THROW
;

733 
	$±h»ad_mu‹x_š™
 (
±h»ad_mu‹x_t
 *
__mu‹x
,

734 
__cÚ¡
 
±h»ad_mu‹x©Œ_t
 *
__mu‹x©Œ
)

735 
__THROW
 
	`__nÚnuÎ
 ((1));

738 
	$±h»ad_mu‹x_de¡roy
 (
±h»ad_mu‹x_t
 *
__mu‹x
)

739 
__THROW
 
	`__nÚnuÎ
 ((1));

742 
	$±h»ad_mu‹x_Œylock
 (
±h»ad_mu‹x_t
 *
__mu‹x
)

743 
__THROW
 
	`__nÚnuÎ
 ((1));

746 
	$±h»ad_mu‹x_lock
 (
±h»ad_mu‹x_t
 *
__mu‹x
)

747 
__THROW
 
	`__nÚnuÎ
 ((1));

749 #ifdeà
__USE_XOPEN2K


751 
	$±h»ad_mu‹x_timedlock
 (
±h»ad_mu‹x_t
 *
__»¡riù
 
__mu‹x
,

752 
__cÚ¡
 
time¥ec
 *
__»¡riù


753 
__ab¡ime
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

757 
	$±h»ad_mu‹x_uÆock
 (
±h»ad_mu‹x_t
 *
__mu‹x
)

758 
__THROW
 
	`__nÚnuÎ
 ((1));

762 
	$±h»ad_mu‹x_g‘´ioûšg
 (
__cÚ¡
 
±h»ad_mu‹x_t
 *

763 
__»¡riù
 
__mu‹x
,

764 *
__»¡riù
 
__´ioûšg
)

765 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

769 
	$±h»ad_mu‹x_£rioûšg
 (
±h»ad_mu‹x_t
 *
__»¡riù
 
__mu‹x
,

770 
__´ioûšg
,

771 *
__»¡riù
 
__Şd_ûšg
)

772 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

775 #ifdeà
__USE_XOPEN2K8


777 
	$±h»ad_mu‹x_cÚsi¡’t
 (
±h»ad_mu‹x_t
 *
__mu‹x
)

778 
__THROW
 
	`__nÚnuÎ
 ((1));

779 #ifdeà
__USE_GNU


780 
	$±h»ad_mu‹x_cÚsi¡’t_Å
 (
±h»ad_mu‹x_t
 *
__mu‹x
)

781 
__THROW
 
	`__nÚnuÎ
 ((1));

790 
	$±h»ad_mu‹x©Œ_š™
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
)

791 
__THROW
 
	`__nÚnuÎ
 ((1));

794 
	$±h»ad_mu‹x©Œ_de¡roy
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
)

795 
__THROW
 
	`__nÚnuÎ
 ((1));

798 
	$±h»ad_mu‹x©Œ_g‘psh¬ed
 (
__cÚ¡
 
±h»ad_mu‹x©Œ_t
 *

799 
__»¡riù
 
__©Œ
,

800 *
__»¡riù
 
__psh¬ed
)

801 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

804 
	$±h»ad_mu‹x©Œ_£sh¬ed
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

805 
__psh¬ed
)

806 
__THROW
 
	`__nÚnuÎ
 ((1));

808 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K8


810 
	$±h»ad_mu‹x©Œ_g‘ty³
 (
__cÚ¡
 
±h»ad_mu‹x©Œ_t
 *
__»¡riù


811 
__©Œ
, *
__»¡riù
 
__kšd
)

812 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

817 
	$±h»ad_mu‹x©Œ_£‰y³
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
, 
__kšd
)

818 
__THROW
 
	`__nÚnuÎ
 ((1));

822 
	$±h»ad_mu‹x©Œ_g‘´ÙocŞ
 (
__cÚ¡
 
±h»ad_mu‹x©Œ_t
 *

823 
__»¡riù
 
__©Œ
,

824 *
__»¡riù
 
__´ÙocŞ
)

825 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

829 
	$±h»ad_mu‹x©Œ_£rÙocŞ
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

830 
__´ÙocŞ
)

831 
__THROW
 
	`__nÚnuÎ
 ((1));

834 
	$±h»ad_mu‹x©Œ_g‘´ioûšg
 (
__cÚ¡
 
±h»ad_mu‹x©Œ_t
 *

835 
__»¡riù
 
__©Œ
,

836 *
__»¡riù
 
__´ioûšg
)

837 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

840 
	$±h»ad_mu‹x©Œ_£rioûšg
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

841 
__´ioûšg
)

842 
__THROW
 
	`__nÚnuÎ
 ((1));

844 #ifdeà
__USE_XOPEN2K


846 
	$±h»ad_mu‹x©Œ_g‘robu¡
 (
__cÚ¡
 
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

847 *
__robu¡Ãss
)

848 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

849 #ifdeà
__USE_GNU


850 
	$±h»ad_mu‹x©Œ_g‘robu¡_Å
 (
__cÚ¡
 
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

851 *
__robu¡Ãss
)

852 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

856 
	$±h»ad_mu‹x©Œ_£Œobu¡
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

857 
__robu¡Ãss
)

858 
__THROW
 
	`__nÚnuÎ
 ((1));

859 #ifdeà
__USE_GNU


860 
	$±h»ad_mu‹x©Œ_£Œobu¡_Å
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

861 
__robu¡Ãss
)

862 
__THROW
 
	`__nÚnuÎ
 ((1));

867 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


872 
	$±h»ad_rwlock_š™
 (
±h»ad_rwlock_t
 *
__»¡riù
 
__rwlock
,

873 
__cÚ¡
 
±h»ad_rwlock©Œ_t
 *
__»¡riù


874 
__©Œ
è
__THROW
 
	`__nÚnuÎ
 ((1));

877 
	$±h»ad_rwlock_de¡roy
 (
±h»ad_rwlock_t
 *
__rwlock
)

878 
__THROW
 
	`__nÚnuÎ
 ((1));

881 
	$±h»ad_rwlock_rdlock
 (
±h»ad_rwlock_t
 *
__rwlock
)

882 
__THROW
 
	`__nÚnuÎ
 ((1));

885 
	$±h»ad_rwlock_Œyrdlock
 (
±h»ad_rwlock_t
 *
__rwlock
)

886 
__THROW
 
	`__nÚnuÎ
 ((1));

888 #ifdeà
__USE_XOPEN2K


890 
	$±h»ad_rwlock_timedrdlock
 (
±h»ad_rwlock_t
 *
__»¡riù
 
__rwlock
,

891 
__cÚ¡
 
time¥ec
 *
__»¡riù


892 
__ab¡ime
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

896 
	$±h»ad_rwlock_w¾ock
 (
±h»ad_rwlock_t
 *
__rwlock
)

897 
__THROW
 
	`__nÚnuÎ
 ((1));

900 
	$±h»ad_rwlock_Œyw¾ock
 (
±h»ad_rwlock_t
 *
__rwlock
)

901 
__THROW
 
	`__nÚnuÎ
 ((1));

903 #ifdeà
__USE_XOPEN2K


905 
	$±h»ad_rwlock_timedw¾ock
 (
±h»ad_rwlock_t
 *
__»¡riù
 
__rwlock
,

906 
__cÚ¡
 
time¥ec
 *
__»¡riù


907 
__ab¡ime
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

911 
	$±h»ad_rwlock_uÆock
 (
±h»ad_rwlock_t
 *
__rwlock
)

912 
__THROW
 
	`__nÚnuÎ
 ((1));

918 
	$±h»ad_rwlock©Œ_š™
 (
±h»ad_rwlock©Œ_t
 *
__©Œ
)

919 
__THROW
 
	`__nÚnuÎ
 ((1));

922 
	$±h»ad_rwlock©Œ_de¡roy
 (
±h»ad_rwlock©Œ_t
 *
__©Œ
)

923 
__THROW
 
	`__nÚnuÎ
 ((1));

926 
	$±h»ad_rwlock©Œ_g‘psh¬ed
 (
__cÚ¡
 
±h»ad_rwlock©Œ_t
 *

927 
__»¡riù
 
__©Œ
,

928 *
__»¡riù
 
__psh¬ed
)

929 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

932 
	$±h»ad_rwlock©Œ_£sh¬ed
 (
±h»ad_rwlock©Œ_t
 *
__©Œ
,

933 
__psh¬ed
)

934 
__THROW
 
	`__nÚnuÎ
 ((1));

937 
	$±h»ad_rwlock©Œ_g‘kšd_Å
 (
__cÚ¡
 
±h»ad_rwlock©Œ_t
 *

938 
__»¡riù
 
__©Œ
,

939 *
__»¡riù
 
__´ef
)

940 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

943 
	$±h»ad_rwlock©Œ_£tkšd_Å
 (
±h»ad_rwlock©Œ_t
 *
__©Œ
,

944 
__´ef
è
__THROW
 
	`__nÚnuÎ
 ((1));

952 
	$±h»ad_cÚd_š™
 (
±h»ad_cÚd_t
 *
__»¡riù
 
__cÚd
,

953 
__cÚ¡
 
±h»ad_cÚd©Œ_t
 *
__»¡riù


954 
__cÚd_©Œ
è
__THROW
 
	`__nÚnuÎ
 ((1));

957 
	$±h»ad_cÚd_de¡roy
 (
±h»ad_cÚd_t
 *
__cÚd
)

958 
__THROW
 
	`__nÚnuÎ
 ((1));

961 
	$±h»ad_cÚd_sigÇl
 (
±h»ad_cÚd_t
 *
__cÚd
)

962 
__THROW
 
	`__nÚnuÎ
 ((1));

965 
	$±h»ad_cÚd_brßdÿ¡
 (
±h»ad_cÚd_t
 *
__cÚd
)

966 
__THROW
 
	`__nÚnuÎ
 ((1));

973 
	$±h»ad_cÚd_wa™
 (
±h»ad_cÚd_t
 *
__»¡riù
 
__cÚd
,

974 
±h»ad_mu‹x_t
 *
__»¡riù
 
__mu‹x
)

975 
	`__nÚnuÎ
 ((1, 2));

984 
	$±h»ad_cÚd_timedwa™
 (
±h»ad_cÚd_t
 *
__»¡riù
 
__cÚd
,

985 
±h»ad_mu‹x_t
 *
__»¡riù
 
__mu‹x
,

986 
__cÚ¡
 
time¥ec
 *
__»¡riù


987 
__ab¡ime
è
	`__nÚnuÎ
 ((1, 2, 3));

992 
	$±h»ad_cÚd©Œ_š™
 (
±h»ad_cÚd©Œ_t
 *
__©Œ
)

993 
__THROW
 
	`__nÚnuÎ
 ((1));

996 
	$±h»ad_cÚd©Œ_de¡roy
 (
±h»ad_cÚd©Œ_t
 *
__©Œ
)

997 
__THROW
 
	`__nÚnuÎ
 ((1));

1000 
	$±h»ad_cÚd©Œ_g‘psh¬ed
 (
__cÚ¡
 
±h»ad_cÚd©Œ_t
 *

1001 
__»¡riù
 
__©Œ
,

1002 *
__»¡riù
 
__psh¬ed
)

1003 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

1006 
	$±h»ad_cÚd©Œ_£sh¬ed
 (
±h»ad_cÚd©Œ_t
 *
__©Œ
,

1007 
__psh¬ed
è
__THROW
 
	`__nÚnuÎ
 ((1));

1009 #ifdeà
__USE_XOPEN2K


1011 
	$±h»ad_cÚd©Œ_g‘şock
 (
__cÚ¡
 
±h»ad_cÚd©Œ_t
 *

1012 
__»¡riù
 
__©Œ
,

1013 
__şockid_t
 *
__»¡riù
 
__şock_id
)

1014 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

1017 
	$±h»ad_cÚd©Œ_£tşock
 (
±h»ad_cÚd©Œ_t
 *
__©Œ
,

1018 
__şockid_t
 
__şock_id
)

1019 
__THROW
 
	`__nÚnuÎ
 ((1));

1023 #ifdeà
__USE_XOPEN2K


1028 
	$±h»ad_¥š_š™
 (
±h»ad_¥šlock_t
 *
__lock
, 
__psh¬ed
)

1029 
__THROW
 
	`__nÚnuÎ
 ((1));

1032 
	$±h»ad_¥š_de¡roy
 (
±h»ad_¥šlock_t
 *
__lock
)

1033 
__THROW
 
	`__nÚnuÎ
 ((1));

1036 
	$±h»ad_¥š_lock
 (
±h»ad_¥šlock_t
 *
__lock
)

1037 
__THROW
 
	`__nÚnuÎ
 ((1));

1040 
	$±h»ad_¥š_Œylock
 (
±h»ad_¥šlock_t
 *
__lock
)

1041 
__THROW
 
	`__nÚnuÎ
 ((1));

1044 
	$±h»ad_¥š_uÆock
 (
±h»ad_¥šlock_t
 *
__lock
)

1045 
__THROW
 
	`__nÚnuÎ
 ((1));

1052 
	$±h»ad_b¬r›r_š™
 (
±h»ad_b¬r›r_t
 *
__»¡riù
 
__b¬r›r
,

1053 
__cÚ¡
 
±h»ad_b¬r›¿‰r_t
 *
__»¡riù


1054 
__©Œ
, 
__couÁ
)

1055 
__THROW
 
	`__nÚnuÎ
 ((1));

1058 
	$±h»ad_b¬r›r_de¡roy
 (
±h»ad_b¬r›r_t
 *
__b¬r›r
)

1059 
__THROW
 
	`__nÚnuÎ
 ((1));

1062 
	$±h»ad_b¬r›r_wa™
 (
±h»ad_b¬r›r_t
 *
__b¬r›r
)

1063 
__THROW
 
	`__nÚnuÎ
 ((1));

1067 
	$±h»ad_b¬r›¿‰r_š™
 (
±h»ad_b¬r›¿‰r_t
 *
__©Œ
)

1068 
__THROW
 
	`__nÚnuÎ
 ((1));

1071 
	$±h»ad_b¬r›¿‰r_de¡roy
 (
±h»ad_b¬r›¿‰r_t
 *
__©Œ
)

1072 
__THROW
 
	`__nÚnuÎ
 ((1));

1075 
	$±h»ad_b¬r›¿‰r_g‘psh¬ed
 (
__cÚ¡
 
±h»ad_b¬r›¿‰r_t
 *

1076 
__»¡riù
 
__©Œ
,

1077 *
__»¡riù
 
__psh¬ed
)

1078 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

1081 
	$±h»ad_b¬r›¿‰r_£sh¬ed
 (
±h»ad_b¬r›¿‰r_t
 *
__©Œ
,

1082 
__psh¬ed
)

1083 
__THROW
 
	`__nÚnuÎ
 ((1));

1095 
	`±h»ad_key_ü—‹
 (
±h»ad_key_t
 *
__key
,

1096 (*
__de¡r_funùiÚ
) (*))

1097 
__THROW
 
	`__nÚnuÎ
 ((1));

1100 
	$±h»ad_key_d–‘e
 (
±h»ad_key_t
 
__key
è
__THROW
;

1103 *
	$±h»ad_g‘¥ecific
 (
±h»ad_key_t
 
__key
è
__THROW
;

1106 
	$±h»ad_£t¥ecific
 (
±h»ad_key_t
 
__key
,

1107 
__cÚ¡
 *
__poš‹r
è
__THROW
 ;

1110 #ifdeà
__USE_XOPEN2K


1112 
	$±h»ad_g‘ıuşockid
 (
±h»ad_t
 
__th»ad_id
,

1113 
__şockid_t
 *
__şock_id
)

1114 
__THROW
 
	`__nÚnuÎ
 ((2));

1129 
	`±h»ad_©fÜk
 ((*
__´•¬e
) (),

1130 (*
__·»Á
) (),

1131 (*
__chd
è()è
__THROW
;

1134 #ifdeà
__USE_EXTERN_INLINES


1136 
__ex‹º_šlše
 

1137 
	`__NTH
 (
	$±h»ad_equ®
 (
±h»ad_t
 
__th»ad1
,…th»ad_ˆ
__th»ad2
))

1139  
__th»ad1
 =ğ
__th»ad2
;

1140 
	}
}

1143 
	g__END_DECLS


	@/usr/include/wctype.h

24 #iâdeà
_WCTYPE_H


26 
	~<ã©u»s.h
>

27 
	~<b™s/ty³s.h
>

29 #iâdeà
__Ãed_iswxxx


30 
	#_WCTYPE_H
 1

	)

33 
	#__Ãed_wšt_t


	)

34 
	~<wch¬.h
>

38 #iâdeà
WEOF


39 
	#WEOF
 (0xffffffffu)

	)

42 #undeà
__Ãed_iswxxx


47 #iâdeà
__iswxxx_defšed


48 
	#__iswxxx_defšed
 1

	)

50 
__BEGIN_NAMESPACE_C99


53 
	twùy³_t
;

54 
	g__END_NAMESPACE_C99


56 #iâdeà
_ISwb™


61 
	~<’dŸn.h
>

62 #ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


63 
	#_ISwb™
(
b™
è(1 << (b™))

	)

65 
	#_ISwb™
(
b™
) \

66 ((
b™
) < 8 ? () ((1UL << (bit)) << 24) \

67 : ((
b™
) < 16 ? () ((1UL << (bit)) << 8) \

68 : ((
b™
) < 24 ? () ((1UL << (bit)) >> 8) \

69 : (è((1UL << (
b™
)è>> 24))))

	)

74 
	m__ISwuµ”
 = 0,

75 
	m__ISwlow”
 = 1,

76 
	m__ISw®pha
 = 2,

77 
	m__ISwdig™
 = 3,

78 
	m__ISwxdig™
 = 4,

79 
	m__ISw¥aû
 = 5,

80 
	m__ISw´št
 = 6,

81 
	m__ISwg¿ph
 = 7,

82 
	m__ISwbÏnk
 = 8,

83 
	m__ISwúŒl
 = 9,

84 
	m__ISwpunù
 = 10,

85 
	m__ISw®num
 = 11,

87 
	m_ISwuµ”
 = 
_ISwb™
 (
__ISwuµ”
),

88 
	m_ISwlow”
 = 
_ISwb™
 (
__ISwlow”
),

89 
	m_ISw®pha
 = 
_ISwb™
 (
__ISw®pha
),

90 
	m_ISwdig™
 = 
_ISwb™
 (
__ISwdig™
),

91 
	m_ISwxdig™
 = 
_ISwb™
 (
__ISwxdig™
),

92 
	m_ISw¥aû
 = 
_ISwb™
 (
__ISw¥aû
),

93 
	m_ISw´št
 = 
_ISwb™
 (
__ISw´št
),

94 
	m_ISwg¿ph
 = 
_ISwb™
 (
__ISwg¿ph
),

95 
	m_ISwbÏnk
 = 
_ISwb™
 (
__ISwbÏnk
),

96 
	m_ISwúŒl
 = 
_ISwb™
 (
__ISwúŒl
),

97 
	m_ISwpunù
 = 
_ISwb™
 (
__ISwpunù
),

98 
	m_ISw®num
 = 
_ISwb™
 (
__ISw®num
)

103 
__BEGIN_DECLS


105 
__BEGIN_NAMESPACE_C99


112 
	$isw®num
 (
wšt_t
 
__wc
è
__THROW
;

118 
	$isw®pha
 (
wšt_t
 
__wc
è
__THROW
;

121 
	$iswúŒl
 (
wšt_t
 
__wc
è
__THROW
;

125 
	$iswdig™
 (
wšt_t
 
__wc
è
__THROW
;

129 
	$iswg¿ph
 (
wšt_t
 
__wc
è
__THROW
;

134 
	$iswlow”
 (
wšt_t
 
__wc
è
__THROW
;

137 
	$isw´št
 (
wšt_t
 
__wc
è
__THROW
;

142 
	$iswpunù
 (
wšt_t
 
__wc
è
__THROW
;

147 
	$isw¥aû
 (
wšt_t
 
__wc
è
__THROW
;

152 
	$iswuµ”
 (
wšt_t
 
__wc
è
__THROW
;

157 
	$iswxdig™
 (
wšt_t
 
__wc
è
__THROW
;

162 #ifdeà
__USE_ISOC99


163 
	$iswbÏnk
 (
wšt_t
 
__wc
è
__THROW
;

172 
wùy³_t
 
	$wùy³
 (
__cÚ¡
 *
__´İ”ty
è
__THROW
;

176 
	$iswùy³
 (
wšt_t
 
__wc
, 
wùy³_t
 
__desc
è
__THROW
;

177 
__END_NAMESPACE_C99


184 
__BEGIN_NAMESPACE_C99


187 
__cÚ¡
 
	t__št32_t
 *
	twù¿ns_t
;

188 
__END_NAMESPACE_C99


189 #ifdeà
__USE_GNU


190 
	$__USING_NAMESPACE_C99
(
wù¿ns_t
)

193 
__BEGIN_NAMESPACE_C99


195 
wšt_t
 
	$towlow”
 (
wšt_t
 
__wc
è
__THROW
;

198 
wšt_t
 
	$towuµ”
 (
wšt_t
 
__wc
è
__THROW
;

199 
__END_NAMESPACE_C99


201 
__END_DECLS


208 #ifdeà
_WCTYPE_H


214 
__BEGIN_DECLS


216 
__BEGIN_NAMESPACE_C99


219 
wù¿ns_t
 
	$wù¿ns
 (
__cÚ¡
 *
__´İ”ty
è
__THROW
;

222 
wšt_t
 
	$towù¿ns
 (
wšt_t
 
__wc
, 
wù¿ns_t
 
__desc
è
__THROW
;

223 
__END_NAMESPACE_C99


225 #ifdeà
__USE_XOPEN2K8


227 
	~<xloÿË.h
>

231 
	$isw®num_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

237 
	$isw®pha_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

240 
	$iswúŒl_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

244 
	$iswdig™_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

248 
	$iswg¿ph_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

253 
	$iswlow”_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

256 
	$isw´št_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

261 
	$iswpunù_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

266 
	$isw¥aû_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

271 
	$iswuµ”_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

276 
	$iswxdig™_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

281 
	$iswbÏnk_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

285 
wùy³_t
 
	$wùy³_l
 (
__cÚ¡
 *
__´İ”ty
, 
__loÿË_t
 
__loÿË
)

286 
__THROW
;

290 
	$iswùy³_l
 (
wšt_t
 
__wc
, 
wùy³_t
 
__desc
, 
__loÿË_t
 
__loÿË
)

291 
__THROW
;

299 
wšt_t
 
	$towlow”_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

302 
wšt_t
 
	$towuµ”_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

306 
wù¿ns_t
 
	$wù¿ns_l
 (
__cÚ¡
 *
__´İ”ty
, 
__loÿË_t
 
__loÿË
)

307 
__THROW
;

310 
wšt_t
 
	$towù¿ns_l
 (
wšt_t
 
__wc
, 
wù¿ns_t
 
__desc
,

311 
__loÿË_t
 
__loÿË
è
__THROW
;

315 
__END_DECLS


	@/usr/include/bits/setjmp.h

20 #iâdeà
_BITS_SETJMP_H


21 
	#_BITS_SETJMP_H
 1

	)

23 #ià!
defšed
 
_SETJMP_H
 && !defšed 
_PTHREAD_H


27 
	~<b™s/wÜdsize.h
>

29 #iâdeà
_ASM


31 #ià
__WORDSIZE
 == 64

32 
	t__jmp_buf
[8];

34 
	t__jmp_buf
[6];

	@/usr/include/sched.h

21 #iâdef 
_SCHED_H


22 
	#_SCHED_H
 1

	)

24 
	~<ã©u»s.h
>

27 
	~<b™s/ty³s.h
>

29 
	#__Ãed_size_t


	)

30 
	~<¡ddef.h
>

32 
	#__Ãed_time_t


	)

33 
	#__Ãed_time¥ec


	)

34 
	~<time.h
>

36 #iâdeà
__pid_t_defšed


37 
__pid_t
 
	tpid_t
;

38 
	#__pid_t_defšed


	)

43 
	~<b™s/sched.h
>

45 
	#sched_´iÜ™y
 
__sched_´iÜ™y


	)

48 
__BEGIN_DECLS


51 
	$sched_£¬am
 (
__pid_t
 
__pid
, 
__cÚ¡
 
sched_·¿m
 *
__·¿m
)

52 
__THROW
;

55 
	$sched_g‘·¿m
 (
__pid_t
 
__pid
, 
sched_·¿m
 *
__·¿m
è
__THROW
;

58 
	$sched_£tscheduËr
 (
__pid_t
 
__pid
, 
__pŞicy
,

59 
__cÚ¡
 
sched_·¿m
 *
__·¿m
è
__THROW
;

62 
	$sched_g‘scheduËr
 (
__pid_t
 
__pid
è
__THROW
;

65 
	$sched_y›ld
 (è
__THROW
;

68 
	$sched_g‘_´iÜ™y_max
 (
__®gÜ™hm
è
__THROW
;

71 
	$sched_g‘_´iÜ™y_mš
 (
__®gÜ™hm
è
__THROW
;

74 
	$sched_¼_g‘_š‹rv®
 (
__pid_t
 
__pid
, 
time¥ec
 *
__t
è
__THROW
;

77 #ifdeà
__USE_GNU


79 
	#CPU_SETSIZE
 
__CPU_SETSIZE


	)

80 
	#CPU_SET
(
ıu
, 
ıu£
è
	`__CPU_SET_S
 (ıu,  (
ıu_£t_t
), cpu£)

	)

81 
	#CPU_CLR
(
ıu
, 
ıu£
è
	`__CPU_CLR_S
 (ıu,  (
ıu_£t_t
), cpu£)

	)

82 
	#CPU_ISSET
(
ıu
, 
ıu£
è
	`__CPU_ISSET_S
 (ıu,  (
ıu_£t_t
), \

83 
ıu£
)

	)

84 
	#CPU_ZERO
(
ıu£
è
	`__CPU_ZERO_S
 ( (
ıu_£t_t
), cpu£)

	)

85 
	#CPU_COUNT
(
ıu£
è
	`__CPU_COUNT_S
 ( (
ıu_£t_t
), cpu£)

	)

87 
	#CPU_SET_S
(
ıu
, 
£tsize
, 
ıu£
è
	`__CPU_SET_S
 (ıu, s‘size, cpu£)

	)

88 
	#CPU_CLR_S
(
ıu
, 
£tsize
, 
ıu£
è
	`__CPU_CLR_S
 (ıu, s‘size, cpu£)

	)

89 
	#CPU_ISSET_S
(
ıu
, 
£tsize
, 
ıu£
è
	`__CPU_ISSET_S
 (cpu, setsize, \

90 
ıu£
)

	)

91 
	#CPU_ZERO_S
(
£tsize
, 
ıu£
è
	`__CPU_ZERO_S
 (£tsize, cpu£)

	)

92 
	#CPU_COUNT_S
(
£tsize
, 
ıu£
è
	`__CPU_COUNT_S
 (£tsize, cpu£)

	)

94 
	#CPU_EQUAL
(
ıu£1
, 
ıu£2
) \

95 
	`__CPU_EQUAL_S
 ( (
ıu_£t_t
), 
ıu£1
, 
ıu£2
)

	)

96 
	#CPU_EQUAL_S
(
£tsize
, 
ıu£1
, 
ıu£2
) \

97 
	`__CPU_EQUAL_S
 (
£tsize
, 
ıu£1
, 
ıu£2
)

	)

99 
	#CPU_AND
(
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

100 
	`__CPU_OP_S
 ( (
ıu_£t_t
), 
de¡£t
, 
¤c£t1
, 
¤c£t2
, &)

	)

101 
	#CPU_OR
(
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

102 
	`__CPU_OP_S
 ( (
ıu_£t_t
), 
de¡£t
, 
¤c£t1
, 
¤c£t2
, |)

	)

103 
	#CPU_XOR
(
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

104 
	`__CPU_OP_S
 ( (
ıu_£t_t
), 
de¡£t
, 
¤c£t1
, 
¤c£t2
, ^)

	)

105 
	#CPU_AND_S
(
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

106 
	`__CPU_OP_S
 (
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
, &)

	)

107 
	#CPU_OR_S
(
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

108 
	`__CPU_OP_S
 (
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
, |)

	)

109 
	#CPU_XOR_S
(
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

110 
	`__CPU_OP_S
 (
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
, ^)

	)

112 
	#CPU_ALLOC_SIZE
(
couÁ
è
	`__CPU_ALLOC_SIZE
 (couÁ)

	)

113 
	#CPU_ALLOC
(
couÁ
è
	`__CPU_ALLOC
 (couÁ)

	)

114 
	#CPU_FREE
(
ıu£t
è
	`__CPU_FREE
 (ıu£t)

	)

118 
	$sched_£ffš™y
 (
__pid_t
 
__pid
, 
size_t
 
__ıu£tsize
,

119 
__cÚ¡
 
ıu_£t_t
 *
__ıu£t
è
__THROW
;

122 
	$sched_g‘affš™y
 (
__pid_t
 
__pid
, 
size_t
 
__ıu£tsize
,

123 
ıu_£t_t
 *
__ıu£t
è
__THROW
;

126 
__END_DECLS


	@/usr/include/bits/sched.h

22 #iâdeà
__Ãed_sched·¿m


24 #iâdeà
_SCHED_H


30 
	#SCHED_OTHER
 0

	)

31 
	#SCHED_FIFO
 1

	)

32 
	#SCHED_RR
 2

	)

33 #ifdeà
__USE_GNU


34 
	#SCHED_BATCH
 3

	)

35 
	#SCHED_IDLE
 5

	)

37 
	#SCHED_RESET_ON_FORK
 0x40000000

	)

40 #ifdeà
__USE_MISC


42 
	#CSIGNAL
 0x000000fà

	)

43 
	#CLONE_VM
 0x00000100

	)

44 
	#CLONE_FS
 0x00000200

	)

45 
	#CLONE_FILES
 0x00000400

	)

46 
	#CLONE_SIGHAND
 0x00000800

	)

47 
	#CLONE_PTRACE
 0x00002000

	)

48 
	#CLONE_VFORK
 0x00004000

	)

50 
	#CLONE_PARENT
 0x00008000

	)

52 
	#CLONE_THREAD
 0x00010000

	)

53 
	#CLONE_NEWNS
 0x00020000

	)

54 
	#CLONE_SYSVSEM
 0x00040000

	)

55 
	#CLONE_SETTLS
 0x00080000

	)

56 
	#CLONE_PARENT_SETTID
 0x00100000

	)

58 
	#CLONE_CHILD_CLEARTID
 0x00200000

	)

60 
	#CLONE_DETACHED
 0x00400000

	)

61 
	#CLONE_UNTRACED
 0x00800000

	)

63 
	#CLONE_CHILD_SETTID
 0x01000000

	)

65 
	#CLONE_NEWUTS
 0x04000000

	)

66 
	#CLONE_NEWIPC
 0x08000000

	)

67 
	#CLONE_NEWUSER
 0x10000000

	)

68 
	#CLONE_NEWPID
 0x20000000

	)

69 
	#CLONE_NEWNET
 0x40000000

	)

70 
	#CLONE_IO
 0x80000000

	)

74 
	ssched_·¿m


76 
	m__sched_´iÜ™y
;

79 
	g__BEGIN_DECLS


81 #ifdeà
__USE_MISC


83 
şÚe
 ((*
__â
è(*
__¬g
), *
__chd_¡ack
,

84 
__æags
, *
__¬g
, ...è
__THROW
;

87 
	$unsh¬e
 (
__æags
è
__THROW
;

90 
	$sched_g‘ıu
 (è
__THROW
;

93 
__END_DECLS


97 #ià!
defšed
 
__defšed_sched·¿m
 \

98 && (
defšed
 
__Ãed_sched·¿m
 || defšed 
_SCHED_H
)

99 
	#__defšed_sched·¿m
 1

	)

101 
	s__sched_·¿m


103 
__sched_´iÜ™y
;

105 #undeà
__Ãed_sched·¿m


109 #ià
defšed
 
_SCHED_H
 && !defšed 
__ıu_£t_t_defšed


110 
	#__ıu_£t_t_defšed


	)

112 
	#__CPU_SETSIZE
 1024

	)

113 
	#__NCPUBITS
 (8 *  (
__ıu_mask
))

	)

116 
	t__ıu_mask
;

119 
	#__CPUELT
(
ıu
è((ıuè/ 
__NCPUBITS
)

	)

120 
	#__CPUMASK
(
ıu
è((
__ıu_mask
è1 << ((ıuè% 
__NCPUBITS
))

	)

125 
__ıu_mask
 
__b™s
[
__CPU_SETSIZE
 / 
__NCPUBITS
];

126 } 
	tıu_£t_t
;

129 #ià
	`__GNUC_PREREQ
 (2, 91)

130 
	#__CPU_ZERO_S
(
£tsize
, 
ıu£
) \

131 dØ
	`__butš_mem£t
 (
ıu£
, '\0', 
£tsize
); 0)

	)

133 
	#__CPU_ZERO_S
(
£tsize
, 
ıu£
) \

135 
size_t
 
__i
; \

136 
size_t
 
__imax
 = (
£tsize
è/  (
__ıu_mask
); \

137 
__ıu_mask
 *
__b™s
 = (
ıu£
)->__bits; \

138 
__i
 = 0; __˜< 
__imax
; ++__i) \

139 
__b™s
[
__i
] = 0; \

140 
	}
} 0)

	)

142 
	#__CPU_SET_S
(
ıu
, 
£tsize
, 
ıu£
) \

143 (
__ex‹nsiÚ__
 \

144 ({ 
size_t
 
__ıu
 = (
ıu
); \

145 
__ıu
 < 8 * (
£tsize
) \

146 ? (((
__ıu_mask
 *è((
ıu£
)->
__b™s
))[
	`__CPUELT
 (
__ıu
)] \

147 |ğ
	`__CPUMASK
 (
__ıu
)) \

148 : 0; }))

	)

149 
	#__CPU_CLR_S
(
ıu
, 
£tsize
, 
ıu£
) \

150 (
__ex‹nsiÚ__
 \

151 ({ 
size_t
 
__ıu
 = (
ıu
); \

152 
__ıu
 < 8 * (
£tsize
) \

153 ? (((
__ıu_mask
 *è((
ıu£
)->
__b™s
))[
	`__CPUELT
 (
__ıu
)] \

154 &ğ~
	`__CPUMASK
 (
__ıu
)) \

155 : 0; }))

	)

156 
	#__CPU_ISSET_S
(
ıu
, 
£tsize
, 
ıu£
) \

157 (
__ex‹nsiÚ__
 \

158 ({ 
size_t
 
__ıu
 = (
ıu
); \

159 
__ıu
 < 8 * (
£tsize
) \

160 ? ((((
__cÚ¡
 
__ıu_mask
 *è((
ıu£
)->
__b™s
))[
	`__CPUELT
 (
__ıu
)] \

161 & 
	`__CPUMASK
 (
__ıu
))) != 0 \

162 : 0; }))

	)

164 
	#__CPU_COUNT_S
(
£tsize
, 
ıu£
) \

165 
	`__sched_ıucouÁ
 (
£tsize
, 
ıu£
)

	)

167 #ià
__GNUC_PREREQ
 (2, 91)

168 
	#__CPU_EQUAL_S
(
£tsize
, 
ıu£1
, 
ıu£2
) \

169 (
	`__butš_memcmp
 (
ıu£1
, 
ıu£2
, 
£tsize
è=ğ0)

	)

171 
	#__CPU_EQUAL_S
(
£tsize
, 
ıu£1
, 
ıu£2
) \

172 (
__ex‹nsiÚ__
 \

173 ({ 
__cÚ¡
 
__ıu_mask
 *
__¬r1
 = (
ıu£1
)->
__b™s
; \

174 
__cÚ¡
 
__ıu_mask
 *
__¬r2
 = (
ıu£2
)->
__b™s
; \

175 
size_t
 
__imax
 = (
£tsize
è/  (
__ıu_mask
); \

176 
size_t
 
__i
; \

177 
__i
 = 0; __˜< 
__imax
; ++__i) \

178 ià(
__b™s
[
__i
] != __bits[__i]) \

180 
__i
 =ğ
__imax
; }))

	)

183 
	#__CPU_OP_S
(
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
, 
İ
) \

184 (
__ex‹nsiÚ__
 \

185 ({ 
ıu_£t_t
 *
__de¡
 = (
de¡£t
); \

186 
__cÚ¡
 
__ıu_mask
 *
__¬r1
 = (
¤c£t1
)->
__b™s
; \

187 
__cÚ¡
 
__ıu_mask
 *
__¬r2
 = (
¤c£t2
)->
__b™s
; \

188 
size_t
 
__imax
 = (
£tsize
è/  (
__ıu_mask
); \

189 
size_t
 
__i
; \

190 
__i
 = 0; __˜< 
__imax
; ++__i) \

191 ((
__ıu_mask
 *è
__de¡
->
__b™s
)[
__i
] = 
__¬r1
[__i] 
İ
 
__¬r2
[__i]; \

192 
__de¡
; }))

	)

194 
	#__CPU_ALLOC_SIZE
(
couÁ
) \

195 ((((
couÁ
è+ 
__NCPUBITS
 - 1è/ __NCPUBITSè*  (
__ıu_mask
))

	)

196 
	#__CPU_ALLOC
(
couÁ
è
	`__sched_ıu®loc
 (couÁ)

	)

197 
	#__CPU_FREE
(
ıu£t
è
	`__sched_ıuä“
 (ıu£t)

	)

199 
__BEGIN_DECLS


201 
	$__sched_ıucouÁ
 (
size_t
 
__£tsize
, cÚ¡ 
ıu_£t_t
 *
__£
)

202 
__THROW
;

203 
ıu_£t_t
 *
	$__sched_ıu®loc
 (
size_t
 
__couÁ
è
__THROW
 
__wur
;

204 
	$__sched_ıuä“
 (
ıu_£t_t
 *
__£t
è
__THROW
;

206 
__END_DECLS


	@
1
.
1
/usr/include
302
8954
Banks/BankFactory.cpp
Banks/BankFactory.h
Banks/CachedDDR3Bank/CachedDDR3Bank.cpp
Banks/CachedDDR3Bank/CachedDDR3Bank.h
Banks/DDR3Bank/DDR3Bank.cpp
Banks/DDR3Bank/DDR3Bank.h
DataEncoders/DataEncoderFactory.cpp
DataEncoders/DataEncoderFactory.h
DataEncoders/FlipNWrite/FlipNWrite.cpp
DataEncoders/FlipNWrite/FlipNWrite.h
Decoders/DRCDecoder/DRCDecoder.cpp
Decoders/DRCDecoder/DRCDecoder.h
Decoders/DecoderFactory.cpp
Decoders/DecoderFactory.h
Decoders/Migrator/Migrator.cpp
Decoders/Migrator/Migrator.h
Endurance/BitModel/BitModel.cpp
Endurance/BitModel/BitModel.h
Endurance/ByteModel/ByteModel.cpp
Endurance/ByteModel/ByteModel.h
Endurance/Distributions/Normal.cpp
Endurance/Distributions/Normal.h
Endurance/Distributions/Uniform.cpp
Endurance/Distributions/Uniform.h
Endurance/EnduranceDistributionFactory.cpp
Endurance/EnduranceDistributionFactory.h
Endurance/EnduranceModelFactory.cpp
Endurance/EnduranceModelFactory.h
Endurance/NullModel/NullModel.cpp
Endurance/NullModel/NullModel.h
Endurance/RowModel/RowModel.cpp
Endurance/RowModel/RowModel.h
Endurance/WordModel/WordModel.cpp
Endurance/WordModel/WordModel.h
FaultModels/ECP/ECP.cpp
FaultModels/ECP/ECP.h
Interconnect/InterconnectFactory.cpp
Interconnect/InterconnectFactory.h
Interconnect/OffChipBus/OffChipBus.cpp
Interconnect/OffChipBus/OffChipBus.h
Interconnect/OnChipBus/OnChipBus.cpp
Interconnect/OnChipBus/OnChipBus.h
MemControl/DRAMCache/AbstractDRAMCache.h
MemControl/DRAMCache/DRAMCache.cpp
MemControl/DRAMCache/DRAMCache.h
MemControl/FCFS/FCFS.cpp
MemControl/FCFS/FCFS.h
MemControl/FRFCFS-WQF/FRFCFS-WQF.cpp
MemControl/FRFCFS-WQF/FRFCFS-WQF.h
MemControl/FRFCFS/FRFCFS.cpp
MemControl/FRFCFS/FRFCFS.h
MemControl/LH-Cache/LH-Cache.cpp
MemControl/LH-Cache/LH-Cache.h
MemControl/LO-Cache/LO-Cache.cpp
MemControl/LO-Cache/LO-Cache.h
MemControl/MemoryControllerFactory.cpp
MemControl/MemoryControllerFactory.h
MemControl/MissMap/MissMap.cpp
MemControl/MissMap/MissMap.h
MemControl/PerfectMemory/PerfectMemory.cpp
MemControl/PerfectMemory/PerfectMemory.h
MemControl/PredictorDRC/PredictorDRC.cpp
MemControl/PredictorDRC/PredictorDRC.h
MemControl/RBLA-Dyn/RBLA_DRAMCache.cpp
MemControl/RBLA-Dyn/RBLA_DRAMCache.h
MemControl/RBLA-Dyn/older/DRAMBuffer.h
MemControl/RBLA-Dyn/older/RBLA_Dyn.cpp
MemControl/RBLA-Dyn/older/RBLA_Dyn.h
MemControl/RBLA-Dyn/older/StatsStore.cpp
MemControl/RBLA-Dyn/older/StatsStore.h
MemControl/RBLA-MEM/MigrationBuffer.h
MemControl/RBLA-MEM/RBLA_MainMemory.cpp
MemControl/RBLA-MEM/RBLA_MainMemory.h
MemControl/RBLA-MEM/StatsStore.hh
NVM/bk/nvmain.cpp
NVM/bk/nvmain.h
NVM/nvmain.cpp
NVM/nvmain.h
Prefetchers/NaivePrefetcher/NaivePrefetcher.cpp
Prefetchers/NaivePrefetcher/NaivePrefetcher.h
Prefetchers/PrefetcherFactory.cpp
Prefetchers/PrefetcherFactory.h
Prefetchers/STeMS/STeMS.cpp
Prefetchers/STeMS/STeMS.h
Ranks/RankFactory.cpp
Ranks/RankFactory.h
Ranks/StandardRank/StandardRank.cpp
Ranks/StandardRank/StandardRank.h
SimInterface/Gem5Interface/Gem5Interface.cpp
SimInterface/Gem5Interface/Gem5Interface.h
SimInterface/GemsInterface/GemsInterface.cpp
SimInterface/GemsInterface/GemsInterface.h
SimInterface/NullInterface/NullInterface.cpp
SimInterface/NullInterface/NullInterface.h
Simulators/gem5/NVMainControl.cc
Simulators/gem5/NVMainControl.hh
Simulators/gem5/nvmain_mem.cc
Simulators/gem5/nvmain_mem.hh
Utils/AccessPredictor/AccessPredictor.cpp
Utils/AccessPredictor/AccessPredictor.h
Utils/AccessPredictor/AccessPredictorFactory.cpp
Utils/AccessPredictor/AccessPredictorFactory.h
Utils/AccessPredictor/PerfectPredictor/PerfectPredictor.cpp
Utils/AccessPredictor/PerfectPredictor/PerfectPredictor.h
Utils/AccessPredictor/VariablePredictor/VariablePredictor.cpp
Utils/AccessPredictor/VariablePredictor/VariablePredictor.h
Utils/Caches/CacheAssoc.cpp
Utils/Caches/CacheAssoc.h
Utils/Caches/CacheBank.cpp
Utils/Caches/CacheBank.h
Utils/Caches/CacheBlock.hh
Utils/Caches/CacheSet.cpp
Utils/Caches/CacheSet.h
Utils/Caches/bk.CacheBank.h
Utils/CoinMigrator/CoinMigrator.cpp
Utils/CoinMigrator/CoinMigrator.h
Utils/HookFactory.cpp
Utils/HookFactory.h
Utils/PostTrace/PostTrace.cpp
Utils/PostTrace/PostTrace.h
Utils/RequestTracer/RequestTracer.cpp
Utils/RequestTracer/RequestTracer.h
Utils/SelfDefinedMigrator/DynHotPageMigrator.h
Utils/SelfDefinedMigrator/DynamicHotPageMigrator.h
Utils/SelfDefinedMigrator/SelfDefinedMigrator.cpp
Utils/SelfDefinedMigrator/SelfDefinedMigrator.h
Utils/SelfDefinedMigrator/StaticHotPageMigrator.cpp
Utils/SelfDefinedMigrator/StaticHotPageMigrator.h
Utils/SelfDefinedMigrator/StaticMigrator.cpp
Utils/SelfDefinedMigrator/StaticMigrator.h
Utils/SelfDefinedMigrator/self_defined.cpp
Utils/Visualizer/Visualizer.cpp
Utils/Visualizer/Visualizer.h
include/CacheBlock.hh
include/CacheSet.hh
include/CommonCallBack.hh
include/CommonEnums.h
include/CommonHeaders.h
include/CommonMath.cpp
include/CommonMath.h
include/Exception.h
include/FailReasons.h
include/NVMAddress.cpp
include/NVMAddress.h
include/NVMDataBlock.cpp
include/NVMDataBlock.h
include/NVMHelpers.cpp
include/NVMHelpers.h
include/NVMTypes.h
include/NVMainRequest.h
include/StatsStoreBlock.hh
include/global_vars.h
src/AddressTranslator.cpp
src/AddressTranslator.h
src/Bank.cpp
src/Bank.h
src/Config.cpp
src/Config.h
src/DataEncoder.cpp
src/DataEncoder.h
src/Debug.cpp
src/Debug.h
src/EnduranceDistribution.h
src/EnduranceModel.cpp
src/EnduranceModel.h
src/EventQueue.cpp
src/EventQueue.h
src/FaultModel.cpp
src/FaultModel.h
src/Interconnect.cpp
src/Interconnect.h
src/MemoryController.cpp
src/MemoryController.h
src/NVMObject.cpp
src/NVMObject.h
src/Params.cpp
src/Params.h
src/Prefetcher.cpp
src/Prefetcher.h
src/Rank.cpp
src/Rank.h
src/SimInterface.cpp
src/SimInterface.h
src/Stats.cpp
src/Stats.h
src/SubArray.cpp
src/SubArray.h
src/TagGenerator.cpp
src/TagGenerator.h
src/TranslationMethod.cpp
src/TranslationMethod.h
src/bk/MemoryController.cpp
src/bk/MemoryController.h
traceReader/GenericTraceReader.h
traceReader/NVMainTrace/NVMainTraceReader.cpp
traceReader/NVMainTrace/NVMainTraceReader.h
traceReader/RubyTrace/RubyTraceReader.cpp
traceReader/RubyTrace/RubyTraceReader.h
traceReader/TraceLine.cpp
traceReader/TraceLine.h
traceReader/TraceReaderFactory.cpp
traceReader/TraceReaderFactory.h
traceSim/traceMain.cpp
traceSim/traceMain.h
traceWriter/DRAMPower2Trace/DRAMPower2TraceWriter.cpp
traceWriter/DRAMPower2Trace/DRAMPower2TraceWriter.h
traceWriter/GenericTraceWriter.cpp
traceWriter/GenericTraceWriter.h
traceWriter/NVMainTrace/NVMainTraceWriter.cpp
traceWriter/NVMainTrace/NVMainTraceWriter.h
traceWriter/TraceWriterFactory.cpp
traceWriter/TraceWriterFactory.h
traceWriter/VerilogTrace/VerilogTraceWriter.cpp
traceWriter/VerilogTrace/VerilogTraceWriter.h
/usr/include/assert.h
/usr/include/fcntl.h
/usr/include/math.h
/usr/include/signal.h
/usr/include/stdint.h
/usr/include/stdio.h
/usr/include/stdlib.h
/usr/include/string.h
/usr/include/sys/ipc.h
/usr/include/sys/mman.h
/usr/include/sys/shm.h
/usr/include/unistd.h
/usr/include/alloca.h
/usr/include/bits/confname.h
/usr/include/bits/environments.h
/usr/include/bits/fcntl.h
/usr/include/bits/fcntl2.h
/usr/include/bits/huge_val.h
/usr/include/bits/huge_valf.h
/usr/include/bits/huge_vall.h
/usr/include/bits/inf.h
/usr/include/bits/ipc.h
/usr/include/bits/ipctypes.h
/usr/include/bits/mathcalls.h
/usr/include/bits/mathdef.h
/usr/include/bits/mathinline.h
/usr/include/bits/mman.h
/usr/include/bits/nan.h
/usr/include/bits/posix_opt.h
/usr/include/bits/pthreadtypes.h
/usr/include/bits/shm.h
/usr/include/bits/sigaction.h
/usr/include/bits/sigcontext.h
/usr/include/bits/siginfo.h
/usr/include/bits/signum.h
/usr/include/bits/sigset.h
/usr/include/bits/sigstack.h
/usr/include/bits/sigthread.h
/usr/include/bits/stat.h
/usr/include/bits/stdio-ldbl.h
/usr/include/bits/stdio.h
/usr/include/bits/stdio2.h
/usr/include/bits/stdio_lim.h
/usr/include/bits/stdlib-ldbl.h
/usr/include/bits/stdlib.h
/usr/include/bits/string.h
/usr/include/bits/string2.h
/usr/include/bits/string3.h
/usr/include/bits/sys_errlist.h
/usr/include/bits/types.h
/usr/include/bits/unistd.h
/usr/include/bits/waitflags.h
/usr/include/bits/waitstatus.h
/usr/include/bits/wchar.h
/usr/include/bits/wordsize.h
/usr/include/features.h
/usr/include/getopt.h
/usr/include/libio.h
/usr/include/sys/types.h
/usr/include/sys/ucontext.h
/usr/include/time.h
/usr/include/xlocale.h
/usr/include/_G_config.h
/usr/include/bits/libio-ldbl.h
/usr/include/bits/stdio-lock.h
/usr/include/bits/time.h
/usr/include/bits/typesizes.h
/usr/include/bits/uio.h
/usr/include/ctype.h
/usr/include/endian.h
/usr/include/gnu/stubs.h
/usr/include/sys/cdefs.h
/usr/include/sys/select.h
/usr/include/sys/sysmacros.h
/usr/include/bits/byteswap.h
/usr/include/bits/endian.h
/usr/include/bits/libc-lock.h
/usr/include/bits/select.h
/usr/include/gconv.h
/usr/include/gnu/stubs-64.h
/usr/include/wchar.h
/usr/include/bits/wchar-ldbl.h
/usr/include/bits/wchar2.h
/usr/include/pthread.h
/usr/include/wctype.h
/usr/include/bits/setjmp.h
/usr/include/sched.h
/usr/include/bits/sched.h
